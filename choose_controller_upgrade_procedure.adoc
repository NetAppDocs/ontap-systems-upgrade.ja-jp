---
permalink: choose_controller_upgrade_procedure.html 
sidebar: sidebar 
keywords:  
summary: 一般に、コントローラハードウェアのアップグレード方法は、元のノードのプラットフォームモデルによって異なります。アップグレードするには、アグリゲートまたはボリュームストレージを移動するか（無停止の手順）、またはストレージを移動します（停止を伴う手順）。 
---
= コントローラハードウェアのアップグレード手順を選択
:allow-uri-read: 
:icons: font
:imagesdir: ./media/


[role="lead"]
一般に、コントローラハードウェアのアップグレード方法は、元のノードのプラットフォームモデルによって異なります。アップグレードするには、アグリゲートの再配置またはボリュームの移動（どちらも無停止の手順）、またはストレージを移動（停止を伴う手順）します。元のノードと新しいノードでONTAPのバージョンが異なる場合は、ハードウェアのアップグレードを開始する前にソフトウェアのアップグレードを実行しなければならないことがあります。


NOTE: ASA R2交換システムへのASAアップグレードはサポートされていません。ASAからASA R2システムへのデータの移行については、を参照してくださいlink:https://docs.netapp.com/us-en/asa-r2/install-setup/set-up-data-access.html["SANホストからASA R2ストレージシステムへのデータアクセスを有効にする"^]。



== どのアップグレード手順を使用すればよいですか?

適切なアップグレード手順を選択するには、下の表に記載されているすべての質問を確認してください。

[cols="30,70"]
|===
| 自分自身に問いかけてみましょう… | 答えが「はい」であれば、これを行うことができます... 


| 元のノードと新しいノードで異なるソフトウェア バージョンを実行していますか? | 元のノード上のONTAPバージョンを、サポートされている最高バージョンにアップグレードします。可能であれば、新しいノードは元のノードで実行されているONTAPバージョンをサポートする必要があります。これが不可能な場合は、link:https://docs.netapp.com/us-en/ontap/upgrade/prepare.html["ONTAPのバージョンをアップグレードする"^]元のノードをサポートされている最高バージョンにアップグレードします。元のノードと新しいノード間のバージョンの差は 4 を超えることはできません。たとえば、 ONTAP 9.8 および 9.12.1 はサポートされていますが、 ONTAP 9.8 および 9.13.1 はサポートされていません。link:https://docs.netapp.com/us-en/ontap/upgrade/concept_mixed_version_requirements.html["バージョンが混在したONTAPクラスタに関する詳細情報"^]。 


| 中断を伴うアップグレードを実行しますか? | link:upgrade/upgrade-decide-to-use-this-guide.html["ストレージを移動してアップグレード"]。これには、元のシステムのデータを保存するための独自のストレージと棚を備えた新しいシステムが必要です。特定のアップグレードでは、コントローラ シェルフからの変換が可能です。 


| 中断のないアップグレードを実行しますか?  a| 
次のいずれかの方法でアップグレードします。

* link:upgrade/upgrade-decide-to-use-this-guide.html["ボリュームを移動する"]
+
これには、新しいノードを結合し、ボリュームと LIF を新しいノードに移動し、クラスターから削除するノードを結合解除する必要があります。2 ノードのスイッチレス クラスターをアップグレードする場合は、新しいノードを追加する前に、クラスター スイッチのペアを使用してスイッチ接続クラスターに変換します。

* link:upgrade-arl/index.html["集約再配置を使用する"]
+
ARL は交換手順です。新しいノードを使用してクラスターを拡張および縮小する必要がないため、2 ノードのスイッチレス クラスターには有利です。ボリュームを移動するときに、アグリゲートを再配置してデータを移動すると、アグリゲート間でデータをコピーするよりも高速になります。





| モジュラーシステムはありますか?  *注*: モジュラー システムでは、コントローラには内部ディスクがなく、すべてのストレージは外部接続されたシェルフ内にあります。 | link:upgrade-arl/index.html["アグリゲートの再配置を使用したアップグレード"]。 


| 統合システムがあり、ボリュームを移動してアップグレードしたいですか? *注*: 統合システムでは、コントローラには内部ディスクがあり、ストレージはコントローラ シャーシ内と外部接続されたシェルフに収容されています。外部シェルフはストレージ拡張用であり、すべてのシステム構成に含まれているとは限りません。  a| 
. link:https://hwu.netapp.com/DetailViews/Home.aspx["システムがサポートされていることを確認する"^]。
. link:upgrade/upgrade-decide-to-use-this-guide.html["ボリュームを移動してアップグレード"]。




| 統合システムがあり、既存のシャーシとディスクを維持しながら、コントローラー モジュールのみを交換してアップグレードしたいと考えていますか? | link:upgrade-arl-auto-affa900/index.html["同じシャーシとディスクを維持しながら、ARL を使用してアップグレードします。"]。 


| SVM を再配置していますか? | 参照link:https://docs.netapp.com/us-en/ontap/svm-migrate/index.html#svm-migration-workflow["SVMのデータ移動 - 概要"^]。 


| MetroCluster構成をアップグレードしていますか? | 参照link:https://docs.netapp.com/us-en/ontap-metrocluster/upgrade/concept_choosing_an_upgrade_method_mcc.html["MetroCluster 構成をアップグレード、更新、または拡張します"^]。 


| 個々のコンポーネントを交換するのですか? | 参照link:https://docs.netapp.com/us-en/ontap-systems/index.html["ONTAPハードウェアシステムのドキュメント"^]そのコンポーネントのフィールド交換可能ユニット (FRU) のチラシを見つけます。 
|===


== 例: FAS9500からFAS90へのアップグレード

この例では、 FAS9500から FAS90 コントローラーへのアップグレードの可能な回答を示します。

[cols="30,70"]
|===
| 質問 | 回答例 


| 元のノードと新しいノードで異なるソフトウェア バージョンを実行していますか? | いいえFAS9500と FAS90 はどちらもONTAP 9.15.1 を実行します。 


| 中断を伴うアップグレードを実行しますか? | いいえ。アップグレード中も実稼働環境をオンラインのままにしておきたいのです。 


| 中断のないアップグレードを実行しますか? | ○システムがモジュラー式か統合式かに応じて、ボリュームを移動するか、アグリゲート再配置 (ARL) を使用することでアップグレードできます。 


| モジュラーシステムはありますか? | ○FAS9500は、外部ストレージ シェルフを備えたモジュラー システムです。  ARL を使ってアップグレードできます。 


| 統合システムがあり、ボリュームを移動してアップグレードしたいですか? | いいえFAS9500はモジュラー システムなので、これは適用されません。 


| 統合システムがあり、既存のシャーシとディスクを維持しながら、コントローラー モジュールのみを交換してアップグレードしたいと考えていますか? | いいえFAS9500はモジュラー システムなので、これは適用されません。 


| SVM を再配置していますか? | いいえ。同じ SVM を維持しながらハードウェアをアップグレードしています。 


| MetroCluster構成をアップグレードしていますか? | いいえ。これは標準の HA ペア クラスタです。 


| 個々のコンポーネントを交換するのですか? | いいえ。コントローラーシステム全体をアップグレードしています。 
|===
*この例の推奨アップグレード パス:*link:upgrade-arl/index.html["ARLを使用したアップグレード"] FAS9500はモジュラー システムであり、ARL は中断のないアップグレード方法を提供するためです。
