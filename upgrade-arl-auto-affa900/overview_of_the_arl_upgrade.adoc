---
sidebar: sidebar 
permalink: upgrade-arl-auto-affa900/overview_of_the_arl_upgrade.html 
keywords: overview, arl, upgrade, owner, controller, hardware 
summary: ARL を使用してノードをアップグレードする前に、手順の動作について理解しておく必要があります。 
---
= ARL アップグレードの概要
:hardbreaks:
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
ARL を使用してノードをアップグレードする前に、手順の動作について理解しておく必要があります。このコンテンツでは、手順はいくつかの段階に分かれています。

手順では、交換用コントローラハードウェアを使用して元のコントローラハードウェアを一度に 1 台ずつアップグレードし、 HA ペア構成を利用してルート以外のアグリゲートの所有権を切り替えます。すべてのルート以外のアグリゲートで、アップグレード後の正しいノードである最終デスティネーションに到達するために、 2 つの再配置を実行する必要があります。

各アグリゲートにはホーム所有者と現在の所有者があります。ホーム所有者はアグリゲートの実際の所有者であり、現在の所有者は一時的な所有者です。

次の表に、各フェーズで実行するタスクの概要と、そのフェーズの最後で実行したアグリゲートの所有権の状態を示します。詳細な手順については、手順の後半で説明します。

[cols="35,65"]
|===
| 段階 | 手順 


| ステージ 1 ：アップグレードの準備  a| 
. 事前確認を実行して、処理が実行可能であることを確認します
. 事前確認が失敗した場合にアグリゲートの所有権を修正
. クラスタベースライセンスキーを入力します
. ストレージ暗号化の IP アドレスを取得します
. KMIP サーバを使用して認証を管理します
. オンボードキーマネージャ（ OKM ）を使用したストレージ暗号化の管理
. SnapMirror 関係を休止します（オプション）。


ステージ 1 終了時のアグリゲートの所有権：

* node1 は、 node1 アグリゲートのホーム所有者と現在の所有者です
* node2 には、 node2 アグリゲートのホーム所有者と現在の所有者を指定します




| ステージ 2 ：ノード 1 からリソースを再配置し、 AFF A700 node1 を撤去  a| 
. ノード 1 が所有するルート以外のアグリゲートと NAS データ LIF をノード 2 に再配置します
. 障害が発生したアグリゲートを再配置するか
. ノード 1 を撤去
. AFF A700 コントローラモジュールと NVS モジュールを取り外します
. AFF A900 NVS とコントローラモジュールを node1 に取り付けます
. ネットブートノード 1


ステージ 2 終了時のアグリゲートの所有権：

* node2 には、 node1 アグリゲートの現在の所有者を指定します
* node2 には、 node2 アグリゲートのホーム所有者と現在の所有者を指定します




| ステージ 3 ： AFF A900 コントローラモジュール NVS を使用して node1 をブートします  a| 
. AFF A900 コントローラモジュールと NVS を使用してノード 1 をブートします
. node1 が正常にインストールされたことを確認します
. ノード 1 のネットワーク設定をリストアします
. アップグレードした node1 でキー管理ツールの設定をリストアします
. ノード 1 が所有するルート以外のアグリゲートと NAS データ LIF を node2 からアップグレードした node1 に移動します


ステージ 3 終了時のアグリゲートの所有権：

* アップグレード後の AFF A900 node1 は、ノード 1 アグリゲートのホーム所有者および現在の所有者です
* node2 には、 node2 アグリゲートのホーム所有者と現在の所有者を指定します




| ステージ 4 ：リソースを node2 から再配置し、 node2 を撤去  a| 
. ルート以外のアグリゲートと NAS データ LIF を node2 から node1 に再配置します
. ノード 2 を撤去


ステージ 4 終了時のアグリゲートの所有権：

* アップグレードした node1 は、元は node1 に属していたアグリゲートのホーム所有者および現在の所有者です
* node2 には、 node2 アグリゲートのホーム所有者を指定します
* アップグレードした node1 は、 node2 アグリゲートの現在の所有者です




| ステージ 5 ： AFF A900 NVS とコントローラモジュールを node2 に取り付けます  a| 
. AFF A900 NVS とコントローラモジュールを node2 に取り付けます
. ネットブート node2


ステージ 5 終了時のアグリゲートの所有権：

* node1 は、 node1 に属していたアグリゲートのホーム所有者と現在の所有者です。
* アップグレードされた node2 は、元々 node2 に属していたアグリゲートのホーム所有者と現在の所有者です。




| ステージ 6 ： AFF A900 コントローラモジュールと NVS を使用して node2 をブートします  a| 
. AFF A900 コントローラモジュールと NVS を使用して node2 をブートします
. node2 が正しくインストールされていることを確認します
. node2 のネットワーク設定をリストアします
. ルート以外のアグリゲートと NAS データ LIF を node2 に戻します




| ステージ 7 ：アップグレードを完了する  a| 
. 新しいコントローラが正しくセットアップされていることを確認します
. 新しいコントローラモジュールで Storage Encryption をセットアップします
. 新しいコントローラモジュールで NetApp Volume Encryption をセットアップします。
. 古いシステムの運用を停止
. NetApp SnapMirror 処理を再開します


|===