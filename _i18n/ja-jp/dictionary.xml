<?xml version="1.0" encoding="UTF-8"?>
<blocks>
  <block id="1a02fe8fc6a186319dd3345573fc3717" category="doc">ノード 4 をインストールしてブートします</block>
  <block id="75586863c552442d574a9bbfc3a0d408" category="paragraph">ノード 4 をラックに設置し、ノード 2 の接続をノード 4 に転送し、ノード 4 をブートして、 ONTAP をインストールする必要があります。次に、このセクションで説明するように、ノード 2 のスペアディスク、ルートボリュームに属するディスク、およびプロセスの前にノード 3 に再配置されなかったルート以外のアグリゲートを再割り当てする必要があります。</block>
  <block id="550ffaa7219faf74146770514db0d8e8" category="inline-link-macro">ネットブートを準備</block>
  <block id="cdb3662e6ecd47991de3008672ab3eb8" category="paragraph">node2 に同じバージョンの ONTAP 9 がインストールされていない場合は、 node4 をネットブートする必要があります。node4 のインストールが完了したら、 Web サーバに格納されている ONTAP 9 イメージからブートします。その後、の手順に従って、後続のシステムのブートに使用する正しいファイルをブートメディアデバイスにダウンロードできます <block ref="4815c2d091d790c1d3bab94177b38eaf" category="inline-link-macro-rx"></block>。</block>
  <block id="7a262cb0d3d917313c8ba12f996fe83c" category="list-title">重要</block>
  <block id="89023b09a8e04215547178052eb90222" category="inline-link-macro">ノード 4 の FC ポートを設定します</block>
  <block id="113dd8c6d49d13f5871e1cbe53350eb2" category="inline-link-macro">ノード 4 の UTA / UTA2 ポートを確認して設定してください</block>
  <block id="6f4a225b29c0975663d0e4b9e1f4547f" category="inline-xref">手順 1.</block>
  <block id="2f5ad93b7f0dd7bdcdf63542c05e8ebe" category="inline-xref">手順 21</block>
  <block id="f775037aa1f7a8a52b5159236f7449e7" category="inline-xref">手順 23</block>
  <block id="09702fca7923997e0da2187b92badbd9" category="list-text">ストレージアレイに接続されている V シリーズシステム、またはストレージアレイに接続されている FlexArray 仮想化ソフトウェアを使用するシステムをアップグレードする場合は、これで完了です <block ref="72a284a0ab19d0d6976ab9f3aa1bfc65" category="inline-xref-macro-rx"></block> から <block ref="e953da376eb12d20ff3d04f195189ba7" category="inline-xref-macro-rx"></block>をクリックしてから、このセクションの指示に従ってください <block ref="1d789633b45165b05bf13f9838060fe6" category="inline-link-macro-rx"></block> およびへ <block ref="15e1611f6cc2b64b7163cc152446c8c0" category="inline-link-macro-rx"></block>、保守モードでコマンドを入力します。その後、このセクションに戻ってからを使用して再開する必要があります <block ref="7d33d698028361a6b46f35be2a3ff5a2" category="inline-xref-macro-rx"></block>。</block>
  <block id="df5267f8e4bbfa9add1dd732e6b68e41" category="inline-link-macro">ノード 4 で FC または UTA / UTA2 設定を設定します</block>
  <block id="ed722a5ba6799c1f65d4b9716575b170" category="list-text">ただし、ストレージディスクが搭載されたシステムをアップグレードする場合は、このセクション全体を完了してから、に進む必要があります <block ref="a6d322e902b744ff3a11f02b5c6d9496" category="inline-link-macro-rx"></block>クラスタ・プロンプトでコマンドを入力します。</block>
  <block id="f3a29486bed19a90f2da6d007818b427" category="list-title">手順</block>
  <block id="c7009662ac7e20dc02b0e7d7e2ed8804" category="list-text">[[auto_install4_stp1] ノード 4 に十分なラックスペースがあることを確認します。</block>
  <block id="82952c70726b36a56f0651368cd2be05" category="paragraph">node4 が node2 とは別のシャーシにある場合は、 node3 と同じ場所に node4 を配置できます。node2 と node4 が同じシャーシにある場合は、 node4 が適切なラックの場所にすでに存在しているとします。</block>
  <block id="9ef9fab932162728d06bbfd2862c33d9" category="list-text">ノードモデルの _Installation and Setup Instructions _ の手順に従って、ノード 4 をラックに設置します。</block>
  <block id="179ba8fe173567627d42a1a9fc1e6948" category="list-text">ノード 4 をケーブル接続します。 node2 から node4 に接続を移動します。</block>
  <block id="d95867deadfe690e40f42068d6b59df8" category="inline-link-macro">参考資料</block>
  <block id="7c37472309a8c54b0891c8e95190096e" category="list-text">コンソール（リモート管理ポート）</block>
  <block id="f0012d7dc9fbefbb11bb69cd6932aef8" category="list-text">クラスタポート</block>
  <block id="b2d2606b76cd5df666c2b6a0f4bfc496" category="list-text">データポート</block>
  <block id="f35c347c4cb65015138a4d291827b1a1" category="list-text">クラスタポートとノード管理ポート</block>
  <block id="8c4aa541ee911e8d80451ef8cc304806" category="list-text">ストレージ</block>
  <block id="e6627a49532995a915815645abe1e3bc" category="list-text">SAN 構成： iSCSI イーサネットおよび FC スイッチポート</block>
  <block id="0046d599de2c63ac6aee024be099994d" category="admonition">ほとんどのプラットフォームモデルには一意のインターコネクトカードモデルがあるため、インターコネクトカード / FC-VI カードまたはインターコネクト / FC-VI ケーブルの接続を node2 から node4 に移動する必要はありません。MetroCluster 構成の場合は、 FC-VI ケーブルの接続を node2 から node4 に移動する必要があります。新しいホストに FC-VI カードがない場合は、 FC-VI カードの移動が必要になることがあります。</block>
  <block id="8c346c2672eda514d4b912cb897c6c54" category="list-text">node4 への電源を入れてから、コンソール端末で Ctrl+C キーを押してブートプロセスを中断し、ブート環境プロンプトにアクセスします。</block>
  <block id="994bdd0bc026ec99be435de25a9ecc3d" category="admonition">node4 をブートすると、次の警告メッセージが表示される場合があります。</block>
  <block id="d728df788701a4dbee2b7991f0468dad" category="list-text">手順 4 で警告メッセージが表示された場合は、次の操作を実行します。</block>
  <block id="3e1ef1763b3680d2c8fbf0a8ea19db9b" category="list-text">NVRAM バッテリ低下以外の問題を示すコンソールメッセージがないか確認し、必要に応じて対処します。</block>
  <block id="d73910b693432e337843357586f3e39f" category="list-text">バッテリの充電と起動プロセスが完了するまで待ちます。</block>
  <block id="5d043d33743f66f7467bf67aa5653705" category="admonition">* 注意：遅延は無視しないでください。バッテリーの充電に失敗すると、データが失われるおそれがあります。 *</block>
  <block id="b1e6d70b6a993d323936c87bff29461b" category="admonition">を参照してください <block ref="4815c2d091d790c1d3bab94177b38eaf" category="inline-link-macro-rx"></block>。</block>
  <block id="d583a56b378186283bc180e8dfcdad82" category="list-text">[[step6] 次のいずれかの操作を選択して、ネットブート接続を設定します。</block>
  <block id="3a325cd28eedfb6e2a8828a9cc5043a2" category="cell">動的ホスト構成プロトコル（ DHCP ）の状態</block>
  <block id="c1325f6903ebb5ebb2bb519a73ddb1b0" category="cell">作業</block>
  <block id="5bda814c4aedb126839228f1a3d92f09" category="cell">実行中です</block>
  <block id="aee2adde97afad89c105aeb72e6320b3" category="cell">ブート環境プロンプトで次のコマンドを使用して、自動的に接続を設定します。 ifconfig e0M -auto</block>
  <block id="84435c8fed125c1f06699e20bdcee63d" category="cell">実行されていません</block>
  <block id="15fe98426987c07cba715dffbfb96c7e" category="list-text">ノード 4 でネットブートを実行します。</block>
  <block id="0ba2b3e0a887666765eb2d690768c576" category="cell">用途</block>
  <block id="383b9c142d0ac9c95fc6323618a87c9b" category="cell">FAS/AFF8000 シリーズシステム</block>
  <block id="8385f026f91d6fc14fd02b225112bac8" category="cell">netboot\http://&lt;web_server_ip/path_to_web-accessible_directory&gt;/netboot/kernel`</block>
  <block id="edc91455dc5116cbd53031ff17548c91" category="cell">その他すべてのシステム</block>
  <block id="1e3f57d872237ce4621e377ee8ff6896" category="cell">netboot\http://&lt;web_server_ip/path_to_web-accessible_directory&gt;/&lt;ontap_version&gt;_image.tgz`</block>
  <block id="17e387f327c3866b0d0ae33451a79635" category="paragraph">「 &lt;path_the_web-accessible_directory&gt; 」は、手順 1 の「 &lt;ONTAP_version&gt;_image.tgz 」をダウンロードした場所に配置する必要があります <block ref="4815c2d091d790c1d3bab94177b38eaf" category="inline-link-macro-rx"></block>。</block>
  <block id="85bd8aebb41cb27f7bc364e977313958" category="admonition">トランクを中断しないでください。</block>
  <block id="45b788b600b6973bddaa17d7d85de037" category="list-text">起動メニューからオプション（ 7 ） Install new software first （新しいソフトウェアを最初にインストール）を選択します。</block>
  <block id="adcfa58e9fef1d45cc4bd403ac68eb9f" category="paragraph">このメニューオプションを選択すると、新しい ONTAP イメージがブートデバイスにダウンロードおよびインストールされます。</block>
  <block id="0b22fb8d0feec85055f45c8c4a298766" category="list-text">手順を続行するかどうかを確認するメッセージが表示されたら、「 y 」と入力し、パッケージの入力を求められたら URL を入力します。</block>
  <block id="84ea00dba7c6a1cf0426e58385307e4f" category="paragraph">http://&lt;web_server_ip/path_to_web-accessible_directory&gt;/&lt;ontap_version&gt;_image.tgz` にアクセスします</block>
  <block id="7b3f6c26774d36cd594edf297f0f8f57" category="list-text">次の手順を実行してコントローラモジュールをリブートします。</block>
  <block id="7043cc5b7b924f62a8af6f3d2e706c77" category="list-text">次のプロンプトが表示されたら 'n' を入力してバックアップ・リカバリをスキップします</block>
  <block id="330edabea721cfdb93e4a4aed8cd1730" category="list-text">次のプロンプトが表示されたら 'y' と入力して再起動します</block>
  <block id="ca95d6295c1b1cab041926d491fa54ba" category="list-text">ブート・メニューからメンテナンス・モード「 5 」を選択し、ブートを続行するように求めるプロンプトが表示されたら「 y 」と入力します。</block>
  <block id="bea7673b9c3eda34bfe449c80f92539f" category="list-text">コントローラとシャーシが HA 構成になっていることを確認します。</block>
  <block id="70cfb57c22486ea2d08d331675532dce" category="paragraph">「 ha-config show 」</block>
  <block id="d66825c57ef1d03f12142772b5cb7bae" category="paragraph">次に 'ha-config show コマンドの出力例を示します</block>
  <block id="8d88ee8626e30313013b223ba409abaa" category="admonition">システムは、 HA ペア構成かスタンドアロン構成かを PROM に記録します。状態は、スタンドアロンシステムまたは HA ペア内のすべてのコンポーネントで同じである必要があります。</block>
  <block id="55c802ca03b1fc5b58c1d59d28131125" category="list-text">コントローラとシャーシが HA として構成されていない場合は、次のコマンドを使用して構成を修正します。</block>
  <block id="dd974151ca8e1528e09f3e46a090f617" category="paragraph">「 ha-config modify controller ha 」を参照してください</block>
  <block id="898e93ac193351b4a5f895216aad0508" category="paragraph">「 ha-config modify chassis ha 」を参照してください</block>
  <block id="236df8dd892b4bd6bb01e86747337e6f" category="paragraph">MetroCluster 構成の場合は、次のコマンドを使用してコントローラとシャーシを変更します。</block>
  <block id="911c90c39145c3c3c0d524809f4a16c8" category="paragraph">「 ha-config modify controller mcc 」</block>
  <block id="1d3bd99dc4d12eba418aa32c0e69ed77" category="paragraph">「 ha-config modify chassis mcc 」</block>
  <block id="d09b053bad809215bd1c4350481aba44" category="list-text">メンテナンスモードを終了します。</block>
  <block id="819817945fea31f0c3596c841e685904" category="paragraph">「 halt 」</block>
  <block id="106cd92eb2d2b994c9a8675214fd438c" category="paragraph">ブート環境のプロンプトで Ctrl+C を押し、 AUTOBOOT を中断します。</block>
  <block id="088efa1f2f879b1cccaa5b548a064885" category="list-text">[auto_install4_step15]] ノード 3 で、システムの日付、時刻、およびタイムゾーンを確認します。</block>
  <block id="0dbad5b96349237116f63f0f389bd7f4" category="paragraph">「食事」</block>
  <block id="68dd867f743672fe385fd727b406983a" category="list-text">node4 で、ブート環境のプロンプトで次のコマンドを使用して日付を確認します。</block>
  <block id="3e72511c09e554faf49052f79d627689" category="paragraph">「日付」</block>
  <block id="10615484104523967682784d6824a536" category="list-text">必要に応じて、 node4 に日付を設定します。</block>
  <block id="aa03f64841cdad6f19ac1550e1ad8c29" category="list-text">node4 で、ブート環境のプロンプトで次のコマンドを使用して時間を確認します。</block>
  <block id="667f3a6a11750e110d0c1442d2aa20e7" category="paragraph">「時間」</block>
  <block id="7651eb09fbac7d811bab7ed026019b25" category="list-text">必要に応じて、 node4 に時間を設定します。</block>
  <block id="55f472f17ae9bd54337956b780332fff" category="list-text">必要に応じて、 node4 にパートナーシステム ID を設定します。</block>
  <block id="e02ed2f754f906507b04045b6d64c6a8" category="list-text">設定を保存します。</block>
  <block id="4efce637d6ec3bc2a69f403fd39b9b41" category="paragraph">'aveenv</block>
  <block id="62ac7cf3796c3e4bbe3285d1976b1c2c" category="list-text">[[step22]] 次のいずれかの操作を実行します。</block>
  <block id="a566a7773caad8e1452ad7591dace303" category="cell">システムの状態</block>
  <block id="b0d05d370a8e827d5c1d1e92258a25b2" category="cell">ディスクがあり、バックエンドストレージがない</block>
  <block id="7f3ec1ffd93dbf53956485464c8f29a2" category="cell">に進みます <block ref="7d33d698028361a6b46f35be2a3ff5a2" category="inline-xref-macro-rx"></block>。</block>
  <block id="c9d3e45a02f36166b1f2d250fefe0e40" category="cell">は、 V シリーズシステム、または FlexArray 仮想化ソフトウェアがストレージアレイに接続されたシステムです</block>
  <block id="d41d8cd98f00b204e9800998ecf8427e" category="doc"></block>
  <block id="6c87f26ede26b8a4600cd3be3a5c4a39" category="list-text">セクションに移動します <block ref="a6d322e902b744ff3a11f02b5c6d9496" category="inline-link-macro-rx"></block> をクリックし、このセクションのサブセクションを完了します。</block>
  <block id="d4bf40b038a0294c5a0c9cfeacb6b991" category="list-text">このセクションに戻って、から始めて残りの手順を実行します <block ref="7d33d698028361a6b46f35be2a3ff5a2" category="inline-xref-macro-rx"></block>。</block>
  <block id="f1f401fda84803d54fb9ed083d0ebefa" category="list-text">[[auto_install4_step23]] 新しいノードの FC イニシエータポートをスイッチゾーンに追加します。</block>
  <block id="2a1ffcfd9b3fe851dbeca2f509c1f7a3" category="paragraph">システムにテープ SAN がある場合は、イニシエータをゾーニングする必要があります。必要に応じて、を参照してオンボードポートをイニシエータに変更します <block ref="1d789633b45165b05bf13f9838060fe6" category="inline-link-macro-rx"></block>。ゾーニングの詳細な手順については、ストレージアレイとゾーニングに関するドキュメントを参照してください。</block>
  <block id="626097c557d64952b56d6d6e63d3ad8e" category="list-text">FC イニシエータポートをストレージアレイに新しいホストとして追加し、アレイ LUN を新しいホストにマッピングします。</block>
  <block id="c90869b8dd8fd41fd210932364a2caf7" category="paragraph">手順については、ストレージアレイおよびゾーニングに関するドキュメントを参照してください。</block>
  <block id="20285adb42be1ddc0c2df8f7a2de7595" category="list-text">ストレージアレイ上のアレイ LUN に関連付けられたホストまたはボリュームグループの World Wide Port Name （ WWPN ；ワールドワイドポート名）値を変更する。</block>
  <block id="a2b95adba38da1a033c4cae3447040cc" category="paragraph">新しいコントローラモジュールを設置すると、各オンボード FC ポートに関連付けられている WWPN の値が変更されます。</block>
  <block id="23eacbaf200afc53fbaaaaa3d6705308" category="list-text">スイッチベースのゾーニングを使用している場合は、新しい WWPN 値が反映されるようにゾーニングを調整します。</block>
  <block id="461db791196d5961d2d12d83cd09d8ef" category="paragraph">'etenv kmip.init.maxwait off</block>
  <block id="d1cffd7fada9f21315c30db304bb2ca9" category="list-text">ノードをブートメニューに追加します。</block>
  <block id="a94e69437db24dee798bbd90bce4ee0a" category="paragraph">「 boot_ontap menu</block>
  <block id="64782ddcc78f95845d4571abdc1d5f5a" category="inline-link-macro">ノード 4 の UTA / UTA2 ポートの確認と設定、手順 15</block>
  <block id="f5de4d1593689e91265cc76abd91be3e" category="paragraph">FC または UTA / UTA2 設定がない場合は、を実行します <block ref="65c4c751ac1fc661b74f2a8dfa84d816" category="inline-link-macro-rx"></block> ノード 4 が node2 のディスクを認識できるようにします。</block>
  <block id="9f6c1c59e595c7b6b493f92b24930c14" category="inline-link-macro">ノード 4 で FC または UTA / ut2 の設定を行います</block>
  <block id="cbe290335ddc7c966d9c148980b1ddd5" category="list-text">[[step29]] ストレージアレイに接続された FlexArray 仮想化ソフトウェアを使用する MetroCluster 構成、 V シリーズシステム、およびシステムについては、ノードに接続されているディスクを検出するために、 FC または UTA / UTA2 ポートを設定する必要があります。このタスクを完了するには、セクションに進んでください <block ref="39202fc611c1fcac2f1575fc00cb55d3" category="inline-link-macro-rx"></block>。</block>
  <block id="32d978cffec9875e4d92dc55b84df69b" category="doc">node2 によって所有されているルート以外のアグリゲートと NAS データ LIF を、 node3 から node4 に移動します</block>
  <block id="33b455f1b5d98f0ba5db998a78bbbbe3" category="paragraph">ノード 4 のネットワーク設定を確認し、ノード 3 からノード 4 にアグリゲートを再配置する前に、ノード 2 に現在ノード 3 に属する NAS データ LIF が、ノード 3 からノード 4 に再配置されていることを確認する必要があります。また、ノード 4 に SAN LIF が存在することも確認する必要があります。</block>
  <block id="d2f28697e2bc23acb2a0a646043ffac0" category="paragraph">アップグレード手順の実行中、リモート LIF は SAN LUN へのトラフィックを処理します。アップグレード時にクラスタやサービスの健全性を維持するために、 SAN LIF を移動する必要はありません。SAN LIF は、新しいポートにマッピングする必要がないかぎり移動されません。ノード 4 をオンラインにしたあと、 LIF が正常に機能しており、適切なポートに配置されていることを確認します。</block>
  <block id="761fe912511daeb08557e2215d0085e3" category="list-text">再配置処理を再開します。</block>
  <block id="d6fd449bc639f92f27b747fd5b40361d" category="paragraph">「システムコントローラの交換が再開」</block>
  <block id="0088774945c7d5ae5289c2de3632524f" category="paragraph">システムは次のタスクを実行します。</block>
  <block id="8f1335854a57fa62ce5fd7596399825b" category="list-text">クラスタクォーラムチェック</block>
  <block id="9ebfbaf3d8306da9bc975b709c5ec632" category="list-text">システム ID の確認</block>
  <block id="02d365a95e78a8c9b434a9c521f379c8" category="list-text">イメージのバージョンチェック</block>
  <block id="2540df2535b5361f67db0cb18a3f91a5" category="list-text">ターゲットプラットフォームのチェック</block>
  <block id="c8740509193885a8e40f7a7fb84ebff6" category="list-text">ネットワーク到達可能性チェック</block>
  <block id="93328d3894b0eabbdee40ef873079464" category="paragraph">ネットワーク到達可能性チェックのこの段階で処理が一時停止します。</block>
  <block id="ba825b8ec370a1f6fa3b0b9ac48b0036" category="paragraph">システムは次のチェックを実行します。</block>
  <block id="e31fb2dedfef9337a9708f375d220030" category="list-text">クラスタの健全性チェック</block>
  <block id="8ea7886b35c3e44ad6fcf3a1535ab9e7" category="list-text">クラスタ LIF のステータスを確認します</block>
  <block id="545969fcc9e42f8cf5ca0598e1ec25f6" category="paragraph">これらのチェックの実行後、システムによって、 node2 によって所有されているルート以外のアグリゲートと NAS データ LIF が新しいコントローラ node4 に再配置されます。リソースの再配置が完了すると、コントローラの交換処理が一時停止します。</block>
  <block id="9b1668278d2d17d21775af5a0c8c14b3" category="list-text">アグリゲートの再配置処理と NAS データ LIF の移動処理のステータスを確認します。</block>
  <block id="f1e1b94ce2ba7179506b74127da77af2" category="paragraph">「 system controller replace show-sdetails 」というエラーが表示されます</block>
  <block id="ff23473696232fd91c1e2dcb460109e4" category="paragraph">コントローラ交換用手順が一時停止している場合は、エラーがある場合はチェックして修正し、次に「問題 re sume 」をクリックして操作を続行します。</block>
  <block id="b5cd09b90221c700e1c2cf9d6253d6a1" category="list-text">必要に応じて、取り外した LIF をリストアしてリバートします。取り外した LIF を表示します。</block>
  <block id="0b66eef739f727e3f877d8fd0e6b8862" category="paragraph">cluster controller -replacement network ヒエラー（クラスタコントローラ交換ネットワークが取り外されました） -interface show</block>
  <block id="e288d72d848472060faab52648a13f10" category="paragraph">LIF が取り外された場合は、ホームノードをノード 4 にリストアします。</block>
  <block id="26490175c6a9bb3f68c33041e7c3bd2e" category="paragraph">クラスタ・コントローラ交換ネットワークが取り外されましたインタフェース・リストア -home-node</block>
  <block id="6def760ec3a422405912b1de335c67db" category="list-text">この処理を再開すると、必要なポストチェックの実行をシステムに求めるプロンプトが表示されます。</block>
  <block id="f3bf2563f63e5f2af4793dec3cbb4411" category="paragraph">次のポストチェックが実行されます。</block>
  <block id="9e9f6a103b5a748cadf8dfd54b8e29ac" category="list-text">アグリゲートの再構築チェック</block>
  <block id="ea017e018f3e760c65f3b02f928b8e43" category="list-text">アグリゲートのステータスを確認します</block>
  <block id="08f0db77633fd9c7f12fcd8827332b9d" category="list-text">ディスクのステータスを確認します</block>
  <block id="3c1799bbeb29b748f57f26ac2c4fc6f9" category="list-text">ボリュームチェック</block>
  <block id="befd434b83717d2b7bd83967d66e9157" category="doc">ノード 2 を撤去</block>
  <block id="3b70100fce1839004dba40191f90a2c9" category="list-text">処理を再開します。</block>
  <block id="21d67404cbc8811a82f375c6eb59ce82" category="paragraph">ノードは自動的に停止します。</block>
  <block id="ac616410952c35e808a3c7ce4ea5b4a7" category="inline-link-macro">古いシステムの運用を停止</block>
  <block id="b39850fa882a12596e03ef7779fcfebc" category="list-text"><block ref="5e1bb6d16e6bc7a1d750ae669f510747" category="inline-xref-macro-rx"></block></block>
  <block id="2061ab494eae73f1e7251b76a58b27d3" category="cell">ストレージまたはボリュームを移動してクラスタ内のコントローラハードウェアを簡単にアップグレードする方法について説明します。サポートされるモデルをディスクシェルフに変換する方法についても説明します。</block>
  <block id="5d1afe326f483a14ce8cd69456db1384" category="cell">ファブリック構成で MetroCluster のハードウェアコンポーネントとソフトウェアコンポーネントをインストールおよび設定する方法について説明します。</block>
  <block id="e5c39acdb0f682a22a7b242d48ac3ce5" category="inline-link-macro">FlexArray 仮想化インストール要件およびリファレンスガイド</block>
  <block id="d1d13e1cdd7f75473f7902868b6ba3d7" category="cell">FlexArray 仮想化システムのケーブル接続手順とその他の情報について説明します</block>
  <block id="595e15ec8af10c3d959522d0d1eab769" category="cell">MetroCluster 構成でコントローラとストレージモデルをアップグレードし、 MetroCluster FC 構成から MetroCluster IP 構成に移行し、ノードを追加して MetroCluster 構成を拡張する手順について説明します。</block>
  <block id="b42a2144e64bfdf4eecf966f7bb495c5" category="inline-link-macro">ONTAP 9.0 コマンド：マニュアルページリファレンス</block>
  <block id="a4117daa2ff8204dba8b79ed1da09e5b" category="cell"><block ref="a4117daa2ff8204dba8b79ed1da09e5b" category="inline-link-macro-rx"></block></block>
  <block id="81f65dde1fe71b470218b0fbe6dafc23" category="cell">サポートされる ONTAP 9.0 コマンドの構文と使用法について説明します。</block>
  <block id="1447526d9bfec11c73a566b23b4f87ab" category="inline-link-macro">ONTAP 9.1 コマンド：マニュアルページリファレンス</block>
  <block id="3f651f32c2efae31cb0b4da82294b37b" category="cell"><block ref="3f651f32c2efae31cb0b4da82294b37b" category="inline-link-macro-rx"></block></block>
  <block id="d7e58a36d2ecf34ed950099c1e30e349" category="cell">ONTAP 9.1 でサポートされるコマンドの構文と使用法について説明します。</block>
  <block id="25d709d9429cb9179fe81f4343515fa1" category="inline-link-macro">ONTAP 9.2 コマンド：マニュアルページリファレンス</block>
  <block id="89065c0795a681c066df18ebe55464d3" category="cell"><block ref="89065c0795a681c066df18ebe55464d3" category="inline-link-macro-rx"></block></block>
  <block id="be948fce3cd6e191738619444b30062e" category="cell">ONTAP 9.2 でサポートされるコマンドの構文と使用法について説明します。</block>
  <block id="46490acdb4b495cbc81468a4840d2c5d" category="inline-link-macro">ONTAP 9.3 コマンド：マニュアルページリファレンス</block>
  <block id="9d087aa4c3e3015b8ac013580c0f90d4" category="cell"><block ref="9d087aa4c3e3015b8ac013580c0f90d4" category="inline-link-macro-rx"></block></block>
  <block id="119362933ed4ef8c2dbccecbb68cc43b" category="cell">ONTAP 9.3 でサポートされるコマンドの構文と使用法について説明します。</block>
  <block id="1aeb70ab3e33d74db4928037aa88a7eb" category="inline-link-macro">ONTAP 9.4 コマンド：マニュアルページリファレンス</block>
  <block id="8a14044dc26b4cb3bb6448492e70e961" category="cell"><block ref="8a14044dc26b4cb3bb6448492e70e961" category="inline-link-macro-rx"></block></block>
  <block id="929d0856b69565e71fefd5bef5533d93" category="cell">ONTAP 9.4 でサポートされるコマンドの構文と使用法について説明します。</block>
  <block id="6ea3af7ae81e05b625440926c8fcc6ea" category="inline-link-macro">ONTAP 9.5 コマンド：マニュアルページリファレンス</block>
  <block id="78610e5d700899a0dc146918529c56af" category="cell"><block ref="78610e5d700899a0dc146918529c56af" category="inline-link-macro-rx"></block></block>
  <block id="db0052a2214aa0ca3e4d7e0a79e8d79a" category="cell">ONTAP 9.5 でサポートされるコマンドの構文と使用法について説明します。</block>
  <block id="384be8d232a0ab0b84a145e4bf59bbed" category="inline-link-macro">ONTAP 9.6 コマンド：マニュアルページリファレンス</block>
  <block id="84d45c7d2db474ca3af465732948fd8d" category="cell"><block ref="84d45c7d2db474ca3af465732948fd8d" category="inline-link-macro-rx"></block></block>
  <block id="7478969542b0a3320dd1f9c09d30231a" category="cell">ONTAP 9.6 でサポートされるコマンドの構文と使用法について説明します。</block>
  <block id="c9aa14f76f0f0a25762ef86776113011" category="inline-link-macro">ONTAP 9.7 コマンド：マニュアルページリファレンス</block>
  <block id="edcc14f99b45ac8b5b29319da6793eea" category="cell"><block ref="edcc14f99b45ac8b5b29319da6793eea" category="inline-link-macro-rx"></block></block>
  <block id="849578c3a682cf124d61ab2b562aa1fa" category="cell">ONTAP 9.7 でサポートされるコマンドの構文と使用法について説明します。</block>
  <block id="112d3c239cd86d18383aedfae5ed632b" category="inline-link-macro">ONTAP 9.8 コマンド：マニュアルページリファレンス</block>
  <block id="a206ae5c7f29407f29397485796cc31c" category="cell"><block ref="a206ae5c7f29407f29397485796cc31c" category="inline-link-macro-rx"></block></block>
  <block id="c85c87a5f255edc538c88661bb863907" category="cell">サポートされている ONTAP 9.8 コマンドの構文と使用法について説明します。</block>
  <block id="8514bd0cded8da51b71a7aba8599153c" category="cell">ストレージフェイルオーバー、テイクオーバー / ギブバックなどのハイアベイラビリティクラスタ構成をインストールおよび管理する方法について説明します。</block>
  <block id="ed99eca5665640e9b0e3fced8264b368" category="cell">クラスタで物理 / 仮想ネットワークポート（ VLAN およびインターフェイスグループ）、 LIF 、ルーティング、およびホスト解決サービスを設定および管理する方法、ロードバランシングでネットワークトラフィックを最適化する方法、および SNMP を使用してクラスタを監視する方法について説明します。</block>
  <block id="684c05de33c5ed574435c18094046bde" category="cell">FC と iSCSI のトポロジと配線方式について説明します</block>
  <block id="ec8a498c0ff432b735ba28247dbb239f" category="cell">ONTAP をセットアップおよび設定する方法について説明します。</block>
  <block id="38f19900a80b03ef2e62f2105ab6323a" category="cell">ONTAP システムの管理方法、 CLI インターフェイスの使用方法、クラスタへのアクセス方法、ノードの管理方法などについて説明します</block>
  <block id="25c1844876df2afa3616f32befb014b3" category="cell">ONTAP のダウンロードとアップグレードの手順については、を参照してください</block>
  <block id="9bd1a11fb0d175da8194074a575cbf3a" category="inline-link-macro">「 system controller replace 」コマンドを使用して、 ONTAP 9.5 を実行するコントローラハードウェアを ONTAP 9.7 にアップグレードします</block>
  <block id="f576635c194a19e5910126ab234152d9" category="cell"><block ref="f576635c194a19e5910126ab234152d9" category="inline-link-macro-rx"></block></block>
  <block id="76131ba473c7ab8f940b1defa73cba87" category="cell">ONTAP 9.5 を実行するコントローラを ONTAP 9.7 に無停止でアップグレードする場合に、「 system controller replace 」コマンドを使用してアグリゲートの再配置手順を説明します。</block>
  <block id="0e490704226a6f678e043e59eee46210" category="inline-link-macro">ONTAP 9.8 以降を実行しているコントローラハードウェアをアップグレードするには、「 system controller replace 」コマンドを使用します</block>
  <block id="c6f3014369a1f06fe73f7a2cba39dfb1" category="cell"><block ref="c6f3014369a1f06fe73f7a2cba39dfb1" category="inline-link-macro-rx"></block></block>
  <block id="62a92c3d7ea27667983fb6842f0835ec" category="cell">ONTAP 9.8 を実行するコントローラを、 system controller replace コマンドを使用して無停止でアップグレードする場合に必要なアグリゲートの再配置手順について説明します。</block>
  <block id="743707e39dafe5109cbff1b061b5b76d" category="inline-link-macro">ONTAP 9.7 以前を実行しているコントローラハードウェアは、アグリゲートの再配置を使用して手動でアップグレードします</block>
  <block id="5cb60fbe51b20b5c36b7dee05c9cf1f7" category="cell"><block ref="5cb60fbe51b20b5c36b7dee05c9cf1f7" category="inline-link-macro-rx"></block></block>
  <block id="55b831f07f1b45c03df3d93cd827ad94" category="cell">ONTAP 9.7 以前を実行しているコントローラの手動による無停止アップグレードを実行するために必要なアグリゲートの再配置手順について説明します。</block>
  <block id="0fcc55966131a059d63ed79deda9a495" category="inline-link-macro">ONTAP 9.8 以降を実行しているコントローラハードウェアは、アグリゲートの再配置を使用して手動でアップグレードします</block>
  <block id="48d4ce3e31086711d3ee342fa8447083" category="cell"><block ref="48d4ce3e31086711d3ee342fa8447083" category="inline-link-macro-rx"></block></block>
  <block id="f39fe3ae91660449bc81c96d4bc3f3a6" category="cell">ONTAP 9.8 以降を実行するコントローラの手動無停止アップグレードを実行するために必要なアグリゲートの再配置手順について説明します。</block>
  <block id="f7e23c11beeca2c17c91f38177574a83" category="section-title">参照サイト</block>
  <block id="9d2169c1c2855b78a7aeaa4f42d27dc7" category="inline-link-macro">ネットアップサポートサイト</block>
  <block id="da160308e3b4b4a80bf1b72b5bdbedb8" category="inline-link-macro">Hardware Universe</block>
  <block id="865e9b4ef52f3b0d3050c8b3c14eb660" category="inline-link-macro">Active IQ Config Advisor</block>
  <block id="83b27b00949218cb0d9ec7e1eb1c92ad" category="doc">ノードをアップグレードする準備をします</block>
  <block id="f163cd0bda37780c7a24303611dc0185" category="paragraph">ノードをアップグレードする準備として、次の手順を実行する必要があります。</block>
  <block id="6510eaf8fd7e9800a5b7d62b06dc6e9c" category="list-text">ONTAP コマンドラインで次のコマンドを入力して、コントローラの交換プロセスを開始します。</block>
  <block id="883d9d0a0453675233da0c78e0c1caac" category="admonition">このコマンドは、 advanced 権限レベルの「 set -privilege advanced 」でのみ実行できます</block>
  <block id="53d5140b9db74b84bdd8037a6063ec88" category="paragraph">次の出力が表示されます。</block>
  <block id="9843edc4af038cb41e5ce95e9aad1e03" category="list-text">「 y 」キーを押すと、次の出力が表示されます。</block>
  <block id="ffc467f3c2a85173d4529548d72d41b9" category="paragraph">システムでは次の事前確認が実行され、あとで手順で使用するために各事前確認の出力が記録されます。</block>
  <block id="495aa5c508241f1eca40fd503bc73196" category="cell">事前チェック</block>
  <block id="b5a7adde1af5c87d7fd797b6245c2a39" category="cell">説明</block>
  <block id="688df3b12b34ef0608e319ff169390d4" category="cell">クラスタの健常性チェック</block>
  <block id="2ebe98702ab3694ec3ccfe3e623a124e" category="cell">クラスタ内のすべてのノードが正常であることを確認します。</block>
  <block id="56beb58e6d547196c5aa44214e93ccaa" category="cell">MCC クラスタチェック</block>
  <block id="f8c3b8dcbd883dc2841679a94feb852a" category="cell">システムが MetroCluster 構成かどうかを確認します。MetroCluster 構成かどうかが自動的に検出され、特定の事前確認と検証チェックが実行されます。4 ノードの MetroCluster FC 構成のみがサポートされます。2 ノード MetroCluster 構成と 4 ノード MetroCluster の IP 構成では、チェックが失敗します。MetroCluster 構成がスイッチオーバーされている場合、チェックは失敗します。</block>
  <block id="b14360b478956e0213006307a2213b01" category="cell">アグリゲートの再配置ステータスチェック</block>
  <block id="23ecfd4d5c38f058d2a5b47f3a17a9b2" category="cell">アグリゲートの再配置がすでに実行中であるかどうかを確認します。別のアグリゲートの再配置を実行中の場合、チェックは失敗します。</block>
  <block id="2fb16648e5e222f12729fb8c953149b5" category="cell">モデル名のチェック（ Model Name Check</block>
  <block id="84599dff045e3f86049bc2022bf4b930" category="cell">この手順でコントローラモデルがサポートされているかどうかを確認します。モデルがサポートされていない場合、タスクは失敗します。</block>
  <block id="67c4a102a7629dddfcaf5472ead63dd6" category="cell">クラスタクォーラムチェック</block>
  <block id="b26031d08c55750f9480d081320ddcbe" category="cell">交換するノードがクォーラムにあることを確認します。ノードがクォーラムを構成していない場合は、タスクが失敗します。</block>
  <block id="833b60ce00de23efdd84aaf2257b1cd3" category="cell">イメージのバージョンチェック</block>
  <block id="4f324d87f2095ea7b3cb652dd2dc4b10" category="cell">HA ステータスチェック</block>
  <block id="0ec2a475eb3cc7052a2df9d912b429a5" category="cell">交換する両方のノードがハイアベイラビリティ（ HA ）ペア構成になっているかどうかを確認します。コントローラでストレージフェイルオーバーが有効になっていない場合、タスクは失敗します。</block>
  <block id="13953a740d52280d2268524a1a4a3535" category="cell">アグリゲートステータスチェック</block>
  <block id="d2be5a07810282eec1226ecdcabc0e8d" category="cell">ホーム所有者でないアグリゲートを交換するノードが所有している場合、そのタスクは失敗します。ローカル以外のアグリゲートを所有するノードは使用しないでください。</block>
  <block id="6244df7e25591403b0d5255577576eb4" category="cell">ディスクステータスチェック</block>
  <block id="320bc2c593ebed7e970715ea3832bc2e" category="cell">データ LIF ステータスチェック</block>
  <block id="9433521f789681a1a8fd76815674c438" category="cell">交換するノードにローカル以外のデータ LIF があるかどうかを確認します。ホーム所有者でないデータ LIF がノードに含まれないようにしてください。ローカル以外のデータ LIF がいずれかのノードに含まれている場合、タスクは失敗します。</block>
  <block id="eb694fc97d0bfef2c84584a29b318d85" category="cell">クラスタ LIF ステータス</block>
  <block id="ce7612b7485886dbb77994528256ffe5" category="cell">両方のノードでクラスタ LIF が動作しているかどうかを確認します。クラスタ LIF が停止している場合は、タスクは失敗します。</block>
  <block id="35a80eab14772418cca0ff3317910419" category="cell">ASUP ステータスチェック</block>
  <block id="166dc880ac0c6c0bb26663235da7e471" category="cell">ASUP 通知が設定されていないと、タスクは失敗します。コントローラの交換用手順を開始する前に ASUP を有効にする必要があります。</block>
  <block id="d39a17fff59bba71c24822f913f16591" category="cell">CPU 利用率チェック</block>
  <block id="3478400e352864eaa33992de6e976ca8" category="cell">交換するノードの CPU 利用率が 50% を超えていないかどうかを確認します。CPU 使用率がかなりの時間にわたって 50% を超えると、タスクは失敗します。</block>
  <block id="1a0a7ab1ebbc5d1d73b48be5c234810d" category="cell">アグリゲートの再構築チェック</block>
  <block id="7830789d964e8c8cf3a370b1d0299a28" category="cell">いずれかのデータアグリゲートで再構築が実行されているかどうかを確認しますアグリゲートの再構築を実行中の場合、タスクは失敗します。</block>
  <block id="c17c89f5ba46492be395e9f071e013ae" category="cell">ノードアフィニティジョブチェック</block>
  <block id="83aecfe9d4bf515a2ec45766e28a4ce0" category="cell">ノードアフィニティジョブが実行されているかどうかを確認します。ノードアフィニティジョブが実行中の場合、チェックは失敗します。</block>
  <block id="22afa574ce25ee7b49bc951eecd7f0ac" category="section-title">ARL の事前確認に失敗した場合は、アグリゲートの所有権を修正</block>
  <block id="7a29204c210eec42f3d01bebd9b483ba" category="paragraph">アグリゲートステータスチェックに失敗した場合は、パートナーノードが所有するアグリゲートをホーム所有者ノードに戻し、事前確認プロセスを再度開始する必要があります。</block>
  <block id="f38dad169237355428118b60b1896828" category="list-text">パートナーノードが現在所有しているアグリゲートをホーム所有者ノードに戻します。</block>
  <block id="17ef288fc5accadf7f08a6841d89c986" category="list-text">node1 と node2 のどちらも現在の所有者（ホーム所有者ではない）アグリゲートを所有していないことを確認します。</block>
  <block id="74aa132d7caa1904dc30e16328313124" category="paragraph">次の例は、アグリゲートの現在の所有者とホーム所有者の両方がノードにある場合のコマンドの出力例を示しています。</block>
  <block id="bd965e38a0c9cf27aa1bde099308e23f" category="section-title">完了後</block>
  <block id="b034884667760545b9597461a985e372" category="paragraph">コントローラの交換プロセスを再開する必要があります。</block>
  <block id="794df3791a8c800841516007427a2aa3" category="section-title">使用許諾</block>
  <block id="edfd39240931c89b8ad19f9eea422658" category="paragraph">クラスタをセットアップする際、セットアップウィザードでクラスタベースのライセンスキーを入力するように求められます。ただし、一部の機能には追加のライセンスが必要です。このライセンスは、 1 つ以上の機能を含む _ パッケージ _ として発行されます。クラスタで使用する各機能のキーは、クラスタ内の各ノードに独自に設定する必要があります。</block>
  <block id="0716a66a70e59256281f4030c078ce04" category="paragraph">新しいライセンスキーがない場合は、クラスタで現在ライセンスされている機能を新しいコントローラで使用できます。ただし、ライセンスされていない機能をコントローラで使用するとライセンス契約に違反する可能性があるため、アップグレードの完了後に新しいコントローラのライセンスキーをインストールする必要があります。</block>
  <block id="eb40310be53032e7e599a9070cfaf20f" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> からネットアップサポートサイトにリンクして、 ONTAP 用の新しい 2 文字のライセンスキーを取得できます。キーは、 _ ソフトウェアライセンス _ の _ マイサポート _ セクションにあります。必要なライセンスキーがサイトにない場合は、ネットアップの営業担当者にお問い合わせください。</block>
  <block id="556a407c4a4faf57fc56c1b7137d5f36" category="paragraph">ライセンスの詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、 _System Administration Reference_( システム管理リファレンス ) にリンクします。</block>
  <block id="291e8826d2b19041a0543b448060f314" category="paragraph">ノード 4 でオンボードの FC ポート、オンボードのユニファイドターゲットアダプタ（ UTA / UTA2 ）ポート、または UTA / UTA2 カードが使用されている場合は、残りの手順を完了する前に設定する必要があります。</block>
  <block id="85f1449ea514e1be4b11527eb6fbce31" category="paragraph">の実行が必要な場合があります <block ref="b22a2e603d310a795a7b59d2bdda39ee" category="inline-xref-macro-rx"></block> セクション、 <block ref="5752cac0a470e06ffceef40fba1931c1" category="inline-xref-macro-rx"></block>、または両方のセクション。</block>
  <block id="405ab80b96586360ea83735c37305935" category="inline-link-macro">ノード 4 のインストールを確認します</block>
  <block id="e5d8ce1e4e0f9c50b3cbdf452d60972e" category="inline-link-macro">手順 22</block>
  <block id="3dc7a36efda97abdf7240a1ca32de490" category="admonition">ノード 4 にオンボードの FC ポート、オンボード UTA / UTA2 ポート、または UTA / UTA2 カードがなく、ストレージディスクが搭載されたシステムをアップグレードする場合は、に進みます <block ref="3a339ed5bdc85366b677c546716fabfa" category="inline-link-macro-rx"></block>。ただし、 V シリーズシステムまたは FlexArray 仮想化ソフトウェアがインストールされていて、ストレージアレイに接続されている場合に、ノード 4 にオンボードの FC ポート、オンボード UTA / UTA2 ポート、 UTA / UTA2 カードがないときは、 section_Install and boot node4 セクションに戻って再開する必要があります <block ref="1a99f6ce933cd745b2b02e54c9272506" category="inline-link-macro-rx"></block>。ノード 4 に十分なラックスペースがあることを確認してください。node4 が node2 とは別のシャーシにある場合は、 node3 と同じ場所に node4 を配置できます。node2 と node4 が同じシャーシにある場合は、 node4 が適切なラックの場所にすでに存在しているとします。</block>
  <block id="6ef697f11922be2e4de0971f7d70997f" category="list-title">選択肢</block>
  <block id="32681c366792ff09536e44772a3bddf2" category="list-text"><block ref="b22a2e603d310a795a7b59d2bdda39ee" category="inline-xref-macro-rx"></block></block>
  <block id="17889f6fb09adc44188f6076a9e7852a" category="list-text"><block ref="5752cac0a470e06ffceef40fba1931c1" category="inline-xref-macro-rx"></block></block>
  <block id="cd7dd5075be56af4a3298feff04bb98a" category="paragraph">ノード 4 にオンボードまたは FC アダプタのいずれかの FC ポートがある場合は、ポートが事前に構成されていないため、ノードを稼働状態にする前にポートの設定を行う必要があります。ポートが設定されていないと、サービスが停止する可能性があります。</block>
  <block id="3bb2def349bd01a4e09f553241c547bb" category="paragraph">セクションに保存した node2 の FC ポート設定の値を確認しておく必要があります <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block>。</block>
  <block id="8651f71cd1a76b7df1a83cae390627a8" category="paragraph">システムに FC 構成がない場合は、このセクションをスキップしてかまいません。システムにオンボード UTA / UTA2 ポートまたは UTA / UTA2 アダプタが搭載されている場合は、で設定します <block ref="5752cac0a470e06ffceef40fba1931c1" category="inline-xref-macro-rx"></block>。</block>
  <block id="4d65ef8cf84d37cbb99560183afc8431" category="list-text">次のいずれかを実行します。</block>
  <block id="78f6ac180c7bb87b8aee79da36246598" category="cell">アップグレードするシステム</block>
  <block id="a7a589b8e6e6d3aac1d1459d66a748a0" category="cell">次に、</block>
  <block id="61bc24f9f2f24029ba7b04d76f768598" category="cell">ストレージディスクがあります</block>
  <block id="e1a8971092776bc2e25be6babad152ab" category="cell">「 system node hardware unified-connect show 」を参照してください</block>
  <block id="58b0fc39873b9fe983d6b57e06585d6f" category="cell">は、 V シリーズシステムまたは FlexArray 仮想化ソフトウェアを搭載し、ストレージアレイに接続されています</block>
  <block id="5344ecb990fb0b0e60a7b979eeca26cd" category="cell">ucadmin show</block>
  <block id="c5c0e497c3f1186f3d1cfecfc658c546" category="paragraph">システムには、システム上のすべての FC アダプタと統合ネットワークアダプタに関する情報が表示されます。</block>
  <block id="ede48791c6a4d48413c294cc39314600" category="list-text">ノード 4 の FC 設定とノード 1 から前に取得した設定を比較します。</block>
  <block id="bf5ce713a37cfb1c7cddb2ef1662c419" category="paragraph">必要に応じて、ノード 4 の FC ポートを変更します。</block>
  <block id="2c28eea077fe0201e484901f94587d87" category="list-text">ターゲットポートをプログラムする場合：</block>
  <block id="c5fb075990e07d49af83b424fc450275" category="list-text">イニシエータポートをプログラミングする場合：</block>
  <block id="2b82f33f2fca28990565d495f9d55cd3" category="paragraph">`-t` は FC4 のタイプで ' ターゲットまたはイニシエータです</block>
  <block id="97c16f2bd68041ac79ef06049407d0c7" category="list-text">メンテナンスモードを終了します。</block>
  <block id="cfd64d6f476de1f0b6218d6edce64ba3" category="list-text">LOADER プロンプトからシステムをブートします。</block>
  <block id="6fbd819a7ffcfac7237456907e32238d" category="list-text">コマンドを入力したら、ブート環境のプロンプトでシステムが停止するまで待ちます。</block>
  <block id="4e0dd5a6524aabaa8ad8173947fbf52a" category="list-text">保守モードのブート・メニューからオプション「 5 」を選択します。</block>
  <block id="59df83a3d8dd25ad19619fe75cc32a49" category="list-text">[[step8]] 次のいずれかの操作を実行します。</block>
  <block id="f57ce051c0dd7274751c09db8a0e40b1" category="list-text">このセクションをスキップして、に進みます <block ref="3a339ed5bdc85366b677c546716fabfa" category="inline-link-macro-rx"></block> ノード 4 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがない場合</block>
  <block id="403ef226990b83673617ca3be4865d06" category="list-text">に進みます <block ref="5752cac0a470e06ffceef40fba1931c1" category="inline-xref-macro-rx"></block> ノード 4 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがある場合</block>
  <block id="be1e23bb281357a07ce5db58c0e3ed83" category="list-text">node4 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがない場合は、 section_Check をスキップして UTA / UTA2 ポートを設定し、 node4 に戻ってブートノードを再開します <block ref="ec6d4cacddb01e88226b9b376590bcc5" category="inline-link-macro-rx"></block>。</block>
  <block id="69e973a9aba58ba3c0012cb107497fbd" category="paragraph">ノード 4 でオンボード UTA / UTA2 ポートまたは UTA / UTA2A カードが使用されている場合は、アップグレードしたシステムの使用方法に応じて、ポートの設定を確認して設定する必要があります。</block>
  <block id="cb462dbb35ebe0e4c6fef592bf7fd143" category="paragraph">UTA / UTA2 ポートに対応する正しい SFP+ モジュールが必要です。</block>
  <block id="d99657bf946aa6dc77b75f8f378cf072" category="admonition">ネットアップのマーケティング資料では、 UTA2 という用語を CNA アダプタとポートという意味で使用している場合があります。ただし、 CLI では CNA という用語が使用されます。</block>
  <block id="8076deb73ec5b74885a5b14258d5df96" category="paragraph">UTA / UTA2 ポートはアダプタまたはコントローラ上に次の構成で配置されます。</block>
  <block id="da3b32a8a5f86ee9c63b2d0328f453e3" category="list-text">UTA / UTA2 カードは、コントローラと同時に注文しても、希望するパーソナリティを持つ未設定の状態で出荷されます。</block>
  <block id="494d18d03e7c6fb4b46866273ca75c34" category="list-text">コントローラとは別に発注した UTA / UTA2 カードは、デフォルトの FC ターゲットパーソナリティとして出荷されます。</block>
  <block id="9fca14a117603ee6762ebe968e8cedec" category="list-text">新しいコントローラのオンボード UTA / UTA2 ポートは、要求したパーソナリティを持つように（出荷前に）設定されています。</block>
  <block id="898667c4cb95b7e44aafe17e4edf0567" category="paragraph">ただし、ノード 4 の UTA / UTA2 ポートの設定を確認し、必要に応じて変更してください。</block>
  <block id="504b32f9515b15fa8407335de4be00e7" category="admonition">* 注意 * ：ストレージディスクがある場合は、メンテナンスモードに指示されていないかぎり、クラスタプロンプトでこのセクションのコマンドを入力します。ストレージアレイに接続された MetroCluster FC システム、 V シリーズシステム、または FlexArray 仮想化ソフトウェアを搭載したシステムがある場合、 UTA / UTA2 ポートを設定するにはメンテナンスモードにする必要があります。</block>
  <block id="5113998ac3c679e0d1220f045f54831f" category="list-text">ノード 4 で次のいずれかのコマンドを使用して、ポートが現在どのように設定されているかを確認します。</block>
  <block id="8eae44e92f7155cef20bea12cd5a16c8" category="cell">システムの状態</block>
  <block id="fd894a783c8c8400a3021bd2ad147cba" category="paragraph">次の例のような出力が表示されます。</block>
  <block id="64da799aef6205bb6034c61f1f25c391" category="list-text">現在の SFP+ モジュールが目的の用途と一致しない場合は、正しい SFP+ モジュールに交換します。</block>
  <block id="d72066c585919f0b5faa9807de695bf8" category="paragraph">ネットアップの担当者に連絡して、正しい SFP+ モジュールを入手します。</block>
  <block id="89d66b059cd78c250aa205de02793541" category="list-text">ucadmin show コマンドの出力結果を調べ、 UTA / UTA2 ポートが希望するパーソナリティに対応しているかどうかを確認します。</block>
  <block id="d4a3eb778a9003e6551eb488099a389d" category="cell">CNA ポートの状況</block>
  <block id="2a6b2595426d2565bc2823be04753585" category="cell">希望するパーソナリティがない</block>
  <block id="0011237e8dc98411a0794ba6dddb9989" category="inline-xref">手順 5</block>
  <block id="feb4c7d35f5c6972a78c24ac4caebf00" category="cell">に進みます <block ref="7ffb05d2232c9c60f695127651bcf871" category="inline-xref-macro-rx"></block>。</block>
  <block id="3fa4c0ba2b210d02bdf49ea3e2812989" category="cell">あなたがほしい人格を持っている</block>
  <block id="c0f1d3db2a584ee59498c0abaa47adf7" category="inline-xref">手順 13</block>
  <block id="a06e3550b827dbbc3fa903ada41f165b" category="cell">手順 5 から 12 を省略して、に進みます <block ref="8c1d75fc2023dc4e109b4251bd0229b1" category="inline-xref-macro-rx"></block>。</block>
  <block id="1228ef3c4a262a3a23b05009801f9d74" category="list-text">[[auto_check_4_step5] 次のいずれかの操作を実行します。</block>
  <block id="bb8715eb9d3c8fc0a643a55fc3e9ed29" category="cell">を設定する場合</block>
  <block id="c4c1b40245719a0e56eb453401560e8e" category="cell">UTA / UTA2 カードのポート</block>
  <block id="805e47ec7b4ef2165b02c8ff12688343" category="inline-xref">手順 7</block>
  <block id="5ab10acc3f713db2883e41aeefc0a947" category="cell">に進みます <block ref="8fa9bd2d3aca152bc08859144a7af8fa" category="inline-xref-macro-rx"></block></block>
  <block id="a7f2071dd0b7eee34d97c156132a3210" category="cell">オンボードの UTA/UTA2 ポート</block>
  <block id="d60d761a93da31e724112577c571c923" category="inline-xref">手順 8</block>
  <block id="5014f056b226c4802b8e30f5800a2ea3" category="cell">手順 7 を省略して、に進みます <block ref="3d86a68aa8fb2ef1661a4814f02f3b64" category="inline-xref-macro-rx"></block>。</block>
  <block id="ef0770e5329716a78bdc700afc4541c1" category="list-text">アダプタがイニシエータモードで、 UTA / UTA2 ポートがオンラインの場合は、 UTA / UTA2 ポートをオフラインにします。</block>
  <block id="fff4e24de6543fad49dbe48a7b01e1d1" category="paragraph">ターゲットモードのアダプタは、メンテナンスモードで自動的にオフラインになります。</block>
  <block id="d8f98bdc807ae3903ae80ea0b78fbd6e" category="list-text">[[auto_check_4_step7] 現在の構成が目的の用途に一致しない場合は、必要に応じて構成を変更します。</block>
  <block id="2e23b3b6b4b04a1d678f35eda127d4d6" category="list-text">`-t` は FC4 のタイプ、「 target 」または「 initiator 」です。</block>
  <block id="3f0869d2c33ab7caf7185458236590fe" category="admonition">テープドライブ、 FlexArray 仮想化システム、および MetroCluster 構成には、 FC イニシエータを使用する必要があります。SAN クライアントには FC ターゲットを使用する必要があります。</block>
  <block id="7e0be6e2a6d4c241d66e582ce0ecbcea" category="list-text">[[auto_check_4_step8] 次のコマンドを使用して設定を確認し、出力を調べます。</block>
  <block id="fe040552b4fc83efe2ba593498969954" category="list-text">設定を確認します。</block>
  <block id="38827adabf48650b74e5fe794b8f2413" category="paragraph">次の例の出力は ' アダプタ「 1b 」の FC4 タイプがイニシエータに変更され ' アダプタ「 2a 」および「 2b 」のモードが「 cna' 」に変更されていることを示しています</block>
  <block id="4cf4d3bfbda859f7fbe3247599afeba5" category="list-text">次のいずれかのコマンドをポートごとに 1 回入力して、ターゲットポートをオンラインにします。</block>
  <block id="b50635aa317c4f94943cbad3bf2ffdf2" category="list-text">ポートをケーブル接続します。</block>
  <block id="8eeb6ccf00d6f27741c5b734b3130459" category="list-text">[[step12]] 次のいずれかの操作を実行します。</block>
  <block id="803497e06fb63becf479290f3ae30e01" category="cell">に進みます <block ref="3a339ed5bdc85366b677c546716fabfa" category="inline-link-macro-rx"></block>。</block>
  <block id="00538e299fb2786306fe6cdcd6e9fd03" category="cell">section_Install および boot node4 に戻り、で再開します <block ref="ec6d4cacddb01e88226b9b376590bcc5" category="inline-link-macro-rx"></block>。</block>
  <block id="4a137bad34f46785824a8100e1c6cba6" category="list-text">[[auto_check_4_step13]] メンテナンスモードを終了します。</block>
  <block id="479951d6e509fddf053f700071fd43a4" category="list-text">[[step14]] ブートメニューからのノードのブート :</block>
  <block id="204783b1ca658239a7b205df8e2d83dd" category="paragraph">「 boot_ontap menu</block>
  <block id="d27b8c8cfb6e88cecd06bd564e90cd36" category="paragraph">A800 にアップグレードする場合は、に進みます <block ref="1917bbf2d6d289423b4a495f5ba4fcca" category="inline-xref-macro-rx"></block></block>
  <block id="f91809c39c7c5ad59f2475c5ee644448" category="admonition">上記のコンソールの出力例では、アドバンストディスクパーティショニング（ ADP ）ディスクを使用するシステムの場合は ONTAP からパートナーノード名の入力を求められます。</block>
  <block id="9c709df0d0930ada3ab147bf9abe8f06" category="inline-xref">手順 17</block>
  <block id="5dbdf6da1c2d885026bcf4a6be74a4b0" category="list-text">「 no disks found 」というメッセージが表示されてシステムがリブートループに入ると、システムが FC ポートまたは UTA/UTA2 ポートをターゲットモードにリセットしたため、ディスクが認識されないことを示します。これを解決するには、に進みます <block ref="d55e3a0f9758a99c055e4411cec66cde" category="inline-xref-macro-rx"></block> 終了： <block ref="1abe7aef97cf6f4670adea7171f10403" category="inline-xref-macro-rx"></block> または、セクションに移動します <block ref="3a339ed5bdc85366b677c546716fabfa" category="inline-link-macro-rx"></block>。</block>
  <block id="00454a3a0a181cf262da410213cfcb17" category="list-text">[[auto_check_4_step17]] autoboot 中に Ctrl キーを押しながら C キーを押して 'loader&gt;` プロンプトでノードを停止します</block>
  <block id="8923acb8081affcd156ba6d58720db9b" category="list-text">LOADER プロンプトで、メンテナンスモードに切り替えます。</block>
  <block id="24655647ccabfd614d439a15f52407aa" category="paragraph">「 boot_ontap maint 」を使用してください</block>
  <block id="82b61383829ad9f7c791ca9adcbe4b1f" category="list-text">保守モードで、以前に設定したすべてのイニシエータポートをターゲットモードで表示します。</block>
  <block id="0237455b5c9b0d306e2c96ee6c599c24" category="paragraph">ポートをイニシエータモードに戻します。</block>
  <block id="7dca1ec13f028b73f4170b0124cf9d45" category="list-text">ポートがイニシエータモードに変更されたことを確認します。</block>
  <block id="bf1d9c5801bc3674bc765551ff2f2964" category="paragraph">「 boot_ontap 」</block>
  <block id="eedc84ab2e1ed2d5f77ae259bcc2e53d" category="paragraph">これで、ブート時に以前に割り当てられていたすべてのディスクをノードで検出できるようになり、想定どおりにブートできるようになります。</block>
  <block id="60429a189ace5d1ba3d34868ab11d685" category="admonition">* ここに示す順序で以下の手順を実行する必要があります。正しく実行しないと、原因が停止したり、データが失われたりする可能性があります。 *</block>
  <block id="534c28a3529827f81e0580e98c2c91b5" category="paragraph">次の手順では、 node4 に node2 のルートアグリゲートからブートするよう設定しています。</block>
  <block id="c9029dad52ad7bd50890b949161a37e6" category="list-text">メンテナンスモードに切り替えます。</block>
  <block id="a1dd60e47fece6bf56643327d78025eb" category="list-text">node2 アグリゲートの RAID 、プレックス、およびチェックサムの情報を確認します。</block>
  <block id="d54681223c9aa263c12e4a2a2a99ab44" category="paragraph">「 aggr status -r 」</block>
  <block id="cf43f30b70f96333f3d873e68b6170ad" category="list-text">node2 アグリゲートのステータスを確認します。</block>
  <block id="39cff9999d84ec4289e4ab2ff2e81c67" category="paragraph">「 aggr status 」を入力します</block>
  <block id="4c7213f8f3213d4809b8212b52bfc23a" category="list-text">必要に応じて、 node2 アグリゲートをオンラインにします。</block>
  <block id="40418d7b25faced12b99f33b2265e3b3" category="list-text">ノード 4 が元のルートアグリゲートからブートしないようにします。</block>
  <block id="2f71ad2b913b1589756e19c235187106" category="list-text">node2 のルートアグリゲートを node4 の新しいルートアグリゲートとして設定します。</block>
  <block id="cb891bf7e336200833c9e240c76a0cc6" category="list-text">ノード 4 のルートアグリゲートがオフラインになっていること、および node2 から提供されたディスクのルートアグリゲートがオンラインになっていて root に設定されていることを確認します。</block>
  <block id="6bab8b4510fec23b1120be927a0bfea7" category="admonition">前の手順を実行しない場合は、原因 node4 から内部ルートアグリゲートをブートするか、原因システムが新しいクラスタ構成が存在すると想定するか、あるいはクラスタ構成を特定するように求められる可能性があります。</block>
  <block id="c06377da744f281f74d745bd6cf53c71" category="paragraph">次の例は、コマンドの出力を示しています。</block>
  <block id="7ce57c4ce051863fc414ccd402a178f5" category="doc">ノード 3 でキー管理ツールの設定をリストアします</block>
  <block id="594ac9e04c14065852f0e508c7b91ccb" category="paragraph">次の手順を実行して、暗号化設定を新しいノードに同期します。</block>
  <block id="0a83ed732b07426c840d56d0ee6e648b" category="paragraph">「セキュリティキーマネージャオンボード同期」</block>
  <block id="15577d2c813239ab53fdc6f35d8a1dc5" category="doc">ノードペアをアップグレードします</block>
  <block id="5634325c9c7a1ed8bb239cc0f0ecea96" category="paragraph">ノードペアをアップグレードするには、元のノードを準備し、元のノードと新しいノードの両方で一連の手順を実行する必要があります。その後、元のノードの運用を停止できます。</block>
  <block id="a1bf01274d938e19b1e43eb57fc3c557" category="summary">MetroCluster 構成のスイッチオーバー、修復、スイッチバックの処理を検証する必要があります。</block>
  <block id="9759ad3dfabdb9631ec5fba47d71c313" category="doc">スイッチオーバー、修復、スイッチバックを検証</block>
  <block id="26678fb639f40f31f518f926dd61b9ab" category="doc">ストレージ暗号化用の外部キー管理サーバの IP アドレスを取得します</block>
  <block id="7acef9ce6b481d82dc187cf0cd0ba769" category="paragraph">アップグレード後は、すぐにストレージ暗号化を設定し、クラスタ全体の認証キーを確立して、以前のノードレベルの認証キーを置き換える必要があります。</block>
  <block id="bc528557a58db2778646f31143323c9a" category="list-text">キー管理サーバとの通信に必要なクライアントおよびサーバの Secure Sockets Layer （ SSL ）証明書をインストールします。</block>
  <block id="6b3a21077187795e57ca156a1f7425b1" category="paragraph">「セキュリティ証明書のインストール」</block>
  <block id="cbb3eece6687c0e5f34c4dd9eec3d644" category="list-text">各ノードで次のコマンドを使用して、すべてのノードでストレージ暗号化を設定します。</block>
  <block id="36b59c92319c91ef4b062f7a5735609c" category="paragraph">「セキュリティキーマネージャの設定」</block>
  <block id="c3da263b79224793b774d0b2cb2d9fe1" category="list-text">各キー管理サーバの IP アドレスを追加します。</block>
  <block id="4ddacc4fe876ce1520a863683e858a54" category="paragraph">「セキュリティキーマネージャの追加」</block>
  <block id="126ba987a97e09c07ace066db3597dbe" category="list-text">クラスタ内のすべてのノードで同じキー管理サーバが設定され使用可能になっていることを確認します。</block>
  <block id="a57b36ea9f75076c6744f1f269e29bd8" category="paragraph">「 securitykey-manager show -status 」</block>
  <block id="463cf5d698fac90be015c82e1bfb13fd" category="list-text">クラスタ全体の新しい認証キーを作成します。</block>
  <block id="16ad807911a8c9b345c579c4bcb340cb" category="paragraph">「 securitykey-manager create-key 」を選択します</block>
  <block id="cf838fadddca3730f4efc72c1c3c093c" category="list-text">新しい認証キー ID をメモします。</block>
  <block id="470fc1401dbcb8983abb71c0870d4258" category="list-text">すべての自己暗号化ドライブのキーを新しい認証キーに変更します。</block>
  <block id="d3632885c406f1fdf833bfa7e1f0af27" category="section-title">KMIP サーバを使用して認証を管理します</block>
  <block id="eef7c3c189b38852fa6fd7ff22f1836c" category="paragraph">ONTAP 9.8 以降では、 Key Management Interoperability Protocol （ KMIP ）サーバを使用して認証キーを管理できます。</block>
  <block id="761ac244160bc99600210b11c30dc464" category="list-text">新しいコントローラを追加します。</block>
  <block id="5b84aee6aa26cfb08d3ab766a49e026d" category="list-text">キー管理ツールを追加します。</block>
  <block id="321aa19fc0cdb52498a74f6673729f5e" category="list-text">キー管理サーバが設定され、クラスタ内のすべてのノードで使用できることを確認します。</block>
  <block id="a1b7f6ea0d485d5a6890d4047d37884c" category="list-text">リンクされたすべてのキー管理サーバの認証キーを新しいノードにリストアします。</block>
  <block id="a4ad027ddee7647712bbf971c8d839c4" category="list-text">すべての自己暗号化ディスクのキーを新しい認証キーに変更します。</block>
  <block id="bf0679d0cb7aea4f9f1e7253a96643cf" category="paragraph">'storage encryption disk modify -disk * [-data-key-id nonMSID AK</block>
  <block id="42cbbc611cf1111ca13ce179f80d2257" category="list-text">連邦情報処理標準（ FIPS ）を使用する場合は、すべての自己暗号化ディスクのキーを新しい認証キーに変更してください。</block>
  <block id="5beb4b8523f6870e231ec55cdf442a39" category="paragraph">「 storage encryption disk * modify -disk * [-fips-key-id nonAK 」」</block>
  <block id="666d41f92db6a2191af16e999d035f4f" category="section-title">オンボードキーマネージャを使用してストレージ暗号化を管理します</block>
  <block id="54279af53279de10320508d0526f332e" category="paragraph">OKM は暗号キーを管理できます。OKM を使用する場合は、アップグレードを開始する前にパスフレーズとバックアップ資料を記録しておく必要があります。</block>
  <block id="259c8a53b900b4102babb5d05e113f67" category="list-text">パスフレーズを安全な場所に保存します。</block>
  <block id="19077cc2690337623f542cbef7fae627" category="list-text">リカバリ用のバックアップを作成します。次のコマンドを実行して出力を保存します。</block>
  <block id="bad82f8550ff52390ef854218320ca8e" category="list-text">デスティネーションクラスタの SnapMirror 関係のステータスを確認します。</block>
  <block id="5bab70a374b8d81dfb1cf1f910800c2a" category="paragraph">「 Snapmirror show 」のように表示されます</block>
  <block id="4240e52a9ba444973cab2a23381467d2" category="paragraph">SnapMirror 関係の状態が「 Transferring 」でない場合は、中止は失敗します。</block>
  <block id="39ab24c8bbd04eb5a8927ffbecfe915d" category="list-text">クラスタ間のすべての関係を休止します。</block>
  <block id="97075c537f59de355c8d44c57697ef74" category="doc">障害が発生したアグリゲートを再配置するか</block>
  <block id="1a246f70242ad6a20257f6b2816e32b7" category="paragraph">いずれかのアグリゲートに再配置が失敗した場合、または拒否されている場合は、アグリゲートを手動で再配置するか、必要に応じて拒否またはデスティネーションのチェックを無視する必要があります。</block>
  <block id="d5b52813fd23e774f0e560e7d8ecc452" category="paragraph">エラーが原因で再配置処理が一時停止します。</block>
  <block id="b10c9e2a07f0bd22d85f72c5fb19d122" category="list-text">イベント管理システム（ EMS ）のログで、アグリゲートの再配置に失敗した理由や拒否された理由を確認します。</block>
  <block id="f5bf9910c32ce3468dc3a0f80ee2e47a" category="list-text">障害が発生したアグリゲートまたは拒否されたアグリゲートを</block>
  <block id="4f6da995dc4a823a0d6529c9d724b695" category="list-text">プロンプトが表示されたら、「 y 」と入力します。</block>
  <block id="d5f8db2e1eae8ada3af51a497dead90d" category="list-text">再配置は、次のいずれかの方法で強制的に実行できます。</block>
  <block id="054b4f3ea543c990f6b125f41af6ebf7" category="cell">オプション</block>
  <block id="bca8a20f71b5dee00fa30d0570b83068" category="cell">拒否チェックの無視</block>
  <block id="1b27217f602bc4090b93bc2c72ec2c38" category="cell">デスティネーションチェックの無効化</block>
  <block id="da289ccf0fe9b7b8a0a8c3f55c76c877" category="doc">ARL を使用したコントローラのアップグレードに関するガイドライン</block>
  <block id="1b41541e73f4542502d0cb8be4fcb926" category="paragraph">ARL を使用して ONTAP 9.8 以降を実行するコントローラのペアをアップグレードできるかどうかは、プラットフォームおよび元のコントローラと交換用コントローラの両方の構成によって異なります。</block>
  <block id="da9431cc35c8bdde2930587bdcf661c2" category="section-title">ARL のアップグレードがサポートされます</block>
  <block id="bd405ef9149168a4cb18dfb9e68d4d1e" category="paragraph">ARL 手順 for ONTAP 9.8 以降を使用してノードのペアをアップグレードする場合は、 ARL が元のコントローラおよび交換用コントローラで実行されていることを確認する必要があります。</block>
  <block id="5dab68a78b9466ced5074675f91c7438" category="paragraph">ARL を使用したコントローラのアップグレードは、 SnapLock Enterprise ボリュームおよび SnapLock Compliance ボリュームが設定されたシステムでサポートされます。</block>
  <block id="cb0385d0286af5544c83edeb7702b741" category="section-title">2 ノードスイッチレスクラスタ</block>
  <block id="69ceb2d36918ef5eab686101ab353f0d" category="paragraph">2 ノードスイッチレスクラスタのノードをアップグレードする場合は、アップグレードの実行中もスイッチレスクラスタのノードをそのまま使用できます。スイッチクラスタに変換する必要はありません。</block>
  <block id="bea87fe3e38e1c2fba92c7b4ca690a9d" category="section-title">ARL のアップグレードはサポートされていません</block>
  <block id="d061d57f2d82b85a7aa74e13aaec4c96" category="paragraph">次のアップグレードは実行できません。</block>
  <block id="70a3b031f6a4e388e4285d647440ec82" category="list-text">元のコントローラに接続されたディスクシェルフをサポートしない交換用コントローラへの接続</block>
  <block id="23498de552873202eefb3139773f663c" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ディスクサポート情報の Hardware Universe にリンクするには、次の手順を実行します。</block>
  <block id="d5457a285ea7fce244bde8387644b062" category="list-text">内蔵ドライブを搭載したエントリレベルのコントローラ。たとえば、 FAS 2500 などです。</block>
  <block id="231cf4c70d866b616c21baddaeed0696" category="section-title">トラブルシューティング</block>
  <block id="d60c463bb4096f3ed4bd1618626dfe10" category="inline-link-macro">トラブルシューティングを行う</block>
  <block id="d5dcbeb79cc6a2aa334dc821840400c2" category="summary">アグリゲートの再配置（ ARL ）がアップグレード中に別のポイントで失敗することがあります。</block>
  <block id="b02aac451baf6d7b36d981f898537961" category="doc">アグリゲートの再配置に失敗しまし</block>
  <block id="bdbf296139657929f989f110dccebbd3" category="section-title">アグリゲートの再配置に失敗していないかどうか</block>
  <block id="12f0aff6b7931a4b46dc6629c132816a" category="paragraph">手順の処理中に、ステージ 2 、ステージ 3 、またはステージ 5 で ARL が失敗することがあります。</block>
  <block id="a5c607fe9749b0c2b2f2e3b910604ce4" category="list-text">次のコマンドを入力し、出力を確認します。</block>
  <block id="535fb4b2db5d261fd8e82fde21d267f2" category="paragraph">「 storage aggregate relocation show 」を参照してください</block>
  <block id="e0fafb56752a62a2c5a8a941a4fa2864" category="paragraph">「 storage aggregate relocation show 」コマンドを実行すると、正常に再配置されたアグリゲートと再配置されなかったアグリゲート、および障害の原因が表示されます。</block>
  <block id="85dae5feb66033271bbd3fea4eca5f7e" category="list-text">コンソールで EMS メッセージを確認します。</block>
  <block id="fe96c3f5ae23f058575d629b1b1befa1" category="list-text">「 storage aggregate relocation show 」コマンドの出力と EMS メッセージの出力に応じて、適切な方法を実行します。</block>
  <block id="b3663b253690ee49735db122d80571d6" category="list-text">「 storage aggregate relocation start 」コマンドの「 override-vetoes 」オプションまたは「 override-vetoes destination-checks 」オプションを使用して、アグリゲートまたはアグリゲートの強制的な再配置を実行します。</block>
  <block id="64f7904c016a035f1928a2cbeea82ab1" category="section-title">アグリゲートは、アップグレードの完了後、ノード 1 にもともと存在していたものとノード 4 によって所有されます</block>
  <block id="2e352bfe9deb78b924bf0f5e67164c3c" category="paragraph">アップグレード手順の最後に、 node3 は、元々ホームノードとしてノード 1 を使用していたアグリゲートの新しいホームノードである必要があります。このパスはアップグレード後に再配置できます。</block>
  <block id="0aedbbe9928008ef20e9f0f31cd1ec93" category="list-text">ステージ 3 で、アグリゲートが node2 から node3 に再配置されている場合。再配置する一部のアグリゲートのホームノードが node1 に含まれている。たとえば、このようなアグリゲートのことを aggr_node_A_1 と呼びます。ステージ 3 で aggr_node_A_1 の再配置が失敗し、強制的に再配置を実行できない場合、アグリゲートは node2 で残ります。</block>
  <block id="94db9769a66bbb4255b02f44f30a1506" category="list-text">ステージ 4 のあとで、 node2 を node4 に置き換える場合。node2 を交換すると、 aggr_node_A_1 が、 node3 ではなく node4 にあるホームノードとしてオンラインになります。</block>
  <block id="ba508067c72d91e8f63afe491acaa462" category="paragraph">ストレージフェイルオーバーを有効にしたあとに、ステージ 6 に続けて誤った所有権の問題を修正するには、次の手順を実行します。</block>
  <block id="c76bc65b459278a8c28b143bd2794d8c" category="list-text">次のコマンドを入力して、アグリゲートのリストを表示します。</block>
  <block id="d088dd9060f2818253fb3709d9939a18" category="paragraph">正しく再配置されていないアグリゲートを特定するには、セクションで取得した node1 のホーム所有者を含むアグリゲートのリストを参照してください <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block> コマンドの出力と比較してください。</block>
  <block id="a3249f2582556adc14fc6268c4136b8c" category="list-text">手順 1 の出力と、セクションで確認した node1 用の出力を比較します <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block> 再配置されていないアグリゲートがあることを確認します。</block>
  <block id="6351a4102dcb6a482f6002fe35685d71" category="list-text">[[auto_aggr_relocate_fail_Step3] ノード 4 の背後にあるアグリゲートの再配置：</block>
  <block id="19289925f6f4d12d2796b14d773968dd" category="paragraph">この再配置中は '-nd-controller-upgrade パラメータを使用しないでください</block>
  <block id="0bc9088bdd248bcc7cf35ab01ea701a4" category="list-text">node3 がアグリゲートのホームの所有者になったことを確認します。</block>
  <block id="2d5ce426423eeeead4f35769cd8b1b27" category="inline-xref">手順 3</block>
  <block id="65f247827acd19f6f7debcc6880344b0" category="paragraph">ノード 3 をホーム所有者としないアグリゲートは、の同じ再配置コマンドを使用してノード 3 に再配置できます <block ref="b826fa5e08f60e3e6100c14200617b18" category="inline-xref-macro-rx"></block>。</block>
  <block id="e7323a54c9f53a295a2c4d707c7b3fce" category="doc">MetroCluster 構成の健全性を確認</block>
  <block id="57b41b4e6b26c5d81b64f649f73c20f8" category="paragraph">Fabric MetroCluster 構成でアップグレードを開始する前に、 MetroCluster 構成の健全性をチェックして、正常に動作することを確認する必要があります。</block>
  <block id="ce1ec3b6f165be8cdde0654c531487e5" category="list-text">MetroCluster コンポーネントが正常であることを確認します。</block>
  <block id="b39709ac0ef947bdc090084f89c2ad94" category="paragraph">「 MetroCluster check run 」のようになります</block>
  <block id="f005234d35c44406394bfc86ede22866" category="paragraph">この処理はバックグラウンドで実行されます。</block>
  <block id="8600ca2371816e2374e80e982b51e056" category="list-text">MetroCluster チェックの実行操作が完了したら ' 結果を表示します</block>
  <block id="e3ccf677e56366a417a172944cdd9599" category="paragraph">MetroCluster チェックショー</block>
  <block id="070a4bbedae89743ad2f6646a3f23205" category="paragraph">約 5 分後に、次の結果が表示されます。</block>
  <block id="1a9778326fd00d0e011a777089b2bc6a" category="list-text">実行中の MetroCluster チェック処理のステータスを確認します。</block>
  <block id="fbd55aa6c7d3ee9ec90836dfa01b62d2" category="paragraph">MetroCluster オペレーション履歴 show -job-id 38`</block>
  <block id="74553544aa9c0c94d16a5a5ed85d6720" category="list-text">ヘルスアラートがないことを確認します。</block>
  <block id="838f9a3aa0c54c620c1dab5cccc98ca5" category="paragraph">「 system health alert show 」というメッセージが表示されます</block>
  <block id="5ff20c188ceb23808ed9b47d8e5637ff" category="doc">node3 をインストールしてブートします</block>
  <block id="80f347da1888e440d3f1755d2e9ca001" category="paragraph">ノード 3 をラックに設置し、ノード 1 の接続をノード 3 に転送し、ノード 3 をブートして、 ONTAP をインストールする必要があります。そのあと、このセクションで説明するように、ノード 1 のスペアディスク、ルートボリュームに属するディスク、およびその前の手順でノード 2 に再配置されなかったルート以外のアグリゲートを再割り当てする必要があります。</block>
  <block id="31ccaad020ad8995655b8785712ac7b9" category="paragraph">ノード 1 にインストールされている ONTAP 9 のバージョンが異なる場合は、ノード 3 をネットブートする必要があります。node3 のインストールが完了したら、 Web サーバに保存されている ONTAP 9 イメージからブートします。その後、の手順に従って、後続のシステムのブートに使用する正しいファイルをブートメディアデバイスにダウンロードできます <block ref="4815c2d091d790c1d3bab94177b38eaf" category="inline-link-macro-rx"></block>。</block>
  <block id="2ad1e670b60bb257ae5313d5009813a5" category="inline-link-macro">ノード 3 の FC ポートを設定</block>
  <block id="b6f436f6398306a921de09279a6a8256" category="inline-link-macro">ノード 3 の UTA / UTA2 ポートを確認して設定してください</block>
  <block id="9a1df33637b4fc5aa325b169d3a7aa84" category="list-text">ストレージアレイに接続されている V シリーズシステム、またはストレージアレイに接続された FlexArray 仮想化ソフトウェアを使用するシステムをアップグレードする場合は、を完了する必要があります <block ref="7c8db700ba9d62850f8b66020ea3d4b9" category="inline-xref-macro-rx"></block> から <block ref="d133a54ce8997c6b3c1ffdd4bfb32c84" category="inline-xref-macro-rx"></block>をクリックしてから、このセクションの指示に従います <block ref="b8be2332e6727dc6b48478780a30df1b" category="inline-link-macro-rx"></block> および <block ref="e1881302722b07e924682c0aeef752a5" category="inline-link-macro-rx"></block> 必要に応じて、メンテナンスモードでコマンドを入力します。その後、このセクションに戻ってからを使用して再開する必要があります <block ref="d602dbbaca50060142dad0af29921558" category="inline-xref-macro-rx"></block>。</block>
  <block id="80f025cc78499a80da49bd37c9bde220" category="list-text">ストレージディスクが搭載されたシステムをアップグレードする場合は、このセクション全体を完了して、にアクセスする必要があります <block ref="b8be2332e6727dc6b48478780a30df1b" category="inline-link-macro-rx"></block> および <block ref="e1881302722b07e924682c0aeef752a5" category="inline-link-macro-rx"></block> セクションで、クラスタ・プロンプトでコマンドを入力します。</block>
  <block id="56fd5e5051297f55fa1e22d93c8d71b8" category="list-text">[[auto_install3_step1] ノード 3 のラックスペースがあることを確認します。</block>
  <block id="2c6541bc32b15b7aae8bab68f0ca5874" category="paragraph">ノード 1 とノード 2 が別々のシャーシに搭載されている場合は、ノード 3 をノード 1 と同じラックの場所に設置できます。ただし、 node1 が node2 の同じシャーシに設置されている場合は、 node3 を専用のラックスペースに配置する必要があります。その場合は、 node1 の場所に近い場所に配置することを推奨します。</block>
  <block id="b76de3994341c25067b438fe161926b7" category="list-text">[[auto_install3_step2] ノードモデルの _Installation and Setup Instructions_ に従って、ラックにノード 3 をインストールします。</block>
  <block id="e642674ff2b68ba9c6309b786d87c4f9" category="admonition">両方のノードを同じシャーシに搭載したシステムにアップグレードする場合は、 node4 と node3 をシャーシに設置します。そうしないと、ノードをブートしたときにノードがデュアルシャーシ構成と同じように動作し、 node4 をブートした場合、ノード間のインターコネクトは稼働しません。</block>
  <block id="c558275e7d3a61c5ffa4c89d17138a8e" category="list-text">[[auto_install3_step3]] ケーブルノード 3 を接続し、ノード 1 からノード 3 に接続を移動します。</block>
  <block id="a237c9d74ab3870e45b318a1071c10f4" category="admonition">ほとんどのプラットフォームモデルには一意のインターコネクトカードモデルがあるため、インターコネクトカードまたはクラスタインターコネクトケーブルの接続を node1 から node3 に移動する必要はない場合があります。MetroCluster 構成の場合、 FC-VI ケーブルの接続を node1 から node3 に移動する必要があります。新しいホストに FC-VI カードがない場合は、 FC-VI カードの移動が必要になることがあります。</block>
  <block id="a5492c1c64c93543c424918fe38a847e" category="list-text">[[auto_install3_step4]] ノード 3 の電源をオンにしてから、コンソール端末で Ctrl+C を押してブートプロセスを中断し、ブート環境プロンプトにアクセスします。</block>
  <block id="db32660dfabf573a3553146b10c4b358" category="paragraph">両方のノードを同じシャーシに搭載したシステムにアップグレードする場合は、 node4 もリブートします。ただし、 node4 のブートはあとで破棄することができます。</block>
  <block id="93bd68c37b47b8665f3fe8bb9add087f" category="admonition">node3 をブートすると、次の警告メッセージが表示される場合があります。</block>
  <block id="7882a4b556b6996eaf604413a9e602d9" category="inline-xref">手順 4</block>
  <block id="b64113c5a70901151e544500a7cb6e41" category="list-text">[[auto_install3_step5]] で警告メッセージが表示される場合 <block ref="07e6330d4bc574888011bcb486743c88" category="inline-xref-macro-rx"></block>を使用して、次の操作を実行します。</block>
  <block id="c05c7a2303ef34ab95234ebadd79fc8f" category="cell">ブート環境プロンプトで次のコマンドを使用して、自動的に接続を設定します。 ifconfig e0M -auto</block>
  <block id="48060f068bd1fae855e05859f04c5e3f" category="list-text">[[step7] node3 でネットブートを実行します。</block>
  <block id="526c6586cac2a5ca719ec72a9f077f53" category="paragraph">「 &lt;path_the_web-accessible_directory&gt; 」は、「 &lt;ONTAP_version&gt;_image.tgz 」をダウンロードした場所を指します <block ref="4815c2d091d790c1d3bab94177b38eaf" category="inline-link-macro-rx"></block>。</block>
  <block id="00a7cfe4f4da76897b759c2fe0aa87e4" category="list-text">[[step8]] ブートメニューからオプション [(7) 新しいソフトウェアを最初にインストールする ] を選択します</block>
  <block id="f0546cfa67e11944c3c115c55c0d74c6" category="list-text">[[step9]] 手順を続行するかどうかを確認するメッセージが表示された場合は、「 y 」と入力し、パッケージのプロンプトが表示されたら URL を入力します。</block>
  <block id="b420e8eb0083114b740da33989940785" category="list-text">[[step10] コントローラモジュールをリブートするには、次の手順を実行します。</block>
  <block id="dab98833427c3d8aa8eeb5d6db41328b" category="paragraph">バックアップ設定を今すぐ復元しますか ? {y|n}`</block>
  <block id="78531eca4abf30d4c07d610d913a17b4" category="list-text">次のプロンプトが表示されたら 'y' と入力して再起動します</block>
  <block id="3cab3f136b2c476f859a364c003079c3" category="paragraph">' 新しくインストールしたソフトウェアの使用を開始するには ' ノードを再起動する必要があります今すぐリブートしますか？{y|n}`</block>
  <block id="665b6d787a8576ee10e9c9cee3583341" category="list-text">[[step11]] ブートメニューからメンテナンスモード「 5 」を選択し、起動を続行するように求めるプロンプトが表示されたら「 y 」と入力します。</block>
  <block id="d268c4054cbf23abb6afc6dec45039b4" category="list-text">[[step12]] コントローラとシャーシが HA として構成されていることを確認します。</block>
  <block id="51c448ec2d072d0227e5d83964636a54" category="list-text">[[step13]] コントローラとシャーシが HA として設定されていない場合は、次のコマンドを使用して構成を修正します。</block>
  <block id="a73d1d9d7a9d36edb67531c5cdd004f4" category="list-text">[[step14]] メンテナンスモードを終了します。</block>
  <block id="c3f299c216a4d01822966fa31545bf67" category="paragraph">ブート環境プロンプトで Ctrl+C キーを押して ' 自動ブートを中断します</block>
  <block id="46b4ada45ce5a9b580d12f2837589006" category="list-text">[[step15]] node2 で、システムの日付、時刻、およびタイムゾーンを確認します。</block>
  <block id="f68146a357d007c5719e57f0df2f6cea" category="list-text">[step16]] on node3 で、ブート環境のプロンプトで次のコマンドを使用して日付を確認します。</block>
  <block id="92b09953e03c695a41d0eca9cc7a70b3" category="list-text">[[step17]] 必要に応じて、 node3 の日付を設定します。</block>
  <block id="a35c7561d833fab42eb0820cd7256987" category="list-text">[step18]] on node3 で、ブート環境のプロンプトで次のコマンドを使用して時間を確認します。</block>
  <block id="8fa05814ac535bc4cac5dc313de56abe" category="list-text">[[step19]] 必要に応じて、ノード 3 の時刻を設定します。</block>
  <block id="b7b77c4a8d173f38e98b19b6fa156359" category="paragraph">printenv partner-sysid</block>
  <block id="1bf7d37df6710b2cae5f87ffc87ac7ca" category="cell">に進みます <block ref="d602dbbaca50060142dad0af29921558" category="inline-xref-macro-rx"></block></block>
  <block id="74c497c4741babe01069b2689c6f6d96" category="inline-link-macro">ノード 3 で FC または UTA / UTA2 設定を設定します</block>
  <block id="2987901eef48d33908a5fe3bc58101db" category="list-text">セクションに移動します <block ref="9cb2fecd70723749806307bb1e7fc101" category="inline-link-macro-rx"></block> をクリックし、このセクションのサブセクションを完了します。</block>
  <block id="824a922c708e37c4e38da69123f1f712" category="list-text">このセクションに戻って、から始めて残りの手順を実行します <block ref="d602dbbaca50060142dad0af29921558" category="inline-xref-macro-rx"></block>。</block>
  <block id="d2382bf853b3c31a2584de4ebbcb20f5" category="list-text">[[auto_install3_step23]] 新しいノードの FC イニシエータポートをスイッチゾーンに追加します。</block>
  <block id="72797da0a6dd02827100892ec56ff0f7" category="inline-link-macro">ノード 3 で FC ポートを設定しています</block>
  <block id="33b34c9b4b9fcbf19dc61172941a60f7" category="paragraph">システムにテープ SAN がある場合は、イニシエータをゾーニングする必要があります。必要に応じて、を参照してオンボードポートをイニシエータに変更します <block ref="587d3c60b98ebe686bf65e1387fc811f" category="inline-link-macro-rx"></block>。ゾーニングの詳細な手順については、ストレージアレイとゾーニングに関するドキュメントを参照してください。</block>
  <block id="c72fdddc98e37cd5e62f25b9974065fc" category="list-text">[[step24]] ストレージアレイに FC イニシエータポートを新しいホストとして追加し、アレイ LUN を新しいホストにマッピングします。</block>
  <block id="3ba1b014c973048d41b40e37b1cfeb69" category="list-text">[[step25]] ストレージアレイ上のアレイ LUN に関連付けられたホストまたはボリュームグループで、 World Wide Port Name （ WWPN ）値を変更します。</block>
  <block id="be6df649a349785ed8ec2a552e7c8903" category="list-text">[[step26]] スイッチベースのゾーニングを使用する構成の場合は、ゾーニングを調整して新しい WWPN 値を反映します。</block>
  <block id="dc19b23ad13df9e69f052ca959f75ad8" category="list-text">[[step28]] ブートメニューからノードを起動します。</block>
  <block id="bc26b5e5559721e19875fb91dce22cec" category="inline-link-macro">ノード 3 で FC または UTA / UTA2 設定を設定します</block>
  <block id="8ba547e72776f098f3b70a6614639f73" category="list-text">[step29] FlexArray 仮想化ソフトウェアがストレージアレイに接続されている MetroCluster 構成、 V シリーズシステム、およびシステムについて、ノードに接続されているディスクを検出するために、ノード 3 の FC ポートまたは UTA / UTA2 ポートを設定する必要があります。このタスクを完了するには、セクションに進んでください <block ref="c73225f56714e22dffa9ff7369895ce1" category="inline-link-macro-rx"></block>。</block>
  <block id="ca710412a883d1570696f0510733c7a0" category="list-text">node2 のチェック後、 node2 クラスタのストレージフェイルオーバーとクラスタ HA ペアが有効になります。処理が完了すると、両方のノードに「 Completed 」と表示され、クリーンアップ処理が実行されます。</block>
  <block id="9d070d121ee26abdb5d314d6fff4c15c" category="list-text">ストレージフェイルオーバーが有効になっていることを確認します。</block>
  <block id="751035e5db88d172e881299c202d9b13" category="paragraph">「 storage failover show 」をクリックします</block>
  <block id="715940e961cf53af2ba53d695b5bdb37" category="paragraph">次の例は、ストレージフェイルオーバーが有効になっている場合のコマンドの出力例を示しています。</block>
  <block id="9e6e3ee8077a0815c415187bf7e78b19" category="list-text">次のコマンドを使用して、 node3 と node4 が同じクラスタに属していることを確認します。出力を確認します。</block>
  <block id="494cb4f7976c64f111b74e9089d5bbd5" category="paragraph">「 cluster show 」を参照してください</block>
  <block id="fd3a247231846521133c845ae4c424c0" category="list-text">次のコマンドを使用して、 node3 と node4 が相互のストレージにアクセスできることを確認します。出力を確認します。</block>
  <block id="ed63866964a059112ba504e1f09aa077" category="list-text">次のコマンドを使用して、 node3 と node4 がクラスタ内の他のノードによってホーム所有されているデータ LIF を所有していないことを確認します。</block>
  <block id="6485b14c0e329aebda0c4dcd7d09dbd0" category="paragraph">「 network interface show 」を参照してください</block>
  <block id="dc85e26538718b459bdf2a353367f497" category="paragraph">node3 と node4 がクラスタ内の他のノードによってホーム所有されているデータ LIF を所有していない場合は、データ LIF をホーム所有者にリバートします。</block>
  <block id="98ab56275ed98fed50530abdb3a97ee7" category="paragraph">「 network interface revert 」の略</block>
  <block id="f67d0a54b752ca4f669625b9f2eba648" category="list-text">ノード 3 がノード 1 のアグリゲートを所有していること、およびノード 4 がノード 2 のアグリゲートを所有していることを確認します。</block>
  <block id="862da4c0b3b19ba62c050373943cd909" category="list-text">オフラインになっているボリュームがないかを確認します。</block>
  <block id="b2ec89d698c3bc26ab79d7bad283a953" category="list-text">オフラインになっているボリュームがある場合は、セクションで取得したオフラインボリュームのリストと比較します <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block>必要に応じて、次のコマンドを使用して、ボリュームごとに 1 回、オフラインボリュームをオンラインにします。</block>
  <block id="8b2ba35c1767c4b484add2236c0ffa6c" category="list-text">ノードごとに次のコマンドを使用して、新しいノードの新しいライセンスをインストールします。</block>
  <block id="539b1b58f1be38076506f35eb15e4340" category="paragraph">license-code パラメータには、アルファベットの文字キーをアルファベットの大文字 28 個まで入力できます。ライセンスは一度に 1 つずつ追加することも、複数追加することもできます。各ライセンスキーをカンマで区切って指定することもできます。</block>
  <block id="8fb49e1f692fe82fa4072e7f3b3adc5d" category="list-text">次のいずれかのコマンドを使用して、元のノードから古いライセンスをすべて削除します。</block>
  <block id="3ce96f90e07aec61f73d0c41634c6aa1" category="paragraph">「システムライセンスのクリーンアップ - 未使用 - 期限切れ」</block>
  <block id="b71fdf79c90ac84b34d2470620eeaa18" category="list-text">期限切れのライセンスをすべて削除します。</block>
  <block id="df1e7bcee84d26ba3ee0e0f129bf90c0" category="paragraph">「システムライセンスのクリーンアップ - 期限切れ」</block>
  <block id="b162df50db538c8339d7ad30f407e32f" category="list-text">未使用のライセンスをすべて削除します。</block>
  <block id="32be9f537283877b6e62fd279a4f5513" category="paragraph">'System license clean-up-unused （システムライセンスのクリーンアップ - 未使用） '</block>
  <block id="9501cf64d3b2dae298a8bc24331bd5f4" category="list-text">クラスタから特定のライセンスを削除するには、ノードで次のコマンドを使用します。</block>
  <block id="9a940b51cdd2b2d508cffc6eecff9e32" category="paragraph">次の出力が表示されます。</block>
  <block id="0b0ab53ca7ce0880a8c5c074d260f0ab" category="paragraph">すべてのパッケージを削除するには 'y' を入力します</block>
  <block id="f52d44aaa981f34fa588225f9d4cc820" category="paragraph">「 system license show 」を参照してください</block>
  <block id="9dabc4c6addd92ab1be1dd1cd49038f7" category="inline-link-macro">Node4 をインストールしてブートします（手順 27 ）</block>
  <block id="1534946b2dbb4d79955a0d451c913c4c" category="list-text">[[Step13]] 両方のノードで次のコマンドを使用して、 SP を設定します。</block>
  <block id="e4c074cd0d17a1426d4153413c21f2b8" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> SP および _SP ONTAP 9.8 コマンドの詳細については ' システム管理リファレンスにリンクするには ' マニュアルページリファレンスを参照してください system の service-processor network modify コマンドの詳細については ' を参照してください</block>
  <block id="5fd1bcc8472b38442961eb87ca3f844a" category="paragraph">「 advanced 」の権限が必要です</block>
  <block id="6dcd1ebf4390170868ab9bcdfd967581" category="list-text">次のコマンドを入力します。</block>
  <block id="0ac9d40efe1470ec53257470c91f7314" category="list-text">admin レベルに戻ります。</block>
  <block id="d260c71f1d73fe6dce24fae82cd28aca" category="paragraph">「特権管理者」</block>
  <block id="01e6682dee79033af96ab718c5ec6c11" category="list-text">新しいノードにスイッチレスクラスタをセットアップする場合は、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ネットアップサポートサイトへのリンクを設定するには、 _ 2 ノードスイッチレスクラスタへの移行の手順に従ってください。</block>
  <block id="27af4227ca8acc558df96e2723ec9b37" category="inline-link-macro">新しいコントローラモジュールで Storage Encryption をセットアップします</block>
  <block id="a1e79be82a0d3f4b4c3568d0f3e32af4" category="paragraph">ノード 3 とノード 4 でストレージ暗号化が有効になっている場合は、セクションを完了します <block ref="18c90c300c0b71334b8b427eaf4f38a3" category="inline-link-macro-rx"></block>。それ以外の場合は、の項を実行します <block ref="6e48b929ca0767f00c15eeb6d7e78755" category="inline-link-macro-rx"></block>。</block>
  <block id="8fb4b518ce39a0704f920c9d4f2f7b77" category="doc">アグリゲートの再配置を使用してコントローラハードウェアをアップグレードする</block>
  <block id="2b8ce2a5a31645114136f0f0bb138e41" category="paragraph">この情報では、元のノードの名前は「 node1 」と「 node2 」になり、新しいノードの名前は「 node3 」と「 node4 」になります。説明されている手順では、 node1 は node3 に置き換えられ、 node2 は node4 に置き換えられます。「 node1 」、「 node2 」、「 node3 」、および「 node4 」は、元のノードと新しいノードを区別するためだけに使用されます。手順を使用するときは、元のノードと新しいノードの実際の名前を置き換える必要があります。ただし実際には、ノードの名前は変更されません。 node3 には node1 という名前が付けられ、 node4 にはコントローラハードウェアのアップグレード後に node2 という名前が付けられます。</block>
  <block id="997df92b20e351845274e553840f1763" category="paragraph">この情報の中で、「 FlexArray 仮想化ソフトウェアを搭載したシステム」とは、これらの新しいプラットフォームに属するシステムを指します。「 V シリーズシステム」という用語は、ストレージアレイに接続可能な独立したハードウェアシステムを指します。</block>
  <block id="32de3fe80cc3182e6d21291decbf392a" category="inline-link-macro">ARL アップグレードの概要</block>
  <block id="bc0c3600d83329affdb0d85df2aeac56" category="list-text">この手順は、交換用コントローラハードウェアが新しく購入され、使用されていないことを前提としています。使用済みのコントローラを「 wipeconfig 」コマンドで準備するために必要な手順は、この手順には含まれていません。交換用コントローラハードウェアを以前に使用していた場合は、テクニカルサポートに問い合わせる必要があります。特に、コントローラが Data ONTAP 7-Mode を実行していた場合は、テクニカルサポートにお問い合わせください。</block>
  <block id="8d7b68591c9cb3f00554e8b1dd0cc34a" category="list-text">ARL を使用すると、システムを停止することなく、アップグレードするクラスタよりも新しいバージョンの ONTAP を実行する新しいコントローラへのアップグレードを実行できます。古いコントローラと新しいコントローラの ONTAP バージョンの組み合わせは、 ONTAP ソフトウェアリリースの NDU モデルによって決まります。たとえば、 ONTAP 9.8 を実行しているコントローラがあり、そのコントローラで最後にサポートされていたバージョンである場合は、 ONTAP 9.8 より後のバージョンの ONTAP を実行している新しいコントローラにアップグレードできます。</block>
  <block id="3f765691a1037f4fcf966c679a3f3a4a" category="doc">ステージ 3 ：node3 をインストールしてブートします</block>
  <block id="b27daeccf5fbd8a2e88a3636ee615b74" category="list-text"><block ref="b27daeccf5fbd8a2e88a3636ee615b74" category="inline-link-macro-rx"></block></block>
  <block id="c73225f56714e22dffa9ff7369895ce1" category="list-text"><block ref="c73225f56714e22dffa9ff7369895ce1" category="inline-link-macro-rx"></block></block>
  <block id="63ad3c4d36a1a9f413872ac57af754a7" category="inline-link-macro">ノード 3 のインストールを確認します</block>
  <block id="35ed01fca1dde6c35ca197b89d2bbfc7" category="list-text"><block ref="35ed01fca1dde6c35ca197b89d2bbfc7" category="inline-link-macro-rx"></block></block>
  <block id="f6eafe551d29e5e1c533099843028759" category="list-text"><block ref="f6eafe551d29e5e1c533099843028759" category="inline-link-macro-rx"></block></block>
  <block id="840820d31f6c078aeb1567ce302bdd05" category="inline-link-macro">ノード 1 で所有されているルート以外のアグリゲートと NAS データ LIF を、ノード 2 からノード 3 に移動します</block>
  <block id="6acca98fea84a4d59c293fb72d8b9155" category="list-text"><block ref="6acca98fea84a4d59c293fb72d8b9155" category="inline-link-macro-rx"></block></block>
  <block id="bbbe961bb71cae13cea3f5b878f4dbb9" category="doc">ステージ 2 ：移行してノード 1 を撤去</block>
  <block id="7de24b16e7313de118da7559fecd8fd4" category="inline-link-macro">ノード 1 が所有するルート以外のアグリゲートと NAS データ LIF をノード 2 に再配置します</block>
  <block id="22e9bda17d40c1dbdb534fd455e19fcd" category="list-text"><block ref="22e9bda17d40c1dbdb534fd455e19fcd" category="inline-link-macro-rx"></block></block>
  <block id="650a4c1ea41a0f666ee188ff323d26b9" category="list-text"><block ref="650a4c1ea41a0f666ee188ff323d26b9" category="inline-link-macro-rx"></block></block>
  <block id="93d6a78ca650a17d67b6a45ca81b7f3f" category="inline-link-macro">ノード 1 を撤去</block>
  <block id="830cfeba72054433fc0dcccc19f6d055" category="list-text"><block ref="830cfeba72054433fc0dcccc19f6d055" category="inline-link-macro-rx"></block></block>
  <block id="4815c2d091d790c1d3bab94177b38eaf" category="list-text"><block ref="4815c2d091d790c1d3bab94177b38eaf" category="inline-link-macro-rx"></block></block>
  <block id="81605039a97ca73a232818034b412a87" category="doc">ステージ 1 ：アップグレードを準備</block>
  <block id="cd8ad1809865824065fe011b80800cd6" category="list-text"><block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block></block>
  <block id="0ae607be61578c5416aa071902ff0f19" category="list-text"><block ref="0ae607be61578c5416aa071902ff0f19" category="inline-link-macro-rx"></block></block>
  <block id="4ded4d845e551767daf131f3a1827b13" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> Hardware Universe にリンクして新しいノードのポートに関する情報を取得するには、次の手順を実行します。このセクションの後半の情報を使用します。</block>
  <block id="3e1a89708cfe8d08896ed24a0d0be5e8" category="paragraph">物理ポートのレイアウトは、ノードのモデルによって異なる場合があります。新しいノードがブートすると、 ONTAP は、自動的にクォーラムに参加するためにクラスタ LIF をホストするポートを判別しようとします。</block>
  <block id="98ba93dd4de23479aa574bba16f17db7" category="paragraph">node2 の物理ポートが node4 の物理ポートに直接マッピングされない場合は、次のセクションに続きます <block ref="364d871b05cd34ae9893fc6fc54b8984" category="inline-xref-macro-rx"></block> ネットワーク接続を修復するために使用する必要があります。</block>
  <block id="e39c239523fa2335eed92e50ae0e2208" category="paragraph">ノード 4 のインストールとブートが完了したら、ノード 4 が正しくインストールされていることを確認する必要があります。ノード 4 がクォーラムに参加するのを待ってから、再配置処理を再開する必要があります。</block>
  <block id="ed944478e87ce6285850bdd8efb0399a" category="paragraph">手順のこの時点で、ノード 4 がクォーラムに参加する間、処理が一時停止します。</block>
  <block id="6a8e851d9f61a3ae03d77096370ca9c6" category="list-text">ノード 4 がクォーラムに参加していることを確認し</block>
  <block id="4395613c979349d83b9f7a1fd64ad821" category="paragraph">cluster show -node node4 -fields health`</block>
  <block id="a5c25ebe0ba44233d498c66cb77e22f2" category="paragraph">「 health 」フィールドの出力は「 true 」でなければなりません。</block>
  <block id="f9bb6290635aecbf1e553e1d48da4966" category="list-text">ノード 4 がノード 3 と同じクラスタに含まれていること、およびノード 4 が正常であることを確認します。</block>
  <block id="1b294cfbc51db8a82a21bedd0caea1b7" category="list-text">advanced 権限モードに切り替えます。</block>
  <block id="248f892426f89c07bc5999439096f3e0" category="paragraph">「高度」</block>
  <block id="b1ce2a2b9289e0bdc7f0dcbfb19de9c2" category="list-text">コントローラ交換処理のステータスを確認し、 node2 を停止する前と同じ状態で一時停止状態になっていることを確認して、新しいコントローラの取り付けやケーブルの移動の物理タスクを実行します。</block>
  <block id="8005ab9a73c38cc367636a0ec9e8fa35" category="paragraph">「 system controller replace show 」と表示されます</block>
  <block id="cf24b4fbdd5de5d1db8e8fd45a8826f7" category="list-text">MetroCluster システムを使用している場合は、交換したコントローラが MetroCluster 構成に対して正しく設定されていることを確認します。 MetroCluster 構成が正常な状態である必要があります。を参照してください <block ref="14c0e32a98a31f9fd4a16b635b2f7ebd" category="inline-link-macro-rx"></block>。</block>
  <block id="f5ce4d426c8852e0090ab32842d1cd09" category="inline-xref">手順 6</block>
  <block id="459235ad323edd7deeae2dc5ded37b95" category="paragraph">MetroCluster ノード node4 にあるクラスタ間 LIF を再設定し、 MetroCluster ノード間の通信をリストアするクラスタピアリングをチェックします <block ref="ee95d9bf63146ca7fe271f7654fa2f7c" category="inline-xref-macro-rx"></block>。</block>
  <block id="45b045cb31b53300f077fd700437de5a" category="paragraph">MetroCluster ノードのステータスを確認します。</block>
  <block id="ecada3140a47012aab89f14c63ba9190" category="paragraph">MetroCluster node show</block>
  <block id="973e4031ed35bf66df5741d51fd988da" category="list-text">[[auto_verify_4_Step6]] コントローラ交換操作を再開します。</block>
  <block id="2a2c4f4e7fd268d1d4c0dda8807d69e2" category="list-text">コントローラの交換は一時停止し、次のメッセージが表示されます。</block>
  <block id="6f399bf4f62f96a02d91e295630626e7" category="list-text">コントローラの交換を一時停止状態にした状態で次のセクションに進んで、ノードのネットワーク設定をリストアします。</block>
  <block id="ad642c9296b70fbec2ff690ecca7088a" category="section-title">ノード 4 のネットワーク設定をリストアします</block>
  <block id="51c7cb1cccc939f5c24359054f6e087c" category="paragraph">node4 がクォーラムにあり、 node3 と通信できることを確認したら、 node2 の VLAN 、インターフェイスグループ、およびブロードキャストドメインが node4 にあることを確認します。また、ノード 4 のすべてのネットワークポートが正しいブロードキャストドメインに設定されていることを確認します。</block>
  <block id="c4d5be310a7b3c7d734bbcc91e576fc5" category="list-text">アップグレードされた node2 （ node4 ）にある物理ポートをすべて一覧表示します。</block>
  <block id="932f91b355fe820e44bf7015a07fe9d1" category="paragraph">「 network port show -node node4 」</block>
  <block id="7201bec4fa4ce45284b39257c7ebc9bd" category="paragraph">ノードのすべての物理ネットワークポート、 VLAN ポート、およびインターフェイスグループポートが表示されます。この出力から、 ONTAP によって「 Cluster 」ブロードキャストドメインに移動された物理ポートを確認できます。この出力を使用して、インターフェイスグループメンバーポート、 VLAN ベースポート、または LIF をホストするスタンドアロンの物理ポートとして使用するポートを決定できます。</block>
  <block id="f12a8cebc5d18fa1d15cbfd16990a033" category="list-text">クラスタのブロードキャストドメインの一覧を表示します。</block>
  <block id="5e805181dd219e5299df90fe82dbae5d" category="paragraph">「 network port reachability show 」のように表示されます</block>
  <block id="b60798a4e8624ef10969a61bd2f1a5a7" category="paragraph">コマンドの出力例を次に示します。</block>
  <block id="84bdf9c97b15a3e6ea78416bdc99e1ee" category="paragraph">上記の例では、 node2 _node4 がコントローラの交換後にブートされたとします。到達可能性のない複数のポートがあり、到達可能性スキャンを保留しています。</block>
  <block id="7e4772f5da93344d8ada20b9c581e1f9" category="list-text">[[auto_restore_4_Step4]] ノード 4 の各ポートの到達可能性を 'OK' 以外の到達可能性ステータスで修復します次のコマンドを最初に任意の物理ポートで実行し、次に任意の VLAN ポートで一度に 1 つずつ実行します。</block>
  <block id="b784d8e9f422428eac76c9239f75fe91" category="paragraph">次のような出力が表示されます。</block>
  <block id="6da5520b869a50ed547a761fe1f0e10e" category="paragraph">上記の警告メッセージは、到達可能性ステータスのポートで、現在配置されているブロードキャストドメインの到達可能性ステータスとは異なる可能性がある場合に表示されます。</block>
  <block id="2b17ef3c860c2adf63f0265d9181acce" category="paragraph">ポートと回答 'y' または 'n' の接続を適宜確認します</block>
  <block id="88e1ec169a4d9b4d08505d76c6e1eb13" category="paragraph">すべての物理ポートに想定される到達可能性があることを確認します。</block>
  <block id="763c4b6560b672163a09cf2e67ba8d89" category="paragraph">到達可能性の修復が実行されると、 ONTAP は正しいブロードキャストドメインにポートを配置しようとします。ただし、ポートの到達可能性を判別できず、既存のどのブロードキャストドメインにも属していない場合、 ONTAP はこれらのポート用に新しいブロードキャストドメインを作成します。</block>
  <block id="6c2174965c1dafdd591752b78b10faa9" category="list-text">インターフェイスグループの設定が新しいコントローラの物理ポートレイアウトと一致しない場合は、次の手順に従って設定を変更します。</block>
  <block id="a0c9e092b3640057dbbb2fad95c8d7be" category="list-text">最初に、インターフェイスグループのメンバーポートにする物理ポートを、それぞれのブロードキャストドメインメンバーシップから削除する必要があります。これを行うには、次のコマンドを使用します。</block>
  <block id="62c1275f11de1967a743be3b315a5af6" category="list-text">インターフェイスグループにメンバーポートを追加します。</block>
  <block id="0abff6a62b49a7204a8ea4607845ec05" category="list-text">インターフェイスグループは、最初のメンバーポートが追加されてから約 1 分後にブロードキャストドメインに自動的に追加されます。</block>
  <block id="8f16f590f8016a4aad84ad6c5a34e114" category="list-text">インターフェイスグループが適切なブロードキャストドメインに追加されたことを確認します。</block>
  <block id="607ae99fdc4c8f52e04ea11d57ca8694" category="paragraph">インターフェイスグループの到達可能性ステータスが「 OK 」でない場合は、適切なブロードキャストドメインに割り当てます。</block>
  <block id="1650d35c8daaa79601fdd8158052591c" category="list-text">適切な物理ポートを Cluster ブロードキャスト・ドメインに割り当てます</block>
  <block id="4c2584946af77fb7d60cf4ae472d405c" category="list-text">'Cluster' ブロードキャスト・ドメインに到達可能なポートを判別します</block>
  <block id="a2904a68bb127cf5751716be508a8cd4" category="paragraph">「 network port reachability show-reachable-broadcast-domain Cluster ： Cluster 」</block>
  <block id="9f99edf6858da9da7242d6b213567d8c" category="list-text">到達可能性ステータスが「 OK 」でない場合は、「 Cluster 」ブロードキャストドメインに到達可能なすべてのポートを修復します。</block>
  <block id="094336d39f674644064e82381591f883" category="list-text">次のいずれかのコマンドを使用して、残りの物理ポートを正しいブロードキャストドメインに移動します。</block>
  <block id="fc794a16843cc25cbaf14628270ab5d2" category="paragraph">「 network port broadcast-domain remove-port 」のようになります</block>
  <block id="db5edb9657d0577afb5f42b19b5b760f" category="paragraph">「 network port broadcast-domain add-port 」と入力します</block>
  <block id="add7de11dea94372ab92280144dd2eae" category="paragraph">「 network port reachability show-detail` 」と表示されます</block>
  <block id="67d13fe1d5e641d73d6e558118a0902a" category="list-text">次の手順を実行して、取り外された可能性のある VLAN を復元します。</block>
  <block id="cb91f704c28ecf5de2f29274ef6bf62e" category="list-text">取り外された VLAN のリスト：</block>
  <block id="551f04031696758c1c256f1c90e57b39" category="paragraph">次のような出力が表示されます。</block>
  <block id="a806d4909353769619f495a130cabdbd" category="list-text">以前のベースポートから取り外された VLAN を復元します。</block>
  <block id="e08a0549a69b4bf0d4b807833ac0b586" category="paragraph">次に、インターフェイスグループ a0a から削除された VLAN を同じインターフェイスグループにリストアする例を示します。</block>
  <block id="5382f5bbbe74b198aaaf36efb0dd9ef3" category="paragraph">次に、ポート「 e0e 」上の取り外された VLAN を「 E0h 」にリストアする例を示します。</block>
  <block id="2a31dfadfe9a33da55e9d278be8596a4" category="paragraph">VLAN の復元が成功すると、指定された宛先ポートに、取り外された VLAN が作成されます。デスティネーションポートがインターフェイスグループのメンバーである場合、またはデスティネーションポートがダウンしている場合、 VLAN のリストアは失敗します。</block>
  <block id="aad2ee0340b449143fc7eaa87d78ba8b" category="paragraph">新しくリストアした VLAN が適切なブロードキャストドメインに配置されるまで約 1 分待ちます。</block>
  <block id="9ba5961a2332be610ae3121c25c32aeb" category="list-text">ポートの修復がすべて完了したら、空のブロードキャストドメインを削除します。</block>
  <block id="6fbbdf7318a95fb2400613497f103b75" category="list-text">ポートの到達可能性を確認します</block>
  <block id="e3d6faf783eff413421d5abeaf1dad48" category="paragraph">すべてのポートが正しく設定され、正しいブロードキャストドメインに追加されている場合、「 network port reachability show 」コマンドは、接続されているすべてのポートの到達可能性ステータスを「 ok 」、物理的に接続されていないポートのステータスを「 no-reachability 」と報告する必要があります。この 2 つ以外のステータスが報告されるポートがある場合は、到達可能性修復を実行し、の手順に従ってブロードキャストドメインにポートを追加または削除します <block ref="4f595e600f8320b4ad2d574fa1a9fe37" category="inline-xref-macro-rx"></block>。</block>
  <block id="fb3f4ac6019d983118e241d6e496f536" category="list-text">すべてのポートがブロードキャストドメインに配置されたことを確認します。</block>
  <block id="47cd03a2fa721b9f4f83dca38829afea" category="paragraph">「 network port show 」のように表示されます</block>
  <block id="7b92b1d8c427dbd2b8e236ab8d9bb5f7" category="list-text">ブロードキャストドメインのすべてのポートで、正しい Maximum Transmission Unit （ MTU ；最大伝送ユニット）が設定されていることを確認します。</block>
  <block id="3ef90a77774be1f83d79d3a57d347bee" category="paragraph">「 network port broadcast-domain show 」</block>
  <block id="e2eec117ad4a813e49145093e5613f00" category="list-text">SVM のホームポートと LIF のホームポート（ある場合）をリストアする必要がある場合は、それらを指定して LIF のホームポートをリストアします。</block>
  <block id="12c772fdba51a1a482d3e3843bdaf6c4" category="list-text">移動された LIF を表示します。</block>
  <block id="b24b42eec37d4f62111bc66268ece07c" category="paragraph">「 dispaced-interface show 」</block>
  <block id="ca89b5ef1fbf8f5385df4158740fe931" category="list-text">LIF のホームポートをリストアします。</block>
  <block id="4615226c3fd7af8f5c2beb65404cb667" category="list-text">すべての LIF にホームポートがあり、意図的に稼働状態になっていることを確認します。</block>
  <block id="338e1133e592584bd1dc26b643cbe02f" category="paragraph">ノード 3 のネットワーク設定を確認し、ノード 2 からノード 3 にアグリゲートを再配置する前に、ノード 2 に現在あるノード 1 に属する NAS データ LIF が node2 からノード 3 に再配置されたことを確認する必要があります。また、ノード 3 に SAN LIF が存在することも確認する必要があります。</block>
  <block id="f329a7087048b2fb128acd99205356e2" category="paragraph">アップグレード手順の実行中、リモート LIF は SAN LUN へのトラフィックを処理します。アップグレード時にクラスタやサービスの健全性を維持するために、 SAN LIF を移動する必要はありません。SAN LIF は、新しいポートにマッピングする必要がないかぎり移動されません。ノード 3 をオンラインにしたあと、 LIF が正常に機能しており、適切なポートに配置されていることを確認します。</block>
  <block id="a29257abbaad84467babad354360d285" category="paragraph">これらのチェックの実行後、 node1 で所有されているルート以外のアグリゲートと NAS データ LIF が新しいコントローラ node3 に再配置されます。リソースの再配置が完了すると、コントローラの交換処理が一時停止します。</block>
  <block id="61d1def7733487d4ddcc1c11e4c26d34" category="paragraph">LIF が表示されなくなった場合は、ホームノードをノード 3 にリストアします。</block>
  <block id="32cbc0f35ce50a85e5c8c6b2f7b35d1f" category="paragraph">このアップグレード手順では、交換するコントローラモデルで ONTAP の新しいバージョンがサポートされておらず、新しいコントローラで以前のバージョンの ONTAP がサポートされていない主な環境アップグレードシナリオを使用します。</block>
  <block id="3f95c69711726ab20c6ad2092e62e13d" category="list-text">この手順を使用して、ノードが 3 つ以上あるクラスタでコントローラハードウェアをアップグレードできます。ただし、クラスタ内のハイアベイラビリティ（ HA ）ペアごとに手順を個別に実行する必要があります。</block>
  <block id="b63bac0d0a2ee7a43a0c82d9d71a631a" category="list-text">この FlexArray システム、 V シリーズシステム、 AFF システム、および手順環境 FAS 仮想化ソフトウェアを搭載したシステムです。必要なライセンスがインストールされていれば、 ONTAP 9.5 以降にリリースされた FAS システムをストレージアレイに接続できます。ストレージアレイと V シリーズのモデルの詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> Hardware Universe にリンクして、 V シリーズサポートマトリックスにアクセスしてください。</block>
  <block id="9ac92b97b9314fe7c9c80b03c2f61746" category="list-text">この手順環境システムは、 4 ノードの NetApp MetroCluster 構成以上を実行しています。MetroCluster 構成サイトは物理的に異なる場所に設置できるため、 HA ペアの場合は各 MetroCluster サイトでコントローラの自動アップグレードを個別に実行する必要があります。</block>
  <block id="71dd89b192a133f8ccfd6e18f0397ebc" category="paragraph">交換したコントローラまたは新しいコントローラの HA パートナーで Storage Encryption が使用されている場合は、 SSL 証明書のインストールやキー管理サーバのセットアップなど、新しいコントローラモジュールを Storage Encryption 用に設定する必要があります。</block>
  <block id="1bf6f98fb62d5ca413d6cce101954a5f" category="paragraph">この手順には、新しいコントローラモジュールで実行する手順が含まれています。コマンドは正しいノードで入力する必要があります。</block>
  <block id="d38fed7bb4bf7b2cd414582a337f388f" category="list-text">キー管理サーバがまだ使用可能であり、ステータスと認証キー情報が正しいことを確認します。</block>
  <block id="eeb811dde1344fabc569b67ecd8b95f6" category="paragraph">「セキュリティキーマネージャクエリー」</block>
  <block id="32ce57c242557f5657864f2684cf9a96" category="list-text">前の手順で確認したキー管理サーバを、新しいコントローラのキー管理サーバのリストに追加します。</block>
  <block id="39971f39aded85b4e8e1fe2d3e1acc6d" category="list-text">キー管理サーバを追加します。</block>
  <block id="74bdef17191283e61278bf225ca4520d" category="list-text">リストされている各キー管理サーバについて、同じ手順を繰り返します。最大 4 台のキー管理サーバをリンクできます。</block>
  <block id="8b2208f5ccda57697f72181172533640" category="list-text">キー管理サーバが正常に追加されたことを確認します。</block>
  <block id="0e79decb13af5d2dc1cdba7d4607d34c" category="paragraph">「 securitykey -manager show 」を参照してください</block>
  <block id="613e5831fca345289928a52de72937a1" category="list-text">新しいコントローラモジュールで、キー管理セットアップウィザードを実行して、キー管理サーバをセットアップしてインストールします。</block>
  <block id="bbdb53ee65b9a0c8fdb6fdf3661d0fb6" category="paragraph">既存のコントローラモジュールと同じキー管理サーバをインストールする必要があります。</block>
  <block id="dd0630a1638f6964504eefd155f3f818" category="list-text">新しいノードでキー管理サーバセットアップウィザードを起動します。</block>
  <block id="5560b948b9e6ef0348c58a90d5656939" category="list-text">ウィザードの手順に従って、キー管理サーバを設定します。</block>
  <block id="b0b1f7cd7ad16c151d90a8783f1752db" category="list-text">リンクされたすべてのキー管理サーバから新しいノードに認証キーをリストアします。</block>
  <block id="5eb59651a7213cf4ae352b4c3ee57a36" category="doc">ステージ 5 ：ノード 4 をインストールしてブートします</block>
  <block id="f326c815b47f4f2909494bae5cd735d5" category="list-text"><block ref="f326c815b47f4f2909494bae5cd735d5" category="inline-link-macro-rx"></block></block>
  <block id="a6d322e902b744ff3a11f02b5c6d9496" category="list-text"><block ref="a6d322e902b744ff3a11f02b5c6d9496" category="inline-link-macro-rx"></block></block>
  <block id="3a339ed5bdc85366b677c546716fabfa" category="list-text"><block ref="3a339ed5bdc85366b677c546716fabfa" category="inline-link-macro-rx"></block></block>
  <block id="6d23265c57ba430c404cc6f3a940e117" category="inline-link-macro">ノード 4 でキー管理ツールの設定をリストアします</block>
  <block id="c00899c784d90d8f2d9b3b0d15b36cc3" category="list-text"><block ref="c00899c784d90d8f2d9b3b0d15b36cc3" category="inline-link-macro-rx"></block></block>
  <block id="80f5c472ebe8ade631db1dde97db6a0e" category="list-text"><block ref="80f5c472ebe8ade631db1dde97db6a0e" category="inline-link-macro-rx"></block></block>
  <block id="dd019fbf939676387b29c50185dd26bb" category="paragraph">ノード 1 をノード 3 に交換する前に、ルート以外のアグリゲートと NAS データ LIF をノード 1 からノード 2 に移動してから、ノード 1 のリソースをノード 3 に移動する必要があります。</block>
  <block id="231d6537090582d94372987139e9087b" category="paragraph">この処理は、タスクの開始時にすでに一時停止されている必要があります。手動で再開する必要があります。</block>
  <block id="93847b1108029ddbe22a512a569d1038" category="paragraph">アグリゲートと LIF の移行が完了すると、検証のために処理が一時停止されます。この段階で、ルート以外のアグリゲートと SAN 以外のデータ LIF がすべて node3 に移行されているかどうかを確認する必要があります。</block>
  <block id="bcc15f05fe7b911a3de9d9528ece7fc7" category="list-text">アグリゲートの再配置処理と NAS データ LIF の移動処理を再開します。</block>
  <block id="44d6ab00bef397f6537d95a47a570251" category="paragraph">ルート以外のアグリゲートと NAS データ LIF はすべて、 node1 から node2 に移行されます。</block>
  <block id="af443ed1e514e063894af87e3e0e83a6" category="list-text">処理が一時停止したまま、ルート以外のすべてのアグリゲートが node2 でそれぞれの状態でオンラインになっていることを確認します。</block>
  <block id="e3f90b559d39f13fadeb0be05f3d5fff" category="paragraph">次の例は、 node2 のルート以外のアグリゲートがオンラインになっていることを示しています。</block>
  <block id="761df4f887d66569090abb51e2ec705f" category="paragraph">アグリゲートがオフラインになった場合、または node2 で外部になった場合は、各アグリゲートに対して 1 回、 node2 で次のコマンドを使用してアグリゲートをオンラインにします。</block>
  <block id="f999b6b276f2c64e10bfb3630f92f94c" category="list-text">node2 で次のコマンドを使用し、出力を調べて、すべてのボリュームがオンラインであることを確認します。</block>
  <block id="074f2db71729d7f84803e85e33520125" category="paragraph">node2 上にオフラインのボリュームがある場合は、各ボリュームに対して 1 回、 node2 で次のコマンドを使用してオンラインにします。</block>
  <block id="fa39e98dea804607ace91ae82c9543d7" category="list-text">[[step5] いずれかの LIF が停止している場合は、次のコマンドを使用して、各 LIF に対して 1 回ずつ LIF の管理ステータスを「 up 」に設定します。</block>
  <block id="fdf5cd6af4cb356df1504c2897e0d9f2" category="list-text">ONTAP 9.8 以降を実行している。</block>
  <block id="5d07aebfbe36ac522f2e416e3efcad81" category="list-text">新しいコントローラを新しい HA ペアとしてクラスタに追加し、ボリューム移動を使用してデータを移行する必要はありません。</block>
  <block id="0218d5b45eb7cfed65f2674d40f1e479" category="list-text">ONTAP の管理経験があり、 diagnostic 権限モードで作業する場合のリスクが十分にあります。</block>
  <block id="f37bbd4cc778d5861294352bef9c1c7f" category="cell">古いコントローラ</block>
  <block id="cfdade9e474e805958704ec0836f18ac" category="cell">交換用コントローラ</block>
  <block id="8c06a9afcd20cc8675f878a8e07e16ab" category="cell">FAS8020 、 FAS8040 、 FAS8060 、 FAS8080</block>
  <block id="c86ccf041137a3e913e3e89ed65dbff5" category="cell">FAS8200 、 FAS8300 、 FAS8700 、 FAS9000</block>
  <block id="96e7c50f9e1d1f9b66d5ab1dbe5d047a" category="cell">AFF8020 、 AFF8040 、 AFF8060 、 AFF8080</block>
  <block id="c1a19380507e7e6ae4f9e86f2f492cf1" category="cell">AFF A300 、 AFF A400 、 AFF A700 、 AFF A800^1</block>
  <block id="c37feb3492d999b3f216448183986be2" category="cell">FAS8200</block>
  <block id="c78a423f3132ee2ac4f4f4c1fa5d4859" category="cell">AFF A300</block>
  <block id="73ab298c8e00d66d28156892903a39ce" category="cell">AFF A320</block>
  <block id="4852954d031f57b417813707e91dd5bd" category="admonition">コントローラのアップグレードモデルの組み合わせが上記の表にない場合は、テクニカルサポートにお問い合わせください。</block>
  <block id="f02eccb3076760465f52e896d2649983" category="inline-link-macro">ノード 3 の UTA / UTA2 ポートを確認して設定し、手順 23 を実行します</block>
  <block id="51de0f52809b4037608dba4b84c411b1" category="inline-link-macro">ノード 4 の UTA / UTA2 ポートの確認と設定、手順 23</block>
  <block id="3ea026f4657fa31414c8a7e80af567b7" category="list-text">AFF A400 または FAS8300 では、イーサネットタイプの構成の場合、 2 つのメザニンポートのいずれかを一時的なクラスタポートとして使用できます。</block>
  <block id="68f44553add308b567f9f6bbfc94913d" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> から ONTAP 9 ドキュメントセンターにリンクして、 ONTAP 9 製品ドキュメントにアクセスできます。</block>
  <block id="12a1856797218081c363d4151a746a51" category="paragraph">アップグレード後は、ネットアップサポートサイトから古いシステムの運用を停止できます。システムの運用を停止すると、そのシステムは動作していないことがネットアップに通知され、サポートデータベースから削除されます。</block>
  <block id="822b26e0edfc2eec63c38c61151af684" category="list-text">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> からネットアップサポートサイトにリンクしてログインします。</block>
  <block id="eb020d21f20b70e49bbe4ebed52b9e29" category="list-text">メニューから [ 製品 ]&gt;[ マイ製品 ] を選択します。</block>
  <block id="4d0016e281d3a86d70ae083a04a5da95" category="list-text">[ インストール済みシステムの表示 *] ページで、システムに関する情報の表示に使用する *Selection Criteria* を選択します。</block>
  <block id="700d67d065f1bd740439eef879e00b77" category="paragraph">次のいずれかを選択してシステムを検索できます。</block>
  <block id="9738c15508e7d3e2fce3396706fc65c8" category="list-text">シリアル番号（ユニットの背面に記載）</block>
  <block id="fce1b48d1133d34e0a4d5fdc15e8638b" category="list-text">所在地のシリアル番号</block>
  <block id="a35129a35ab8aae79ad1750a3753888c" category="paragraph">シリアル番号を含むクラスタ情報が表に表示されます。</block>
  <block id="b5554c834fafdd1adbf8f16933521491" category="list-text">テーブルでクラスタを見つけ、 Product Tool Set （製品ツールセット）ドロップダウンメニューから * Decommission this system * （このシステムのデコミッション）を選択します。</block>
  <block id="44d5329782b4f4acb8947c6cc4601de1" category="list-text">ノード 1 が停止されたことを確認します。</block>
  <block id="d1e63174073b4ec3e4d49ef0ca235c5b" category="paragraph">アップグレードが完了したら、 node1 の運用を停止できます。を参照してください <block ref="6e48b929ca0767f00c15eeb6d7e78755" category="inline-link-macro-rx"></block>。</block>
  <block id="8c0489611df3c9267665a7d99d204fa2" category="summary">LIF の移行後、ステージ 2 、ステージ 3 、またはステージ 5 で移行後にオンラインにならない場合があります。</block>
  <block id="06d473a91334306e0ea337d0cf403b02" category="doc">LIF の移行が失敗しました</block>
  <block id="8fc5e587b615f796c0e6e519e500f09c" category="list-text">ポートの MTU サイズがソースノードと同じであることを確認します。</block>
  <block id="f1dc53f85f175f3393f82fdfda459a06" category="paragraph">たとえば、ソースノードのクラスタポートの MTU サイズが 9000 の場合、デスティネーションノードは 9000 にする必要があります。</block>
  <block id="0be497933ebed90434432b1367f6ac50" category="list-text">ポートの物理的な状態が「所有」である場合は、ネットワークケーブルの物理的な接続を確認します。</block>
  <block id="394247ac369fff4729d586172906244e" category="cell">使用するコマンド</block>
  <block id="97d64be0988671e53d352ae4aa93eaf6" category="cell">「 securitykey manager key query -node node 」を参照してください</block>
  <block id="afa9cce4f8e9d7e0dc9a3f8278517e40" category="cell">「 securitykey -manager key show 」を参照してください</block>
  <block id="01a72c63e79e1fcc9b3e0cac4fb2bf75" category="list-text">前の手順で確認したキー管理サーバを新しいコントローラのキー管理サーバリストに追加します。</block>
  <block id="3cdf420c4abece4e0eba648610592dde" category="cell">「 securitykey-manager external restore 」このコマンドには、 OKM のパスフレーズが必要です</block>
  <block id="a9849e92b148965a7bbb6c14d0afbcd0" category="cell">オンボードキーマネージャ（ OKM ）</block>
  <block id="f52de228b93a6f965c1879aa97b007d6" category="paragraph">認証キーを使用できなかったか、外部キー管理サーバにアクセスできなかったためにボリュームがオフラインになっていないかを確認します。volume online コマンドを使用して ' これらのボリュームをオンラインに戻します</block>
  <block id="7bd5452d2f3a1c07fc54d3a08cc82d64" category="paragraph">ノード 3 にオンボードの FC ポート、オンボードのユニファイドターゲットアダプタ（ UTA / UTA2 ）ポート、または UTA / UTA2 カードがある場合は、残りの手順を完了する前に設定を行う必要があります。</block>
  <block id="d897564a1ca4a58b7f422ba34b232ab7" category="paragraph">セクションの完了が必要な場合があります <block ref="750d6dbe3bf1312d0d97a8f03a0d2304" category="inline-xref-macro-rx"></block>、を参照してください <block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block>、または両方のセクション。</block>
  <block id="be6b715addf3303698d174b13e915620" category="list-text">ただし、 V シリーズシステムまたは FlexArray 仮想化ソフトウェアを搭載したストレージアレイを使用するシステムがある場合に、ノード 3 にオンボードの FC ポート、オンボードの UTA / UTA ポート、または UTA / UTA2 カードがない場合は、の項に戻って node3 を起動し、の項を再開します <block ref="279060155dcadaa13689560d46e381cb" category="inline-link-macro-rx"></block>。</block>
  <block id="a1a2d377f686ce4835b9ee342fd6089b" category="list-text"><block ref="750d6dbe3bf1312d0d97a8f03a0d2304" category="inline-xref-macro-rx"></block></block>
  <block id="3088a544c36eafa56a0950901fa93b6a" category="list-text"><block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block></block>
  <block id="8992459eb47b3dc5036bd8be4d821db3" category="paragraph">node3 にオンボードまたは FC アダプタの FC ポートがある場合は、ポートが事前に設定されていないため、ノードを稼働状態にする前にポート設定を設定する必要があります。ポートが設定されていないと、サービスが停止する可能性があります。</block>
  <block id="7551ace690fab9fce9d0a9cad21a0ae7" category="paragraph">セクションに保存した FC ポート設定の値を node1 で確認しておく必要があります <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block>。</block>
  <block id="dfec8ed00cbb51821de82d335a0ba98b" category="paragraph">システムに FC 構成がない場合は、このセクションをスキップしてかまいません。システムにオンボード UTA / UTA2 ポートまたは UTA / UTA2 カードがある場合は、で設定します <block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block>。</block>
  <block id="bc56374912cd801964f37da82292340c" category="list-text">[[step1] ノード 3 の FC 設定を、ノード 1 から前に取得した設定と比較します。</block>
  <block id="831368d2ac042989f939504faf6cdf51" category="list-text">[[step2]] 次のいずれかの操作を実行します。</block>
  <block id="9e7870f5e5208d6877c9cc3acc6453c0" category="paragraph">メンテナンスモード（ブートメニューのオプション 5 ）で、必要に応じてノード 3 の FC ポートを変更します。</block>
  <block id="7e6f8de582e2388fb39a5c5c26caa64f" category="list-text">[[step3]] 次のいずれかの操作を実行します。</block>
  <block id="6ee9ff94b07628e8d936112db18664d2" category="cell">次のコマンドを使用して、新しい設定を確認します。 ucadmin show</block>
  <block id="bc53092d23cdf154996298ad69f4e7f0" category="list-text">[[step4]] メンテナンスモードを終了します。</block>
  <block id="25c2f630f05e1a3933f0c056165ae65b" category="list-text">[[step6] コマンドを入力したら、ブート環境のプロンプトでシステムが停止するまで待ちます。</block>
  <block id="d2dce3cff13fd2c8259fdef7c637226e" category="list-text">[[auto_check3_step8] 次のいずれかの操作を実行します</block>
  <block id="dc1d267429f36a93fe45402105c83a9b" category="list-text">ノード 3 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがある場合は、セクションに進みます <block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block>。</block>
  <block id="09a561f3362ed88514963066e3d7b720" category="list-text">ノード 3 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがない場合は、このセクションを省略してください <block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block> をクリックして、セクションに移動します <block ref="35ed01fca1dde6c35ca197b89d2bbfc7" category="inline-link-macro-rx"></block>。</block>
  <block id="70d6bd3154ab38128a772f6268fea926" category="list-text">ノード 3 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがない場合は、このセクションを省略してください <block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block> セクション「 _ インストール」に戻り、 node3 をブートしてから再開します <block ref="279060155dcadaa13689560d46e381cb" category="inline-link-macro-rx"></block>。</block>
  <block id="d190fd34bae28aff670090c55eb7e24b" category="paragraph">ノード 3 にオンボード UTA / UTA2 ポートまたは UTA / UTA2 カードが搭載されている場合は、アップグレードしたシステムの使用方法によって、ポートの設定を確認し、場合によっては再設定する必要があります。</block>
  <block id="7cda71007d207ef48448dffed511abb8" category="paragraph">FC にユニファイドターゲットアダプタ（ UTA / UTA2 ）ポートを使用する場合は、まずポートの設定を確認する必要があります。</block>
  <block id="55e55fd6d28dec627ac074963cbf9279" category="paragraph">現在のポート設定を確認するには、「 ucadmin show 」コマンドを使用します。</block>
  <block id="7561dbd16073c82eda6418543cdd93ec" category="paragraph">UTA / UTA2 ポートはアダプタまたはコントローラに搭載されている場合がありますが、次の構成になっています。ノード 3 の UTA / UTA2 ポートの設定を確認し、必要に応じて変更してください。</block>
  <block id="7107b4a109094877db55716e76bb317a" category="list-text">コントローラを注文した UTA / UTA2 カードは、注文したパーソナリティを指定するために出荷前に設定されます。</block>
  <block id="ac077d6a8af47d3f6459bdc75d20144c" category="list-text">新しいコントローラのオンボード UTA / UTA2 ポートは、希望するパーソナリティを持つように出荷する前に設定されます。</block>
  <block id="1acb31a5b3534092750f6ee560e0995c" category="admonition">* 注意 * ：ストレージディスクがある場合は、メンテナンスモードに指示されていないかぎり、クラスタプロンプトでこのセクションのコマンドを入力します。V シリーズシステムまたは FlexArray 仮想化ソフトウェアがインストールされていて、ストレージアレイに接続されている場合は、このセクションのメンテナンスモードプロンプトでコマンドを入力します。UTA / UTA2 ポートを設定する場合は、メンテナンスモードにする必要があります。</block>
  <block id="acb716cb88324392697eb22eddc7c3a3" category="list-text">[[step1] node3 で次のコマンドを入力して、ポートが現在どのように設定されているかを確認します。</block>
  <block id="e8eedad0c370be864050462beebc8141" category="cell">対処は不要です。</block>
  <block id="b9372fe4eb2e1f51dc5ecc63ef944026" category="list-text">[[step2] 現在の SFP+ モジュールが目的の用途と一致しない場合は、正しい SFP+ モジュールと交換します。</block>
  <block id="cf64c78b7d463ed3f7aa4e4a9d43ca20" category="list-text">[[step3]] 「 ucadmin show 」コマンドの出力を調べ、 UTA / UTA2 ポートに希望するパーソナリティがあるかどうかを確認します。</block>
  <block id="37ba28d857fa9f472bd54799a71b4d1f" category="list-text">[[step4]] 次のいずれかの操作を実行します。</block>
  <block id="2c59ff8f0f110684a1947a7be9c33989" category="cell">UTA / UTA2 ポート</block>
  <block id="a74e65d44694577cd6490a79583dff8a" category="cell">に進みます <block ref="e33bb2c935af60d67309f774bd9b33e2" category="inline-xref-macro-rx"></block>。</block>
  <block id="eb97cddf7fc62845fc1e4eea9c2d99cd" category="cell">手順 5 から 12 を省略して、に進みます <block ref="1b9dfae277e309ab4a6eabe371e415ad" category="inline-xref-macro-rx"></block>。</block>
  <block id="c38c7f4981b1e1041fde50ff14eac24d" category="list-text">[[auto_check3_step5] 次のいずれかの操作を実行します。</block>
  <block id="19971734faa0d5692ce82090e92c08e4" category="cell">に進みます <block ref="8636550629e708c32b80412fc9a4bd9f" category="inline-xref-macro-rx"></block></block>
  <block id="23cdc9078cbdc89882a254d05d67d976" category="cell">手順 7 を省略して、に進みます <block ref="c9ad15d95077080d869d1e4c8360803a" category="inline-xref-macro-rx"></block>。</block>
  <block id="da0cddf6f2fcc9355331e1d32bd6c782" category="list-text">[[step6] アダプタがイニシエータモードの場合、および UTA / UTA2 ポートがオンラインの場合は、 UTA / UTA2 ポートをオフラインにします。</block>
  <block id="8538924568e2fc8f0f2a3823de803c1a" category="list-text">[[auto_check3_step7] 現在の構成が目的の用途に一致しない場合は、必要に応じて構成を変更します。</block>
  <block id="68393ca2b7b9884fdd9f7eea661220e1" category="list-text">「 -m 」はパーソナリティ・モードで、「 fc 」または「 cna 」です。</block>
  <block id="47677c5f320a3d7c211f1c3bf5ad457b" category="list-text">[[auto_check3_step8] 設定を確認します。</block>
  <block id="315e31e9f839439e107a11b7ff7facb6" category="list-text">[[step9] 設定を確認します。</block>
  <block id="b72b45050e36429103ef8a4d16d411be" category="list-text">[[step10]] 次のいずれかのコマンドを入力して、各ポートに 1 回ずつターゲットポートをオンラインにします。</block>
  <block id="b479e4a9e97e157251ef3d2064ea4380" category="list-text">[[step11]] ポートをケーブル接続します。</block>
  <block id="3f9068a407bdbb378e93f4d5d6b9abe6" category="list-text">[[auto_check3_step12]] 次のいずれかの操作を実行します。</block>
  <block id="66610f6c17cdd2f74ae18935d0791243" category="cell">に進みます <block ref="35ed01fca1dde6c35ca197b89d2bbfc7" category="inline-link-macro-rx"></block>。</block>
  <block id="f0d8df7e74601e48e696d4b303665234" category="cell">section_Install および node3 のブートに戻り、で再開します <block ref="279060155dcadaa13689560d46e381cb" category="inline-link-macro-rx"></block>。</block>
  <block id="56b97cceb683f15e6179871d3991edcc" category="list-text">[[auto_check3_step13]] メンテナンスモードを終了します。</block>
  <block id="0e0a51d5d131ec116dbea50118d432b6" category="list-text">[[step14]] ブートメニューへのノードのブート時に 'boot_ontap menu' を実行しますA800 にアップグレードする場合は、に進みます <block ref="8de8415e5ddf050c51dc9df1ad54385b" category="inline-xref-macro-rx"></block>。</block>
  <block id="8818e56033c79a7d315b502b9d66c4b0" category="list-text">[auto9597_check_node3 _step15]] ノード 3 で、ブートメニューに移動し、 22-7 を使用して、非表示オプション「 boot_after_controller_replacement 」を選択します。プロンプトで、 node1 のディスクを node3 に再割り当てするには、次の例のように入力します。</block>
  <block id="014925696b96cf52282301c416016c05" category="list-text">[[auto_check3_step17]] autoboot 中に Ctrl + C を押して 'loader&gt;` プロンプトでノードを停止します</block>
  <block id="46f0d1accd1916f786a903c85ad13b0f" category="list-text">[[step18]] LOADER プロンプトで、メンテナンスモードに切り替えます。</block>
  <block id="8e26679b9fca64c8419387ed5ddbd066" category="list-text">[[step19]] メンテナンスモードで、現在ターゲットモードになっている以前に設定されたすべてのイニシエータポートを表示します。</block>
  <block id="4306b082c2e67956b1918aaea01dbeec" category="list-text">[[step20]] ポートがイニシエータモードに変更されていることを確認します。</block>
  <block id="4c830d7f040ff17fe7d01c1e6f446b3f" category="list-text">[[step2]] メンテナンスモードを終了します。</block>
  <block id="2d74e383435cfe64554575d0ab7faf2a" category="paragraph">次の手順は、 node3 を node1 のルートアグリゲートからブートするように設定します。</block>
  <block id="d354d3c68fd2aba01b58a01642bf6c97" category="list-text">node1 アグリゲートの RAID 、プレックス、およびチェックサムの情報を確認します。</block>
  <block id="5447152461820ee4fbd4988f18add272" category="list-text">node1 アグリゲートのステータスを確認します。</block>
  <block id="beee7076b2d8936ef1f0677a931d72f4" category="list-text">必要に応じて、 node1 アグリゲートをオンラインにします。</block>
  <block id="59bfd9205852a4f57899d2ed024d5fcf" category="list-text">node3 を元のルートアグリゲートからブートできないようにします。</block>
  <block id="7dd49fac37eb0c12415d30414f193060" category="list-text">node1 ルートアグリゲートを、 node3 の新しいルートアグリゲートとして設定します。</block>
  <block id="d788db47fa7ed7d234dcdfbb86c17a57" category="list-text">ノード 3 のルートアグリゲートがオフラインになっていること、およびノード 1 からテイクオーバーされたディスクのルートアグリゲートがオンラインになっていて root に設定されていることを確認します。</block>
  <block id="3d7f94ab24ae28ffe95b85995cdb0a28" category="admonition">前の手順を実行しないと、原因 node3 を内部ルートアグリゲートからブートするか、原因システムで新しいクラスタ構成が存在すると想定するか、あるいはクラスタ構成を特定するように求められる可能性があります。</block>
  <block id="43ccb3503988f16a767b1af1e29d2384" category="doc">ルート以外のアグリゲートと NAS データ LIF を node2 から node3 に再配置します</block>
  <block id="b3fb9233a2435df292df205ef05e46db" category="paragraph">アップグレード手順の実行中、リモート LIF は SAN LUN へのトラフィックを処理します。アップグレード時にクラスタやサービスの健全性を維持するために、 SAN LIF を移動する必要はありません。</block>
  <block id="0569dcac35411678d2e9cbd8034fea69" category="admonition">アグリゲートおよび LIF のホーム所有者は変更されません。現在の所有者のみが変更されます。</block>
  <block id="03c6c2c179dec70c786bc644e02b16df" category="list-text">ルート以外のすべてのアグリゲートがオンラインで、ノード 3 でそれらの状態になっていることを確認します。</block>
  <block id="6702bf0268c295c6d30a4dc2db82d427" category="paragraph">アグリゲートがオフラインになった場合、または node3 で外部になった場合は、各アグリゲートに対して次のコマンドを実行してそれらのアグリゲートをオンラインにします。</block>
  <block id="809bea68dee4e68249aea4396bafacd3" category="list-text">node3 で次のコマンドを実行し、出力を調べて、すべてのボリュームがノード 3 でオンラインになっていることを確認します。</block>
  <block id="b830851aa263bbc0b84c68604beef993" category="paragraph">node3 にオフラインのボリュームがある場合は、各ボリュームに対して次のコマンドを実行してそれらのボリュームをオンラインにします。</block>
  <block id="b8520ff69f6b8ffe5e588c1f7ce8e9be" category="list-text">LIF が正しいポートに移動され、ステータスが「 up 」になっていることを確認します。LIF が 1 つでも停止している場合は、次のコマンドを LIF ごとに 1 回入力して、 LIF の管理ステータスを「 up 」に設定します。</block>
  <block id="e2172c82191a506ba37c37e48f854d2a" category="list-text">データ LIF を現在ホストしているポートが新しいハードウェアに存在しない場合は、ブロードキャストドメインから削除します。</block>
  <block id="ee210a0730802d9c055ca601e95c499c" category="paragraph">「 network port broadcast-domain remove-ports 」と入力します</block>
  <block id="99988efb9efcf982f67af1157e609379" category="list-text">[[Step5] ] 次のコマンドを入力し、出力を調べて、 node2 にデータ LIF が残っていないことを確認します。</block>
  <block id="d48dfd29ad21ccd1c5cfa50ed99cd89e" category="doc">ステージ 6 ：アップグレードを完了します</block>
  <block id="18c90c300c0b71334b8b427eaf4f38a3" category="list-text"><block ref="18c90c300c0b71334b8b427eaf4f38a3" category="inline-link-macro-rx"></block></block>
  <block id="6e48b929ca0767f00c15eeb6d7e78755" category="list-text"><block ref="6e48b929ca0767f00c15eeb6d7e78755" category="inline-link-macro-rx"></block></block>
  <block id="140c4ad72e426b76f7e15699ae078635" category="inline-link-macro">SnapMirror 処理を再開します</block>
  <block id="4486de9c48a88e42de77cb0ec9f11818" category="list-text"><block ref="4486de9c48a88e42de77cb0ec9f11818" category="inline-link-macro-rx"></block></block>
  <block id="6458e4ec3f015720c168a55e444bc050" category="paragraph">MetroCluster FC 構成の場合は、できるだけ早くディザスタリカバリ / フェイルオーバーサイトのノードを交換する必要があります。コントローラモデルの不一致が原因で原因ディザスタリカバリのミラーリングがオフラインになる可能性があるため、 MetroCluster 内のコントローラモデルの不一致はサポートされません。2 番目のサイトでノードを交換するときに MetroCluster チェックを省略するには、コマンドの -'kip-metrocluster-check true' オプションを使用します。</block>
  <block id="9fd68cc494a9f57cae67ac737ab1370f" category="paragraph">ノードペアのアップグレード中に障害が発生する可能性があります。ノードがクラッシュする、アグリゲートが再配置されない、または LIF が移行されない可能性があります。障害の原因とその解決策は、アップグレード手順の実行中に障害が発生したタイミングによって異なります。</block>
  <block id="148cb01915f73b429fb4402cc046fed1" category="paragraph">手順の各フェーズについては、セクションの表を参照してください <block ref="57e14e08755134bb6fef9ad899bb58ee" category="inline-link-macro-rx"></block>。発生する可能性のある障害の情報は、手順のフェーズ別に表示されます。</block>
  <block id="8e79407ae69e201e60bebb326433371d" category="paragraph">ノード 3 とノード 4 を手順の後半で物理的にラックに設置したあと、ネットブートが必要になることがあります。ネットブートという用語は、リモート・サーバに保存された ONTAP イメージからブートすることを意味します。ネットブートの準備を行うときは、システムがアクセスできる Web サーバに、 ONTAP 9 ブート・イメージのコピーを配置する必要があります。</block>
  <block id="135b308ed83c53f1516b7c754566d1c4" category="list-title">作業を開始する前に</block>
  <block id="1d32dacc20fe1feb077659fd0bebdc03" category="list-text">システムから HTTP サーバにアクセスできることを確認します。</block>
  <block id="3f8c328bf258e454068314be8aac5d75" category="list-text">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> からネットアップサポートサイトにリンクして、使用しているプラットフォームに必要なシステムファイルと、適切なバージョンの ONTAP をダウンロードします。</block>
  <block id="48ab14af4b0090253431ed38e4cc2440" category="paragraph">元のコントローラと同じバージョンの ONTAP 9 がインストールされていない場合は、新しいコントローラをネットブートする必要があります。新しいコントローラをそれぞれ取り付けたら、 Web サーバに保存されている ONTAP 9 イメージからシステムをブートします。その後、以降のシステムブートで使用するブートメディアデバイスに正しいファイルをダウンロードできます。</block>
  <block id="302937ad7234fe283f1f179989cd1fe0" category="list-text">ネットアップサポートサイトにアクセスして、システムのネットブートの実行に使用するファイルをダウンロードします。</block>
  <block id="103ec41a89beb368e3357fad5f451a92" category="list-text">ネットアップサポートサイトのソフトウェアダウンロードセクションから適切な ONTAP ソフトウェアをダウンロードし、「 &lt;ONTAP_version&gt;_image.tgz 」ファイルを Web にアクセスできるディレクトリに保存します。</block>
  <block id="5b1b8c3f072422a936e63f0d977e41e0" category="list-text">Web にアクセスできるディレクトリに移動し、必要なファイルが利用可能であることを確認します。</block>
  <block id="843ab277685630f82095416c5b9ae5a1" category="inline-link-macro">ステージ 3</block>
  <block id="c7b2f3e7dacd4ee5eb9b0618c5079d8f" category="paragraph">のディレクトリの情報を使用します <block ref="1f9dd4a8865e8664f884ec11b5f13dfc" category="inline-link-macro-rx"></block>。</block>
  <block id="8e698b8d4467a7a6309118b19a3aa168" category="summary">新しいハードウェアを設置するための特別なツールが必要です。また、アップグレードプロセス中に他のドキュメントを参照する必要があります。</block>
  <block id="0e635d7a91ccc4eccdfb03e35353c899" category="doc">必要な工具とドキュメント</block>
  <block id="f987ca44be5e66313a3fedb59305367d" category="paragraph">アップグレードを実行するには、次の工具が必要です。</block>
  <block id="5fa8c0eb2f030795135e9d47077f239b" category="list-text">アースストラップ</block>
  <block id="230a7914d7f06a8506c29d7466cb12cd" category="list-text">No.2 プラスドライバ</block>
  <block id="9bd7aca153821e782b62a5a9a23f4744" category="paragraph">にアクセスします <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> セクションをクリックして、このアップグレードに必要な参照ドキュメントのリストにアクセスします。</block>
  <block id="f1b92e8f33cf66355b4b9762bf95256b" category="doc">MetroCluster 構成エラーがないかどうかを確認します</block>
  <block id="fcae50d4511c2dbf452f0a9593984560" category="paragraph">ネットアップサポートサイトで入手できる Active IQ Config Advisor ツールを使用して、代表的な構成エラーがないかどうかを確認できます。</block>
  <block id="fa6c1be97ff8496ff36915e5e9a95f33" category="paragraph">Active IQ Config Advisor は、構成の検証や健常性のチェックに使用できるツールです。データ収集とシステム分析のために、セキュアなサイトにもセキュアでないサイトにも導入できます。</block>
  <block id="0109999bfef624f78c3dcf4fb94f11ba" category="admonition">Config Advisor のサポートには制限があり、オンラインでしか使用できません。</block>
  <block id="32a404f0f31163f59d88f2d052711ecf" category="list-text">をダウンロードします <block ref="02685666481d8fcfc63d60bb8f2d7352" category="inline-link-macro-rx"></block> ツール。</block>
  <block id="6afe954858ef53a16278f4735833c1a5" category="list-text">Active IQ Config Advisor を実行し、出力を確認して推奨された方法で問題に対処します。</block>
  <block id="d75bd21e9af20a5036c0fbf461bc4e2d" category="doc">リブート、パニック、電源再投入</block>
  <block id="446d36fba2e507d61203c02578774ece" category="paragraph">アップグレードの各段階で、システムがクラッシュする（リブート、パニック状態、または電源の再投入）場合があります。</block>
  <block id="dec0e91cad029c9d2b55e8bd32c88e76" category="paragraph">これらの問題の解決策は、状況によって異なります。</block>
  <block id="343eae749a23fb17ef6cdd38fd2da8f5" category="section-title">事前チェックフェーズでのリブート、パニック、電源再投入</block>
  <block id="8bea04524c5e6dcfb6d21a849345ee30" category="section-title">HA ペアを有効にして事前チェックフェーズの前にノード 1 またはノード 2 がクラッシュした場合</block>
  <block id="738ee8bcfd939a32f3de7df5814c6eba" category="paragraph">事前チェックフェーズの前にノード 1 またはノード 2 がクラッシュした場合は、再配置されたアグリゲートがなく、 HA ペア構成が有効なままになります。</block>
  <block id="0dd6e0ba50acfc16218ced7b92e813f1" category="paragraph">テイクオーバーとギブバックは正常に実行されます。</block>
  <block id="809ecf0f76cd48f719608b879e540f19" category="list-text">コンソールで、システムで発行された EMS メッセージを確認し、推奨される対処方法を実行します。</block>
  <block id="0accdb9af8ee9902e6e12e8ad3c69dd6" category="list-text">ノードペアのアップグレード用手順に進みます。</block>
  <block id="32042e1cae255d52d27eb7e6f102079f" category="section-title">最初のリソースリリースフェーズでリブート、パニック、電源再投入が発生した場合</block>
  <block id="a929dc8c44e0a4c66070b18005fcda69" category="section-title">HA ペアを有効にすると、リソースの最初のリリースフェーズでノード 1 がクラッシュします</block>
  <block id="17b207ac883ad6c7c60e4c67b540500b" category="paragraph">一部またはすべてのアグリゲートがノード 1 からノード 2 に再配置されており、 HA ペアが有効なままです。node2 は、ノード 1 のルートボリュームと再配置されていないルート以外のアグリゲートをテイクオーバーします。</block>
  <block id="658aff35f1b2ef5bf804a6eaa8bd8834" category="paragraph">再配置されたアグリゲートの所有権は、ホーム所有者が変更されていないためにテイクオーバーされたルート以外のアグリゲートの所有権と同じになります。</block>
  <block id="6ccd7f2e78c66d169bbf302fa0cd170e" category="paragraph">node1 の状態が「 waiting for giveback 」になると、 node2 はノード 1 のルート以外のすべてのアグリゲートをギブバックします。</block>
  <block id="db2e31afa00c26dc29029e29d8ff4e9f" category="section-title">HA ペアを無効にすると、リソースの最初のリリースフェーズでノード 1 がクラッシュします</block>
  <block id="a3ab092ff29c94a2c1dce4e8e58fbab8" category="paragraph">node2 はテイクオーバーしませんが、ルート以外のすべてのアグリゲートから引き続きデータを提供しています。</block>
  <block id="84604a4d07dcc33bcf3def32522ced97" category="list-text">ノード 1 を起動します。</block>
  <block id="07fcb95304f9b9b6a7b8e09bf3a43b90" category="section-title">リソースの最初のリリースフェーズで HA ペアを有効にした状態で node2 に障害が発生する</block>
  <block id="ea41d430c1801092eb658fc92447fa77" category="paragraph">ノード 1 の一部またはすべてのアグリゲートが node2 に再配置されています。HA ペアが有効になります。</block>
  <block id="4ef90a16749941dcc42841a4d350f4e3" category="paragraph">ノード 1 で、ノード 2 のすべてのアグリゲートと、ノード 2 に再配置された独自のアグリゲートがテイクオーバーされます。ノード 2 がブートすると、アグリゲートの再配置が自動的に完了します。</block>
  <block id="f377056f049a875748f0f1fb62e593b9" category="list-text">node2 を起動します。</block>
  <block id="a84419db35cfbd1052a6e3367b3e6550" category="section-title">リソースの最初のリリースフェーズと HA ペアの無効化後に、ノード 2 がクラッシュします</block>
  <block id="3902e7586591847461eb93ec52677583" category="paragraph">ノード 1 ではテイクオーバーが実行されません。</block>
  <block id="209379c90008402bff9e43e926d726f5" category="paragraph">node2 のブート中に、すべてのアグリゲートでクライアントが停止します。</block>
  <block id="c69c252a29e4c40de646b133d6b89286" category="section-title">最初の検証フェーズでリブート、パニック、または電源の再投入が発生した場合</block>
  <block id="eee0c63ddb8a9ee96da6fcbaee95750f" category="section-title">HA ペアを無効にして最初の検証フェーズで node2 がクラッシュします</block>
  <block id="3acacc48f49902e35f2acd0532846558" category="paragraph">HA ペアがすでに無効になっているため、ノード 2 のクラッシュ後にノード 3 はテイクオーバーしません。</block>
  <block id="4d671d2255fc765ecb0c9754a61e9e19" category="section-title">HA ペアを無効にして初回の検証フェーズでノード 3 がクラッシュした場合</block>
  <block id="26bf9df43caced35a52d77376336d969" category="list-text">ノード 3 を起動します。</block>
  <block id="b37a13b468d5049d51c1794bdee782ea" category="section-title">最初のリソース再取得フェーズでのリブート、パニック、電源再投入</block>
  <block id="cdf0fa097138599db352e67f83f4d60e" category="section-title">アグリゲートの再配置中にリソースを再取得する最初のフェーズでノード 2 がクラッシュする</block>
  <block id="e15376fba96131cecfad3a743435774e" category="paragraph">node2 の一部またはすべてのアグリゲートがノード 1 からノード 3 に再配置されています。node3 は、再配置されたアグリゲートからデータを提供します。HA ペアが無効になっているため、テイクオーバーはありません。</block>
  <block id="27685d530ae8434b4b7c343805519a62" category="paragraph">再配置されなかったアグリゲートのクライアントが停止しています。ノード 2 のブート時に、ノード 1 のアグリゲートがノード 3 に再配置されます。</block>
  <block id="afac1d41da19c91d8c537c0dd081b509" category="section-title">アグリゲートの再配置中に、最初のリソースのリ回復フェーズでノード 3 がクラッシュする</block>
  <block id="4309a6885186e1d672df942c1ef7364c" category="paragraph">node2 によるアグリゲートのノード 3 への再配置中にノード 3 がクラッシュした場合、ノード 3 のブート後も処理が続行されます。</block>
  <block id="c5689b790d4c37b77d1d9d0b5eb653e8" category="paragraph">node2 では残りのアグリゲートの処理が続行されますが、 node3 の起動中にすでに node3 に再配置されたアグリゲートでクライアントが停止する可能性があります。</block>
  <block id="c3ed2d002fa1511e957ac4f0f379ab64" category="list-text">コントローラのアップグレードに進みます。</block>
  <block id="c99650cbb2e9705200e0c65ef8112d66" category="section-title">チェック後のフェーズでリブート、パニック、電源再投入が発生した場合</block>
  <block id="cd64011aa9e337fac4267ca724c07c1a" category="section-title">チェック後のフェーズで node2 または node3 がクラッシュする</block>
  <block id="6cc3572daebdd8b0893f33d359db3778" category="paragraph">HA ペアが無効になっているため、テイクオーバーは行われません。リブートしたノードに属するアグリゲートでクライアントが停止しています。</block>
  <block id="79671f1c69add8723a6562ea9207f36a" category="list-text">ノードを起動します。</block>
  <block id="453e1c1e18302a590c41d9e178962389" category="section-title">リソースの 2 つ目のリリースフェーズでリブート、パニック、電源の再投入が発生した場合</block>
  <block id="48824f490a3d91487cefde6c844f77c8" category="section-title">リソースの 2 つ目のリリースフェーズでノード 3 がクラッシュする</block>
  <block id="6fdf83c70d5ac6354046a77aed7edf87" category="paragraph">node2 によるアグリゲートの再配置中にノード 3 がクラッシュした場合、ノード 3 のブート後もタスクは続行されます。</block>
  <block id="5731c7830057407975be490c2494fb1f" category="paragraph">node2 で残りのアグリゲートの処理は続行されますが、 node3 と node3 の独自のアグリゲートにすでに再配置されたアグリゲートでは、 node3 のブート中にクライアントが停止することがあります。</block>
  <block id="c025602fb85c6101c2c2b73f3aee8c22" category="list-text">コントローラのアップグレード手順に進みます。</block>
  <block id="98b7194c3f7e4d897e4fd26d695e1854" category="section-title">2 番目のリソースリリースフェーズで node2 がクラッシュします</block>
  <block id="5824934e067c33bb3114baa4a8cf9ec5" category="paragraph">アグリゲートの再配置時にノード 2 がクラッシュした場合、ノード 2 はテイクオーバーされません。</block>
  <block id="8e080faf36569e4b034dc52f5a78a0c9" category="paragraph">ノード 3 は再配置されたアグリゲートを引き続き提供しますが、ノード 2 が所有するアグリゲートではクライアントの停止が発生します。</block>
  <block id="7ece8f4248b2db8509ecfad31259ec79" category="section-title">2 回目の検証フェーズで、リブート、パニック、または電源の再投入が発生した場合</block>
  <block id="844787e278f2aed416a608ecf8da2f42" category="section-title">2 回目の検証フェーズでノード 3 がクラッシュした場合</block>
  <block id="78d45d4102c6b7fa82c29a7ee6d3feac" category="paragraph">このフェーズで node3 がクラッシュした場合は、 HA ペアがすでに無効になっているため、テイクオーバーは実行されません。</block>
  <block id="9776e59ce7d904cfd8633f152b0e9840" category="paragraph">node3 がリブートするまでは、すべてのアグリゲートのクライアントが停止します。</block>
  <block id="0e9646babd06b1afc68db209c8b7e8cc" category="section-title">2 番目の検証フェーズ中にノード 4 がクラッシュした場合</block>
  <block id="06581dc290bb90ebdc3bff784e74c05b" category="paragraph">このフェーズでノード 4 がクラッシュした場合は、テイクオーバーは実行されません。node3 は、アグリゲートからデータを提供します。</block>
  <block id="320ac33a3a3ed82ed96ef3dd7d173ed9" category="paragraph">ノード 4 のリブートまでルート以外のアグリゲートがすでに再配置されています。</block>
  <block id="d2dec120c917320cae7461e84d91f23c" category="list-text">ノード 4 を起動します。</block>
  <block id="7bc7e56fe8ddd27289de0794179c5451" category="doc">ステージ 4 ：ノード 2 の移動と撤去</block>
  <block id="f7f70c2c98be066b2a9d668ac7d63467" category="list-text"><block ref="f7f70c2c98be066b2a9d668ac7d63467" category="inline-link-macro-rx"></block></block>
  <block id="610cb2d6e87c5e838ceef8f48f57b082" category="list-text"><block ref="610cb2d6e87c5e838ceef8f48f57b082" category="inline-link-macro-rx"></block></block>
  <block id="ddfd90d1a40dc38efcde3d45c070506d" category="paragraph">ARL を使用してノードをアップグレードする前に、手順の動作について理解しておく必要があります。このドキュメントでは、手順をいくつかの段階に分けて説明します。</block>
  <block id="7526cf9eecac88850b8e7b400f897378" category="paragraph">手順では、交換用コントローラハードウェアを使用して元のコントローラハードウェアを一度に 1 台ずつアップグレードし、 HA ペア構成を利用してルート以外のアグリゲートの所有権を切り替えます。すべてのルート以外のアグリゲートで、アップグレード後の正しいノードである最終デスティネーションに到達するために、 2 つの再配置を実行する必要があります。</block>
  <block id="dbbdd31aeee0756ad9d276a1eca618f8" category="paragraph">各アグリゲートにはホーム所有者と現在の所有者があります。ホーム所有者はアグリゲートの実際の所有者であり、現在の所有者は一時的な所有者です。</block>
  <block id="6a8b18850ca6073a1c6456cd619cdba6" category="paragraph">次の表に、各フェーズで実行するタスクの概要と、そのフェーズの最後で実行したアグリゲートの所有権の状態を示します。詳細な手順については、手順の後半で説明します。</block>
  <block id="64c6da2436465d11573858d46056b95d" category="cell">段階</block>
  <block id="9b7c5fc0588fe7d63e81b1258a1b7a71" category="paragraph">ステージ 1 終了時のアグリゲートの所有権：</block>
  <block id="b309c38149cc0e7b5e0bdcbbb02d7372" category="list-text">node1 は、 node1 アグリゲートのホーム所有者と現在の所有者です。</block>
  <block id="c9441f483586640407720ae97b71e4aa" category="list-text">node2 には、 node2 アグリゲートのホーム所有者と現在の所有者を指定します。</block>
  <block id="7544a9f5c9c9ff572c11f753aae7dedf" category="paragraph">ステージ 2 終了時のアグリゲートの所有権：</block>
  <block id="80056829ceb7237c21b4536a01885e13" category="list-text">node2 には、 node1 アグリゲートの現在の所有者を指定します。</block>
  <block id="f6e6ad572d16caa52deed3eeb7ca0ff5" category="list-text">node2 には、 node2 アグリゲートのホーム所有者と現在の所有者を指定します。</block>
  <block id="ff8f4c5aae9f0216fa1c088e4c636ab0" category="paragraph">ステージ 3 終了時のアグリゲートの所有権：</block>
  <block id="d58c33bf48643b15350ce1c80bb474d8" category="list-text">node3 は、 node1 アグリゲートのホームの所有者であること、および現在の所有者であること。</block>
  <block id="d517ee6c427837d3874a695e344df510" category="paragraph">ステージ 4 終了時のアグリゲートの所有権：</block>
  <block id="312d1c4e0e8f2ca55c86dd955ac42bff" category="list-text">node3 は、 node1 に属していたアグリゲートのホーム所有者および現在の所有者です。</block>
  <block id="6ccf9360cf25c371211dcaee52075b0c" category="list-text">node2 には、 node2 アグリゲートのホーム所有者を指定します。</block>
  <block id="7c9dc4aa3c862a50866dfa4bf1cad537" category="list-text">node3 は、 node2 アグリゲートの現在の所有者です。</block>
  <block id="ae88ee721c31093785205944b85aa4ee" category="paragraph">ステージ 5 終了時のアグリゲートの所有権：</block>
  <block id="478c619523c38faa7066d2d25b446a3d" category="list-text">node3 は、 node1 に属していたアグリゲートのホーム所有者および現在の所有者です。</block>
  <block id="c2583ec3499fda8ccfebbd517d0af4e6" category="list-text">node4 は、 node2 に属していたアグリゲートのホーム所有者および現在の所有者です。</block>
  <block id="964b0454175f6a1894f796b6a8fc4f59" category="summary">手順のさまざまな段階で問題が発生する可能性があります。</block>
  <block id="e33c48b52ab7d302b4af41aca3bbe858" category="doc">手順の複数の段階で発生する可能性のある問題</block>
  <block id="84508423fbb2d015c45d8207837aede4" category="section-title">予期しない「 storage failover show 」コマンドの出力が表示されます</block>
  <block id="9fae6006c452841a1b4104d26127eccf" category="paragraph">手順の実行中に、すべてのデータアグリゲートをホストするノードがパニック状態になったり、誤ってリブートされたりした場合は、リブート、パニック状態、電源再投入の前後に「 storage failover show 」コマンドの出力が想定外に表示されることがあります。</block>
  <block id="8a503ef07edf673987e764eff646e0d0" category="paragraph">ステージ 2 、ステージ 3 、ステージ 4 、またはステージ 5 の「 storage failover show 」コマンドの出力結果に予期しないものが表示されることがあります。</block>
  <block id="4e873fccdf7f54c0486cf43e1300ab3f" category="paragraph">次の例は、すべてのデータアグリゲートをホストするノードでリブートやパニックが発生していない場合の「 storage failover show 」コマンドの出力を示しています。</block>
  <block id="b19cffa247e3fb2147fa3eb145c4247f" category="paragraph">次の例は、リブートまたはパニック後の「 storage failover show 」コマンドの出力例を示しています。</block>
  <block id="399a9894ac45311024aba0a4f4cd1197" category="paragraph">ノードが部分的なギブバック状態にあること、およびストレージフェイルオーバーが無効になっていることを示す出力が表示されますが、このメッセージは無視してもかまいません。</block>
  <block id="3794e9e48df4b7a93a3321f2477f7880" category="paragraph">対処は不要です。ノードペアのアップグレード手順に進みます。</block>
  <block id="5f561bedca26d8d072e51e5a351d1918" category="paragraph">アップグレード前に休止していた SnapMirror 転送を再開し、 SnapMirror 関係を再開できます。更新はアップグレードの完了後にスケジュールどおりに実行されます。</block>
  <block id="9d65950930bb25ed46073bd7f01c7392" category="list-text">デスティネーションで SnapMirror のステータスを確認します。</block>
  <block id="6e29c61f3d7ca15884f613bf76f4ad83" category="list-text">SnapMirror 関係を再開します。</block>
  <block id="e81669be921c5bd20d872e337c5b204d" category="paragraph">node1 の物理ポートが node3 の物理ポートに直接マッピングされていない場合は、次のセクションを参照してください <block ref="871101a3a410248482eefafa62332b63" category="inline-xref-macro-rx"></block> ネットワーク接続を修復するために使用する必要があります。</block>
  <block id="3e0da2be1046cdf5d552f8adaa98c3ae" category="paragraph">node3 のインストールとブートが完了したら、正しくインストールされていることを確認する必要があります。node3 がクォーラムに参加するのを待ってから、再配置処理を再開する必要があります。</block>
  <block id="60d0d1447a22e8eb1a7dd321b2eec56f" category="paragraph">手順のこの時点で、 node3 がクォーラムに参加する間、処理が一時停止します。</block>
  <block id="264f45c2e8ee62b2a09c06df8f3dea0f" category="list-text">ノード 3 がクォーラムに参加していることを確認し</block>
  <block id="0f452669c01e49cb27b82dac8c6f9656" category="paragraph">cluster show -node node3 -fields health`</block>
  <block id="1c39607d3048b34130b8a3c0d2959603" category="list-text">ノード 3 が node2 と同じクラスタに含まれており、ノード 3 が正常であることを確認します。</block>
  <block id="65e2b77d04e539a041041cfc7b7c4d8f" category="list-text">コントローラ交換処理のステータスを確認し、ノード 1 を停止する前と同じ状態で一時停止状態になっていることを確認して、新しいコントローラの設置とケーブルの移動の物理的なタスクを実行します。</block>
  <block id="7d6da636a56e3278933335b21cca97bc" category="list-text">MetroCluster システムを使用している場合は、交換したコントローラが MetroCluster 構成に対して正しく設定されていることを確認します。 MetroCluster 構成が正常な状態である必要があります。を参照してください <block ref="14c0e32a98a31f9fd4a16b635b2f7ebd" category="inline-link-macro-rx"></block>。</block>
  <block id="cc3fae395501f043309fdf0319483db7" category="paragraph">手順 6 に進む前に、 MetroCluster ノード node3 でクラスタ間 LIF を再設定し、クラスタピアリングを調べて MetroCluster ノード間の通信をリストアすることを確認します。</block>
  <block id="ab20c270d222c6ce93913a4b4444628f" category="list-text">コントローラの交換処理を再開します。</block>
  <block id="4ab15a5901ac29ba8b22502370d01f1b" category="section-title">ノード 3 でネットワーク設定をリストア</block>
  <block id="503c8b965e105d62de14a258e8389adc" category="list-text">[[step1] アップグレードした node1 （ node3 ）上のすべての物理ポートを表示します。</block>
  <block id="8e80c0200aab07655785cb1bec3cc1b7" category="paragraph">network port show -node node3</block>
  <block id="49b3d94638f7775922691a946dbeed08" category="list-text">[step2] クラスタ上のブロードキャストドメインの一覧を表示します。</block>
  <block id="a4780c06a89c299119583f29f32ac093" category="paragraph">次の例のような出力が表示されます。</block>
  <block id="d640102c0f1d010e832d7ab6c998976d" category="list-text">[[auto_verify_3_step4]] 'node3 の各ポートの到達可能性を 'OK' 以外の到達可能性ステータスで修復します次のコマンドを最初に任意の物理ポートで実行し、次に任意の VLAN ポートで一度に 1 つずつ実行します。</block>
  <block id="926bbd76240f31054ef4744babd679da" category="paragraph">上記の警告メッセージは、到達可能性ステータスのポートで、現在配置されているブロードキャストドメインの到達可能性ステータスとは異なる可能性がある場合に表示されます。ポートと回答 'y' または 'n' の接続を適宜確認します</block>
  <block id="475bdd7eeca873ac007d2e8d1ed1d0d7" category="list-text">[[step5] インターフェイスグループの設定が新しいコントローラの物理ポートレイアウトと一致しない場合は、次の手順に従って変更します。</block>
  <block id="cb5bf72c08bc8139f3d3b440a9e7819b" category="list-text">[step6] 適切な物理ポートを 'Cluster' ブロードキャストドメインに割り当てるには ' 次の手順に従います</block>
  <block id="c1c14675eda4b09d8745d772c971a760" category="list-text">'Cluster' ブロードキャスト・ドメインに到達可能なポートを判別します</block>
  <block id="1a385242d9fb60423161c8ec41af6b34" category="list-text">[[step7] 次のいずれかのコマンドを使用して、残りの物理ポートを正しいブロードキャストドメインに移動します。</block>
  <block id="652d99b8bb896eacc70cc28d4cea6df9" category="list-text">[[step8] 次の手順を使用して、取り外された可能性のある VLAN を復元します。</block>
  <block id="40ce515ca09862da0a063e257c689c4b" category="paragraph">次に、インターフェイスグループ a0a から削除された VLAN を同じインターフェイスグループにリストアする例を示します。</block>
  <block id="4f9ba38af17871a0e83fa239a6bccc71" category="paragraph">次に、ポート「 e0e 」上の取り外された VLAN を「 E0h 」にリストアする例を示します。</block>
  <block id="a14b1937d7549cfe6656638825e7aa1a" category="list-text">[[step9] すべてのポート修復が完了したら、空のブロードキャストドメインを削除します。</block>
  <block id="5831ae6a2541ef3e48c73d2d25573b1f" category="list-text">[[step10] ] ポートの到達可能性を確認します。</block>
  <block id="94e75d181c02739e78c94503deab7a67" category="paragraph">すべてのポートが正しく設定され、正しいブロードキャストドメインに追加されている場合、「 network port reachability show 」コマンドは、接続されているすべてのポートの到達可能性ステータスを「 ok 」、物理的に接続されていないポートのステータスを「 no-reachability 」と報告する必要があります。この 2 つ以外のステータスが報告されたポートがある場合は、到達可能性修復を実行し、の手順に従ってブロードキャストドメインにポートを追加または削除します <block ref="647eca8a7ea8d4d8434879df3c364180" category="inline-xref-macro-rx"></block>。</block>
  <block id="bf3f92b1cc4c69581f2185ebf4603ed4" category="list-text">次の手順に従って、リストアが必要な SVM および LIF のホームポートがある場合は、それらを指定して LIF のホームポートをリストアします。</block>
  <block id="5103bf442db985e287322952e9087bad" category="list-text">LIF のホームノードとホームポートをリストアします。</block>
  <block id="4a8c92edcf5608186b4e424977f98a73" category="cell">ブート環境プロンプトで「 ifconfig e0M -auto 」コマンドを入力すると、接続が自動的に設定されます</block>
  <block id="732b920f8c31e81584bfe00d62cf46b6" category="paragraph">必要に応じて、を参照してオンボードポートをイニシエータに変更します <block ref="1d789633b45165b05bf13f9838060fe6" category="inline-link-macro-rx"></block>。ゾーニングの詳細な手順については、ストレージアレイとゾーニングに関するドキュメントを参照してください。</block>
  <block id="d3feb03e5c47d69a9cd8b610c3e8e8ce" category="list-text">[[step29]] ストレージアレイに接続された FlexArray 仮想化ソフトウェアを使用する MetroCluster 構成、 V シリーズシステムおよびシステムの場合は、に進みます <block ref="65c4c751ac1fc661b74f2a8dfa84d816" category="inline-link-macro-rx"></block>。</block>
  <block id="b24179e00e90966dedcd7ebbac3c3c96" category="list-text">ネットワークとすべての VLAN 、インターフェイスグループ、およびブロードキャストドメインが正しく設定されていることを手動で確認してください。</block>
  <block id="35c143d9885250e0128441d72be169dd" category="list-text">「 y 」と入力して続行します。</block>
  <block id="0fe1ab232beb36c111a482c1e5418bbf" category="paragraph">これらのチェックの実行後、システムによって、 node2 によって所有されているルート以外のアグリゲートと NAS データ LIF が新しいコントローラ node4 に再配置されます。リソースの再配置が完了すると、システムは一時停止します。</block>
  <block id="ec0abf2d5a391631e61dd4509cb00ed5" category="list-text">ルート以外のアグリゲートと NAS データ LIF がノード 4 に正常に再配置されたことを手動で確認します。</block>
  <block id="947b05812612f9bdff090f2792520d01" category="paragraph">いずれかのアグリゲートに再配置が失敗した場合、または拒否された場合は、アグリゲートを手動で再配置するか、必要に応じて拒否またはデスティネーションのチェックを無視する必要があります。を参照してください <block ref="f9a42009c629603217595f3693c67911" category="inline-link-macro-rx"></block> を参照してください。</block>
  <block id="5f1a63352c537579794f3a3c507ca8fb" category="list-text">次のコマンドを入力し、出力を確認します。</block>
  <block id="fd9ca0bcb22fd53f185265e5000e6dfc" category="paragraph">次の例のような出力が返されます。</block>
  <block id="700025ddacc1b1f21775237f69db717d" category="list-text">ノード 4 に、ノード 2 に存在しないポート上にある SAN LIF または SAN LIF のグループがある場合、または別のポートにマッピングする必要がある場合は、次の手順を実行して、ノード 4 の該当するポートにそれらの SAN LIF またはグループを移動します。</block>
  <block id="628e610b0dbac7c06fd03cc48e401fac" category="list-text">次のコマンドを入力して、 LIF のステータスを down に設定します。</block>
  <block id="c9ac8fe8e0b43e6046de0567dc54775e" category="list-text">ポートセットから LIF を削除します。</block>
  <block id="d21772becf211f27205d2c80c2749c12" category="list-text">次のいずれかのコマンドを入力します。</block>
  <block id="912ec22b1107a17c22a0c63f0644a0d3" category="list-text">次のコマンドを入力して、 1 つの LIF を移動します。</block>
  <block id="f037b701218bf1cc451615cabf0cca09" category="list-text">次のコマンドを入力して、単一のポートまたは間違ったポートのすべての LIF を新しいポートに移動します。</block>
  <block id="0a3646df26d19fcc6a0ee6929a6ea7be" category="list-text">LIF をポートセットに再度追加します。</block>
  <block id="2e3c23cf91c21a249f56ef996f27a61a" category="list-text">次のコマンドを入力して、すべての LIF のステータスを「 up 」に変更し、ノード上のトラフィックを LIF が受け入れて送信できるようにします。</block>
  <block id="970d4e34765aa0832a9175b5e001ed85" category="list-text">次のコマンドを入力し、出力を調べて、 LIF が正しいポートに移動されていること、およびどちらかのノードで次のコマンドを入力して LIF のステータスが「 up 」になっていることを確認します。</block>
  <block id="8c094e66fbad29785444d71fd6c0dcac" category="paragraph">'network interface show -home-node &lt;node4 &gt; -role data</block>
  <block id="9b18a03ff7c916731423d488104e8994" category="list-text">LIF が 1 つでも停止している場合は、次のコマンドを LIF ごとに 1 回入力して、 LIF の管理ステータスを up に設定します。</block>
  <block id="086b8cee848b6ff9a25adc1f6ed791c8" category="paragraph">これらのチェックの実行後、 node1 で所有されているルート以外のアグリゲートと NAS データ LIF が新しいコントローラ node3 に再配置されます。リソースの再配置が完了すると、システムは一時停止します。</block>
  <block id="ad7a81d24d4defe671e7bcfbac5dce2c" category="list-text">ルート以外のアグリゲートと NAS データ LIF がノード 3 に正常に再配置されたことを確認します。</block>
  <block id="efd16d4be5b2e2f326b572d6729c7b2c" category="paragraph">いずれかのアグリゲートに再配置が失敗した場合、または拒否された場合は、アグリゲートを手動で再配置するか、必要に応じて拒否またはデスティネーションのチェックを無視する必要があります。を参照してください <block ref="f9a42009c629603217595f3693c67911" category="inline-link-macro-rx"></block> を参照してください。</block>
  <block id="d8c338ec7a5289c51f0e3bb79890e813" category="list-text">次の手順を実行して、ノード 3 の正しいポートに SAN LIF があることを確認します。</block>
  <block id="c54266e61fa0c81baa92579805dc7963" category="list-text">ノード 3 に、ノード 1 に存在しないポート上にある SAN LIF または SAN LIF のグループがある場合、または別のポートにマッピングする必要がある場合は、次の手順を実行して、ノード 3 の該当するポートにそれらの SAN LIF またはグループを移動します。</block>
  <block id="2fbcca46574c079f4fb5aa457abc282e" category="list-text">LIF のステータスを down に設定します。</block>
  <block id="fd8145a34775436c1a5fe969965d449f" category="list-text">1 つの LIF を移動します。</block>
  <block id="30f710fc2b8d913378fc91684f0863fd" category="list-text">存在しない、または間違ったポート上のすべての LIF を新しいポートに移動します。</block>
  <block id="3920c87ab45883a20b7f4aff2eb8f6f9" category="list-text">ノードでトラフィックを許可して送信できるように、すべての LIF のステータスを「 up 」に変更します。</block>
  <block id="b5fdeb64f12933be51c64181c2145b75" category="list-text">いずれかのノードで次のコマンドを入力し、その出力を調べて、 LIF が正しいポートに移動されていること、および LIF のステータスが「 up 」になっていることを確認します。</block>
  <block id="f70b18bc9d56cbb566a64828fa672913" category="list-text">LIF が 1 つでも停止している場合は、次のコマンドを LIF ごとに 1 回入力して、 LIF の管理ステータスを「 up 」に設定します。</block>
  <block id="a9ed443016f95a1edf1f75d02a400ef4" category="doc">ノード 3 に、 VLAN 、インターフェイスグループ、およびブロードキャストドメインを再作成します</block>
  <block id="38f0774e23dfcfc33d0c71a95a9ec915" category="paragraph">node3 がクォーラムにあり、 node2 と通信できることを確認したら、ノード 3 にある node1 の VLAN 、インターフェイスグループ、およびブロードキャストドメインを再作成する必要があります。node3 のポートは、新しく作成したブロードキャストドメインにも追加する必要があります。</block>
  <block id="75500a9c555091ca84661935a854fadd" category="list-text">に記録された node1 情報を使用して、 node3 に VLAN を再作成します <block ref="9fd31f02e13c9f75db388cfb74e0acc1" category="inline-link-macro-rx"></block> セクション。</block>
  <block id="f45acda1c521e41b3ce8a3679b6215ab" category="list-text">に記録されている node1 の情報を使用して、ノード 3 にインターフェイスグループを再作成します <block ref="9fd31f02e13c9f75db388cfb74e0acc1" category="inline-link-macro-rx"></block> セクション。</block>
  <block id="f66463ad689a1b6a786f9d835f140a4a" category="list-text">に記録されている node1 の情報を使用して、ノード 3 にブロードキャストドメインを再作成します <block ref="9fd31f02e13c9f75db388cfb74e0acc1" category="inline-link-macro-rx"></block> セクション。</block>
  <block id="64c5cc9b78a53e4aac350b1dbb4401d0" category="list-text">node3 のポートを、新しく作成したブロードキャストドメインに追加します。</block>
  <block id="9bced622fe4463826e54e9d72ffb3105" category="doc">ポートを node1 から node3 にマッピングします</block>
  <block id="44471d5aafdc0c157c500d2d6a23a19e" category="paragraph">ポート設定は、ノードのモデルによって異なる場合があります。元のノードのポートと LIF の設定を、新しいノードの計画的な使用と設定に対応させる必要があります。これは、新しいノードがブート時に同じ設定を再生するためです。つまり、ノード 3 をブートすると、 ONTAP は、ノード 1 で使用されていたポートで LIF をホストしようとします。</block>
  <block id="0e17cd2a380c7aee928d55a629e1247a" category="paragraph">そのため、 node1 の物理ポートが node3 の物理ポートに直接マッピングされていない場合は、ブート後にクラスタ、管理、およびネットワーク接続をリストアするためにソフトウェア設定の変更が必要になります。また、ノード 1 のクラスタポートがノード 3 のクラスタポートに直接マッピングされていない場合、ノード 3 は、正しい物理ポートでクラスタ LIF をホストするソフトウェア設定を変更するまで、リブート時にクォーラムに自動的に再参加しないことがあります。</block>
  <block id="8ecfd3d07d0b566573970e006b263355" category="list-text">node1 、ポート、ブロードキャストドメイン、および IPspace のすべての node1 ケーブル接続情報を表に記録します。</block>
  <block id="95416f2c916dabe21f738406546ebc53" category="cell">LIF</block>
  <block id="7c58d4376f3e9edee5dddea0cb60174b" category="cell">Node1 ポート</block>
  <block id="c9545236c254e502f1fd332fd827bb30" category="cell">ノード 1 の IPspace</block>
  <block id="d097d9fa6c24ef764e863334502d7e44" category="cell">ノード 1 のブロードキャストドメインです</block>
  <block id="a3af08ec17eafe7fd9b8af3ac85cd551" category="cell">Node3 ポート</block>
  <block id="d7dbdebdabf907055e9f9b1ad790cd2f" category="cell">ノード 3 の IPspace</block>
  <block id="da3249c2580cf367f00b7be2fbbbe3fa" category="cell">ノード 3 のブロードキャストドメイン</block>
  <block id="ad6dcf374ab3aa82295dfd9f05c5321a" category="cell">クラスタ 1</block>
  <block id="1254eb728cd3888ab12378466d7acf61" category="cell">クラスタ 2</block>
  <block id="ab9ecc9d421fd8c94654e9f43686ba1a" category="cell">クラスタ 3</block>
  <block id="bf1b6535047986fddc090d91db2256c5" category="cell">クラスタ 4</block>
  <block id="3c8ea2e650fa77bf321eab55f3572403" category="cell">ノード管理</block>
  <block id="1eb5ae63609e68a11106494d272615bf" category="cell">クラスタ管理</block>
  <block id="1fffe5dec3e7cf3665b3f3d7f9f46a13" category="cell">データ 1</block>
  <block id="1ae886c83bb2b57062f09c9ab93869df" category="cell">データ 2.</block>
  <block id="49995b31307a5ab11f30d0cfc964294f" category="cell">データ 3</block>
  <block id="4006ebc8b1e151da2d8e1860f1657adc" category="cell">データ 4.</block>
  <block id="62a0282d39568be094470486eaf70c4f" category="cell">SAN</block>
  <block id="9e825d496d7663757ece1259e7a96304" category="cell">クラスタ間ポート</block>
  <block id="a954ed2f319ed904377b750e964bbd3b" category="list-text">ノード 3 、ポート、ブロードキャストドメイン、および IPspace のすべてのケーブル接続情報を表に記録します。</block>
  <block id="15395d832f02a01663100fa8cdcdbe72" category="list-text">セットアップが 2 ノードスイッチレスクラスタかどうかを確認するには、次の手順を実行します。</block>
  <block id="b5c6fde8816eb583a49b6c0314b82928" category="list-text">権限レベルを advanced に設定します。</block>
  <block id="07d5ca0790a321e18a18d766e2a4dc46" category="paragraph">'cluster::&gt; set -privilege advanced</block>
  <block id="02447279c68e4d1b8321c16d451e2f25" category="list-text">セットアップが 2 ノードスイッチレスクラスタかどうかを確認します。</block>
  <block id="1754e82bbc644d474d95cae66bc6dae3" category="paragraph">'cluster::&gt; network options switchless-cluster show</block>
  <block id="5fc571537471df3ed57f747d12b1f82f" category="paragraph">このコマンド出力の値は、システムの物理状態と一致する必要があります。</block>
  <block id="0a33c5a38d244a756240abb6427cac6d" category="list-text">管理者権限レベルに戻ります。</block>
  <block id="ca9ef37ccec1afc84a708333d3584ceb" category="list-text">ノード 3 をクォーラムに配置するには、次の手順を実行します</block>
  <block id="1d15788f6c2c92d9fd9ae80b762e2b98" category="list-text">ノード 3 をブートします。を参照してください <block ref="b27daeccf5fbd8a2e88a3636ee615b74" category="inline-link-macro-rx"></block> ノードをブートします（まだブートしていない場合）。</block>
  <block id="e250afe1d6acb2cedbe5164cfe15e160" category="list-text">新しいクラスタポートが Cluster ブロードキャストドメインにあることを確認します。</block>
  <block id="d5a848f4f51e9593f468d025887aa790" category="paragraph">次の例は、ポート「 e0a 」が node3 のクラスタドメインにあることを示しています。</block>
  <block id="3b95836e337e89d8b015f844a70e27c5" category="list-text">クラスタポートが Cluster broadcast-domain にない場合は、次のコマンドを使用して追加します。</block>
  <block id="0d5ac86deac51d611e624857bd351157" category="paragraph">次の例は、ノード 3 にクラスタポート「 e1b 」を追加します。</block>
  <block id="f82bb6762cd68512cb29bd2a7f8ae49b" category="list-text">クラスタブロードキャストドメインに適切なポートを追加します。</block>
  <block id="a45073b4c9b4451293184e2e132d0416" category="paragraph">network port modify -node -port -ipspace Cluster -mtu 9000`</block>
  <block id="6a5060000cc7ede4725a843f1b406b97" category="paragraph">次の例では、 node4 にクラスタポート「 e1b 」を追加します。</block>
  <block id="79498ed93931f11551ee000416c681ad" category="list-text">LIF を 1 つずつ新しいポートに移行します。</block>
  <block id="19822d45a3cb02a6f584bb24bcaa5b08" category="list-text">クラスタ LIF のホームポートを変更します。</block>
  <block id="85530f2f9f1c84469942b904bd0afd80" category="list-text">クラスタブロードキャストドメインから古いポートを削除します。</block>
  <block id="02a331c3e689130522f148a92e794698" category="paragraph">次のコマンドは、ノード 3 のポート「 e0d 」を削除します。</block>
  <block id="453a5afbc81eb04f9be87066e772f47c" category="paragraph">「 network port broadcast-domain remove-ports -ipspace Cluster -broadcast-domain Cluster ‑ ports node3 ： e0d</block>
  <block id="73a476e3954651a03a873f15c78fb2cf" category="list-text">ノード 3 が再びクォーラムに参加したことを確認します。</block>
  <block id="4076f0d6df989532aff6382687e9888e" category="list-text">LIF のホームポートを表示します。</block>
  <block id="b2dc601f3d617280e54bd9153ba2aa9a" category="paragraph">network interface show -fields home-node 、 home-port</block>
  <block id="151015f4cf01b0b6b0ba1839b9b1bd6a" category="list-text">このポートを含むブロードキャストドメインを表示します。</block>
  <block id="c65a432daff80bb22606190592ba03a1" category="list-text">ブロードキャストドメインのポートを追加または削除します。</block>
  <block id="8f822f2d07295ece2b3ed7d8bc0255ff" category="paragraph">「 network port broadcast-domain add-ports 」と入力します</block>
  <block id="f6f7703e9fef5152575d8f4d7f724839" category="list-text">LIF のホームポートを変更します。</block>
  <block id="721f2cf56861c6620ae10af678a11201" category="list-text">に示すコマンドを使用して、クラスタ間 LIF に使用されるネットワークポートのブロードキャストドメインメンバーシップを調整します <block ref="fea3b13a0d2ee88cc51adec05dc6a35c" category="inline-xref-macro-rx"></block>。</block>
  <block id="ef347e13fc7ddb5d862f419e62a1814c" category="list-text">必要に応じて、のコマンドと同じコマンドを使用して、他のブロードキャストドメインを調整してデータ LIF を移行します <block ref="fea3b13a0d2ee88cc51adec05dc6a35c" category="inline-xref-macro-rx"></block>。</block>
  <block id="ebde3c7ee6d00f9081b9e50638aee5c0" category="list-text">ノード 1 にノード 3 に存在しないポートがある場合は、次の手順に従って削除します。</block>
  <block id="f2797e57746a2e92ae2db208aa4ca684" category="list-text">どちらかのノードで advanced 権限レベルにアクセスします。</block>
  <block id="848d81ec28722b1c7b9863d586ec791b" category="list-text">ポートを削除します。</block>
  <block id="e292843f0f8aa27c8a0485033bbc83a8" category="list-text">すべての LIF フェイルオーバーグループを調整します。</block>
  <block id="7a0381687cdc9de622bbd1da886f7a53" category="paragraph">次のコマンドは、フェイルオーバーポリシーを「 broadcast-domain-wide 」に設定し、ノード 3 の LIF 「 data1 」のフェイルオーバーターゲットとして、フェイルオーバーグループ「 fg1 」のポートを使用します。</block>
  <block id="cb78b2e3deaeee9f6221f0adf18ae798" category="paragraph">network interface modify -vserver node3 -lif data1 failover-policy broadcast-domain-domainwide -failover-group fg1</block>
  <block id="b5c60a344329e79b3bc3ea4e338dec46" category="list-text">ノード 3 で変更内容を確認します。</block>
  <block id="ca6c97b959d192578a21a39e5daa0dcb" category="doc">ノード 4 で VLAN 、インターフェイスグループ、およびブロードキャストドメインを再作成します</block>
  <block id="06531598d2f1f8cb4d0e1748bdd53cb1" category="paragraph">ノード 4 がクォーラムにあり、ノード 3 と通信できることを確認したら、ノード 2 の VLAN 、インターフェイスグループ、およびブロードキャストドメインをノード 4 に再作成する必要があります。node3 のポートは、新しく作成したブロードキャストドメインにも追加する必要があります。</block>
  <block id="f510fd869131d6e75b451f4d5143753d" category="list-text">で記録した node2 の情報を使用して、 node4 に VLAN を再作成します <block ref="f7f70c2c98be066b2a9d668ac7d63467" category="inline-link-macro-rx"></block> セクション。</block>
  <block id="90f14f8b8c696d6b840bbeaafeef318b" category="list-text">で記録した node2 の情報を使用して、 node4 にインターフェイスグループを再作成します <block ref="f7f70c2c98be066b2a9d668ac7d63467" category="inline-link-macro-rx"></block> セクション。</block>
  <block id="080ec370c2d913fcb5020dced626cc50" category="list-text">で記録した node2 の情報を使用して、 node4 にブロードキャストドメインを再作成します <block ref="f7f70c2c98be066b2a9d668ac7d63467" category="inline-link-macro-rx"></block> セクション。</block>
  <block id="f10d0345f9a30980e7c9be821215c028" category="list-text">新たに作成したブロードキャストドメインにノード 4 のポートを追加します。</block>
  <block id="28ee1efc4e85d8c498824b6d179e810b" category="list-text">オンボードキーマネージャの暗号化設定を同期するには、クラスタプロンプトで次のコマンドを実行します。</block>
  <block id="261226346341bab3c9b8e706c0ad80c1" category="cell">この ONTAP バージョンの場合 ...</block>
  <block id="6307f29fb047a8637ca6f025a1dec02d" category="cell">ONTAP 9.6 または 9.7</block>
  <block id="0fcf2ee62acd9eae83b609a0e7ecaa72" category="cell">ONTAP 9.5</block>
  <block id="3554bd6dca965e0e8bcb314a54ef655c" category="list-text">オンボードキーマネージャのクラスタ全体のパスフレーズを入力します。</block>
  <block id="04e69ed9c039a8d1bc156ec97e69f0d2" category="inline-link-macro">node2 のポートを node4 にマッピングします</block>
  <block id="77a9ad04a0d2efb7c2993685c68b4955" category="admonition">ノード 4 にオンボードの FC ポート、オンボードの UTA / UTA2 ポート、または UTA / UTA2 カードがなく、ストレージディスクを搭載したシステムをアップグレードする場合は、に進みます <block ref="fface1ac702bde6d72ceb6e55eb8b2b6" category="inline-link-macro-rx"></block> セクション。ただし、 V シリーズシステムまたは FlexArray 仮想化ソフトウェアがインストールされていて、ストレージアレイに接続されているノードがあり、オンボードの FC ポート、オンボード UTA / UTA2 ポート、または UTA / UTA2 カードがノード 4 に搭載されていない場合は、 section_Install and boot node4 _ に戻って再開する必要があります <block ref="1a99f6ce933cd745b2b02e54c9272506" category="inline-link-macro-rx"></block>。ノード 4 に十分なラックスペースがあることを確認してください。node4 が node2 とは別のシャーシにある場合は、 node3 と同じ場所に node4 を配置できます。node2 と node4 が同じシャーシにある場合は、 node4 が適切なラックの場所にすでに存在しているとします。</block>
  <block id="8c212e8d716365fe78b3dc05e538816b" category="list-text">このセクションをスキップして、に進みます <block ref="fface1ac702bde6d72ceb6e55eb8b2b6" category="inline-link-macro-rx"></block> ノード 4 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがない場合</block>
  <block id="8791ac28601fdc37abff08e6c499f508" category="list-text">に進みます <block ref="15e1611f6cc2b64b7163cc152446c8c0" category="inline-link-macro-rx"></block> ノード 4 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがある場合</block>
  <block id="d99c8ba9d658d3212fddc2b03d46d17d" category="cell">セクションに移動します <block ref="fface1ac702bde6d72ceb6e55eb8b2b6" category="inline-link-macro-rx"></block>。</block>
  <block id="9cf4d14086ce4d21dc41a4190205b5f9" category="paragraph">A800 にアップグレードする場合は、に進みます <block ref="1917bbf2d6d289423b4a495f5ba4fcca" category="inline-xref-macro-rx"></block>。</block>
  <block id="2df4aaf5859b7013b08c777b75de1736" category="list-text">[[auto_check_4_step15]] ノード 4 で、ブートメニューに移動し、 22/7 を使用して、非表示オプション「 boot_after_controller_replacement 」を選択します。プロンプトで node2 と入力し、次の例のように node2 のディスクを node4 に再割り当てします。</block>
  <block id="ad5f4bb6f9161068112afc76d5e212f4" category="list-text">システムが再起動ループに入って「ディスクが見つかりません」というメッセージが表示された場合は、ポートがターゲットモードにリセットされ、ディスクを認識できないためです。に進みます <block ref="d55e3a0f9758a99c055e4411cec66cde" category="inline-xref-macro-rx"></block> から <block ref="1abe7aef97cf6f4670adea7171f10403" category="inline-xref-macro-rx"></block> これを解決します。</block>
  <block id="fface1ac702bde6d72ceb6e55eb8b2b6" category="list-text"><block ref="fface1ac702bde6d72ceb6e55eb8b2b6" category="inline-link-macro-rx"></block></block>
  <block id="38c5d8cbf396fa8049b864a52905989e" category="inline-link-macro">ノードのネットワークポートセットが異なる場合は、クォーラムを追加します</block>
  <block id="f0b0c29d9be806c3fb8f84d804659749" category="list-text"><block ref="f0b0c29d9be806c3fb8f84d804659749" category="inline-link-macro-rx"></block></block>
  <block id="9645dac7a86b8b52dafb1d2bce8d2cbc" category="paragraph">ONTAP 9.5 から 9.7 では、 Key Management Interoperability Protocol （ KMIP ）サーバを使用して認証キーを管理できます。</block>
  <block id="40f491be1da04740c193fe7b8e4df207" category="paragraph">アグリゲートの再配置（ ARL ）を使用して ONTAP 9.5 を実行するコントローラのペアを ONTAP 9.7 にアップグレードできるかどうかは、プラットフォームと、元のコントローラと交換用コントローラの両方の構成によって異なります。</block>
  <block id="58753da369714fb951c22c96476b373b" category="paragraph">この ARL 手順 for ONTAP 9.5 を使用して ONTAP 9.7 にノードのペアをアップグレードする場合は、 ARL が元のコントローラと交換用コントローラで実行可能であることを確認する必要があります。</block>
  <block id="92d7a6cff22927442a55701963967daa" category="paragraph">元のシステムでサポートされるすべての定義済みアグリゲートのサイズとディスク数を確認する必要があります。次に、サポートされるアグリゲートサイズとディスク数を、新しいシステムでサポートされるアグリゲートサイズとディスク数と比較する必要があります。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> この情報がある Hardware Universe にリンクするには、次の手順を実行します。新しいシステムでサポートされるアグリゲートサイズとディスク数は、元のシステムでサポートされるアグリゲートサイズとディスク数以上であることが必要です。</block>
  <block id="49b8e12e4922dd11255eee6c82462eae" category="paragraph">元のコントローラを交換したときに、新しいノードが既存のノードとクラスタの一部になることができるかどうかは、クラスタ混在ルールで検証する必要があります。クラスタ混在ルールの詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> Hardware Universe にリンクするには、次の手順を実行します。</block>
  <block id="e20e9ea1f6702a02cf275f42f38fd063" category="admonition">AFF システムのアップグレードを実行する前に、 ONTAP をリリースバージョン 9.5P1 以降にアップグレードする必要があります。これらのリリースレベルは、アップグレードを成功させるために必要です。</block>
  <block id="e13ef1734f457a6634d02e817f76fb23" category="paragraph">ARL を使用したコントローラのアップグレードは、 SnapLock Enterprise ボリュームおよび SnapLock Compliance ボリュームが設定されたシステムでサポートされます。</block>
  <block id="38cf27caef6776abd0225a54be1e9972" category="list-text">[[auto9597_istall3_step6] 次のいずれかの操作を選択して、ネットブート接続を設定します。</block>
  <block id="2dc628959227b30796539097566ced4e" category="list-text">[[Step13]] 両方のノードで次のコマンドを使用して、 SP を設定します。</block>
  <block id="cffe1635d7e645065b5457e425a54cdd" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> SP および _SP ONTAP 9 コマンドの詳細については ' システム管理リファレンスにリンクするには ' マニュアルページリファレンスを参照してください system の service-processor network modify コマンドの詳細については ' を参照してください</block>
  <block id="17acc08dd9b9cc179eb2c71ee42f1438" category="paragraph">この情報では、元のノードの名前は「 node1 」と「 node2 」になり、新しいノードの名前は「 node3 」と「 node4 」になります。説明されている手順では、「 node1 」は「 node3 」に置き換えられ、「 node2 」は「 node4 」に置き換えられます。</block>
  <block id="87955a4e69dc9556a2a78cd5f057d2f3" category="paragraph">「 node1 」、「 node2 」、「 node3 」、および「 node4 」は、元のノードと新しいノードを区別するためだけに使用されます。手順を使用するときは、元のノードと新しいノードの実際の名前を置き換える必要があります。ただし実際には、ノードの名前は変更されません。「 node3 」の名前は「 node1 」と同じで、「 node4 」の名前はコントローラハードウェアのアップグレード後に「 node2 」と同じです。</block>
  <block id="48d957729e77cbd1ec1cf772f951270a" category="list-text">この手順は、交換用コントローラハードウェアが新しく購入され、使用されていないことを前提としています。使用済みのコントローラを「 wipeconfig 」コマンドで準備するために必要な手順は、この手順には含まれていません。交換用コントローラハードウェアを以前に使用していた場合は、テクニカルサポートに問い合わせる必要があります。特に、コントローラが Data ONTAP 7-Mode を実行していた場合は、テクニカルサポートにお問い合わせください。</block>
  <block id="e5e0e33438e3e93b68faec10a86b2f1c" category="list-text">この手順を使用して、ノードが 3 つ以上あるクラスタのコントローラハードウェアをアップグレードできますが、クラスタ内の HA ペアごとに手順を個別に実行する必要があります。</block>
  <block id="8aa258d7d2576cff89b65debb971736d" category="list-text">この FlexArray システム、 V シリーズシステム、 AFF システム、および手順環境 FAS 仮想化ソフトウェアを搭載したシステムです。必要なライセンスがインストールされていれば、 ONTAP 9.5 以降にリリースされた FAS システムをストレージアレイに接続できます。既存の V シリーズシステムは、 ONTAP 9.5 でサポートされます。ストレージアレイと V シリーズのモデルの詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> Hardware Universe にリンクして、 V シリーズサポートマトリックスにアクセスしてください。</block>
  <block id="3b6c063a8efbc88c969c7838f0611434" category="list-text"><block ref="3b6c063a8efbc88c969c7838f0611434" category="inline-link-macro-rx"></block></block>
  <block id="2bef9a25a25f8408b93c008177e86cf5" category="inline-link-macro">ノードのネットワークポートのセットが異なる場合のクォーラムの追加</block>
  <block id="881027673002730ac21d11ed07a40569" category="list-text"><block ref="881027673002730ac21d11ed07a40569" category="inline-link-macro-rx"></block></block>
  <block id="307639a03c0baad18a78770a19967fb8" category="list-text"><block ref="307639a03c0baad18a78770a19967fb8" category="inline-link-macro-rx"></block></block>
  <block id="9fd31f02e13c9f75db388cfb74e0acc1" category="list-text"><block ref="9fd31f02e13c9f75db388cfb74e0acc1" category="inline-link-macro-rx"></block></block>
  <block id="f9a42009c629603217595f3693c67911" category="list-text"><block ref="f9a42009c629603217595f3693c67911" category="inline-link-macro-rx"></block></block>
  <block id="5606085c29237d873046f0814d8b70b0" category="list-text">次のコマンドを入力して、 node4 が node3 と同じクラスタに含まれていること、および正常であることを確認します。</block>
  <block id="7f1799dcf19180943a8e7e660bf6a3dd" category="list-text">処理のステータスを確認し、 node4 の設定情報が node2 と同じであることを確認します。</block>
  <block id="a10c88f3a400c8c2aa654ddd4a616518" category="paragraph">ノード 4 の設定が異なる場合は、あとで手順でシステムが停止する可能性があります。</block>
  <block id="838d8de52d85e0b64e9643b598ef2b7e" category="list-text">交換したコントローラが MetroCluster 構成に対して正しく設定されており、スイッチオーバーモードでないことを確認します。</block>
  <block id="c7bfe1826ae50dfa18e857462ed5be48" category="admonition">* 注意：この段階では、 MetroCluster 構成は正常な状態ではなく、エラーが発生していて解決できます。を参照してください <block ref="14c0e32a98a31f9fd4a16b635b2f7ebd" category="inline-link-macro-rx"></block>。</block>
  <block id="d214189b511a4dddc29ca037a9c05cc4" category="paragraph">アップグレード手順の実行中、リモート LIF は SAN LUN へのトラフィックを処理します。アップグレード時にクラスタやサービスの健全性を維持するために、 SAN LIF を移動する必要はありません。ノード 3 をオンラインにしたあと、 LIF が正常に機能しており、適切なポートに配置されていることを確認する必要があります。</block>
  <block id="b003ff957beed57b873253f1e4cd0441" category="list-text">[[step5] - データ LIF をホストしているポートが新しいハードウェアに存在しない場合は、ブロードキャストドメインから削除します。</block>
  <block id="45560e4a070877091866d34d12016154" category="list-text">インターフェイスグループまたは VLAN が設定されている場合は、次の手順を実行します。</block>
  <block id="8e2087071d353c6f56da3d27b7a84dfc" category="list-text">インターフェイスグループから VLAN を削除します。</block>
  <block id="3f3edadf07afca334ee7f44554a2b78f" category="admonition">対処方法に従って、 vlan delete コマンドで表示されるエラーを解決します。</block>
  <block id="f4d11d72b637e9ed5ccd913b9007a29e" category="list-text">次のコマンドを入力し、その出力を調べて、ノードにインターフェイスグループが設定されているかどうかを確認します。</block>
  <block id="04e176453ee24840739bd91255d982c4" category="paragraph">次の例に示すように、ノードのインターフェイスグループ情報が表示されます。</block>
  <block id="e477f90becbcba9c7c9b92ec022ad754" category="list-text">ノードにインターフェイスグループが設定されている場合は、それらのグループの名前とグループに割り当てられているポートを記録し、ポートごとに次のコマンドを 1 回入力してポートを削除します。</block>
  <block id="358f52f6680f0f2b534acb9ac77674d2" category="list-text">停止している LIF がある場合は、次のコマンドを LIF ごとに 1 回入力して、 LIF の管理ステータスを「 up 」に設定します。</block>
  <block id="44d2fdf7ea40f3d7321cb94a4051b609" category="paragraph">「 network interface modify -vserver _Vserver_name -lif LIF_name `-home-node_nodename __ -status-admin up</block>
  <block id="65dafd80488559eb25b9b16c7ae60e27" category="list-text">次のコマンドを入力して、インターフェイスグループから VLAN を削除します。</block>
  <block id="38c250e3cea10de8e69a05edc403fb4f" category="paragraph">「 network port vlan delete -node _nodename 」 -port_ifgrp --vlan-id_vlan_ID_`</block>
  <block id="11c404f7c79ae3005a460cd2d80c457a" category="paragraph">「 network port ifgrp show -node nodename 」 -ifgrp _ifgrp_name のように表示されます</block>
  <block id="d72c3f2754ea2c427cb4caa21b66f58a" category="paragraph">「 network port ifgrp remove-port -node_nodename 」 -ifgrp _ifgrp_name -port_netport_ 」のようになります</block>
  <block id="6694385292a5e940b67087561676a6aa" category="list-text">ONTAP 9.5 、 9.6 、または 9.7 を実行しているネットアップコントローラをアップグレードする場合。本ドキュメントは、 ONTAP 9.8 へのアップグレードには適用されません。</block>
  <block id="9ac1bc9aa08a3adb056bbe14e9db22f9" category="list-text">MetroCluster 構成をアップグレードする場合は、 4 ノード以上の FC 構成になり、すべてのノードで ONTAP 9.6 または 9.7 を実行します。</block>
  <block id="b20b578c387911a06f818e60f8b42fc9" category="cell">AFF A300 、 AFF A400 、 AFF A700 ^1 ^ 、 AFF A800^2^</block>
  <block id="08b8b3c8e271efd7690222a017e7f380" category="cell">FAS8700 、 FAS9000 、 FAS8300 ^4^ 、 ^5^</block>
  <block id="da8b8662f7c1d5fff02df5d395e1d253" category="cell">AFF A700 ^1 ^ 、 AFF A800 ^2 ^ ^ 、 ^3^ 、 AFF A400 ^ 4 ^ ^ 、 ^5^</block>
  <block id="e51c635d01c8dc3e816e9f14ad0767cf" category="paragraph">^1 ^ARL AFF A700 システムの自動アップグレードは、 ONTAP 9.7P2 からサポートされています。</block>
  <block id="1ab9ac762ff98f776b6d5cfddf56bf6f" category="inline-link-macro">ノード 3 の UTA / UTA2 ポートを確認して設定します。手順 14</block>
  <block id="d16c604a3cddc9316d5dfc1514c5da11" category="inline-link-macro">ノード 4 の UTA / UTA2 ポートの確認と設定、手順 14</block>
  <block id="854e3fd862be50a0cf7e5d697506a33c" category="paragraph">^2^ 内蔵ディスクと外付けディスクをサポートする AFF A800 システムに更新する場合は、内蔵 NVMe ディスクのルートアグリゲートに関する具体的な手順に従う必要があります。を参照してください <block ref="983c366997f9ae38fb70a96bf899b5fb" category="inline-link-macro-rx"></block> および <block ref="c637ff237000263c980a88d3850be72b" category="inline-link-macro-rx"></block>。</block>
  <block id="cc31b65361b7c697a4d3c0f75b928baf" category="paragraph">^3^ARL AFF A300 から AFF A800 システムへの自動アップグレードは、 ONTAP 9.7P5 からサポートされています。</block>
  <block id="2e2d0e127c8eb55e752ddae9109b7b26" category="paragraph">^4^ARL AFF A300 から AFF A400 への自動アップグレード、および FAS8200 から FAS8300 への自動アップグレードは、 ONTAP 9.7P8 からサポートされています。</block>
  <block id="0d17b2b0ee5853657bc79eefe010abec" category="paragraph">^5^ AFF A300 から AFF A400 または FAS8200 を 2 ノードスイッチレスクラスタ構成で FAS8300 システムにアップグレードする場合は、コントローラのアップグレード用の一時的なクラスタポートを選択する必要があります。AFF A400 および FAS8300 システムは、イーサネットバンドルとして、メザニンカードポートはイーサネットタイプ、 FC タイプの FC バンドルとして、 2 種類の構成で提供されます。</block>
  <block id="03b11da9f8060b934f9b3411198fea29" category="list-text">リストされている各キー管理サーバについて、同じ手順を繰り返します。</block>
  <block id="c61ecb9aacaa88894fa1697ec209966a" category="paragraph">最大 4 台のキー管理サーバをリンクできます。</block>
  <block id="db109f602a3b7cebd1a7f99683224535" category="list-text">リンクされたすべてのキー管理サーバから新しいノードに認証キーをリストアします。</block>
  <block id="d2b3e4b0ae30abdd31414891613ecac2" category="list-text">外部キー管理ツールの認証をリストアします。</block>
  <block id="74c90316d25b4cdc5c8e524af066a5a0" category="paragraph">「セキュリティキーマネージャの外部リストア」</block>
  <block id="eed577fe70cdcd6a422d81d49e0f94ca" category="paragraph">このコマンドには、オンボードキーマネージャ（ OKM ）のパスフレーズが必要です。</block>
  <block id="57bd5edad2e4a85125aa9528f6fa4cea" category="list-text">OKM の認証をリストアします：</block>
  <block id="e163b825512519a699383447144a9f8c" category="list-text">ノード 3 にオンボードの FC ポート、オンボードの UTA / UTA2 ポート、または UTA / UTA2 カードがなく、ストレージディスクを搭載したシステムをアップグレードする場合は、に進みます <block ref="3b6c063a8efbc88c969c7838f0611434" category="inline-link-macro-rx"></block> セクション。</block>
  <block id="7d0739079baed100420d18c056ca0deb" category="list-text">ただし、ストレージアレイを搭載した FlexArray 仮想化ソフトウェアを搭載した V シリーズシステムまたはシステムがあり、 node3 にはオンボードの FC ポート、 UTA / UTA ポート、または UTA / UTA2 カードがない場合は、で section_Install および boot node3_and resume に戻ります <block ref="279060155dcadaa13689560d46e381cb" category="inline-link-macro-rx"></block>。</block>
  <block id="81fed3b8a4c90b1e08e96db4e364a264" category="list-text">ノード 3 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがない場合は、このセクションを省略してください <block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block>。をクリックして、セクションに移動します <block ref="3b6c063a8efbc88c969c7838f0611434" category="inline-link-macro-rx"></block>。</block>
  <block id="192b140d95aa5779e6ddd34b883a91bb" category="list-text">ノード 3 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがない場合は、このセクションを省略してください <block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block> セクション「 _Install 」に戻り、再開時に node3 _ をブートします <block ref="279060155dcadaa13689560d46e381cb" category="inline-link-macro-rx"></block>。</block>
  <block id="a69c4b39f212e41199201fde407c6c9e" category="cell">に進みます <block ref="3b6c063a8efbc88c969c7838f0611434" category="inline-link-macro-rx"></block></block>
  <block id="5bb1d2d89905f521825083d671817bcb" category="cell">は、 V シリーズシステムまたは FlexArray 仮想化ソフトウェアを搭載し、ストレージアレイに接続されています</block>
  <block id="06ebdeec742f5f261b968dabee7ce4bc" category="cell">_Install に戻り、 node3 をブートして、のセクションを再開します <block ref="279060155dcadaa13689560d46e381cb" category="inline-link-macro-rx"></block>。</block>
  <block id="fb2ae3407dbb65ffe5f8f2ab09ba07d0" category="list-text">次のコマンドを入力し、出力を確認して、新しいクラスタポートがクラスタブロードキャストドメインにあることを確認します。</block>
  <block id="3cb8659a043650dc7ac58ea24d685632" category="paragraph">「 network port show -node node -port port -fields broadcast-domain 」</block>
  <block id="31ee4113a91e33fbefc812b660a4b1ed" category="paragraph">次の例は、ポート「 e1a 」が node3 のクラスタドメインにあることを示しています。</block>
  <block id="5196f85280b4d8f2fde41a628b5ed883" category="list-text">次のコマンドを入力し、出力を確認して、クラスタブロードキャストドメインに正しいポートを追加します。</block>
  <block id="3c5acee2cec17679c5be3b6cbcdd5c0d" category="list-text">次のコマンドを使用して、 LIF ごとに 1 回、クラスタ LIF を新しいポートに移行します。</block>
  <block id="2bb80bd4ebcf6539543d74e66779c6af" category="list-text">クラスタポートが Cluster broadcast-domain にない場合は、次のコマンドを使用して追加します。</block>
  <block id="251908cb596e6149cba77f2cb7558b73" category="list-text">クラスタブロードキャストドメインから古いポートを削除します。関連する任意のノードに対してを使用できます。次のコマンドは、ノード 3 のポート「 e0d 」を削除します。</block>
  <block id="3a77dcc8c0ced4edb3012a4377887fef" category="paragraph">「 network port broadcast-domain remove-ports network port broadcast-domain remove-ports ipspace Cluster -broadcast-domain Cluster -ports node3 ： e0d</block>
  <block id="94633ca5c1dd75af12a1c5cf6f093384" category="list-text">ノードが再びクォーラムメンバーになったことを確認します。</block>
  <block id="cd44bb6e4bc3e07a88dbfa652b3b8611" category="list-text">ブロードキャストドメインに対してポートを追加または削除します。「 network port broadcast-domain add-ports network port broadcast-domain remove-port</block>
  <block id="1f689cbf21b231665fddfb1e6d536c70" category="paragraph">ノード 4 のソフトウェア設定がノード 4 の物理的な接続と一致していること、およびアップグレードを続行する前に IP 接続がリストアされていることが必要です。</block>
  <block id="bf8b9055a5342a7293763811a06a8608" category="paragraph">ポート設定は、ノードのモデルによって異なる場合があります。元のノードのポートと LIF の構成を、新しいノードの構成と互換性を持つようにする必要があります。これは、新しいノードがブート時に同じ設定を再生するためです。つまり、ノード 4 のブート時に、 Data ONTAP が node2 で使用されていたポートで LIF をホストするように試行するためです。</block>
  <block id="fbec007548b328ac0c95f6da4a3baeae" category="paragraph">したがって、 node2 の物理ポートが node4 の物理ポートに直接マッピングされない場合は、ブート後にクラスタ、管理、およびネットワーク接続をリストアするためにソフトウェア設定の変更が必要となります。また、 node2 のクラスタポートが node4 のクラスタポートに直接マッピングされていない場合は、正しい物理ポートでクラスタ LIF をホストするソフトウェア設定が変更されるまで、リブート時に node4 がクォーラムに自動的に再参加しないことがあります。</block>
  <block id="bad707bf91a771b52edba306ada6de3a" category="list-text">node2 、ポート、ブロードキャストドメイン、 IPspace のすべてのケーブル接続情報を表に記録します。</block>
  <block id="7d59f6e2a8043f873c459c922f1be4ac" category="cell">Node2 ポート</block>
  <block id="45b46ba4750e074aa4e7304855388746" category="cell">ノード 2 の IPspace</block>
  <block id="7774466fbe6f6785b221d88e974172bf" category="cell">ノード 2 のブロードキャストドメイン</block>
  <block id="b820c2559c77f1207711b13680c2cd4b" category="cell">Node4 ポート</block>
  <block id="db2291ca53692966923fd04da1d08262" category="cell">ノード 4 の IPspace</block>
  <block id="29ed689e40f8d5b58cdea33f9a18e301" category="cell">ノード 4 のブロードキャストドメインが必要です</block>
  <block id="e0b5ca8e30da43caab0dc808ecb2fd97" category="list-text">ノード 4 、ポート、ブロードキャストドメイン、および IPspace のすべてのケーブル接続情報を表に記録します。</block>
  <block id="0906da04c2f71c2ff6e8d8aa1a0b62e6" category="paragraph">このコマンドの値は、システムの物理状態と一致している必要があります。</block>
  <block id="c3e082d7583cd2ead0dcc409f5542b21" category="list-text">ノード 4 をクォーラムに追加する手順は、次のとおりです。</block>
  <block id="db937998c9896c71a694ce3ace71be28" category="list-text">ノード 4 をブートします。を参照してください <block ref="f326c815b47f4f2909494bae5cd735d5" category="inline-link-macro-rx"></block> ノードをブートします（まだブートしていない場合）。</block>
  <block id="9721a97ccd9a5f90e5dbf3fc6d7d79e8" category="paragraph">次の例は、ポート「 e0a 」が node4 にあるクラスタドメイン内にあることを示しています。</block>
  <block id="97b7450d8bd85e6393b74d4dbf4450d0" category="paragraph">network port modify -node node4 -port e1b -ipspace Cluster -mtu 9000`</block>
  <block id="69b32f8a94b6832dc6d48eee17de9eb8" category="paragraph">次のコマンドは、ノード 4 のポート「 e0d 」を削除します。</block>
  <block id="b99a704778802fd3eec12de47c8eef3e" category="paragraph">「 network port broadcast-domain remove-ports -ipspace Cluster -broadcast-domain Cluster -ports node4 ： e0d</block>
  <block id="046f5601edc5838681a4341447d07a3c" category="list-text">ノード 4 が再びクォーラムメンバーになったことを確認します。</block>
  <block id="6780452e8545385148d380db905f436b" category="paragraph">「 network port broadcast-domain add-ports 」「 network port broadcast-domain remove-ports 」</block>
  <block id="9cad7d7bd6306823f6764eed03150b40" category="list-text">必要に応じて、と同じコマンドを使用して、クラスタ間ブロードキャストドメインを調整してクラスタ間 LIF を移行します <block ref="c86367403222084077e79731124e45bf" category="inline-xref-macro-rx"></block>。</block>
  <block id="85668f79ccc0a9c2b457eb839ed11619" category="list-text">必要に応じて、のコマンドと同じコマンドを使用して、他のブロードキャストドメインを調整してデータ LIF を移行します <block ref="c86367403222084077e79731124e45bf" category="inline-xref-macro-rx"></block>。</block>
  <block id="df67040888f09ede9f57e8123e071106" category="list-text">node2 に存在しないポートが残っている場合は、次の手順に従って削除します。</block>
  <block id="5a2881d4439f8933c1dc179fb49a9495" category="paragraph">次のコマンドは ' フェイルオーバー・ポリシーを broadcast-domain-wide に設定し ' フェイルオーバー・グループ fg1 のポートを 'node4 の LIF のフェイルオーバー・ターゲットとして使用します</block>
  <block id="c85edd1a59a6da53fbfe967ef36e8db3" category="paragraph">'network interface modify -vserver node4 -lif data1 failover-policy broadcast-domainwide -failover-group fg1</block>
  <block id="197cf83159625e94e69b0fc1efa0e824" category="list-text">ノード 4 で変更を確認します。</block>
  <block id="37df1e4edda8a9bce8aa91096f265331" category="list-text">[[Step5] ] 次のコマンドを入力し、出力を調べて、 node2 にデータ LIF が残っていないことを確認します。</block>
  <block id="c76c038ef9582123a69154e143b5e63f" category="list-text">次のコマンドを入力し、ノードに設定されているインターフェイスグループがないかどうかを確認します。</block>
  <block id="83d7d02690134c88d040a5e6d81a981b" category="paragraph">関連するノードに対してこの手順を使用できます。node3 は、次のサンプル全体で使用されます。</block>
  <block id="aa38e04ca4c35fceef45210d8b6a003a" category="list-text">次のコマンドを入力し、出力を確認して、新しいクラスタポートがクラスタブロードキャストドメインにあることを確認します。</block>
  <block id="9c334e7e4defdbeb8571e0c5e2a8abf3" category="list-text">次のコマンドを入力し、出力を確認して、クラスタブロードキャストドメインに正しいポートを追加します。</block>
  <block id="03631f9ee15255f006df50849cffb9de" category="list-text">クラスタ LIF のホームポートを次のように変更します。</block>
  <block id="929697b9e81ed66dcaa4410aa1b6eea4" category="paragraph">「 network port broadcast-domain add-ports -ipspace Cluster -broadcastdomain Cluster ports node: port 」のように設定されています</block>
  <block id="440a119559739fb047b33344e93fc5ac" category="list-text">ノードが次のようにクォーラムに再参加したことを確認します。</block>
  <block id="ca5fc614df4c9dce6d5728a3a2c40003" category="paragraph">「 network port broadcast-domain add-ports network port broadcast-domain remove-port 」というメッセージが表示されます</block>
  <block id="deb6dba98f2d5d5a1fde945303708e5d" category="list-text">LIF のホームポートを変更します。</block>
  <block id="764f98dfaba7470447914335050a58df" category="paragraph">必要に応じて、クラスタ間ブロードキャストドメインを調整してクラスタ間 LIF を移行します。データ LIF は変更されません。</block>
  <block id="b42a4717030452cc205d4d9947f80c7b" category="paragraph">いずれかのアグリゲートに再配置が失敗した場合、または拒否された場合は、アグリゲートを手動で再配置するか、必要に応じて拒否またはデスティネーションのチェックを無視する必要があります。</block>
  <block id="70ab34491b1c348e1a029bf39dad5d2c" category="list-text">EMS ログで、アグリゲートの再配置に失敗した理由や拒否された理由を確認します。</block>
  <block id="cc9d127dc39047b3e73421f03d8d0026" category="cell">次のコマンドを入力します。「 storage aggregate relocation start -override-vetoes * -ndocontroller -upgrade true</block>
  <block id="6067a4436975e19e7c76700ceeabd5c2" category="cell">次のコマンドを入力します。「 storage aggregate relocation start -overridedestination-checks * -nd-controllerupgrade true</block>
  <block id="83e3abbe2d4f63155eff798e62e1a616" category="inline-link-macro">ステージ 3 ：ノード 3 の設置とブート</block>
  <block id="bb9252c2a7cbae6e0a2014a53400a55c" category="paragraph">ただし、元のコントローラと同じバージョンの ONTAP 9 がインストールされているコントローラには、ネットブートする必要はありません。その場合は、このセクションをスキップしてに進みます <block ref="a3940c661e200ff7ee0136ca0ef37651" category="inline-link-macro-rx"></block></block>
  <block id="47d2d2bfe5e2f318b6d816e5adc3929d" category="paragraph">このフェーズで node3 がクラッシュした場合は、 HA がすでに無効になっているため、テイクオーバーは実行されません。</block>
  <block id="f361f80547aae98b60e1c7ecc861a027" category="paragraph">ノード 3 のリブートまでルート以外のアグリゲートがすでに再配置されています。</block>
  <block id="07c1aaa58cd1a9ed9a8f92aecfc26662" category="paragraph">node3 のブート中に、すべてのアグリゲートでクライアントが停止します。</block>
  <block id="3ffee04e4bb020103f1bece18c2ac58e" category="doc">コントローラのアップグレードプロセスを自動化する</block>
  <block id="de8c3311256a86cce047cb3a63efa71a" category="paragraph">コントローラのアップグレード時に、コントローラは、より新しい、またはより強力なプラットフォームを実行する別のコントローラに交換されます。</block>
  <block id="0a00cf76c766f3c9437fe3941fdf22c4" category="cell">ステージ 1 ：アップグレードを準備</block>
  <block id="2fa5c37305bc33a6ae27bb983656d1e3" category="list-text">処理のステータスを確認し、 node3 の設定情報が node1 と同じであることを確認します。</block>
  <block id="7ae288e57d9c04f2d5a1b7ff338ee758" category="paragraph">node3 の設定が異なる場合は、手順の後半でシステムが停止する可能性があります。</block>
  <block id="d845d17a5ef5b3ab80e9280a67c911e8" category="list-text">交換したコントローラが MetroCluster 構成に対して正しく設定されていることを確認します。 MetroCluster 構成は正常な状態であり、スイッチオーバーモードではないことが必要です。を参照してください <block ref="14c0e32a98a31f9fd4a16b635b2f7ebd" category="inline-link-macro-rx"></block>。</block>
  <block id="3c18bf7f079d36181ad6878ed8071663" category="summary">ルートボリュームからブートデバイスに構成情報をリストアする必要があります。</block>
  <block id="bc40b2f6345ce25ab7662ef954f79eac" category="doc">ルートボリューム構成をリストア</block>
  <block id="8025560869bc5bb571a283b93eb36c25" category="list-text">LOADER プロンプトからブートメニューにアクセスします。</block>
  <block id="3b30581e1dcf21fb5bc10ab7b7b14ebc" category="list-text">ブート・メニューから '(6) Update flash from backup config' を選択し ' 続行するかどうかを確認するメッセージが表示されたら 'y' を入力します次のいずれかを選択してください。</block>
  <block id="e568219783dc2975662f32e6665b9312" category="paragraph">フラッシュの更新プロセスが数分間実行され、システムがリブートします。</block>
  <block id="64c7b7b950f686aaa9399673582360b1" category="list-text">システム ID の不一致を確認するプロンプトが表示されたら、「 y 」と入力します。</block>
  <block id="e4c1c828d40a575431492bab6401d8ae" category="paragraph">起動シーケンスは正常に実行されます。</block>
  <block id="f068cb7de6bc557a6102cbb510f726f0" category="summary">元のノードからボリュームを移動できるように、新しいノードを設置してクラスタに追加する必要があります。</block>
  <block id="0a89217206ded71020fde70b9be96510" category="doc">新しいノードを設置してクラスタに追加</block>
  <block id="b241ff4d47149b1cfcc3bff8ac743191" category="paragraph">ボリュームを移動することでコントローラハードウェアをアップグレードする場合は、元のノードと新しいノードの両方が同じクラスタに存在する必要があります。</block>
  <block id="48c7c41b72e1d678923ce3571aa65b2d" category="list-title">ステップ</block>
  <block id="c73b08eed72ad3afd194519ddb22ebc4" category="list-text">新しいノードを設置してクラスタに追加します。</block>
  <block id="5da3c5c759e159e1aab297e687e23060" category="cell">クラスタのバージョン</block>
  <block id="b7c4538baf1def6c115b8c9ce3581612" category="cell">参照するドキュメント</block>
  <block id="a0783764f121d0362f984f57649b230b" category="paragraph">ONTAP 9.0 以降</block>
  <block id="ed3f2da4177cc35b1433eccf1a2e9b37" category="paragraph">ONTAP 9.0 より前のリリース</block>
  <block id="8f2f5cebfa6b4e869a159dbf3cedb773" category="inline-link">使用しているバージョンの Data ONTAP 8 に対する『クラスタの拡張エクスプレスガイド』を検索してください</block>
  <block id="2f22c527d871517945ac34102d2f6931" category="summary">ストレージを移動することでアップグレードの手順を完了するには、新しいノードから未使用のポートと LIF を削除し、ストレージフェイルオーバーまたはハイアベイラビリティを再度有効にし、サービスプロセッサ \ （ sp\ ）を設定し、新しいライセンスをインストールし、 AutoSupport をセットアップする必要があります。また、ストレージまたはボリュームの暗号化を設定し、 FC ポートまたは CNA ポートを設定する必要がある場合もあります。</block>
  <block id="5112ce36807c8e031c9ab063bc28ce71" category="doc">ONTAP 9.7 以前で最終アップグレード手順を実行します</block>
  <block id="83e8f1a7c1a2c10d90059989f69becc7" category="list-text">ストレージシステムのプロンプトで、 LIF に関する情報を表示します。</block>
  <block id="de11c3d9da699c5b0528297ad39e25cb" category="list-text">新しいノードから未使用のポートを削除します（ advanced 権限レベル）。</block>
  <block id="1edc30c9cec2665a01f0a9cc7910d9fc" category="paragraph">「 network port delete 」のように表示されます</block>
  <block id="89bd08809cd5f941c4bb2cc6687fe212" category="list-text">SAN 環境の場合は、未使用の LIF をポートセットから削除して、 LIF を削除できるようにします。</block>
  <block id="76cde272010074b17076f956bb6d89f8" category="list-text">ポートセットリストを表示します。</block>
  <block id="18ecf1639f5534ac5a785a3b8e1d413f" category="paragraph">lun portset show</block>
  <block id="c9afae54fd0724e5cf3fea1615684aa8" category="list-text">未使用の LIF をポートセットから削除します。</block>
  <block id="2585d1a54081f67afe396a9a7f2d20fc" category="paragraph">「 lun portset remove 」</block>
  <block id="c0535f3650a99508f47cb0b1cc1a34ac" category="list-text">新しいノードから未使用の各 LIF を削除します。</block>
  <block id="ab316765db1b6096837da27d30f7afbd" category="paragraph">「 network interface delete 」</block>
  <block id="eb300e9e31367fa48035e27472f75b6f" category="list-text">必要に応じて、新しいノードペアでストレージフェイルオーバーまたはハイアベイラビリティを再度有効にします。</block>
  <block id="e8599f3c8ef213317efbf60b0379685c" category="cell">使用する方法</block>
  <block id="73b5646d22daa7a0c1b15cb75822045d" category="cell">2 ノードクラスタ</block>
  <block id="7315714b19f21e9ad91dfa8b10b194f9" category="cell">高可用性を再度有効にします : 「 cluster ha modify -configured true</block>
  <block id="1ec03101c59723f4e07d47729c2bb2c0" category="cell">3 つ以上のノードで構成されるクラスタ</block>
  <block id="35dece72c7fa8f55fa95338ea53d5bb8" category="cell">ストレージフェイルオーバーを再度有効にします。「 storage failover modify -node node_name -enabled true 」</block>
  <block id="8f581810d42d6aab9a995890e97f0a55" category="list-text">必要に応じて、新しいノードで SP を設定します。</block>
  <block id="ac1f1418c4fb176ba9565108305de59a" category="paragraph">「 system service-processor network modify 」を参照してください</block>
  <block id="7e8a470724bdedbac7acdf0c919a8f0d" category="list-text">必要に応じて、新しいノードに新しいライセンスをインストールします。</block>
  <block id="5da2b156280daaa1fc2fe1cb2772416f" category="paragraph">「システムライセンスが追加されました」</block>
  <block id="3d0e110b052ddfe7c5e1d2238e076ff2" category="list-text">新しいノードで AutoSupport をセットアップします。</block>
  <block id="844ad6e55c95a4328e37b5e065b5ff4a" category="paragraph">「システム・ノード AutoSupport modify 」</block>
  <block id="e31a23cd4ecc24fce8358862c8b9bae7" category="list-text">新しい各ノードから、アップグレード後の AutoSupport メッセージをテクニカルサポートに送信します。</block>
  <block id="39f6fe42807470e793eabaa7b4decf63" category="paragraph">「 system node AutoSupport invoke -node node_name -type all -message 」 MAINT= end node_name が platform_old から platform_new に正常にアップグレードされました</block>
  <block id="e68c8836280fba147b04a2b14b196600" category="paragraph">オンボードキー管理と外部キー管理のどちらを使用しているかに応じて、次のいずれかの手順を実行します。</block>
  <block id="0ba3cc03b09a456d5100379e45dfaaba" category="list-text">「オンボード・キー管理の暗号化キーをリストアする」</block>
  <block id="a96d0d7d353c649cc2f1612f3100f861" category="list-text">「外部キー管理の暗号化キーを復元する」</block>
  <block id="ef613ca6be844d20a9465aad12778acf" category="list-text">新しいノードに FC ポート（オンボードまたは FC アダプタ上）、オンボード CNA ポート、または CNA カードがある場合は、ストレージシステムプロンプトで次のコマンドを入力して、 FC ポートまたは CNA ポートを設定します。</block>
  <block id="7334dc04c7292582343d824254e622ce" category="paragraph">「 system node hardware unified-connect modify -node node-name -adapter adapter-name -mode ｛ fc | cna ｝ -type ｛ target | initiator ｝ 」です</block>
  <block id="b50a05f2d30350b2ea8e112696c796d0" category="paragraph">CNA の設定は、 CNA アダプタがオフラインの場合にのみ変更できます。</block>
  <block id="55c24359193cebab5cdb49b7cf7d04b5" category="list-text">必要に応じて、新しいノードにスイッチレスクラスタをセットアップします。</block>
  <block id="a4fda524e3ce1bcbcd36efab17cd9e24" category="inline-link">Cisco クラスタスイッチを使用した 2 ノードスイッチクラスタへの移行</block>
  <block id="0e15b03083512d986709666b0825a949" category="inline-link">NetApp CN1610 クラスタスイッチを使用した 2 ノードスイッチクラスタへの移行</block>
  <block id="caa541c368ed2e96d996d661d22bc171" category="list-text">必要に応じて、ネットアップサポートサイト経由で元のシステムを運用停止にし、システムの運用を停止したこととサポートデータベースから削除できることをネットアップに通知します。</block>
  <block id="09ea0908fbfc4cde85bf416e35dc55c8" category="inline-link">ネットアップサポート</block>
  <block id="5f76ca3d5838bbe4e3afe662f3e0e008" category="list-text">[ インストール済みシステム ] のリンクをクリックします。</block>
  <block id="b64b23511c1735fad8c07cd83da6444e" category="list-text">[ インストール済みシステム ] ページで、フォームに古いシステムのシリアル番号を入力し、 [* Go!] をクリックします</block>
  <block id="6bdb588e04554302f22e13e36fc8cfcd" category="list-text">Decommission Form ページでフォームに入力し、 *Submit をクリックします。</block>
  <block id="a6544f7c3c36002518f645319241e489" category="paragraph">手順のアップグレードが完了している。</block>
  <block id="589fe3c8d827ae39970fa59898cfc3ee" category="summary">一般に、コントローラハードウェアのアップグレード方法は、元のノードのプラットフォームモデルによって異なります。アップグレードするには、ストレージを移動するか（停止を伴う手順）、またはボリュームを移動します（無停止の手順）。</block>
  <block id="5b0415c2846efde1fb66c48433f25633" category="doc">コントローラハードウェアをアップグレードする方法を選択します</block>
  <block id="39b87627b0135db0ab3ea0a8e2f859bd" category="paragraph">一般に、コントローラハードウェアのアップグレード方法は、元のノードのプラットフォームモデルによって異なります。アップグレードするには、ストレージを移動するか（停止を伴う手順）、またはボリュームを移動します（無停止の手順）。</block>
  <block id="e8617aabffae0af74d02587319a2e105" category="image-alt">コントローラハードウェアをアップグレードする方法</block>
  <block id="e5e09031843479ef9ef8cbbd4c2f404c" category="inline-link">NetApp Hardware Universe の略</block>
  <block id="d33f2a600ba4fe43084a26e95e4908c0" category="paragraph">* 関連情報 *</block>
  <block id="dafbb22fd53a8bbbcd7e0e587f256606" category="inline-link-macro">ストレージの移動によるアップグレードのワークフロー</block>
  <block id="268c885d4c1c9189f00bfa017a5b9d17" category="paragraph"><block ref="268c885d4c1c9189f00bfa017a5b9d17" category="inline-link-macro-rx"></block></block>
  <block id="7d466f4faaea4136b0f35ee3a444b2ee" category="inline-link-macro">ボリュームを移動することによるアップグレードのワークフロー</block>
  <block id="c8b09d07f5441b617dbdf76973a08943" category="paragraph"><block ref="c8b09d07f5441b617dbdf76973a08943" category="inline-link-macro-rx"></block></block>
  <block id="ae2a729cf8a689b034991414ae49b1fb" category="summary">ストレージを移動してアップグレードするときは、まず node3 と node4 を設置し、新しいノードへの電源、コンソール、およびネットワーク接続を接続します。</block>
  <block id="6659a60f476a4bc6bb0fb4f4102757a3" category="doc">新しいノードをインストール</block>
  <block id="7bee235304d66460f5514bec30b84491" category="list-text">プラットフォームの _Installation and Setup Instructions _ に従って、新しいノードを設置します。</block>
  <block id="d3bce5b47df40dd2fa2c5263447f1fef" category="paragraph">この時点では、元のノードのディスクシェルフを新しいノードに接続しないでください。</block>
  <block id="eee400f6654fba9ea347faff838af3e5" category="list-text">プラットフォームの _Installation and Setup Instructions _ に従って、電源とコンソール接続を node3 / node4 HA ペアに接続します。</block>
  <block id="24d72d714e0459bffa2dc49d7ff220e1" category="list-text">ネットワークケーブルを接続します。</block>
  <block id="9d50d3e8c7d08c93404d2be2587afc66" category="list-text">ストレージシェルフのケーブルを除く残りのすべてのケーブルを、ノード 1 とノード 2 の HA ペアからノード 3 とノード 4 の対応するポートにそれぞれ転送します。</block>
  <block id="5a8dfa3943e8e71201fd576d26e40b9d" category="paragraph">ストレージシェルフの接続に使用しないファイバチャネルケーブルとイーサネットケーブルも含まれます。</block>
  <block id="9cd94a0a224271a5cd21acb271cdd506" category="summary">元のノードから移動するボリュームを格納するために、新しい各ノードに少なくとも 1 つのアグリゲートを作成します。ボリュームごとにアグリゲートを指定し、各ボリュームを個別に移動する必要があります。</block>
  <block id="3085ebd8810ece8cd93e0024bdb65eb1" category="doc">アグリゲートを作成してボリュームを新しいノードに移動</block>
  <block id="b256175cc88e3f891053e44ca8855b5d" category="paragraph">ボリュームを移動するには、データ保護ミラー関係を初期化しておく必要があります。</block>
  <block id="4cbaf693faaaa40a1e90a2e2918ba582" category="list-text">新しいノードごとに少なくとも 1 つのアグリゲートを作成します。</block>
  <block id="8766dbee0d34b7a34ce6553a78a69b85" category="paragraph">「 storage aggregate create -aggregate aggr_name -node new_node_name -diskcount integer 」という形式で指定します</block>
  <block id="3cc74cedbe563be5c2d81867ccbfb198" category="list-text">新しいアグリゲートを、ボリュームを移動する元のノードのアグリゲートと同じ SVM に追加します。</block>
  <block id="fe82c8b7274d1544ce545c5b1bb60481" category="paragraph">「 vserver add-aggregates 」</block>
  <block id="39e7eb0e1fd08f1ba6fea6e4df4f0d50" category="paragraph">新しいアグリゲートとボリュームの移動元となる古いアグリゲートの両方が同じ SVM に存在する必要があります。</block>
  <block id="65c0e65d7f3d4f9b7e59695a5beed439" category="list-text">新しいアグリゲートが元のノードのアグリゲートと同じ SVM に割り当てられていることを確認します。</block>
  <block id="d144782c7f277a43532b9873909babed" category="paragraph">vserver show -vserversvm_name'</block>
  <block id="60ffd94dccfc67beb8507929d59460e3" category="list-text">元のノードから新しいノードに移動するボリュームの情報を表示します。</block>
  <block id="c9a520bfa2f4bc1f1f220656e029f2e0" category="paragraph">volume show -vserver svm_name -node original_node_name</block>
  <block id="045e4ac6df29d2cafc7b15a9d2d9e81e" category="paragraph">あとで参照できるように、コマンドの出力は残しておく必要があります。</block>
  <block id="291a171e8b949620eda68d899d2e3e06" category="paragraph">次の例は、「 vs1 」 SVM と「 node0 」ノードのボリュームを表示します。</block>
  <block id="383baa78f8d3606514a0526bf7b76432" category="list-text">指定したボリュームを移動可能なアグリゲートを特定します。</block>
  <block id="943dcca1dc057f958ae14268bc8da20e" category="paragraph">volume move target-aggr show -vserver SVM_name -volume vol_name `</block>
  <block id="2ed27953e3f00d2cb31db4ae51e73953" category="paragraph">次の例は、「 vs2 」 SVM の「 user_max 」ボリュームを、表示されているどのアグリゲートにも移動できることを示しています。</block>
  <block id="275730138630968709a9e2b4981691e3" category="list-text">移動する各ボリュームで検証チェックを実行し、指定したアグリゲートに移動できることを確認します。</block>
  <block id="dccace5c37975b5248e28fc505f29272" category="paragraph">volume move start -vserver svm_name -volume volume_name -destination -aggregate destination_aggregate-name -perform-validation-only true ’</block>
  <block id="de2d56bd81b546dcca46b829e3e1e6f1" category="list-text">ボリュームを一度に 1 つずつ移動します（ advanced 権限レベル）。</block>
  <block id="c938c86730d29da993231313b0f49c52" category="paragraph">volume move start -vserver svm_name -volume vol_name -destination-aggregate destination_aggr_name -cutover-window integer</block>
  <block id="5b41753377d891121fddc57b374ecd0c" category="paragraph">ノードのルートボリューム（ vol0 ）は移動できません。SVM ルートボリュームを含むその他のボリュームも移動できます。</block>
  <block id="b9a2da3111645d69717822ff4c8d43bc" category="list-text">「 volume move 」操作の結果を表示して、ボリュームが正常に移動されたことを確認します。</block>
  <block id="eeb9bfe54f212bc92f6dfd9bfd696f57" category="paragraph">volume move show -vserver svm_name -volume vol_name</block>
  <block id="ef14daf085f4427e7af6d6339e2a9dd6" category="list-text">複数回試行しても 'volume move' 操作が最終フェーズを完了しない場合は ' 強制的に移動を終了します</block>
  <block id="af35cc4c8d875f01b72ac1b9bb33aa01" category="paragraph">volume move trigger-cutover -vserver SVM_name -volume vol_name -force true ’</block>
  <block id="faadc653b9d5250917700d625763b5cc" category="paragraph">ボリュームの移動処理を強制的に終了させると、移動しているボリュームへのクライアントアクセスが中断される可能性があります。</block>
  <block id="c127e808b121ddcc589e1612e8629e3d" category="list-text">ボリュームが指定した SVM に正常に移動され、正しいアグリゲートに配置されていることを確認します。</block>
  <block id="9366aa36db246276006f86c846f493d4" category="paragraph">volume show -vserver svm_name です</block>
  <block id="88b8cfb0eb0372af5622adb072f8536f" category="inline-link-macro">ONTAP 9.8 を使用してネットワークポートをマッピングします</block>
  <block id="0f25f34bbc6624def56436f34d66a8ca" category="doc">オプション：内蔵ストレージを移動するか、システムをドライブシェルフに変換します</block>
  <block id="dd49867a2bdd430ef0f1501edf2afc71" category="paragraph">ドライブまたはドライブシェルフを移動できるのは、同じクラスタ内のみです。</block>
  <block id="5445f44c8361f04d7db7417496478290" category="inline-link-macro">内蔵ドライブを元のノードから移動します</block>
  <block id="8aeeee2821310e6e14e76fc1d344c892" category="list-text"><block ref="8aeeee2821310e6e14e76fc1d344c892" category="inline-link-macro-rx"></block></block>
  <block id="32bdc1101e093c57bf74fbd9789794c2" category="inline-link-macro">元のノードをドライブシェルフに変換します</block>
  <block id="f27c828441c4bcde6d66323e36803847" category="list-text"><block ref="f27c828441c4bcde6d66323e36803847" category="inline-link-macro-rx"></block></block>
  <block id="3fae42f30ee83a6721eb3d8ce8dc8e9e" category="paragraph">元のノードがサポート対象のモデルである場合、ストレージを移動してアップグレードする処理中に、ノードをドライブシェルフに変換し、同じクラスタ内の新しいノードに接続できます。</block>
  <block id="afe97a2560f5930aa2a5c5663fce5add" category="inline-link-macro">コントローラハードウェアのアップグレードに関する考慮事項</block>
  <block id="84dc193ac12ec0c17e52a119451eb5ee" category="list-text">互換性のあるドライブシェルフが新しいノードにすでに接続されている必要があります。</block>
  <block id="14118424a52e5faf27de83ea1ae0b462" category="list-text">システムの前面からベゼルをそっと取り外します。</block>
  <block id="1009ece53b201ef044edbb499bcabdd6" category="list-text">[[move_int_drive_2]] ドライブキャリアの左側にあるリリースボタンを押します。</block>
  <block id="addb5ded0310559ea0a26d75615eeff4" category="paragraph">キャリアのカムハンドルが途中まで開き、キャリアがミッドプレーンから外れます。</block>
  <block id="b74ab52594e3216640ae873b11d66486" category="list-text">カムハンドルを完全に引き下げてミッドプレーンからキャリアを外し、キャリアをドライブシェルフからそっと引き出します。</block>
  <block id="7e66410308ed9486077135ccddda4a00" category="admonition">取り外し、取り付け、持ち運びなど、ドライブを扱うときは常に両手で作業してください。ただし、キャリアの下側のむき出しになっている基板に手を置かないでください。</block>
  <block id="14d43cc881a50f3a6183180fefe24888" category="list-text">カムハンドルを開いた状態で、キャリアを新しいドライブシェルフのスロットに挿入し、キャリアが停止するまでしっかりと押し込みます。</block>
  <block id="84292dc65a5d7c537ea712d040de613a" category="admonition">キャリアを挿入するときは両手を使います。</block>
  <block id="1c21d383507612a44944a4ef460798a2" category="list-text">[[move_int_drive_5] キャリアがミッドプレーンに完全に収まり、カチッという音がして固定されるまで、カムハンドルを閉じます。</block>
  <block id="e31ad1284b7618a9c10777ed99b12e64" category="inline-xref">手順 2</block>
  <block id="4d388dae867b0a86458ede8119b8865e" category="list-text">繰り返します <block ref="267cbc67ee851d16fc5833a2bb2eacbb" category="inline-xref-macro-rx"></block> から <block ref="07cb79f26065ce7eb3e55fb46a8c9f8b" category="inline-xref-macro-rx"></block> 新しいシステムに移動するすべてのドライブについて確認します。</block>
  <block id="145abeddb6e0efab15a65e9dfc45e5f7" category="summary">ONTAP 9.7 以前でアップグレードを完了するには、次の手順を実行します。</block>
  <block id="0c297b93e672c9bc05e823d846073d38" category="doc">ONTAP 9.7 以前でアップグレードを完了します</block>
  <block id="4ace04205abb0a1ff190b1a1f3e3cf03" category="paragraph">ONTAP 9.7 以前でアップグレードを完了するには、次の手順を実行します。</block>
  <block id="e2235c37305cb98ad3fd9aa58c7fad4b" category="inline-link-macro">ONTAP 9.7 以前を使用してネットワークポートをマッピングします</block>
  <block id="df92ac10eb53320f3aee49e68f1573a2" category="list-text"><block ref="df92ac10eb53320f3aee49e68f1573a2" category="inline-link-macro-rx"></block></block>
  <block id="6b0020689d6a1c40c97b6df1736d8e38" category="inline-link-macro">ONTAP 9.7 以前で最終アップグレード手順を実行します</block>
  <block id="00ba9232a950e876c165749336dea823" category="list-text"><block ref="00ba9232a950e876c165749336dea823" category="inline-link-macro-rx"></block></block>
  <block id="9dd804cbb0c89e2e63928e7cedd0c88f" category="summary">アップグレードを計画するには、アップグレードに関する一般的な考慮事項を理解しておく必要があります。必要に応じて、テクニカルサポートに連絡して、クラスタの構成に固有の推奨事項とガイダンスを確認してください。</block>
  <block id="a3cb839890daad4f93490c8dec227de5" category="paragraph">要件および制限事項</block>
  <block id="c9c36eddecbac88c824f0418b523c991" category="list-text">ストレージを移動してアップグレードする手順は停止を伴います。ボリューム移動によるアップグレードの手順は無停止で実行できます。</block>
  <block id="b3dfab8a2046154178dd80b47499ce0c" category="list-text">新しいノードでは、元のノードと同じバージョンのソフトウェアがサポートされている必要があります。</block>
  <block id="93f3fcba35aec9c0367976a9197bb132" category="list-text">クラスタの最大サイズを確認する必要があります。</block>
  <block id="ebba69766eb24e95a1284fdab64d1a66" category="list-text">クラスタ内に異なるコントローラプラットフォームモデルを混在させる場合は、ストレージプラットフォームの混在ルールに従う必要があります。</block>
  <block id="ec124c8a7a4170436f2890610e4aa1c9" category="list-text">新しいノードには、元のノードに関連付けられているストレージを格納するための十分なストレージが必要です。</block>
  <block id="f1f5f029bf97e95c9c37ecdaf7cf4e93" category="list-text">ルートアグリゲートのサイズと新しいシステムでサポートされるディスク数は、元のシステムでサポートされているサイズ以上である必要があります。</block>
  <block id="98f3e4c18f21b25897315931895d5cd5" category="list-text">HA ペアのコントローラは、 2 つの AFF モデルまたは 2 つの FAS モデルである必要があります。</block>
  <block id="fe2b4e59713b2c74efcd804489cd6316" category="list-text">ノードが同じクラスタ内にある場合は、ボリュームまたは物理ストレージを 1 つの FAS2xxx から新しい FAS2xxx に移動することでアップグレードできます。たとえば、ボリュームまたは物理ストレージを FAS2552 から FAS2750 に移動できます。</block>
  <block id="301e2a674920a7bb1b220a6ccd88ce36" category="inline-link">アップグレードまたは更新方法を選択します</block>
  <block id="f2c81e3dbd5898a4f589948eb2c23e36" category="paragraph">内蔵ストレージを搭載したシステム</block>
  <block id="2c422b7143016a62faa144bc1c6e89e1" category="list-text">内蔵ストレージを搭載したシステムの場合は、ボリュームを移動してアップグレードすることを推奨します。</block>
  <block id="b96d37f28c3d7d06841f391d5e809dbd" category="list-text">内蔵ストレージを搭載したシステム、または内蔵 SATA ドライブまたは SSD にボリュームまたはアグリゲートを格納したシステムを使用している場合は、同じクラスタ内の新しいノードに接続されているドライブシェルフに内蔵ストレージを移動することでアップグレードできます。</block>
  <block id="3c62ff9b7896a5eed67cfbeb8bc9bfdf" category="paragraph">内蔵ストレージの移動は、ストレージを移動してアップグレードするワークフローのオプションです。</block>
  <block id="ae966ba3c2ce03e0c6c49d4dfc8f5702" category="paragraph">追加の手順が必要になる場合があります</block>
  <block id="4bbc849fe45c68c7c28841fb794547a0" category="list-text">新しいシステムのスロット数が元のシステムのスロット数より少ない場合、またはポートのタイプが異なる場合は、新しいシステムにアダプタを追加しなければならないことがあります。</block>
  <block id="667fc202a8b204ff5a82b8390500a41b" category="list-text">元のノードまたは新しいノードで FlexArray 仮想化ソフトウェアを使用している場合。</block>
  <block id="4a93c6361efc1101e7ca8ee6327b63ec" category="inline-link">ネットアップの技術情報アーティクル：「 What are the specific steps involved in FlexArray for NetApp controller upgrades and replacements</block>
  <block id="7a3f3e085939e759393b43bef32cbc95" category="list-text">クラスタに SAN ホストがある場合は、 LUN シリアル番号の変更に関する問題を解決するための手順が必要になることがあります。</block>
  <block id="31e9ea6f4ed38186085bf9a52128a461" category="inline-link">ストレージコントローラマザーボードの交換時および iSCSI と FCP を使用したヘッドのアップグレード時の問題の解決方法</block>
  <block id="6125b5468b29015c919d2eaf565415e6" category="list-text">システムでアウトオブバンド ACP を使用している場合は、アウトオブバンド ACP からインバンド ACP への移行が必要になることがあります。</block>
  <block id="c0ae7629e7bfcf00be0d40631578d6f7" category="inline-link">ネットアップの技術情報アーティクル 1029778 ：「 In-Band ACP Setup and Support</block>
  <block id="41e8d90d580396f4d1d06d6dcc1e6ff7" category="paragraph"><block ref="41e8d90d580396f4d1d06d6dcc1e6ff7" category="inline-xref-macro-rx"></block></block>
  <block id="b578e0f4f47404bddfc292477bc08776" category="inline-xref-macro">ストレージを移動してコントローラハードウェアをアップグレードします</block>
  <block id="dbef6fd254e4765e61a6f3112a900a32" category="paragraph"><block ref="dbef6fd254e4765e61a6f3112a900a32" category="inline-xref-macro-rx"></block></block>
  <block id="9932dd20d13ac6c57fa0b56b3ed1e4a0" category="inline-xref-macro">ボリュームを移動してコントローラハードウェアをアップグレードする</block>
  <block id="cbcda6d2b36f65f36ae58e3c1d7065e5" category="paragraph"><block ref="cbcda6d2b36f65f36ae58e3c1d7065e5" category="inline-xref-macro-rx"></block></block>
  <block id="e062efd67a70d34c188657c2ffafc80e" category="summary">ノード 1 とノード 2 に属していたディスクを、それぞれノード 3 とノード 4 に再割り当てする必要があります。</block>
  <block id="43b6e140cee78de5a68c093867c65596" category="doc">ストレージシェルフを接続し、ディスク所有権を再割り当てします</block>
  <block id="507efb4e488acd48724d3f1c3d4b184d" category="paragraph">このセクションの手順は、 node3 と node4 で実行します。そのあと、 node3 の各手順を完了してから次の手順に進みます。</block>
  <block id="3a1ea4eb792e23021a7c1dcb702a9545" category="list-text">ストレージシェルフのケーブルを node1 / node2 から node3 / node4 に接続します。電源装置とシェルフの物理的な接続を確認します。</block>
  <block id="6617e295325d64b4136755492970fe4c" category="list-text">node3 の LOADER プロンプトから、メンテナンスモードでブートします。</block>
  <block id="533823574e82f810ad592fb31173b543" category="list-text">node3 のシステム ID を表示します。</block>
  <block id="9d0e35f7d62f6d238b5cb5794b6d495c" category="paragraph">「ディスクショー V 」</block>
  <block id="01c50956963e384ca8ffd4c7db35055b" category="paragraph">以下の手順 4 で使用する node3 のシステム ID を記録します。</block>
  <block id="8796eefce7338c136136dae2ceb1ae48" category="list-text">ノード 1 のスペアディスク、ルートアグリゲートに属するディスク、およびデータアグリゲートを再割り当てします。</block>
  <block id="35698942e3e79abf6ab8cd4cb3593dc3" category="paragraph">「ディスクの再割り当て -s _node1 _sysid _ -d _node3 _sysid _ -p _node2 _SysID_ 」</block>
  <block id="ae448c109542203d3a3cde5363cfccee" category="list-text">共有ディスクが存在する場合にのみ '--p partner_SysID_' パラメータを指定します</block>
  <block id="a6ac6e206a687fa5e638aeb5a2505e40" category="paragraph">node2 のスペアディスク、ルートアグリゲートに属するディスク、およびすべてのデータアグリゲートを再割り当てする場合、コマンドは次のようになります。</block>
  <block id="2e4156d3cca76c6a7c2a2eb02d8fcbd2" category="paragraph">「ディスクの再割り当て -s node2_sysid -d node4 sysid -p node3 _SysID 」</block>
  <block id="7f616e8c743e57f3b11fac3e3bd7ffb1" category="paragraph">次のようなメッセージが表示されます。</block>
  <block id="d0848afd8553c34945705222a97a4553" category="paragraph">次のような出力が表示されます。</block>
  <block id="e931682ac0f69e4f23e778b87a1949e7" category="summary">ストレージを移動してアップグレードするプロセスでは、 node3 と node4 の電源をオンにし、ソフトウェアイメージをブートしてノードを設定します。</block>
  <block id="b1fa2ac0707a8d8f4408434b0191d0fe" category="doc">新しいノードをセットアップ</block>
  <block id="cc32105596984688d6ab5fee199bc645" category="list-text">node3 の電源をオンにし、すぐにコンソール端末で Ctrl+C キーを押して LOADER プロンプトにアクセスします。</block>
  <block id="25870cbb4fe9afef5797b531420b7012" category="paragraph">node3 と node4 が同じシャーシにある場合は、手順 2 に進みます。ない場合は、手順 3 に進みます。</block>
  <block id="6c43e0670806fec2f9b82e002c3d44d5" category="list-text">node3 と node4 が単一シャーシ構成（同じシャーシ内にコントローラがある場合）の場合は、次の手順を実行します。</block>
  <block id="d486515e741f0bde35c2fd426a867b3d" category="list-text">ノード 4 にシリアルコンソールを接続します。</block>
  <block id="bab144c0a8977d9f14b3ec5a34769bb7" category="list-text">ノード 4 の電源がオンになっていない場合はオンにし、コンソール端末で Ctrl+C キーを押してブートプロセスを中断して LOADER プロンプトにアクセスします。</block>
  <block id="7f3fbfaad92df530efc5e2c935feab6d" category="paragraph">両方のコントローラが同じシャーシ内にある場合は、電源はすでにオンになっているはずです。</block>
  <block id="02dcb64a1d27e1eeab5837de925863e2" category="paragraph">node4 には LOADER プロンプトが表示されたままにします。この手順に戻り、 node3 の設置後に以下の手順を繰り返します。</block>
  <block id="e0c72359a74d5f255e008145ee1a65aa" category="list-text">LOADER プロンプトで、次のコマンドを入力します。</block>
  <block id="70dbb49a6cbad96a6befa2a87cf2c5ce" category="paragraph">「デフォルト設定」</block>
  <block id="f1115a4ee76c827e3baf90e4fccb2989" category="list-text">LOADER プロンプトで、管理 LIF のネットブート接続を設定します。</block>
  <block id="d28de6877e1c71b43aa9dbe62d9bc5a1" category="cell">IP アドレス</block>
  <block id="54201c55d2bdc7a9e19d9e032d8c0ede" category="cell">DHCP</block>
  <block id="ae5171433beb404b3b19f1a8c6ab2aec" category="cell">自動接続を構成します :ifconfig e0M -auto</block>
  <block id="84a8921b25f505d0d2077aeb5db4bc16" category="cell">静的</block>
  <block id="6d762fbeecd3a906c826d40dcc3e0ec8" category="cell">手動接続を設定します。「 ifconfig e0M -addr= ip_addr-mask= netmask -gw= gateway 」</block>
  <block id="fc77134b1cf9bee36efeff8c4e7ff00d" category="list-text">LOADER プロンプトで、ノード 3 でネットブートを実行します。</block>
  <block id="792eb4d1b571ca19a55c8073d075e399" category="cell">FAS2200 、 FAS2500 、 FAS3200 、 FAS6200 、 FAS/AFF8000 シリーズシステム</block>
  <block id="b684c44ca7e473a2454503d632a74387" category="cell">netboot\http://web_server_ip/path_to_webaccessible_directory/netboot/kernel`</block>
  <block id="a0be7aade7801be3a4df66bacd6674d0" category="cell">netboot\http://web_server_ip/path_to_webaccessible_directory/ontap_version_image.tgz`</block>
  <block id="e9df9be17a53094a5ff251f40e848216" category="paragraph">「 path_to_the_web-accessible_directory 」は、ダウンロードした「 ONTAP_version_image.tgz 」ファイルの場所です。</block>
  <block id="a7cb2d731b29707bf9c40c8d88a0c732" category="admonition">新しいコントローラをネットブートできない場合は、テクニカルサポートにお問い合わせください。</block>
  <block id="9a8c20fab9267090fe0211c579b8d259" category="list-text">ブートメニューからオプション * （ 7 ） Install new software first * を選択し、新しいソフトウェアイメージをダウンロードしてブートデバイスにインストールします。</block>
  <block id="53986d70143c63a3205b1deed773b405" category="paragraph">"This 手順 is not supported for NonDisruptive Upgrade on an HA pair" というメッセージは無視しますIT 環境：ソフトウェアの無停止アップグレード。コントローラのアップグレードは対象外。</block>
  <block id="efb4ec8002f3f7ed99b1b4f92cbef052" category="list-text">手順を続行するかどうかを尋ねられたら、「 y 」と入力します。パッケージの入力を求められたら、イメージファイルの URL を入力します。</block>
  <block id="3bb3e0dc251b6c719d9693145812f91b" category="paragraph">http://web_server_ip/path_to_web-accessible_directory/ontap_version_image.tgz`</block>
  <block id="647f982b341b67a165ac63d735784a54" category="paragraph">必要に応じてユーザ名とパスワードを入力するか、 Enter キーを押して続行します。</block>
  <block id="a01beec0f6ce0a2dd45c8f1d5aa3e76c" category="list-text">次のようなプロンプトが表示されたら 'n' を入力してバックアップ・リカバリをスキップします</block>
  <block id="4c311f4de89068c42d4731e90025eefc" category="list-text">次のようなプロンプトが表示されたら 'y' と入力して再起動します</block>
  <block id="3772c3f3ea70d5c6527c33a07c35e34b" category="list-text">リブートプロセスを中断するよう求めるプロンプトが表示されたら、 Ctrl+C キーを押してブートメニューを表示します。</block>
  <block id="6854e023bbdb323be06c87482d9b3a73" category="list-text">ブートメニューから * （ 5 ） Maintenance mode boot * を選択して、メンテナンスモードにアクセスします。</block>
  <block id="2e17578ed57b4217f0fff6fb665fb7db" category="list-text">必要に応じて、ノードの FC ポートまたは CNA ポートへの変更を実施し、ノードをメンテナンスモードにリブートします。</block>
  <block id="39b29886f880d41a4124d49c7d84425f" category="paragraph">システムは、 HA ペア構成かスタンドアロン構成かを PROM に記録します。状態は、スタンドアロンシステムまたは HA ペア内のすべてのコンポーネントで同じである必要があります。</block>
  <block id="1c02d552a23cb0d5ccd392be156357f4" category="paragraph">「 ha-config modify controller ha 」コマンドは、コントローラ設定の「 ha 」を設定します。「 ha-config modify chassis ha 」コマンドを実行すると、シャーシ設定に「 ha 」が設定されます。</block>
  <block id="168534119baada9aef15b0bbbe44b454" category="paragraph">システムが LOADER プロンプトで停止します。</block>
  <block id="928eff2006adc1184e5f768e70b85796" category="summary">元のノードがサポート対象のモデルである場合、ストレージを移動してアップグレードする処理中に、ノードをドライブシェルフに変換し、同じクラスタ内の新しいノードに接続できます。</block>
  <block id="93ee61ace756458b9aac549506050c57" category="list-text">変換するノードのコントローラモジュールを適切な IOM モジュールと交換します。</block>
  <block id="e420822bb33a20469fdc3f065d3d63ca" category="list-text">ドライブシェルフ ID を設定します。</block>
  <block id="e3a1e42d336af98f7116d009f256cff5" category="paragraph">シャーシを含む各ドライブシェルフには、一意の ID が必要です。</block>
  <block id="bf4f5599e53150e46e0e54293db42d76" category="list-text">必要に応じて、他のドライブシェルフ ID をリセットします。</block>
  <block id="2b1d453e5c526d2daec5dda41e6bf086" category="list-text">新しいノードに接続されているドライブシェルフの電源をオフにしてから、新しいノードの電源をオフにします。</block>
  <block id="3c3916219a878033fa2aaddd792ed605" category="list-text">変換したドライブシェルフを新しいシステムの SAS ポートに接続し、アウトオブバンド ACP ケーブルを使用している場合は新しいノードの ACP ポートに接続します。</block>
  <block id="28391dfe8511b351c91dba3094b1ba03" category="list-text">変換したドライブシェルフおよび新しいノードに接続されているその他のドライブシェルフの電源をオンにします。</block>
  <block id="c2f0cd821e5ee148eb1900a96d516f19" category="list-text">新しいノードの電源をオンにしてから、各ノードで Ctrl+C キーを押してブートプロセスを中断し、ブート環境プロンプトにアクセスします。</block>
  <block id="1a364d01ffd247339721f8976186fb42" category="summary">ストレージを移動してアップグレードする場合は、元のノードを準備し、新しいノードをセットアップします。一部のプラットフォームモデルでは、新しいノードへの内蔵ストレージの移動がサポートされています。新しいノードにディスクを再割り当てし、ルートボリュームの設定をリストアし、ネットワークポートを設定します。ストレージの移動によるアップグレードは、停止を伴う手順で実行されます。</block>
  <block id="46ade9d238c9383a9fd555f9909703f2" category="image-alt">ストレージの移動によるコントローラハードウェアのアップグレードワークフロー</block>
  <block id="4b52611cbeb99e3693b2989804997376" category="inline-xref-macro">ストレージ移動時にアップグレードを準備</block>
  <block id="9b9c1d93f638d2492d52c449af4a9f8e" category="list-text"><block ref="9b9c1d93f638d2492d52c449af4a9f8e" category="inline-xref-macro-rx"></block></block>
  <block id="c4612c419c5b77fdb1400d9db61d37d0" category="inline-xref-macro">元のノードをシャットダウンします</block>
  <block id="fa92526c370e0e83caaa8ef73071e577" category="list-text"><block ref="fa92526c370e0e83caaa8ef73071e577" category="inline-xref-macro-rx"></block></block>
  <block id="761cd859f3a1152e9ed0b1bbb19f801e" category="inline-xref-macro">新しいノードに接続されているディスクの所有権を削除します</block>
  <block id="9208c7088ce84da232091879b3770a18" category="list-text"><block ref="9208c7088ce84da232091879b3770a18" category="inline-xref-macro-rx"></block></block>
  <block id="65e0e6759e9c5622cb5684aa9ab3918c" category="inline-xref-macro">新しいノードのデフォルト設定をリセットします</block>
  <block id="f241fa08ba08580f443015464e8677f1" category="list-text"><block ref="f241fa08ba08580f443015464e8677f1" category="inline-xref-macro-rx"></block></block>
  <block id="f23e0348fed3fc9f91c4876ac685e8b2" category="list-text"><block ref="f23e0348fed3fc9f91c4876ac685e8b2" category="inline-xref-macro-rx"></block></block>
  <block id="74e73fdeb27abf5972d451e384c0b008" category="list-text"><block ref="74e73fdeb27abf5972d451e384c0b008" category="inline-xref-macro-rx"></block></block>
  <block id="95d2cfc09ea488ae65b24491b681ba10" category="list-text"><block ref="95d2cfc09ea488ae65b24491b681ba10" category="inline-xref-macro-rx"></block></block>
  <block id="406f6aaf2009833158ad659b727bd7bc" category="list-text"><block ref="406f6aaf2009833158ad659b727bd7bc" category="inline-xref-macro-rx"></block></block>
  <block id="a2e87312e255032446cf18ba0d44062f" category="list-text"><block ref="a2e87312e255032446cf18ba0d44062f" category="inline-xref-macro-rx"></block></block>
  <block id="2d425665af37b9989f89179649650990" category="inline-xref-macro">アップグレードを完了します</block>
  <block id="42b305e24e95a29c3fcfe6708c1ae7a8" category="list-text"><block ref="42b305e24e95a29c3fcfe6708c1ae7a8" category="inline-xref-macro-rx"></block></block>
  <block id="1059655c106e5ea0199f3774e670962f" category="summary">ボリュームを移動してコントローラハードウェアをアップグレードする前に、いくつかの準備手順を実行する必要があります。</block>
  <block id="65ef2ef8754850d3945f71f106c239bf" category="doc">ボリューム移動時にアップグレードを準備</block>
  <block id="e9adb27e90050d8289d9a9c063d397bc" category="list-text">元のノード上のボリュームを表示します。</block>
  <block id="448f48037793339f6909fa019ac572e8" category="paragraph">volume show</block>
  <block id="9a196f75795aecf7d88cba65270aa82d" category="paragraph">コマンド出力を使用して、新しいノードに移動するボリュームのリストを準備します。</block>
  <block id="ca1e7d2036709df38bf67d5763ea1196" category="list-text">元のノードのライセンス情報を表示して記録します。</block>
  <block id="415a99ccf5f33b1917dc69dd5ae1cc49" category="list-text">元のノードでストレージ暗号化を使用しており、新しいノードに暗号化対応ディスクがある場合は、元のノードのディスクにキーが正しく設定されていることを確認します。</block>
  <block id="8a27eb0213ced2501be4946695cfd6de" category="list-text">自己暗号化ディスク（ SED ）に関する情報を表示します。</block>
  <block id="af11fb45c89d3718886f151c8a08d22c" category="paragraph">「 storage encryption disk show 」のように表示されます</block>
  <block id="21673b2e55b47fc43d8ff1f5ae5ace2d" category="list-text">Manufacturer Secure ID （ MSID ；メーカーのセキュア ID ）以外のキーが関連付けられたディスクがある場合は、 MSID キーに変更します。</block>
  <block id="6532a36b400d423741e990e7bfb3a4f9" category="paragraph">「 storage encryption disk modify 」</block>
  <block id="e7a03543f0b46d4d160d9cb6f548c923" category="list-text">現在のクラスタが 2 ノードのスイッチレス構成である場合は、希望するタイプのスイッチを使用する 2 ノードのスイッチクラスタに移行します。</block>
  <block id="a20d9980e43b578ea10896a930345b17" category="list-text">元の各ノードから AutoSupport メッセージを送信して、テクニカルサポートにアップグレードについて通知します。</block>
  <block id="4d3a4f006fa6b11c769a39a41cac5793" category="summary">ストレージを移動してアップグレードの手順を完了するには、新しいノードから未使用のポートと LIF を削除し、ストレージフェイルオーバーまたはハイアベイラビリティを再度有効にし、サービスプロセッサ \ （ sp\ ）を設定し、新しいライセンスをインストールし、 AutoSupport をセットアップする必要があります。また、ストレージまたはボリュームの暗号化を設定し、 FC ポートまたは CNA ポートを設定する必要がある場合もあります。</block>
  <block id="de87a7c00dcfcf1112ca50efd583f924" category="paragraph">ストレージを移動してアップグレードの手順を完了するには、新しいノードから未使用のポートと LIF を削除し、ストレージフェイルオーバーまたはハイアベイラビリティを再度有効にし、サービスプロセッサ（ SP ）を設定し、新しいライセンスをインストールし、 AutoSupport をセットアップする必要があります。また、ストレージまたはボリュームの暗号化を設定し、 FC ポートまたは CNA ポートを設定する必要がある場合もあります。</block>
  <block id="0bde8f7cae6f7006cf8059b9d923c0a4" category="inline-xref-macro">ONTAP 9.7 以前で最終アップグレード手順を実行します</block>
  <block id="a1aef6bc19056065e0e5c87b39d71b96" category="list-text">ONTAP 9.7 以前を実行しているシステムの場合は、 * stop * と入力します。の手順を使用する必要があります <block ref="91f2c94dbfb488703dd443559499d8cb" category="inline-xref-macro-rx"></block>。</block>
  <block id="602dfb74c3c65622a6e81f6da6da5716" category="paragraph">高可用性を再度有効にします : 「 cluster ha modify -configured true</block>
  <block id="68e75079cb8b3e7a53d47ecb9c69a59e" category="paragraph">ストレージフェイルオーバーを再度有効にします。「 storage failover modify -node node_name -enabled true 」</block>
  <block id="07bcd7f493b550a7d6a23f2400273a8b" category="summary">ストレージを移動してアップグレードする前に、元のノードからライセンス情報を収集し、ネットワーク設定を計画し、システム ID を記録して、ネットブートに必要なファイルを準備する必要があります。</block>
  <block id="8f173fba352550b4b824b719504591e0" category="list-text">元のノード node1 と node2 のライセンス情報を表示して記録します。</block>
  <block id="d49b56a3426b3aa04db4098a00a258f3" category="list-text">ノード 1 / ノード 2 HA ペアでストレージ暗号化を使用していて、新しいノードに暗号化が有効なディスクがある場合は、元のノードのディスクにキーが正しく設定されていることを確認します。</block>
  <block id="f86586d6856ab5f19b8787f7761d1c45" category="list-text">自己暗号化ディスク（ SED ）に関する情報を表示します。</block>
  <block id="2ca3f33b8690b8bfadc126b4fa162fd8" category="list-text">Manufacturer Secure ID （ MSID ；メーカーのセキュア ID ）以外のキーが関連付けられたディスクがある場合は、 MSID キーに変更します</block>
  <block id="f4b5604db85f1d0c81857a7ac77548c5" category="list-text">[[prepare_move_store_3]] ノード 1 / ノード 2 の HA ペアにポートと LIF の設定情報を記録します。</block>
  <block id="4d4e0186fe4a6767fbe04fce3b401b3a" category="cell">表示する情報</block>
  <block id="79bd216cbc0f386a597365eaa04f09ac" category="cell">入力するコマンド</block>
  <block id="9e3848dac335cb237199f520c6525242" category="paragraph">シェルフ、各シェルフ内のディスク数、フラッシュストレージの詳細、メモリ、 NVRAM 、ネットワークカード</block>
  <block id="654e1d01ab7f77e6f39636c95aa8c372" category="paragraph">クラスタネットワーク LIF とノード管理 LIF</block>
  <block id="b789920aa34a06ff52a0a140eb8211ba" category="paragraph">'network interface show -role cluster, node-mgmt</block>
  <block id="1edb05285bdfcd8326cc54455703d7ec" category="paragraph">物理ポート</block>
  <block id="bcc0e5a3e08cd34e80692195d056b06d" category="paragraph">フェイルオーバーグループ</block>
  <block id="b8b0fe3149c819fa21f2a86823ef8abc" category="paragraph">clusterwide 以外のフェイルオーバーグループの名前とポートを記録します。</block>
  <block id="e7462d2e6e123bc7d973071af507af96" category="paragraph">VLAN の設定</block>
  <block id="e8b11d1241a22730e9b7b2847fce1105" category="paragraph">各ネットワークポートと VLAN ID のペアを記録します。</block>
  <block id="7313f6357960954d1290c9360512a59f" category="paragraph">インターフェイスグループの設定</block>
  <block id="61d37f34e493a0639bf5de53ed879037" category="paragraph">インターフェイスグループの名前と割り当てられているポートを記録します。</block>
  <block id="e4fba9d169fb5edb171e52cb71d98ff6" category="paragraph">ブロードキャストドメイン</block>
  <block id="4c9d53b2ac777e0e1e7588f7fa1bc00c" category="paragraph">IPspace 情報</block>
  <block id="f4e3ea14a86c053c771cffad27e184f6" category="paragraph">network ipspace show</block>
  <block id="a6d12afddb580faaf04d9a073325f914" category="paragraph">* FAS2200 、 FAS2500 、 FAS3200 、 FAS6200 、 FAS/AFF8000 シリーズシステム *</block>
  <block id="724182e8d5c3b1bb2c819f46951a63be" category="paragraph">「 ONTAP_version_image.tgz 」ファイルの内容をターゲットディレクトリ「 tar -zxvf ONTAP_version_image.tgz 」に展開します</block>
  <block id="6495df55b307404a4ea0b4f64a7ae26a" category="paragraph">* 注： Windows で内容を展開する場合は、 7-Zip または WinRAR を使用してネットブート・イメージを展開します。</block>
  <block id="da18433407867d03800be7785b789106" category="paragraph">ディレクトリの一覧には、カーネル・ファイル「 netboot/ kernel 」を含むネットブート・フォルダが含まれている必要があります</block>
  <block id="339dbbf2e3919abe2381758c4b54e24c" category="paragraph">* その他すべてのシステム *</block>
  <block id="21694d70fa63b61a0a68e7a39cc96e19" category="paragraph">ディレクトリの一覧に次のファイルが表示されます。</block>
  <block id="00296cd0500c321060de54661554739a" category="paragraph">「 ONTAP_version_image.tgz 」</block>
  <block id="0caecd7c9276edc19599cb97a20eac4d" category="admonition">「 ONTAP_version_image.tgz 」ファイルの内容を抽出する必要はありません。</block>
  <block id="c9b87fd8826330d02eb0f7e03c49023c" category="summary">ボリュームを移動することでアップグレードの手順を完了するには、サービスプロセッサ \ （ sp\ ）を設定し、新しいライセンスをインストールし、 AutoSupport をセットアップする必要があります。また、ストレージまたはボリュームの暗号化を設定し、 FC ポートまたは NCA ポートを設定する必要がある場合もあります。</block>
  <block id="d01decedde31fd5fc9aee34a816e3a84" category="paragraph">「 system node AutoSupport invoke -node node_name -type all -message 」 node_name が platform_old から platform_new にアップグレードされました</block>
  <block id="12ab5d791aa13f19bff0271520c8fa20" category="list-text">新しいノードに FC ポート（オンボードまたは FC アダプタ上）、オンボード CNA ポート、または CNA カードがある場合は、 FC ポートまたは CNA ポートを設定し、ストレージシステムプロンプトから次のコマンドを入力します。</block>
  <block id="533d1f26c154725c9c91afdd1b89aaa4" category="list-text">[ インストール済みシステム ] ページで、フォームに古いシステムのシリアル番号を入力し、 [* Go!] をクリックします</block>
  <block id="44e9f0c666ea054f51421040e37dee98" category="summary">元のノードからボリュームを移動したら、 SAN 以外のデータ LIF とクラスタ管理 LIF を元のノードから新しいノードに移行する必要があります。</block>
  <block id="7d0330f92f5b6340af08f88bf712e687" category="doc">SAN 以外のデータ LIF とクラスタ管理 LIF を新しいノードに移動します</block>
  <block id="87375b5769d5bc8e37ee39d964c25804" category="paragraph">VMware vStorage APIs for Array Integration （ VAAI ）でコピーオフロード処理に使用されている LIF を移行することはできません。</block>
  <block id="d079690ef04f3c3ab2f4e91b5f28e90b" category="list-text">クラスタ LIF がホストされているノードから、 SAN 以外のデータ LIF のホームポートを元のノードから新しいノードに変更します。</block>
  <block id="fc522dd9612f86c0ea7c802be05de893" category="cell">移行する項目</block>
  <block id="1d073f20d5a5045e1aa3afacf792bf7c" category="cell">入力するコマンド</block>
  <block id="0a4bc8aea04444e0f2b960facbd686f4" category="paragraph">特定の LIF</block>
  <block id="fb465127c12aa152a3a6787bc1358040" category="paragraph">SAN 以外のすべてのデータ LIF とクラスタ管理 LIF</block>
  <block id="8d4031ef52b7ff00f19077a56df4c26e" category="paragraph">次のコマンドは、 SVM 「 vs0 」の「 datalif1 」という名前の LIF を「 node0b 」のポート「 e0d 」に移行します。</block>
  <block id="44807f621f3e0960500d7db205f07c8e" category="paragraph">次に、現在の（ローカル）ノードからすべてのデータ LIF とクラスタ管理 LIF を移行するコマンドを示します。</block>
  <block id="08784f3476a94c005c9ffbca34e62ce0" category="list-text">クラスタ管理 LIF のホームノードが元のいずれかのノードにあるかどうかを確認します。「 network interface show -lif cluster_mgmt -fields home-node</block>
  <block id="68c8a99bc9172a87f6301c02d55008f8" category="list-text">クラスタ管理 LIF のホームノードが元のいずれかのノードにある場合は、次の手順を実行します。</block>
  <block id="a7d2bd92477c7708999d89fc281f2cfb" category="list-text">クラスタ管理 LIF のホームノードを新しいノードの 1 つに切り替えます。</block>
  <block id="038faacffbd9c39ca68e42dccdbe915f" category="list-text">クラスタ管理 LIF を新しいノードの 1 つに移行します。</block>
  <block id="f6feea768bbf907f8918a30130dc7d38" category="summary">診断の実行後、コントローラモジュールのストレージとネットワークを再度ケーブル接続する必要があります。</block>
  <block id="ea122bb8fa70f0ea4b180db441cf1abd" category="doc">システムにケーブルを再接続</block>
  <block id="3c0c8efee11cd7a51266228208ce0a13" category="paragraph">診断の実行後、コントローラモジュールのストレージとネットワークを再度ケーブル接続する必要があります。</block>
  <block id="d0b16eb1b162f9fb3ef65f59b13902e7" category="list-text">システムにケーブルを再接続します。</block>
  <block id="4ba20dd7668682720b8eed837f2ea1a8" category="list-text">Config Advisor を使用して、ケーブル接続が正しいことを確認します。</block>
  <block id="eea0c04ed0e3acb7893e5192e1e8223d" category="list-text">ネットアップサポートサイトから Config Advisor をダウンロードしてインストールします。</block>
  <block id="0373910e51252c7b97dcbea9f4942604" category="inline-link">mysupport.netapp.com</block>
  <block id="31509d9d2ecd7357c2d79b6100170edf" category="paragraph"><block ref="31509d9d2ecd7357c2d79b6100170edf" category="inline-link-rx"></block></block>
  <block id="d1bb82954c2ac129418d4ca65eb100d5" category="list-text">ターゲット・システムの情報を入力し '[* データ収集 ] をクリックします</block>
  <block id="6361d7cb04e4c3f294b622b2cc3e87a0" category="list-text">[*Cabling *] タブをクリックし ' 出力を確認します</block>
  <block id="e322e9be3fd030740b4239a7bfbeed70" category="paragraph">すべてのディスクシェルフが表示されていること、およびすべてのディスクが出力に表示されていることを確認し、ケーブル接続に関する問題が見つかった場合は修正します。</block>
  <block id="2d46bc00fe1306e504816e238db01e8e" category="list-text">該当するタブをクリックして他のケーブル接続を確認し、 Config Advisor からの出力を確認します。</block>
  <block id="1e9be7aa46166eca7db0fc1c4e7a887b" category="paragraph">これらの手順は、 node3 と node4 で実行する必要があります。</block>
  <block id="7f0307060728fe46960f5901c576848b" category="admonition">次のコマンド例では、「 node1 」と呼んでいます。この段階で手順の交換用ノード「 node3 」と「 node4 」の名前は実際には「 node1 」と「 node2 」です。</block>
  <block id="49b95b3a1c8fd0bd354de5fc2ec2b96e" category="list-text">ONTAP 9.7 以前を実行しているシステムの場合は、 * stop * と入力します。の手順を使用する必要があります <block ref="02cafea91ec73e57361f0e2559069996" category="inline-xref-macro-rx"></block>。</block>
  <block id="4fb89fe4ba344b621e7afe206f6a8a4e" category="list-text">次の変更を行います。</block>
  <block id="757ee83d9d913287174eb13a32791a9a" category="list-text">node3 と node4 にまだログインしていない場合は、ブートしてログインします。</block>
  <block id="488704cff7055e0adb667e6434ad04b5" category="list-text">クラスタブロードキャストドメインに追加するポートを変更します。</block>
  <block id="1d79ea5a41dff0854a82efdbcdb2f72d" category="paragraph">次の例では 'node1' に 'Cluster' port e1b を追加します</block>
  <block id="44cfd5499c1c5e138a09d952646d13a0" category="paragraph">network port modify -node node1 -port e1b -ipspace Cluster -mtu 9000`</block>
  <block id="112d21318dcb3758e7fe3f932ebc36f5" category="paragraph">すべてのクラスタ LIF が移行され、クラスタ通信が確立されたら、クラスタがクォーラムに参加する必要があります。</block>
  <block id="f8c4e1930d2ec49e8149c2e48e43d636" category="list-text">クラスタ LIF のホームポートを変更します。</block>
  <block id="1e746213020788bee82da3b663d9a8c9" category="list-text">'Cluster' ブロードキャスト・ドメインから古いポートを削除します</block>
  <block id="c59ee067f1e2a7f5c083dccd15039be2" category="list-text">node3 と node4 の健全性状態を表示します。</block>
  <block id="2e2786810124b219ec88817aab856aed" category="list-text">すべてのポートの到達可能性ステータスを表示します。</block>
  <block id="339d7d0493d7df43c35e2a1d483c9cba" category="list-text">物理ポートと VLAN ポートの到達可能性を修復するには、各ポートで次のコマンドを 1 つずつ実行します。</block>
  <block id="8c40a77b34a5d773edb70494e7f10d84" category="paragraph">次のような警告が表示されます。「 y 」または「 n 」を確認し、必要に応じて入力します。</block>
  <block id="1708f24291e02d5444d943fd9a4a384c" category="list-text">クラスタのすべてのブロードキャストドメインを一覧表示します。</block>
  <block id="7b4ead482f6c92170f4c6bef96fe284b" category="list-text">到達可能性の修復が実行されると、 ONTAP は正しいブロードキャストドメインにポートを配置しようとします。ただし、ポートの到達可能性を特定できず、既存のブロードキャストドメインに対応していない場合は、 ONTAP によってそれらのポート用の新しいブロードキャストドメインが作成されます。すべてのメンバーポートがインターフェイスグループのメンバーポートになる場合は、必要に応じて、新しく作成したブロードキャストドメインを削除できます。ブロードキャストドメインを削除する</block>
  <block id="991ac44bc0f4b09cc233a9a79f867f55" category="list-text">インターフェイスグループの設定を確認し、必要に応じてメンバーポートを追加または削除します。インターフェイスグループポートにメンバーポートを追加します。</block>
  <block id="6d260ed9cb63935d4eff6ef0cbc812bc" category="paragraph">インターフェイスグループポートからメンバーポートを削除します。</block>
  <block id="c99cfb03dbd1f20e150b31f5f9c7e297" category="list-text">必要に応じて VLAN ポートを削除し、再作成します。VLAN ポートを削除します。</block>
  <block id="77fd7c219c7b6d2330906a24cbb05d97" category="paragraph">VLAN ポートを作成します。</block>
  <block id="244220515525d7bbce7364431256c704" category="admonition">アップグレードするシステムのネットワーク構成の複雑さによっては、手順 5 、手順（ a ）から（ g ）を繰り返して、必要に応じてすべてのポートを正しく配置する必要があります。</block>
  <block id="ea655de7a1937b3e3b33b8a800b7cb49" category="list-text">取り外された VLAN を表示します。</block>
  <block id="472aa5d8ae9d1d5726cc523100b48335" category="list-text">取り外した VLAN を目的の宛先ポートに復元します。</block>
  <block id="0bb998238231c13a494cdbd3689c6d25" category="list-text">すべての取り外された VLAN が復元されたことを確認します。</block>
  <block id="47520b16706f00daa0983c140c0ad715" category="list-text">VLAN は、作成後約 1 分後に適切なブロードキャストドメインに自動的に配置されます。リストアした VLAN が適切なブロードキャストドメインに配置されていることを確認します。</block>
  <block id="5f8dfcaae8cea23af1ab8bab1c7c23ad" category="list-text">ホームポートの LIF が別のノードに移動されたか、すでに存在していない可能性がある LIF を表示します。</block>
  <block id="5f6447c81c91c2a68fcce7c90bfd253a" category="list-text">各 LIF のホームポートをリストアします。</block>
  <block id="25d37c99a98fed25bef30e1dc9dfbbc2" category="list-text">すべての LIF ホームポートがリストアされたことを確認します。</block>
  <block id="db548c254460f5243399043fe56f9785" category="list-text">正しいブロードキャストドメインに属するポート上ですべての LIF が意図的に稼働していることを確認します。</block>
  <block id="60b2815df1dfab3c2fb93c656ce873c2" category="list-text">管理上の理由で停止している LIF がないか確認します。</block>
  <block id="c4610b7b449885970b4973ca609dd9dd" category="list-text">変更する必要がある LIF のホームポートを変更します。</block>
  <block id="0f5308f3f4f3c464e7f648069ec71c80" category="admonition">iSCSI LIF の場合、ホームポートを変更するには LIF が管理上停止している必要があります。</block>
  <block id="7960433234d5162e1055d53630a352f5" category="list-text">ホームでない LIF をそれぞれのホームポートにリバートします。</block>
  <block id="50314d4f124e0153ee89d1686a2bc452" category="paragraph">「 network interface revert * 」の略</block>
  <block id="029d23f0db183aa13dd611784328ec8c" category="admonition">ONTAP 9.8 では、自動ポート配置機能が導入され、ハードウェアのアップグレード手順が簡略化されています。</block>
  <block id="797fc5bb1530b93a4d119b95138dc85d" category="list-text">元のノードと新しいノードに互換性があり、サポートされている。</block>
  <block id="e047dcc5ff8dd437e2b3a8e513bf32f3" category="list-text">ONTAP 9.0 以降を実行しているノードのペアを、同じリリースを実行している新しいノードのペアにアップグレードする。</block>
  <block id="afcdd6a539b6392327d97fd8eb2cd065" category="list-text">元のノードの IP アドレス、ネットワークマスク、およびゲートウェイを新しいノードで再利用する。</block>
  <block id="4fd09292f1a407286c9372555595d59c" category="list-text">ストレージまたはボリュームを移動することで、コントローラハードウェアをアップグレードすることを計画している。</block>
  <block id="4836c86a753695232f6579b2d1e052e6" category="list-text">ストレージを移動してアップグレードする場合は、停止を伴う手順を実行する準備ができている。</block>
  <block id="8cdba56188d6642a771d0c327a72af57" category="paragraph">ボリュームの移動によるアップグレードは無停止で実行できます。</block>
  <block id="56089842bd614396cfba7cdf9bb6601f" category="list-text">サポート対象モデルのノードをディスクシェルフに変換し、新しいノードに接続することを計画している。</block>
  <block id="aff7a731f5229621d23c4c3e8021e92e" category="paragraph">個々のコンポーネントを交換する場合は、そのコンポーネントのフィールド交換可能ユニット（ FRU ）のリーフレットを参照してください。</block>
  <block id="3d9010fa119828bc81f438c75af15b63" category="paragraph">ストレージを移動してコントローラハードウェアをアップグレードする手順では、元のノードは node1 と node2 に、新しいノードは node3 と node4 と呼ばれます。説明されている手順では、 node1 は node3 に置き換えられ、 node2 は node4 に置き換えられます。</block>
  <block id="e338e550ae3c8accad87f4fd0e1f2380" category="image-alt">元のノードから新しいノード</block>
  <block id="f6fd8a1858185111bbea4bb0f44e07f6" category="paragraph">node1 、 node2 、 node3 、および node4 という用語は、元のノードと新しいノードを区別するためだけに使用されます。手順を使用するときは、元のノードと新しいノードの実際の名前を置き換える必要があります。ただし実際には、ノードの名前は変更されません。 node3 には node1 という名前が付けられ、 node4 にはコントローラハードウェアのアップグレード後に node2 という名前が付けられます。</block>
  <block id="13157ca9b210750790526c100cf951d7" category="paragraph"><block ref="13157ca9b210750790526c100cf951d7" category="inline-xref-macro-rx"></block></block>
  <block id="5b3de670b2de55fec257c6f89ab421bc" category="summary">ボリュームを移動してアップグレードする場合は、元のノードを準備し、新しいノードをクラスタに追加します。ボリュームを新しいノードに移動し、 LIF を設定して、クラスタから元のノードを削除します。ボリュームの移動によるアップグレード手順は無停止で実行できます。</block>
  <block id="876fbfc42051162ba587b0a0690449f5" category="image-alt">ボリュームを移動してコントローラハードウェアをアップグレードするためのワークフロー</block>
  <block id="dee313fe9eeb0dec5f1340bd0e818631" category="list-text"><block ref="dee313fe9eeb0dec5f1340bd0e818631" category="inline-xref-macro-rx"></block></block>
  <block id="c90fa15ea4f7f1e277e469d1d20e9188" category="list-text"><block ref="c90fa15ea4f7f1e277e469d1d20e9188" category="inline-xref-macro-rx"></block></block>
  <block id="5000633fe0b5f0aa09b151f9fed8c9f2" category="list-text"><block ref="5000633fe0b5f0aa09b151f9fed8c9f2" category="inline-xref-macro-rx"></block></block>
  <block id="8829820fd8a035233c013956f191d0e7" category="list-text"><block ref="8829820fd8a035233c013956f191d0e7" category="inline-xref-macro-rx"></block></block>
  <block id="cf9dafa4aad7081e3241e5bc4acb350f" category="inline-xref-macro">クラスタから元のノードを分離</block>
  <block id="ce218642d156a102e02a50d62a3bf028" category="list-text"><block ref="ce218642d156a102e02a50d62a3bf028" category="inline-xref-macro-rx"></block></block>
  <block id="58c6b3bbc2bbb34b0e96a9731bc9133c" category="list-text"><block ref="58c6b3bbc2bbb34b0e96a9731bc9133c" category="inline-xref-macro-rx"></block></block>
  <block id="f5b49dd631a7fa0c45fc2aea8bcfa384" category="paragraph">使用している ONTAP のバージョンに対応した手順を使用する必要があります。</block>
  <block id="51bea01f527b8a0a7714408789058c6b" category="summary">元のノードをシャットダウンして削除するときは、アップグレードについての AutoSupport メッセージを送信し、メールボックスを削除し、ノードの電源をオフにして、シャーシを取り外す必要があります。</block>
  <block id="0b5874c3f69c1393f6461a11d78dfa9c" category="list-text">node1 と node2 から AutoSupport メッセージを送信し、テクニカルサポートにアップグレードについて通知します。</block>
  <block id="3173ac672a7cdfb43fd506ad10daef11" category="list-text">ノード 1 とノード 2 でハイアベイラビリティまたはストレージフェイルオーバーを無効にします。</block>
  <block id="d875f9fec183da794cd6d6245ef00d1d" category="list-text">cluster ha modify -configured false</block>
  <block id="bbe624d4e7e26aa8777e96c55a0041f3" category="paragraph">3 ノード以上のクラスタ</block>
  <block id="d74abfb55f46e179952b0f9d29ab5c58" category="list-text">ノードを停止します。</block>
  <block id="aa20c612e4b09a19b572b1a0ae5851b5" category="paragraph">リブート・プロセス中に定足数チェックを抑制するには '-ignore-quorum -warnings オプションを使用します</block>
  <block id="ef081f0763db1e61273c7141947a007f" category="list-text">[[shutdown_node_A_1 step5] - メンテナンスモードでディスク所有権情報を通じて取得された、各元のノードのシステム ID を記録します。</block>
  <block id="7692418b27cf02fad97f4990a434658d" category="paragraph">システム ID は、元のノードのディスクを新しいノードに割り当てるときに必要となります。</block>
  <block id="6ad89260dedeef1270be905e718e6682" category="list-text">FC または CNA ポートを設定している場合は、設定をメンテナンスモードで表示します。</block>
  <block id="84886c64e807dd28c16702155c350818" category="paragraph">あとで参照できるように、コマンドの出力を記録しておく必要があります。</block>
  <block id="7f7deb46e1585e846e2fd054b1b2af5a" category="paragraph">「マイボックス破壊ローカル」</block>
  <block id="280e883e4dc586328892b13e3a6a5f9d" category="paragraph">次のようなメッセージがコンソールに表示されます。</block>
  <block id="36e3bf7b64851aa82d534b6219858a39" category="list-text">次のようなプロンプトが表示されたら 'y' と入力してメールボックスを削除します</block>
  <block id="e3c00d0f293a58871853ed866dc020a2" category="list-text">ノード 1 とノード 2 の電源をオフにし、電源からケーブルを抜きます。</block>
  <block id="250a399ca40ceae22935ccb2c65facb5" category="list-text">ノード 1 とノード 2 からすべてのケーブルにラベルを付けて取り外します。</block>
  <block id="ee6adde8f8004d94fe449a931d889e98" category="list-text">ノード 1 とノード 2 を含むシャーシを取り外します。</block>
  <block id="1a8639e4c8ee9656522efd4a2b9f58d0" category="list-text">node3 と node4 をクラスタプロンプトでブートしていない場合は、それらをブートします。</block>
  <block id="4a95a6730ba2310bfeb433fbf30d8aab" category="list-text">「 Cluster 」ブロードキャストドメインに正しいポートを追加します。</block>
  <block id="48965dff18dc1b1a8625e27956a0c97b" category="paragraph">次の例では 'Cluster ポート e1b を node1 に追加します</block>
  <block id="0e515e9baf5c9c8904811cad4ca86f4a" category="list-text">LIF を 1 つずつ新しいポートに移行します。</block>
  <block id="81a582aafef39a5c34471a2df478041e" category="paragraph">SAN データ LIF は、オフラインの場合にのみ移行できます。</block>
  <block id="acb31929dc066067c0841bfad48a777b" category="list-text">新しいコントローラの物理ポート・レイアウトに合わせて、 VLAN および「 ifgrp config 」を変更します。</block>
  <block id="159c3e7b0c178674563a1589bc1f32e3" category="list-text">node3 と node4 に存在しなくなった node1 ポートと node2 ポートを削除します（ advanced 権限レベル）。</block>
  <block id="82e992dffa9a18c86087b3d3c3489290" category="list-text">ポートを含むブロードキャストドメインを表示します。</block>
  <block id="df8657642711d6967d7e6acd72cc9e97" category="list-text">必要に応じて、ブロードキャストドメインにポートを追加またはドメインから削除します。</block>
  <block id="4b84dfb5a597238ada9ab2341f5ec5c9" category="list-text">必要に応じて LIF のホームポートを変更します。</block>
  <block id="c625e6bca32182b354cc2e2ecdbbf7ec" category="paragraph">次のコマンドは、フェイルオーバーポリシーを broadcast-domain-wide に設定し、フェイルオーバーグループ「 fg1 」のポートを「 node1 」の LIF 「 data1 」のフェイルオーバーターゲットとして使用します。</block>
  <block id="f0307b0ba42c934e076f749d65448b21" category="paragraph">「 network interface modify -vserver node1 -lif data1 -failover-policy broadcast-domain-wide -failover-group fg1 」というメッセージが表示されます</block>
  <block id="baec9716e3c721b8360a740bf6d657ec" category="list-text">ノード 3 とノード 4 のネットワークポートの属性を表示します。</block>
  <block id="286fbbe010dacee8143fe129c976e8b1" category="paragraph">network port show -node node1</block>
  <block id="2055508ed7949fd5d7f5059c98af8f4f" category="paragraph">これで物理ポートのマッピングが完了しました。アップグレードを完了するには、に進みます <block ref="f1628fd5567e155c657c0c615c63b8cf" category="inline-xref-macro-rx"></block>。</block>
  <block id="161c64322f806c6fa66fcfcc4f963ca2" category="list-text">ノードをブートメニューでブートします。</block>
  <block id="17137d920db60e7b0b7bfb0be3579b56" category="list-text">ブートメニューのプロンプトで「 wipeconfig 」と入力し、 Enter キーを押します。</block>
  <block id="b14047e1956c68f095842760b1beaea2" category="paragraph">次の画面はブートメニューのプロンプトを示しています。</block>
  <block id="d4041bfba261eda3180ae9fbf6285d95" category="list-text">次のようなプロンプトが表示されたら 'yes' と入力します</block>
  <block id="8b8e41e588d3f28837be58712aeec25a" category="paragraph">システムは wipeconfig 手順を起動し、再起動します。手順が完了すると、システムはブートメニューに戻ります。</block>
  <block id="450526ff97e4fb534c60e357bc3b52a0" category="list-text">ブートメニューから 8 を入力してノードをリブートし、 AUTOBOOT 中に * Ctrl+C * を押して、 LOADER プロンプトでノードを停止します。</block>
  <block id="be560856af220999f45b0e64a842465a" category="summary">ボリュームを新しいノードに移動したら、クラスタから元のノードを削除します。ノードを削除すると、ノードの設定が消去され、すべてのディスクが初期化されます。</block>
  <block id="f61d9690213fcb44fc551adab505eb85" category="paragraph">ボリュームを新しいノードに移動したら、クラスタから元のノードを削除します。ノードを削除すると、ノードの設定が消去され、すべてのディスクが初期化されます。</block>
  <block id="72992cc1c16f1dbbbcb7cc77a55977d9" category="list-text">advanced 権限レベルに切り替えます。</block>
  <block id="dc4a67b269dfaba9479198e3f11a2a68" category="list-text">イプシロンが設定されたノードを特定します。</block>
  <block id="9f964a34bab4b3112781e0b28258f5bb" category="paragraph">次の例では、「 node0 」に現在イプシロンが設定されています。</block>
  <block id="c66d0d8c1fe1605513edaaeec7a73d16" category="list-text">元のノードのいずれかにイプシロンが設定されている場合は、別のノードにイプシロンを移動します。</block>
  <block id="91ab806eca55f1234d360a9bf96615a0" category="list-text">クラスタに残すノードから、元の各ノードをクラスタから削除します（ advanced 権限レベル）。</block>
  <block id="a38cfcfcdebdf9c05a1cd632c11918b8" category="paragraph">参加していないノードは自動的にリブートされ、ブートメニューで停止します。</block>
  <block id="7ab0d0bb58501cb25dab62cdcffddfb5" category="list-text">未参加ノードのブートメニューからオプション * （ 4 ） Clean configuration and initialize all disks * を選択して、ノードの設定を消去し、すべてのディスクを初期化します。</block>
  <block id="35c0226d4e8a9cad1a873c648504d626" category="list-text">両方のプロンプトで「 y 」と入力します。</block>
  <block id="7f1e916ec0aa6a4296149be58ba61a1b" category="list-text">クラスタにノードが 2 つしか残っていない場合は、 2 ノードクラスタのハイアベイラビリティを設定します。</block>
  <block id="c1f192f6d626bc5f27fc74b0848a1250" category="paragraph">cluster ha modify -configured true</block>
  <block id="3f1179e7186b307a8709f115c39b6447" category="summary">交換用ノードを稼働状態に戻す前に、 LIF がホームポートにあることを確認し、 AutoSupport が有効な場合は交換用ノードのシリアル番号を登録して、自動ギブバックをリセットする必要があります。</block>
  <block id="628b47858489e93aecb44f24bebc9752" category="doc">LIF を確認してシリアル番号を登録</block>
  <block id="462ec873925d8409f9ead354ff424e1b" category="list-text">論理インターフェイスがホームサーバとポートに報告されていることを確認します。「 network interface show -is-home false 」</block>
  <block id="d1197fe9a52f419575a145acccb941a2" category="paragraph">いずれかの LIF が false と表示されている場合は、ホームポートにリバートします。「 network interface revert *</block>
  <block id="bfe787834fd9e46156b1d62f2f5029f8" category="list-text">システムのシリアル番号をネットアップサポートに登録します。</block>
  <block id="bfa9de45095a3a90ebc55708a5ee6dd2" category="cell">状況</block>
  <block id="f5090af0ae9521298aea8ea3cd0e570f" category="paragraph">AutoSupport が有効になっている</block>
  <block id="494f202ae3a9c9ea2b452b55743f4c56" category="paragraph">AutoSupport メッセージを送信してシリアル番号を登録します。</block>
  <block id="f08f2281e0941651d12c9d63e01b3a7e" category="paragraph">AutoSupport が有効になっていません</block>
  <block id="8ba4d456a3db9d62662e21be8c9d6a65" category="paragraph">ネットアップサポートに連絡してシリアル番号を登録します。</block>
  <block id="073b364a34edc88074c1df13d44748dc" category="list-text">自動ギブバックを無効にした場合は、再度有効にします。「 storage failover modify -node local-auto-giveback true 」</block>
  <block id="cfc31108ced0d656186982f19a21b817" category="summary">新しいノードに内蔵ディスクまたはアドオンシェルフがシステムに接続されている場合は、コントローラのアップグレードが妨げられる可能性があります。node3 / node4 に付属した新しいディスクの所有権を削除するには、次の手順を実行します。</block>
  <block id="0384bfe1408e63aec8306b1fb36df994" category="paragraph">これらの手順は、 node3 と node4 に相互に実行します。ノードの順序は重要ではありません。</block>
  <block id="12750846be9d21d5385ed58a60cddf27" category="list-text">ノード 1 とノード 2 のシェルフは、この段階ではノード 3 とノード 4 に物理的に接続されていません。</block>
  <block id="db39a0ef5bc94a0b575d978a8f76229a" category="list-text">ディスク所有権を削除する必要があるのは、新しいコントローラが付属しているディスクとシェルフのみです。</block>
  <block id="9ec9f63f098d105f79f28fc374c9efa9" category="list-text">古いコントローラを内蔵ドライブプラットフォーム上の新しいコントローラと交換し、古いコントローラのシャーシとディスクを保持しながらハードウェアをアップグレードする場合、ディスクの所有権を削除する必要はありません。</block>
  <block id="eece111dbeb75d75a9174395ce77bfe2" category="paragraph">たとえば、古い A200 コントローラモジュールと新しい A220 コントローラモジュールを交換するだけで、古い A200 のシャーシとディスクをそのまま残して、システムを A200 から A220 にアップグレードする場合、次の手順を実行します。 新しい A220 コントローラモジュールのディスクの所有権は削除しません。このセクションの「新しいノードに接続されているディスクの所有権の削除」を参照してください。</block>
  <block id="70cb24dc68388db99857a34f097c9997" category="paragraph">コントローラのアップグレード中にディスク所有権を削除する方法について不明な点がある場合は、ネットアップテクニカルサポートにお問い合わせください。</block>
  <block id="bd6c6f37524ad70ce38bbd0fcea22fe4" category="list-text">ノードの LOADER プロンプトで、コマンドを入力します。</block>
  <block id="1d16d3ddc3b796c6db7da6cbb645757e" category="list-text">ブートメニュープロンプトで '9a' と入力して 'Enter キーを押します</block>
  <block id="8b33e54d0bef1c80ef3462386d101928" category="paragraph">次の画面はブートメニューのプロンプトを示しています。</block>
  <block id="543ee8d410a9846b897a6a8491f4e3b9" category="list-text">次のようなプロンプトが表示されたら、「 y 」と入力してディスク所有権を削除します。</block>
  <block id="d9eb47ff217ad0469ac1858d577a0cfb" category="paragraph">ディスク所有権が削除されてブートメニューに戻ります。</block>
  <block id="cfd1f1b088da29d35da848a99036f2c2" category="list-text">ブート・メニューで '5' を入力してメンテナンス・モードに切り替えます</block>
  <block id="c256ea1e274adba11cfac708ac1ca615" category="list-text">保守モードで、「 Disk show 」コマンドを実行します。</block>
  <block id="07073a18c7281a79e3145d79b79ade85" category="paragraph">表示されるディスクはないはずです。</block>
  <block id="549400d83d5a33165c1b78f09eaa13cd" category="list-text">コマンド： ' を実行します</block>
  <block id="b42167fc8c56e26bc5bde99cbcb98104" category="paragraph">「ディスクショー - A` 」</block>
  <block id="5057bd67c1c2576016193c2f0d132b9e" category="paragraph">未割り当てのディスクがすべて表示されます。</block>
  <block id="dd6fe690111683fcc32f39f51ca30885" category="summary">クラスタが SAN 環境にある場合は、元のノードから SAN LIF を削除してから、元のノードをクラスタから削除する必要があります。</block>
  <block id="94a76ebba8e86706797afe6001140741" category="list-text">iSCSI イニシエータを使用している場合は、次の手順を実行します。</block>
  <block id="9882b7407728c4a51f28a203651b752e" category="paragraph">次の例は、 SVM vs1 に接続されたアクティブなイニシエータを使用したコマンドの出力を示しています。</block>
  <block id="2a81dce4a4ecbdb4f7260dfa1838dac6" category="list-text">元のノードにログインしているイニシエータがある場合は、ホストコンピュータからセッションをログアウトします。</block>
  <block id="493c466bbc1a048411e1332636aef467" category="list-text">ポートセットリストを表示して、元のノードの iSCSI LIF または FC LIF がポートセットに属しているかどうかを確認します。</block>
  <block id="5972ec667e5c2e5cbe773b47e490a953" category="paragraph">次に、「 lun portset show 」コマンドの出力例を示します。</block>
  <block id="d69982078792402e28116b8f58d9d635" category="list-text">元のノードのいずれかの iSCSI または FC LIF がポートセットのメンバーである場合は、ポートセットから削除します。</block>
  <block id="49804bf53ebb394c1046383af76de316" category="list-text">元のノードの LIF を削除します。</block>
  <block id="58822be5f616d4235e991fbe0296fada" category="doc">node1 で所有されている NAS データ LIF を node2 に移動します</block>
  <block id="79fcafddf2ef06a07412a35db15035c1" category="list-text">次のコマンドを入力し、出力をキャプチャして、 node1 でホストされているすべての NAS データ LIF を表示します。</block>
  <block id="612e04a0c9957c7f74e9d436ac270501" category="paragraph">次の例のように、 node1 に NAS データ LIF が表示されます。</block>
  <block id="423e99aaa66fb1d5698571ceb7787197" category="cell">ノード 1 の状況</block>
  <block id="9f5a5f99675a7cf2f4c0f632bd521264" category="cell">VLAN のインターフェイスグループが設定されている</block>
  <block id="3fbab376baacaf9d09315af900da3f6a" category="cell">に進みます <block ref="73988682af36d698a9ae8b48b9a2737d" category="inline-xref-macro-rx"></block>。</block>
  <block id="e47ea6851b10e922828b9e5bacc36c92" category="cell">インターフェイスグループまたは VLAN が設定されていない</block>
  <block id="8a083d04d78f8fe76f58b24395ba2022" category="cell">手順 3 を省略して、に進みます <block ref="beab2fdc7da05fb5989bf509ea2daea5" category="inline-xref-macro-rx"></block>。</block>
  <block id="4712f9e61b86338570c118282bc641ed" category="paragraph">「 network port vlan show 」コマンドを使用して、 VLAN に接続されたネットワークポートに関する情報を表示し、「 network port ifgrp show 」コマンドを使用してポートインターフェイスグループに関する情報を表示します。</block>
  <block id="6528b79560f5ae1516e9968be210a07d" category="list-text">[man_move_lif_1_2_step3] 次の手順を実行して、 node1 のインターフェイスグループおよび VLAN でホストされている NAS データ LIF を移行します。</block>
  <block id="8bd077e3dce2f8f220ab19459980af51" category="list-text">[man_move_lif_1_2_substpa ] インターフェイスグループおよび node1 の VLAN でホストされている LIF を、インターフェイスグループと同じネットワーク上の LIF をホストできる node2 のポートに移行します。そのためには、各 LIF に対して次のコマンドを 1 回入力します。</block>
  <block id="d280fa5d8e575828d8f638790f296c00" category="inline-xref">手順 a</block>
  <block id="1628d2e876b9a7ece7457b58b454f0f8" category="list-text">で、 LIF および VLAN のホームポートとホームノードを変更します <block ref="b068a71282806dafa110a592d499562a" category="inline-xref-macro-rx"></block> LIF をホストしているポートとノードに対して次のコマンドを 1 回入力します。</block>
  <block id="086b32c6a9769e491af04f596b7bfca4" category="list-text">[man_move_lif_1_2_step4] 次のいずれかの操作を実行します</block>
  <block id="9b9179b830c575fb1e672a3bed56f248" category="cell">クラスタの設定対象</block>
  <block id="c07ee5debf5f3a3fef16c1ee5e8e4942" category="cell">NAS</block>
  <block id="9db3a11cc23080bb3486b4959df93f89" category="cell">- 完了しました <block ref="6be540ebb4740a88748088c797e28dfb" category="inline-xref-macro-rx"></block> から <block ref="8c4818d75222cc6bc9243f323ca4103f" category="inline-xref-macro-rx"></block>。</block>
  <block id="edb9ff92dd35aa076c32a5b0487cf528" category="list-text">[[man_move_lif_1_2_step5] 各データ LIF に対して次のコマンドを 1 回入力して、 NAS データ LIF を node1 から node2 に移行します。</block>
  <block id="011613a251d2244827057c36e226c438" category="list-text">[[step6] ] 次のコマンドを入力し、その出力を調べて、 LIF が正しいポートに移動されていること、およびいずれかのノードで次のコマンドを入力して LIF のステータスが up になっていることを確認します。</block>
  <block id="0ca2ea33efb8a577e5384d4a18adcffd" category="list-text">[[step7] 次のコマンドを入力して、移行された LIF のホームノードを変更します。</block>
  <block id="54c8107ec5763757535759e84fcccba4" category="inline-xref">手順 9</block>
  <block id="24a01d225f607904f05ab3a7a5eff1be" category="list-text">[man_move_lif_1_2_step8] LIF がホームまたは現在のポートとして使用しているかどうかを確認しますポートがホームでない場合や現在のポートでない場合は、に進みます <block ref="ba7153f88da2aa27ea58156672491fe1" category="inline-xref-macro-rx"></block>：</block>
  <block id="2a1a5d0b34f7d2f4f340e16e5ed9d90a" category="list-text">[man_move_lif_1_2_step9] LIF がホームポートまたは現在のポートとしてポートを使用している場合は、別のポートを使用するように LIF を変更します。</block>
  <block id="cdae0f8302333cbd9fe195bb2499a162" category="list-text">[[step10] ] 現在ホストしているデータ LIF をホストしているポートが新しいハードウェアに存在しないようにする場合は、すぐにブロードキャストドメインから削除します。</block>
  <block id="6632ea124419e4975a848a28ab279bcc" category="list-text">[[step11]] いずれかの LIF が停止している場合は、各 LIF に対して次のコマンドを 1 回入力して、 LIF の管理ステータスを「 up 」に設定します。</block>
  <block id="1f6fa329d299f0b4d14f73ea128a6b26" category="list-text">[[step12]] 次のコマンドを入力し、その出力を調べて、 node1 にデータ LIF が残っていないことを確認します。</block>
  <block id="317d3198e2e906761f5856d7e9ba7889" category="list-text">[[step13]] インターフェイスグループまたは VLAN が設定されている場合は、次の手順を実行します。</block>
  <block id="44a1dd334ad3ac6220ea0adf17519961" category="list-text">V シリーズシステム、またはストレージアレイに接続された FlexArray 仮想化ソフトウェアを使用するシステムをアップグレードする場合は、を完了する必要があります <block ref="a48f24f7fd083b3ec1c1fb7f5bee1e25" category="inline-xref-macro-rx"></block> から <block ref="23a128901edc6abd74721071977e73e9" category="inline-xref-macro-rx"></block>をクリックします <block ref="4b3dcb4f5ad67f2f001c91135169a837" category="inline-xref-macro-rx"></block> およびの手順に従ってください <block ref="488c6e462745f03d8c1dfb3ba61f7258" category="inline-link-macro-rx"></block> 必要に応じて、メンテナンスモードでコマンドを入力します。その後、このセクションに戻って手順を再開する必要があります <block ref="9b924d5c1ba14dd46bf7c40da5a15e7c" category="inline-xref-macro-rx"></block>。</block>
  <block id="78b1d5bad885b3107f106e5d1a9b18ec" category="list-text">ただし、ストレージディスクが搭載されたシステムをアップグレードする場合は、このセクション全体を完了してから、セクションに進んでください <block ref="488c6e462745f03d8c1dfb3ba61f7258" category="inline-link-macro-rx"></block>クラスタ・プロンプトでコマンドを入力します。</block>
  <block id="bdb96da2d8e74dfce89eef174e77991a" category="list-text">[[man_install4_Step1] 次のいずれかの操作を行います。</block>
  <block id="668ee630125cb736935532180dec5496" category="cell">ノード 4 の配置先</block>
  <block id="162e71035e50cc882a8bc6f9ff5b49f2" category="cell">ノード 3 とは別のシャーシ</block>
  <block id="fd915b6d9d7d8df5863bf1a398fcf38a" category="cell">に進みます <block ref="5da993404245519b124ccd5cfdc8f96e" category="inline-xref-macro-rx"></block>。</block>
  <block id="517089a54c66f01f0ee8cb8683dad1ec" category="cell">同じシャーシを node3 と一緒に配置する</block>
  <block id="9a56a499535dc46c81b504689b6f1584" category="cell">手順 2 と 3 を省略して、に進みます <block ref="d70dd93eaf2d4e4f4bee874c28b01d22" category="inline-xref-macro-rx"></block>。</block>
  <block id="409539264ec665ff1676a423db4f5983" category="list-text">[[man_install4_Step2]] ノード 4 に十分なラックスペースがあることを確認します。</block>
  <block id="b8b0bf4a502958083dc62a5c96442944" category="paragraph">node4 と node3 が別々のシャーシにある場合は、 node4 を node2 と同じ場所に配置できます。node3 と node4 が同じシャーシにある場合は、 node4 が適切なラックの場所にすでに存在しているとします。</block>
  <block id="b2a26edcdea9e0bc9d1a1f149aaa56af" category="list-text">[[man_install4_Step4]] ケーブルノード 4 を接続し、ノード 2 からノード 4 に接続を移動します。</block>
  <block id="9f13bb9f267a0b057f115598b95b4a04" category="paragraph">次の参考資料は、適切なケーブル接続を行う場合に役立ちます。に進みます <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックしてリンクします。</block>
  <block id="19c5c8c6d8397114c1994a6c3eb88f1f" category="paragraph">次の配線を行います。</block>
  <block id="6b3c36f97ba6ae6e5b790f8c06f76595" category="admonition">ほとんどのプラットフォームモデルには一意のインターコネクトカードモデルがあるため、インターコネクトカード / FC-VI カードまたはインターコネクト / FC-VI ケーブルの接続を node2 から node4 に移動する必要はありません。</block>
  <block id="7c6dcbfbd814e3914af912fc227236db" category="cell">ノード 4 の構成</block>
  <block id="0eac7849b27808b92dfd85fd93d5adf9" category="cell">ノード 3 と同じシャーシ</block>
  <block id="ebfef1d5b820c6361e45e99afc605aff" category="cell">に進みます <block ref="4b3dcb4f5ad67f2f001c91135169a837" category="inline-xref-macro-rx"></block>。</block>
  <block id="23651fb868295760fbf6e0040b0debb0" category="cell">に進みます <block ref="38932d9b2776291a7bec718b723ae495" category="inline-xref-macro-rx"></block>。</block>
  <block id="84857d961b292bb9faee31d20a2e4320" category="list-text">[man_install4_Step6]] ノード 4 の電源をオンにし 'Ctrl+C キーを押してブートを中断してブート環境プロンプトにアクセスします</block>
  <block id="2533698a45ba6cab05df3bd9337b544f" category="admonition">node4 をブートすると、次のメッセージが表示される場合があります。</block>
  <block id="6904f97422da010c9982167637cc6d56" category="list-text">[[man_install4_Step7] ステップ 6 で警告メッセージが表示された場合は、次の操作を実行します。</block>
  <block id="abb5e8621f032d746c9aa9b35f472595" category="list-text">NVRAM バッテリ低下以外の問題を示すコンソールメッセージがないか確認し、必要に応じて対処します。</block>
  <block id="8ece0169cd074b513037985b1656b1cd" category="list-text">バッテリの充電と起動プロセスが完了するまで待ちます。</block>
  <block id="30567eb6dc573926907b3bb63db7137a" category="admonition">* 警告 : 遅延を上書きしないでください。バッテリーの充電に失敗すると、データが失われる可能性があります。 *</block>
  <block id="945c73c9ea193c92dd8b512126669f13" category="list-text">[[man_install4_Step8] 次のいずれかの操作を行います。</block>
  <block id="fb89a7ef586904dc37e09f10f3f0ec64" category="inline-xref">手順 15</block>
  <block id="a2a7998a5450e891bb5464c1204815d8" category="cell">手順 9 から 14 を省略して、に進みます <block ref="5c1f19cc6cb716956fba505fb903a21f" category="inline-xref-macro-rx"></block>。</block>
  <block id="0366496afb0bd008f8fb19b74f53ec71" category="inline-link-macro">ノード 4 の FC ポートを設定します</block>
  <block id="7973536954a566dd7a59dc4fa1580481" category="list-text">node4 の FC または UTA / UTA2 設定のセクションに移動し、セクションの作業を行います <block ref="5dc4a26bdcd4279b0919835bab13d0db" category="inline-link-macro-rx"></block> および <block ref="b0f6547feb9924da912bf4fa3357e2fc" category="inline-link-macro-rx"></block>必要に応じて、システムに適用されます。</block>
  <block id="f01b0d07fd3bcdce42fd5cf6a8f46551" category="list-text">このセクションに戻って、から始めて残りの手順を実行します <block ref="9b924d5c1ba14dd46bf7c40da5a15e7c" category="inline-xref-macro-rx"></block>。</block>
  <block id="562a6369849944020611b8a9540b9c5c" category="list-text">[[man_install4_Step9] 新しいノードの FC イニシエータポートをスイッチゾーンに追加します。</block>
  <block id="a68de9b3c6fcb14f9c96b6e558ca71f8" category="list-text">ストレージアレイ上のアレイ LUN に関連付けられたホストまたはボリュームグループの World Wide Port Name （ WWPN ；ワールドワイドポート名）値を変更する。</block>
  <block id="1ad5461b16a79391d48cbca2383e0c9e" category="list-text">次のコマンドを入力し、出力を調べて、アレイ LUN が node4 に認識されていることを確認します。</block>
  <block id="6b3585cc5d8743bbae5204f3097641c4" category="paragraph">「 sysconfig -v 」を使用します</block>
  <block id="134f75a624b82855271656ebc0cf2d5f" category="paragraph">各 FC イニシエータポートで認識されるすべてのアレイ LUN が表示されます。アレイ LUN が表示されない場合は、このセクションの後半で node2 から node4 にディスクを再割り当てすることはできません。</block>
  <block id="05ecdb384acc604bb6388efe9a979597" category="list-text">Ctrl キーを押しながら C キーを押して ' ブート・メニューを表示し ' メンテナンス・モードを選択します</block>
  <block id="a2835e58397213dc9bedb9afe05d29d2" category="list-text">[[man_install4_Step15]] メンテナンスモードのプロンプトで、次のコマンドを入力します。</block>
  <block id="2f31b93de57cc6e92ee38aaed9b49765" category="paragraph">ブート環境プロンプトが表示されます。</block>
  <block id="9b30a77b62fcc76d557f789dd6ce3167" category="list-text">ONTAP のノード 4 を設定します。</block>
  <block id="c769624c49a19cf249ae2dabe50fafd5" category="list-text">ノード 4 にインストールされている ONTAP のバージョンが node2 にインストールされている ONTAP 9 と同じかそれ以降の場合は、次のコマンドを入力します。</block>
  <block id="648ad8a1b1818127b7b933420429d236" category="cell">アップグレードするシステム</block>
  <block id="bd525e59dc1c481092f22bdaeff4a9cb" category="cell">ノード 4 に正しい ONTAP バージョンまたは現在の バージョンがない</block>
  <block id="d4d1f4ca7806007366aa98184f062124" category="inline-xref">手順 20</block>
  <block id="642ae729bd75051692412fd6ebaf2526" category="cell">に進みます <block ref="1fde564298826640b3bacb4260e3eaea" category="inline-xref-macro-rx"></block>。</block>
  <block id="9b66895c756fece1df6c42e12763649b" category="cell">ノード 4 の ONTAP のバージョンが正しいか、最新のバージョンであることが必要です</block>
  <block id="7769822edfc550f3ba37429715882554" category="inline-xref">手順 25</block>
  <block id="107c908e64ebe1cdac15562994203122" category="cell">に進みます <block ref="aadd3e12a76cc16c765ef6c4ab9ed890" category="inline-xref-macro-rx"></block>。</block>
  <block id="76b2a354a862c0069407c912fb51ee50" category="list-text">[[man_install4_Step20]] 次のいずれかの操作を選択して、ネットブート接続を設定します。</block>
  <block id="a1e9c2458084c8aed432506005e0789e" category="cell">netboot\http://web_server_ip/path_to_webaccessible_directory/netboot/kernel`</block>
  <block id="7e0c898eb7a2157f9a4fe767ff353ea1" category="cell">netboot\http://web_server_ip/path_to_webaccessible_directory/ontap_version_image.tgz`</block>
  <block id="feed6e71880a4cdb6f484b72b59ad1c7" category="paragraph">「 path_to_the_web-accessible_directory 」は、「 ONTAP_version_image.tgz 」をダウンロードした場所を指します <block ref="d7ca8bd1bdacba48998a89c59527e756" category="inline-link-macro-rx"></block> の項で、 netboot_ の準備を参照してください。</block>
  <block id="309791cba48d347af2b367032b3dd97b" category="list-text">起動メニューから 'option(7) Install new software first ’を選択します</block>
  <block id="0b2229e3a518ca5320ae9e1f22775ad9" category="paragraph">このメニューオプションを選択すると、新しい Data ONTAP イメージがブートデバイスにダウンロードおよびインストールされます。</block>
  <block id="c0c1ca8a9ddeae72e1e2be38243a2522" category="paragraph">次のメッセージは無視してください。</block>
  <block id="52e732ba64db04aee6e7ad74ff701940" category="paragraph">コントローラのアップグレードではなく、 Data ONTAP による環境の無停止アップグレードも記録されています。</block>
  <block id="3649c3b28305249c1b3207c6087eaedc" category="list-text">[man_install4_step23]] 手順を続行するかどうかを確認するメッセージが表示されたら、 y を入力します。パッケージの入力を求められたら、次の URL を入力します。</block>
  <block id="ad4f522a516d9a5742a3b1abdd5d7e77" category="paragraph">http://web_server_ip/path_to_web-accessible_directory/ontap_version_image.tgz` にアクセスします</block>
  <block id="3678fe02acf5ec3ff8f4fbebc3fd7a4d" category="list-text">次の手順を実行します。</block>
  <block id="037fcad07615e2da823be3a48a35cfb8" category="paragraph">コントローラモジュールはリブートしますが、ブートメニューで停止します。これは、ブートデバイスが再フォーマットされたことにより、構成データのリストアが必要なためです。</block>
  <block id="212239c0a7a5196ffbd8cc3895cfce05" category="list-text">[man_install4_Step25]] ブートメニューからメンテナンスモード「 5 」を選択し ' ブートを続行するように求められたら 'y' を入力します</block>
  <block id="88dd4b794782fce5edb7683e13199311" category="list-text">[[man_install4_Step26]] 続行する前に、に進みます <block ref="488c6e462745f03d8c1dfb3ba61f7258" category="inline-link-macro-rx"></block> ノードの FC ポートまたは UTA / UTA2 ポートに必要な変更を加えるため。これらのセクションで推奨される変更を行ってからノードをリブートし、メンテナンスモードに切り替えます。</block>
  <block id="7e3544f15733cd05bc2830419b4be7f9" category="list-text">次のコマンドを入力し、出力を調べて node4 のシステム ID を特定します。</block>
  <block id="4e974a66c77c6d900d32abc8f0338440" category="paragraph">次の例に示すように、ノードのシステム ID 、およびそのディスクに関する情報が表示されます。</block>
  <block id="fae986fa29654ebe6966932d05eb132d" category="inline-link-macro">ルート以外のアグリゲートを node2 から node3 に再配置します。</block>
  <block id="6ebd270373edc34882879e2c2ed9e67b" category="list-text">ノード 2 のスペア、ルートに属するディスク、および前のセクションでノード 3 に再配置されなかったルート以外のアグリゲートを再割り当てします <block ref="2eb3ddacc3cdbca929068de80db9b0b7" category="inline-link-macro-rx"></block>：</block>
  <block id="f6083059f6516202ed7ac1092bed861b" category="cell">ディスクタイプ</block>
  <block id="65f83791dfc3308f8c98325d44977d10" category="cell">実行するコマンド</block>
  <block id="8e209d660098d73b07642a1950888f1d" category="cell">共有ディスクの場合</block>
  <block id="567c7db5eb132ed0419b894d763f1872" category="cell">共有なし</block>
  <block id="b95982609bcaa66a9948629f87fe8589" category="inline-link-macro">手順 10</block>
  <block id="2e55dc5dee1972467c8f86adee9b26a8" category="admonition">-p オプションは ' 共有ディスクが存在する場合にのみ保守モードで必要です</block>
  <block id="6a76a1a5611a7cd78d175bb62eecc5c0" category="paragraph">次のメッセージが表示されます。</block>
  <block id="685b8dfe5883c0cc4f183236c52e6cdd" category="paragraph">ディスクの再割り当てを中止するかどうかを尋ねられたら 'n' を入力します</block>
  <block id="c8baecc7560f46020b0d73d658566eab" category="paragraph">ディスクの再割り当てを中止するように求められた場合は、次の手順に従って一連のプロンプトを回答に出力する必要があります。</block>
  <block id="906012ab50dee220a65fb1458eb58128" category="list-text">ディスク所有権の更新を許可するには 'y' を入力します</block>
  <block id="81d274af1a54983c64b259dfc78b1c9f" category="admonition">* 警告：次の手順を記載された順序で実行する必要があります。正しく実行しないと、原因が停止したり、データが失われたりする可能性があります。 *</block>
  <block id="1ca7ffcdba47b0e1e7fe67ed3e918c17" category="list-text">node2 アグリゲートの全体的なステータスを確認します。</block>
  <block id="9cf332fc3e49cdbc8c4e5181c30ae161" category="list-text">次のコマンドを入力し、出力を確認して、コントローラとシャーシが「 ha 」として設定されていることを確認します。</block>
  <block id="af2a502808ef81f73370e9e64784659d" category="paragraph">システムは、 HA ペア構成かスタンドアロン構成かを PROM に記録します。状態は、スタンドアロンシステムまたは HA ペア内のすべてのコンポーネントで同じである必要があります。</block>
  <block id="92435116502eec5121875eb86e01c666" category="paragraph">コントローラとシャーシが「 ha 」として設定されていない場合は、次のコマンドを使用して設定を修正します。</block>
  <block id="2e89fd69efdc517bb6463b3444e009df" category="paragraph">「 ha-config modify chassis ha 」を参照してください。</block>
  <block id="efa973aed3146abf01226e85a9e5f816" category="paragraph">MetroCluster 構成を使用している場合は、次のコマンドを使用して設定を修正します。</block>
  <block id="27dae2ee8e632216c89579f651774f45" category="paragraph">「 ha-config modify chassis mcc 」</block>
  <block id="79d038b849b0e37c67ee77c0b56d066f" category="list-text">node4 にあるメールボックスを破棄します。</block>
  <block id="953d8f613cc775b0d7904f99aec7a052" category="list-text">ノード 3 で、システムの日付、時刻、およびタイムゾーンを確認します。</block>
  <block id="e3f03a007dc36d2b8067017bfe222275" category="list-text">ノード 4 で、ブート環境プロンプトの日付を確認します。</block>
  <block id="02bb70865b20c57eb319b73c84b5fd7f" category="list-text">ノード 4 で、ブート環境プロンプトの時刻を確認します。</block>
  <block id="6f690bd73c9853fafd7c1e4456ccea21" category="inline-xref">手順 26</block>
  <block id="c73ed66a3414025099d74b00d7536036" category="list-text">パートナーシステム ID が、に示すように正しく設定されていることを確認します <block ref="6f4b83e10b4758eab71105c01c130b34" category="inline-xref-macro-rx"></block> オプション（ Option ）の下。</block>
  <block id="0f463f9540d67b2794aa78893f83b8aa" category="list-text">ブート環境プロンプトでブートメニューを入力します。</block>
  <block id="ca0b24352c36c0cc73393a18e38ead22" category="list-text">ブート・メニューで ' プロンプトに「 6 」と入力して 'Option *(6) Update flash from backup config * を選択します</block>
  <block id="23fc33b520f7242c5f2fb610689e9e8c" category="list-text">プロンプトで「 y 」と入力します。</block>
  <block id="d9f991b0b3aa3c03080efb5d84a35c57" category="paragraph">ブートが正常に続行され、システム ID の不一致を確認するように求められます。</block>
  <block id="88d91937c0736919ae3483a3cb1e1f7e" category="admonition">不一致の警告が表示される前にシステムが 2 回リブートする可能性があります。</block>
  <block id="c3a51f505b0a44650db3707558ddeefc" category="list-text">不一致を確認します。正常にブートする前に、ノードの 1 回のリブートが完了することがあります。</block>
  <block id="cc7dd78f409b3f942015e8a65f2c11e8" category="list-text">ノード 4 にログインします。</block>
  <block id="530a7a6682d1262288d095a4aa2ae42b" category="summary">ARL のアップグレードワークフロー</block>
  <block id="1952abc535fabeeeed9743b9b39b5e18" category="paragraph">次の図は、手順の各ステージを示しています。濃い薄いグレーの矢印はアグリゲートの再配置と LIF の移動を表し、薄い黒い矢印は元のノードの削除を表します。元のノードは小規模なコントローライメージで表しており、大規模なコントローライメージが新しいノードを表しています。</block>
  <block id="5191d5caf73991c5e6249017d138d1c4" category="inline-image-macro">ARL 手順の各ステージを示す図</block>
  <block id="259768fa3d43366eeb4e13b056365613" category="paragraph"><block ref="259768fa3d43366eeb4e13b056365613" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7b943baeaf962c0831949aad447620ea" category="paragraph">次の表に、各フェーズで実行するタスクの概要と、そのフェーズの最後で実行したアグリゲートの所有権の状態を示します。詳細な手順については、手順の後半で説明します。</block>
  <block id="b72f5020c23dbd9ffc6d4450f84ec5f3" category="cell">ステージ 1 ：アップグレードの準備</block>
  <block id="c315bb47606529cfc4eee6fee9473961" category="cell">ステージ 2 ： node1 を廃棄する</block>
  <block id="131c1215f55f2db7a9cee6671cd5a15c" category="list-text">node1 は、 node1 アグリゲートのホーム所有者です。</block>
  <block id="34c13ce480fd28c643a03477e436ea69" category="cell">ステージ 3 ：ノード 3 をインストールしてブートします</block>
  <block id="6bcc99fe1628db9ec14216040c21696b" category="list-text">node2 は node2 アグリゲートのホーム所有者ですが、現在の所有者ではありません。</block>
  <block id="96823812e251fed8294451535c6f95b0" category="list-text">node3 は、 node1 にもともと属していたアグリゲートのホーム所有者および現在の所有者です。</block>
  <block id="118095c680df28bffff023170d56342d" category="list-text">node2 には、ホームの所有者とホームの所有者ではなく、 node2 に属するアグリゲートの現在の所有者が指定されます。</block>
  <block id="b38e1811a17ec144866f464ed239210b" category="cell">ステージ 4 ： node2 を廃棄する</block>
  <block id="fade32ca4e9efe2a0861758d027705e9" category="paragraph">アグリゲートの所有権は変更されません。</block>
  <block id="6c02f76a0894d55a982cb5450ab57f22" category="cell">ステージ 5 ：ノード 4 をインストールしてブートします</block>
  <block id="f76e06dd184bc4ee38bfcca355bec6fd" category="cell">ステージ 6 ：アップグレードを完了する</block>
  <block id="ac9d5901ac51a7a9e98d7f8c6c0740f1" category="cell">クラスタの種類</block>
  <block id="318bbb9db21483c1e16d2e2dbe7f1651" category="cell">2 ノードクラスタ</block>
  <block id="34d4031d3d37d8d9b80a5f9b450de553" category="cell">に進みます <block ref="1cb6f5a9f7eef3599c4443318664abfe" category="inline-xref-macro-rx"></block>。</block>
  <block id="5e674106f615dae34230d16b22371cb8" category="cell">に進みます <block ref="0bbd9dc76625f42ec6de8739e60cb44f" category="inline-xref-macro-rx"></block>。</block>
  <block id="b2af6e76142ed067163cd5edf51978b0" category="list-text">[[man_リタイヤ _2_Step2] 両方のノードで次のコマンドを入力して、 advanced 権限レベルにアクセスします。</block>
  <block id="1626aa8f9ba900c076affceeaaad8930" category="list-text">次のコマンドを入力し、出力を確認して、クラスタ HA が無効になっていることを確認します。</block>
  <block id="485e8bd9380904feaa09d87fa46616ff" category="paragraph">cluster ha show</block>
  <block id="35df860936da8d9b2d5477ee7413fdee" category="list-text">node2 にイプシロンが設定されているかどうかを確認するには、次のコマンドを入力して出力を調べます。</block>
  <block id="7d25068d39532ede875f6fae939c62aa" category="paragraph">次の例では、 node2 にイプシロンが設定されています。</block>
  <block id="7b8424ae8ebc04e308b8d348d8d07edf" category="list-text">node2 にイプシロンが設定されている場合は、ノードにイプシロンを「 false 」として設定して、ノードを node3 に転送できるようにします。</block>
  <block id="9b3ca02a7473e1db3c0c57693a01aabe" category="list-text">node3 の epsilon true とマークを付けて、イプシロンを node3 に移動します。</block>
  <block id="0bd1c8991d4969dac07a0c2f2dde50b5" category="paragraph">network options switchless-cluster show</block>
  <block id="b7a9c811aab8e6da8894f06c47eec709" category="list-text">[[man_detup_2_Step9] 管理者レベルに戻ります。</block>
  <block id="befba560e8eaef2f66cac914b95edc61" category="list-text">ノード 2 が完全にシャットダウンしたら、シャーシまたはラックからノードを取り外します。アップグレードの完了後に、 node2 の運用を停止できます。を参照してください <block ref="6e48b929ca0767f00c15eeb6d7e78755" category="inline-link-macro-rx"></block>。</block>
  <block id="1a378d96df8037e2d0440e83a971d50b" category="inline-link-macro">コントローラの内蔵ディスクドライブにアグリゲートがあるかどうかを確認します</block>
  <block id="cfcebfe478d3e9036c8e1fcabaf35bc2" category="list-text"><block ref="cfcebfe478d3e9036c8e1fcabaf35bc2" category="inline-link-macro-rx"></block></block>
  <block id="49eb2b56a9faaf3a2fdf34442f534221" category="list-text"><block ref="49eb2b56a9faaf3a2fdf34442f534221" category="inline-link-macro-rx"></block></block>
  <block id="6c578312e5e7bc9eb1a3d443b1c52f2a" category="list-text"><block ref="6c578312e5e7bc9eb1a3d443b1c52f2a" category="inline-link-macro-rx"></block></block>
  <block id="b907c9020348bd4847d9c48ddd2d737f" category="inline-link-macro">オンボードキーマネージャを使用して認証を管理</block>
  <block id="c950fa333894cbc66c157fc73dec920c" category="list-text"><block ref="c950fa333894cbc66c157fc73dec920c" category="inline-link-macro-rx"></block></block>
  <block id="5bfe738b0f48a11f74df0b195987ecb0" category="inline-link-macro">SnapMirror 関係を休止します</block>
  <block id="511de0365473e7cc1fc52adf09368d53" category="list-text"><block ref="511de0365473e7cc1fc52adf09368d53" category="inline-link-macro-rx"></block></block>
  <block id="c25935ce11d9d76fca75e6795d090984" category="list-text">MetroCluster 9.5 以前を実行している Fabric ONTAP 4 ノードおよび 8 ノード構成を使用するシステムがある。</block>
  <block id="c71d4a6ce9505934716badc679c9844b" category="paragraph">元のノードをアップグレードするには、特定の情報を収集する必要があります。ノード ID 、ポートと LIF の詳細、ライセンスキー、 IP アドレスが含まれます。</block>
  <block id="af9089739f1912cd99f3158a51191bfa" category="paragraph">次のワークシートを使用して、あとで手順で使用するための情報を記録できます。</block>
  <block id="9d5a474aaa552210ff0298949aeb6c0a" category="cell">必要な情報</block>
  <block id="7fe24adf461d2bb8561714f2d23dc1a8" category="cell">収集されるタイミング</block>
  <block id="6eb41a5158360001c1c3220e5b835719" category="cell">使用時</block>
  <block id="46f0a08ed8c916f4c012866457f2c3c5" category="cell">収集された情報</block>
  <block id="58e005b13052724c67a7a029375b81e6" category="cell">元のノードのモデル、システム ID 、シリアル番号</block>
  <block id="98de75a555a47984f815060d1cb202f6" category="cell">ステージ 1 ： _ アップグレードのためのノードを準備します</block>
  <block id="96a7b0dc109f4a220518540bd844100f" category="cell">ステージ 3 ： _ インストールとブート node3 _ ステージ 5 ： _ インストールとブート node4 _ ステージ 6 ： _ 古いシステムの運用を停止します</block>
  <block id="53e14d7212592e557eb0045b4f222c00" category="cell">シェルフとディスクの情報、フラッシュストレージの詳細、メモリ、 NVRAM 、アダプタカードが元のノードにあります</block>
  <block id="6b13a963976d4b8d2fbc2b61b03cb419" category="cell">ステージ 1 ： _ アップグレードのためのノードの準備</block>
  <block id="9c17c7bcbc4a33e8adf5afdd66b5ddfc" category="cell">手順全体</block>
  <block id="81c61f27d311b6c30ec668cf353ea1de" category="cell">元のノード上のアグリゲートとボリュームをオンラインにします</block>
  <block id="94359ed6e12b4ed191d93ab756e3edc7" category="cell">手順では、短時間の再配置を除き、アグリゲートとボリュームがオンラインのままであることを確認できます</block>
  <block id="7fe437ad7bf96c159fda41c06deb8257" category="cell">コマンド「 network port vlan show 」および「 network port ifgrp show 」の出力</block>
  <block id="6df8f51a4f207a8aec19520cbafdafd9" category="cell">ステージ 3 ： _ ノード 1 のポートを node3 ステージ 5 ： _node2 のポートを node4 に再割り当てする</block>
  <block id="0cefe51dc41d2718e2eb5823909bbc12" category="cell">（ SAN 環境のみ） FC ポートのデフォルト設定</block>
  <block id="f7a78d2e3df99d48acd611b5ebd92bff" category="cell">新しいノードで FC ポートを設定する</block>
  <block id="98577d60c614df3fef5fca33b637ac23" category="cell">（ V シリーズシステムまたは FlexArray 仮想化ソフトウェアのみを使用するシステム） V シリーズシステムまたは FlexArray 仮想化ソフトウェアを使用するシステムのトポロジ</block>
  <block id="7cfd4d042bb6ab02bc385b9c06501763" category="cell">ステージ 3 ： _ インストールとブート node3 _ ステージ 5 ： _ インストールとブート node4 _</block>
  <block id="72a91a015e8c747a5a63794308310840" category="cell">SP の IP アドレス</block>
  <block id="e3d8433cfe5569460492707086339074" category="cell">ライセンスキー</block>
  <block id="bb2a59fbd20fec79ac114c7a9f22ead2" category="cell">外部キー管理サーバの IP アドレス</block>
  <block id="234cfc2e3636ba2a3e5d47da84d5bd32" category="cell">ステージ 1 ： _ ストレージ暗号化のディスクのキーを変更 _</block>
  <block id="a6bab46fa807f06174c4873c5331a9b2" category="cell">ステージ 6 ：新しいノードでのストレージ暗号化のセットアップ _</block>
  <block id="09c90f884edd2efc00874f9fc863daeb" category="cell">Web にアクセスできるディレクトリの名前とパス。ノードをネットブートするためにファイルをダウンロードします</block>
  <block id="8d880de8591f29262b623575d315d6f9" category="cell">ステージ 1 ： _ netboot_ への準備</block>
  <block id="8308cf8c26a7dcc26ef279edbb2465b2" category="cell">ステージ 3 ： _ インストールとブート node3 _ ステージ 5 ： _ インストールとブート node4 _</block>
  <block id="55b2136ebb20d11fca61578e034c0825" category="cell">SAN 以外のデータ LIF は node1 で所有されています</block>
  <block id="36f18a42c47c1ba2b97c49f28fb8814c" category="cell">ステージ 2 ： _ ノード 1 が所有する Nonsan データ LIF を node2 に移動します</block>
  <block id="ffab931268e5c5e23eb65969fdc5d778" category="cell">の後半で説明します</block>
  <block id="baac9a78080d05f11c33a3240628d4f8" category="cell">クラスタポート、クラスタ間ポート、ノード管理ポート、クラスタ管理ポート、物理ポート</block>
  <block id="bd1e8b7ddd738e8d113d4887d3f4bba6" category="cell">ステージ 2 ： _ ノード 1 の情報を記録 _</block>
  <block id="5f7558f445c484b7024a112b18c200a6" category="cell">ステージ 3 ： _ インストールとブート node3 _ ステージ 3 ： _ ポートを node1 から node3 _ にマッピングします</block>
  <block id="7712e1e9d181323ad2123bf3c1218513" category="cell">新しいノードのポートを指定します</block>
  <block id="dcfac71d6abccba3c94c782790822f55" category="cell">ステージ 3 ： _ ポートを node1 から node3 にマッピングします</block>
  <block id="1f2d038d966e575c88681d78a0b7e550" category="cell">の後半のセクションと section_Map ポート（ node2 から node4 への）</block>
  <block id="968d71039e6cb3f4f7f4aa7223382c8f" category="cell">ノード 3 の使用可能なポートとブロードキャストドメイン</block>
  <block id="621f6a9e04692c2889f288c336e29c97" category="cell">SAN 以外のデータ LIF は node2 で所有されていません</block>
  <block id="8600c3328f8a228f306c6d5830a2576c" category="cell">_ ノード 1 に属する SAN 以外のデータ LIF をノード 2 からノード 3 に移動し、 node3 の SAN LIF を確認します</block>
  <block id="5da569cf0c9cfab6143aa1456b0d2b27" category="cell">ノード 2 が所有する SAN 以外のデータ LIF です</block>
  <block id="792578ec3edacbf85c56d7d346753a2f" category="cell">ステージ 3 ： _node2 によって所有されている Nonsan データ LIF を node3 に移動します</block>
  <block id="53c29bbede61f5ab1245941503af76c4" category="cell">ステージ 4 ： _ ノード 2 の情報を記録 _</block>
  <block id="979b8628aef26052c5b8843be52e1fa9" category="cell">ステージ 5 ： _ node4 ステージ 5 ： _ ノード 2 から node4 にポートをマッピングしてブートする</block>
  <block id="a992103a413243514b1fe86c6db582f6" category="cell">ノード 4 のクラスタネットワークポート</block>
  <block id="f2805ed5889ac7ba2f7220a38fc00350" category="cell">ステージ 5 ： _node2 のポートを node4 にマップする</block>
  <block id="ba9d984599b9d029b2fc827939de2324" category="cell">ノード 4 の使用可能なポートとブロードキャストドメイン</block>
  <block id="9b978a712974278ab5f3f7e894871a48" category="cell">ストレージシステムのプライベート SSL 証明書とパブリック SSL 証明書、および各キー管理サーバのプライベート SSL 証明書</block>
  <block id="d22f146c49d95d305653bf62234fdbc9" category="paragraph">新しいノードのポートに関する情報を Hardware Universe から取得しておく必要があります。に進みます <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、 Hardware Universe にリンクします。この情報は、このセクションおよびの後半で使用します <block ref="fface1ac702bde6d72ceb6e55eb8b2b6" category="inline-link-macro-rx"></block>。</block>
  <block id="770687a6c0857c42712724895dde4f94" category="paragraph">ノード 3 のソフトウェア設定は、ノード 3 の物理的な接続と同じである必要があります。また、アップグレードを続行する前に、 IP 接続をリストアする必要があります。</block>
  <block id="a7e55a2eda4d6d9856ad9438d37fbed0" category="paragraph">そのため、 node1 の物理ポートが node3 の物理ポートに直接マッピングされていない場合は、ブート後にクラスタ、管理、およびネットワーク接続をリストアするためにソフトウェア設定の変更が必要になります。また、ノード 1 のクラスタポートがノード 3 のクラスタポートに直接マッピングされていないと、ノード 3 は、正しい物理ポートでクラスタ LIF をホストするソフトウェア設定が変更されるまで、リブート時にクォーラムに自動的に再参加しないことがあります。</block>
  <block id="cbf79efe25579eb8669620f8a705d90c" category="list-text">[[step1] ノード 1 、ポート、ブロードキャストドメイン、 IPspace のすべてのケーブル接続情報を次の表に記録します。</block>
  <block id="2a04e456c6cc4811fe58e125c72d102f" category="cell">ノード 1 のブロードキャストドメインです</block>
  <block id="a73f157295775ec357e4cbb83394837d" category="cell">クラスタ 5</block>
  <block id="f8b0e66f09382485306db5e1ba20e4fc" category="cell">クラスタ 6</block>
  <block id="8ebc8c8801836bd409313dd264bebb92" category="inline-link-macro">ノード 1 の情報を記録します</block>
  <block id="032db7a5ba2209ef2a98f177b97ef9c0" category="paragraph">を参照してください <block ref="111c70a978efb37ba3bd0ea564da1d79" category="inline-link-macro-rx"></block> を実行して、この情報を取得します。</block>
  <block id="d6fd23476a280d6343ba76f013c499fd" category="list-text">[step2] node3 のすべてのケーブル接続情報、ポート、ブロードキャストドメイン、および IPspace を、の同じ手順を使用して前のテーブルに記録します <block ref="111c70a978efb37ba3bd0ea564da1d79" category="inline-link-macro-rx"></block>。</block>
  <block id="db8e77631790a3f2f7e9e65f99e95d55" category="list-text">[[step3]] 以下の手順に従って、セットアップが 2 ノードのスイッチレスクラスタであるかどうかを確認します。</block>
  <block id="64544217a0060d8a47ba296eaa9eda15" category="list-text">[[step4]] 次の手順を実行して、ノード 3 をクォーラムに参加させる。</block>
  <block id="e20f03b7201e18349c5baa3209b997a6" category="paragraph">次の例は、ポート「 e0a 」が node3 の「 Cluster 」ドメインにあることを示しています。</block>
  <block id="8d39e79fe126ab08c8533329b616fed4" category="admonition">MetroCluster 構成の場合、ポートのブロードキャストドメインを変更できないことがあります。これは、同期先 SVM の LIF をホストしているポートに関連付けられており、のようなエラーが表示されますが、次のメッセージに制限されないためです。</block>
  <block id="8b3323601551341609485df18e91de19" category="paragraph">リモートサイトの対応する同期元 SVM から次のコマンドを入力して、同期先の LIF を適切なポートに再割り当てします。</block>
  <block id="3db1cb9c339f5db3439420bdee3c086f" category="list-text">クラスタポートが Cluster broadcast-domain にない場合は、追加します。</block>
  <block id="7da7933fdddd6ba0e6adfac1eb9d1672" category="paragraph">次の例は、ノード 3 のポート「 e0d 」を削除します。</block>
  <block id="a84cdc90d98c6148502139e8da567ade" category="list-text">[man_map_1_step6] 必要に応じて、に示す同じコマンドを使用して、クラスタ間ブロードキャストドメインを調整し、クラスタ間 LIF を移行します <block ref="4c0abef6869b6cad04a71c175246f8ab" category="inline-xref-macro-rx"></block>。</block>
  <block id="15d8a3fb33ef05850a50f8685a3b3c02" category="list-text">[[step7] 必要に応じて、に示す同じコマンドを使用して、他のブロードキャストドメインを調整してデータ LIF を移行します <block ref="4c0abef6869b6cad04a71c175246f8ab" category="inline-xref-macro-rx"></block>。</block>
  <block id="3eed5b0c094ac012f4929ba5382bf4dd" category="list-text">[[step8] 、ノード 3 に存在しないポートが node1 にある場合は、次の手順に従って削除します。</block>
  <block id="5eb3a6c1204974756e1a1ba11f2ec598" category="list-text">ポートを削除します。</block>
  <block id="f063d629ff68f957f5da6e6d4a1024c5" category="list-text">[[step9] すべての LIF フェイルオーバーグループを調整します。</block>
  <block id="b9ce0c55aad8eead03f3c1634c34732f" category="paragraph">次の例は、フェイルオーバーポリシーを「 broadcast-domain-wide 」に設定し、フェイルオーバーグループ「 fg1 」のポートを「 node3 」の LIF 「 data1 」のフェイルオーバーターゲットとして使用します。</block>
  <block id="cb01034aedc70b6d88070cceb3ec5fd6" category="doc">ノード 2 の情報を記録します</block>
  <block id="06482362cad7119c97decfadddef47d1" category="list-text">ノード 2 のクラスタネットワークポート、ノード管理ポート、クラスタ間ポート、およびクラスタ管理ポートを特定します。</block>
  <block id="9581ef2fce7ca5bef124feac72dd7c62" category="paragraph">次の例に示すように、クラスタ内のそのノードと他のノードの LIF が表示されます。</block>
  <block id="66df24136907c6cba70f63950b15a0d8" category="admonition">システムにクラスタ間 LIF がない可能性があります。クラスタ管理 LIF は、ノードペアの一方のノードにしか配置しません。の出力例にクラスタ管理 LIF が表示されています <block ref="4d0816bae74d8d665981da69c5c8d7a9" category="inline-link-macro-rx"></block> インレコード node1 のポート情報 _ 。</block>
  <block id="db388cc11af248e636d23a7634f79da1" category="list-text">セクションで使用する情報を出力に記録します <block ref="fface1ac702bde6d72ceb6e55eb8b2b6" category="inline-link-macro-rx"></block>。</block>
  <block id="d852fb2583585e10c3885982eaf29670" category="paragraph">出力情報は、新しいコントローラポートを古いコントローラポートにマッピングするために必要です。</block>
  <block id="b226d44baee1fdcf5f175befc4240f79" category="list-text">node2 の物理ポートを特定します。</block>
  <block id="a36b8ceea3403515d94e1d9ad1d33833" category="paragraph">次の例に示すように、 node2 の物理ポートが表示されます。</block>
  <block id="e39f84c1a169d8d90af9c95f44865bc0" category="list-text">ポートとそのブロードキャストドメインを記録します。</block>
  <block id="1a494d33f95411ce2d7f871e87234bb6" category="paragraph">ブロードキャストドメインは、あとで手順の新しいコントローラのポートにマッピングする必要があります。</block>
  <block id="36d2ce7941b2c78c3d67d83e5bab95ab" category="list-text">node2 の FC ポートを確認します。</block>
  <block id="922cfc273cc764471719b8a70b2bd795" category="paragraph">「 network fcp adapter show 」のように表示されます</block>
  <block id="e2ce1c0ee0599997916e05613833e82e" category="paragraph">次の例に示すように、 node2 の FC ポートが表示されます。</block>
  <block id="f33b448fa0bb738f614e66795ee372d4" category="list-text">ポートを記録します。</block>
  <block id="183e98aa2a84c4dee16223d4c260f2ce" category="paragraph">出力情報は、手順の後半で新しいコントローラの新しい FC ポートをマッピングするために必要です。</block>
  <block id="f30296e85c9b7a573f431b89a15b6b93" category="list-text">まだ設定していない場合は、 node2 にインターフェイスグループまたは VLAN が設定されているかどうかを確認します。</block>
  <block id="9e650495d6414abbc47ea05fdc36dd7e" category="paragraph">ifgrp show`</block>
  <block id="35803428da21a4a214ff09f1442e2f58" category="paragraph">「 vlan show 」</block>
  <block id="15fb68f8a892a3ed6a57c8b5eca53ec5" category="paragraph">このセクションの情報を使用します <block ref="fface1ac702bde6d72ceb6e55eb8b2b6" category="inline-link-macro-rx"></block>。</block>
  <block id="61a6d655671eebbd633c1d84fae09e17" category="cell">状況</block>
  <block id="1f7052fd85a8ced9cd9c65f079fcb154" category="cell">に記録された NVRAM システム ID 番号 <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block></block>
  <block id="65e4801fe9cb3563a071b657463a3c1c" category="cell">に進みます <block ref="610cb2d6e87c5e838ceef8f48f57b082" category="inline-link-macro-rx"></block>。</block>
  <block id="30183fbd349bcd94fdabd371e0fdc8d9" category="cell">NVRAM システムの ID 番号をに記録しませんでした <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block></block>
  <block id="b31b744fd8c5cbe34c282a8e3311866b" category="cell">- 完了しました <block ref="3ef612fafd35c4ea98dad97a133c5f3f" category="inline-xref-macro-rx"></block> および <block ref="a3461a8cfeac3856b6bf21e7388f2534" category="inline-xref-macro-rx"></block> 次に、次のセクションに進みます。 <block ref="610cb2d6e87c5e838ceef8f48f57b082" category="inline-link-macro-rx"></block>。</block>
  <block id="5d34eef64c7b53994a7dde374d44b94b" category="paragraph">「 system node show -instance -node node2 」</block>
  <block id="bc110b3ccc057d2275d5e8ae87f525b0" category="list-text">[man_record_2_step10] セクションで使用する NVRAM システム ID を記録します <block ref="f326c815b47f4f2909494bae5cd735d5" category="inline-link-macro-rx"></block>。</block>
  <block id="7314fe3b616597bb78463e3503d3cdea" category="paragraph">アグリゲートの再配置（ ARL ）を使用して ONTAP 9.0 を実行するコントローラのペアをアップグレードできるかどうかは、プラットフォームおよび元のコントローラと交換用コントローラの両方の構成によって異なります。</block>
  <block id="03a076130908bcb8ba3ef3e4a9879406" category="paragraph">ARL を使用してノードのペアをアップグレードできる状況は次のとおりです。</block>
  <block id="fef08cb6b104300c9963da8490224b47" category="list-text">アップグレード前に、元のコントローラと交換用コントローラの両方で同じバージョンの ONTAP 9.x が実行されている必要があります。</block>
  <block id="85bf786cb7564154a7193e9a32b9470f" category="list-text">交換用コントローラの容量は元のコントローラと同じかそれ以上である必要があります。容量が等しいかそれよりも大きい場合は、 NVRAM サイズ、ボリューム、 LUN 、アグリゲート数の上限などの属性を表し、新しいノードのボリュームまたはアグリゲートの最大サイズも表します。</block>
  <block id="f8990401799da4daa91e6353e208a0ca" category="list-text">次の種類のシステムをアップグレードできます。</block>
  <block id="9fc712c36470ee134b5baf35a0628f67" category="list-text">FAS システムから FAS システムへの移動。</block>
  <block id="5759b3c09faaa5e5121a707b989bc410" category="list-text">AFF システムへの AFF システム。</block>
  <block id="b840d5771a2ef91436a0bedbee3a165d" category="admonition">AFF システムのアップグレードを実行する前に、 ONTAP をリリースバージョン 9.3P12 、 9.4P6 、または 9.5P1 以降にアップグレードする必要があります。これらのリリースレベルは、アップグレードを成功させるために必要です。</block>
  <block id="17d299f0ea21ebf5e64a916dc31f3150" category="admonition">どちらのシステムもハイアベイラビリティ（ HA ）と非 HA のどちらかです。両方のノードがこの機能を有効または無効にする必要があります。オールフラッシュで最適化されたノードと同じ HA ペアで最適化が有効になっていないノードを組み合わせることはできません。パーソナリティが異なる場合は、テクニカルサポートに連絡してください。</block>
  <block id="eb54474fb812ae2f0b8cbe44a679c0e9" category="admonition">新しいシステムのスロット数が元のシステムのスロット数より少ない場合、またはポートの数が少ないか異なる場合は、新しいシステムにアダプタを追加しなければならないことがあります。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> 特定のプラットフォームの詳細については、ネットアップサポートサイトの Hardware Universe にリンクしてください。</block>
  <block id="64958cd32ea9482fb68bd827389c4b5d" category="list-text">ONTAP 9.0 から ONTAP 9.7 への ONTAP のバージョンを実行できないコントローラとの間。</block>
  <block id="fd753b120c7506bdd866bd69666299a0" category="paragraph">Data ONTAP 7-Mode を実行するシステムでのコントローラのアップグレードについては、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> からネットアップサポートサイトにリンクできます。</block>
  <block id="8d99b40dd6349fd6acdd377f1170526a" category="list-text">元のコントローラに接続されたディスクシェルフをサポートしない交換用コントローラへの接続</block>
  <block id="c2bba071fde6bd6aaadda02df6be1824" category="paragraph">ディスクサポート情報については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> Hardware Universe にリンクするには、次の手順を実行します。</block>
  <block id="0ed554de4f15b56b25624509bfd8b8e2" category="list-text">ルートアグリゲートまたは内蔵ドライブ上のデータアグリゲートを含むコントローラからのアクセス。</block>
  <block id="aa4444dc8b6bab3b2f6234aeca290090" category="section-title">前提条件と用語</block>
  <block id="c77e53bb71e6f82e9c063dc5e5174b70" category="paragraph">このマニュアルの記述は次の前提に基づいています。</block>
  <block id="3eb93a8b34b97361565e1e43b5172c6c" category="list-text">交換用コントローラハードウェアは新しく購入され、使用されていません。</block>
  <block id="2c1539b425b852831dfd3949e3fa3f6e" category="admonition">* 注意 * ：この手順は、交換用コントローラハードウェアが新しく、使用されていないと想定しているため、使用済みコントローラを「 wipeconfig 」コマンドで準備するために必要な手順は、この手順には含まれていません。交換用コントローラハードウェアを以前に使用していた場合は、テクニカルサポートに問い合わせる必要があります。特に、コントローラが Data ONTAP 7-Mode を実行していた場合は、テクニカルサポートにお問い合わせください。</block>
  <block id="813522154d0016da078c804c8b48926e" category="list-text">ノードのペアをアップグレードする際のガイドラインを確認し、理解しておきます。</block>
  <block id="31536b7b125b53b91a4202e748df16c7" category="admonition">* 注意 * NVRAM の内容は消去しないでください。NVRAM の内容をクリアする必要がある場合は、ネットアップテクニカルサポートにお問い合わせください。</block>
  <block id="4e2f57efeba52fa3484b04fa5b7501f6" category="list-text">「 mody 」コマンドの前後に適切なコマンドを実行し、両方の「 show 」コマンドの出力を比較して、「 mody 」コマンドが成功したことを確認しています。</block>
  <block id="418bba28a84b33a46f081045deea4425" category="list-text">SAN 構成の場合、 HA ペア上の各 Storage Virtual Machine （ SVM ）にローカル LIF とパートナー LIF があります。各 SVM にローカル LIF とパートナー LIF がない場合は、アップグレードを開始する前に、その SVM のリモートノードとローカルノードに SAN データ LIF を追加します。</block>
  <block id="4deee541ccbe8bdf4518c19cd687519b" category="list-text">SAN 構成でポートセットを使用する場合は、バインドされた各ポートセットに HA ペアの各ノードの LIF が少なくとも 1 つ含まれていることを確認しておく必要があります。</block>
  <block id="1cb03b52ed6596c669089e6356a17e4c" category="paragraph">この手順では、ノードのリブートや環境変数の出力や設定など、特定のタスクを実行できるノード上のプロンプトを「 _boot environment prompt_ 」で参照します。このプロンプトは、 _boot loader prompt_ と非公式に呼ばれることがあります。</block>
  <block id="f12c4790f612bd1e2efaede10265d567" category="paragraph">ブート環境のプロンプトの例を次に示します。</block>
  <block id="3f17352bf969c985d68f77c2833285c4" category="section-title">ONTAP 9.7 以前のライセンス</block>
  <block id="fa6e3787c7c887f4c69ddbc0dec0424e" category="paragraph">すべてのライセンスキーは、 28 文字の大文字のアルファベットです。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ONTAP 9.7 の新しい 28 文字のライセンスキーを取得する方法については、 _NetApp サポートサイト _ にリンクしてください。またはそれ以前のバージョン。キーは、 _ ソフトウェアライセンス _ の _ マイサポート _ セクションにあります。必要なライセンスキーがサイトにない場合は、ネットアップの営業担当者にお問い合わせください。</block>
  <block id="4d832de97d9ead053e5d9f0ec85efced" category="paragraph">ライセンスの詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、 _System Administration Reference_( システム管理リファレンス ) にリンクします。</block>
  <block id="444b1cfaed2cd1215abe5706af9673cd" category="section-title">ストレージ暗号化</block>
  <block id="9519937cbd956cff6c45361bbdf5972a" category="paragraph">ストレージ暗号化を使用する場合は、ノードに関連付けられているすべてのディスクドライブに自己暗号化ディスクドライブが必要です。</block>
  <block id="197b89f0e243e9def8dc0d01e39c6fe0" category="paragraph">この手順にはトラブルシューティングの提案が含まれてい</block>
  <block id="f57ddae179006dfe93c570a9886b51b0" category="list-text">元のノードのパフォーマンスベースラインを作成するには、次の手順を実行します。</block>
  <block id="e2ce8b648cf2a8577d2ac0054c830df5" category="list-text">診断ユーザアカウントのロックが解除されていることを確認します。</block>
  <block id="8fafe7b0e88d09400ee18fcc9299185e" category="list-text">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ネットアップサポートサイトへのリンクには、 Performance and Statistics Collector （ Perfstat Converged ）をダウンロードしてください。</block>
  <block id="061b69246434dcda481ca9452cf30635" category="paragraph">Perfstat Converged ツールを使用すると、アップグレード後に比較するためのパフォーマンスのベースラインを設定できます。</block>
  <block id="3e5ae45cd6aac12d01461471b0995845" category="list-text">ネットアップサポートサイトの手順に従ってパフォーマンスのベースラインを作成します。</block>
  <block id="7fcb92cfc1dea17cbdc84eda52cfac2b" category="list-text">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> からネットアップサポートサイトにリンクして、ネットアップサポートサイトでサポートケースをオープンしてください。</block>
  <block id="38fd59ef0181a70014c49f0cfdd6ed5d" category="paragraph">アップグレード中に発生する可能性がある問題をケースで報告できます。</block>
  <block id="e7b328a01b5a6b8fffc172cfd9f564c0" category="list-text">node3 と node4 の NVMEM または NVRAM バッテリが充電されていることを確認し、充電されていない場合は充電します。</block>
  <block id="6ab3181b33a0075c13f2de4c0920deff" category="admonition">* 注意 * NVRAM の内容は消去しないでください。NVRAM の内容をクリアする必要がある場合は、ネットアップテクニカルサポートにお問い合わせください。</block>
  <block id="051d9c31ffa2621a5e49ba9e6d76c916" category="list-text">node3 と node4 にある ONTAP のバージョンを確認します。</block>
  <block id="53e359796554176ecef5639c8ed3ed05" category="paragraph">node3 と node4 にある ONTAP のバージョンに関する情報は、梱包箱に含める必要があります。ONTAP のバージョンは、ノードがブートするとき、またはノードを保守モードでブートしてコマンドを実行するときに表示されます。</block>
  <block id="7877022c956918624cc0373ff564cad4" category="paragraph">「バージョン」</block>
  <block id="a2d27af8ce0592e36b8a208c0cb93d3e" category="paragraph">「 network interface show -role cluster 」のように表示されます</block>
  <block id="97946b80ce2a390dfbe694abb89b8da6" category="paragraph">次の例に示すように、すべてのクラスタ LIF が表示されます。</block>
  <block id="b6f048f47d754b1245e072cf13364151" category="list-text">ノード 1 またはノード 2 にクラスタ LIF が 2 つまたは 4 つある場合は、次の手順を実行して、使用可能なすべてのパスで両方のクラスタ LIF に ping を送信できることを確認します。</block>
  <block id="4ae0280fe3dd6476913cdfef9bf98f8f" category="list-text">advanced 権限レベルに切り替えます。</block>
  <block id="88bdbe46ad1d0b5212db8d769f0d6c7c" category="list-text">「 y 」と入力します。</block>
  <block id="1be278766df14cf22410e71cf6d2cf07" category="list-text">ノードに ping を実行して接続をテストします。</block>
  <block id="30533ddc427fb292c7d2a7a069e893e2" category="paragraph">cluster ping-cluster -node node_name</block>
  <block id="e2ef0e388993deb8d5ac2d2c4c589106" category="paragraph">次の例のようなメッセージが表示されます。</block>
  <block id="87d93b522596e870c62c871bdbe44c11" category="paragraph">ノードで 2 つのクラスタポートが使用されている場合、次の例に示すように、 4 つのパスで通信可能であることを確認できます。</block>
  <block id="063014cb1baf1ab4cfba01ed9c5cdcb1" category="list-text">管理者レベルの権限に戻ります。</block>
  <block id="7a309bb6c6af5ef06efe5f48e0c54074" category="paragraph">次の例は、ノードが相互に接続されていて、テイクオーバーが可能な場合の出力例を示しています。</block>
  <block id="8ad3217d99ee19b408199ad575ffe3af" category="paragraph">どちらのノードも部分的なギブバック状態にはなりません。次の例では、 node1 の部分的なギブバックが完了しています。</block>
  <block id="e86a1d7ab77ef690a506c50aeb0e4407" category="paragraph">node1 と node2 のどちらも現在の所有者（ホーム所有者ではない）アグリゲートを所有していない場合、次の例のようなメッセージが返されます。</block>
  <block id="b985e562bbb6750dd51f653600fe0a16" category="paragraph">次の例は、 4 つのアグリゲートのホーム所有者ではなくホーム所有者である node2 というノードに対するコマンドの出力を示しています。</block>
  <block id="d2d09b67c3b189d4996ce96fdb6e7f46" category="cell">のコマンドの場合は <block ref="f234334393599d38df4eb27863e3dcfa" category="inline-xref-macro-rx"></block>...</block>
  <block id="187bf5770ab4eb046ac279545d76a28d" category="cell">空の出力がありました</block>
  <block id="618ca5b25d5cf4c26b7057f25a52023b" category="inline-xref">手順 12</block>
  <block id="6cf9162d078961b85385ab5ffe206def" category="cell">手順 11 を省略して、に進みます <block ref="9e04aeb1482ff26e4ec2b4e66367360a" category="inline-xref-macro-rx"></block>。</block>
  <block id="4862cab8c196cf3e955c3421a6f0ab8b" category="cell">出力あり</block>
  <block id="5f97f3ee15cc9d2abee53d7af46e1799" category="inline-xref">手順 11</block>
  <block id="009df4941179f7e77d7594ecfc0c10f7" category="cell">に進みます <block ref="1fe89f878ebb086a789e2e41fed56343" category="inline-xref-macro-rx"></block>。</block>
  <block id="edc71aed1f3d88be9cfa9b3b3f030a94" category="list-text">[man_prepare-to-downgrade 11]] ノード 1 またはノード 2 が現在の所有者であり、ホーム所有者ではないアグリゲートを所有している場合は、次の手順を実行します。</block>
  <block id="d4a6afd0a40d578ef1c16c580930990a" category="paragraph">「 storage failover show -fields local-missing-disks 、 partner-missing-disks 」というメッセージが表示されます</block>
  <block id="9351d7b864e0fec6d8e9ce484c7e1792" category="paragraph">次の例は、不足しているディスクがない場合の出力例を示しています。</block>
  <block id="f1178fa107fef2eea6cd954e57dbda27" category="paragraph">次の例は、両方のノードが正常である場合の出力を示しています。</block>
  <block id="ee93f64f74bbb51a61f0871bf27e8d58" category="paragraph">次の例は、コマンドの出力例を示しています。</block>
  <block id="39011a93d54cda514415ade9083fc4bd" category="list-text">ノード 1 とノード 2 のどちらもクラスタ内の他のノードに属するデータ LIF を所有していないことを確認し、出力の「 Current Node 」列と「 Is Home 」列をチェックします。</block>
  <block id="5ac0c9fe3d719e05a93a39b429e96f47" category="paragraph">次の例は、 node1 に、ホーム所有の LIF がクラスタ内の他のノードにない場合の出力を示しています。</block>
  <block id="c94a099e774b563198a3d0a4747eeeb1" category="paragraph">次の例は、 node1 がもう一方のノードによってホーム所有されているデータ LIF を所有している場合の出力を示しています。</block>
  <block id="624ebabf7bed06677af18b73e9b75ed4" category="list-text">の出力の場合は <block ref="f85aebae90992a111c19def12492ab18" category="inline-xref-macro-rx"></block> ノード 1 とノード 2 のどちらかがクラスタ内の他のノードでホーム所有されているデータ LIF を所有しており、データ LIF をノード 1 とノード 2 のどちらからも移行することを示します。</block>
  <block id="b4ebcf376ab05c920671af65b7daaf8c" category="paragraph">network interface revert -vserver * -lif *</block>
  <block id="90cb08ba1d76f3a3dfeee17c19be4d3e" category="paragraph">network interface revert コマンドの詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ONTAP 9 コマンド：マニュアルページリファレンスにリンクするには、次の手順を実行します。</block>
  <block id="9aad19d5c9012d934daf081b9a8a5f8d" category="list-text">ノード 1 とノード 2 で障害ディスクが所有されているかどうかを確認します。</block>
  <block id="897a592bf71f640f9c341f736bc9ee4e" category="list-text">次の手順を実行して node1 と node2 に関する情報を収集し、各コマンドの出力を記録します。</block>
  <block id="76a16743e07ac3cea2f75990f2aad527" category="admonition">この情報は、手順の後半で使用します。</block>
  <block id="86bd7b7efad49e1892e19e0073d55fb5" category="list-text">両方のノードのモデル、システム ID 、シリアル番号を記録します。</block>
  <block id="dfb5c700fcc3e30efac3db32160fbcf2" category="admonition">この情報を使用して、ディスクの再割り当てと元のノードの運用を停止します。</block>
  <block id="e09e773592434045763d0f91877696a1" category="list-text">ノード 1 とノード 2 の両方で次のコマンドを入力し、シェルフ、各シェルフ内のディスク数、フラッシュストレージの詳細、メモリ、 NVRAM 、ネットワークカードに関する情報を出力に記録します。</block>
  <block id="4f52adca7234907fc88d3196c013afca" category="admonition">この情報を使用して、 node3 または node4 に転送するパーツやアクセサリを特定できます。ノードが V シリーズシステムであるか、 FlexArray 仮想化ソフトウェアがインストールされているかがわからない場合は、の出力からも確認できます。</block>
  <block id="183d8f9cbafac0e6a6d6ea1ecdc927af" category="list-text">ノード 1 とノード 2 の両方で次のコマンドを入力し、両方のノードでオンラインになっているアグリゲートを記録します。</block>
  <block id="8e812627c78a44fd6a82255d855942ae" category="admonition">この情報と次の手順の情報を使用して、再配置時にオフラインになった短時間のアグリゲートとボリュームが手順全体でオンラインのままになっていることを確認できます。</block>
  <block id="75cf5ffcfa777a87d0faf388944df0a1" category="list-text">[[man_prepare_nodes_step19]] ノード 1 とノード 2 の両方で次のコマンドを入力し、両方のノードでオフラインになっているボリュームを記録します。</block>
  <block id="649d1a5dd8b62184f1d84c77b9e0782d" category="admonition">アップグレード後にもう一度コマンドを実行し、この手順の出力と比較して、他のボリュームがオフラインになったかどうかを確認します。</block>
  <block id="f1914c021e0eba7910a7110848bb7b02" category="list-text">次のコマンドを入力して、 node1 または node2 にインターフェイスグループまたは VLAN が設定されているかどうかを確認します。</block>
  <block id="668c0014fabb7b9c53aeeddba81cd3f5" category="paragraph">「 network port ifgrp show 」のように表示されます</block>
  <block id="793d1d4f275c1119fa9ef4c6bdeb245e" category="paragraph">「 network port vlan show 」と表示されます</block>
  <block id="f44fab1c935aab23f65aad42a018c6c3" category="paragraph">インターフェイスグループまたは VLAN がノード 1 とノード 2 のどちらで設定されているかを確認します。手順の次の手順以降で、その情報を確認する必要があります。</block>
  <block id="b84ea1287ec7320899965ee9778b33f8" category="list-text">次のコマンドを入力して 'clusterwide 以外のノードにフェイルオーバー・グループがあるかどうかを確認します</block>
  <block id="b60d742c0bb409f0ebcb8588e87621e0" category="paragraph">「 network interface failover-groups show 」と表示されます</block>
  <block id="091f947ae047399826a034c153b6f964" category="paragraph">フェイルオーバーグループは、システムに存在するネットワークポートのセットです。コントローラハードウェアをアップグレードすると物理ポートの場所が変わる可能性があるため、アップグレード中にフェイルオーバーグループを誤って変更する可能性があります。</block>
  <block id="8d9c45aa37c89a2c1648b1756ab487ea" category="paragraph">次の例に示すように、ノード上のフェイルオーバーグループが表示されます。</block>
  <block id="da98a346ceebae46d5f809b0a76fa466" category="list-text">clusterwide 以外のフェイルオーバー・グループがある場合は ' フェイルオーバー・グループ名と ' そのフェイルオーバー・グループに属するポートを記録します</block>
  <block id="4284018d8ed5fd4750bbe54e42d5131e" category="list-text">次のコマンドを入力して、ノードに VLAN が設定されているかどうかを確認します。</block>
  <block id="c4bc09685f2b51c989913c717d719690" category="paragraph">VLAN は物理ポートを介して設定されます。物理ポートが変わった場合は、あとで手順で VLAN を再作成する必要があります。</block>
  <block id="d12a9049e51fd6e424aa4359a72b4295" category="paragraph">次の例に示すように、ノードに設定されている VLAN が表示されます。</block>
  <block id="c14e11ebbdc4deecee898760f94845d8" category="list-text">ノードに VLAN が設定されている場合は、各ネットワークポートと VLAN ID のペアをメモします。</block>
  <block id="52be7caa23f8083514a04ae35866982c" category="cell">インターフェイスグループまたは VLAN の状態</block>
  <block id="298af6f79d48efea731daf2a5fb8b16a" category="cell">ノード 1 またはノード 2</block>
  <block id="4d65d20e483d642b29f52e830db50552" category="inline-xref">手順 24</block>
  <block id="aa969b6a363de5881c89bb2473ec8437" category="cell">- 完了しました <block ref="9b49efbf480dedd669e8261bbf55488f" category="inline-xref-macro-rx"></block> および <block ref="75c40b124b57824cd48270709549c07b" category="inline-xref-macro-rx"></block>。</block>
  <block id="6c2e7ce55ecae714a2208a38f28950b9" category="cell">ノード 1 とノード 2 ではありません</block>
  <block id="68eb39c6bade33093ea7116e69724b9d" category="cell">に進みます <block ref="75c40b124b57824cd48270709549c07b" category="inline-xref-macro-rx"></block>。</block>
  <block id="371f291ab5b98703097ed6da7c8ed52f" category="list-text">[[man_prepare_nodes_step23]] SAN 環境または SAN 以外の環境で node1 と node2 が存在するかどうかが不明な場合は、次のコマンドを入力して出力を確認します。</block>
  <block id="acbfcb7305e244387e0051fa5f508401" category="paragraph">SVM に iSCSI も FC も設定されていない場合、次の例のようなメッセージが表示されます。</block>
  <block id="f5ec26fd612e05501dc188ab23c1e529" category="paragraph">ノードが NAS 環境にあることを確認するには '-data-protocol nfs|cifs パラメータを指定した network interface show コマンドを使用します</block>
  <block id="94b030f9c4d0cf01d4214519980e06e7" category="paragraph">SVM に iSCSI または FC が設定されている場合、次の例のようなメッセージが表示されます。</block>
  <block id="6d0f0ab3ba176428ba45b4d0b08cb29a" category="list-text">[man_prepare-to-downgrade 24]] 次の手順を実行して、クラスタ内のすべてのノードがクォーラムにあることを確認します。</block>
  <block id="41755192777732f571a4c320827bfc6d" category="list-text">カーネル内のクラスタサービスの状態をノードごとに 1 回確認します。</block>
  <block id="998af7db71400f287ae13a492f9d193a" category="paragraph">「 cluster kernel-service show 」のように表示されます</block>
  <block id="a911ca42751cdd210f50c82f44049c10" category="paragraph">過半数のノードが正常で相互に通信可能な場合に、クラスタ内のノードがクォーラムを構成している。詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、 _System Administration Reference_( システム管理リファレンス ) にリンクします。</block>
  <block id="6c4e983088f8ed9f67246e1b17b638ca" category="list-text">admin 権限レベルに戻ります。</block>
  <block id="bd63b39861eaf09922b2f696e573be58" category="cell">クラスタの状況</block>
  <block id="cf72c95a9046542261893f709403a8d2" category="cell">SAN が設定されている</block>
  <block id="a2ca851f93b3aab00f2a1a9d215797c0" category="cell">に進みます <block ref="25d05608683c9030994c9dfb7a4f0a9b" category="inline-xref-macro-rx"></block>。</block>
  <block id="6f3802a8c39ecd17753209796818c9f5" category="cell">SAN が設定されていません</block>
  <block id="bb321334fcb278e04a88480d13054b7e" category="inline-xref">手順 29</block>
  <block id="4bf8f638d47f6a7f9ed2b167e6c58b28" category="cell">に進みます <block ref="423690fd8b3d3c5955a0b43d62ab9b67" category="inline-xref-macro-rx"></block>。</block>
  <block id="dca3bf352f9922771b35f1e03c591788" category="list-text">[man_prepare-to-downgrade 26]] 次のコマンドを入力して、 SAN iSCSI または FC サービスが有効になっている各 SVM で、ノード 1 とノード 2 に SAN LIF があることを確認します。</block>
  <block id="963e82614f757a8eee0259303f34527b" category="paragraph">コマンドは、ノード 1 とノード 2 の SAN LIF 情報を表示します。次の例は、 Status Admin/Oper 列に up/up と表示されているステータスを示しています。これは、 SAN iSCSI サービスと FC サービスが有効になっていることを示しています。</block>
  <block id="8a70e662724b21080c560e6be7f2c5c4" category="paragraph">また、次のコマンドを入力して、 LIF の詳細情報を確認することもできます。</block>
  <block id="d026c064778006f9c03fdbc86d65f2bb" category="paragraph">'network interface show -instance -data-protocol iscsi|fcp</block>
  <block id="ff03f81e3805469dd3ca43d2811a614d" category="list-text">次のコマンドを入力してシステムの出力を記録し、元のノードの FC ポートのデフォルト設定を取得します。</block>
  <block id="3e2b2bdb70af85f67ec523ee76a4f03b" category="paragraph">コマンドは、次の例に示すように、クラスタ内のすべての FC ポートに関する情報を表示します。</block>
  <block id="b0465c9d2f8edb4e2978de4f3bb93497" category="paragraph">アップグレード後の情報を使用して、新しいノードに FC ポートを設定できます。</block>
  <block id="1c805b4cc00ee084b0e3a5a9c212e9a2" category="list-text">V シリーズシステムまたは FlexArray 仮想化ソフトウェアがインストールされたシステムをアップグレードする場合は、次のコマンドを入力して出力を記録し、元のノードのトポロジに関する情報を取得します。</block>
  <block id="1f21d3af1ebfd92fe19ca32d07d90016" category="paragraph">「 storage array config show -switch 」です</block>
  <block id="c83875af1cfc44dcf937e003fd6ad9bf" category="paragraph">次の例に示すようにトポロジ情報が表示されます。</block>
  <block id="1bd4ed27f87546af3edbba37df0590cf" category="list-text">[man_prepare-to-downgrade 29]] 次の手順を実行します。</block>
  <block id="fd24198d12e02d20f511f9c35f66ebb1" category="list-text">元のいずれかのノードで次のコマンドを入力し、出力を記録します。</block>
  <block id="7321ac6691d90f67ea8ea42f26847df8" category="paragraph">「 service-processor show -node * -instance 」のように表示されます</block>
  <block id="72dfb8d3e52e5d9045db9ad00960535b" category="paragraph">両方のノードの SP に関する詳細情報が表示されます。</block>
  <block id="7f4649d278edc769a0ec529585086778" category="list-text">SP の IP アドレスやその他の情報を記録します。</block>
  <block id="2874b759bc0f9d6f832a84f482485f96" category="paragraph">リモート管理デバイスのネットワーク・パラメータ（この場合は SP ）を ' 新しいノードの SP の元のシステムから再利用することができますSP の詳細については ' を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> 『 _System Administration Reference_and the ONTAP 9 Commands ： Manual Page Reference_』 にリンクするには、次の手順を実行します。</block>
  <block id="73e2f3b9e6d19fe1e2189067c752d909" category="list-text">[man_prepare-to-downgrade 30]] 新しいノードに元のノードと同じライセンス機能を設定する場合は、次のコマンドを入力して元のシステムのクラスタライセンスを表示します。</block>
  <block id="57fb8c1782e77bfa17ea95c66f54a6dd" category="paragraph">「 system license show -owner * 」と表示されます</block>
  <block id="4f8f7baa705fb90b9c5bec95668e59f5" category="paragraph">次の例では、 cluster1 のサイトライセンスを表示しています。</block>
  <block id="b83718d5186db84761322d32f4ea05ac" category="list-text">新しいノードの新しいライセンスキーを the _NetApp Support Site_. に取得します。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> からネットアップサポートサイトにリンクしてください。</block>
  <block id="5bb4c97c29100d63e333b5886f7e88b0" category="paragraph">必要なライセンスキーがサイトにない場合は、ネットアップの営業担当者にお問い合わせください。</block>
  <block id="6e97d82c25e14f4edc2307703de3f74f" category="list-text">元のシステムで AutoSupport が有効になっているかどうかを確認するには、各ノードで次のコマンドを入力し、出力を調べます。</block>
  <block id="28705e432bcaee564beb0750f6d4f55d" category="paragraph">次の例に示すように、コマンド出力には AutoSupport が有効になっているかどうかが表示されます。</block>
  <block id="9d35920fb64314f04ebb4c503b9d4637" category="cell">元のシステム</block>
  <block id="82afadce5c137568366e29a810db005a" category="cell">AutoSupport が有効になっています ...</block>
  <block id="c732f1d7a89abd68a48f92313a9b4364" category="inline-xref">手順 34</block>
  <block id="1ab718a04314b36269d3b2b096aac75a" category="list-text">に進みます <block ref="395265ffe56efe9e97ae9cc3752b2f60" category="inline-xref-macro-rx"></block>。</block>
  <block id="e5358fe562a4d74ac4231d8e23d0b088" category="inline-link-macro">ストレージ暗号化用の外部キー管理サーバの IP アドレスを取得します</block>
  <block id="e080d72a1a31976179b4632b6b55abc6" category="list-text">セクションに移動します <block ref="0427c7f36b4a2a717a929ec10534f5c0" category="inline-link-macro-rx"></block>。</block>
  <block id="9c13f9e2316ce6eb31c97c43c9f42070" category="cell">AutoSupport が有効になっていません ...</block>
  <block id="6fcae9afe7013bc84597d8c4231312ba" category="list-text">AutoSupport を有効にするには、 _System Administration Reference_. の手順に従ってください。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、 _System Administration Reference_. にリンクします。）</block>
  <block id="04f24e11b658105f38ef40a82c24839e" category="paragraph">* 注： AutoSupport は、ストレージ・システムを初めて設定したときに、デフォルトで有効になっています。AutoSupport はいつでも無効にできますが、常に有効にしておく必要があります。AutoSupport を有効にすると、ストレージシステムに問題が発生したときに、その問題や解決策を特定するのに非常に役立ちます。</block>
  <block id="38380a05879fb0225ede644e75b655eb" category="list-text">にアクセスします <block ref="0427c7f36b4a2a717a929ec10534f5c0" category="inline-link-macro-rx"></block> セクション。</block>
  <block id="4179c1d88c83e870ed525f69e82e0369" category="list-text">[man_prepare_nodes _step34]] 元のノードの両方で次のコマンドを入力し、 AutoSupport が正しいメールホストの詳細および受信者の E メール ID で設定されていることを確認します。</block>
  <block id="a8c3aac51d9227fa38d968e2651f9145" category="paragraph">「 system node AutoSupport show -node node_name -instance 」の略</block>
  <block id="f9145af7d3453430abd5b300de96a961" category="paragraph">AutoSupport の詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> 『 _System Administration Reference_and the ONTAP 9 Commands ： Manual Page Reference_』 にリンクするには、次の手順を実行します。</block>
  <block id="1139339a9b05d9d73e22e4329260fdc9" category="list-text">[[man_prepare-to-downgrade 35 、 Step 35]] 次のコマンドを入力して、 node1 のネットアップに AutoSupport メッセージを送信します。</block>
  <block id="2dc3e53d8dbc94d5425e399af7be362e" category="paragraph">「 system node AutoSupport invoke -node node1 -type all -message 」「 Upgrading node1 from platform_old to platform_new 」というメッセージが表示されます</block>
  <block id="4086f5138ec309c4999cbff0dc76073d" category="admonition">この時点では node2 の AutoSupport メッセージはネットアップに送信しないでください。これはあとで手順で送信します。</block>
  <block id="37fdb57fc31ec512b7d4dde37a7ab8d7" category="list-text">[man_prepare-to-downgrade 36 、 Step 36]] 次のコマンドを入力して、 AutoSupport メッセージが送信されたことを確認します。</block>
  <block id="28dd44ad0b0bcceee8ca8498734facba" category="paragraph">「 Last Subject Sent ：」フィールドと「 Last Time Sent ：」フィールドには、最後に送信されたメッセージのメッセージタイトルと、メッセージが送信された時刻が含まれています。</block>
  <block id="fdeff716288a3bd8ca18c4ffee31f259" category="paragraph">完了する必要がある場合があります <block ref="750d6dbe3bf1312d0d97a8f03a0d2304" category="inline-xref-macro-rx"></block>または <block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block>、または両方のセクション。</block>
  <block id="5e8f88089134f38f7cf630a3a4ce36ff" category="admonition">ネットアップのマーケティング資料では、 UTA2 という用語を CNA アダプタとポートという意味で使用している場合があります。ただし、 CLI では「 cna 」という用語を使用しています。</block>
  <block id="0f7670789359a9e1e91e25e19d469dad" category="list-text">ノード 3 にオンボードの FC ポート、オンボードの UTA / UTA2 ポート、または UTA / UTA2 カードがなく、ストレージディスクを搭載したシステムをアップグレードする場合は、に進みます <block ref="3b6c063a8efbc88c969c7838f0611434" category="inline-link-macro-rx"></block>。</block>
  <block id="04bc530160a0c8cfe78397922bf1025e" category="list-text">ただし、ストレージアレイを搭載した FlexArray 仮想化ソフトウェアを搭載した V シリーズシステムまたはシステムがあり、 node3 にはオンボードの FC ポート、 UTA / UTA ポート、または UTA / UTA2 カードがない場合は、 _Install に戻り、 node3 を再度起動して再開します <block ref="8334b800bcf351711ec77ec1fb7390b3" category="inline-link-macro-rx"></block>。</block>
  <block id="218c1c22487e3cea0e94aedcabb843e2" category="paragraph">に保存した FC ポート設定の値を node1 で確認しておく必要があります <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block>。</block>
  <block id="fb0e67401f3473ee656312bb98935878" category="cell">に進みます <block ref="4e8d6367d01e7a88b5b6b591ecf5d6db" category="inline-xref-macro-rx"></block></block>
  <block id="32781b45218385923d91bc21b08c6b68" category="cell">に進みます <block ref="79ba4e2202506d0f17b14ab90d196879" category="inline-xref-macro-rx"></block></block>
  <block id="838b228ad3b40461ad1dc100f5671807" category="list-text">[[man_config_3_step2] ノード 3 をブートし、メンテナンスモードにアクセスします。</block>
  <block id="534ca774217e84be533a1aad9cf31936" category="cell">次のコマンドを入力します。 'system node hardware unified-connect show'</block>
  <block id="fe780061729afd0c0f2800209c7c7bf6" category="cell">は、 V シリーズシステムまたは FlexArray 仮想化ソフトウェアを搭載し、ストレージアレイに接続されています</block>
  <block id="b7911a4b9aaa4584cf3072f4df9d0033" category="cell">次のコマンドを「 ucadmin show 」と入力します</block>
  <block id="d0f2b99979906267ea4c720be3fdf8c1" category="list-text">[[step4]] ノード 3 の FC 設定を、ノード 1 から前に取得した設定と比較します。</block>
  <block id="befe3449c034cb6f4631649c7a4ed066" category="list-text">[man_config_3_step5] 次のいずれかの操作を実行します</block>
  <block id="7f3a5152afa49c8421359b8761a9a8ad" category="cell">新しいノードのデフォルトの FC 設定</block>
  <block id="cb4a7a262c1057120daeee2df7839247" category="cell">ノード 1 で取得したものと同じです</block>
  <block id="2b56e7490fdbb3cfe1904501429274b7" category="cell">に進みます <block ref="c6c9a381b48f60f002c0199635146c23" category="inline-xref-macro-rx"></block>。</block>
  <block id="2cc211fd01662dba325fa6afb2cb24dc" category="cell">ノード 1 で取得したものとは異なります</block>
  <block id="3a3387d05eb4dc59724516e63ce89fe1" category="cell">に進みます <block ref="cb1e6c315615cb7630d3b8a437827bc2" category="inline-xref-macro-rx"></block>。</block>
  <block id="8858cbf1016a885e6783f73cde18ddf4" category="list-text">[[man_config_3_step6] 次のいずれかの操作を実行します。</block>
  <block id="eef9069309a77ac006f5011dca4b9f9a" category="paragraph">次のいずれかのコマンドを入力して、必要に応じて node3 の FC ポートを変更します。</block>
  <block id="0f46f9b9f7235f322cd04b338ecda49c" category="list-text">[[step7]] 次のいずれかの操作を実行します。</block>
  <block id="85a79ca9227090c23bb3d6d14dbbe0af" category="cell">次のコマンドを入力し、出力を調べて、新しい設定を確認します。「 system node hardware unified-connect show 」</block>
  <block id="ae1a6eb25c428a13de7c805301540516" category="cell">次のコマンドを入力し、出力を確認して、新しい設定を確認します。 ucadmin show</block>
  <block id="2c6e937b15ebe6468c586dd1b4eb466a" category="list-text">[[step8] 次のコマンドを入力して、メンテナンスモードを終了します。</block>
  <block id="b3a919f35f16fa3a39c85eac5d885d2f" category="list-text">[[step9] コマンドを入力したら、ブート環境のプロンプトでシステムが停止するまで待ちます。</block>
  <block id="c62d6d151dbb06716a8276f4f8bb89e0" category="list-text">[[step10]] 次のいずれかの操作を実行します。</block>
  <block id="8e49fbf8016e97e15077debef6c06b54" category="cell">は、 V シリーズシステム、または clustered Data ONTAP 8.3 を実行する FlexArray 仮想化ソフトウェアを備えています</block>
  <block id="51ae224ccdb747cc08ff98ed97fed51f" category="cell">ブート環境プロンプトの「 boot_ontap maint 」で、ノード 3 をブートし、メンテナンスにアクセスします</block>
  <block id="8cf0032370f0f9233266234c2a7feab7" category="cell">は、 V シリーズシステムではないか、 FlexArray 仮想化ソフトウェアがインストールされていません</block>
  <block id="7e422d66a2b07e1e654868dee6aae687" category="cell">ブート環境プロンプトで node3 を起動します</block>
  <block id="1509937ac092a7690a93d056a0c33d58" category="list-text">[man_config_3_step11]] 次のいずれかの操作を実行します</block>
  <block id="3e5bf76136102b434c2a000604dc77c1" category="list-text">ノード 3 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがある場合は、に進みます <block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block>。</block>
  <block id="306e854e226a650b7acec40ba5a0e249" category="list-text">ノード 3 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがない場合は、この手順を省略してください <block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block> にアクセスします <block ref="3b6c063a8efbc88c969c7838f0611434" category="inline-link-macro-rx"></block>。</block>
  <block id="6c804c4adac8740743dd6f41da471795" category="list-text">node3 にカードポートまたはオンボードポートがある場合は、に進みます <block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block>。</block>
  <block id="49844625e7eb80b095f9d3c525f8cba6" category="list-text">node3 にカードポートまたはオンボードポートがない場合は、を省略します <block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block>をクリックし、 _Install に戻り、 node3 をブートして、で再開します <block ref="a4103675c41ea57f7287e0804dd0c9dd" category="inline-link-macro-rx"></block>。</block>
  <block id="1f81aa18292065e5242ce30775d96e2c" category="paragraph">次の例のような出力が表示されます。</block>
  <block id="581e0d52eede5c7a9002197a5955188f" category="list-text">[[step3]] 「 system node hardware unified-connect show 」コマンドまたは「 ucadmin show 」コマンドの出力を調べて、 UTA / UTA2 ポートに希望するパーソナリティがあるかどうかを確認します。</block>
  <block id="39e1a687c8a1a3bb49c730ad7b98a3d5" category="cell">に進みます <block ref="2fc3b3e515184c116c95342a9ca8cb9f" category="inline-xref-macro-rx"></block>。</block>
  <block id="aeeda50cd3cc8fa0b7819c50d25802cc" category="cell">手順 5 から 12 を省略して、に進みます <block ref="e8dc02ba0ba84dfdb12d2955f04811ca" category="inline-xref-macro-rx"></block>。</block>
  <block id="8c1235ea1bd5309fe2724d440119a7bf" category="list-text">[man_check_3_step5] 次のいずれかの操作を実行します</block>
  <block id="702b58a3a2c0f7ca9c1ff79304cc3846" category="cell">ストレージディスクがあり、 clustered Data ONTAP 8.3 を実行している</block>
  <block id="177fe53a2ca3ad4477bf20631953c74e" category="cell">node3 を起動し、「 boot_ontap maint 」というメンテナンスモードに切り替えます</block>
  <block id="9bc874604b7939971f9993fe8c042cc5" category="cell">に進みます <block ref="f6d13a5ff9438ee0d4458e3f2ffb2fd3" category="inline-xref-macro-rx"></block>。すでにメンテナンスモードになっている必要があります。</block>
  <block id="3b9a8502a8d7047daccb7dc1e076d1db" category="list-text">[[man_check_3_step6] 次のいずれかの操作を実行します。</block>
  <block id="1f14f34deb68e1ccfd51fd969391f85b" category="cell">に進みます <block ref="e0afe2f8b687f2b937ad04447e0f4504" category="inline-xref-macro-rx"></block>。</block>
  <block id="fe13e7c4af341791013b658ec3446e14" category="cell">手順 7 を省略して、に進みます <block ref="21867c7d0c2b8bc3921bf40e9edec561" category="inline-xref-macro-rx"></block>。</block>
  <block id="5d8cdb858d03ccbaab4933257301ad1f" category="list-text">[[man_check_3_step7] アダプタがイニシエータモードの場合、 UTA / UTA2 ポートがオンラインの場合は、 UTA / UTA2 ポートをオフラインにします。</block>
  <block id="de2f29988a1562cff5aece8243895ec3" category="paragraph">ターゲットモードのアダプタは、メンテナンスモードで自動的にオフラインになります。</block>
  <block id="f5127a07c0da9806f59a276c6a53e07b" category="list-text">[man_check_3_step8] 現在の設定が目的の用途に一致しない場合は、必要に応じて設定を変更します。</block>
  <block id="20a6fed477bc68dded7a110a5998c20e" category="admonition">テープドライブ、 FlexArray 仮想化システム、および MetroCluster 構成には、 FC イニシエータを使用する必要があります。SAN クライアントには FC ターゲットを使用する必要があります。</block>
  <block id="87f04db4bf78b3f620b7363444f3162e" category="list-text">システムを停止します。</block>
  <block id="42a282655a6bcf78e540d618abe8f39f" category="cell">保守モードで再起動します（「 boot_NetApp maint 」）</block>
  <block id="4ccd0b13a5d5d3be43ff2600a91655cc" category="list-text">[[step11]] 設定を確認します。</block>
  <block id="f2cc2cb82b7d41d7e5604b8610c271a3" category="cell">は V シリーズまたは FlexArray 仮想化ソフトウェアを備えており、ストレージアレイに接続されています</block>
  <block id="52b727613ccb81e1e924ffec991b2e74" category="paragraph">次の例の出力は ' アダプタ「 1b 」の FC4 タイプがイニシエータに変更されており ' アダプタ「 2a 」および「 2b 」のモードが「 cna' 」に変更されていることを示しています</block>
  <block id="fa05264b5c812e55c8ce27a16e3cb341" category="list-text">[[step12a] 次のいずれかのコマンドをポートごとに 1 回入力して、任意のターゲットポートをオンラインにします。</block>
  <block id="7bf32aee58782ae16c1d768b4bf38822" category="list-text">[[man_check_3_step13]] ポートをケーブル接続します。</block>
  <block id="ed79a6f393f23524ed190af7b250c69b" category="list-text">[[step14]] 次のいずれかの操作を実行します。</block>
  <block id="eb62d15c59e51a7bf19844fae4092453" category="cell">に進みます <block ref="3b6c063a8efbc88c969c7838f0611434" category="inline-link-macro-rx"></block>。</block>
  <block id="8ec15d413a08247a2b2856ae1be9d192" category="cell">_Install に戻り、 node3 をブートし、で再開します <block ref="a4103675c41ea57f7287e0804dd0c9dd" category="inline-link-macro-rx"></block>。</block>
  <block id="488c6e462745f03d8c1dfb3ba61f7258" category="list-text"><block ref="488c6e462745f03d8c1dfb3ba61f7258" category="inline-link-macro-rx"></block></block>
  <block id="a96ea627b3d5d65e112aacf5d7b2c1e1" category="inline-link-macro">node2 によって所有されている NAS データ LIF を node3 から node4 に移動し、 node4 にある SAN LIF を確認します</block>
  <block id="433d8081a28a0d8c06bf54d23d4e1297" category="list-text"><block ref="433d8081a28a0d8c06bf54d23d4e1297" category="inline-link-macro-rx"></block></block>
  <block id="1d92796a70af1d22c31d2b64c9064278" category="inline-link-macro">ノード 2 のルート以外のアグリゲートをノード 3 からノード 4 に再配置します</block>
  <block id="1de54c7e3bdf046761fff5d36a52656c" category="summary">元のノードと新しいノードでタスクを実行して、アップグレード用に元のノードを準備します。</block>
  <block id="2f0c5661dcce8bdab7165128442db993" category="list-text"><block ref="2f0c5661dcce8bdab7165128442db993" category="inline-link-macro-rx"></block></block>
  <block id="2751979c348fa4496d4f5e77b42bd6f7" category="inline-link-macro">ステージ 2 ：ノード 1 の再配置と撤去</block>
  <block id="1c4bcac5938cde9a8029f70ed983f129" category="list-text"><block ref="1c4bcac5938cde9a8029f70ed983f129" category="inline-link-macro-rx"></block></block>
  <block id="2bff11e37a7944fe4126fc6d0031317c" category="list-text"><block ref="2bff11e37a7944fe4126fc6d0031317c" category="inline-link-macro-rx"></block></block>
  <block id="5031d6e060f03ca2e474f28550af0fd8" category="inline-link-macro">ステージ 4 ：情報を記録し、 node2 を撤去</block>
  <block id="40e3db2ec211fe309d66e01bc6d6863f" category="list-text"><block ref="40e3db2ec211fe309d66e01bc6d6863f" category="inline-link-macro-rx"></block></block>
  <block id="a9e86788143677bb2fee738ac1306c36" category="list-text"><block ref="a9e86788143677bb2fee738ac1306c36" category="inline-link-macro-rx"></block></block>
  <block id="a8f4b0dd7dd43592ec02ea010ada1285" category="list-text"><block ref="a8f4b0dd7dd43592ec02ea010ada1285" category="inline-link-macro-rx"></block></block>
  <block id="8a934a6945c2524f52729212e6e676c1" category="doc">node2 によって所有されている NAS データ LIF を node3 に移動する</block>
  <block id="0798efe32af9ed8a849deddb03ef31cf" category="paragraph">アグリゲートを node2 から node3 に再配置したら、 node2 によって所有されている NAS データ LIF を node3 に移動する必要があります。</block>
  <block id="71f0ff9a99872664cb504bc17756a9a7" category="paragraph">アップグレード手順の実行中、リモート LIF は SAN LUN へのトラフィックを処理します。アップグレード時にクラスタやサービスの健全性を維持するために、 SAN LIF を移動する必要はありません。SAN LIF は、新しいポートにマッピングする必要がないかぎり移動されません。ノード 3 からノード 4 に LIF を移動し、ノード 4 がオンラインになったあとで、 LIF が正常に機能しており、適切なポートに配置されていることを確認する必要があります。</block>
  <block id="e2400a5784b6e69a68f8240fc8be98e0" category="list-text">[[step1] ノードごとに次のコマンドを入力し、出力をキャプチャして、 node2 が所有するすべての NAS データ LIF を一覧表示します。</block>
  <block id="1dfd4aeb9eb2d67718bb179a87daccb5" category="paragraph">次の例は、 node2 のコマンドの出力を示しています。</block>
  <block id="aa0c21cc929471b59f51bf7561edb3b2" category="cell">ノード 2 の条件</block>
  <block id="141b9f4f51c5a1d44c0555e2cab43f56" category="cell">インターフェイスグループまたは VLAN が設定されている</block>
  <block id="0cce85d021e13ea0d84461759b2a3b08" category="cell">に進みます <block ref="d5cd2572a667e81ae2cb0b0539de3785" category="inline-xref-macro-rx"></block>。</block>
  <block id="d7f8ef927cf7428c7625c268a1c951ef" category="cell">手順 3 を省略して、に進みます <block ref="2dd22df3b6260ee6ac1883b31af6d999" category="inline-xref-macro-rx"></block>。</block>
  <block id="6d3379271564572a595ab2fbc869131a" category="list-text">[man_move_lif_2_3_step3] 次の手順を実行して、 node2 のインターフェイスグループおよび VLAN でホストされている NAS データ LIF を移行します。</block>
  <block id="daaee2c9342de97c2c423f905e0ea71f" category="list-text">[[man_move_lif_2_3_substpa]] ノード 2 のインターフェイスグループでホストされているすべてのデータ LIF を、同じネットワーク上の LIF をホストできるノード 3 のポートに移行するには、各 LIF に対して 1 回、次のコマンドを入力します。</block>
  <block id="4fd830a8ef7653e7cc91a40076c34365" category="list-text">LIF のホームポートとホームノードを変更します <block ref="6c89c517e670ac026543379bd9a9844e" category="inline-xref-macro-rx"></block> 各ノードについて次のコマンドを 1 回入力して、 LIF を現在ホストしているポートとノードに接続します。</block>
  <block id="274dd4ace55dc7cc39f1a5eb3afbcbf1" category="list-text">[man_move_lif_2_3_substpc ]] node2 上の VLAN でホストされている LIF を、 node2 上のポートにノード 3 上のポートに移行します。その際、各 LIF に対して 1 回、次のコマンドを入力して、 VLAN と同じネットワーク上の LIF をホストできます。</block>
  <block id="9ad3609f9c94e5d3764345c4a95d6e85" category="inline-xref">サブステップ c</block>
  <block id="107232f6e653a89ac23c99590a7ea101" category="list-text">LIF のホームポートとホームノードを変更します <block ref="e5ef0b90c6e2aafbe1f927b2cb6685c9" category="inline-xref-macro-rx"></block> LIF をホストしているポートとノードに対して次のコマンドを 1 回入力します。</block>
  <block id="d113d66e692935f5a59a62900427b861" category="list-text">[man_move_lif_2_3_step4] 次のいずれかの操作を実行します</block>
  <block id="20cdfa79ed0499babc80c9a3f7d7297c" category="cell">- 完了しました <block ref="2da0d67c04c83434137e9b301dfd86dd" category="inline-xref-macro-rx"></block> から <block ref="12556117786215462f4f983b89f009f9" category="inline-xref-macro-rx"></block>。</block>
  <block id="44f77dbcf99acc01b3bf655a89bfcc5e" category="cell">手順 5 から 8 をスキップし、完了します <block ref="b80e3f5f2f06a1383cb71c69b52c021e" category="inline-xref-macro-rx"></block>。</block>
  <block id="7f84238811a0744aed44244f31a3bd53" category="cell">NAS と SAN の両方</block>
  <block id="da070fa74bde99b92534bf987c65a7e1" category="cell">- 完了しました <block ref="2da0d67c04c83434137e9b301dfd86dd" category="inline-xref-macro-rx"></block> から <block ref="ccd0910cd159fbfd70d254145a6c4d20" category="inline-xref-macro-rx"></block>。</block>
  <block id="1b8095077175bc0e7f7bb5fbb73e6504" category="list-text">[[man_move_lif_2_3_step5] プラットフォームで同じでないデータポートがある場合は、ブロードキャストドメインにポートを追加します。</block>
  <block id="2f563bb65059883cdd406846273f0ca4" category="paragraph">次の例は、ノード「 6280 」のポート「 e0a 」とノード「 8060-1 」のポート「 e0i 」を IPspace 「 Default 」のブロードキャストドメイン「 mgmt 」に追加します。</block>
  <block id="1062bb6c92253a8c9b640ee692419b26" category="list-text">[[step6] それぞれの LIF に対して次のコマンドを 1 回入力して、各 NAS データ LIF を node3 に移行します。</block>
  <block id="0049a5f9500f1de5ca8ef0f389c62f72" category="list-text">[[step7] 両方のノードで次のコマンドを入力し、 NAS LIF が正しいポートに移動されていること、および LIF のステータスが up になっていることを確認します。</block>
  <block id="6f72830bc34189a08fe7627d74d89f3b" category="list-text">[[man_move_lif_2_3_step8] いずれかの LIF が停止している場合は、各 LIF に対して 1 回次のコマンドを入力して、 LIF の管理ステータスを「 up 」に設定します。</block>
  <block id="ba45f9f836b05d2d37a836a9ed696d6f" category="list-text">[man_move_lif_2_3_step9] インターフェイスグループまたは VLAN が設定されている場合は、次の手順を実行します。</block>
  <block id="ef57ddf1d14f7687cdf12a4b023fe0ba" category="list-text">次のコマンドを入力し、その出力を調べて、ノードにインターフェイスグループが設定されているかどうかを確認します。</block>
  <block id="32c2f2dc33f1ff3a5d165af69042d610" category="paragraph">次の例に示すように、ノードのインターフェイスグループ情報が表示されます。</block>
  <block id="c02532d4249a0cf1658188c0c95a7129" category="list-text">ノードにインターフェイスグループが設定されている場合は、インターフェイスグループの名前とグループに割り当てられているポートを記録し、各ポートについて次のコマンドを 1 回入力してポートを削除します。</block>
  <block id="921eaa458ace17addc7c79b9466bf144" category="doc">node1 で所有されている NAS データ LIF を node2 から node3 に移動し、ノード 3 の SAN LIF を確認します</block>
  <block id="44bbe343e421273c157c5d1c833a433b" category="list-text">[[step1] ノードごとに次のコマンドを入力し、出力をキャプチャして、 node2 が所有していないすべての NAS データ LIF を一覧表示します。</block>
  <block id="4273a0997ee0d6df35945422d9f57ec6" category="cell">インターフェイスグループまたは VLAN が設定されている</block>
  <block id="31a8cab14d1d7febef6f8053dcd9552d" category="cell">インターフェイスグループまたは VLAN が設定されていません</block>
  <block id="8c5ada6be3ca66f32616fd020694ec45" category="list-text">[[man_lif_verify_3_step3]] 次の手順を実行して、インターフェイスグループおよび VLAN でホストされていた NAS データ LIF を、ノード 2 からノード 3 に移行します。</block>
  <block id="fd8bd88e1dcef54d04236465f2b87693" category="list-text">[[man_lif_verify_3_substpa]] インターフェイスグループ上の node1 に属していた node2 でホストされているデータ LIF を、同じネットワーク上の LIF をホストできる node3 のポートに移行するには、各 LIF に対して 1 回、次のコマンドを入力します。</block>
  <block id="630798093592f408d28e43d1a5875c4f" category="list-text">LIF のホームポートとホームノードを変更します <block ref="ffe3d697e3afcad8e9e0e14f978885cb" category="inline-xref-macro-rx"></block> LIF をホストしているポートとノードに対して次のコマンドを 1 回入力します。</block>
  <block id="569a27e0dcf14d4091837fcac510315b" category="list-text">[man_lif_verify_3_substpc ]] VLAN ポートでノード 1 に属していた node2 でホストされているすべてのデータ LIF を、同じネットワーク上の LIF をホストできるポート node3 に移行するには、各 LIF に対して 1 回、次のコマンドを入力します。</block>
  <block id="acdda21dc8c7ea3a875f05cfa2d42fb8" category="list-text">LIF のホームポートとホームノードを変更します <block ref="0ba0c3832c194a002bde244af82cc6e8" category="inline-xref-macro-rx"></block> LIF をホストしているポートとノードに対して次のコマンドを 1 回入力します。</block>
  <block id="f0de8680ab31eb7304741a5d6c335bce" category="list-text">[man_lif_verify_3_step4] 次のいずれかの操作を実行します</block>
  <block id="99025819fe651e3a15c4cafd9ba07587" category="list-text">[man_lif_verify_3_step5] プラットフォームで同じでないデータポートがある場合は、ブロードキャストドメインにポートを追加します。</block>
  <block id="76b84f6ac9c180bd922bf1f7f126e4f3" category="list-text">[man_lif_verify_3_step6] それぞれの LIF に対して次のコマンドを 1 回入力して、各 NAS データ LIF を node3 に移行します。</block>
  <block id="2a315513f7616cc1af14936ea2d874e2" category="list-text">[man_lif_verify_3_step7] データ移行が永続的であることを確認します。</block>
  <block id="2a5c2b7daa59600bf737f8138fa7c5d8" category="list-text">LIF のステータスを「 down 」に設定します。</block>
  <block id="95ecba7b6bea27535042e5096f91549c" category="list-text">いずれかのノードで次のコマンドを入力し、その出力を調べて、 LIF が正しいポートに移動されていること、およびいずれかのノードで次のコマンドを入力して LIF のステータスが「 up 」になっていることを確認します。</block>
  <block id="2e0b337c1378c2a234102f1198e8adba" category="list-text">[[man_lif_verify_3_step11]] いずれかの LIF が停止している場合は、次のコマンドを 1 回入力して、各 LIF について LIF の管理ステータスを「 up 」に設定します。</block>
  <block id="78036b97ca6165fc32dd17167726e77f" category="list-text">アップグレード後に行う AutoSupport メッセージを node1 のネットアップに送信します。</block>
  <block id="30c652bad12788fabddea0712def2e8e" category="doc">ONTAP 9.1 以降の FC スイッチレイアウトを再設定します</block>
  <block id="d30f280fa32f9327e8485ff0aa1b5b70" category="paragraph">既存の FC スイッチレイアウトが ONTAP 9.1 より前に構成されていた場合は、ポートレイアウトを再構成して、最新のリファレンス構成ファイル（ RCF ）を適用する必要があります。この手順は、 MetroCluster FC 構成にのみ適用されます。</block>
  <block id="37ce42e81f71d3eac5866566739a5a56" category="paragraph">ファブリックドメイン内の FC スイッチを特定する必要があります。</block>
  <block id="f2bd3f00211cc48acb66c611b574098b" category="paragraph">管理パスワードと FTP サーバまたは SCP サーバへのアクセスが必要です。</block>
  <block id="19c0b52227bc66456bf8c55fcff3eb89" category="paragraph">既存の FC スイッチレイアウトが ONTAP 9.1 より前に構成されたもので、 ONTAP 9.1 以降でサポートされるプラットフォームモデルにアップグレードする場合は、このタスクを実行する必要があります。ONTAP 9.1 以降用に設定された既存のスイッチレイアウトからアップグレードする場合は、 _not_required です。</block>
  <block id="27370eebc219409a38405d3941b09a1a" category="paragraph">この手順はシステムを停止せずに実行でき、ディスクが初期化されている場合は約 4 時間で完了します（ラックとスタックは除く）。</block>
  <block id="51c3ff1ea95b633c723b087fbf10b31f" category="inline-link-macro">カスタム AutoSupport メッセージは、スイッチの再設定前に送信します</block>
  <block id="cd7f6b17ef2ed204c4c6382062e38468" category="list-text"><block ref="cd7f6b17ef2ed204c4c6382062e38468" category="inline-link-macro-rx"></block></block>
  <block id="ef6f40d3ce7e7a9983b40931e61073f2" category="list-text"><block ref="ef6f40d3ce7e7a9983b40931e61073f2" category="inline-link-macro-rx"></block></block>
  <block id="3ff5cf5ad1c2c9c9e30693bbeb4d8306" category="list-text"><block ref="3ff5cf5ad1c2c9c9e30693bbeb4d8306" category="inline-link-macro-rx"></block></block>
  <block id="21a86fa1fb645db8452b527892434bd3" category="inline-link-macro">スイッチを永続的に無効にします</block>
  <block id="a7cd0f7276da428232eaddd32f025cec" category="list-text"><block ref="a7cd0f7276da428232eaddd32f025cec" category="inline-link-macro-rx"></block></block>
  <block id="7fc77faa536c8e7ba6f065e5930679ee" category="inline-link-macro">新しいケーブルレイアウトを決定します</block>
  <block id="1e3a603a58f58380bbf882725903f11b" category="list-text"><block ref="1e3a603a58f58380bbf882725903f11b" category="inline-link-macro-rx"></block></block>
  <block id="d627b57cf15134483e5785196cf7030f" category="inline-link-macro">RCF ファイルを適用し、スイッチを再接続します</block>
  <block id="d59f7f355b5fe1cff54983019e740407" category="list-text"><block ref="d59f7f355b5fe1cff54983019e740407" category="inline-link-macro-rx"></block></block>
  <block id="f3c7f494d0dbc1a358d6608915190a02" category="inline-link-macro">スイッチを永続的に有効にします</block>
  <block id="7fbb5636a5ddbbcf8eb4ac03b417349e" category="list-text"><block ref="7fbb5636a5ddbbcf8eb4ac03b417349e" category="inline-link-macro-rx"></block></block>
  <block id="0e8d966af50d635bc6072c43a2909953" category="list-text"><block ref="0e8d966af50d635bc6072c43a2909953" category="inline-link-macro-rx"></block></block>
  <block id="56b7bc3034bef19019ebfa88f6cac964" category="paragraph">「 storage aggregate relocation start 」、「 override-vetoes 」、および「 override-vetoes destination-checks 」オプションの詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ONTAP 9 コマンド：マニュアルページリファレンスにリンクするには、次の手順を実行します。</block>
  <block id="de10ab1a09136633c0a0d61641d1973a" category="list-text">[man_aggr_ffail _step1] 次のコマンドを入力して、アグリゲートのリストを表示します。</block>
  <block id="d741a7f5a9101301995b152ddb32e5b0" category="list-text">[[step2] の出力を比較します <block ref="fd60626f79429d907548fd26d9ef209a" category="inline-xref-macro-rx"></block> セクションで node1 用に取得した出力を確認します <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block> 再配置されていないアグリゲートがあることを確認します。</block>
  <block id="51cad6c5dffb7d53bbb0121b4ba9d369" category="list-text">[man_aggr_fil_Step3] ノード 4 の背後にあるアグリゲートの再配置を行います。</block>
  <block id="f51f0d388b73026dbf95e6d91f6386c1" category="list-text">次のコマンドを入力して、 node3 がアグリゲートのホームの所有者になっていることを確認します。</block>
  <block id="5bf0f8993606c9f18dbf04cc257eab62" category="paragraph">ノード 3 をホーム所有者としないアグリゲートは、の同じ再配置コマンドを使用してノード 3 に再配置できます <block ref="d5a5e127c26ff67c138bce9a8ae2c1fa" category="inline-xref-macro-rx"></block>。</block>
  <block id="0570d4a42e9be3c955a39beb93846d1e" category="paragraph">ただし、ノード 1 にインストールされている ONTAP 9 のバージョンが同じかそれ以降である場合は、ノード 3 をネットブートする必要はありません。</block>
  <block id="1b5474698e4bc6bfa928589ed23b1571" category="list-text">[[man_install3_step1] ノード 3 のラックスペースがあることを確認します。</block>
  <block id="773d119bfcf7806a94138f5cf32996fe" category="list-text">[[step2] ノードモデルの _ インストールおよびセットアップ手順 _ に従って、ラックにノード 3 をインストールします。</block>
  <block id="5528857f98fded77afccd9d97a9a0711" category="list-text">[[step3]] ケーブルノード 3 を接続し、ノード 1 からノード 3 に接続を移動します。</block>
  <block id="e233e040e6ab1ade1870396947dd6b5a" category="admonition">ほとんどのプラットフォームモデルには一意のインターコネクトカードモデルがあるため、インターコネクトカードまたはクラスタインターコネクトケーブルの接続を node1 から node3 に移動する必要はない場合があります。MetroCluster 構成の場合、 FC-VI ケーブルの接続を node1 から node3 に移動する必要があります。新しいホストに FC-VI カードがない場合は、 FC-VI カードの移動が必要になることがあります。</block>
  <block id="63cc66bd900313017fb0834b1cbbbc81" category="list-text">[[man_install3_step4]] ノード 3 の電源をオンにしてから、コンソール端末で Ctrl+C キーを押してブートプロセスを中断し、ブート環境プロンプトにアクセスします。</block>
  <block id="6c2cb2a49908831d5791f25bb5371a3d" category="list-text">[[man_install3_step5]] で警告メッセージが表示される場合 <block ref="189d751c0d059b7e2fcaef080c81111f" category="inline-xref-macro-rx"></block>を使用して、次の操作を実行します。</block>
  <block id="7efd430adfeaf9ea4f3e48e21d2c4f96" category="admonition">* 注意 * ：遅延は無視しないでください。バッテリーの充電に失敗すると、データが失われるおそれがあります。</block>
  <block id="5b8c681411bac96a813b6b62eba17d9c" category="list-text">[[man_install3_step6] 次のいずれかの操作を実行します。</block>
  <block id="ad9768b53d0a33cd1368bd0b1d373a3b" category="cell">手順 7 から 12 を省略して、に進みます <block ref="85131af613f0169831e213f11ca11041" category="inline-xref-macro-rx"></block>。</block>
  <block id="6dd9e2c232d9aa889adc2bdc1d259396" category="list-text">に進みます <block ref="fae618cfa140cbca52d057afef5df1da" category="inline-link-macro-rx"></block> をクリックし、サブセクションを完了します <block ref="b874d68563e926f19d0f15015f15f190" category="inline-link-macro-rx"></block> および <block ref="a9e7644d0d01665bbdf613cdb831fa7f" category="inline-link-macro-rx"></block>必要に応じて、システムに適用されます。</block>
  <block id="66b6cfbf89b613b9a80d84ec1d7b5fa0" category="list-text">このセクションに戻って、から始めて残りの手順を実行します <block ref="239474d202713b3a406727408fd68f72" category="inline-xref-macro-rx"></block>。</block>
  <block id="120d825f771126cb963c76c2ff005e6d" category="list-text">[man_install3_step7] 新しいノードの FC イニシエータポートをスイッチゾーンに追加します。</block>
  <block id="12aae7624013a12c0ade8f6f2e309d62" category="paragraph">システムにテープ SAN がある場合は、イニシエータをゾーニングする必要があります。手順については、ストレージアレイおよびゾーニングに関するドキュメントを参照してください。</block>
  <block id="0dd10d8b45274d5c198af78bfab2e446" category="list-text">[man_install3_step8] FC イニシエータポートをストレージアレイに新しいホストとして追加し、アレイ LUN を新しいホストにマッピングします。</block>
  <block id="5cca5c853f000ca16ba17533a6116cd7" category="list-text">[[man_install3_step9] ストレージアレイのアレイ LUN に関連付けられたホストまたはボリュームグループでの World Wide Port Name （ WWPN ；ワールドワイドポート名）の値を変更します。</block>
  <block id="6a81c1ece5ddd721a1ff7521454f87c9" category="list-text">[man_install3_step10] ：構成でスイッチベースのゾーニングを使用している場合は、ゾーニングを調整して新しい WWPN 値を反映させます。</block>
  <block id="fa1040cb978ca2065cad32e28e6d9d58" category="list-text">[[man_install3_step11]] アレイ LUN が node3 に表示されることを確認します。</block>
  <block id="d8096974edc78f9fe2db726869876695" category="paragraph">各 FC イニシエータポートで認識されるすべてのアレイ LUN が表示されます。アレイ LUN が表示されない場合は、このセクションで後述する node1 から node3 にディスクを再割り当てすることはできません。</block>
  <block id="b69192040391e08f61402b09c27822b8" category="list-text">[[man_install3_step12]] Ctrl+C キーを押してブートメニューを表示し、メンテナンスモードを選択します。</block>
  <block id="fe85761838c7d215174afe4ace6c66f0" category="list-text">[[man_install3_step13]] メンテナンスモードのプロンプトで、次のコマンドを入力します。</block>
  <block id="907c22891918b5b80e66731ae6eed77e" category="list-text">[[man_install3_step14]] 次のいずれかの操作を実行します</block>
  <block id="8b2f23f3c3f7445164b524932e61d65b" category="cell">アップグレード後のシステムの構成</block>
  <block id="1f00007c6687ede4ed2d2b6e91ce451d" category="cell">デュアルシャーシ構成（コントローラが別々のシャーシに搭載されている場合）</block>
  <block id="1ec921c80439dda2ee883653fa1acb7b" category="cell">に進みます <block ref="4332c8cc4c85f33bda2a347fe16e2dc6" category="inline-xref-macro-rx"></block>。</block>
  <block id="0471a95f16e566048e66f2d81f432967" category="cell">シングルシャーシ構成（コントローラが同じシャーシに搭載されている場合）</block>
  <block id="0aaa18e158b2b22ed630223549710480" category="list-text">コンソールケーブルを node3 から node4 に切り替えます。</block>
  <block id="ffb09ffc35bea252e4e21d97d6400ddf" category="list-text">ノード 4 の電源をオンにしてから、コンソール端末で Ctrl+C キーを押してブートプロセスを中断し、ブート環境プロンプトにアクセスします。</block>
  <block id="85418bdb866bf209cc89fc9250fd0f04" category="paragraph">両方のコントローラが同じシャーシ内にある場合は、電源はすでにオンになっているはずです。</block>
  <block id="620bed07fd84663ccd35004111b0a13c" category="list-text">に警告メッセージが表示される場合は <block ref="189d751c0d059b7e2fcaef080c81111f" category="inline-xref-macro-rx"></block>の手順に従ってください <block ref="593996bb06ec10671cada9089fb35dd4" category="inline-xref-macro-rx"></block></block>
  <block id="a70d58ca96ede2bc6122de5eaba9afaf" category="list-text">コンソールケーブルを node4 から node3 に戻します。</block>
  <block id="7c0d2cf152b2cde561a140a996176952" category="list-text">[[man_install3_step15]] ONTAP の node3 の設定：</block>
  <block id="0546806bd19b344e7d0ca13460d96992" category="list-text">[[man_install3_step17]] node3 にインストールされている ONTAP のバージョンが、 node1 にインストールされている ONTAP 9 のバージョンと同じかそれ以降である場合は、ディスクをリストして新しい node3 に再割り当てします。</block>
  <block id="b04b66d312941ba2b1d5910ec5f5fb36" category="list-text">[[man_install3_step18]] CTRL-C を押してブートメニューを表示します。</block>
  <block id="7be8c6136747afe24ab6f25f931c2451" category="list-text">[[man_install3_step19]] 次のいずれかの操作を実行します</block>
  <block id="b65dee077de24058e64aa96e60e2a56a" category="cell">Does _ not_ have the correct or current ONTAP version on node3 （ノード 3 に正しい バージョンまたは現在の バージョンがありません</block>
  <block id="a17dd4e0d7995e108ec012fad7f027d2" category="cell">に進みます <block ref="f66707bf1ec53e37a427dd9510962619" category="inline-xref-macro-rx"></block>。</block>
  <block id="de22fad1fba6c28f624ef4e272674d1c" category="cell">ノード 3 に正しいバージョンまたは最新バージョンの ONTAP があること</block>
  <block id="46f709b9c191a3a487187b13c2365dfb" category="cell">に進みます <block ref="c27981c94d7a26c42c925c89e96e7aa2" category="inline-xref-macro-rx"></block>。</block>
  <block id="fd96d8e5cccd1d83cf17d6327a03d1c6" category="list-text">[[man_install3_step20]] 次のいずれかの操作を実行して、ネットブート接続を設定します。</block>
  <block id="c6515be7805d880dbdafbd44b289b127" category="list-text">[[man_install3_step21] ノード 3 でネットブートを実行します。</block>
  <block id="060bac7551430a178937e2648b5887ad" category="cell">netboot\http://web_server_ip/path_to_webaccessible_directory/netboot/kernel`</block>
  <block id="00b4984c2d25fdcefc8d29921eef1f1e" category="cell">netboot\http://web_server_ip/path_to_webaccessible_directory/ontap_version_image.tgz`</block>
  <block id="2fb52103bc9daf7b4aede017a96951c9" category="list-text">[man_install3_step22]] ブートメニューから、オプション * （ 7 ） Install new software * first を選択します。</block>
  <block id="69a0e067620a40fba4263752d3fe4568" category="paragraph">コントローラのアップグレードではなく、 ONTAP による環境の無停止アップグレードも記録されています。</block>
  <block id="04099f33ed449c6b9e9de3b50608f5b9" category="list-text">[man_install3_step23]] 手順を続行するかどうかを確認するメッセージが表示されたら 'y`' と入力し ' パッケージのプロンプトが表示されたら ' 次の URL を入力します</block>
  <block id="3c0f763f2bc1dd7e6fadcfba8981f852" category="paragraph">http://web_server_ip/path_to_web-accessible_directory/ontap_version_image.tgz` にアクセスします</block>
  <block id="2c7541d49584476284eeeb476f886996" category="list-text">[[man_install3_step24]] 次の手順を実行します</block>
  <block id="f5344ffb10f5a3797c46c51d263a2247" category="list-text">[man_install3_step25]] '*(5) Maintenance mode boot を選択しますこれには '5` を入力し ' ブートを続行するように求められたら 'y' を入力します</block>
  <block id="785f077ce03eca259bde1ebc98236191" category="list-text">[[man_install3_step26]] 続行する前に、に進みます <block ref="fae618cfa140cbca52d057afef5df1da" category="inline-link-macro-rx"></block> ノードの FC ポートまたは UTA / UTA2 ポートに必要な変更を加えるため。</block>
  <block id="28d8bed0b221acc406520dd121da3607" category="paragraph">これらのセクションで推奨される変更を行ってからノードをリブートし、メンテナンスモードに切り替えます。</block>
  <block id="3c2b28e2fbf2a2223e837ab88d03f849" category="list-text">[[man_install3_step27]] node3 のシステム ID を確認します。</block>
  <block id="11856588314d0c959b2b916a938edde8" category="inline-link-macro">ルート以外のアグリゲートを node1 から node2 に再配置します。</block>
  <block id="5193fe09e1ceefb41d5d867b112b9d76" category="list-text">[man_install3_step28] 再割り当てするノードのスペア、ルートに属するディスク、およびでノード 2 に再配置されなかったルート以外のアグリゲート <block ref="b90d8347ded957c31748eee44116abad" category="inline-link-macro-rx"></block>。</block>
  <block id="e58f70cf5e99e435b7646dac5761bf14" category="paragraph">システムに共有ディスクがあるかどうかに応じて、適切な形式の「 disk reassign 」コマンドを入力します。</block>
  <block id="b7e4748ce69e686648ca756a108c4b9a" category="cell">ディスクタイプ</block>
  <block id="7dcd3c42056665a1fe2861837141a4ef" category="cell">実行するコマンド</block>
  <block id="4f477aa8d74177d31f1821bc7c80ca24" category="cell">ディスクを共有しない</block>
  <block id="41ba4da5f40ea13d5dbc91aee57574fa" category="list-text">[man_install3_step29]] 「 n` 」と入力します。</block>
  <block id="fa85c8699d7f56dacbb4e8faea6f7ca9" category="list-text">[man_install3_step30]] 「 y 」と入力します</block>
  <block id="3048e99df5c1d939bc99597cf7c39563" category="list-text">[man_install3_step31]] 「 y 」と入力します。</block>
  <block id="d3d32ef75ce9ff503846dd7cba71bf68" category="admonition">* 警告 * ：次の手順を記載された順序で実行する必要があります。正しく実行しないと、原因が停止したり、データが失われたりする可能性があります。</block>
  <block id="78eac47117b1548ba46bbe2c967c2d0e" category="list-text">必要に応じて、 node1 アグリゲートをオンラインにします。</block>
  <block id="b954307d2b22ae21f23dbb0d3021f158" category="list-text">[man_install3_step33]] コントローラとシャーシが 'ha' として構成されていることを確認します</block>
  <block id="87e6946315bfe910b90ed3288541cb11" category="paragraph">次に、 ha-config show コマンドの出力例を示します。</block>
  <block id="915fe2ff566601b3b69119813a6a715c" category="paragraph">コントローラとシャーシが「 HA 」として構成されていない場合は、次のコマンドを使用して構成を修正します。</block>
  <block id="43a7c5c250e7fdd6688e153749ea1e66" category="list-text">[man_install3_step34]] ノード 3 のメールボックスを破棄します</block>
  <block id="8d299662551d8d2c41258f4f6d6c9a12" category="paragraph">コンソールに次のメッセージが表示されます。</block>
  <block id="675438e125383dfd4814c428aefc13d8" category="list-text">[man_install3_step35]] ローカルメールボックスを破棄することを確認するプロンプトで 'y' を入力します</block>
  <block id="0f364398a13cd3160c5a3eba4374e4ce" category="list-text">[[man_install3_step36]] メンテナンスモードを終了します。</block>
  <block id="6c2cda43f17004428fa50b03b8e373c3" category="list-text">[man_install3_step37]] node2 で、システムの日付、時刻、およびタイムゾーンを確認します。</block>
  <block id="dd26f958a5b55f32337b614d1f3ab0b4" category="list-text">[man_install3_step38]] ノード 3 で、ブート環境プロンプトで日付を確認します。</block>
  <block id="0c06e4208a8e928e9b4bef1d6977045b" category="list-text">[[man_install3_step39]] 必要に応じて、 node3 の日付を設定します。</block>
  <block id="837e654f683f43c3c5fa5a8cbc3e1758" category="list-text">[man_install3_step40]] ノード 3 で、ブート環境のプロンプトで時刻を確認します。</block>
  <block id="eddc7836dd13de8cd3248be302e5a1a2" category="list-text">[[man_install3_step41] 必要に応じて、 node3 に時間を設定します。</block>
  <block id="39556538db3e5f05fbb53219f4983f96" category="inline-xref">手順 28</block>
  <block id="7485a5597807044bfa9f5d885f51e65e" category="list-text">[[man_install3_step42]] パートナーシステム ID がで説明したとおりに正しく設定されていることを確認します <block ref="a332b57e87c8a775e38e07b999240874" category="inline-xref-macro-rx"></block> アン下の -p スイッチ：</block>
  <block id="ec135f98d38764e511e3c524db87080e" category="list-text">[[man_install3_step43] 必要に応じて、 node3 にパートナーシステム ID を設定します。</block>
  <block id="7cab439150d9019f1bfd1705f608418d" category="list-text">[man_install3_step44]] ブート環境プロンプトでブートメニューにアクセスします</block>
  <block id="09022876876a6198264f6a07698a4d4c" category="list-text">[man_install3_step45]] ブートメニューで ' プロンプトで '6` を入力して 'option *(6) Update flash from backup config* を選択します</block>
  <block id="e5dbae26747d85c8b1145f23fe152ba6" category="list-text">[[man_install3_step46]] プロンプトで「 y 」と入力します。</block>
  <block id="8a149c3025530503ca7711ed784cd091" category="paragraph">ブートが正常に続行され、システム ID の不一致を確認するよう求められます。</block>
  <block id="c818f07a4851d5ab8b1a806cff312e25" category="list-text">[[man_install3_step47]] 次の例に示すように、不一致を確認します。</block>
  <block id="fb74f9c51a3457e88ae16fbed6c6b978" category="paragraph">正常にブートする前に、ノードが 1 回限りのリブートを実行する可能性があります。</block>
  <block id="f52332ab232b64dcde0ca0ea781c1755" category="list-text">[[man_install3_step48]] node3 にログインします。</block>
  <block id="0d5eded42a5e8cbfa58553f5dd4cd263" category="summary">node2 のルート以外のアグリゲートを node3 に再配置したら、そのアグリゲートを node3 から node4 に再配置する必要があります。</block>
  <block id="a6bef5c01b3429b867cf90c4a3de3fac" category="list-text">[[man_relocate_3_4_Step1] いずれかのコントローラで次のコマンドを入力し、出力を調べて再配置するルート以外のアグリゲートを特定します。</block>
  <block id="d7a08960a9315fad49e6564d33d4cb9c" category="list-text">次の手順を実行して、アグリゲートを再配置します。</block>
  <block id="8e8511da8932baf12f2a23e74d02e1c7" category="list-text">いずれかのノードで次のコマンドを入力して、 advanced 権限レベルにアクセスします。</block>
  <block id="1aa99f376709f3c0651ec2c29125ea92" category="paragraph">アグリゲートリストは、で取得したノード 4 が所有するアグリゲートのリストです <block ref="ba9af23ac982f5cc7837b1ecc9c3cb47" category="inline-xref-macro-rx"></block>。</block>
  <block id="35b5d5d5526d39377fa3fde3fe0919cd" category="paragraph">再配置はバックグラウンドで実行されます。アグリゲートの再配置には数秒から数分かかる場合があります。この時間には、クライアントの停止部分と停止部分の両方が含まれます。このコマンドでは、オフラインまたは制限されたアグリゲートが再配置されません。</block>
  <block id="edcc2ad4cfcd55c9715e9c9b93b871f5" category="list-text">[[step3]] 再配置のステータスを確認します。</block>
  <block id="435f14e8c9936aa21efde9eac795b40f" category="paragraph">アグリゲートが再配置されると、そのアグリゲートに対しては「 1 」と表示されます。</block>
  <block id="48cbb5f03f0f49e19a1fa9ce8f82961f" category="admonition">node2 のすべてのアグリゲートが再配置されてノード 4 に再配置されてから、次の手順に進みます。</block>
  <block id="b81c90895c008292ba5de518bf5f82a3" category="cell">再配置する対象</block>
  <block id="ffd498a9668905f8533b8e27b647969c" category="cell">すべてのアグリゲートが完了しました</block>
  <block id="80e9ee80960399cedd826a005aef0a59" category="cell">に進みます <block ref="77e0750fdfbf6d57fd18f2bfe5d7ed8c" category="inline-xref-macro-rx"></block>。</block>
  <block id="773fa54d2a554dd5ed9a1437e409ed98" category="cell">アグリゲートに障害が発生したか、拒否された</block>
  <block id="2716a9803b0e07013e6cd314ef080ce2" category="list-text">EMS ログで対処方法を確認します。</block>
  <block id="434233acf6409db55ccbef4618a05f4c" category="list-text">対処方法を実行します。</block>
  <block id="32a147207e605041251ef80abd4e6acf" category="paragraph">アグリゲートリストには、障害が発生したアグリゲートまたは拒否されたアグリゲートが表示されます</block>
  <block id="7b6a4090ff6553e6b643348d522b6560" category="list-text">次のコマンドを入力して、 admin レベルに戻ります。</block>
  <block id="91fabe0a54e8933e0d8a78d90297363f" category="paragraph">必要に応じて、次のいずれかの方法で強制的に再配置を実行できます。</block>
  <block id="fac06d8e56699ef41a841be6b176ebd7" category="list-text">拒否チェックの無視</block>
  <block id="2af820da1a1b18a7aaeb296667169248" category="paragraph">「 storage aggregate relocation start -override-vetoes -nd-controller-upgrade 」を実行します</block>
  <block id="d43b683fda30183131790fb642203a1d" category="list-text">デスティネーションチェックの無効化</block>
  <block id="01c6e1a269dc83c83d6e3aa64688f33f" category="paragraph">「 storage aggregate relocation start -override-destination-checks -ndocontroller -upgrade 」を参照します</block>
  <block id="74e5caecf2b87f363c4a9dae7dca9c15" category="list-text">[man_relocate_3_4_Step5] - ノード 2 のすべての非ルートアグリゲートがオンラインであり、ノード 4 の状態であることを確認します。</block>
  <block id="ba83d23180997e074fb16dcfc2cd6da8" category="paragraph">node2 アグリゲートがのコマンドの出力に表示されています <block ref="ba9af23ac982f5cc7837b1ecc9c3cb47" category="inline-xref-macro-rx"></block>。</block>
  <block id="176e1e5a47c3db6bc56e4ccb10905065" category="list-text">オフラインになったアグリゲートや外部になったアグリゲートがある場合は、各アグリゲートに対して次のコマンドを使用してオンラインにします。</block>
  <block id="00751ef0752943fad6f5c251990dbefb" category="list-text">ノード 2 のアグリゲート内のすべてのボリュームがノード 4 でオンラインになっていることを確認します。</block>
  <block id="9fe3979261ad706bcee5b4c047e18834" category="list-text">ノード 4 でオフラインになっているボリュームがある場合は、オンラインにします。</block>
  <block id="54ab7b4b354c31db3c1958974da7349a" category="list-text">ノード 4 のアップグレード後の AutoSupport メッセージをネットアップに送信します。</block>
  <block id="9fe5e1c0bb75be0e3f5f145103e72caa" category="cell">ONTAP 9.5 以前</block>
  <block id="6bdf9080f49ca89e65220e312d51e688" category="list-text">次のコマンドを使用して、キー管理サーバを追加します。</block>
  <block id="0dd9d4ff0944e970430f96022e169191" category="list-text">次のコマンドを使用して、キー管理サーバが正常に追加されたことを確認します。</block>
  <block id="3bf7f9a82df0c130b46780052ca49e4c" category="list-text">次のコマンドを使用して、新しいノードでキー管理サーバセットアップウィザードを起動します。</block>
  <block id="ce647643e8b085a9425f156173190659" category="list-text">外部キーマネージャ（ EKD ）の認証を復元します。</block>
  <block id="a5e463e5138622ba8c2355b41f67a0ff" category="paragraph">このコマンドには、オンボードキーマネージャ（ OKM ）のパスフレーズが必要です</block>
  <block id="ce4c94d5e669859aacda58a7f2429ddf" category="cell">その他すべての ONTAP バージョン</block>
  <block id="841196916665de2571df2fa230353881" category="paragraph">認証キーを使用できなかったか、外部キー管理サーバにアクセスできなかったためにボリュームがオフラインになっていないかを確認します。次のコマンドを使用して、ボリュームをオンラインに戻します。</block>
  <block id="6d507e4601f1378ea8dbc7446cb265dd" category="paragraph">「 volume online 」と入力します</block>
  <block id="fedb2a32e0130d4ae814cd5cc418f72f" category="list-text">[[step1] 次の手順を実行して、ルート以外のアグリゲートを再配置します。</block>
  <block id="db3c32b2915aa7ffd2fcacb5e017dbc9" category="list-text">ノード 1 で次のコマンドを入力して、再配置ステータスを確認します。</block>
  <block id="d550e31a6ccbb056c2d7ab1e68692363" category="admonition">ノード 1 に所有されているルート以外のアグリゲートがすべて node2 に再配置されてから、次の手順に進みます。</block>
  <block id="b77ef5d765d72155b0da6da7cb47f0ed" category="cell">再配置の場合</block>
  <block id="b15b9b498c001e92853f9fea21ef7ef8" category="cell">作業</block>
  <block id="a0fba600b5c045fae79ae007d77c6f09" category="cell">すべてのアグリゲートのすべてが完了しました</block>
  <block id="2ac86beb93582e4754639412014b59eb" category="cell">に進みます <block ref="449ef68af8e0094cdf2287c1416d1ff3" category="inline-xref-macro-rx"></block>。</block>
  <block id="1141d7067c13df20d6186fc00309e10b" category="cell">いずれかのアグリゲートに障害が発生するか、または拒否されます</block>
  <block id="9eb367512ec712e8def159a017644487" category="list-text">admin レベルに戻ります。必要に応じて、次のいずれかの方法で強制的に再配置を実行できます。</block>
  <block id="a927bee35dc67490b39aa8c4291ca745" category="list-text">拒否のチェックを無視：「 storage aggregate relocation start -override-vetoes true -nd-controller-upgrade</block>
  <block id="592a7b363e77ec54f4a9454a15b2fa70" category="list-text">デスティネーションのチェックを無効にします。「 storage aggregate relocation start -override-destination-checks true -nd-controller-upgrade</block>
  <block id="dc1c151c89f0b15dbd97af39108f3403" category="list-text">[man_relocate_1_2_step4] ルート以外のすべてのアグリゲートがオンラインであり、 node2 にあるそれらの状態を確認します。</block>
  <block id="5614977b273243c18da92e09a399f4ff" category="list-text">node2 で次のコマンドを入力し、出力を調べて、すべてのボリュームがオンラインであることを確認します。</block>
  <block id="c5fde6e8a15ba7f224d13ea83e3c2c34" category="paragraph">このコマンドで使用する「 vserver -name 」は、前の「 volume show 」コマンドの出力にあります。</block>
  <block id="9b65be5be5396e39e6973853034324bc" category="list-text">node2 で次のコマンドを入力します。</block>
  <block id="7fb67b5bff7cd5b5583c80436154eeca" category="paragraph">出力に次のメッセージが表示されます。</block>
  <block id="bc50ecc4b8edbc1374bfa0e110d2cdf4" category="list-text">node1 のルート以外のアグリゲートがオンラインになっていないことを確認します。</block>
  <block id="e68954fba0117f19310a10c0e5f075ec" category="paragraph">出力には、すでに node2 に再配置されているオンラインのルート以外のアグリゲートは表示されません。</block>
  <block id="81a9550623341df13e0aba0c1ee5a8fb" category="doc">スイッチを永続的に無効にします</block>
  <block id="54df0e073e21c236c69bb55be46a0eef" category="paragraph">ファブリックの構成を変更できるように、ファブリック内のスイッチを永続的に無効にする必要があります。</block>
  <block id="ede6141978802cdf393c52a40bfc7002" category="paragraph">スイッチを無効にするには、スイッチのコマンドラインでコマンドを実行します。使用するのは ONTAP コマンドではありません。</block>
  <block id="f93acf16d7cf836bd48acbaead6bc9d8" category="paragraph">スイッチを永続的に無効にします。</block>
  <block id="616a5e8ee58c5b9f34f27c22233e48ac" category="list-text">Brocade スイッチの場合は、「 witchCfgPersistentDisable 」コマンドを使用します。</block>
  <block id="cc28c008eb62a2601a150836c9ef2378" category="list-text">Cisco スイッチの場合は 'uspend' コマンドを使用します</block>
  <block id="1e4597321089186160edaf9ec94c2070" category="paragraph">次のコマンドは Brocade スイッチを永続的に無効にします。</block>
  <block id="b537a2a134134343c8340992032bb870" category="paragraph">次のコマンドは、 Cisco スイッチを無効にします。</block>
  <block id="5558cf6a71b5cb1c7c5c61639dd48b9f" category="doc">アップグレード後に LIF が無効なポートに接続されています</block>
  <block id="5f1f479c27b40118bdce39d08fd87e39" category="paragraph">アップグレードの完了後、 MetroCluster 構成を使用している場合は、誤ったポートに FC 論理インターフェイス（ LIF ）が残っている可能性があります。再同期処理を実行して、 LIF を正しいポートに再割り当てすることができます。</block>
  <block id="c5f17233f63f2587b0691c2790a00316" category="list-text">MetroCluster を正しいポートに再割り当てするには、「 cifs vserver resync 」コマンドを入力します。</block>
  <block id="94c0a6a874300fcf012d00a23a1b673f" category="list-text"><block ref="94c0a6a874300fcf012d00a23a1b673f" category="inline-link-macro-rx"></block></block>
  <block id="db8240142a1ffdbfbb676c4fa3739110" category="list-text"><block ref="db8240142a1ffdbfbb676c4fa3739110" category="inline-link-macro-rx"></block></block>
  <block id="c1b0decfff03539572f29fa76c9fa6a8" category="list-text">システムプロンプトで、 node4 にログインします。</block>
  <block id="3be6725513a330b5d11f9b5f7999fb8b" category="list-text">ノード 4 がノード 3 と同じクラスタに含まれていること、および正常であることを確認します。</block>
  <block id="85d0ae2423c3b64edbdd304078db296d" category="list-text">ノード 4 がノード 3 と通信できること、およびすべての LIF が動作していることを確認します。</block>
  <block id="a977a3a71a2db8bc73e5bd38f68aa82d" category="cell">ノード 4 の状態</block>
  <block id="4acd31ec7c5bc2e4aa0a25c4c79958d6" category="cell">ノード 3 とは別のシャーシに設置します</block>
  <block id="b5c12383845491dd07b053068802e47c" category="paragraph">次の手順を実行して、ノード間の HA インターコネクトを接続します。</block>
  <block id="64764fe30a19213c6eca8ee4dc0abe64" category="list-text">node3 の上部インターコネクトポートを node4 の上部インターコネクトポートに接続します。</block>
  <block id="d32a43feea6183c721d8fb1e167ffba4" category="list-text">node3 の下部インターコネクトポートを node4 の下部インターコネクトポートに接続します。</block>
  <block id="2b7d6e150b1ad9a7324920d58add53e8" category="list-text">に進みます <block ref="41c022824608ca37267e3212853fde36" category="inline-xref-macro-rx"></block>。</block>
  <block id="02bbb5b96351de7fa7429d251ff6aa5a" category="cell">ノード 3 と同じシャーシに搭載します</block>
  <block id="88365b6e3e2809b970dbfedc2b94e36f" category="cell">に進みます <block ref="41c022824608ca37267e3212853fde36" category="inline-xref-macro-rx"></block>。ノード間の HA インターコネクトを手動で接続する必要はありません。同じシャーシ構成では、 HA インターコネクトがバックプレーンを使用して自動的に接続されます。</block>
  <block id="30a868238f55d1d59e57331a33e79d19" category="list-text">[[Step5] 次のいずれかの操作を行います。</block>
  <block id="aa9eec4e05c527e3e3152695def83f22" category="cell">SAN 環境の場合</block>
  <block id="8c059d90c29a474c1e6a9e3012ec3908" category="cell">- 完了しました <block ref="fd65cf600cef4b4bb6b03d85bec2cb92" category="inline-xref-macro-rx"></block> をクリックして、セクションに移動します <block ref="433d8081a28a0d8c06bf54d23d4e1297" category="inline-link-macro-rx"></block>。</block>
  <block id="f85d6db9ec5b69c436957b687c13324c" category="cell">SAN 環境では使用できません</block>
  <block id="3e86840ff7c230f787d687166a945ac9" category="cell">手順 6 をスキップしてセクションに進みます <block ref="433d8081a28a0d8c06bf54d23d4e1297" category="inline-link-macro-rx"></block>。</block>
  <block id="2e5d45b5b4c7ee72c9442a1c00ef4881" category="list-text">[[Step6] ノードの 1 つで次のコマンドを入力して、ノード 3 とノード 4 の両方がクォーラムにあることを確認します。</block>
  <block id="07794a041dac9632db557c4f4b050f28" category="paragraph">event log show -messagename scsiblade. *</block>
  <block id="340477541e5fdc93ffc7488a1377706f" category="paragraph">次の例は、クラスタ内のノードがクォーラムにある場合の出力を示しています。</block>
  <block id="4885a30c7d2ead3e5bbc5a7722e06fbc" category="admonition">このドキュメントでは、元のノードの名前は _node1_AND _node2 _ で、新しいノードの名前は _node3 _ と _node4 _ です。説明されている手順では、 node1 は node3 に置き換えられ、 node2 は node4 に置き換えられます。_node1_、 _node2 、 _node3 _ 、および _node4 _ という用語は、元のノードと新しいノードを区別するためだけに使用されます。手順を使用するときは、元のノードと新しいノードの実際の名前を置き換える必要があります。ただし実際には、ノードの名前は変更されません。 node3 には node1 という名前が付けられ、 node4 にはコントローラハードウェアのアップグレード後に node2 という名前が付けられます。本ドキュメントでは、 FlexArray 仮想化ソフトウェアを搭載した「 _systems 」という用語は、これらの新しいプラットフォームに属するシステムを意味します。用語 V シリーズシステム _ とは、ストレージアレイに接続可能な独立したハードウェアシステムを指します</block>
  <block id="58d2951f9fe54692264bb8d42558291f" category="list-text">この FlexArray システム、 V シリーズシステム、 AFF システム、および手順環境 FAS 仮想化ソフトウェアを搭載したシステムです。必要なライセンスがインストールされていれば、 ONTAP 9 以降にリリースされた FAS システムをストレージアレイに接続できます。既存の V シリーズシステムは ONTAP 9 でサポートされます。ストレージアレイと V シリーズのモデルについては、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> Hardware Universe へのリンクおよび V シリーズサポートマトリックスを参照してください。</block>
  <block id="e6063d0ab61b368bdfbca64be36dbd64" category="list-text">この手順環境 MetroCluster の 4 ノード構成と 8 ノード構成では、 ONTAP 9.5 以前が実行されています。ONTAP 9.6 以降を実行する MetroCluster 構成の場合は、に進みます <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> 「 system controller replace 」コマンドを使用して、 ONTAP 9.5 を実行しているコントローラハードウェアを ONTAP 9.7_ にアップグレードするには、次のコマンドを使用します。</block>
  <block id="d5560010a4b579866a98e0b680b5c248" category="paragraph">SnapMirror 関係が Transferring 状態でない場合は、中止は失敗します。</block>
  <block id="4799633d9eb6a31235d0102c0d2b1812" category="list-text">スイッチの設定が保存されたことを確認します。</block>
  <block id="1dd8fdc75f0d1d8e00ce9ec094e07e48" category="list-text">で作成したケーブルレイアウトを使用して、両方の FC-to-SAS ブリッジを FC スイッチにケーブル接続します <block ref="1e3a603a58f58380bbf882725903f11b" category="inline-link-macro-rx"></block>。</block>
  <block id="31ff80cac58b75352ccd7cb184fd3f2f" category="list-text">ポートがオンラインであることを確認します。</block>
  <block id="9537b49cfa32d77c52482152d98a6cb7" category="list-text">Brocade スイッチの場合は 'witchshow' コマンドを使用します</block>
  <block id="3f55318e22b0811a1f8462eb6d4db6a3" category="list-text">Cisco スイッチの場合は、 show ’ interface brief ’コマンドを使用します。</block>
  <block id="8a2a15ae261b57a2a7df03e71f7e6475" category="list-text">コントローラの FC-VI ポートとスイッチをケーブル接続します。</block>
  <block id="ca6b3b9d3521dc913cc6a3273b729760" category="list-text">既存のノードから、 FC-VI ポートがオンラインであることを確認します。</block>
  <block id="823eab722f92d2115c2effb645f5bc93" category="paragraph">MetroCluster インターコネクト・アダプタ・ショー</block>
  <block id="39b8d1f1fde39b620b3646f81db31ad4" category="paragraph">MetroCluster interconnect mirror show</block>
  <block id="b01288321618ebc4fb03d07a48ec080c" category="list-text">[[step1] 次のコマンドを入力し、その出力を取得します。</block>
  <block id="a9f729911b0af57b8d1d08f2584625b6" category="paragraph">「 network route show 」と表示されます</block>
  <block id="db55c697ce008329c5b7d6628a252009" category="list-text">次のコマンドを入力し、出力をキャプチャします。</block>
  <block id="743c43b069d893a88b2732926f57f5db" category="paragraph">vserver services name-service dns show</block>
  <block id="e06877d8614b07524debe1149bac1e78" category="list-text">[man_record_node1_step3] どちらかのコントローラで次のコマンドを入力して、ノード管理ポートとクラスタネットワークを特定します。</block>
  <block id="2f163f9a8fcb45472b7c0a84f088f4de" category="paragraph">次の例に示すように、クラスタ内のノードについて、クラスタ LIF 、クラスタ間 LIF 、ノード管理 LIF 、およびクラスタ管理 LIF が表示されます。</block>
  <block id="5feb72299c708ed8b5e527e5963476fe" category="admonition">システムにクラスタ間 LIF がない可能性があります。</block>
  <block id="8fac25219c50f2cc9f32de6a06dd0afa" category="list-text">のコマンドの出力に情報を記録します <block ref="63c89ae17921f4702dc8719a6b0480a8" category="inline-xref-macro-rx"></block> をクリックしてください <block ref="3b6c063a8efbc88c969c7838f0611434" category="inline-link-macro-rx"></block>。</block>
  <block id="4dea80d6ab207bc372820b8a74a583df" category="list-text">node1 で次のコマンドを入力します。</block>
  <block id="c98e23a6f059dd6276dbffb11af4d53d" category="paragraph">次の例に示すように、ノードの物理ポートが表示されます。</block>
  <block id="00e8b0b0df56090152aa5c1cb1bd4a45" category="paragraph">ブロードキャストドメインは、あとで手順の新しいコントローラの新しいポートにマッピングする必要があります。</block>
  <block id="554c196eb9c5953b024f2cc2c07ba455" category="paragraph">次の例に示すように、ノードの FC ポートが表示されます。</block>
  <block id="5d3cbeccba5dac0370b9c40f95d5d063" category="list-text">まだ設定していない場合は、次のコマンドを入力して、ノード 1 でインターフェイスグループまたは VLAN が設定されているかどうかを確認します。</block>
  <block id="f6f8a9635aff4aef3e52d34ba925926b" category="paragraph">このセクションの情報を使用します <block ref="3b6c063a8efbc88c969c7838f0611434" category="inline-link-macro-rx"></block>。</block>
  <block id="8c197b9ca5649983d88c28532ed4d151" category="inline-link-macro">アップグレードのためのノードを準備</block>
  <block id="43ac883a14249b98283d8e22e6127ba8" category="cell">セクションに NVRAM システム ID 番号を記録しました <block ref="7eb7fb0c5f668aa416ee9ca8030df058" category="inline-link-macro-rx"></block>。</block>
  <block id="722b28462ad8b131d5cfd84a2c2f881a" category="cell">次のセクションに進みます。 <block ref="830cfeba72054433fc0dcccc19f6d055" category="inline-link-macro-rx"></block>。</block>
  <block id="105886469ee101bc5425140d42df484b" category="cell">セクションに NVRAM システム ID 番号が記録されていませんでした <block ref="7eb7fb0c5f668aa416ee9ca8030df058" category="inline-link-macro-rx"></block></block>
  <block id="1c5349057e46140156bc0d263443383c" category="cell">- 完了しました <block ref="91d37fb83183cdc5da036c812dec4eb7" category="inline-xref-macro-rx"></block> および <block ref="2a3037c203afea4262e2cc05eb0708b3" category="inline-xref-macro-rx"></block> に進みます <block ref="830cfeba72054433fc0dcccc19f6d055" category="inline-link-macro-rx"></block>。</block>
  <block id="866ca6e46d7456a7c276afd3eb54db5d" category="list-text">[[man_record_node1_step11]] どちらかのコントローラで次のコマンドを入力します。</block>
  <block id="9bcd562ef44a8e11e5fd0e0492ebe6c4" category="paragraph">次の例に示すように、 node1 に関する情報が表示されます。</block>
  <block id="5b9519c4c2b57166c18827dfa9f50f7c" category="list-text">[[man_record_node1_step12]] セクションで使用する NVRAM システム ID 番号を記録します <block ref="b27daeccf5fbd8a2e88a3636ee615b74" category="inline-link-macro-rx"></block>。</block>
  <block id="a5eaebf8eb363498d59b7e808ae14a67" category="paragraph">完了する必要がある場合があります <block ref="b22a2e603d310a795a7b59d2bdda39ee" category="inline-xref-macro-rx"></block>、 <block ref="5752cac0a470e06ffceef40fba1931c1" category="inline-xref-macro-rx"></block>、または両方のセクション。</block>
  <block id="d3724945a8761461ffee756c3d88b5f7" category="paragraph">ノード 4 にオンボードの FC ポート、オンボード UTA / UTA2 ポート、または UTA / UTA2 カードがなく、ストレージディスクが搭載されたシステムをアップグレードする場合は、に進みます <block ref="fface1ac702bde6d72ceb6e55eb8b2b6" category="inline-link-macro-rx"></block>。</block>
  <block id="2f23b838fc1ce32542c8c66d9e287935" category="paragraph">ただし、 V シリーズシステムまたは FlexArray 仮想化ソフトウェアがインストールされていて、ストレージアレイに接続されている場合に、ノード 4 にオンボードの FC ポート、オンボード UTA / UTA2 ポート、 UTA / UTA2 カードがないときは、 _Install and boot node4 セクションに戻って再開する必要があります <block ref="04be07c8b8cd85d6b2140c2bfb8113b6" category="inline-link-macro-rx"></block>。ノード 4 に十分なラックスペースがあることを確認してください。node4 が node2 とは別のシャーシにある場合は、 node3 と同じ場所に node4 を配置できます。node2 と node4 が同じシャーシにある場合は、 node4 が適切なラックの場所にすでに存在しているとします。</block>
  <block id="3b2aededaf9eb7fa977a61a8bd235fc8" category="cell">に進みます <block ref="6df4b9385815488582550ff3bec853dc" category="inline-xref-macro-rx"></block>。</block>
  <block id="d0eda6a9db5e17455c4a85cb11800962" category="cell">に進みます <block ref="9afe493afbfd571f8e15cdbbaa7d8361" category="inline-xref-macro-rx"></block>。</block>
  <block id="52b26cd7e65738a95d72c027a1b843c2" category="list-text">[[man_config_4_Step2]] メンテナンスモードにアクセスします。</block>
  <block id="bdb2780eb5f1795b94cdb7892cd5237b" category="list-text">新しいノードの FC 設定を、元のノードで取り込んだ設定と比較します。</block>
  <block id="605ac6e16f1de07910babd12f8cb0f9e" category="list-text">[[man_config_4_Step5]] 次のいずれかの操作を行います。</block>
  <block id="348795cf2ff362808ef4789bfce998c1" category="paragraph">`-type ` は FC4 のタイプ、ターゲットまたはイニシエータである。</block>
  <block id="aa056114701909ed085099828ff012a9" category="cell">次のコマンドを入力し、出力を調べて、新しい設定を確認します。 'system node unified-connect show'</block>
  <block id="e7df8bff382bf85b07ece9703c2f6808" category="cell">元のノードでキャプチャしたのと同じです</block>
  <block id="222214d2643fdfb746a901984df3eaaa" category="cell">に進みます <block ref="313690309739126de0c32c721924102b" category="inline-xref-macro-rx"></block>。</block>
  <block id="7327bd79e6072c9ccdc2b478d3afacfb" category="cell">元のノードでキャプチャしたものとは異なります</block>
  <block id="2fe2c4e80b1376975584751f41c867c9" category="inline-xref">手順 8.</block>
  <block id="ebe743318b7324b4ebeb99a0a3c72423" category="cell">に進みます <block ref="60c689da671dfc85fbc244a8ddc19d6a" category="inline-xref-macro-rx"></block>。</block>
  <block id="98570637b82059e5ffc8aa3289c7a48b" category="list-text">[[man_config_4_Step8] メンテナンスモードを終了します：</block>
  <block id="f93d9d44ef64b7bd548bb1548837f7c9" category="cell">は、 V シリーズシステムであるか、 Data ONTAP 8.3.0 以降を実行する FlexArray 仮想化ソフトウェアがインストールされています</block>
  <block id="ae67b2e6adc83ff617429f7470e3fcf2" category="cell">ブート環境プロンプトで「 boot_ontap maint 」というコマンドを入力し、保守モードにアクセスします</block>
  <block id="a2aebe9559cbe6e73c0a0bf0d1bb9ef4" category="cell">は、 V シリーズシステムではなく、 FlexArray 仮想化ソフトウェアもありません</block>
  <block id="1747e775d1492fb4a122964eb0ce6abd" category="cell">ブート環境プロンプトで「 boot_ontap 」と入力し、 node4 をブートします</block>
  <block id="be71806e78200788394953879d8e5b6a" category="list-text">[[man_config_4_Step11]] 次のいずれかの操作を行います。</block>
  <block id="5f05ecbc9bc4d038e9ed396780511251" category="list-text">に進みます <block ref="5752cac0a470e06ffceef40fba1931c1" category="inline-xref-macro-rx"></block> ノード 4 に UTA / UTA2A カードまたは UTA / UTA2 オンボードポートがある場合</block>
  <block id="1e7bd254c963a338c489202373c4ab17" category="list-text">セクションをスキップして、に進みます <block ref="fface1ac702bde6d72ceb6e55eb8b2b6" category="inline-link-macro-rx"></block> ノード 4 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがない場合</block>
  <block id="08b25b9ad88e79131839ab732517a679" category="list-text">に進みます <block ref="5752cac0a470e06ffceef40fba1931c1" category="inline-xref-macro-rx"></block> ノード 4 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがある場合</block>
  <block id="11b3cd1a1063bf814b7d2eeabae1825d" category="list-text">node4 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがない場合は、 section_Check をスキップして UTA / UTA2 ポートを設定し、 node4 に戻ってブートノードを再開します <block ref="04be07c8b8cd85d6b2140c2bfb8113b6" category="inline-link-macro-rx"></block>。</block>
  <block id="fe3a7dc1b68f02ec33d1b3d2d4f9bc56" category="list-text">「 system node hardware unified-connect show 」コマンドと「 ucadmin show 」コマンドの出力を調べ、 UTA / UTA2 ポートに希望するパーソナリティが設定されているかどうかを確認します。</block>
  <block id="e48bdf2afbb963c9c495bf4f571895e3" category="cell">に進みます <block ref="ffd96dfebf67595a1e4a6d625bee7496" category="inline-xref-macro-rx"></block>。</block>
  <block id="fa74cc012fef0feff6e924f8039749e1" category="cell">手順 5 から 12 を省略して、に進みます <block ref="ff1d63240cee2bdc1933860b7f07a8df" category="inline-xref-macro-rx"></block>。</block>
  <block id="e6d6e537e4b0f2bf8e825c2e64f00645" category="list-text">[[man_check_4_Step5]] 次のいずれかの操作を行います。</block>
  <block id="37633c05750191dfa133d84e3b55c00e" category="cell">ストレージディスクがあり、 Data ONTAP 8.3 を実行している</block>
  <block id="8445b1a045f75f905d430fc7d5f5e71c" category="cell">node4 をブートし、メンテナンスモードに入ります。「 boot_ontap maint 」と入力します</block>
  <block id="6769a0fd294ca78345db234c229b8959" category="cell">に進みます <block ref="2c3bbf8d53e9379a42c94980adfa90a7" category="inline-xref-macro-rx"></block>。すでにメンテナンスモードになっている必要があります。</block>
  <block id="c61e8c3c627841f886b0a3031439d4ce" category="list-text">[[man_check_4_Step6]] 次のいずれかの操作を行います。</block>
  <block id="6515c49355bf1419526d1fd9c737ec8c" category="cell">UTA / UTA2A カードのポート</block>
  <block id="eaff3678ecd6d545f7ac3a0842914aa5" category="cell">に進みます <block ref="f4d4591f64bb8abe68f0b67355d1fe59" category="inline-xref-macro-rx"></block>。</block>
  <block id="4cb16c5207497dcfcaffd56afa4f1814" category="cell">手順 7 を省略して、に進みます <block ref="d63e67436ac7351debc07c052c32757d" category="inline-xref-macro-rx"></block>。</block>
  <block id="117986e3a34af461f5f6e6bb88045f84" category="list-text">[[man_check_4_Step7] アダプタがイニシエータモードの場合、 UTA / UTA2 ポートがオンラインの場合は、 UTA / UTA2 ポートをオフラインにします。</block>
  <block id="286e43e6e6a24f0c4b7567121cef9f66" category="list-text">[[man_check_4_Step8] 現在の設定が目的の使用方法と一致しない場合は、次のコマンドを入力して必要に応じて設定を変更します。</block>
  <block id="36408e09de8feb146f54fe1e158d953d" category="list-text">「 -m' 」はパーソナリティ・モードである FC または 10 GbE UTA です。</block>
  <block id="0e0addb82f30f2aa03c68b146f054849" category="list-text">次のコマンドを入力し、出力を確認して、設定を確認します。</block>
  <block id="315359e3c6323d4eda359054319c0815" category="list-text">次のいずれかを実行します。</block>
  <block id="893a166b79c7215fddb938b9ba769f94" category="cell">は、 V シリーズシステムまたは FlexArray 仮想化ソフトウェアを搭載したストレージアレイに接続され、 Data ONTAP 8.3 を実行しているシステムです</block>
  <block id="5ac574a53621b9436797f566cbab7941" category="cell">保守モードで再起動します（「 boot_ontap maint 」）</block>
  <block id="5dd9d9d622ac506af56607785cc61574" category="cell">次のコマンドを入力します。 ucadmin show</block>
  <block id="9b035cae403b89af2a989a976daad295" category="paragraph">次の例の出力では ' アダプタ「 1b 」の FC4 タイプがイニシエータに変更されており ' アダプタ「 2a 」と「 2b 」のモードが CNA に変更されています</block>
  <block id="f8cd2564c015235fc797e229583e1023" category="list-text">[[man_check_4_Step13]] ポートをケーブル接続します。</block>
  <block id="439c508e4033b6c215e1a9262db35444" category="cell">に進みます <block ref="fface1ac702bde6d72ceb6e55eb8b2b6" category="inline-link-macro-rx"></block>。</block>
  <block id="dbe83a6e258bdc99b8051f4d3cf01d67" category="cell">section_Install および boot node4 _ に戻り、のセクションを再開します <block ref="04be07c8b8cd85d6b2140c2bfb8113b6" category="inline-link-macro-rx"></block>。</block>
  <block id="4cd072d48be3e3705aa89a6c546ddb3c" category="paragraph">ONTAP 9.5 以降では、 Key Management Interoperability Protocol （ KMIP ）サーバを使用して認証キーを管理できます。</block>
  <block id="0d687993b6b67e20ff0472f32d9693b0" category="paragraph">新しいコントローラモジュールおよび新しいディスクシェルフと既存の FC スイッチとのケーブル接続を決定する必要があります。</block>
  <block id="6485f9afbf9c5f34e988054e67e3b142" category="paragraph">このタスクは MetroCluster サイトごとに実行する必要があります。</block>
  <block id="8d20a51d0c0718e7e116461f15d49fb3" category="paragraph">アップグレード手順の実行中、リモート LIF は SAN LUN へのトラフィックを処理します。アップグレード時にクラスタやサービスの健全性を維持するために、 SAN LIF を移動する必要はありません。SAN LIF は、新しいポートにマッピングする必要がないかぎり移動されません。ノード 4 をオンラインにしたあと、 LIF が正常に機能しており、適切なポートに配置されていることを確認します。</block>
  <block id="12720c14368020238cd7150824f980eb" category="list-text">node3 が所有していないすべての NAS データ LIF を表示するには、いずれかのノードで次のコマンドを入力し、出力をキャプチャします。</block>
  <block id="9482a7fa27802a7ab7e05f7ded4a42bd" category="paragraph">network interface show -role data -curr-node node3 -is-home false</block>
  <block id="dac6519e0e0abeb2d86af52963ff687b" category="list-text">[man_lif_verify_4_Step3] インターフェイスグループおよび VLAN でホストされている NAS データ LIF をノード 3 からノード 4 にすべて移行するには、次の手順を実行します。</block>
  <block id="bea582814d8029e4e79ed1f1f67178fa" category="list-text">[[man_lif_verify_4_substpa]] インターフェイスグループ上の node2 に属していた node3 でホストされている LIF を、同じネットワーク上の LIF をホストできる node4 のポートに移行するには、それぞれの LIF に対して 1 回、次のコマンドを入力します。</block>
  <block id="bb2b7d2b593abe391065563c1a991c60" category="list-text">LIF のホームポートとホームノードを変更します <block ref="f2edbd3671dda6c8c6a0d5b9f5139a77" category="inline-xref-macro-rx"></block> LIF をホストしているポートとノードに対して次のコマンドを 1 回入力します。</block>
  <block id="ca8c32ea8d9ad20129f9bd82dd476c20" category="list-text">[man_lif_verify_4_substpc ]] VLAN ポート上の node2 に属していた node3 でホストされている LIF を、同じネットワーク上の LIF をホストできる node4 のポートに移行するには、それぞれの LIF に対して 1 回、次のコマンドを入力します。</block>
  <block id="b9698583aeb95570efa407aaaba06094" category="list-text">LIF のホームポートとホームノードを変更します <block ref="239198568c8cd082441ca4901dc23f34" category="inline-xref-macro-rx"></block> LIF をホストしているポートとノードに対して次のコマンドを 1 回入力します。</block>
  <block id="1ba9f89e7307ad05e44ad05bb958ca27" category="list-text">[[man_lif_verify_4_Step4]] 次のいずれかの操作を行います。</block>
  <block id="486afcecd3768de955874ac9b04d982d" category="list-text">[man_lif_verify_4_Step5] プラットフォームで同じでないデータポートがある場合は、次のコマンドを入力してブロードキャストドメインにポートを追加します。</block>
  <block id="59770005b7a829dfa2de1246fe18d7ed" category="paragraph">次の例は、 IPspace デフォルトで、ノード「 6280 」のポート「 e0a 」とノード「 8060-1 」のポート「 e0i 」をブロードキャストドメイン管理に追加します。</block>
  <block id="271e5c91e502440a4641a9bc05a02df6" category="list-text">各 NAS データ LIF について次のコマンドを 1 回入力して、各 NAS データ LIF を node4 に移行します。</block>
  <block id="45c770ea39ce7a89e3fa87a10d51bc25" category="list-text">データ移行が永続的であることを確認します。</block>
  <block id="8ad5a71314693935e3bce24596d44ef1" category="list-text">[man_lif_verify_4_Step8] 次のコマンドを入力して ' すべてのリンクのステータスを up で確認し ' すべてのネットワーク・ポートの一覧を表示し ' その出力を調べます</block>
  <block id="2a2c5a2b5a3d8988556727450e1a29e2" category="paragraph">次に、一部の LIF が稼働し、その他が停止している「 network port show 」コマンドの出力例を示します。</block>
  <block id="ed11f195f4f8f4017e6e51d88466a5a2" category="list-text">[man_lif_verify_4_Step9] 'network port show コマンドの出力に新しいノードでは使用できず ' 古いノードに存在するネットワーク・ポートが表示される場合は ' 次の手順を実行して古いネットワーク・ポートを削除します</block>
  <block id="7d4a5f4bd766fdaca38d0e0f6141ee90" category="list-text">次のコマンドを入力して、 advanced 権限レベルに切り替えます。</block>
  <block id="c72099f9d20f92c2086837037b97fc90" category="list-text">古いネットワークポートごとに次のコマンドを 1 回入力します。</block>
  <block id="175804e163fef92888323305db0643d2" category="paragraph">'network interface show -data-protocol iscsi|fcp-home-node node4</block>
  <block id="35ca9ca12f5a137b27b3f6675a68cbd9" category="list-text">ノード 4 に、ノード 2 に存在しないポート上に SAN LIF または SAN LIF のグループがある場合は、次のいずれかのコマンドを入力して、ノード 4 の適切なポートにそれらの LIF またはグループを移動します。</block>
  <block id="f1eab2abaeb4ee31499ddda2b6919c69" category="list-text">いずれかのノードで次のコマンドを入力し、出力を調べて、すべての SAN LIF が正しいポートに移動されていること、および LIF のステータスが「 up 」になっていることを確認します。</block>
  <block id="b0da7502535a227e64440d7a547ea6dd" category="list-text">[[man_lif_verify_4_Step13]] LIF が 1 つでも停止している場合は、各 LIF に対して次のコマンドを 1 回入力して、 LIF の管理ステータスを「 up 」に設定します。</block>
  <block id="aa7894ff1a9d6e45a378e3bbe939cb80" category="list-text">クラスタ内のノード数を確認します。</block>
  <block id="0520dd500d342650e01dc4a099a267bb" category="paragraph">次の例に示すように、クラスタ内のノードが表示されます。</block>
  <block id="44fe06f5f571cfd547aa44853b8a4f9d" category="list-text">[[man_stリタイヤ 1_step2] ストレージフェイルオーバーを無効にします。</block>
  <block id="f4c0a7ed135e62d38e56c9a16bf13990" category="list-text">いずれかのノードで次のコマンドを入力して、クラスタハイアベイラビリティを無効にします。</block>
  <block id="27a8730bbe580dd65301349dcdc539f8" category="list-text">ストレージフェイルオーバーを無効にします。</block>
  <block id="8048736d756a32521201f074d2730091" category="list-text">ストレージフェイルオーバーが無効になっていることを確認します。</block>
  <block id="2adf18e995507a97d0d1e8af8c85e4f0" category="paragraph">次の例は、ノードでストレージフェイルオーバーが無効になっている場合の「 storage failover show 」コマンドの出力を示しています。</block>
  <block id="c4b530495164ce1eeaab4b08e9534859" category="list-text">データ LIF のステータスを確認します。</block>
  <block id="5fbed693cb6b31f11a703890fc87d45f" category="inline-link-macro">不具合のすす</block>
  <block id="8405f8a611485472bfa1ab420a9a9a02" category="cell">に進みます <block ref="caeb7d58e7293f2d87a762ba5d4df397" category="inline-xref-macro-rx"></block>。</block>
  <block id="a4749d514e1548558e90fda0a15746ff" category="cell">に進みます <block ref="242f372e62d4ec9b0208b2bd3cc69817" category="inline-xref-macro-rx"></block>。</block>
  <block id="9cd28d632d37554bc6b8bc94ae2073e5" category="list-text">[[man_denter_1_step6] どちらかのノードの advanced 権限レベルにアクセスします。</block>
  <block id="fa3bee6ea4c5e23d15d4c301c3141248" category="list-text">[[step7] クラスタ HA が無効になっていることを確認します。</block>
  <block id="f113138c0fa8fa7f0032e6a3fdc72c0a" category="paragraph">クラスタ HA が無効になっていない場合は、この手順を繰り返します <block ref="af42b54b31642eb564c9e40bb4e550a9" category="inline-xref-macro-rx"></block>。</block>
  <block id="a646d4448d74f354bb17f8dd1f3b7055" category="list-text">[[man_リタイヤ _1_step8] 現在 node1 にイプシロンが設定されているかどうかを確認します。</block>
  <block id="c3eb5e5ac705b7d7ad0bcb8afd287152" category="paragraph">ノード数が偶数のクラスタの場合は同票となる可能性があるため、 1 つのノードにイプシロンと呼ばれる追加の投票荷重が設定されます。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> 詳細については ' を参照してください</block>
  <block id="1eca50be6c9670acdf0a0635f4b23d14" category="admonition">4 ノードクラスタの場合は、クラスタ内の別の HA ペアのノードにイプシロンが設定されていることがあります。</block>
  <block id="d582f21b8a69a6d942b9b1950f660f93" category="paragraph">次の例では、 node1 にイプシロンが設定されています。</block>
  <block id="56083d4ecb6381ba220374fe9dad2f3b" category="list-text">node1 にイプシロンが設定されている場合は、 node2 に転送できるように、イプシロンを false に設定します。</block>
  <block id="c50c8db58d7cb6ecb263a833f1594cf2" category="list-text">node2 のイプシロンを true に設定して ' イプシロンを node2 に転送します</block>
  <block id="6f223a55c3e4c37c6154b48d9ad6d103" category="list-text">node2 に対する変更が発生したことを確認します。</block>
  <block id="0e3cd42cd6320745185eaab80053ad4a" category="paragraph">node2 のイプシロンを true に設定し、 node1 のイプシロンを false に設定します。</block>
  <block id="f11c9613319f6e81aa0fa42fd830a1cb" category="list-text">セットアップが 2 ノードスイッチレスクラスタかどうかを確認します。</block>
  <block id="f72b72c0926d6dd4d51ae53a658c3ab1" category="list-text">node1 プロンプトから node1 を停止します。</block>
  <block id="7d63f771d73dc7f75f06e358cd9a7510" category="admonition">* 注意 * ： node1 が node2 と同じシャーシにある場合は、電源スイッチを使用するか、電源ケーブルを引き抜いて、シャーシの電源を切断しないでください。その場合は、データを提供している node2 が停止します。</block>
  <block id="ecd3525fa194c253a8cabf432a4a5041" category="list-text">システムを停止するかどうかを確認するメッセージが表示されたら、「 y 」と入力します。</block>
  <block id="4554f5f9818af46c131a159c2ec43887" category="paragraph">ノードはブート環境のプロンプトで停止します。</block>
  <block id="839c9527e6867357b4949b3cb19bd5a6" category="list-text">node1 にブート環境プロンプトが表示されたら、シャーシまたはラックからブート環境プロンプトを削除します。</block>
  <block id="1ae386d38d4b2e016ff919c2da5eb601" category="list-text">ポートの物理的な状態が「停止」である場合は、ネットワークケーブルの物理的な接続を確認します。</block>
  <block id="58e9601fd22e1eb1174624568b62ceaf" category="paragraph">内蔵ディスクドライブにアグリゲートがあるコントローラをアップグレードしない場合は、このセクションをスキップし、セクションに進みます <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block>。</block>
  <block id="3553fa4aee6c92a690d8b3d2baf9f853" category="list-text">元のノードごとに 1 回、ノードシェルを入力します。</block>
  <block id="4321f2c566f6fd9e0f937fb671257921" category="list-text">内蔵ドライブを表示します。</block>
  <block id="71d2d9e08815f28311d42e1fe65de729" category="paragraph">「 sysconfig -av 」</block>
  <block id="1a1cbaa9026d328ea0e1db1e1d719d1e" category="paragraph">次の例に示すように、ストレージを含む、ノードの構成に関する詳細情報が出力に表示されます。</block>
  <block id="1cec74df52c25d24213897a006ddbc7e" category="list-text">「 sysconfig -av 」コマンドのストレージ出力を調べて内蔵ディスク・ドライブを特定し、その情報を記録します。</block>
  <block id="63590836c75e5189303be6a7e2f1c0d6" category="paragraph">内蔵ドライブの ID は先頭に「 00 」と表示されます。「 00 」は内蔵ディスクシェルフを示し、小数点以下の数字は個々のディスクドライブを示します。</block>
  <block id="2581141629fb014ce68faf5b319c8a1e" category="list-text">[[man_aggr_step4]] 両方のコントローラで次のコマンドを入力します。</block>
  <block id="5047ace67eeca6eaa0de7c2c565db85b" category="paragraph">次の例の出力の一部に示すように、ノードのアグリゲートステータスが表示されます。</block>
  <block id="67e1c5578ec472925218b8535f73fd69" category="admonition">アグリゲートの作成に使用されるデバイスは物理ディスクではなく、パーティションの場合もあります。</block>
  <block id="ffdb41868fb358842d696b4ff8240d4e" category="list-text">aggr status -r コマンドの出力を調べて、内蔵ディスク・ドライブを使用しているアグリゲートを特定し、その情報を記録します。</block>
  <block id="4da1edbdb956754e59f0224136b9f957" category="paragraph">前の手順の例では、シェルフ ID が「 0 」の場合、「 aggr2 」は内蔵ドライブを使用します。</block>
  <block id="a0baee3eabdee6658afa877291a41600" category="list-text">両方のコントローラで次のコマンドを入力します。</block>
  <block id="259baa89207f2b2aded364ccd7acb88e" category="paragraph">「 aggr status -y 」を入力します</block>
  <block id="8248266e12181ad17765b9cf8ce40a99" category="paragraph">次の例の出力の一部に示すように、アグリゲート上のボリュームに関する情報が表示されます。</block>
  <block id="f8fee0808da945cb32ac4bfb7b116901" category="paragraph">の出力に基づきます <block ref="fafa89bc8a6136079f9e2f0a2a127d07" category="inline-xref-macro-rx"></block> 手順 6 では、 aggr2 は 3 つの内蔵ドライブ「 0a.00.1 」、「 0a.00.3 」、「 0a.00.9 」を使用します。「 aggr2 」のボリュームは「 vol6 」、「 vol5 」、「 vol14 」です。また、手順 6 の出力では、「 aggr0 」の読み出しには、アグリゲートの情報の先頭に「 root 」という単語が含まれています。ルートボリュームが含まれていることを示します。</block>
  <block id="85eba1a1c40e954eefa7c966f21fa202" category="list-text">「 aggr status -v 」コマンドの出力を調べ、内部ドライブ上のアグリゲートに属するボリュームと、それらのボリュームにルート・ボリュームが含まれているかどうかを確認します。</block>
  <block id="a0879940337c9b44fb9cad5bc9f2d541" category="list-text">各コントローラで次のコマンドを入力して、ノードシェルを終了します。</block>
  <block id="d9f6eac526670fe9182f1a63d251a180" category="paragraph">「 exit</block>
  <block id="f5a25cddbc643e856eabde4c6ba4d2a8" category="cell">コントローラの状況</block>
  <block id="087b658bc1f71a1f2cb5ec53fee94d23" category="cell">内蔵ディスクドライブにアグリゲートを含めないでください</block>
  <block id="6a58d5f6ed9134ff245eb1172f368af9" category="cell">この手順に進みます。</block>
  <block id="979cce52ff595ac16546680501986d88" category="cell">内蔵ディスクドライブにはアグリゲートは含まれますが、ボリュームは含まれません</block>
  <block id="0b63c25d5be0c7543233464f799ff9f8" category="cell">内蔵ドライブにルート以外のボリュームを格納します</block>
  <block id="1547c14e8c3676ab43b1f9bc7b69d98d" category="cell">内部ドライブ上のルートボリュームが含まれます</block>
  <block id="cf992e4682189e679999df1f59ac6447" category="cell">この手順を続行しないでください。コントローラをアップグレードする方法について、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> 手順を実行しているノードペアで、ボリュームを移動して Data ONTAP を実行しているコントローラハードウェアのアップグレードを実行し、 _NetApp Support Site_and へのリンク。</block>
  <block id="dec8ae2cc1cff82c9a15f47488d0827b" category="cell">内蔵ドライブにルート以外のボリュームを格納し、外付けストレージにボリュームを移動することはできません</block>
  <block id="823ba7326edea0fb085b50c3aab24f80" category="cell">この手順を続行しないでください。clustered Data ONTAP を実行しているノードのペアで手順 _ ボリュームを移動してコントローラハードウェアをアップグレードする方法を説明します。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> からネットアップサポートサイトにリンクして、この手順にアクセスできます。</block>
  <block id="5fca7ca4e218be9851d30cba0f329262" category="paragraph">新しいノードのポートに関する情報を確認しておく必要があります。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> Hardware Universe にリンクするには、次の手順を実行します。このセクションの後半の情報を使用します。</block>
  <block id="8897c39b9e3259e6b8f69dc05949b6b0" category="paragraph">ノード 4 のソフトウェア設定がノード 4 の物理的な接続と一致している必要があります。また、アップグレードを続行する前に、 IP 接続をリストアする必要があります。</block>
  <block id="1b10a983f98ed23432fa58568f54f671" category="paragraph">したがって、 node2 の物理ポートが node4 の物理ポートに直接マッピングされない場合は、ブート後にクラスタ、管理、およびネットワーク接続をリストアするためにソフトウェア設定の変更が必要となります。また、 node2 のクラスタポートが node4 のクラスタポートに直接マッピングされていない場合は、正しい物理ポートでクラスタ LIF をホストするソフトウェア設定が変更されるまで、 node4 がリブートされたときに自動的にクォーラムに再参加しないことがあります。</block>
  <block id="529041da4d36160525aac5502b5d8ff7" category="list-text">ノード 2 、ポート、ブロードキャストドメイン、 IPspace に関するすべての node2 ケーブル接続情報を次の表に記録します。</block>
  <block id="24738875225e89a3fe6b531d598a45f9" category="paragraph">この情報を取得する手順については、「ノード 2 情報の記録」を参照してください。</block>
  <block id="7974b2ee243c61270cbc49955821fd33" category="list-text">の同じ手順を使用して、ノード 4 、ポート、ブロードキャストドメイン、および IPspace のすべてのケーブル接続情報を前の表に記録します <block ref="bf281b48b35a7cc176890f2be65ca906" category="inline-link-macro-rx"></block> この情報の入手方法については、を参照してください。</block>
  <block id="4a4552a72df2a500f815fd3a0166db9c" category="list-text">ノード 4 をクォーラムに追加するには、次の手順を実行します。</block>
  <block id="8ce18e9d769ff67698580bd546d1e73d" category="admonition">MetroCluster 構成の場合、ポートのブロードキャストドメインを変更できないことがあります。これは、同期先 SVM の LIF をホストしているポートに関連付けられており、次のようなエラーが表示されますが、制限はありません。</block>
  <block id="9d5b8b168e2bd5a1bd98e2db65454236" category="paragraph">このコマンドは、 node4 にあるポート「 e0d 」を削除します。「 network port broadcast-domain remove-ports -ipspace Cluster-broadcast-domain Cluster -ports node4 ： e0d 」</block>
  <block id="979cd06d4d4cd640769d9da9d1735ead" category="list-text">必要に応じて、と同じコマンドを使用して、クラスタ間ブロードキャストドメインを調整してクラスタ間 LIF を移行します <block ref="8ca8005a6030839efa079ea5fc0aa218" category="inline-xref-macro-rx"></block>。</block>
  <block id="7d978d05ebca2bca32b82488daa9e7db" category="list-text">必要に応じて、のコマンドと同じコマンドを使用して、他のブロードキャストドメインを調整してデータ LIF を移行します <block ref="8ca8005a6030839efa079ea5fc0aa218" category="inline-xref-macro-rx"></block>。</block>
  <block id="fc5f8a7ca5bfb1a8040e796e49ecaa6c" category="paragraph">次のコマンドは ' フェイルオーバー・ポリシーを broadcast-domain-wide に設定し ' フェイルオーバー・グループ fg1 のポートを 'node4 の LIF のフェイルオーバー・ターゲットとして使用します</block>
  <block id="87724d5ff91f88d675b5dc5cf4703ebb" category="paragraph">「 network interface modify -vserver node4 -lif data1 failover-policy broadcast-domain-wide -failover-group fg1 」というメッセージが表示されます</block>
  <block id="fae618cfa140cbca52d057afef5df1da" category="list-text"><block ref="fae618cfa140cbca52d057afef5df1da" category="inline-link-macro-rx"></block></block>
  <block id="a8d507fcc05a3431c75860216853c15e" category="list-text"><block ref="a8d507fcc05a3431c75860216853c15e" category="inline-link-macro-rx"></block></block>
  <block id="2eb3ddacc3cdbca929068de80db9b0b7" category="list-text"><block ref="2eb3ddacc3cdbca929068de80db9b0b7" category="inline-link-macro-rx"></block></block>
  <block id="c67377fc77151c30a07d038922241b21" category="list-text"><block ref="c67377fc77151c30a07d038922241b21" category="inline-link-macro-rx"></block></block>
  <block id="f7afd5134081c6d88b6809aff0cfe38b" category="summary">アップグレードの各段階で、システムがクラッシュする（リブート、パニック状態、または電源の再投入）場合があります。これらの問題の解決策は、状況によって異なります。</block>
  <block id="8d2ddd9f1b9624e868ebb43ee6cda365" category="section-title">ステージ 2 でリブート、パニック、または電源の再投入が発生した場合</block>
  <block id="e614ebb551c0186535d784a7b48379a2" category="paragraph">クラッシュは、ステージ 2 の前後、またはステージ 2 のアグリゲートをノード 1 からノード 2 に再配置し、ノード 1 が所有するデータ LIF と SAN LIF をノード 2 に移動し、ノード 1 の情報を記録し、ノード 1 を廃棄する前、実行中、またはただちに発生します。</block>
  <block id="f9fc0ccdf6eca6c6dbb00170548006b8" category="section-title">HA を有効にして第 2 段階の前にノード 1 またはノード 2 がクラッシュする</block>
  <block id="04818410504d7e5aff0400546dfc87fe" category="paragraph">ステージ 2 の前にノード 1 またはノード 2 がクラッシュした場合は、再配置されたアグリゲートがなく、 HA 構成が有効なままになります。</block>
  <block id="141bacc3e7a6f502bd3657db72437350" category="list-text">コンソールで、システムで発行された EMS メッセージを確認し、推奨される対処方法を実行します。</block>
  <block id="7495ab667ca2ae1018dd9d3dd2908757" category="section-title">HA を有効にして第 2 段階の実行中または直後にノード 1 がクラッシュする</block>
  <block id="6647bb8df429d773e26f287ab8630e64" category="paragraph">一部またはすべてのアグリゲートがノード 1 からノード 2 に再配置されており、 HA が有効なままです。node2 は、 node1 のルートボリュームと再配置されていないルート以外のアグリゲートをテイクオーバーします。</block>
  <block id="91cf7a0902c4d8935fa01c715ec744dc" category="list-text">- 完了しました <block ref="293daa0ef1b8dc10a56298f74ae852e0" category="inline-link-macro-rx"></block> セクションの _root 以外のアグリゲートをノード 1 から node2 _ に再配置する</block>
  <block id="74d5b8b871208d748fdac979190074e1" category="section-title">HA を無効にすると、ステージ 2 のあとにノード 1 がクラッシュします</block>
  <block id="9ad3dc0563b6521da592666e0c96170d" category="paragraph">node2 はテイクオーバーしませんが、ルート以外のすべてのアグリゲートから引き続きデータを提供しています。</block>
  <block id="cf843a9114c64e407d26e842eb2aa5c2" category="inline-link-macro">予期しない「 storage failover show 」コマンドの出力が表示されます</block>
  <block id="94a4747b7f624695a71106c7bd97a9c7" category="paragraph">「 storage failover show 」コマンドの出力には変更が表示されることがありますが、これは通常の動作であり、手順には影響しません。トラブルシューティングのセクションを参照してください <block ref="b83b9fc12613c040fac52ff371fe932a" category="inline-link-macro-rx"></block>。</block>
  <block id="15c9d515df1ae9990db781b0882abe66" category="section-title">ステージ 2 の実行中または実行後に、 HA を有効にして node2 に障害が発生する</block>
  <block id="716abd00d1127a1995735a99a806c57a" category="paragraph">ノード 1 の一部またはすべてのアグリゲートが node2 に再配置されています。HA が有効になっている。</block>
  <block id="f0cdf8c3a0614c42ddbb847f4d954ecc" category="paragraph">ノード 1 は、ノード 2 のすべてのアグリゲートと、ノード 2 に再配置された独自のアグリゲートをテイクオーバーします。node2 が Waiting for giveback' 状態になると、 node1 は node2 のすべてのアグリゲートをギブバックします。</block>
  <block id="d9cfe3ea2fdbf3c16ed9c5e72d3e656c" category="section-title">ステージ 2 で HA を無効にすると、ノード 2 がクラッシュする</block>
  <block id="60d779c99277ce73af20b8df4f5f56d7" category="paragraph">ノード 1 ではテイクオーバーされません。</block>
  <block id="6cd506af8fb7a9917363ff2842c8cc31" category="paragraph">node2 のブート中にすべてのアグリゲートでクライアントが停止します。</block>
  <block id="4fcbd6d017dc3bed8096ddf23845774a" category="list-text">残りのノードペアのアップグレード手順に進みます。</block>
  <block id="a5d750c0f90be33b555932b544614491" category="section-title">ステージ 3 でリブート、パニック、電源の再投入が発生した場合</block>
  <block id="c4ff6b7da7d4d6d1387161732065f7e3" category="paragraph">ステージ 3 の実行中または実行直後に障害が発生し、ステージ 3 ではノード 1 からノード 3 へのポートのマッピング、ノード 1 とノード 2 に属するデータ LIF と SAN LIF のノード 3 への移動、ノード 2 からノード 3 へのすべてのアグリゲートの再配置が行われます。</block>
  <block id="6c6e673ed49e2d3170e896afadb82987" category="section-title">HA を無効にした状態でステージ 3 が実行され、アグリゲートを再配置する前にノード 2 がクラッシュする</block>
  <block id="d0dbe31475820a3a3bf65dc0bcdc3d22" category="paragraph">HA がすでに無効になっているため、ノード 2 のクラッシュ後はノード 3 はテイクオーバーしません。</block>
  <block id="123d371d6f3654b02ea395d3cdce7a43" category="section-title">一部またはすべてのアグリゲートの再配置後、ステージ 3 でノード 2 がクラッシュする</block>
  <block id="3312049a8df38d6a9cc500f8d982615c" category="paragraph">node2 の一部またはすべてのアグリゲートが node3 に再配置され、再配置されたアグリゲートからデータが提供されます。HA が無効になっています。</block>
  <block id="4293c82d89ec7602e20335979cb19469" category="paragraph">再配置されなかったアグリゲートのクライアントが停止します。</block>
  <block id="325bf4ef0d3493b41794238266e0490a" category="list-text">残りのアグリゲートの再配置は完了して実行します <block ref="789a9a29365551abd6a71d3f355e39cb" category="inline-link-macro-rx"></block> から <block ref="a9ed1005965421826d33fd16a9c02ffe" category="inline-link-macro-rx"></block> セクションの _root 以外のアグリゲートを node2 から node3 _ に移動する</block>
  <block id="7777ccf7f0f06dad3ffad451bb0e83b8" category="section-title">ステージ 3 でノード 2 からアグリゲートが再配置される前に、ノード 3 がクラッシュした場合</block>
  <block id="ec2cd6235f2c50a1e7fed067fe8301f8" category="section-title">アグリゲートの再配置中に、ステージ 3 でノード 3 がクラッシュした場合</block>
  <block id="bdf12c9e6bf2221b5ef584b80346aaaf" category="paragraph">node2 によるアグリゲートのノード 3 への再配置中にノード 3 がクラッシュした場合、 node2 を使用すると残りのアグリゲートの再配置が中止されます。</block>
  <block id="5f54439349a0049ded037d046c54cb66" category="paragraph">node2 では残りのアグリゲートの処理が続行されますが、 node3 のブート中にすでに node3 に再配置されたアグリゲートでクライアントが停止する可能性があります。</block>
  <block id="e9f32c360440ff87eefc6b2ac000051b" category="list-text">- 完了しました <block ref="a9ed1005965421826d33fd16a9c02ffe" category="inline-link-macro-rx"></block> セクションの「ルート以外のアグリゲートを node2 から node3 _ に再配置する」を再度実行します。</block>
  <block id="78d6fd9200a4f713a83c4db59f80581d" category="section-title">ステージ 3 でクラッシュすると、ノード 3 がブートしない</block>
  <block id="1f3a2d115338d5055575085be720a753" category="paragraph">重大な障害が原因で、ステージ 3 のクラッシュ後に node3 をブートすることはできません。</block>
  <block id="50c2d2087402d2dc8c5767a6ac83e96d" category="paragraph">テクニカルサポートにお問い合わせください。</block>
  <block id="cf3f87997342db92eccc23b02a73f26b" category="section-title">ステージ 3 のあと、ステージ 5 の前に node2 がクラッシュします</block>
  <block id="f9266620f38392278a4002882f41b801" category="paragraph">ノード 3 では、すべてのアグリゲートのデータの提供が続行されます。HA ペアが無効になります。</block>
  <block id="45e4e2e875b4e69af2a57be92e35bd6d" category="section-title">ステージ 3 の完了後、ステージ 5 の前にノード 3 がクラッシュした場合</block>
  <block id="3558827f5793acfed9bd716ccf9185d2" category="paragraph">ステージ 3 の完了後、ステージ 5 の前にノード 3 がクラッシュした場合。HA ペアが無効になります。</block>
  <block id="a7b36ae4a63894ec22ce7b4ffc1a7601" category="paragraph">すべてのアグリゲートがクライアントで停止します。</block>
  <block id="dba18149d1d705af7c19dced9bbd93eb" category="section-title">ステージ 5 でリブート、パニック、または電源の再投入が発生した場合</block>
  <block id="6faaefd8133cb9348e7c089d482c5e7d" category="paragraph">クラッシュは、ステージ 5 、ノード 4 のインストールとブートのステージ、ノード 2 からノード 4 へのポートのマッピング、ノード 2 に属するデータ LIF と SAN LIF のノード 2 からノード 4 への移動、ノード 2 のすべてのアグリゲートのノード 3 からノード 4 への再配置の実行中に発生する可能性があります。</block>
  <block id="188229afd48ed8799252ee3f4371adf0" category="section-title">ステージ 5 でノード 3 がクラッシュする</block>
  <block id="12c209a765d259bdad104c55c61bccd8" category="paragraph">ノード 3 の一部またはすべてのアグリゲートが node4 に再配置されている。node4 にはテイクオーバーは行われず、 node3 がすでに再配置されたルート以外のアグリゲートは引き続き提供されます。HA ペアが無効になります。</block>
  <block id="059fe117edfac83eeb29495f9fd915b7" category="list-text">node2 に属していた残りのアグリゲートを再配置します <block ref="21d698177270cdcc53abb50c511e3bde" category="inline-link-macro-rx"></block> から <block ref="c5be787c4fcfd0f49f014e8618d28c15" category="inline-link-macro-rx"></block> セクションの _Relocate node2 のルート以外のアグリゲートを node3 から node4 に再配置する例を次に示します。</block>
  <block id="a018f0afc69622b99ebe84263c79ed31" category="list-text">ノードペアのアップグレード用手順に進みます。</block>
  <block id="17772501b6724fd9858e76539d802bae" category="section-title">ステージ 5 でノード 4 がクラッシュした場合</block>
  <block id="ed77b7aeb374975ae2dc4f8a9a5d5551" category="paragraph">ノード 3 の一部またはすべてのアグリゲートが node4 に再配置されている。node3 は、自身が所有しているルート以外のアグリゲートおよび再配置されていないアグリゲートを引き続き提供します。HA が無効になっています。</block>
  <block id="599f33809165d54cb3217e306c6f0f1f" category="paragraph">ノード 4 が再びブートするまで再配置されたルート以外のアグリゲートは停止します。</block>
  <block id="4756394ada9b0ffaa73813469d36b72d" category="list-text">再度完了して、 node2 に属していた残りのアグリゲートを再配置します <block ref="21d698177270cdcc53abb50c511e3bde" category="inline-link-macro-rx"></block> から <block ref="c5be787c4fcfd0f49f014e8618d28c15" category="inline-link-macro-rx"></block> In _Relocate node2 のルート以外のアグリゲートを node3 から node4 に再配置します。</block>
  <block id="b8a386efa3c6aa2c0554c650dfc15d81" category="paragraph">node2 を node4 に置き換える前に、 node2 の AutoSupport メッセージを送信し、 node2 に所有されているルート以外のアグリゲートを node3 に再配置する必要があります。</block>
  <block id="e4fe7514f720448bae21164b8b7a8a98" category="list-text">[[step1] node2 に関する AutoSupport メッセージをネットアップに送信します。</block>
  <block id="fb876532a1278ecbe2a9e2aa30ef59c2" category="list-text">AutoSupport メッセージが送信されたことを確認します。</block>
  <block id="632ce4fa5102cfac495b3c1490de0513" category="paragraph">「 Last Subject Sent ：」および「 Last Time Sent ：」のフィールドには、最後に送信されたメッセージのメッセージタイトルと、メッセージが送信された時刻が含まれています。</block>
  <block id="872a7a7f067f5ac8e7a4df8b55cb3129" category="list-text">[[step3]] ルート以外のアグリゲートの再配置：</block>
  <block id="33cfec7231d81810ac482a09c5b69c00" category="list-text">node2 が所有するアグリゲートを表示します。</block>
  <block id="e5d22039d8dff591d18701d62fb4083d" category="list-text">アグリゲートの再配置を開始する：</block>
  <block id="cba3015195e189328dd15ef19c0cdcff" category="admonition">コマンドは、ルート以外のアグリゲートのみを特定します。</block>
  <block id="c3aa957126a7abd53abe73b1af74dfb8" category="paragraph">再配置はバックグラウンドで実行されます。アグリゲートの再配置には数秒から数分かかる場合があります。この時間には、クライアントの停止部分と停止部分の両方が含まれます。このコマンドでは、オフラインまたは制限されたアグリゲートが再配置されません。</block>
  <block id="00bfced11707df12b7beabc9cb1854c6" category="list-text">admin 権限レベルに戻ります。</block>
  <block id="6b5ba31b334c119525a36a4c654c79fc" category="list-text">node2 の再配置のステータスを確認します。</block>
  <block id="e0b277bd202f6924948f2209a81b8cb0" category="paragraph">アグリゲートを再配置すると、そのアグリゲートの出力に「 Done 」と表示されます。</block>
  <block id="5f99044f7fd5dd98c2e83408099900a7" category="admonition">node2 に所有されているすべてのアグリゲートが node3 に再配置されてから次の手順に進む必要があります。</block>
  <block id="c8ee48ad015fbbcc6f1c096e31a9b081" category="cell">に進みます <block ref="0d8c3ea689b325a11fe26527348a6eff" category="inline-xref-macro-rx"></block>。</block>
  <block id="12d1b6919c7c68de63bfe55847d735a3" category="cell">アグリゲートに障害が発生したか、拒否された</block>
  <block id="d6e415f41ef651a14c6408b58b5f34fa" category="list-text">詳細なステータスメッセージを表示します。</block>
  <block id="4382ef08403cdc87d0db14f4b0dbe621" category="paragraph">「 storage aggregate show -instance 」のように表示されます</block>
  <block id="52aa1d8f7452c944bbc112edc69d159d" category="paragraph">EMS ログで必要な対処方法を確認することもできます。</block>
  <block id="856f354dcadb2aef2f73a7a610300d05" category="paragraph">必要に応じて、次のいずれかの方法で強制的に再配置を実行できます。</block>
  <block id="6abaecd9da93fcc5260d726fe8a8fa56" category="list-text">拒否のチェックを無視する：</block>
  <block id="b62638cdb7e1a6240698379b6c81d35b" category="paragraph">「 storage aggregate relocation start -override-vetoes true -nd-controller-upgrade</block>
  <block id="230cd704f9f55647ecfe8129ed941e8e" category="list-text">送信先チェックを無効にする：</block>
  <block id="35df77bf8b92d76c3b871148e8c46c51" category="paragraph">「 storage aggregate relocation start -override-destination-checks true -ndocontroller -upgrade 」を実行します</block>
  <block id="329fdaa2cd3cf795781d3ee938047475" category="list-text">[man_relocate_2_3_step6] ルート以外のアグリゲートがすべてノード 3 でオンラインになっていることを確認します。</block>
  <block id="ecc3f3e0b2ef3c70a30fe8be1af81d75" category="paragraph">オフラインになったアグリゲートや外部になったアグリゲートがある場合は、各アグリゲートを 1 つずつオンラインにする必要があります。</block>
  <block id="1dc7145853b865022c2423c0562bf7ed" category="list-text">ノード 3 ですべてのボリュームがオンラインになっていることを確認します。</block>
  <block id="8526a5587200c78144bc2d1fabd13d3a" category="paragraph">ノード 3 でオフラインになっているボリュームがある場合は、各ボリュームについて 1 回、オンラインにする必要があります。</block>
  <block id="5d28ff5ed2a011a10e2c1fd4e4e77822" category="list-text">node2 にオンラインのルート以外のアグリゲートがないことを確認します。</block>
  <block id="232cf0d45bdcae298c19689d1bf05bea" category="paragraph">ルート以外のオンラインアグリゲートがすべて node3 にすでに再配置されているため、コマンドの出力にルート以外のオンラインアグリゲートが表示されないようにする必要があります。</block>
  <block id="570b3bce33225ec8be6a14d8b8bfecc7" category="paragraph">オンボードキーマネージャを使用して認証キーを管理できます。オンボードキーマネージャ（ OKM ）を使用する場合は、アップグレードを開始する前にパスフレーズとバックアップ資料を記録しておく必要があります。</block>
  <block id="775c20f6787aab41a2e8a95674e08cc7" category="list-text">クラスタ内のすべてのノードがキー管理サーバを使用できることを確認します。</block>
  <block id="803c74f5b21c1a4dac35d85f254e7d20" category="paragraph">'storage encryption disk modify -disk * [-data-key-id nonMSID AK</block>
  <block id="71c5d3d7f0857c67830fb002783fd24e" category="paragraph">手順の各フェーズについては、セクションの表を参照してください <block ref="25c64b56e1634b7195570b2ce4c1228b" category="inline-link-macro-rx"></block>。発生する可能性がある障害の情報は、手順のフェーズ別に表示されます。</block>
  <block id="96518cf6fc4836f38d5963152c3b52fc" category="list-text"><block ref="96518cf6fc4836f38d5963152c3b52fc" category="inline-link-macro-rx"></block></block>
  <block id="b41eca4a9e61478c5412544da1b31c9f" category="list-text"><block ref="b41eca4a9e61478c5412544da1b31c9f" category="inline-link-macro-rx"></block></block>
  <block id="03f183bce69c6c170ce7d98b73a0da9b" category="list-text"><block ref="03f183bce69c6c170ce7d98b73a0da9b" category="inline-link-macro-rx"></block></block>
  <block id="bffc8177304b2cba0a93e9425c22a1b7" category="list-text"><block ref="bffc8177304b2cba0a93e9425c22a1b7" category="inline-link-macro-rx"></block></block>
  <block id="e74451404fb8d41f6db27c4f815f8cf3" category="list-text"><block ref="e74451404fb8d41f6db27c4f815f8cf3" category="inline-link-macro-rx"></block></block>
  <block id="2df3dd26d8dceded8e8da8277098895a" category="paragraph">ファブリック内のスイッチを永続的に有効にする必要があります。</block>
  <block id="5c399963772634ba1fc18f52ce25b7d5" category="paragraph">スイッチを永続的に有効にします。</block>
  <block id="1b9078b6f6fd34ef368d1162644a9f35" category="list-text">Brocade スイッチの場合は、「 witchCfgPersistentenable 」コマンドを使用します。</block>
  <block id="7f53ae5380891cb24e6bd16877533f63" category="list-text">Cisco スイッチの場合は 'no suspend' コマンドを使用します</block>
  <block id="017a287daf9403479607113762fdf28d" category="paragraph">ノード 3 とノード 4 を手順の後半で物理的にラックに設置したあと、ネットブートが必要になることがあります。「 _netboot_ 」は、リモートサーバに保存されている ONTAP イメージからブートすることを意味します。ネットブートの準備を行うときは、システムがアクセスできる Web サーバに、 ONTAP 9 ブート・イメージのコピーを配置する必要があります。</block>
  <block id="3dd228d301de455327861edf46a3a6c7" category="paragraph">ただし、元のコントローラと同じバージョンの ONTAP 9 がインストールされているコントローラには、ネットブートする必要はありません。その場合は、このセクションをスキップしてに進みます <block ref="2bff11e37a7944fe4126fc6d0031317c" category="inline-link-macro-rx"></block>。</block>
  <block id="021eb7b60dabf41949ccbeca660311c4" category="list-text">[man_netboot_Step1] ネットアップサポートサイトにアクセスして、システムのネットブートの実行に使用するファイルをダウンロードします。</block>
  <block id="7704ef8efcd46a7ed3c60b0b5522a4f5" category="paragraph">では、ディレクトリの情報を使用します <block ref="f7260a7bcbdd09edcf840aac6c5a4af7" category="inline-link-macro-rx"></block>。</block>
  <block id="630cec3291759dd967d8afd9c4e8545f" category="inline-link-macro">ノード 1 で所有されているルート以外のアグリゲートと NAS データ LIF を node2 に再配置します</block>
  <block id="7115fb4a39be3cfe6cee8101025f1504" category="list-text"><block ref="7115fb4a39be3cfe6cee8101025f1504" category="inline-link-macro-rx"></block></block>
  <block id="381638a6e0f7aca4ddd9fcf0b9a1b531" category="inline-link-macro">node1 で所有されている NAS データ LIF を node2 に移動します</block>
  <block id="dcf0f8ecb6c997def559b3960cde05ca" category="list-text"><block ref="dcf0f8ecb6c997def559b3960cde05ca" category="inline-link-macro-rx"></block></block>
  <block id="983e8d5011cadd8bafa613b4879ba72d" category="inline-link-macro">node1 の情報を記録しています</block>
  <block id="a47c5ad7a0d8f464831a41a2bbd2f0e4" category="list-text"><block ref="a47c5ad7a0d8f464831a41a2bbd2f0e4" category="inline-link-macro-rx"></block></block>
  <block id="9049f1bbc92896381d7b5ffdc386e3b2" category="list-text">いずれかのノードで次のコマンドを入力して、ストレージフェイルオーバーを有効にします。</block>
  <block id="44b65ecdfbcd9fda48c21d17aae6347e" category="cell">クラスタの種類</block>
  <block id="f58285c881fa273f24181ed6fc4f5253" category="cell">どちらかのノードで cluster ha modify -configured true コマンドを入力して ' クラスタの高可用性を有効にします</block>
  <block id="97b53f9857ac13c0da869099d031be38" category="cell">に進みます <block ref="822b8237ef75a77ff6f775dfc30b209c" category="inline-xref-macro-rx"></block>。</block>
  <block id="c923a045fa01384244a7d722820ecb7f" category="list-text">[[man_ver_setup_Step4]] 次のコマンドを入力して、 node3 と node4 が同じクラスタに属していることを確認します。</block>
  <block id="993ec2fcd18633816cf0d4d290fcf5a3" category="list-text">次のコマンドを入力し、出力を調べて、 node3 と node4 が相互のストレージにアクセスできることを確認します。</block>
  <block id="00c012d0f7127c31c470ac3c1c76aa44" category="list-text">次のコマンドを入力し、出力を調べて、 node3 と node4 がクラスタ内の他のノードによってホーム所有されているデータ LIF を所有していないことを確認します。</block>
  <block id="2a6d96821a4ce6866da866e48a1ece2a" category="paragraph">node3 または node4 に、クラスタ内の他のノードがホーム所有するデータ LIF がある場合は、「 network interface revert 」コマンドを使用して、データ LIF をホーム所有者にリバートします。</block>
  <block id="183048ad5f29710efbac355627777865" category="inline-link-macro">手順 19 （ d ）</block>
  <block id="be3ae65f9ab44c1be767b14ddc884bfc" category="list-text">オフラインのボリュームがある場合は、で取得したオフラインボリュームのリストと比較します <block ref="f226f1513a3b2dc8065e1f4d6987a247" category="inline-link-macro-rx"></block> で、各ボリュームに対して次のコマンドを 1 回入力して、アップグレードの準備をし、必要に応じてオフラインのボリュームをオンラインにします。</block>
  <block id="5d41e09cfbf05ac79dc026cd1e32857c" category="list-text">ノードごとに次のコマンドを入力して、新しいノード用の新しいライセンスをインストールします。</block>
  <block id="65d93c0f2eae68c69877f67ce3781996" category="paragraph">license-code パラメータには、アルファベットの文字キーをアルファベットの大文字 28 個まで入力できます。ライセンスは一度に 1 つずつ追加することも、ライセンスキーごとにカンマで区切って複数ずつ追加することもできます。</block>
  <block id="1f6c8829a415beddc4ce10181f20094a" category="inline-link-macro">手順 16</block>
  <block id="c13dda3e4975b286bfb62f3d9aa8cfa5" category="list-text">元のノードから古いライセンスをすべて削除するには、次のいずれかのコマンドを入力します。</block>
  <block id="f1645d1878d86f7024812da747846642" category="list-text">期限切れのライセンスをすべて削除するには、次のように入力します</block>
  <block id="fd6db757e3a6fb12f04139c8f48aab93" category="list-text">未使用のライセンスをすべて削除するには、次のように入力し</block>
  <block id="0fae8f5a8ab68238375deb31e474111d" category="list-text">クラスタから特定のライセンスを削除するには、ノードで次のコマンドを入力します。</block>
  <block id="7092e15f19aa79a4b642157f15a4bcf6" category="inline-link-macro">手順 30</block>
  <block id="65816664fef74fe3f15406730c518f76" category="list-text">両方のノードで次のコマンドを実行して、 SP を設定します。</block>
  <block id="3d39e72120bdfa8b32eb4183896ece25" category="paragraph">に進みます <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> SP の詳細については ' システム管理リファレンスにリンクし '_System ONTAP 9 コマンド：マニュアルページリファレンスにリンクし 'system service-processor network modify コマンドの詳細については ' を参照してください</block>
  <block id="52eb8cb5708af7396828abc72517413d" category="list-text">新しいノードにスイッチレスクラスタをセットアップする場合は、に進みます <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ネットワークサポートサイトへのリンクをクリックし、 2 ノードスイッチレスクラスタへの移行の手順に従ってください。</block>
  <block id="a98b8d21a1cabe96a7d765976c724ace" category="paragraph">ノード 3 とノード 4 でストレージ暗号化が有効になっている場合は、の手順を実行します <block ref="94c0a6a874300fcf012d00a23a1b673f" category="inline-link-macro-rx"></block>。それ以外の場合は、の手順を実行します <block ref="6e48b929ca0767f00c15eeb6d7e78755" category="inline-link-macro-rx"></block>。</block>
  <block id="bf281b48b35a7cc176890f2be65ca906" category="list-text"><block ref="bf281b48b35a7cc176890f2be65ca906" category="inline-link-macro-rx"></block></block>
  <block id="3b878279a04dc47d60932cb294d96259" category="doc">概要</block>
  <block id="68e6b44b3a749a5a92b3130b283a8d5c" category="paragraph">このタスクは MetroCluster サイトごとに実行する必要があります。</block>
  <block id="2582e010e97c2f1b4ef7a684672e4598" category="list-text">クラスタにログインします。</block>
  <block id="ee4b431a595989bb32df666099e34bf8" category="list-text">メンテナンスの開始を通知する AutoSupport メッセージを起動します。</block>
  <block id="8b8313711f50dddf1be23555c3e398af" category="paragraph">「 maintenance-window-in-hours 」の値は、メンテナンス時間の長さを指定します。最大値は 72 時間です。この時間が経過する前にメンテナンスが完了した場合は、メンテナンス期間が終了したことを通知する AutoSupport メッセージを起動できます。</block>
  <block id="538f577c4284d097aef57681a2acf728" category="paragraph">「 system node AutoSupport invoke -node * -type all -message MAINT= end 」というメッセージが表示されます</block>
  <block id="047c004f2f53364ce170133f533be47f" category="list-text">同じ手順をパートナーサイトでも実行します。</block>
  <block id="a8b14471d941953a592683e741c0ca1c" category="list-text">[[step1] システムプロンプトで、ノード 3 にログインします。そのあと、 node3 が node2 と同じクラスタの両方に属しており、正常であることを確認します。</block>
  <block id="c526c49b8044ea431a2ad56bde07cd17" category="list-text">[step2] node3 が node2 と通信できること、およびすべての LIF が動作していることを確認します。</block>
  <block id="0ccfa81b1f21bfb5655a443ca59f1146" category="inline-link-macro">ノード 1 で所有されている NAS データ LIF をノード 2 からノード 3 に移動し、ノード 3 の SAN LIF を確認します</block>
  <block id="d1e338a03ea3eb1b2592ad7856e6b249" category="list-text">[[step4]] ノードの 1 つで次のコマンドを入力し、その出力を調べて、 node2 および node3 がクォーラムにあることを確認します。</block>
  <block id="6af6b76d592516d40ca101051c678be3" category="doc">AFF および FAS システムのアップグレードに関するドキュメント</block>
  <block id="c659f2c431be96152886f89fc8d66545" category="list-text">[step2] ノード 1 およびノード 2 のすべての LIF の自動リバート設定を変更します。</block>
  <block id="cbda167ce953729cf8b9be29b0e35ede" category="list-text">[[step3] インターフェイスグループおよび VLAN でホストされる NAS データ LIF を node1 で移行するには、次の手順を実行します。</block>
  <block id="9ebd90a8ee1baaa50f7229ecbad7e8b4" category="list-text">[[substepa]] すべてのインターフェイスグループでホストされている LIF と node1 上の VLAN を、インターフェイスグループと同じネットワーク上の LIF をホストできる node2 のポートに移行します。そのためには、各 LIF に対して次のコマンドを 1 回入力します。</block>
  <block id="38dc91fe258c6eeb7ff70deac7ba3ee0" category="list-text">で、 LIF および VLAN のホームポートとホームノードを変更します <block ref="cf21dd79faca0741f745aead7a1f3856" category="inline-xref-macro-rx"></block> LIF をホストしているポートとノードに対して次のコマンドを 1 回入力します。</block>
  <block id="f665edf5cc407acfccaabfb5603ae07e" category="cell">- 完了しました <block ref="a7f3a08749b96b9fef80c08c6457135d" category="inline-xref-macro-rx"></block> から <block ref="ebde17035ccd0e1d011f2e188b8e17d6" category="inline-xref-macro-rx"></block>。</block>
  <block id="9afdff3547467f61598636f379b01049" category="list-text">[man_lif_1_2_step5] 各データ LIF に対して次のコマンドを 1 回入力して、 NAS データ LIF を node1 から node2 に移行します。</block>
  <block id="46d8840624eee12f277b28b36bc04ac9" category="list-text">[step7] 移行された LIF のホームノードを変更します。</block>
  <block id="399d0e6b3a5d6f6a955d15b76e16dac3" category="list-text">[man_lif_1_2_step8] LIF がホームまたは現在のポートとして使用しているかどうかを確認しますポートがホームでない場合や現在のポートでない場合は、に進みます <block ref="9afb853eb1a825acf900d55aa2bce20e" category="inline-xref-macro-rx"></block>：</block>
  <block id="f48b3299d16d6b2107cabf71fe17fc7a" category="list-text">[man_lif_1_2_step9] LIF がホームポートまたは現在のポートとしてポートを使用している場合は、別のポートを使用するように LIF を変更します。</block>
  <block id="eb107bf9c16173703c7eb7800e543b49" category="list-text">[[step10]] いずれかの LIF が停止している場合は、各 LIF に対して次のコマンドを 1 回入力して、 LIF の管理ステータスを「 up 」に設定します。</block>
  <block id="5410f279e38e9c157f57b06f35930496" category="list-text">[[step11]] 次のコマンドを入力し、その出力を調べて、 node1 にデータ LIF が残っていないことを確認します。</block>
  <block id="90506ded7e085b5dfb368983176adad1" category="list-text">MetroCluster 9.8 以降を実行する 4 ノードおよび 8 ノードの Fabric ONTAP 構成を使用するシステムがある場合。</block>
  <block id="7ae38f6d8449bab135d62e112d801780" category="paragraph">ポート設定は、ノードのモデルによって異なる場合があります。</block>
  <block id="18d6cf18e081291f183ebc71cad11449" category="list-text">[[step1] 次の手順を実行して、セットアップが 2 ノードのスイッチレスクラスタであるかどうかを確認します。</block>
  <block id="506c2c0c7f5b70af3df68c45c46f45a7" category="paragraph">例：</block>
  <block id="813d293c72e7757d7214e56a35a3d239" category="list-text">[[step2] 次の変更を行います。</block>
  <block id="3528faaf395daaaf0d052ce18e3bb68f" category="paragraph">次の例では、「 node1 」にクラスタポート e1b を追加します。</block>
  <block id="a2667267edacd035171d6f2c7a379271" category="list-text">node1 と node3 のヘルス状態を表示します。</block>
  <block id="0dd0951b0ff75b50f90162a4e89cea83" category="list-text">[man_map_1_step3] データ LIF をホストする物理ポートのブロードキャストドメインメンバーシップを変更します。</block>
  <block id="8d324785c287a538f58e372f40bed342" category="list-text">到達可能性の修復が実行されると、 ONTAP は正しいブロードキャストドメインにポートを配置しようとします。ただし、ポートの到達可能性を判別できず、既存のブロードキャストドメインのいずれにも対応していない場合、 ONTAP はこれらのポート用に新しいブロードキャストドメインを作成します。すべてのメンバーポートがインターフェイスグループのメンバーポートになる場合は、必要に応じて、新しく作成したブロードキャストドメインを削除できます。ブロードキャストドメインを削除する</block>
  <block id="ad26ddf2e9b94d63fc11537e49b3ecb8" category="list-text">インターフェイスグループの設定を確認し、必要に応じてメンバーポートを追加または削除します。</block>
  <block id="4f8ff7a721c81a3185d356f1a33fae2d" category="paragraph">インターフェイスグループポートにメンバーポートを追加します。</block>
  <block id="615e12bd105ff14dbfe4918eedb06e9c" category="admonition">アップグレードするシステムのネットワーク構成の複雑さによっては、すべてのポートが必要な場所に正しく配置されるまで手順（ a ）から（ g ）を繰り返してください。</block>
  <block id="f885f903824205e3ac8b26efa5254e8d" category="list-text">[[step4]] システムに VLAN が設定されていない場合は、に進みます <block ref="4c0abef6869b6cad04a71c175246f8ab" category="inline-xref-macro-rx"></block>。VLAN が設定されている場合は、すでに存在しないポートまたは別のブロードキャストドメインに移動されたポートで設定されていたポート上で、取り外された VLAN を復元します。</block>
  <block id="aaa2b516ee5f7ea24e6108032acc280f" category="paragraph">すべてのポートが正しく設定され、正しいブロードキャストドメインに追加されている場合、「 network port reachability show 」コマンドは、接続されているすべてのポートの到達可能性ステータスを「 ok 」、物理的な接続がないポートのステータスを「 no-reachability 」と報告する必要があります。これら 2 つ以外のステータスを報告しているポートがある場合は、に記載されているように、到達可能性を修復します <block ref="908f101af36ad2335dd086df5698bdbf" category="inline-xref-macro-rx"></block>。</block>
  <block id="c2e8f597299baf99355b3fa78126f551" category="list-text">[[man_map_1_step6] すべての LIF が、正しいブロードキャストドメインに属するポートで管理上の理由で稼働していることを確認します。</block>
  <block id="294217f067c6d528ded0650ae8192e3f" category="list-text">動作状態が down になっている LIF がないか確認します。</block>
  <block id="a58275251c4ceab5ef8fb93df1152efe" category="paragraph">アグリゲートの再配置（ ARL ）を使用して ONTAP 9.8 を実行しているコントローラのペアをアップグレードできるかどうかは、プラットフォームおよび元のコントローラと交換用コントローラの両方の構成によって異なります。</block>
  <block id="b2ea28d5ed885ef7926100979ab12c7a" category="list-text">アップグレード前に、元のコントローラと交換用コントローラの両方で同じバージョンの ONTAP 9.8 を実行している必要があります。</block>
  <block id="e52edde4a2daa372f1d2553f7b9406eb" category="list-text">ONTAP 9.8 以降を実行できないコントローラとの間。</block>
  <block id="0b7e952693f4986837beff2196d112d7" category="section-title">ONTAP 9.8 以降のライセンス</block>
  <block id="12ee56bc4ae8d39a35db35e248722ec3" category="paragraph">すべてのライセンスキーは、 28 文字の大文字のアルファベットです。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ONTAP 9.8 用の 28 文字の新しいライセンスキーを入手する方法は、 _NetApp サポートサイト _ にリンクしてください。以降が必要です。キーは、 _ ソフトウェアライセンス _ の _ マイサポート _ セクションにあります。必要なライセンスキーがサイトにない場合は、ネットアップの営業担当者にお問い合わせください。</block>
  <block id="94c614d182457fbc97ae1deaaabd5813" category="paragraph">2 ノードスイッチレスクラスタのノードをアップグレードする場合は、アップグレードの実行中もスイッチレスクラスタのノードをそのまま使用できます。スイッチクラスタに変換する必要はありません。</block>
  <block id="fdc03a42e0e3399344b3116546b77b4d" category="list-text">[man_lif_verify_3_step5] プラットフォームで同じでないデータポートがある場合は、ブロードキャストドメインにポートを追加します。</block>
  <block id="3e874a6c7a8a7acafa16272d6c2b74ee" category="paragraph">次の例は、ノード「 8200-1 」のポート「 e0a 」とノード「 8060-1 」のポート「 e0i 」を、 IPspace 「 Default 」内のブロードキャストドメイン「 mgmt 」に追加します。</block>
  <block id="08ac1a2fb254b60e9c511fe04b6536d0" category="cell">外部キーマネージャ（ EKM ）</block>
  <block id="e5255775e89f083d8e69c73098e5fff2" category="list-text">次のコマンドを入力して、 node4 が node3 と同じクラスタの一部であること、および healthy であることを確認します。</block>
  <block id="a8b841bb612aacb195cf6acc0585fc92" category="list-text">次のコマンドを入力して、ノード 4 がノード 3 と通信できること、およびすべての LIF が動作していることを確認します。</block>
  <block id="07d4c533878766923bd46c0ad1c07580" category="list-text">に進みます <block ref="861668d9cff26e583cb336053a01f9e4" category="inline-xref-macro-rx"></block>。</block>
  <block id="9bce91076db18294fb11d6102c6ff059" category="cell">に進みます <block ref="861668d9cff26e583cb336053a01f9e4" category="inline-xref-macro-rx"></block>。ノード間の HA インターコネクトを手動で接続する必要はありません。同じシャーシ構成では、 HA インターコネクトがバックプレーンを使用して自動的に接続されます。</block>
  <block id="ff7a118b46f3869beb6bcd084db3f81c" category="cell">手順 6 を実行し、セクションに進みます <block ref="433d8081a28a0d8c06bf54d23d4e1297" category="inline-link-macro-rx"></block>。</block>
  <block id="55663f6258861b526745aa5208196d3a" category="cell">手順 6 をスキップしてセクションに進みます<block ref="433d8081a28a0d8c06bf54d23d4e1297" category="inline-link-macro-rx"></block>。</block>
  <block id="66807f2defef8b7eaf2bfaddf801fc4a" category="list-text">いずれかのノードで次のコマンドを入力して、 node3 と node4 の両方がクォーラムにあることを確認します。</block>
  <block id="b36eedb3dc2096d3226039d46eaf45f8" category="list-text">この MetroCluster ファブリック手順環境は、 MetroCluster 以外の構成に加えて、 ONTAP 9.8 以降を実行する 4 ノードおよび 8 ノード構成の Fabric Manager です。</block>
  <block id="ca49ea726cf177756380ffbec6a54a54" category="list-text">ONTAP 9.7 以前を実行する MetroCluster 構成の場合は、に進みます <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ONTAP 9.7 以前を実行しているコントローラハードウェアを手動でアップグレードするには、アグリゲートの再配置を使用するには、をリンクしてください。</block>
  <block id="4839549656731e0245736bfa32bc3606" category="list-text">セットアップが 2 ノードスイッチレスクラスタかどうかを確認するには、次の手順を実行します。</block>
  <block id="0237dfb60fb0152194b2ef8069110809" category="list-text">次のコマンドを使用して、管理者権限レベルに戻ります。</block>
  <block id="cfcca4ee19f6b4091072ade66937870b" category="list-text">「 Cluster 」ブロードキャストドメインの一部となるポートを変更します。</block>
  <block id="e7556064c17516d1637d45f8010ff06c" category="paragraph">次の例では、「 node2 」にクラスタポート「 e1b 」を追加します。</block>
  <block id="1a356c921266e2599c929346ed1cf8f2" category="paragraph">network port modify -node node2 -port e1b -ipspace Cluster -mtu 9000`</block>
  <block id="9df9250bef265936667a669a94c73c45" category="list-text">node2 / node4 の「 health 」状態を表示します。</block>
  <block id="90a80dbcfe2d9dc6015a2d205a26af80" category="paragraph">cluster show -node node2 -fields health`</block>
  <block id="6897b79e7e86c3bf656b3cf8bb05bc85" category="list-text">[man_map_2_Step3] データ LIF をホストする物理ポートのブロードキャストドメインメンバーシップを変更します。</block>
  <block id="322b25940728d29a26180978d33a75a7" category="paragraph">次のような警告が表示されます。y または n を確認し、必要に応じて入力します。</block>
  <block id="28ffee9aa7a190ca41675de91fb9710b" category="list-text">システムに VLAN が設定されていない場合は、に進みます <block ref="f0f83db123b2b495e546349e9d3200d8" category="inline-xref-macro-rx"></block>。VLAN が設定されている場合は、すでに存在しないポートまたは別のブロードキャストドメインに移動されたポートで設定されていたポート上で、取り外された VLAN を復元します。</block>
  <block id="c5c3d54cdf6631e2e290953a91dcd842" category="paragraph">すべてのポートが正しく設定され、正しいブロードキャストドメインに追加されている場合、「 network port reachability show 」コマンドは、接続されているすべてのポートの到達可能性ステータスを「 ok 」、物理的に接続されていないポートのステータスを「 no-reachability 」と報告する必要があります。これら 2 つ以外のステータスを報告しているポートがある場合は、に記載されているように、到達可能性を修復します <block ref="42e2bf4f4ef15f603bcc30bc206d35c3" category="inline-xref-macro-rx"></block>。</block>
  <block id="fd6616fb43f706cbccb578942fa320ab" category="paragraph">ONTAP 9 を実行しているノードペアで、ルート以外のアグリゲートを元のノードから同じクラスタ内の新しいノードに移行することにより、コントローラハードウェアを無停止でアップグレードできます。アップグレード中は、アップグレード対象のノードでホストされているデータにアクセスできます。</block>
  <block id="60b36970c08352c3c476769f29561cf4" category="paragraph">この手順では、 Aggregate Relocation （ ARL ；アグリゲートの再配置）と呼ばれる方法を使用します。 ARL を使用すると、 HA 構成を活用して、ルート以外のアグリゲートの所有権をノード間で移動できます（ルートが同じクラスタ内のストレージを共有している場合）。</block>
  <block id="645b41b640376c487d825f5296fcae9d" category="paragraph">ONTAP を実行しているノードペアで、元のノードから同じクラスタ内の新しいノードにルート以外のアグリゲートを移行することで、コントローラハードウェアを無停止でアップグレードできます。アップグレード中は、アップグレード対象のノードでホストされているデータにアクセスできます。</block>
  <block id="6e6a93e1bc39df87c56313cbfd41fa2c" category="cell">この ONTAP バージョンを実行している場合</block>
  <block id="c8148f766ec78479f303b8e902e9099b" category="cell">システムコマンドでアップグレードするには、次のコマンドを使用します。</block>
  <block id="041dd7a51404fc5dc5a87c2a0bc90b15" category="cell">9.8 以降</block>
  <block id="b9872d104f5b4706bfb3c12a12c6f3d6" category="cell">9.5 から 9.7</block>
  <block id="6af074e0669e408e576b460f5c34b89b" category="cell">手動でアップグレードするには、次を使用します</block>
  <block id="4c41f3a2ec168af1924a7c5a884bdc37" category="cell">9.0 から 9.7</block>
  <block id="be11c74c1dd7f307bb80183a90dc2067" category="sidebar">はじめに</block>
  <block id="ec01d482cf394f212f073921cfd9d5bd" category="sidebar">ONTAP リリースノート</block>
  <block id="10a85281b4bbd72e21850d0eaab35a67" category="sidebar">ストレージまたはボリュームの移動によるアップグレード（ほとんどのシステム）</block>
  <block id="6c54fdf57ce13c518f1cc0d9d5f32820" category="sidebar">コントローラハードウェアをアップグレードします</block>
  <block id="ddb75baab241feb0f5773b6f169099d5" category="sidebar">ONTAP 9.8 以降を実行しているシステムでアグリゲートを移動してアップグレードします</block>
  <block id="194cc1951d00be469039af6dbda275d0" category="sidebar">「 system controller replace 」コマンドを使用（ほとんどのシステム）</block>
  <block id="b4d25e7f066e6393a7e3a6a7115b4f94" category="sidebar">手動コマンドを使用する</block>
  <block id="24f090bf6acc424f4c22ffff65009745" category="sidebar">ONTAP 9.7 以前を実行しているシステムでアグリゲートを移動してアップグレードします</block>
  <block id="5f9c427150012de98abaaa70885c293c" category="sidebar">「 system controller replace 」コマンドを使用します（ほとんどのシステム）。</block>
  <block id="7d94daad2b6e9d77a6320a64c21fbc4a" category="sidebar">MetroCluster 構成のシステムをアップグレードする</block>
  <block id="c6bb96cc8b84319277f00b15adc71d75" category="sidebar">MetroCluster 構成のアップグレード用手順を選択します</block>
  <block id="dfcc398099d6a64026e51ab282e16253" category="sidebar">リソースの追加</block>
  <block id="aaf23d643347b5921ba9716fa4c13f83" category="sidebar">ONTAP システムのドキュメント</block>
  <block id="743b2bde29eae11996923323c6b89672" category="sidebar">ONTAP スイッチのドキュメント</block>
  <block id="dd032435fa83549d8bf3928550409a3e" category="sidebar">ONTAP ソフトウェアのドキュメント</block>
  <block id="519131237f79eadb2dc6a1e003a087bc" category="sidebar">NetApp Active IQ Config Advisor の略</block>
  <block id="bc8be72fdc9d6054f356bb2b7f80fd12" category="sidebar">NetApp Interoperability Matrix を参照してください</block>
  <block id="dd490b81914dd945601e442a41cb4222" category="sidebar">ネットアップコミュニティ</block>
  <block id="d087c3faf4708dbb3c8dfcfefd9745e9" category="sidebar">「 system controller replace 」コマンドを使用して、 ONTAP 9.5 を実行するコントローラハードウェアを 9.7 にアップグレードします</block>
  <block id="c4d333d48f2e07ddeaa6a230635663cf" category="sidebar">ボリュームまたはストレージを移動してアップグレードします</block>
  <block id="ea61e2c2ff507048203824add1eb7c21" category="sidebar">考慮事項</block>
  <block id="2bfb87bbde1d2f1a85359c4188897f44" category="sidebar">方法を選択します</block>
  <block id="78ab525858e669cbe2bbf5be70ac71b8" category="sidebar">ストレージを移動してアップグレード</block>
  <block id="24f47cdbe9ddba774a7cc53e51d9032e" category="sidebar">ワークフロー</block>
  <block id="f8199556cf6a62ca9268aa50c99b34a1" category="sidebar">準備</block>
  <block id="1b775107e10aa9acb2f611db5db714f7" category="sidebar">元のノードをシャットダウンします</block>
  <block id="f4d03224dd15fbdbe8ce7ceae5d94e1b" category="sidebar">ディスク所有権を削除します</block>
  <block id="8c2a9dc1e3eabd2cf2048386719438d7" category="sidebar">デフォルト設定をリセットします</block>
  <block id="b89f2ce6accc5047e235ddc8dae13aa5" category="sidebar">新しいノードをインストール</block>
  <block id="bca5cff73543fb5c182ae115c9e682dc" category="sidebar">新しいノードをセットアップ</block>
  <block id="6a26b76071c114327f8c2765939aa5a7" category="sidebar">オプション - 内蔵ストレージを移動するか、ドライブシェルフに変換します</block>
  <block id="2f8a43bf9cc884df869e4198adef3e58" category="sidebar">内蔵ドライブを移動します</block>
  <block id="fb96a6f2421e21a53ee4078e03bf0b62" category="sidebar">ノードをドライブシェルフに変換します</block>
  <block id="68274bddbfd931594dff2906c4d537d8" category="sidebar">ルートボリューム構成をリストア</block>
  <block id="e2328b54876f0cd6379d9fcbc5572e87" category="sidebar">アップグレードを完了する</block>
  <block id="7686c34f0400921210a5e039c6743309" category="sidebar">ONTAP 9.8 で最後の手順を実行します</block>
  <block id="26000c062eace835ce5a8e9b4f5d553a" category="sidebar">ONTAP 9.7 以前で完了します</block>
  <block id="181a3a0697aaadf877eed027e84ebe7f" category="sidebar">ONTAP 9.7 以前で最終手順を実行します</block>
  <block id="51e0a0afc4d011a307d3419bfe742eba" category="sidebar">ボリュームを移動してアップグレード</block>
  <block id="ff56b4f5944c3419d2cbe4a5a19eb150" category="sidebar">新しいノードを設置して追加</block>
  <block id="04e27e7cb9c80acf93c96099047dadab" category="sidebar">アグリゲートを作成してボリュームを移動</block>
  <block id="f86f16f11e093ddd1a9acafc8ee58e6f" category="sidebar">SAN 以外のデータ LIF とクラスタ管理 LIF を移動する</block>
  <block id="cf3329822cb6acbd3f59abba0514d804" category="sidebar">SAN LIF を削除</block>
  <block id="d2e2f3320c4d610d0815b1405859a98b" category="sidebar">元のノードを分離</block>
  <block id="79f3abfd76c996d707b348dbfb91c42b" category="sidebar">ノード 4 で FC または UTA / UTA2 設定を設定します</block>
  <block id="2e546c2ae4e7d18e3a62352f7899f8ad" category="paragraph">各ノード 4 のプラットフォームについて、『 Installation and Setup Instructions 』または『 FlexArray Virtualization Installation Requirements and Reference_for the node4 』、該当するディスクシェルフのドキュメント、および _High Availability management _ の手順に従って、次の接続をケーブル接続します。</block>
  <block id="96fc3790ed0f779b648493fc7e4b2e7c" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> FlexArray 仮想化インストール要件およびリファレンスとハイアベイラビリティ管理へのリンク。</block>
  <block id="c83b4e572cf3ae5eb7bac42baed0ac9e" category="summary">このトピックでは、他の参照コンテンツや Web サイトにリンクすることができます。</block>
  <block id="82a3300ad94a5e1dcf0a6abbfe1060e2" category="paragraph">このコンテンツの手順を実行するときは、参照コンテンツを参照するか、参照 Web サイトにアクセスする必要があります。</block>
  <block id="14f94d0b133a9aa34a775e955c95b8bc" category="list-text"><block ref="13e4a2cf4e0a4edbef519c9af2452c86" category="inline-xref-macro-rx"></block></block>
  <block id="ec5873b9b6861954a7c07d183dd486b0" category="section-title">参照コンテンツ</block>
  <block id="bc6bec578fabd4f81f97a21373822230" category="paragraph">このアップグレードに固有のコンテンツを次の表に示します。</block>
  <block id="f15c1cae7882448b3fb0404682e17e61" category="cell">内容</block>
  <block id="e2ea913994dd610f57aa9df505badbaa" category="cell"><block ref="e2ea913994dd610f57aa9df505badbaa" category="inline-link-macro-rx"></block></block>
  <block id="5837907b0451e478a454e8fc87e92342" category="inline-link-macro">ファブリック接続 MetroCluster のインストールと設定</block>
  <block id="a3b8dcbb945865e5ef0e1c83b68c8824" category="cell"><block ref="a3b8dcbb945865e5ef0e1c83b68c8824" category="inline-link-macro-rx"></block></block>
  <block id="2894d35f6fa87d4eee09a10919737e2f" category="cell"><block ref="2894d35f6fa87d4eee09a10919737e2f" category="inline-link-macro-rx"></block></block>
  <block id="07ae19817dfc58c8d1b72b612a233da3" category="inline-link-macro">MetroCluster の管理とディザスタリカバリ</block>
  <block id="c750cfcf9c6045b6e0b4b0d6de2212f3" category="inline-link-macro">MetroCluster のアップグレードと拡張</block>
  <block id="d1b75581244e03161b57c29a9ac4bb22" category="inline-link-macro">CLI によるディスクおよびアグリゲートの管理</block>
  <block id="c3aed88c9ee3a48f5d62930613f5710f" category="cell"><block ref="c3aed88c9ee3a48f5d62930613f5710f" category="inline-link-macro-rx"></block></block>
  <block id="083222857448e1fa46a20ea7d228c4a3" category="cell">CLI を使用して ONTAP 物理ストレージを管理する方法について説明します。アグリゲートを作成、拡張、管理する方法、 Flash Pool アグリゲートを使用する方法、ディスクを管理する方法、および RAID ポリシーを管理する方法を示します。</block>
  <block id="9fc34575910b3b930388b5434f515842" category="inline-link-macro">高可用性管理</block>
  <block id="8b8cdc632b8dd03afd9af9cf3f0bbb00" category="cell"><block ref="8b8cdc632b8dd03afd9af9cf3f0bbb00" category="inline-link-macro-rx"></block></block>
  <block id="c1a14ef4c1320caf80e81dff4161eb9b" category="inline-link-macro">CLI を使用した論理ストレージ管理</block>
  <block id="23806251831778e9042b7dc8e04e42d9" category="cell"><block ref="23806251831778e9042b7dc8e04e42d9" category="inline-link-macro-rx"></block></block>
  <block id="9dc1904e0c3ace141704b477cd9b345d" category="inline-link-macro">Network Management の略</block>
  <block id="378e9004462b7ecfad8256f25b57fbf6" category="cell"><block ref="378e9004462b7ecfad8256f25b57fbf6" category="inline-link-macro-rx"></block></block>
  <block id="65fd0eeec8bd27e4c5c654edfee09feb" category="inline-link-macro">CLI での SAN 管理</block>
  <block id="664cc44494bab5cf2c42eaaf2e325791" category="cell"><block ref="664cc44494bab5cf2c42eaaf2e325791" category="inline-link-macro-rx"></block></block>
  <block id="47773d8cdfca4f560a96f33d81b47858" category="cell">iSCSI および FC プロトコルを使用して LUN 、 igroup 、ターゲットを設定および管理する方法、 NVMe/FC プロトコルを使用してネームスペースとサブシステムを設定および管理する方法について説明します。</block>
  <block id="121d9e4993fb92968420c9621abc9dd8" category="inline-link-macro">SAN 構成リファレンス</block>
  <block id="b6cd49332e8e4e167bacc80f785766b6" category="cell"><block ref="b6cd49332e8e4e167bacc80f785766b6" category="inline-link-macro-rx"></block></block>
  <block id="52e0bf29e7e2fb64c989717df1d63c01" category="inline-link-macro">クラスタセットアップで System Manager と ONTAP CLI のどちらを使用するかを決定します</block>
  <block id="c8043f5acc6a28fdf197d7834583500e" category="cell"><block ref="c8043f5acc6a28fdf197d7834583500e" category="inline-link-macro-rx"></block></block>
  <block id="a2960939186ae78b824d694e2cbba800" category="inline-link-macro">CLI での管理の概要</block>
  <block id="1baf9f7ecc4554f61d6168e4897ea002" category="cell"><block ref="1baf9f7ecc4554f61d6168e4897ea002" category="inline-link-macro-rx"></block></block>
  <block id="d04e5f519989e5f2ca95f9541ffe17a0" category="inline-link-macro">ONTAP をアップグレードします</block>
  <block id="52fe96f88349d1bc6c73acbb2110bf86" category="cell"><block ref="52fe96f88349d1bc6c73acbb2110bf86" category="inline-link-macro-rx"></block></block>
  <block id="10c0930f56be634af04f178b42398018" category="paragraph">。 <block ref="a578dfd24b9ac76011d432b13fc1b9d1" category="inline-link-macro-rx"></block> また、システムで使用する可能性のあるネットワークインターフェイスカード（ NIC ）やその他のハードウェアに関するドキュメントも含まれています。また、にも含まれています <block ref="9c839fcdfb8699a63c787254d7b1ae03" category="inline-link-macro-rx"></block>をクリックします。このコマンドは、新しいシステムでサポートされるハードウェアに関する情報を提供します。</block>
  <block id="c09b5be4c2da04f4040eef1878f258aa" category="inline-link">ONTAP 9 のドキュメント</block>
  <block id="4c77344094e11bcee3a61c5cd6d9d092" category="paragraph">にアクセスします<block ref="10428d07d2ebc7af9af6725963887c6d" category="inline-link-rx"></block>。</block>
  <block id="4c6af378b95f57bc3cd0d3c8aeab771d" category="paragraph">にアクセスします <block ref="5fbf315c6f5ea598be883d972c599456" category="inline-link-macro-rx"></block> ツール。</block>
  <block id="4ba8d4701b7c72b570a63797aff938e0" category="list-text">ONTAP 9.10.1 以降では、 4 ノードの MetroCluster FC 構成のデフォルトの自動ネゴシエートスイッチオーバー（ NSO ）ベースのアップグレード手順が使用されます。4 ノード MetroCluster FC 構成をアップグレードする場合、「 system controller replace start 」コマンドを問題するときに、「 -nso 」パラメータを「 false 」に設定して、 NSO ベースの手順の起動を禁止する必要があります。</block>
  <block id="b5217a01cec2b264eab0761f085ee2eb" category="list-text">「 system controller replace start 」コマンドは、 advanced 権限レベルでのみ実行できます。</block>
  <block id="45e3f26bb2c9a72d8467afe9a6c33e38" category="cell">交換するノードで同じバージョンの ONTAP が実行されていることを確認します。ONTAP イメージのバージョンが異なると、タスクは失敗します。新しいノードには、元のノードと同じバージョンの ONTAP 9.x がインストールされている必要があります。新しいノードに別のバージョンの ONTAP がインストールされている場合は、設置後に新しいコントローラをネットブートする必要があります。ONTAP のアップグレード方法については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> リンク先： ONTAP のアップグレード _ 。</block>
  <block id="954ad5efed3e43bfb3badad9c505735b" category="cell">交換するノードに不足しているディスクまたは障害が発生しているディスクがある場合、タスクは失敗します。足りないディスクがある場合は、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> CLI でディスクおよびアグリゲートの管理にリンクするには、 CLI_ 、 _ で論理ストレージの管理に使用します。 HA ペアのストレージを構成するには、 _ 、 _ ハイアベイラビリティ管理 _ を使用します。</block>
  <block id="3f906c041fb469b2794aa7ce7964b2a7" category="list-text">システムコンソールで、コントローラの交換用手順の指示に従って、次のコマンドセットを実行します。</block>
  <block id="c209ee9c3a703005ec3303b04dddff2f" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> MetroCluster の管理とディザスタリカバリのコンテンツにリンクし、ネゴシエートスイッチオーバー、修復、スイッチバックについて記載された手順を使用するには、次の手順を実行します。</block>
  <block id="b029dd94e134cfaf963a04051ff43f6d" category="admonition">内蔵ドライブをサポートするシステム（ FAS2700 または AFF A250 など）をアップグレードする場合でも内蔵ドライブがないときは、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> および、 _ アグリゲートの再配置に含まれる手順を使用して、使用している ONTAP のバージョンに適したコントローラ Hardware_content を手動でアップグレードします。</block>
  <block id="14fc1fec490b9f5ad23d58c3c55d4441" category="paragraph">内蔵ドライブを搭載したエントリレベルのコントローラをアップグレードする場合は、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ボリュームまたは storage を移動して _Upgrade にリンクし、 Data ONTAP に移動して、 clustered 手順を実行するノードのペアをアップグレードする _ に進みます。</block>
  <block id="5ab1ba3aba863ed7175637aaa48e2f73" category="paragraph">設置とセットアップの手順 _ または FlexArray 仮想化インストールの要件とリファレンス _ を使用して、ノード 3 プラットフォーム、該当するディスクシェルフのドキュメント、および _High Availability Management _ を使用して、次の接続をケーブル接続します。</block>
  <block id="c78fd54aa1461d651da28406676f336f" category="admonition">この手順では、 VLAN 、 ifgrp 、およびブロードキャストドメインの作成に関するセクションの名前が「 _node4 にあるネットワーク設定のリストア」に変更されています。</block>
  <block id="de1d1723e281ecfbe16611cb895dd237" category="paragraph">VLAN 、インターフェイスグループ、およびブロードキャストドメインの作成と再作成の詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして _ ネットワーク管理 _ にリンクします。</block>
  <block id="84b1703925b211a597f4b166b1d80848" category="list-text">HA クラスタなどの MetroCluster 以外手順のシステムでは、 ARL アップグレードのみがサポートされます。</block>
  <block id="598121171fa3c84a4730985ce38a5809" category="list-text">AFF A320 システムからアップグレードする場合は、ボリューム移動を使用してコントローラハードウェアをアップグレードするか、テクニカルサポートにお問い合わせください。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、ボリュームまたは storage _ を移動して _ Upgrade にリンクします。</block>
  <block id="7502f8f780af629ea69a176b286f5472" category="doc">アグリゲートの再配置の内容を使用するかどうかを決定します</block>
  <block id="3f798c20b7ed33a5dda01b83754704c2" category="paragraph">このコンテンツでは、 HA ペアのストレージコントローラを新しいコントローラにアップグレードし、既存のデータとディスクをすべて残す方法について説明します。これは複雑な手順であり、経験豊富な管理者のみが使用する必要があります。</block>
  <block id="6068cafb9274839f4dfb371ae190757e" category="list-text">MetroCluster 構成をアップグレードする場合は、 4 ノード以上の FC 構成になり、すべてのノードで ONTAP 9.8 以降が実行されている必要があります。</block>
  <block id="4c9c9eda5f5430e91b4aed6f35a5e99d" category="paragraph">MetroCluster IP 構成のアップグレードについては、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> MetroCluster アップグレードおよび Expansion コンテンツにリンクするには、次の手順を実行します。</block>
  <block id="10d20d0fff1a2bb0b064f8b1a068b234" category="paragraph">コントローラハードウェアを別の方法でアップグレードして、ボリュームの移動を希望する場合は、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、ボリュームまたは storage _ を移動して _ Upgrade にリンクします。</block>
  <block id="5faf3e9d007712b89cd716c2cbabed9f" category="paragraph">コントローラのアップグレード時に、コントローラは、より新しい、またはより強力なプラットフォームを実行する別のコントローラに交換されます。このコンテンツの以前のバージョンには、完全に手動で実行するだけで構成されるコントローラの無停止更新プロセスの手順が含まれていました。このコンテンツでは、新しい自動手順の手順を紹介します。自動化された新しい では、ネットワークポートの到達可能性チェックが自動化され、コントローラのアップグレードがさらに簡単になります。</block>
  <block id="794c7b1870555759c37165eedd11e861" category="admonition">この手順では、 VLAN 、 ifgrp 、およびブロードキャストドメインの作成に関するセクションの名前が、 node3 のネットワーク設定の名前が _Restore に変更されています。</block>
  <block id="2618ba1924760141eb8ebfb30bb1d8a9" category="paragraph">VLAN 、インターフェイスグループ、およびブロードキャストドメインの作成と再作成の詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> およびリンク先： _ ネットワーク管理 _ 。</block>
  <block id="b838d4fde6c980fa55cf1649eccebfb3" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、 _Network Management_ または _ONTAP 9 コマンド：マニュアルページリファレンスにリンクしてください。</block>
  <block id="9b4a7067960efcb28456ef46d4ac8143" category="cell">交換するノードに不足しているディスクまたは障害が発生しているディスクがある場合、タスクは失敗します。足りないディスクがある場合は、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> CLI でディスクおよびアグリゲートの管理にリンクするには、 CLI_ 、 _ で論理ストレージの管理に使用します。 HA ペアのストレージを構成するには、 _ 、 _ ハイアベイラビリティ管理 _ を使用します。</block>
  <block id="eff04d06fc1c15ba7f721c6eb771ca87" category="list-text">AFF A320 システムからアップグレードする場合は、ボリューム移動を使用してコントローラハードウェアをアップグレードするか、テクニカルサポートにお問い合わせください。ボリュームの移動を希望する場合は、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、ボリュームまたは storage _ を移動して _ Upgrade にリンクします。</block>
  <block id="9897d9d5a6dc54cd05e35a06df6d54b5" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ネットワーク管理 _ または _ ONTAP 9 コマンド：マニュアルページリファレンス _ および _ LIF でのフェイルオーバー設定の詳細については、 _ を参照してください。</block>
  <block id="c27e64cafb401d038cff1543dd15a9f5" category="paragraph">このコンテンツの以前のバージョンには、完全に手動で実行するだけで構成されるコントローラの無停止更新プロセスの手順が含まれていました。このコンテンツでは、新しい自動手順の手順を説明します。</block>
  <block id="0fe674cba26a6125717793de11bb3096" category="inline-link">クラスタ拡張管理</block>
  <block id="ba4c26e136f2c434b8b6af81213365cf" category="paragraph"><block ref="ba4c26e136f2c434b8b6af81213365cf" category="inline-link-rx"></block></block>
  <block id="9d9192129e1b9a1e59bd50fc144f8867" category="paragraph"><block ref="9d9192129e1b9a1e59bd50fc144f8867" category="inline-link-rx"></block></block>
  <block id="579f7a458ea3f243e9743154fab94bfb" category="inline-link">CLI を使用して暗号化を管理します</block>
  <block id="6aee45ea83745bd29b2b86870d2afe83" category="list-text">の該当する手順を使用して、ストレージまたはボリュームの暗号化機能をリストアします<block ref="713156fa56254a04d458a101e174aa50" category="inline-link-rx"></block> 内容</block>
  <block id="086420e81e05bfb84cdecaa4b231e80e" category="paragraph"><block ref="086420e81e05bfb84cdecaa4b231e80e" category="inline-link-rx"></block></block>
  <block id="fbe34624578a760349ae68127c704b12" category="paragraph"><block ref="fbe34624578a760349ae68127c704b12" category="inline-link-rx"></block></block>
  <block id="22e61f778fcc138303ee1a3352b40770" category="list-text">にログインします<block ref="9a6f401ca1e7e89d8a0c29fb0cbe81b7" category="inline-link-rx"></block> サイト</block>
  <block id="32f214bce43cce7090d2126fda118b4f" category="paragraph">お使いのシステムが上記のリストにない場合は、を参照してください<block ref="f73c85a53b5d65cc9c35da0b9e0d2f09" category="inline-link-rx"></block> 内蔵ドライブがあるかどうかを確認します。</block>
  <block id="60dc130e71debefeec3618ac3017c8cc" category="list-text">必要に応じて、 node3 と node4 にアダプタを取り付けます。その際には、該当するアダプタのインストール手順の手順に従います。</block>
  <block id="05a828bdf3e9eb5eb73dbd8f32fc87ba" category="inline-link">必要なデータ保護手順を探します</block>
  <block id="830476e871eedc92e5ffda6c2c33b533" category="paragraph"><block ref="331cb63b7c37688cf0c07ea29b8a4923" category="inline-link-rx"></block>。</block>
  <block id="605eb2ff368b7d55e14901ea718fa36c" category="list-text">を確認しておく必要があります <block ref="3548781d8fe3c65e8421c7698ed973f9" category="inline-link-macro-rx"></block> 内蔵ドライブの移動について</block>
  <block id="7c5ee56a01b06b00d2d910cc295d8c56" category="paragraph"><block ref="7c5ee56a01b06b00d2d910cc295d8c56" category="inline-link-rx"></block></block>
  <block id="5fbaf3818e4461fbf39776037d449b56" category="paragraph"><block ref="5fbaf3818e4461fbf39776037d449b56" category="inline-link-rx"></block></block>
  <block id="b834460d0f5479ce8ff8376257efb419" category="paragraph">ルートアグリゲートのサイズの要件については、を参照してください<block ref="f73c85a53b5d65cc9c35da0b9e0d2f09" category="inline-link-rx"></block></block>
  <block id="58e1fb49e8eda8dc590e37ebdffc8e85" category="list-text">2 ノード MetroCluster 構成をアップグレードする場合は、次の項を参照してください。<block ref="a3f8fb08d450ed0f7b5dc460c9a9149e" category="inline-link-rx"></block></block>
  <block id="b71567cb9c157f9c9b7aa387b9fe6ae0" category="paragraph"><block ref="b71567cb9c157f9c9b7aa387b9fe6ae0" category="inline-link-rx"></block></block>
  <block id="b1ddd6d6d90c80426e14d10c6ded3cc0" category="paragraph"><block ref="b1ddd6d6d90c80426e14d10c6ded3cc0" category="inline-link-rx"></block></block>
  <block id="8481ff5a6197df6d5f77cc03a2cc6d88" category="paragraph"><block ref="8481ff5a6197df6d5f77cc03a2cc6d88" category="inline-link-rx"></block></block>
  <block id="793b486187db5ad7f686089607c08fea" category="list-text">パラメータ '_node1_sysid_' は ' 元のノードのシャットダウン _ で記録した値です <block ref="1e1f8cc7c148a6ce0e555a2eab402733" category="inline-link-macro-rx"></block>。</block>
  <block id="cfd2431baff6fc4122f2c8fed540c128" category="paragraph">ストレージを移動してアップグレードするプロセスでは、 node3 と node4 の電源をオンにし、ソフトウェアイメージをブートしてノードを設定します。元のノードと新しいノードで、物理ポートのレイアウトが異なる場合があります。ポートと接続の適切なレイアウトを特定するには、元のノードと交換用ノードの間のポートのマッピングを行う必要があります。</block>
  <block id="a57aac48a821a53a307169a496e18118" category="inline-link-macro">手順 5.</block>
  <block id="2b74e29dce2257a68211617c402f9061" category="paragraph">新しいノードで実行されている ONTAP のバージョンが元のノードのバージョンと異なる場合は、ネットアップサポートサイトから Web にアクセスできるディレクトリに正しい「 &lt;ONTAP_version&gt;_image.tgz 」ファイルをダウンロードしておく必要があります（ storage_, を移動するときのアップグレードの準備を参照してください）。 <block ref="a49c2511b21eba354c03ca701f675aae" category="inline-link-macro-rx"></block>）。システムのネットブートを実行するには、「 &lt;ONTAP_version&gt;_image.tgz 」ファイルが必要です。</block>
  <block id="fb466db54f62bed3a97d8ba7d3ed2c8e" category="list-text">の該当する手順を使用して、ストレージまたはボリュームの暗号化機能をリストアします<block ref="9dcdd70dc160b50ece72ebdfa01ae45b" category="inline-link-rx"></block> 内容</block>
  <block id="ac8600b2addf6ed639b9f65bda812bde" category="list-text">アップグレードする新しい各ノードについて、デフォルトのクラスタポート、データポート、およびノード管理ポートに関する情報を取得します。<block ref="f73c85a53b5d65cc9c35da0b9e0d2f09" category="inline-link-rx"></block></block>
  <block id="2c6817284baf4051a1411668b9c30fcb" category="list-text">[[prepare_move_store_5] ネットブートの実行に使用するファイルをダウンロードして準備します。</block>
  <block id="f18720a1eb7d7bace925c2a97a20075f" category="list-text">にアクセスします<block ref="3725c06f412bedb14ffd610de312875d" category="inline-link-rx"></block> システムのネットブートの実行に使用するファイルをダウンロードするには、次の手順を実行します。</block>
  <block id="7d29fb6edb20ce6f3fcde443c39ef137" category="inline-xref-macro">新しいノードをセットアップ</block>
  <block id="ca8b0b541358f7e84a5255015051bf42" category="paragraph">ディレクトリ内の情報をに使用します <block ref="8bfb8dcff60c45f1bd8ce7151db542d5" category="inline-xref-macro-rx"></block>。</block>
  <block id="3098dc1e81196ed0a5c7526536b21dc6" category="list-text">storage_, の移動時のアップグレードの準備でメモしておいたノード 1 とノード 2 のポートと LIF の設定情報を確認します。 <block ref="54c74de3517b342dfae1a3129a67e9ec" category="inline-link-macro-rx"></block>。</block>
  <block id="785fd52ca2c4957e9caba4406db084c0" category="list-text">storage_ 、 <block ref="54c74de3517b342dfae1a3129a67e9ec" category="inline-link-macro-rx"></block>。</block>
  <block id="b27e1f5014645cf6a835fb2e11524da4" category="list-text">システムに VLAN が設定されていない場合は、に進みます <block ref="44c817ee9110592f40577b67e8940aff" category="inline-xref-macro-rx"></block>。VLAN が設定されている場合は、すでに存在しないポートまたは別のブロードキャストドメインに移動されたポートで設定されていたポート上で、取り外された VLAN を復元します。</block>
  <block id="72a19323d192a6a70bcf03b98d5355ae" category="paragraph">すべてのポートが正しく設定され、正しいブロードキャストドメインに追加されている場合、 network port reachability show コマンドで、接続されているすべてのポートのプレゼンスステータスが OK と報告され、物理的な接続がないポートのステータスは no-reachability と報告される必要があります。これら 2 つ以外のステータスを報告しているポートがある場合は、に記載されているように、到達可能性を修復します <block ref="84a764803e273063ea87749716b7c654" category="inline-xref-macro-rx"></block>。</block>
  <block id="2c6770803baeb326c3573c2c99ff387a" category="summary">このコンテンツでは、ストレージまたはボリュームを移動することで、クラスタ内の AFF システムまたは FAS システムのコントローラハードウェアをアップグレードする方法について説明します。</block>
  <block id="10ce071fec41e8ee934d0d2c7ef28c46" category="doc">ボリュームまたはストレージを移動してアップグレードするかどうかを決定します</block>
  <block id="ec9ed7bffd77d0096865ed2f7cdcc6cb" category="inline-link">MetroCluster ® のアップグレードと拡張</block>
  <block id="ee50784c4307d33a05ee2e7ea5146e6b" category="inline-link-macro">ARL コントローラハードウェアのアップグレード</block>
  <block id="a96bbb56bf9f254d0e2034d1d7d6da26" category="paragraph">このコンテンツでは、 Aggregate Relocation （ ARL ；アグリゲートの再配置）を使用してコントローラハードウェアをアップグレードする方法については説明していません。詳細については、を参照してください <block ref="f1bb1f12e9cbaac696243166fca7cc1f" category="inline-link-macro-rx"></block> 内容</block>
  <block id="4888a1163bab7e13f5a9de829f599dba" category="inline-link">MetroCluster のメンテナンスタスクの手順の参照先</block>
  <block id="effb241d20cc6c1913b072368a57f470" category="paragraph"><block ref="effb241d20cc6c1913b072368a57f470" category="inline-link-rx"></block></block>
  <block id="8b6679d6197b72adb78dae0febbb41a1" category="list-text">storage_ 、 <block ref="54c74de3517b342dfae1a3129a67e9ec" category="inline-link-macro-rx"></block>。</block>
  <block id="f7099f8383ed0316e1e0935c4d6ccef1" category="list-text">[[map_97_7] ノード管理ブロードキャストドメインを調整し、必要に応じてノード管理 LIF とクラスタ管理 LIF を移行します。</block>
  <block id="273df14d79796f9686588da9d3449080" category="list-text">必要に応じて、のコマンドを使用して、クラスタ間ブロードキャストドメインを調整し、クラスタ間 LIF を移行します <block ref="ff47d2d93900744c317edfe39ed00899" category="inline-xref-macro-rx"></block>。</block>
  <block id="34c3e41105245eedc58a41b84d06a8da" category="list-text">必要に応じて、のコマンドを使用して、他のブロードキャストドメインを調整してデータ LIF を移行します <block ref="ff47d2d93900744c317edfe39ed00899" category="inline-xref-macro-rx"></block>。</block>
  <block id="da988c28044d8fc8463a4db2336f20f0" category="list-text">_ インストールおよびセットアップ手順 _ または _ FlexArray 仮想化インストール要件およびリファレンス _ （ノード 4 プラットフォーム用）</block>
  <block id="72860e73833a237fd9811df9152c9a7a" category="list-text">該当するディスクシェルフの手順を選択します</block>
  <block id="b9b51f95b333e31e76a0f718bee344fa" category="list-text">高可用性管理に関するドキュメント（ _High Availability MANAGEMENT</block>
  <block id="6afaaeefe5c37f69581ad1614c57cff4" category="paragraph">に進みます <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、 _Network Management_ または _ONTAP 9 コマンド：マニュアルページリファレンスにリンクしてください。</block>
  <block id="9f60baa5d0a7e514432de3c5beb88857" category="paragraph">ルートアグリゲートまたはデータアグリゲートが含まれるコントローラを内蔵ディスクドライブにアップグレードする場合は、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ボリュームまたは storage を移動して _Upgrade にリンクし、 Data ONTAP に移動して、 clustered 手順を実行するノードのペアをアップグレードする _ に進みます。</block>
  <block id="ae307041467b0820fea754d90cc7abda" category="admonition">クラスタ内のノードの ONTAP をアップグレードする場合は、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> リンク先： ONTAP のアップグレード _ 。</block>
  <block id="986991a93176ee231138e71796e3557e" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> 高可用性管理にリンクし、 HA ペアのベストプラクティスセクションの _ に従ってください。元のノードのどちらも 50% 以上の利用率で実行しないでください。あるノードの利用率が 50% 未満の場合は、コントローラのアップグレード中に両方のノードの負荷を処理できます。</block>
  <block id="e1cbc9b64c5a195f57ded4409cfe8fbc" category="paragraph">いずれかのノードが部分的なギブバック状態にある場合は、「 storage failover giveback 」コマンドを使用してギブバックを実行し、「 storage failover show-giveback 」コマンドを使用して、ギブバックする必要がないことを確認します。コマンドの詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、 _High Availability MANAGEMENT にリンクします。</block>
  <block id="f6ad618b685a2a7a446cddb4787d965d" category="paragraph">足りないディスクがある場合は、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> CLI でディスクおよびアグリゲートの管理にリンクするには、 CLI_ 、 _ で論理ストレージの管理に使用します。 HA ペアのストレージを構成するには、 _ 、 _ ハイアベイラビリティ管理 _ を使用します。</block>
  <block id="26284a568c7e38bb6355694c41ff5f8d" category="paragraph">いずれかのディスクで障害が発生した場合は、 CLI での _Disk およびアグリゲートの管理の手順に従ってディスクを取り外します。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> CLI を使用してディスクおよびアグリゲートの管理にリンクするには、を参照してください）。</block>
  <block id="2722bd9e96d97f6dd8c071e92fb500ce" category="list-text">_ インストールおよびセットアップ手順 _ または _ FlexArray 仮想化インストール要件およびリファレンス _ （ node3 プラットフォーム用）</block>
  <block id="025b7f36f1c9c8c4d48374557ce1ad36" category="paragraph">storage aggregate relocation コマンドの詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> CLI_ および ONTAP 9 コマンド：マニュアルページリファレンス _ を使用してディスクおよびアグリゲートの管理にリンクするには、次の手順を実行します。</block>
  <block id="30e26e7bc72201dff893ca95a6a239d8" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> CLI の _content および ONTAP 9 コマンド：マニュアル・ページ・リファレンスで、ストレージ・アグリゲートの再配置コマンドの詳細を確認するには、 _ ディスクおよびアグリゲートの管理にリンクしてください。</block>
  <block id="b146e8621e721a92c4b9d852f016cd74" category="paragraph">RCF を使用するためには、 FC スイッチポートの用途がファブリック接続 MetroCluster インストールおよび設定コンテンツに記載されている用途と同じである必要があります。に進みます <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ファブリック接続 MetroCluster インストールおよびコンフィギュレーションコンテンツにリンクするには、次の手順を実行します。</block>
  <block id="c7ed61befb59e9d4925fe6dba2f74da6" category="paragraph">8 ノード MetroCluster 構成のポート用途に従って、スイッチタイプに対応したケーブルレイアウトを決定するには、 _ Fabric-attached MetroCluster Installation and Configuration_content を使用します。リファレンス構成ファイル（ RCF ）を使用できるようにするために、 FC スイッチポートの用途がコンテンツに記載されている用途と同じである必要があります。</block>
  <block id="873e03798738ee8f4ea5e24bbff9d693" category="paragraph">に進みます <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ファブリック接続 MetroCluster インストールおよびコンフィギュレーションコンテンツにリンクするには、次の手順を実行します。</block>
  <block id="bba101d4874014cacb5b1fc7fbe7165c" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> MetroCluster の管理とディザスタリカバリのコンテンツにリンクし、ネゴシエートスイッチオーバー、修復、スイッチバックの手順に従ってください。</block>
  <block id="d39db7fce48b58f92b4d2b9b0c3351df" category="paragraph">詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ネットワーク管理 _ または _ ONTAP 9 コマンド：マニュアルページリファレンス _ にリンクするには、 _ LIF でのフェイルオーバーの設定 _ に進みます。</block>
  <block id="2c075b61ab1e5a7bc43a337e5b594a77" category="paragraph">storage aggregate relocation コマンドの詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> CLI_ および ONTAP 9 コマンド：マニュアルページリファレンス _ を使用してディスクおよびアグリゲートの管理にリンクするには、次の手順を実行します。</block>
  <block id="5f57a66b3e1d6733761d27be10e87b12" category="list-text">MetroCluster IP 構成および Fabric MetroCluster 構成のその他のアップグレードオプションについては、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> MetroCluster アップグレードおよび Expansion コンテンツにリンクするには、次の手順を実行します。</block>
  <block id="8ccdb707cd31c1e478505a54dfa90f7a" category="paragraph">このコンテンツでは、アグリゲートの再配置を使用して、システムを停止することなくコントローラハードウェアをアップグレードする方法について説明します。</block>
  <block id="6e58652b4dc76659a9eeef1a0ccc6daf" category="paragraph">このコンテンツでは、アグリゲートの再配置（ ARL ）を使用して、システムを停止することなくコントローラハードウェアをアップグレードする方法について説明します。</block>
  <block id="35deab861c4c6574ac8f1f1318cc7d5e" category="paragraph">コントローラハードウェアをアップグレードするその他の方法については、を参照してください <block ref="503464dd540ecb373e0d8f614f4262f2" category="inline-xref-macro-rx"></block> をクリックして、ボリュームまたは storage _ を移動して _ Upgrade にリンクします。</block>
  <block id="f7a0874d2fe18058d08d01fb0120a9d9" category="paragraph">ARL では HA 構成を利用して、ルート以外のアグリゲートの所有権をノード間で移動できます（ルート以外のアグリゲートが同じクラスタ内のストレージを共有している場合）。</block>
  <block id="baf4103e3ee1058b17cd4da23c15704b" category="paragraph">ARL には、システムコマンドまたは手動アップグレードを使用したコントローラハードウェアのアップグレード用の方法が 2 つあります。を開始する前に、コントローラハードウェアのアップグレードに適したコンテンツを選択していることを確認する必要があります。</block>
  <block id="757f3d0794e578256e35f77de45e53d1" category="paragraph">システムコマンドを使用してアップグレードを実行する場合は、次の表を参照してください。</block>
  <block id="f205bf1a1b77ff86829c2c9003e57d32" category="paragraph">手動アップグレードを実行する場合は、次の表を参照してください。</block>
  <block id="55b615d5a5d5462e3f46ce9376778ab0" category="list-text">node3 の起動後に node3 に VLAN とインターフェイスグループの情報を再作成できるように、 VLAN とインターフェイスグループの情報を記録します。</block>
  <block id="a2e30cff23423051f81bd802a4867e92" category="list-text">ポートおよびインターフェイスグループの情報をまだ保存していない場合は、ノード 3 のブート後にそれらの VLAN とインターフェイスグループをノード 3 で再作成できるように、それらの情報を記録します。</block>
  <block id="d5736566f3b38c38d89537f2b1d352ca" category="list-text">まだ保存していない場合は、 VLAN および ifgrp の情報を記録して、ノード 3 のブート後に VLAN および ifgrp を作成し直すことができます。</block>
  <block id="1b4080c52526ea8390adef3facc6646f" category="doc">SAN LIF が元のノードから不要になりました</block>
  <block id="94e9d0bee98aefbd97c04b1401f6c790" category="paragraph">クラスタが SAN 環境にある場合は、元のノードから不要になった SAN LIF を削除してから、元のノードをクラスタから削除する必要があります。</block>
  <block id="e756ac7d9a5fd3abb4a55029a22c0817" category="summary">クラスタの内容とクラスタ環境に応じて、 SAN LIF を移動、削除、または再作成する必要があります。</block>
  <block id="2b3144340f2db340218f76914a6af256" category="doc">新しい SAN LIF を作成するか、削除した SAN LIF を再作成します</block>
  <block id="051662f99e538a90d87104fddd664c40" category="inline-link">ネットワークインターフェイスが作成されます</block>
  <block id="0b3461f9ff1cc0e9748c51914f12d1ac" category="paragraph">クラスタ環境の要件に応じて、この手順で削除した新しい SAN LIF を作成するか、または SAN LIF を再作成することができます。を使用して、 SAN LIF を作成または再作成できます<block ref="307c1988750a87c4014551385f0a3aa7" category="inline-link-rx"></block> OnCommand ® System Manager_documentation を使用したクラスタ管理の手順</block>
  <block id="9755bcbb5a429349c5615c0f3ada05c7" category="summary">SAN LIF の移動が必要になるのは、クラスタの内容を変更する場合だけです。</block>
  <block id="25f08d7b61860ee1109108f6e40dfa08" category="doc">SAN LIF の移動に関する考慮事項</block>
  <block id="78e610b85ab6101167c6fa157b66555f" category="paragraph">クラスタにノードを追加したりクラスタからノードを削除するなど、クラスタの構成を変更する場合は、 SAN LIF を移動するだけで済みます。LIF を移動した場合、 FC ファブリックを再ゾーニングしたり、クラスタに接続されたホストとその新しいターゲットインターフェイスとの間に新しい iSCSI セッションを作成したりする必要はありません。</block>
  <block id="cea2f29230da8c2fef3774a56b365b07" category="paragraph">SAN LIF を移動するには、「 network interface modify 」コマンドを使用します。SAN LIF を移動するには、 LIF をオフラインにし、別のホームノードやポートに移動してから、移動先の新しい場所で LIF をオンラインに戻す必要があります。Asymmetric Logical Unit Access （ ALUA ；非対称論理ユニットアクセス）は、任意の ONTAP 解決策の一部として冗長パスと自動選択を提供します。このため、移動時に LIF がオフラインになっても、 I/O の中断は生じません。ホストは再試行してから、 I/O を別の LIF に移動するだけです。</block>
  <block id="5a7069a59566aed43a1807b999c67b98" category="paragraph">LIF の移動中は、システムを停止することなく次のタスクを実行できます。</block>
  <block id="e30c2c276ce1db1c06a2b1d0b484ce01" category="list-text">クラスタの 1 つの HA ペアを、 LUN データにアクセスするホストにはまったく支障のない形で、アップグレードした HA ペアに置き換えます</block>
  <block id="6122825da89f3a77f8980f730d12d268" category="list-text">ターゲットインターフェイスカードをアップグレードします</block>
  <block id="995489fe191f249d97b2746413c8ce51" category="list-text">Storage Virtual Machine （ SVM ）のリソースをクラスタ内のノードセットから同じクラスタ内の別のノードセットに移行する</block>
  <block id="56156496b19659e54135677ece56f2f7" category="list-text">ホストサーバがオンラインのときに、ホストサーバによる LUN データへのアクセスを中断することなく、 SAN LUN を新しい HA ペアに移動できます</block>
  <block id="2dd82882bae57f157f720bee2e0f1c24" category="inline-link">SAN LIF の移動</block>
  <block id="f6e1595cdf693f15c733ea3348445b77" category="paragraph">詳細については、を参照してください<block ref="52d99da56caea8d9bc5c4380abc20d71" category="inline-link-rx"></block> SAN ストレージ管理に関するドキュメントの手順</block>
  <block id="b5d4cb67b7812ac1a600c8741c4e6c3e" category="summary">クラスタの内容とクラスタ環境に応じて、 SAN LIF を移動、削除、または作成するか、削除した SAN LIF を再作成する必要があります。</block>
  <block id="8093d580d9cc0468991044c64c97b174" category="doc">SAN LIF を移動、削除、または作成する</block>
  <block id="a0b6fb238d938d8b3632372a4084f575" category="inline-link-macro">SAN LIF の移動に関する考慮事項</block>
  <block id="6c4c7e577e407c3d612b2254ba5aeaad" category="list-text"><block ref="6c4c7e577e407c3d612b2254ba5aeaad" category="inline-link-macro-rx"></block></block>
  <block id="4a0fbf919570309e7272750b2374a969" category="list-text"><block ref="4a0fbf919570309e7272750b2374a969" category="inline-link-macro-rx"></block></block>
  <block id="7411801636d93c5890addb910d57f9f3" category="list-text"><block ref="7411801636d93c5890addb910d57f9f3" category="inline-link-macro-rx"></block></block>
  <block id="a0b4daa7e353d3d7dd1a62bec6a63421" category="list-text"><block ref="a0b4daa7e353d3d7dd1a62bec6a63421" category="inline-xref-macro-rx"></block></block>
  <block id="fa332b15cdfbb22760413e4a60513a40" category="cell">- 完了しました <block ref="a4882b71f5935aea43154f35b1a6d350" category="inline-xref-macro-rx"></block> セクションに移動します <block ref="7401650b9cd3ea8be2a2d31b363b2b3c" category="inline-link-macro-rx"></block>。</block>
  <block id="b6481dacfe88e9c856041be2326875ff" category="cell">手順 4 を省略して、に進みます <block ref="7401650b9cd3ea8be2a2d31b363b2b3c" category="inline-link-macro-rx"></block>。</block>
  <block id="5055165524bf9c633a40b424396e9008" category="section-title">SnapMirror 関係を休止します（オプション）。</block>
  <block id="511701430e4fbf5079759a7c3b7c28ff" category="doc">ステージ 4 ：ノード 2 の情報を記録し、 node2 を撤去</block>
  <block id="d21a0858f74e1b40b984bb621122ad41" category="doc">Stage5.ノード 4 をインストールしてブートします</block>
  <block id="0df71f161bb7f6f4a1dd4c0ceefcb245" category="sidebar">ステージ 4 ：情報を記録し、 node2 を撤去</block>
  <block id="69dd6fe430ae07730e1c32b2939c278c" category="inline-link-macro">ONTAP 9.9.1 コマンド：マニュアルページリファレンス</block>
  <block id="9d844ecf2e54ad978b96146975590298" category="cell"><block ref="9d844ecf2e54ad978b96146975590298" category="inline-link-macro-rx"></block></block>
  <block id="aaf9449e1999e9c9362cfeac571fbaee" category="cell">ONTAP 9.9.1 でサポートされるコマンドの構文と使用法について説明します。</block>
  <block id="b76266f70180ffb55ceb5ea73e67d7c7" category="inline-link-macro">ONTAP 9.10.1 コマンド：マニュアルページリファレンス</block>
  <block id="c08479ef32255dff91c1115570f6aff4" category="cell"><block ref="c08479ef32255dff91c1115570f6aff4" category="inline-link-macro-rx"></block></block>
  <block id="d361c32c7588b81ad0ce225fabf9cc83" category="cell">サポートされる ONTAP 9.10.1 コマンドの構文と使用法について説明します。</block>
  <block id="b4c7c005a4b2204b56da4bbb5a2e62b0" category="doc">アグリゲートの再配置手順を使用するかどうかを決定します</block>
  <block id="8a0208d39b7cf58f7d76559678e6cfb4" category="paragraph">前の段階で確認したあとに、 node2 のリソースリリースが自動的に開始されます。ルート以外のアグリゲートと SAN 以外のデータ LIF が node2 から node3 に移行されます。</block>
  <block id="ef3d7350487977f271f56e19fff958fa" category="paragraph">ARL を使用してノードをアップグレードする前に、手順の動作について理解しておく必要があります。このコンテンツでは、手順はいくつかの段階に分かれています。</block>
  <block id="c76a89f966d60816d2016df1cbb1b151" category="paragraph">にアクセスします <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> セクションでは、このアップグレードに必要な参照ドキュメントと参照サイトのリストを参照できます</block>
  <block id="e24d54125503270a46b4d9fcf026b51e" category="paragraph">storage encryption disk modify -disk * [-fips-key-id nonMSID AK</block>
  <block id="4c8b55d155015695884299d539ae7e00" category="paragraph">手順を続行する前に、すべての SnapMirror 関係が休止状態になっていることを確認する必要があります。休止された SnapMirror 関係は、リブート後およびフェイルオーバー後も休止状態のままです。</block>
  <block id="d62ce8b165f2d134de4a161b0ce71f49" category="list-text">残りのノードペアのアップグレード用手順に進みます。</block>
  <block id="2275b38e5279b78660b012808a4cb08e" category="cell">9.10.1 以降</block>
  <block id="9485cc727d9d60c0c782449790411372" category="cell"><block ref="9485cc727d9d60c0c782449790411372" category="inline-link-macro-rx"></block></block>
  <block id="a80362d8850ea6131db54e8994d7ece8" category="cell"><block ref="a80362d8850ea6131db54e8994d7ece8" category="inline-link-macro-rx"></block></block>
  <block id="987d908c963b953e34ffd0bc33ebfd50" category="inline-link-macro">ONTAP 9.8 以降を実行しているコントローラハードウェアを手動でアップグレードします</block>
  <block id="4a5512afba1f93dd83104eaac4237453" category="cell"><block ref="4a5512afba1f93dd83104eaac4237453" category="inline-link-macro-rx"></block></block>
  <block id="9732e7498adc911676ddbf1eb96c90f1" category="inline-link-macro">ONTAP 9.7 以前を実行しているコントローラハードウェアを手動でアップグレードします</block>
  <block id="c96cad4c802036afa3176e87bcda336b" category="cell"><block ref="c96cad4c802036afa3176e87bcda336b" category="inline-link-macro-rx"></block></block>
  <block id="5967cd2dd5257e032e2c1568e265b057" category="list-text">node1 は、 node1 アグリゲートのホーム所有者と現在の所有者です</block>
  <block id="a324d0a89d17fcc011978fff16b784da" category="list-text">node2 には、 node2 アグリゲートのホーム所有者と現在の所有者を指定します</block>
  <block id="70bfac3efc816446939b969cb549c8b8" category="list-text">node2 には、 node1 アグリゲートの現在の所有者を指定します</block>
  <block id="ec258c431af242bb93ebbf0d82a4afd2" category="list-text">node2 には、 node2 アグリゲートのホーム所有者と現在の所有者を指定します</block>
  <block id="0ac66da022e888300d8ec43f47b716d6" category="list-text">アップグレードした node1 でキー管理ツールの設定をリストアします</block>
  <block id="e1275af58e555e9cc3d59dc17d1d1ab1" category="list-text">ノード 1 が所有するルート以外のアグリゲートと NAS データ LIF を node2 からアップグレードした node1 に移動します</block>
  <block id="fff8cb6f4bd9c58d6037356a96d73247" category="cell">ステージ 4 ：リソースを node2 から再配置し、 node2 を撤去</block>
  <block id="487b7a723d50ceb8e8e166efb4cef927" category="list-text">ルート以外のアグリゲートと NAS データ LIF を node2 から node1 に再配置します</block>
  <block id="be74d1508b2732e00219890be181ffa6" category="list-text">アップグレードした node1 は、元は node1 に属していたアグリゲートのホーム所有者および現在の所有者です</block>
  <block id="5e4cf46306e58ecb7565589182d4efcf" category="list-text">アップグレードした node1 は、 node2 アグリゲートの現在の所有者です</block>
  <block id="f28e6dd67b477412b5b29af155fdd706" category="list-text">ネットブート node2</block>
  <block id="bc594bc91cd11d472f20e22d31df3f8a" category="list-text">アップグレードされた node2 は、元々 node2 に属していたアグリゲートのホーム所有者と現在の所有者です。</block>
  <block id="cf76afd058516dd90fe89aedbec6904e" category="list-text">ルート以外のアグリゲートと NAS データ LIF を node2 に戻します</block>
  <block id="52a370bfb3df9d6787958443a448c014" category="cell">ステージ 7 ：アップグレードを完了する</block>
  <block id="b7d2dd68a616ff5846545cdb7a4d940b" category="section-title">アップグレードの完了後、元々 node1 にあるアグリゲートは node2 によって所有されています</block>
  <block id="a6092067c1f4eef24a7887959e25fb77" category="paragraph">アップグレード手順の最後に、 node1 がホームノードとして使用されていたアグリゲートの新しいホームノードになっている必要があります。このパスはアップグレード後に再配置できます。</block>
  <block id="a98ce2caf38bef05082af61a7b3cfd2a" category="paragraph">次の状況で、アグリゲートを再配置できず、ノード 1 ではなくホームノードとしてノード 2 になっている可能性があります。</block>
  <block id="17d6197f66fac0500a1052e1756381a7" category="list-text">ステージ 3 で、アグリゲートが node2 から node1 に再配置されたとき。</block>
  <block id="b64ff0aed650d75434d24e770d7ac535" category="paragraph">再配置する一部のアグリゲートのホームノードが node1 に含まれている。たとえば、このようなアグリゲートのことを aggr_node_A_1 と呼びます。ステージ 3 で aggr_node_A_1 の再配置が失敗し、強制的に再配置を実行できない場合は、アグリゲートは node2 で残ります。</block>
  <block id="bbc15afd4ded8ef20f852908a9e94008" category="paragraph">node2 を交換すると、 aggr_node_A_1 は、 node2 ではなくノード 1 とホームノードとしてオンラインになります。</block>
  <block id="7161e79fb43252db4d620ecbcfbe0672" category="paragraph">ストレージフェイルオーバーを有効にしたあと、ステージ 6 に続けて所有権に関する誤った問題を修正するには、次の手順を実行します。</block>
  <block id="99fb891a920a0a874aa601c151d5ef1b" category="list-text">アグリゲートのリストを取得します。</block>
  <block id="4db16bef5cbc6f50c437fd04132472a1" category="paragraph">正しく再配置されていないアグリゲートを特定するには、セクションで取得した node1 のホーム所有者を含むアグリゲートのリストを参照してください <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block> コマンドの出力と比較してください。</block>
  <block id="0cdc803707489b410a938130768dfdb6" category="list-text">node2 の残りのアグリゲートを再配置します。</block>
  <block id="1204caf15b63ea601a42b09bd0feafca" category="paragraph">この再配置の実行時は、 -nd-controller-upgrade パラメータを使用しないでください。</block>
  <block id="9840fa5d3c651e50130a98db335d1163" category="list-text">node1 がアグリゲートのホーム所有者になったことを確認します。</block>
  <block id="445fae138e0209c0bbf33e92c38c82b6" category="paragraph">ホーム所有者としてノード 1 を持たないアグリゲートは、手順 3 で同じ再配置コマンドを使用してノード 1 に再配置できます。</block>
  <block id="8276e73e0912c13126bc9f47a3a0ed73" category="paragraph">ノード 1 のネットワーク設定を確認し、ノード 2 からノード 1 にアグリゲートを再配置する前に、ノード 2 に現在属しているノード 1 に属する NAS データ LIF がノード 2 からノード 1 に再配置されたことを確認する必要があります。また、 SAN LIF が node1 に存在することも確認する必要があります。</block>
  <block id="6224b74d5b0b8d2ad6d1e4b341f1fa19" category="paragraph">アップグレード手順の実行中、リモート LIF は SAN LUN へのトラフィックを処理します。アップグレード時にクラスタやサービスの健全性を維持するために、 SAN LIF を移動する必要はありません。SAN LIF は、新しいポートにマッピングする必要がないかぎり移動されません。ノード 1 をオンラインにしたら、 LIF が正常に機能しており、適切なポート上に配置されていることを確認する必要があります。</block>
  <block id="0bff73dcb819ba800842aebfbaa1ea03" category="list-text">ネットワーク到達可能性チェックを実行します。</block>
  <block id="97ea31dc3aa1f9bc892dfd894fdd9fb5" category="paragraph">network port reachable-show-detail-node node1</block>
  <block id="22754bd796837dc212cb05d513ad94cb" category="paragraph">インターフェイスグループポートおよび VLAN ポートを含むすべての接続ポートのステータスが「 OK 」であることを確認します。</block>
  <block id="d22abe120efea253d7c808e8381ed917" category="paragraph">これらのチェックの実行後、システムは、 node1 で所有されているルート以外のアグリゲートと NAS データ LIF を新しい node1 に再配置します。</block>
  <block id="7d7b11f14dacd1dc55ecbacf79121ab1" category="paragraph">リソースの再配置が完了すると、コントローラの交換処理が一時停止します。</block>
  <block id="371a52c6bb799f6fb34f1a8ac8617b35" category="paragraph">コントローラ交換用手順が一時停止している場合は、エラーがある場合はチェックして修正し、次に「問題 re sume 」をクリックして操作を続行します。</block>
  <block id="3757d9b51a1e3f55c16c5d25fae22e61" category="paragraph">LIF が表示されなくなった場合は、ホームノードをノード 1 にリストアします。</block>
  <block id="1b8060cb5ae9dd21090d2ec07cc376b2" category="paragraph">アップグレードを実行するには接地ストラップが必要です。また、アップグレードプロセス中に他のマニュアルを参照する必要があります。</block>
  <block id="0c28f03f85d0a7cc4b82f95fce4d86da" category="doc">アップグレードハードウェアを確認します</block>
  <block id="af9d3f15b5098b02572b4a5b4c346c3d" category="doc">ノード 1 のインストールを確認します</block>
  <block id="c6fd244601cc323697fc7e6249268acd" category="paragraph">手順のこの時点で、コントローラのアップグレード処理はノード 1 がクォーラムへの自動参加を試みるため一時停止している必要があります。</block>
  <block id="ff5725f7647773e4bb6ba48f86580a14" category="list-text">node1 がクォーラムに参加していることを確認します</block>
  <block id="73dac86302530c6371ee49f4ae0c3157" category="paragraph">cluster show -node node1 -fields health`</block>
  <block id="967e808cebc82f90bb9dbf3b8e84c3b3" category="list-text">node1 が node2 と同じクラスタに含まれており、正常な状態であることを確認します。</block>
  <block id="a877d77b53f7818728787e578280c690" category="list-text">コントローラの交換処理が一時停止し、次のメッセージが表示されます。</block>
  <block id="ae76f3c30991fdb1e3693cb5811cb1dc" category="list-text">コントローラの交換が一時停止状態になった状態で、に進みます <block ref="a4e280a8ee04f7ed15cf014345b7be25" category="inline-xref-macro-rx"></block>。</block>
  <block id="830de75aac3de476490ce8697cfc84ee" category="section-title">ノード 1 でネットワーク設定をリストアします</block>
  <block id="7b3bcbfe626392f126d3c9c59049f669" category="paragraph">node1 がクォーラムにあり、 node2 と通信できることを確認したら、 node1 の VLAN 、インターフェイスグループ、およびブロードキャストドメインが node1 で認識されていることを確認します。また、ノード 1 のすべてのネットワークポートが正しいブロードキャストドメインに設定されていることを確認します。</block>
  <block id="97d81579a938e85b79eb326c1bccdb4a" category="paragraph">VLAN 、インターフェイスグループ、およびブロードキャストドメインの作成と再作成の詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、 _Network Management_content にリンクします。</block>
  <block id="909b05c70a22b9f37b5b0dd91c33c2da" category="list-text">アップグレードした node1 にあるすべての物理ポートの一覧を表示します。</block>
  <block id="85aa04fa5dfb58230ad2b2fb89c2b86d" category="paragraph">ノードのすべての物理ネットワークポート、 VLAN ポート、およびインターフェイスグループポートが表示されます。この出力から、 ONTAP によって「 Cluster 」ブロードキャストドメインに移動された物理ポートを確認できます。この出力を使用して、インターフェイスグループメンバーポート、 VLAN ベースポート、または LIF をホストするスタンドアロンの物理ポートとして使用するポートを決定できます。</block>
  <block id="97a140c436b20824a78c55187d8f3252" category="list-text">node1 のすべてのポートに到達できるネットワークポートを表示します。</block>
  <block id="cceb77422957d2a7588c1df43f5eacd8" category="paragraph">network port reachability show -node node1</block>
  <block id="a5fb308a92e4604c009062c3de7b2789" category="list-text">[[restore_node1_step4]] 次の順序で、次のコマンドを使用して、 node1 の各ポートの到達可能性ステータスを「 ok 」以外に修復します。</block>
  <block id="2c7aa9454c1ca6be9ef48b69c5b8cab5" category="list-text">VLAN ポート</block>
  <block id="cf45ec2f4095abbc4f4afca15dbaa0f3" category="paragraph">すべてのポートが正しく設定され、正しいブロードキャストドメインに追加されている場合、「 network port reachability show 」コマンドは、接続されているすべてのポートの到達可能性ステータスを「 ok 」、物理的に接続されていないポートのステータスを「 no-reachability 」と報告する必要があります。この 2 つ以外のステータスが報告されたポートがある場合は、到達可能性修復を実行し、の手順に従ってブロードキャストドメインにポートを追加または削除します <block ref="b6d8caf83cd967ca96a109c1173cf68b" category="inline-xref-macro-rx"></block>。</block>
  <block id="c34ebe5a54f4ac62ebd2695c126240e9" category="paragraph">network interface show -fields home-port 、 status-admin</block>
  <block id="9d9f265fd42c463def1909297104525a" category="paragraph">前の段階で確認したあとに、 node2 のリソースリリースが自動的に開始されます。ルート以外のアグリゲートと SAN 以外のデータ LIF が node2 から新しい node1 に移行されます。</block>
  <block id="e254cf6efdd2e615e6727237969d6011" category="paragraph">アグリゲートと LIF の移行が完了すると、検証のために処理が一時停止されます。この段階で、ルート以外のアグリゲートと SAN 以外のデータ LIF がすべて新しい node1 に移行されたことを確認する必要があります。</block>
  <block id="e7fbff0ca3f51e1ef167cd5ff9eba89b" category="list-text">ルート以外のすべてのアグリゲートがオンラインで、 node1 上のそれらの状態になっていることを確認します。</block>
  <block id="ced536efc0a82fa41600b180eeacc30a" category="paragraph">storage aggregate show -node node1 -state online -root false</block>
  <block id="1ef0b56555ccbaef35e99c2bfb8ce9df" category="paragraph">次の例は、 node1 にあるルート以外のアグリゲートがオンラインになっていることを示しています。</block>
  <block id="f69a858b07bbad6343f4772f5dcbe1fe" category="paragraph">アグリゲートがオフラインになった場合、またはノード 1 で外部になった場合は、新しいノード 1 で各アグリゲートに対して 1 回、次のコマンドを実行してアグリゲートをオンラインにします。</block>
  <block id="8ffd93ea6386b629720c74b50bc25c2e" category="list-text">node1 で次のコマンドを使用し、出力を調べて、すべてのボリュームが node1 でオンラインになっていることを確認します。</block>
  <block id="30c92ab6acc222d81011f6b7ee804f3f" category="paragraph">volume show -node node1 -state offline`</block>
  <block id="85e5ea53a85c7a28840f38eea6491b3c" category="paragraph">ノード 1 上のボリュームのいずれかがオフラインになっている場合は、各ボリュームについて 1 回、 node1 で次のコマンドを使用してボリュームをオンラインにします。</block>
  <block id="8977859bd55d40dd07f2cd92a82b410d" category="list-text">LIF が正しいポートに移動され、ステータスが「 up 」になっていることを確認します。LIF が 1 つでも停止している場合は、次のコマンドを LIF ごとに 1 回入力して、 LIF の管理ステータスを up に設定します。</block>
  <block id="6e13fc9d1e75c160461788f1b750083d" category="list-text">次のコマンドを使用して、 node2 にデータ LIF が残っていないことを確認します。</block>
  <block id="701fa495284f4a753f53b83d9db59d99" category="paragraph">ノード 2 のネットワーク設定を確認し、アグリゲートをノード 1 からノード 2 に再配置する前に、ノード 1 に現在あるノード 2 に属する NAS データ LIF がノード 1 からノード 2 に再配置されたことを確認する必要があります。また、 SAN LIF が node2 に存在することも確認する必要があります。</block>
  <block id="ee2ce060961db1c7ec1f363acef87d91" category="paragraph">アップグレード手順の実行中、リモート LIF は SAN LUN へのトラフィックを処理します。アップグレード時にクラスタやサービスの健全性を維持するために、 SAN LIF を移動する必要はありません。SAN LIF は、新しいポートにマッピングする必要がないかぎり移動されません。node2 をオンラインにしたあと、 LIF が正常に機能しており、適切なポートに配置されていることを確認する必要があります。</block>
  <block id="b990f6960d7072e815b8e4d805f92035" category="paragraph">LIF が取り外された場合、ホームノードを node2 にリストアします。</block>
  <block id="61d5cfba7704fb82d2cf6a1ebdf016a2" category="admonition">このドキュメントでは、ノード名の参照としてのみ * node1 * と * node2 * という用語が使用されています。手順のあとにノードの実際の名前を置き換える必要があります。</block>
  <block id="51108f40a613018fdc6b3ad89f42122e" category="list-text">この手順は、交換用コントローラハードウェアが新しく購入されていて、他のシステムで使用されていないことを前提としています。使用済みのコントローラを「 wipeconfig 」コマンドで準備するために必要な手順は、この手順には含まれていません。交換用コントローラハードウェアが以前に別の ONTAP クラスタまたはスタンドアロンのシングルノードシステムとして使用されていた場合は、テクニカルサポートにお問い合わせください。</block>
  <block id="71a227e766879a981c6aa0fd0ee08687" category="paragraph">ステージ 1 では、アップグレードのためのノードを準備し、一連の事前確認を実行する必要があります。また、新しいコントローラをネットブートする準備を行う必要があります。</block>
  <block id="5077f34346404c6e6b1972588ad2c047" category="list-text">ONTAP コマンドラインの advanced 権限モードで次のコマンドを入力して、コントローラの交換プロセスを開始します。</block>
  <block id="78bcaff6352913ee1a07493a6be91635" category="paragraph">次のような出力が表示されます。</block>
  <block id="db4336e2ca46622010f5ba0c4094ec50" category="paragraph">事前確認フェーズでは、以下のチェックがバックグラウンドで実行されます。</block>
  <block id="f51ac25569c065e7813718ef345e9ddc" category="cell">交換するノードにローカル以外のデータ LIF があるかどうかを確認します。ホーム所有者でないデータ LIF がノードに含まれないようにしてください。ローカル以外のデータ LIF がいずれかのノードに含まれている場合、タスクは失敗します。</block>
  <block id="c293ce688a142a8943b3fa428c09e414" category="paragraph">ノード 1 が完全に停止したら、 node1 の LOADER プロンプトが表示されている必要があります。LOADER プロンプトを表示するには、 node1 のシリアルコンソールに接続します。</block>
  <block id="21ae48aa7bbdbaeb1a967d5328b891b6" category="list-text">ノード 1 からコントローラモジュールを取り外す前に、コンソールケーブル（ある場合）と管理ケーブルをノード 1 のコントローラモジュールから外します。</block>
  <block id="16597a9dd20f2d5db13339b0bf3ad60c" category="admonition">ノード 1 で作業しているときは、コンソールケーブルと e0M ケーブルのみをノード 1 から取り外します。このプロセスの実行中は、 node1 または node2 の他のケーブルや接続を取り外したり変更したりしないでください。</block>
  <block id="4f15dffc58c8598c508fa46cd5335ebb" category="list-text">コントローラモジュール A のロックを解除してシャーシから取り外します。</block>
  <block id="c1ed0cd23ea77c49b5611e5929537b3f" category="list-text">カムハンドルのオレンジ色のボタンを下にスライドさせてロックを解除します。</block>
  <block id="f58d98f433350ee3e614bfdfe3036a89" category="image-alt">コントローラモジュールを取り外します</block>
  <block id="fb6d576fd0865356efea00348612bf65" category="image-alt">番号 1</block>
  <block id="b05aea0ff1931b3ce07289e5c24c4357" category="cell">カムハンドルのリリースボタン</block>
  <block id="72f0f1912ae3ec72b1995b632a2cc692" category="image-alt">番号 2</block>
  <block id="b733ab833a64f07b84375a26a6af83f0" category="cell">カムハンドル</block>
  <block id="1ce9441378e5288a31f9dee89eb4cb1d" category="list-text">カムハンドルを回転させて、コントローラモジュールをシャーシから完全に外し、コントローラモジュールをシャーシから引き出します。</block>
  <block id="838771143f1029cc3b1ac5c3be2796bc" category="paragraph">このとき、空いている手でコントローラモジュールの底面を支えてください。</block>
  <block id="1746c03166c1029bf12087835ea936f0" category="list-text">文字と数字が記載されたカムボタンを押し下げます。</block>
  <block id="e73d298eda7538e8d44a7ca445767962" category="paragraph">カムボタンがシャーシから離れます。</block>
  <block id="805f241c9acf04968d6f84157a96e0c1" category="list-text">カムラッチを下に回転させて水平にします。</block>
  <block id="c6e52defde912721ad3ec5315c5d9664" category="cell">文字と数字が記載された I/O カムラッチ</block>
  <block id="0e50691d6ac3e9df529fa546f2486bd7" category="cell">ロックが完全に解除された I/O ラッチ</block>
  <block id="85b0e5132d3bec02fcda8eb6f24b6062" category="list-text">管理ポートとコンソールポートを node1 コントローラモジュールにケーブル接続します。</block>
  <block id="9ce6fd0a8d01a2b4341b85fdb23f1ba5" category="list-text">コントローラモジュールをシャーシに挿入し、ミッドプレーンまでしっかりと押し込んで完全に装着します。</block>
  <block id="9d3d5ccff9d9d7f336c5f4adfb3eea08" category="paragraph">コントローラモジュールが完全に装着されると、ロックラッチが上がります。</block>
  <block id="f39c570aa40591b3a07f64b52d7d04bd" category="cell">カムハンドルのロックラッチ</block>
  <block id="3f5e8e551ad561c269d0656e1bd198f0" category="cell">カムハンドルがアンロック位置にある</block>
  <block id="2ea32610c0c34642fe97bf6f44009b1f" category="list-text">モジュールを装着したらすぐにシリアルコンソールに接続し、 node1 の自動ブートを中断できるようにします。</block>
  <block id="941f1a1f76f1ea9874688b46955c3e10" category="list-text">node1 の LOADER プロンプトで、デフォルトの環境変数を設定します。</block>
  <block id="bb54a67e0ba8edb77dda51dedb81fec0" category="list-text">デフォルトの環境変数設定を保存します。</block>
  <block id="753fbbab7087d2d0ed1ee7008bb7cf3d" category="list-text">残りのノードペアのアップグレード用手順を使用してを続行します。</block>
  <block id="4268d96ccc42c6690ac8aae29513a187" category="paragraph">HA ペアがすでに無効になっているため、ノード 1 は node2 のクラッシュ後にテイクオーバーしません。</block>
  <block id="407e2777bfd7bd53cdb708f5debf979e" category="section-title">HA ペアを無効にすると、最初の検証フェーズでノード 1 がクラッシュします</block>
  <block id="b1d9db53b400440509215a88326131de" category="paragraph">node2 の一部またはすべてのアグリゲートが node1 から node1 に再配置されています。node1 は、再配置されたアグリゲートからデータを提供します。HA ペアが無効になっているため、テイクオーバーはありません。</block>
  <block id="1079e854ebb97bcd056598f1d85d2d41" category="paragraph">再配置されなかったアグリゲートのクライアントが停止しています。ノード 2 をブートすると、ノード 1 のアグリゲートがノード 1 に再配置されます。</block>
  <block id="34bef26d43d2971beb837b24432bf29f" category="section-title">アグリゲートの再配置中にリソースを再取得する最初のフェーズでノード 1 がクラッシュする</block>
  <block id="6567edc5b92aa998986653af564fb84d" category="paragraph">ノード 2 でアグリゲートをノード 1 に再配置しているときにノード 1 がクラッシュした場合、ノード 1 がブートしたあともタスクは続行されます。</block>
  <block id="eb7af4b5a2136599dcb38458658acd79" category="paragraph">node2 では残りのアグリゲートの処理が続行されますが、ノード 1 に再配置済みのアグリゲートでは、ノード 1 のブート中にクライアントが停止します。</block>
  <block id="3bbbd3988dc6983974f5205284fa9cec" category="section-title">チェック後のフェーズでノード 1 またはノード 2 がクラッシュした</block>
  <block id="eea59a2de6754c9ba099cb152770e327" category="section-title">リソースの 2 つ目のリリースフェーズでノード 1 がクラッシュする</block>
  <block id="cf352bc2feea6caf0c382dc7013ccc96" category="paragraph">node2 によるアグリゲートの再配置中にノード 1 がクラッシュした場合、ノード 1 がブートしたあとも処理が続行されます。</block>
  <block id="069b00a46005a091a86bc4c0fa514dcf" category="paragraph">ノード 2 は残りのアグリゲートの処理を続行しますが、ノード 1 とノード 1 のアグリゲートにすでに再配置されたアグリゲートでは、ノード 1 のブート中にクライアントが停止します。</block>
  <block id="8a8dae69aeea749618a3f3fab32fb26c" category="paragraph">ノード 1 は再配置されたアグリゲートを引き続き提供しますが、ノード 2 が所有するアグリゲートではクライアントが停止します。</block>
  <block id="8e1b610012ea588eb83fba108e3403b6" category="section-title">第 2 の検証フェーズでノード 1 がクラッシュした</block>
  <block id="a811b72e20218470dc07093ef4249bdf" category="paragraph">このフェーズでノード 1 がクラッシュした場合、 HA ペアがすでに無効になっているため、テイクオーバーは実行されません。</block>
  <block id="26f30b0cbca3c1ffde0236a5a136b1c4" category="paragraph">ノード 1 がリブートするまでは、すべてのアグリゲートのクライアントが停止します。</block>
  <block id="92c94fd4970b81f16fb965f2eaf5c5f3" category="section-title">2 番目の検証フェーズで node2 がクラッシュします</block>
  <block id="913675daad9fd7d57823502b858e93f3" category="paragraph">このフェーズで node2 がクラッシュすると、テイクオーバーは実行されません。node1 はアグリゲートからデータを提供します。</block>
  <block id="e035160959e76686219645967f202317" category="paragraph">ノード 2 がリブートするまでルート以外のアグリゲートがすでに再配置されている場合、停止します。</block>
  <block id="8fec9698e48614a1961275dcbf888442" category="doc">ネットブート node1</block>
  <block id="dc4e68dae6f2c9aa089b7b7f44a400c0" category="list-text">ご使用のシステムに必要なシステムファイルと適切なバージョンの ONTAP を、 _NetApp サポートサイトからダウンロードします。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> からネットアップサポートサイトにリンクできます。</block>
  <block id="2ba573cec1f6a3141c471fb88430735b" category="list-text">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ネットアップサポートサイトへのリンクをクリックして、システムのネットブートの実行に使用するファイルをダウンロードします。</block>
  <block id="b3fa942f65431caf219b9891c77a7cc2" category="list-text">[netboot_node1_step2] _netapp サポートサイト _ のソフトウェアダウンロードセクションから適切な ONTAP ソフトウェアをダウンロードし、「 ONTAP_version_image.tgz 」ファイルを Web にアクセスできるディレクトリに保存します。</block>
  <block id="6ecb92f5d83c8c88c6eee4e21a07fa4b" category="list-text">ディレクトリの一覧に「 ONTAP_version_image.tgz 」が含まれている必要があります。</block>
  <block id="f47f57e3434d00c4cb0ddb03933b3fc5" category="list-text">次のいずれかを実行してネットブート接続を設定します。</block>
  <block id="1e23f3f1f1ff4c1174660749785a3e47" category="admonition">インターフェイスによっては、その他のパラメータが必要になる場合もあります。ファームウェア・プロンプトで「 help ifconfig 」と入力すると、詳細が表示されます。</block>
  <block id="2e9296c7316d4c4c76380224c1db72b2" category="list-text">node1 でネットブートを実行します。</block>
  <block id="99002edb0db3876428b0f60105beedae" category="paragraph">netboot\http://web_server_ip/path_to_web_accessible_directory/netboot/kernel`</block>
  <block id="a303e403af842ae1a3aee97050fd5dcf" category="list-text">手順を続行するかどうかを確認するメッセージが表示されたら 'y' と入力し ' パッケージの入力を求められたら 'URL:\http://web_server_ip/path_to_web-accessible_directory/ontap_version_image.tgz` と入力します</block>
  <block id="e581180eb51e0c55c220313efa4f6d03" category="paragraph">「 path_to_the_web-accessible_directory 」は、「 ONTAP_version_image.tgz 」をダウンロードした場所を指します <block ref="3c453ca3ddf73b988300a74fd18c23c3" category="inline-xref-macro-rx"></block>。</block>
  <block id="963f89f538a2fcd5d086c865807c540a" category="list-text">プロンプトで「 wipeconfig 」コマンドを実行して、ブートメディアの以前の設定をクリアします。</block>
  <block id="19447c446165b59a012b755c1aa9b173" category="list-text">次のメッセージが表示されたら、回答は「はい」を選択します。</block>
  <block id="d9942055ef69c8d0b4c6c187ca017527" category="list-text">ノードがリブートして「 wipeconfig 」を終了し、ブートメニューで停止します。</block>
  <block id="e3dcb6e98d703b4041ac7a4b6d40412e" category="list-text">ブート・メニューからオプション「 5 」を選択して、保守モードに切り替えます。ノードがメンテナンス・モードで停止し ' コマンド・プロンプト *' が表示されるまで 'yes' を選択します回答</block>
  <block id="e45b434885da7370501c14b198e0d2e4" category="list-text">コントローラとシャーシが「 HA 」として構成されていることを確認します。</block>
  <block id="c88945f452b82e198d1feb0b8588ed41" category="list-text">「 ha-config 」の設定を確認します。</block>
  <block id="1fc3994f37da8b8908bef1c9bf2acf39" category="list-text">ノード 1 を停止します。</block>
  <block id="c81f7065b2f44e30972bdae18530e5c8" category="paragraph">ノード 1 は LOADER プロンプトで停止します。</block>
  <block id="ce12a4bf50a5a230a60ced68a1d299b9" category="list-text">node2 で、システムの日付、時刻、およびタイムゾーンを確認します。</block>
  <block id="2282aeb7788cacc368146303b22e4114" category="list-text">node1 で、ブート環境プロンプトで次のコマンドを使用して日付を確認します。</block>
  <block id="6169e268732842e26b1f460c798a9b1c" category="list-text">必要に応じて、 node1 に日付を設定します。</block>
  <block id="a696e7909c208805ac0eb6dbf1915519" category="admonition">node1 で対応する UTC 日付を設定します。</block>
  <block id="546dffd75f02d9ea5fb5b2b1c3e32430" category="list-text">ノード 1 で、ブート環境のプロンプトで次のコマンドを使用して時間を確認します。</block>
  <block id="b7f0c2363c0b962e051ab6e71f426536" category="list-text">必要に応じて、 node1 で時刻を設定します。</block>
  <block id="36a69b26aa6ef29ce10557879031670f" category="admonition">node1 で対応する UTC 時間を設定します。</block>
  <block id="0b0ffc724c1bc5094f0087b16afb9c41" category="list-text">node1 でパートナーシステム ID を設定します。</block>
  <block id="68757294a9e11cada8382926574adf4d" category="list-text">[netboot_t2_step2] ネットアップサポートサイトのソフトウェアダウンロードセクションから適切な ONTAP ソフトウェアをダウンロードし、「 ONTAP_version_image.tgz 」ファイルを Web にアクセスできるディレクトリに保存します。</block>
  <block id="521d2e7a8ad46807c0ef8c12e39a788c" category="list-text">node2 でネットブートを実行します。</block>
  <block id="69c80750b2ca197795d12a8c04c972ec" category="paragraph">「 path_to_the_web-accessible_directory 」は、「 ONTAP_version_image.tgz 」をダウンロードした場所を指します <block ref="76bd6b715ce71dc5a44082b74fc8f01f" category="inline-xref-macro-rx"></block>。</block>
  <block id="06b516c1cb199a53869f7c022b7addc3" category="list-text">プロンプトで「 wipeconfig 」コマンドを実行して、ブートメディア上の以前の設定をクリアします。</block>
  <block id="d254d61b5be1df9d2c66c57fd4212982" category="list-text">ノード 2 を停止します。</block>
  <block id="13eaf17fec5f96e644d7f96eacceff2d" category="paragraph">node2 で LOADER プロンプトが停止します。</block>
  <block id="eaa06243d79c8afa1405151e312e38dd" category="list-text">node2 で、ブート環境のプロンプトで次のコマンドを使用して日付を確認します。</block>
  <block id="cb34b4f010c7f4a67f9f369e6bcaaca2" category="list-text">必要に応じて、 node2 で日付を設定します。</block>
  <block id="203bd2f32b8f21bd7ddbf50feca53f2d" category="admonition">node2 で対応する UTC 日付を設定します。</block>
  <block id="fe00ea02f2b926e29ff2f68aaf7fa198" category="list-text">node2 で、ブート環境のプロンプトで次のコマンドを使用して時刻を確認します。</block>
  <block id="9e84800f4ac2f15c0e92f8a0bfedcb2c" category="list-text">必要に応じて、 node2 で時刻を設定します。</block>
  <block id="dc7e3044e4900ae357994969cd1ff606" category="admonition">node2 で対応する UTC 時間を設定します。</block>
  <block id="9242c558140d9a52d10f2e6b57f75893" category="list-text">コントローラモジュールの端をシャーシのベイ B に合わせ、コントローラモジュールをシステムに半分までそっと押し込みます。</block>
  <block id="1ba57f7982d64e52fcc3eb0235996968" category="admonition">ベイラベルは、シャーシのコントローラモジュールのすぐ上にあります。</block>
  <block id="2cd913fdf7e7f2f1c4a048df3be22534" category="list-text">管理ポートとコンソールポートを node2 コントローラモジュールにケーブル接続します。</block>
  <block id="da2b45cbcbfabc951a211d4aed4ae9d5" category="doc">キー管理ツールの設定を node2 にリストアします</block>
  <block id="c33d1193fa61b53992488cb1598a346b" category="list-text">node2 のチェック後、 node2 クラスタのストレージフェイルオーバーとクラスタ HA ペアが有効になります。処理が完了すると、両方のノードに「 Completed 」と表示され、クリーンアップ処理が実行されます。</block>
  <block id="9eabbc872717665c9d6cf452e2e948ce" category="list-text">次のコマンドを使用して出力を調べ、 node1 と node2 が同じクラスタに属していることを確認します。</block>
  <block id="7de71753e32700489d3b6afdd9b1e417" category="list-text">次のコマンドを使用して、 node1 と node2 が相互のストレージにアクセスできることを確認します。</block>
  <block id="0fe6701c2bd4920c5d453b5ee906eed1" category="list-text">次のコマンドを使用して、 node1 と node2 のどちらもクラスタ内の他のノードがホーム所有するデータ LIF を所有していないことを確認します。</block>
  <block id="6a4e3b384743506a60b9d8b065cd9569" category="paragraph">クラスタ内の他のノードがホーム所有するデータ LIF をノード 1 とノード 2 のどちらも所有していない場合は、データ LIF をホーム所有者にリバートします。</block>
  <block id="539dfd2d954ae3879b62b16e5593152b" category="list-text">アグリゲートがそれぞれのホームノードで所有されていることを確認します。</block>
  <block id="8f3c31fbc98a55b30d3c8c6b6ba60ad1" category="list-text">次のコマンドを使用して出力を調べ、ライセンスが正しくインストールされていることを確認します。</block>
  <block id="83384f48b367d39b20d627f5230807a9" category="list-text">両方のノードで次のコマンドを使用して SP を設定します。</block>
  <block id="09e9f7abfe1cdfbd7b4465d4dbc6bd0c" category="paragraph">ノード 1 とノード 2 でストレージ暗号化が有効になっている場合は、セクションを完了します <block ref="18c90c300c0b71334b8b427eaf4f38a3" category="inline-link-macro-rx"></block>。それ以外の場合は、の項を実行します <block ref="6e48b929ca0767f00c15eeb6d7e78755" category="inline-link-macro-rx"></block>。</block>
  <block id="ab8666705fb8255d0f27c0919160c1e4" category="doc">node2 のインストールを確認します</block>
  <block id="ba7d8f5ebb18592d91d949241848dfe6" category="paragraph">手順のこの時点で、 node2 がクォーラムに参加する間、処理が一時停止します。</block>
  <block id="c32050bd0152940e859c61963c8eac2b" category="list-text">node2 がクォーラムに参加していることを確認します</block>
  <block id="4944974c6eb515b06e75893287e18f10" category="list-text">node2 がノード 1 と同じクラスタに含まれており、正常な状態であることを確認します。</block>
  <block id="aa4f1ae296f22b70b2245f395e8b0865" category="list-text">コントローラ交換処理のステータスを確認し、コントローラが一時停止状態で、 node2 を停止する前と同じ状態になっていることを確認して、新しいコントローラの取り付けやケーブルの移動の物理的なタスクを実行します。</block>
  <block id="8c8bbdd54247874dc95cb56adf2233aa" category="list-text">コントローラの交換が一時停止状態になった状態で、に進みます <block ref="cf2f6e65074eee957c362f92c9fdd8b5" category="inline-xref-macro-rx"></block>。</block>
  <block id="c7ac27a6d6c91af26ae2248d25a66f1f" category="section-title">node2 でネットワーク設定をリストアします</block>
  <block id="26c2308a63a61c5f8f6891347ee8e59b" category="paragraph">node2 がクォーラムにあり、 node1 と通信できることを確認したら、 node1 の VLAN 、インターフェイスグループ、およびブロードキャストドメインが node2 に表示されていることを確認します。また、 node2 のすべてのネットワークポートが正しいブロードキャストドメインに設定されていることを確認します。</block>
  <block id="2d9a324d737623f68053a45037166f3b" category="list-text">アップグレードした node2 上のすべての物理ポートを表示します。</block>
  <block id="37d34a6dfe6383da0e88e7b677055d44" category="paragraph">network port show -node node2`</block>
  <block id="5b2006e0f6d482c797a962849e1eccf4" category="list-text">node2 のすべてのポートの到達可能性を表示します。</block>
  <block id="7c587f95f797c282f896f4e149ba42f0" category="paragraph">network port reachability show -node node2`</block>
  <block id="6996b4514e4836b99cfcaa0e279b06fe" category="paragraph">次の例のような出力が表示されます。ポート名とブロードキャスト名はさまざまです。</block>
  <block id="f73c63fe868c9eadae0867a98f883222" category="list-text">[[restore_node2 _step4] 次のコマンドを使用して、 node2 の各ポートの到達可能性を「 ok 」以外の到達可能性ステータスで修復します。</block>
  <block id="cdd786773bbaae1529cd3ffa5c7d238c" category="paragraph">すべてのポートが正しく設定され、正しいブロードキャストドメインに追加されている場合、「 network port reachability show 」コマンドは、接続されているすべてのポートの到達可能性ステータスを「 ok 」、物理的に接続されていないポートのステータスを「 no-reachability 」と報告する必要があります。この 2 つ以外のステータスが報告されたポートがある場合は、到達可能性修復を実行し、の手順に従ってブロードキャストドメインにポートを追加または削除します <block ref="9da9497007dcbdf9ea585e9965505651" category="inline-xref-macro-rx"></block>。</block>
  <block id="5042d04c33524bcbd54a634369ce4d6b" category="list-text">node4 にあるすべてのポートの到達可能性をリストします。</block>
  <block id="5e997021ee0d4607339bb16384449e18" category="list-text">[[step3]] node3 のすべてのポートの到達可能性をリストします。</block>
  <block id="9d84cc48ac59ed03e236e199b8e72aa8" category="paragraph">^1 AFF A800 システムに必要な追加手順については、セクションの「 A800 」を参照する手順に進んでください <block ref="46e0d635bf9a753e435b3e56ea555b72" category="inline-link-macro-rx"></block>または <block ref="916a396aec2ea8c5191dac1b7e554adf" category="inline-link-macro-rx"></block>。</block>
  <block id="9bded937f001956ffed1ee6ccceb37db" category="sidebar">「 system controller replace 」コマンドを使用します（ AFF A700 から AFF A900 ）。</block>
  <block id="7f34c3c52d70c0425b1f8f450d9011fa" category="sidebar">ステージ 4 ：リソースを node2 から再配置し、 node2 を撤去</block>
  <block id="e58fe7640209496d4d7a887457b3a8c5" category="sidebar">ステージ 7 ：アップグレードを完了します</block>
  <block id="815c0aa063df3c53b17744c860357708" category="paragraph">アップグレードの完了後に、 node2 の運用を停止できます。を参照してください <block ref="6e48b929ca0767f00c15eeb6d7e78755" category="inline-link-macro-rx"></block>。</block>
  <block id="5980c068f7f0508562e337b63f7ad8d1" category="doc">ワークシート：コントローラのアップグレード前後に収集する情報</block>
  <block id="a097e8e84a8d86baba412e5958e51b5a" category="inline-link">ネットアップの技術情報アーティクル SU436 ：「 clam takeover default configuration changed</block>
  <block id="2b628f1eeda50351f42204c06da24fe7" category="list-text">ONTAP 9.6P11 、 9.7P8 、またはそれ以降のリリースを使用している場合は、 Connectivity 、 live, and Availability Monitor （ CLAM ）のテイクオーバーを有効にして、特定のノード障害が発生したときにクラスタをクォーラムに戻すことを推奨します。「 kernel-service 」コマンドには、 advanced 権限レベルのアクセスが必要です。詳細については、を参照してください<block ref="7c246f3223ef6280d0a553bd56956f52" category="inline-link-rx"></block>。</block>
  <block id="b8dabd137df5202c83400e4fde74838d" category="paragraph">`::&gt; network connections listening show -vserver Cluster `</block>
  <block id="9c26c389cd17f0bf0da92eb4d2187822" category="paragraph">次の 2 ノードクラスタの例に示すように、クラスタポートでリスンしているポート 7700 は想定される結果です。</block>
  <block id="17a934761f44517e9bcc906e1eb8bfe9" category="list-text">必要に応じて、ポート 7700 でリスンしていない各クラスタ LIF の管理ステータスを「 down 」に設定してから「 up 」に設定します。</block>
  <block id="8f6f15e3cd3793ad38c3214c75a0a348" category="paragraph">手順 11 を繰り返して、クラスタ LIF がポート 7700 でリスンしていることを確認します。</block>
  <block id="d1a7512eb8f4b6dc2ebea16def830204" category="paragraph">手順 11 を繰り返して、クラスタ LIF がポート 7700 でリスンしていることを確認します。</block>
  <block id="ceb1502357ca7edd7dc13458f9f78895" category="paragraph">手順（ g ）を繰り返して、クラスタ LIF がポート 7700 でリスンしていることを確認します。</block>
  <block id="9694fd9e35e64d8c445c0824b45a5dff" category="inline-link-macro">ONTAP 9.7 以前のバージョンを使用してネットワークポートをマッピングし、手順 7 を実行します</block>
  <block id="49df8ec8bead5c5a65249d6fe95ee476" category="list-text">[[map_9.8_5] データ LIF をホストしている物理ポートのブロードキャストドメインメンバーシップを変更します。これは、に示すように、手動で実行できます <block ref="5b39191cf693f735bfc52c1b3429857e" category="inline-link-macro-rx"></block>。推奨される方法は、 ONTAP 9.8 で導入された拡張ネットワーク到達可能性スキャンおよび修復手順を使用することです。次の手順 5 の手順（ a ）から（ g ）までを参照してください。</block>
  <block id="b97fc198d08784bb72759208e4a261de" category="paragraph">手順（ f ）を繰り返して、クラスタ LIF がポート 7700 でリスンしていることを確認します。</block>
  <block id="c4bb7f0d17cacb6fbdc03f40dfe338e7" category="paragraph">手順 3 を繰り返して、クラスタ LIF がポート 7700 でリスンしていることを確認します。</block>
  <block id="d86684c09dde7ea5d5d7306c6f674ea3" category="list-text">各クラスタ LIF がポート 7700 をリスンしている必要があります。クラスタ LIF がポート 7700 をリスンしていることを確認します。</block>
  <block id="821f1cb96d20770eca957d1d83c78ef0" category="list-text">ONTAP 9.6P11 、 9.7P8 、またはそれ以降のリリースを使用している場合は、 Connectivity 、 live, and Availability Monitor （ CLAM ）のテイクオーバーを有効にして、特定のノード障害が発生したときにクラスタをクォーラムに戻すことを推奨します。「 kernel-service 」コマンドには、 advanced 権限レベルのアクセスが必要です。詳細については、を参照してください<block ref="7c246f3223ef6280d0a553bd56956f52" category="inline-link-rx"></block>。ONTAP 9.8 以降では、デフォルトで「 KCS -enable-takeover 」パラメータが有効になっています。</block>
  <block id="3a96acfd6567b2f5ad01ec7a0444dccd" category="paragraph">「 security key-manager external enable 」と入力します</block>
  <block id="f448f5b6d3d32deaf11413ff5379c871" category="paragraph">「 security key-manager external show-status 」</block>
  <block id="3daea017ac1d8d1efd008f41d160df66" category="paragraph">「 security key-manager key create 」をクリックします</block>
  <block id="49bfbad696a2529ef03d859ad9b3f40a" category="paragraph">「 security key-manager external show 」と入力します</block>
  <block id="c497a6b930105164567b744840c21e94" category="paragraph">「 securitykey manager onboard show-backup 」を参照してください</block>
  <block id="d666aabcb0474ed724f0c2bbfd2378fc" category="paragraph">新しいノードに合わせてスイッチを再設定するには、適切なリファレンス構成ファイル（ RCF ）を適用する必要があります。RCF を適用したら、スイッチを再接続できます。</block>
  <block id="61cecfa3ef719d9c2d42720a7467139d" category="inline-link">MetroCluster の RCF ダウンロード</block>
  <block id="529fa8fad2e5f9e9ec2a18c99f9fc39e" category="list-text">にアクセスします<block ref="0813f64c6803a33deb9dfac6dfb10541" category="inline-link-rx"></block> ページで、スイッチ構成用の RCF を選択します。</block>
  <block id="2a7e4a94676516e8b47d9d81e8df4e81" category="paragraph">使用しているスイッチモデルに対応した RCF を使用する必要があります。</block>
  <block id="52ce6e876ac27324725c74f98c46d204" category="list-text">FC スイッチの RCF をインストールするには、使用しているスイッチモデルに一致する手順 を選択し、インストール手順に従います。</block>
  <block id="aebc5d784c007f0e8cc41b6a373e879a" category="inline-link">Brocade FC スイッチの RCF をインストールします</block>
  <block id="0283024582f18d79aeec623eb7ec67f9" category="list-text"><block ref="0283024582f18d79aeec623eb7ec67f9" category="inline-link-rx"></block></block>
  <block id="a46316d3c1d9191fc02a8477780cbda6" category="inline-link">Cisco FC スイッチの RCF をインストールします</block>
  <block id="e2dd418f8bec46f2839cbe69bcf70fb5" category="list-text"><block ref="e2dd418f8bec46f2839cbe69bcf70fb5" category="inline-link-rx"></block></block>
  <block id="89cb6d555dc47b476897d862f860da4b" category="paragraph">これらの手順は、 node3 と node4 で実行する必要があります。まず一方のノードでそれぞれの手順を完了してから、次の手順に進みます。</block>
  <block id="758ed2ce94a0d48e369a05e9792df5bf" category="paragraph">ボリュームを移動することでアップグレードの手順 を完了するには、サービスプロセッサ（ SP ）を設定し、新しいライセンスをインストールし、 AutoSupport をセットアップする必要があります。また、ストレージまたはボリュームの暗号化を設定し、 FC ポートまたは NCA ポートを設定する必要がある場合もあります。</block>
  <block id="19c5e12737453438de328e8d1b0bf8e9" category="paragraph">元のノードからボリュームを移動したら、 SAN 以外のデータ LIF とクラスタ管理 LIF を元のノードから新しいノードに移行する必要があります。</block>
  <block id="86f8743a1b5fe2af67d144308957dbfc" category="summary">ブートメディアの設定情報がコントローラのアップグレードの妨げにならないように、 node3 と node4 の設定をデフォルトの設定にリセットする必要があります。</block>
  <block id="e4b60fefa0013671f6066bd9990def84" category="paragraph">ブートメディアの設定情報がコントローラのアップグレードの妨げにならないように、 node3 と node4 の設定をデフォルトの設定にリセットする必要があります。</block>
  <block id="3c6d839c276fd97f3efa9e0584e8ab14" category="paragraph">node3 と node4 には、次の手順を実行する必要があります。この手順は各ノードで並行して実行できます。</block>
  <block id="bfa39e83f3483c34263e33d3e5ad162c" category="paragraph">ご使用の構成に固有のガイダンスが必要な場合は、テクニカルサポートにお問い合わせください。</block>
  <block id="aa6a7c81aeaad5ec8cef068df556cb9d" category="paragraph">ハンドルは、キャリアの前面に揃うようにゆっくりと閉じる必要があります。</block>
  <block id="14f8d7aeb38b3b3c06627b7d57fdaecb" category="list-text">コマンド出力に「 ha 」と表示されていることを確認する必要があります。</block>
  <block id="b245fdf63109e1cd27dd2f23120f7502" category="paragraph">アップグレードを計画するには、アップグレードに関する一般的な考慮事項を把握しておく必要があります。必要に応じて、テクニカルサポートに連絡して、クラスタの構成に固有の推奨事項とガイダンスを確認してください。</block>
  <block id="c11d05bd05aa3ac415f683b2dd37b839" category="list-text">複数の HA ペアを含むクラスタの HA ペアをアップグレードする場合は、コントローラのアップグレードを実行していない HA ペアのノードにイプシロンを移動する必要があります。たとえば、 HA ペア構成の nodeA / nodeB および nodeC / ノードを含むクラスタで nodeA / nodeB をアップグレードする場合は、イプシロンを nodeC またはノードに移動する必要があります。</block>
  <block id="03004a754e91e01bc54b3719dea50cd1" category="paragraph">アップグレード後に node3 と node4 がクラスタ内およびネットワークと相互に通信できるようにするには、物理ポートがクラスタやデータなどの目的の用途に応じた設定で正しく設定されていることを確認する必要があります。</block>
  <block id="280d42fd22f6ddb732aa3a4794b2f8cd" category="list-text">ONTAP が修復を完了できるようにするには、最後のポートで「 reachability repair repair repair repair repair repair repair 」コマンドを実行してから約 1 分待ちます。</block>
  <block id="f9549720965f3c3fb632f663b0449f83" category="paragraph">交換用ノードを稼働状態に戻す前に、 LIF がホームポートにあることを確認し、 AutoSupport が有効な場合は交換用ノードのシリアル番号を登録して、自動ギブバックをリセットする必要があります。</block>
  <block id="d5ab5005da45084a6ce089842fe78dbc" category="list-text">シリアルコンソールに接続していない場合は、接続します。ノードに LOADER プロンプトが表示されている必要があります。「 boot_ontap maint 」コマンドを使用して、メンテナンスモードに切り替えてブートします。</block>
  <block id="440ba7279ff63f95d423448a61e1f397" category="paragraph">パートナーノードが停止しているか、パートナーノードでテイクオーバーが手動で無効になっていることの確認を求めるメッセージが表示されることがあります。続行するには 'yes' を入力します</block>
  <block id="820e7fd61363b779a8b96275d3f43cd7" category="list-text">メンテナンスモードで、 node1 と node2 のメールボックスを削除します。 +</block>
  <block id="6074c781af342d278c2cc2ce1cf3994c" category="list-text">options フィールドで node1 のルートアグリゲートが「 root 」に設定され、他のアグリゲートがオンラインであることを確認します。</block>
  <block id="894e562062b22c583508fbba2535e930" category="paragraph">を確認しておく必要があります <block ref="3548781d8fe3c65e8421c7698ed973f9" category="inline-link-macro-rx"></block> ノードのドライブシェルフへの変換について説明しています。ご使用の構成に固有のガイダンスが必要な場合は、テクニカルサポートにお問い合わせください。</block>
  <block id="2c812e8ad85843d2fb30e9ee5a9139e7" category="paragraph">ボリュームを移動してコントローラハードウェアをアップグレードする前に、いくつかの準備手順を実行する必要があります。</block>
  <block id="ee854370fd2f5a7eb524cd691b34306b" category="paragraph">クラスタの内容とクラスタ環境に応じて、 SAN LIF を移動、削除、または作成するか、削除した SAN LIF を再作成する必要があります。</block>
  <block id="26ade9476b94b8c52725c91b6938ea23" category="paragraph">この手順 は、次の状況でコントローラハードウェアをアップグレードする場合に使用します。</block>
  <block id="6d760bf8ac1b665771cffc45fc130866" category="paragraph">コントローラモジュールはリブートしますが、ブートメニューで停止します。これは、ブートデバイスが再フォーマットされたことにより、構成データをリストアする必要があるためです。</block>
  <block id="585bb8123c8fd5789aad3617861008af" category="paragraph">UTA / UTA2 ポートは、ネイティブの FC モードまたは UTA / UT2A モードに設定できます。FC モードでは FC イニシエータと FC ターゲットがサポートされます。 UTA / UTA2 モードを使用すると、 NIC と FCoE の同時トラフィックで同じ 10GbE SFP+ インターフェイスを共有し、 FC ターゲットをサポートすることができます。</block>
  <block id="41a9b66b782d6f3bf7e297fd670a7c20" category="list-text">「 -m 」はパーソナリティ・モード、 FC または 10GbE UTA です。</block>
  <block id="9450a99e74ec16b762595820712c299f" category="list-text">[[auto_check3_step23]] 外付けディスクがあるシステムから、内蔵ディスクと外付けディスクをサポートするシステム（ AFF A800 システムなど）にアップグレードする場合は、 node1 アグリゲートをルートアグリゲートとして設定し、ノード 1 のルートアグリゲートからノード 3 がブートすることを確認します。ルート・アグリゲートを設定するには ' ブート・メニューからオプション 5 を選択して ' 保守モードに切り替えます</block>
  <block id="6a09a9f81757d30fb9d957be6637ae37" category="paragraph">新しいハードウェアを設置するための特別なツールが必要です。また、アップグレードプロセス中に他のドキュメントを参照する必要があります。また、コントローラのアップグレードに必要な情報を記録しておく必要があります。情報を記録するためのワークシートが用意されています。</block>
  <block id="c4cd2838020f3d163cb45dd2d33de6b2" category="paragraph">アップグレードを実行するには、次の工具が必要です。</block>
  <block id="7368fc5c8c51bc8dc679464700a9f443" category="paragraph">ノード 1 をノード 3 に交換する前に、 storage aggregate relocation コマンドを使用してルート以外のアグリゲートをノード 1 からノード 2 に移動し、再配置を確認する必要があります。</block>
  <block id="e45573b969f614ffe0b1bc0150964664" category="paragraph">再配置はバックグラウンドで実行されます。アグリゲートの再配置には数秒から数分かかる場合があります。この時間には、クライアントの停止部分と停止部分の両方が含まれます。このコマンドでは、オフラインまたは制限されたアグリゲートが再配置されません。</block>
  <block id="f01701363e083789a1f1072d5e752654" category="paragraph">このコンテンツは、次の状況で使用します。</block>
  <block id="a32dd2ca79d8d8a0056821cb37fed7f4" category="cell">オンボードキーマネージャ</block>
  <block id="476ac05553cb9f39ca703fbfa6eee309" category="paragraph">認証キーを使用できなかったか、 EKM サーバに到達できなかったためにボリュームがオフラインになっていないか確認してください。volume online コマンドを使用して ' これらのボリュームをオンラインに戻します</block>
  <block id="99216628ad8791a98d0d65a1149b6ef1" category="section-title">ARL アップグレードシーケンスの概要</block>
  <block id="0bd65204fc591f4fe883290648b71d9f" category="paragraph">ノード 1 を撤去するには、自動処理を再開して、ノード 2 と HA ペアを無効にし、ノード 1 を正しくシャットダウンします。あとでノード 1 をラックまたはシャーシから取り外す必要があります。</block>
  <block id="823095cde7c39355f11b0bd61e896495" category="paragraph">新しいライセンスキーがない場合は、クラスタで現在ライセンスされている機能を新しいコントローラで使用でき、引き続き使用できます。ただし、ライセンスされていない機能をコントローラで使用するとライセンス契約に違反する可能性があるため、アップグレードの完了後に新しいコントローラの新しいライセンスキーをインストールする必要があります。</block>
  <block id="4244f87afdd4c8b0ebf9ac5e3301a435" category="list-text">「 * Go ！ * 」を選択します</block>
  <block id="de418d0eb742cb1027dedde84846a1a0" category="paragraph">UTA / UTA2 ポートは、ネイティブの FC モードまたは UTA / UTA2 モードに設定できます。FC モードは FC イニシエータと FC ターゲットをサポートします。 UTA / UTA2 モードは、同じ 10GbE SFP+ インターフェイスを共有する NIC と FCoE のトラフィックの同時処理を可能にし、 FC ターゲットをサポートします。</block>
  <block id="a286b63bee5a5b535ee4aacbaf102732" category="admonition">* 注意 * ：ストレージディスクがあるシステムの場合、保守モードに移行するよう指示されていないかぎり、クラスタプロンプトでこのセクションのコマンドを入力する必要があります。V シリーズシステムを使用している場合や FlexArray 仮想化ソフトウェアを使用していて、ストレージアレイに接続している場合は、このセクションのメンテナンスモードプロンプトでコマンドを入力する必要があります。UTA / UTA2 ポートを設定する場合は、メンテナンスモードにする必要があります。</block>
  <block id="76c7e3320831285f65d8e81c92ccd88a" category="paragraph">手順の実行中に、交換用コントローラハードウェアを使用して元のコントローラハードウェアをアップグレードし、ルート以外のアグリゲートの所有権を切り替えます。アグリゲートをノードからノードに複数回移行して、アップグレード手順 全体を通じて、少なくとも 1 つのノードがアグリゲートからデータを提供していることを確認します。また、処理を続行する前に、データ論理インターフェイス（ LIF ）を移行し、新しいコントローラのネットワークポートをインターフェイスグループに割り当てます。</block>
  <block id="c95c6a92ffa35efbbd76f2afcad3663c" category="list-title">重要な情報：</block>
  <block id="d142be7ca70f1dab3c73f928db2a361e" category="list-text">この手順は複雑で、 ONTAP の高度な管理スキルがあることを前提としています。また、を読んで理解する必要があります <block ref="945806db9f0d500dce4d83fd47d362f0" category="inline-link-macro-rx"></block> および <block ref="25c64b56e1634b7195570b2ce4c1228b" category="inline-link-macro-rx"></block> アップグレード開始前のセクション。</block>
  <block id="90b3509f7da0bd37fd6636cace1d2404" category="paragraph">正しいセットアップを確認するには、 HA ペアを有効にする必要があります。さらに、 node3 と node4 が相互のストレージにアクセスできること、およびクラスタ内の他のノードに属するデータ LIF を所有していないことを確認する必要があります。また、 node3 が node1 のアグリゲートを所有しており、 node4 が node2 のアグリゲートを所有していること、および両方のノードのボリュームがオンラインであることを確認する必要があります。</block>
  <block id="4883a9a9fced202f6b61720c6c0446a2" category="list-text">次のコマンドを入力し、出力を調べて、ライセンスが正しくインストールされていることを確認します。</block>
  <block id="d9128463a6e9a9f5e58f74dfe42dba7b" category="paragraph">でキャプチャした出力と比較できます <block ref="aa31de159a7a7903f22336e05c00b63e" category="inline-link-macro-rx"></block> で、ノードをアップグレードする準備をしています。</block>
  <block id="6e8734f19d50032240b4c921c28e1359" category="admonition">ネットアップのマーケティング資料では、 Converged Network Adapter （ CNA ；統合ネットワークアダプタ）アダプタおよびポートを UTA2 と呼ぶ場合があります。ただし、 CLI では CNA という用語が使用されます。</block>
  <block id="d7907cb3489253518aab7ff40ebf0def" category="paragraph">ノード 2 を撤去するには、ノード 2 を正しくシャットダウンし、ラックまたはシャーシから取り外す必要があります。クラスタが SAN 環境にある場合は、 SAN LIF も削除する必要があります。</block>
  <block id="ef5ec2a32c562be2385847f4327ea89b" category="paragraph">UTA / UTA2 ポートは、ネイティブの FC モードまたは UTA / UTA2 モードに設定できます。FC モードでは FC イニシエータと FC ターゲットがサポートされます。 UTA / UTA2 モードを使用すると、同じ 10GbE SFP+ インターフェイスを共有する NIC と FCoE のトラフィックを同時に処理でき、 FC ターゲットをサポートできます。</block>
  <block id="b097fd1d2cefb144b4a3f6950a0c96f6" category="paragraph">次の状況で、アグリゲートを正しく再配置できず、ノード 1 がノード 3 ではなくホームノードになっている可能性があります。</block>
  <block id="5c7c176cb23c0fd455f08f6713c4569c" category="paragraph">ノード 3 をラックに設置し、ノード 1 の接続をノード 3 に転送し、ノード 3 をブートして、 ONTAP をインストールする必要があります。また、ノード 1 のスペアディスク、ルートボリュームに属するディスク、およびルート以外のアグリゲートのうち、ノード 2 に再配置されていないディスクも再割り当てする必要があります。</block>
  <block id="ff04402d473dc5a2d0244b3a1e2f80de" category="paragraph">ノード 1 にインストールされている ONTAP 9 のバージョンが異なる場合は、ノード 3 をネットブートする必要があります。node3 のインストールが完了したら、 Web サーバに保存されている ONTAP 9 イメージからブートします。その後、以降のシステムブートで使用するブートメディアデバイスに正しいファイルをダウンロードできます。を参照してください <block ref="4815c2d091d790c1d3bab94177b38eaf" category="inline-link-macro-rx"></block>。</block>
  <block id="8a3caa8f970994704d4e4c76f1691656" category="admonition">ネットブート接続として管理ポートおよび IP を使用する必要があります。データ LIF IP を使用しないでください。使用していると、アップグレードの実行中にデータが停止する可能性があります。</block>
  <block id="aa2204ca3e9ad3d68d5e741c96bc1b23" category="paragraph">「 path_to_the_web-accessible_directory 」は、の「 ONTAP_version_image.tgz 」をダウンロードした場所を指します <block ref="d7ca8bd1bdacba48998a89c59527e756" category="inline-link-macro-rx"></block> の項で、 netboot_ の準備を参照してください。</block>
  <block id="377b8d4c735171feb47b0d695ca5aa75" category="admonition">コマンドを入力すると、「ディスクはありません」というメッセージが表示される場合があります。これはエラーメッセージではないため、手順を続行できます。</block>
  <block id="84789105d710844372227e7f8b701198" category="list-text">[[man_install3_step32]] 外付けディスクがあるシステムから、内蔵ディスクと外付けディスクをサポートするシステム（ AFF A800 システムなど）にアップグレードする場合は、 node1 アグリゲートを root として設定し、 node3 が node1 のルートアグリゲートからブートすることを確認します。</block>
  <block id="a9b6d9aa37a2b246ff71e7efcd734bcf" category="paragraph">システムは、 HA ペア構成かスタンドアロン構成かにかかわらず、プログラム可能 ROM （ PROM ）に記録されます。状態は、スタンドアロンシステムまたは HA ペア内のすべてのコンポーネントで同じである必要があります。</block>
  <block id="d7abdf7c6312ac172c1ef5a8bd826f97" category="paragraph">内蔵ディスクドライブを搭載したコントローラをアップグレードする場合は、いくつかのコマンドを実行し、その出力を調べて、ルートアグリゲートやデータアグリゲートが含まれている内蔵ディスクドライブがないことを確認する必要があります。</block>
  <block id="845a94c1ed34fe833c91b960798ffff2" category="paragraph">再配置処理はこのフェーズの開始時に一時停止されます。このプロセスは主に自動化されており、ステータスを確認するために処理が一時停止します。この処理は手動で再開する必要があります。また、 SAN LIF がノード 3 に正常に移動したことを確認する必要があります。</block>
  <block id="2c57b3816ff5f5700ca371be22f428e1" category="cell">ボリューム、 FlexClone ボリューム、ファイル、 LUN を使用して論理ストレージリソースを効率的に管理する方法について説明します。 FlexCache 、重複排除、圧縮、 qtree 、およびクォータ</block>
  <block id="97100ba8af68fa3886b472eaf454f74b" category="cell">計画的なメンテナンス時または災害発生時の両方のケースにおける、 MetroCluster のスイッチオーバーとスイッチバック処理の実行方法について説明します。</block>
  <block id="29f0de2b0e55e07da57cbc094ee90f18" category="inline-link-macro">「 system controller replace 」コマンドを使用して、 ONTAP 9.10.1 以降を実行する AFF A900 に AFF A700 をアップグレードします</block>
  <block id="9207f0d2f15feec52f0acba2d7786a53" category="paragraph">ノード 1 の物理ポートがノード 3 の物理ポートに正しくマッピングされていることを確認します。これにより、ノード 3 はクラスタ内の他のノードと通信し、アップグレード後にネットワークと通信できるようになります。</block>
  <block id="33f0e8a0f6ded5a1669e805f22005635" category="paragraph">元のノードまたは新しいノードでストレージ暗号化が有効になっている場合があります。その場合は、この手順 で追加の手順を実行して、ストレージ暗号化が正しく設定されていることを確認する必要があります。</block>
  <block id="604021e164c6285018b6c1a32742b633" category="list-text">[[man_lif_verify_4_Step10] ] 次の手順を実行して、ノード 4 の正しいポートに SAN LIF があることを確認します。</block>
  <block id="7ca66f8c8bf2c1987204f43fd4061a0d" category="admonition">SAN LIF は、元のポートとリンク速度が同じポートに移動する必要があります。</block>
  <block id="1cbc4ae835bdfd185bb57405d5775373" category="list-text">ノード 1 とノード 2 の両方で次の手順を実行して、手順 の後半で物理ポートを正しくマッピングできることを確認します。</block>
  <block id="be557a46041dd265b6e485ddc4d73cca" category="list-text">SP のステータスがオンラインであることを確認します</block>
  <block id="e67c4ced29cdd2e25e3754fa50aa41c0" category="list-text">SP ネットワークが設定されていることを確認する。</block>
  <block id="bfacc8eef0b077fb7822880dd6814cc1" category="list-text">次のコマンドを使用して出力を調べ、ライセンスが正しくインストールされていることを確認します。</block>
  <block id="20d8c464d7ec22352c6b329b84051301" category="paragraph">出力を、セクションでキャプチャした出力と比較できます <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block>。</block>
  <block id="c2f768afcc24a25937246844b60ab9eb" category="paragraph">ノードペアをアップグレードするには、元のノードを準備し、元のノードと新しいノードの両方で一連の手順を実行する必要があります。その後、元のノードの運用を停止できます。</block>
  <block id="02ff778dd8d46adf855b54a838b324bf" category="paragraph">ノード 2 を撤去するには、ノード 2 を正しくシャットダウンし、ラックまたはシャーシから取り外す必要があります。</block>
  <block id="3de332599e65c45dacd3ed3d86baaf4b" category="paragraph">ARL を元のコントローラおよび交換用コントローラで実行できるかどうかを確認する必要があります。元のシステムでサポートされるすべての定義済みアグリゲートのサイズとディスク数を確認する必要があります。新しいシステムでサポートされるアグリゲートのサイズとディスク数を比較します。この情報にアクセスするには、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> Hardware Universe にリンクするには、次の手順を実行します。新しいシステムでサポートされるアグリゲートサイズとディスク数は、元のシステムでサポートされるアグリゲートサイズとディスク数以上であることが必要です。</block>
  <block id="731f4fb299fe0fa8bc324a58661cca70" category="paragraph">元のコントローラを交換したときに、新しいノードが既存のノードとクラスタの一部になることができるかどうかは、クラスタ混在ルールで検証する必要があります。クラスタ混在ルールの詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> Hardware Universe にリンクするには、次の手順を実行します。</block>
  <block id="565ac783ae7c093872bf37a3433ccbae" category="paragraph">システムをネットブートする前に、すべての SnapMirror 関係を休止する必要があります。休止された SnapMirror 関係は、リブート後およびフェイルオーバー後も休止状態のままです。</block>
  <block id="9e8e7bf29c653d52cfbdfb677b4fb6bf" category="list-text">[man_lif_verify_3_step8] SAN LIF が node3 の正しいポートにあることを確認します。</block>
  <block id="78216d3d261872be404d0ef7c21408bf" category="paragraph">UTA / UTA2 ポートは、ネイティブの FC モードまたは UTA / UT2A モードに設定できます。FC モードは FC イニシエータと FC ターゲットをサポートします。 UTA / UTA2 モードを使用すると、 NIC と FCoE の同時トラフィックで同じ 10GbE SFP+ インターフェイスを共有し、 FC ターゲットをサポートすることができます。</block>
  <block id="916e7815c3f105e14fd158f1ffbeb91d" category="paragraph">ただし、ノード 4 の UTA / UTA2 ポートの設定を確認し、必要に応じて変更することができます。</block>
  <block id="1dbdfcd87542afd818176aeea97fb3be" category="admonition">テープドライブおよび FlexArray 仮想化システムには、 FC イニシエータを使用する必要があります。SAN クライアントには FC ターゲットを使用する必要があります。</block>
  <block id="85f1db26fc36597793844fca03a7f854" category="paragraph">ノード 4 をラックに設置し、ノード 2 の接続をノード 4 に転送し、ノード 4 をブートする必要があります。ノード 2 のスペア、ルートに属するディスク、および node3 でそれよりも前に再配置されなかったルート以外のアグリゲートも再割り当てする必要があります。</block>
  <block id="5f34210defca852f8f1655ce289d6799" category="paragraph">node2 に同じバージョンの ONTAP 9 がインストールされていない場合は、 node4 をネットブートする必要があります。node4 のインストールが完了したら、 Web サーバに格納されている ONTAP 9 イメージからブートします。その後、の手順に従って、後続のシステムのブートに使用する正しいファイルをブートメディアデバイスにダウンロードできます <block ref="4815c2d091d790c1d3bab94177b38eaf" category="inline-link-macro-rx"></block></block>
  <block id="f6408b0f151aa522101046e38cc52030" category="paragraph">ただし、 node2 に同じバージョンまたはそれ以降のバージョンの Data ONTAP 9 がインストールされている場合は、ネットブート node4 には必要ありません。</block>
  <block id="449e5cd8d2109280744f4a0b39c075e7" category="paragraph">* 重要な情報： *</block>
  <block id="a5ac04d57c5af778b5a6063c21c23be1" category="admonition">ネットブート接続として管理ポートおよび IP アドレスを使用する必要があります。アップグレードの実行中にデータ LIF の IP アドレスを使用しないでください。データ LIF が停止する可能性があります。</block>
  <block id="080d5dc3ee89ba9cabba1525988c4bea" category="list-text">外付けディスクが搭載されたシステムから、内蔵ディスクと外付けディスクをサポートするシステム（ A800 システムなど）にアップグレードする場合は、 node4 を root として設定し、 node2 のルートアグリゲートからブートすることを確認します。</block>
  <block id="71f2b118caea9cbcfebf7ac7442b9368" category="list-text">FlexArray 仮想化ソフトウェアまたは V シリーズシステムを搭載したシステムへの FAS システムの追加。</block>
  <block id="d5c14f42965c8b82b46e75794e25ffe5" category="list-text">FlexArray 仮想化ソフトウェアまたは V シリーズシステムを FAS システムに移行するシステム。ただし、 FlexArray 仮想化ソフトウェアまたは V シリーズシステムにアレイ LUN がない場合に限ります。</block>
  <block id="3db88a2cbbf154448bdd1843909d0e67" category="list-text">V シリーズシステムから、 FlexArray 仮想化ソフトウェアまたは V シリーズシステムを搭載したシステムへのアップグレード。</block>
  <block id="59af70dd915dcdb0e4027b17846b1638" category="paragraph">発生した問題に対する解決策 が見つからない場合は、テクニカルサポートにお問い合わせください。</block>
  <block id="ca96ef2d79771ffe95064c2ba8f795ee" category="paragraph">ノード 2 をシャットダウンして撤去する前に、クラスタネットワーク、管理、および FC ポートとその NVRAM システム ID に関する情報を記録しておく必要があります。この情報は、 node2 を node4 にマッピングしてディスクを再割り当てするときに、手順で必要となります。</block>
  <block id="0e1dd14206fc60d11a3acb5ef31b4193" category="paragraph">元のノードを交換する前に、ノードが HA ペア構成になっていて、不足しているディスクや障害ディスクがないこと、相互のストレージにアクセスできること、およびクラスタ内の他のノードに割り当てられているデータ LIF を所有していないことを確認する必要があります。また、元のノードに関する情報を収集し、クラスタが SAN 環境にある場合は、クラスタ内のすべてのノードがクォーラムにあることを確認する必要があります。</block>
  <block id="b88f4069a24bcdd70aa256d82f95a4a7" category="list-text">テイクオーバーモード時に両方のノードの負荷に対応できるだけの十分なリソースが元の各ノードにあることを確認します。</block>
  <block id="18f606894983467a22af084725dc9ac7" category="paragraph">node3 と node4 を物理的にチェックして、 NVMEM または NVRAM バッテリが充電されているかどうかを確認する必要があります。node3 と node4 のモデルの LED の詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> Hardware Universe にリンクするには、次の手順を実行します。</block>
  <block id="c70df2aabab33218fc65e3c0dc6f873f" category="paragraph">新しいノードには、元のノードと同じバージョンの ONTAP 9.x がインストールされている必要があります。新しいノードに別のバージョンの ONTAP がインストールされている場合は、設置後に新しいコントローラをネットブートする必要があります。ONTAP のアップグレード方法については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> リンク先： ONTAP のアップグレード _ 。</block>
  <block id="4fd96863c7332ca953dbbdb95b4c0457" category="list-text">ノード 1 とノード 2 が HA ペアになっていることを確認し、ノードが相互に接続されており、テイクオーバーが可能であることを確認します。</block>
  <block id="077bf43ae0702cf4ef1519ff5ec6b8f3" category="list-text">[man_prepare-to-downgrade 9] 現在の所有者（ホーム所有者ではない）であるアグリゲートを node1 と node2 のどちらも所有していないことを確認します。</block>
  <block id="540684201c9c484246cd2060826ea5b6" category="list-text">[man_prepare_nodes_step12]] ノード 1 とノード 2 がお互いのストレージにアクセスできることを確認し、ディスクが見つからないことを確認します。</block>
  <block id="d951eff85d635d18c7d30d8323f2bfa4" category="list-text">ノード 1 とノード 2 が正常に機能しており、クラスタへの参加条件を満たしていることを確認します。</block>
  <block id="37522abc5c58d8935eb7c6c44799dd5d" category="list-text">[man_prepare-to-downgrade 15]] ノード 1 とノード 2 で同じ ONTAP リリースが実行されていることを確認します。</block>
  <block id="c685ef92ee54cacdd0c225fa2bb12fbe" category="cell">ステージ 6 ： _ 新しいコントローラが正しくセットアップされていることを確認します _</block>
  <block id="0ec2ad7eda30b3cde303c205b91073e8" category="paragraph">ノード 1 を撤去するには、ノード 2 で HA ペアを無効にし、ノード 1 を正しくシャットダウンしてラックまたはシャーシから取り外します。</block>
  <block id="d3f49e44800c8ff8556d915b88782e44" category="list-title">選択肢：</block>
  <block id="ab329064c02455ccdd701ac2ba43fd04" category="admonition">アグリゲートおよび LIF のホーム所有者は変更されません。現在の所有者のみが変更されます。</block>
  <block id="a237d7c8e8a8ae58e2aad1d8f40bc092" category="paragraph">処理が一時停止することで、ノード 1 のルート以外のアグリゲートと SAN 以外のデータ LIF がすべて node2 に移行されているかどうかを確認できます。</block>
  <block id="4aacc9aec1f66da10a6f4c09d02fe381" category="paragraph">ノード 1 をシャットダウンして廃棄する前に、クラスタネットワークポート、管理ポート、および FC ポートとその NVRAM システム ID に関する情報を記録しておく必要があります。この情報は、ノード 1 をノード 3 にマッピングし、ディスクを再割り当てするときに、手順で必要になります。</block>
  <block id="4fabb82b0ea371ba2434024a4145924d" category="paragraph">アップグレード手順 の最後に、 node3 は、元々ホームノードとしてノード 1 を使用していたアグリゲートの新しいホームノードである必要があります。このパスはアップグレード後に再配置できます。</block>
  <block id="4737e9bd68e050a3ff527329392a0902" category="paragraph">再配置されたアグリゲートの所有権は、ホーム所有者が変更されていないためにテイクオーバーされたルート以外のアグリゲートの所有権と同じように見えます。node1 の状態が「 waiting for giveback state 」になると、 node2 はノード 1 のルート以外のすべてのアグリゲートをギブバックします。</block>
  <block id="28332742784b3fba161ff8020b7948ef" category="paragraph">node3 が再度ブートするまでは、残りのアグリゲートが停止している必要があります。</block>
  <block id="f068e1c881bcb261ac497abe62b5aef7" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードするときに 'system controller replace' コマンドを使用して 'node2 の物理ポートが node4 に正しくマッピングされていることを確認します</block>
  <block id="4b23fc3c80c3c248a200cfd0971d83e3" category="paragraph">node2 の物理ポートが node4 の物理ポートに正しくマッピングされていることを確認する必要があります。これにより、 node4 はアップグレード後にクラスタ内の他のノードおよびネットワークと通信できるようになります。</block>
  <block id="ccc4d287ed40737d309a426c85cda5fc" category="paragraph">到達不能または予期しないポートが存在しないことを確認します。次のコマンドを使用してすべての物理ポートの到達可能性ステータスをチェックし、出力を調べてステータスが「 OK 」であることを確認します。</block>
  <block id="a5493bc67e24703f243d4cfc0298650e" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードするために 'system controller replace' コマンドを使用した場合に発生する可能性のある ' アグリゲートの再配置の失敗のトラブルシューティング</block>
  <block id="422d8952c3ec01e2b6b65ff004556457" category="summary">ONTAP 9.8 以降を実行するコントローラをアップグレードするために ARL を使用するかどうかを決定するには 'system controller replace' コマンドを使用します</block>
  <block id="bb670325b6c95abf4f99a4e0d18f7d94" category="paragraph">このコンテンツは、次のような状況で使用できます。</block>
  <block id="875c64b3c2a29ed26843ae23dac3007b" category="paragraph">[[sys_commands _98_supported_systems]] 次の表は、コントローラのアップグレードでサポートされるモデルマトリックスを示しています。</block>
  <block id="c9ee572a8e71e6ba4e03747ac09a21a8" category="list-text">AFF A400 または FC タイプの構成で FAS8300 を使用する場合は、 4 ポートの 10GbE ネットワークインターフェイスカード（パーツ番号 X1147A ）を追加して一時的なクラスタポートを提供する必要があります。</block>
  <block id="652f24bc7c2d2709481afa47ee0f81bf" category="list-text">一時的なクラスタポートを使用したコントローラのアップグレードが完了したら、クラスタ LIF を無停止で e3a および e3b 、 AFF A400 システムの 100GbE ポート、 FAS8300 システムの e0c および e0d 、 100GbE ポートに移行できます。</block>
  <block id="b2111d24d8d5e6877bc30003addf98f5" category="summary">ONTAP 9.8 以降を実行しているコントローラ上で system controller replace コマンドを使用して、 ARL アップグレードのステージ 3 プロセスシーケンスを実行します。</block>
  <block id="1e1e54cae5bb87dec61012a56a2eaa5a" category="summary">必要に応じて 'system controller replace' コマンドを使用して ONTAP 9.8 以降を実行するコントローラをアップグレードするときに ' ストレージ暗号化を構成し 'SSL 証明書をインストールし ' キー管理サーバを設定します</block>
  <block id="7fb09ce149939f5078b07b7d45f68e40" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードするときに 'system controller replace' コマンドを使用して ' 再起動 ' パニック ' 電源再投入などのさまざまな段階でシステムがクラッシュすることがあります</block>
  <block id="1d6e912902b1e30f8b9da52e03335a4b" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードするときは、 system controller replace' コマンドを使用してノードを準備し、一連の事前チェックを実行します。</block>
  <block id="4624c4b44b48ffb05b83bfbd93925a33" category="list-text">コントローラの交換処理が開始されて事前確認が完了すると、処理が一時停止するため、ノード 3 の設定時にあとで必要になる可能性がある出力情報を収集できます。</block>
  <block id="5d642f56c168a61a7302b4ee2b4f1776" category="summary">「 system controller replace 」コマンドを使用して、 ONTAP 9.8 以降を実行するコントローラをアップグレードする手順 の動作を理解します。</block>
  <block id="5c0c0ce44540897f8be1125abf84e684" category="cell"><block ref="5c0c0ce44540897f8be1125abf84e684" category="inline-link-macro-rx"></block></block>
  <block id="d4a9de2e595b538d5a4f05a34afc32b7" category="cell"><block ref="d4a9de2e595b538d5a4f05a34afc32b7" category="inline-link-macro-rx"></block></block>
  <block id="d83a9e48636f4518936c8417151970d2" category="cell"><block ref="d83a9e48636f4518936c8417151970d2" category="inline-link-macro-rx"></block></block>
  <block id="3e2c313a3377bca74948c51da9680224" category="cell"><block ref="3e2c313a3377bca74948c51da9680224" category="inline-link-macro-rx"></block></block>
  <block id="6c917293443a2296c0d53a664e709c0a" category="cell"><block ref="6c917293443a2296c0d53a664e709c0a" category="inline-link-macro-rx"></block></block>
  <block id="96f56cb76b5b93d8d5e3a00ca79d5376" category="cell"><block ref="96f56cb76b5b93d8d5e3a00ca79d5376" category="inline-link-macro-rx"></block></block>
  <block id="c58e06e13ea00648461f7e5d6400a1e2" category="summary">部分的に自動化された ARL 手順 を使用して、 ONTAP 9.8 以降を実行するコントローラをアップグレードします。</block>
  <block id="6842ea6d980ed82db538f2da553da6d9" category="paragraph">手動での作業は時間がかかり複雑でしたが、この簡易化された手順 では、アグリゲートの再配置を使用してコントローラの更新を実装できるため、 HA ペアの無停止アップグレードをより効率的に実行できます。特に、検証、情報収集、および事後チェックに関連する手動手順は大幅に少なくなります。</block>
  <block id="0bc12c090040b2c995d1f511a738331b" category="summary">ONTAP 9.8 以降を実行しているコントローラ・ハードウェアをアップグレードするには 'system controller replace コマンドを使用して ' ルート以外のアグリゲートの所有権を切り替えます</block>
  <block id="00798947001a6019a55bd8d66dad542b" category="paragraph">この手順 では、次のシステム構成で Aggregate Relocation （ ARL ；アグリゲートの再配置）を使用してコントローラハードウェアをアップグレードする方法について説明します。</block>
  <block id="4c3880bb027f159e801041b1021e88e8" category="cell">メソッド</block>
  <block id="3b2a75ebc087c7f3c4fa9ac0e2a92ebe" category="cell">ONTAP バージョン</block>
  <block id="933247e0be7796a309cfa4c95bd34938" category="cell">サポートされるシステム</block>
  <block id="b9e53a247da3982cb706e33287d2a8fd" category="cell">「 system controller replace 」コマンドを使用します</block>
  <block id="15cf8bac83469ea24db5fd57d78703bb" category="inline-link-macro">サポートされているシステムマトリックスへのリンク</block>
  <block id="a6ca18b1f89969fd442f778ef3ea38ff" category="cell"><block ref="a6ca18b1f89969fd442f778ef3ea38ff" category="inline-link-macro-rx"></block></block>
  <block id="1c0fadcae168a06166e7bed8b6702f83" category="list-text">この手順は複雑で、 ONTAP の高度な管理スキルがあることを前提としています。また、を読んで理解する必要があります <block ref="4839d43871fe29773e86f5cefcab0e32" category="inline-link-macro-rx"></block> および <block ref="57e14e08755134bb6fef9ad899bb58ee" category="inline-link-macro-rx"></block> アップグレード開始前のセクション。</block>
  <block id="0fe595dcf68c11944d6702639057e6d6" category="paragraph">node1 の物理ポートが、 node3 の物理ポートに正しくマッピングされていることを確認する必要があります。これにより、 node3 は、アップグレード後にクラスタ内の他のノードおよびネットワークと通信できるようになります。</block>
  <block id="078c10fbc24c84a3e4f0b77caa19df99" category="paragraph">node3 がクォーラムにあり、 node2 と通信できることを確認したら、 node1 の VLAN 、インターフェイスグループ、およびブロードキャストドメインが node3 にあることを確認します。また、 node3 のすべてのネットワークポートが正しいブロードキャストドメインに設定されていることを確認します。</block>
  <block id="3826f7a548ec9fd12d4b782702777113" category="paragraph">ノードのすべての物理ネットワークポート、 VLAN ポート、およびインターフェイスグループポートが表示されます。この出力から、 ONTAP によって「 Cluster 」ブロードキャストドメインに移動された物理ポートを確認できます。この出力を使用して、 LIF をホストするためにインターフェイスグループメンバーポート、 VLAN ベースポート、またはスタンドアロンの物理ポートとして使用するポートを決定できます。</block>
  <block id="d35fa840e002cbb887332e9d1f1e5a3b" category="paragraph">上記の例では、 node1 _node3 はコントローラの交換後にブートしたばかりです。一部のポートは想定されるブロードキャストドメインに到達できないため、修復が必要です。</block>
  <block id="5f90a85556137f6774264c776fde0727" category="summary">ONTAP 9.8 以降を実行しているコントローラ上で system controller replace コマンドを使用して、 ARL アップグレードのステージ 5 プロセスシーケンスを実行します。</block>
  <block id="ddb5eb2be2cb4d619fb6d97af7f0979a" category="summary">ONTAP 9.8 以降を実行しているコントローラを 'system controller replace' コマンドを使用してアップグレードすると ' 古いシステムが動作しなくなったことをネットアップに知らせてください</block>
  <block id="00c04526ef3b80544bc62192638a9877" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードするときに 'system controller replace' コマンドを使用して ' 失敗したアグリゲートや拒否されたアグリゲートを手動で再配置します</block>
  <block id="7bcb17815f900cadc0e0737ce418be64" category="summary">ONTAP 9.8 以降を実行しているコントローラで system controller replace コマンドを使用して、 ARL アップグレードのステージ 1 プロセスシーケンスを実行します。</block>
  <block id="37b10337aa44c11a05aa4efa324640ba" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードするときは 'system controller replace' コマンドを使用して SnapMirror 転送と SnapMirror 関係を再開します</block>
  <block id="c5ab586f079393b46529e61d3aad76d5" category="summary">ONTAP 9.8 以降を実行しているコントローラ上で system controller replace コマンドを使用して、 ARL アップグレードのステージ 6 プロセスシーケンスを実行します。</block>
  <block id="beda7e39626b719165412c5becb115d5" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードする場合は、「 system controller replace 」コマンドを使用して、 node3 をインストールし、 ONTAP ソフトウェアをインストールします。</block>
  <block id="131a7dee0b529b4cbcbd4da77cad2ec0" category="admonition">ネットブート接続として管理ポートおよび IP を使用する必要があります。アップグレードの実行中にデータ LIF IP を使用しないでください。データ LIF が停止する可能性があります。</block>
  <block id="b710e003cdfabdeb2229447675cd3808" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードするときに 'system controller replace' コマンドを使用して MetroCluster 構成のスイッチオーバー ' 修復 ' およびスイッチバック操作を確認します</block>
  <block id="312ce282bc7d7bc7d34249cfcaff7db6" category="summary">必要に応じて 'system controller replace' コマンドを使用して ONTAP 9.8 以降を実行しているコントローラをアップグレードするときに 'node4 にあるキー管理ツールの構成を復元します</block>
  <block id="330937217378a90989c78312814a4d5c" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードするときに、ステージ 2 、ステージ 3 、またはステージ 5 で「 system controller replace 」コマンドを使用して移行後に LIF がオンラインにならない。</block>
  <block id="fd24c846065712469415a8e763eddf49" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードするときに 'system controller replace' コマンドを使用して 'node2 のルート以外のアグリゲートを node3 に移動します</block>
  <block id="d86fa9c7d1b3bca68c0a69f81f14a78e" category="summary">ONTAP 9.8 以降を実行しているコントローラ上で system controller replace コマンドを使用して、 ARL アップグレードのステージ 2 プロセスシーケンスを実行します。</block>
  <block id="5e668aadf3c84d39f49c47f9c74523b2" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードするときに発生する可能性のある問題については 'system controller replace' コマンドを使用して説明します</block>
  <block id="53cd5409b5ec64b4f5341cb93a822fab" category="summary">必要に応じて 'system controller replace' コマンドを使用して ONTAP 9.8 以降を実行しているコントローラをアップグレードするときに ' キー管理ツールの構成をノード 3 にリストアします</block>
  <block id="7bd8b3dd0d22517f7c62e753e1829f56" category="summary">ONTAP 9.8 以降を実行しているコントローラ上で system controller replace コマンドを使用して、 ARL アップグレードのステージ 4 プロセスシーケンスを実行します。</block>
  <block id="3d241889b517139955243b1b9ae6111a" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードするときに発生する可能性のある障害のトラブルシューティングには 'system controller replace' コマンドを使用します</block>
  <block id="f810af73d1a28d1f55ad862f678355f9" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードする場合は 'system controller replace' コマンドを使用して ' ストレージ暗号化の構成と管理 ' 認証キーの管理 ' および SnapMirror 関係の休止を行います</block>
  <block id="334aac8182abb9ed5a53014b66433691" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードする場合は 'system controller replace' コマンドを使用して 'node4 をインストールして ONTAP ソフトウェアをインストールします</block>
  <block id="dc97d8a31027159f1cd8fddd5b4c5dab" category="paragraph">再配置処理はこのフェーズの開始時に一時停止されます。このプロセスはほとんどが自動化されており、処理は一時停止してステータスを確認できます。この処理は手動で再開する必要があります。</block>
  <block id="e13e6c141a78d2d49110f9de675a4ce7" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードする場合は 'system controller replace' コマンドを使用して 'node2 をシャットダウンし ' ラックまたはシャーシから取り外します</block>
  <block id="1565fea61c4b7c7821ea0d9a5ab00d22" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードするときに 'system controller replace' コマンドを使用して ' 一般的な構成エラーがないかどうかを確認するには ' Config Advisor ツールを使用します</block>
  <block id="23826189d4179acfb46645b446f69080" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードするには 'system controller replace' コマンドを使用して ' 特定のツールとマニュアルを用意する必要があります</block>
  <block id="f8ed537bd19062002074276a187e6a78" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードするときに 'system controller replace' コマンドを使用して 'node3 にある node2 の NAS データ LIF が node3 から node4 に再配置されていることを確認します</block>
  <block id="bc8355e3ba73925a2f4cf661fa66be6a" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードするときに 'system controller replace' コマンドを使用して 'node4 のオンボード FC ポート 'UTA/UTA2 ポート ' または UTA/UTA2 カードを設定します</block>
  <block id="48ec3f88b1540532a71a1bff492cf63b" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードするときに 'system controller replace' コマンドを使用して 'node2 で HA ペアを無効にし 'node1 をシャットダウンします</block>
  <block id="08ff55c299fd8105ff1d7a024f588b9a" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードするときに 'system controller replace' コマンドを使用して ' オンボード FC ポート 'UTA/UTA2 ポート ' または UTA/UTA2 カードをノード 3 に設定します</block>
  <block id="19742459913bf455e1f34dbda6e44b09" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードできるかどうかを確認するには 'system controller replace' コマンドを使用します</block>
  <block id="4c77267472cd5a012c12d7a0806f4b65" category="paragraph">元のシステムでサポートされるすべての定義済みアグリゲートのサイズとディスク数を確認する必要があります。次に、サポートされるアグリゲートサイズとディスク数を、新しいシステムでサポートされるアグリゲートサイズとディスク数と比較する必要があります。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> この情報がある Hardware Universe にリンクするには、次の手順を実行します。新しいシステムでサポートされるアグリゲートサイズとディスク数は、元のシステムでサポートされるアグリゲートサイズとディスク数以上であることが必要です。</block>
  <block id="e5e0987f6acee5e5d5ae72ab8928e424" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードした後で 'system controller replace' コマンドを使用して HA ペアを有効にし ' ノード 3 とノード 4 のストレージアクセスを確認し ' アグリゲートの所有権を確認します</block>
  <block id="679aeab1d22d4d8240be92e911cb16a4" category="doc">新しいコントローラが正しくセットアップされていることを確認します</block>
  <block id="5c004e4cd778be46f64bcf74109c107c" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードするときに 'system controller replace' コマンドを使用して MetroCluster 構成の正常性を確認し ' 正常に動作することを確認します</block>
  <block id="7495838c3a0836d1a2caef4024f4af0e" category="paragraph">Fabric MetroCluster 構成でアップグレードを開始する前に、 MetroCluster 構成の健全性をチェックして、正常に動作することを確認する必要があります。</block>
  <block id="4316c777785e82f7a78c696e8c493776" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードするときに 'system controller replace' コマンドを使用して ' ルート以外のアグリゲートと NAS データ LIF をノード 1 からノード 2 に移動し ' ノード 1 のリソースをノード 3 に移動します</block>
  <block id="f48d321f9a6be0abe9b9d0094dc62a63" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードするときに 'system controller replace' コマンドを使用して 'node3 と node4 をネットブートする準備をします</block>
  <block id="8749fd273c1ff3de22cc73e8f3a4e1fd" category="summary">ONTAP 9.8 以降を実行しているコントローラのアップグレードをサポートするために必要なリファレンスコンテンツおよび Web サイトは、「 system controller replace 」コマンドを使用して参照できます。</block>
  <block id="e8281ab8cf28639b54483c189cac4d56" category="summary">ONTAP 9.8 以降を実行しているコントローラで、 ARL を手動でアップグレードする際に、ノード 4 のインストールとノード 3 との通信を確認します。</block>
  <block id="16285c696d110c3e6ece1092e2680d1b" category="paragraph">node4 のインストールとブートの完了後、正しくインストールされていること、クラスタの一部であること、および node3 と通信できることを確認する必要があります。</block>
  <block id="de6503b8a7fac41c2c9719a0c8144a9a" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードする場合は、 SnapMirror 転送と SnapMirror 関係を再開します。</block>
  <block id="db3f9fca63856b4feb30f923ab1bd250" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードしたときに発生する可能性があるアグリゲートの再配置エラーのトラブルシューティングを行います。</block>
  <block id="92f11749596b34888281bb0c579c2d25" category="summary">ONTAP 9.8 以降を実行しているコントローラで、 ARL を手動でアップグレードする際に、ノード 4 のオンボード FC ポート、 UTA / UTA2 ポート、または UTA / UTA2 カードを設定します。</block>
  <block id="00b7688be7e2c70e950c77f4946b4705" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードする場合は、ノード 1 のクラスタネットワーク、管理、 FC ポート、および NVRAM システム ID に関する情報を記録します。</block>
  <block id="15d41a5d0f00f256b9567a9663dd77a0" category="paragraph">node2 から node3 にアグリゲートを再配置する前に、 node2 に現在ある node1 に属する NAS データ LIF を node2 から node3 に移動する必要があります。ノード 3 の SAN LIF も確認する必要があります。</block>
  <block id="252063b3bf913f5eba438170a10039e3" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードする場合のステージ 3 のプロセスシーケンス。</block>
  <block id="a54f5c2e2731f201663a2d288e5fec98" category="summary">ONTAP 9.8 以降を実行しているコントローラで、 ARL を手動でアップグレードする際に、 node1 の物理ポートが node3 に正しくマッピングされていることを確認します。</block>
  <block id="9dc287c462a550f7a777c45376221074" category="summary">ONTAP 9.8 以降を実行しているコントローラで、 ARL を手動でアップグレードする場合は、ノード 3 にあるノード 2 の NAS データ LIF をノード 4 に移動します。</block>
  <block id="9a345e333b9f909502e3b795f0eaa861" category="paragraph">ポートを node2 から node4 にマッピングしたあと、 node2 のアグリゲートを node3 から node4 に再配置する前に、 node3 の現在の node2 に所有されている NAS データ LIF を node3 から node4 に移動する必要があります。ノード 4 の SAN LIF も確認する必要があります。</block>
  <block id="5d49caed50d255b668dbd7e784fc3b12" category="summary">ONTAP 9.8 以降を実行する新しいコントローラを手順 使用して HA ペアのストレージコントローラを手動でアップグレードするかどうかを決定します。</block>
  <block id="867625d8a162da584d5c7633adccb4ae" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードする際に発生する可能性のある問題に関する情報。</block>
  <block id="ad475825ae83ecbd372fe679f99f127d" category="summary">ノードを準備して情報を収集し、 ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードする際に、すべてのクラスタノードがクォーラムにあることを確認する。</block>
  <block id="afe5b70a93730d0b136c0f9de3376f9e" category="summary">ONTAP 9.8 以降を実行しているコントローラでの手動 ARL アップグレード時に、 node2 のクラスタネットワーク、管理、 FC ポート、および NVRAM システム ID に関する情報を記録します。</block>
  <block id="ad7dc11f39fb32e1f4ba6e7e9644fdd2" category="summary">手動の ARL アップグレード手順 を使用して、 ONTAP 9.8 以降を実行するコントローラハードウェアをアップグレードし、ルート以外のアグリゲートの所有権を切り替えます。</block>
  <block id="a18ad921f7c87b8c08b808c84ff5bfe6" category="cell">ARL を使用した手動アップグレード</block>
  <block id="1124fb2cf4d1e4ab29aa545667f1d946" category="list-text">FAS システムから FAS システムへの移動</block>
  <block id="e083e9919602f31d35ef93e48f70d9cd" category="list-text">FlexArray 仮想化ソフトウェアまたは V シリーズシステムを搭載したシステムへの FAS システムの追加</block>
  <block id="0c3fa4233df158763903bac5cebd18a9" category="list-text">AFF システムから AFF システムへの移動</block>
  <block id="2880fc0b9a65eb57f0e8bad72d95374b" category="list-text">FlexArray 仮想化ソフトウェアまたは V シリーズシステムを使用する FAS システムにアレイ LUN がない場合、 FlexArray 仮想化ソフトウェアまたは V シリーズシステムを使用するシステム。</block>
  <block id="b6397dbdbee8f2b8989612e223d68e93" category="list-text">V シリーズシステムから FlexArray 仮想化ソフトウェアまたは V シリーズシステムを実行するシステムへの移動</block>
  <block id="a08819cb67238a1ec917f745d4de58c8" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードするには、特定のツールとドキュメントが必要です。</block>
  <block id="555d9e461a574dac83e9908b06022e17" category="summary">ONTAP 9.8 以降を実行しているコントローラでの手動 ARL アップグレード時に、オンボードの FC ポート、 UTA / UTA2 ポート、または UTA / UTA2 カードをノード 3 に設定します。</block>
  <block id="8574e7ef41a30c4af904d784b37c6958" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードする際に発生する可能性のある問題のトラブルシューティングを行います。</block>
  <block id="7311cf26cf7087361501590894ddf505" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードする場合のステージ 5 のプロセスシーケンス。</block>
  <block id="0623848243436b0f8821316dbca47636" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードしたあと、古いシステムが動作しなくなったことをネットアップに知らせてください。</block>
  <block id="54792986c9e5a9530740e9a8afba852a" category="summary">ONTAP 9.8 以降を実行しているコントローラで、 ARL を手動でアップグレードする場合は、ノード 2 の NAS データ LIF をノード 3 に移動します。</block>
  <block id="068f6c7dacb395036577acd9693c65a6" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードしたあとに、 MetroCluster 構成の無効なポートにある LIF を再同期します。</block>
  <block id="c6834152ce1c2fbdaa43b11fcc10df66" category="summary">ONTAP 9.8 以降を実行しているコントローラで、 ARL を手動でアップグレードする際に、内蔵ディスクドライブにルートアグリゲートまたはデータアグリゲートが含まれていないことを確認します。</block>
  <block id="8070da6181834e14d10ff6f0ce2d3e32" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードするための、第 1 段階のプロセスシーケンス。</block>
  <block id="c7e0e964f53b33937abf1f57a18eba93" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードする場合のステージ 6 のプロセスシーケンス。</block>
  <block id="f17d4647b6777b8ed14edf7798d3bfd3" category="summary">システムをネットブートする前に、 ONTAP 9.8 以降を実行するコントローラ上で ARL を手動でアップグレードする際に、すべての SnapMirror 関係を休止します。</block>
  <block id="118f7a6ae9a5d6b5cd8f73c4762b1730" category="summary">ONTAP 9.8 以降を実行しているコントローラで、 ARL を手動でアップグレードする際に、 node3 をインストールして ONTAP ソフトウェアをインストールします。</block>
  <block id="0ab011f256a7681c0f416b10a8407bed" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードする際にストレージ暗号化を設定する。</block>
  <block id="b85552635e2dd14cc0f1841daf296ac6" category="summary">ONTAP 9.8 以降を実行しているコントローラで、ステージ 2 、ステージ 3 、またはステージ 5 の ARL を手動でアップグレードしても LIF がオンラインにならない。</block>
  <block id="ec4374c74901037b92a2e0de7e3fe4a2" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードする場合は、 node2 の物理ポートが node4 に正しくマッピングされていることを確認します。</block>
  <block id="d30a32a5505fed77045c8a821e24f7ac" category="paragraph">node2 の物理ポートが node4 の物理ポートに正しくマッピングされていることを確認する必要があります。そうすれば、 node4 はクラスタ内の他のノードおよびアップグレード後のネットワークと通信できるようになります。</block>
  <block id="eda4ae83149e9e3dde696f5da917ea29" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードする場合のステージ 2 のプロセスシーケンス。</block>
  <block id="a6622ede89e2aa557c17c891098162c7" category="summary">必要に応じて、 ONTAP 9.8 以降を実行しているコントローラで、ストレージ暗号化を設定し、 SSL 証明書をインストールし、 ARL を手動でアップグレードする際にキー管理サーバをセットアップします。</block>
  <block id="51e89318188a5b34821d1b5e345bf2ac" category="summary">ONTAP 9.8 以降を実行しているコントローラペアの ARL の手動アップグレード手順 の仕組みを理解する。</block>
  <block id="d8c00530740b99a040c7fce14b2d9416" category="paragraph">ARL を使用してノードをアップグレードする前に、手順 の動作について理解しておく必要があります。このドキュメントでは、手順をいくつかの段階に分けて説明します。</block>
  <block id="1433583c5873e01cb7a40dde2f741701" category="cell"><block ref="1433583c5873e01cb7a40dde2f741701" category="inline-link-macro-rx"></block></block>
  <block id="7ee2694d6dd72c358b9bacb51138d622" category="cell"><block ref="7ee2694d6dd72c358b9bacb51138d622" category="inline-link-macro-rx"></block></block>
  <block id="9f55b2c6bdd91bd09bb98b2f6d719e11" category="cell"><block ref="9f55b2c6bdd91bd09bb98b2f6d719e11" category="inline-link-macro-rx"></block></block>
  <block id="b9f5938b7c0386c84e170336f5b6cd43" category="cell"><block ref="b9f5938b7c0386c84e170336f5b6cd43" category="inline-link-macro-rx"></block></block>
  <block id="25afcb36c56f8a2e55db2b3e27ef2d6d" category="cell"><block ref="25afcb36c56f8a2e55db2b3e27ef2d6d" category="inline-link-macro-rx"></block></block>
  <block id="90a1db05f56a5d5af857d5eccafd944e" category="cell"><block ref="90a1db05f56a5d5af857d5eccafd944e" category="inline-link-macro-rx"></block></block>
  <block id="c31caf6cbc86e9844fed547ba5d41897" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードする場合のステージ 4 のプロセスシーケンス。</block>
  <block id="9e03cd15ada28569caebd6918552def0" category="summary">ONTAP 9.8 以降を実行しているコントローラで、 ARL を手動でアップグレードする場合は、 node4 をインストールしてブートし、 ONTAP ソフトウェアをインストールします。</block>
  <block id="688d8385187bca5d36d85e0afd1ca1a8" category="summary">ONTAP 9.8 以降を実行しているコントローラの元のノードと新しいノードでタスクを実行することにより、アップグレードのために元のノードを手動で準備できます。</block>
  <block id="391e08617f92cd9108184ce8327560e2" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードする場合は、ノード 2 を正しくシャットダウンし、ラックまたはシャーシから取り外します。</block>
  <block id="000ffb8f7270dfe4b3ee36da16c47b89" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードする際には、特定の情報を収集します。</block>
  <block id="e0fe97fee5d48e893c74670b61264c13" category="summary">HA ペアを有効にし、 node3 と node4 にあるストレージアクセスを確認し、 ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードしたあとにアグリゲートの所有権を確認します。</block>
  <block id="4c00b803b6709d23e498ac9ee5baa935" category="summary">node2 に AutoSupport メッセージを送信し、 ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードする際に、 node2 の非ルートアグリゲートをノード 3 に手動で再配置します。</block>
  <block id="11ef6190ca83fe053ab04e945a3de360" category="paragraph">ノード 1 をノード 3 に交換する前に、 2 ノードクラスタの場合はノード 1 で所有されている NAS データ LIF をノード 2 に、クラスタに 3 つ以上のノードがある場合はノード 3 に移動する必要があります。使用する方法は、クラスタが NAS 用に設定されているか SAN 用に設定されているかによって異なります。</block>
  <block id="42ee6b32597aab87a0d5dd8e08490bfd" category="summary">ONTAP 9.8 以降を実行しているコントローラでは、ノード 2 と HA ペアを無効にし、 ARL を手動でアップグレードする際に、ノード 1 を正しくシャットダウンします。</block>
  <block id="e3840defa32fbb404cdcebd5c811d7d9" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレード手順 する方法を確認します。</block>
  <block id="0fcec0c5a8b41f8586360a7fd3f40d80" category="summary">ONTAP 9.8 以降を実行しているコントローラで、 ARL を手動でアップグレードする際に認証キーを管理するには、オンボードキーマネージャを使用します。</block>
  <block id="fd35edd14227b026dc566a7178c387d7" category="summary">ルート以外のアグリゲートをノード 1 からノード 2 に移動し、 ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードする際に再配置を確認します。</block>
  <block id="81d842dc6512a201e5ccc1816f833428" category="summary">ONTAP 9.8 以降を実行しているコントローラペアで ARL の手動アップグレード手順 を使用できるかどうかを確認します。</block>
  <block id="1e56bf3dedc43784dd2378dd828d3106" category="list-text">一部の ARL コントローラアップグレードでは、交換用コントローラの一時的なクラスタポートをアップグレードに使用できます。たとえば、 AFF A300 から AFF A400 システムにアップグレードする場合、 AFF A400 構成に応じて、 2 つのメザニンポートのいずれかを使用するか、 4 ポート 10GbE ネットワークインターフェイスカードを追加して一時的なクラスタポートを提供できます。一時的なクラスタポートを使用してコントローラのアップグレードを完了したら、交換用コントローラの 100GbE ポートにクラスタを無停止で移行できます。</block>
  <block id="20f9ffc49541e7095d1cdcdcdbacdc68" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードすると、システムがクラッシュする、リブート、パニック状態、または電源の再投入が発生する場合があります。</block>
  <block id="cf82606c547b81a04874bee6575b4863" category="summary">ONTAP 9.8 以降を実行しているコントローラで、 ARL を手動でアップグレードする際に、 node2 のルート以外のアグリゲートを node3 から node4 に再配置します。</block>
  <block id="c0ff48676f87627f73474db6b1018a88" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードする際に、 node3 と node4 をネットブートする準備をします。</block>
  <block id="14173ffe47c7c7e4971c06932a3084e2" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードする場合は、 KMIP サーバを使用して認証キーを管理します。</block>
  <block id="78bd6f667bd547c51374b0e978e9d001" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードする場合に必要な参照コンテンツと Web サイト。</block>
  <block id="635d2c71cec041685e4ff0c76bb3a669" category="summary">AFF A700 から AFF A900 へのアップグレード時に発生する可能性があるアグリゲートの再配置エラーのトラブルシューティング</block>
  <block id="2fd90d60a25deece3a4d5127856e8967" category="summary">ARL 手順 を使用して AFF A700 を AFF A900 にアップグレードするかどうかを決定します。</block>
  <block id="c08f0b6d71108219929095cbd90d111d" category="paragraph">この手順 は、次の状況で使用します。</block>
  <block id="eb51502469d00e14522e17bfff4124ad" category="list-text">新しいコントローラを新しい HA ペアとしてクラスタに追加し、ボリューム移動を使用してデータを移行する必要はありません。</block>
  <block id="a3bad37bbfc8cbb39ebdfc42ccfa6bec" category="list-text">ONTAP の管理経験があり、 diagnostic 権限モードで作業する場合のリスクが十分にあります。</block>
  <block id="9cc6fc2f026195efe30da793b04e5bd0" category="paragraph">Do * not * この手順 は、次の状況で使用します。</block>
  <block id="d94e9d7914bbd98510d8cb9e0a6d08b1" category="list-text">クラスタインターコネクトストレージとイーサネット接続ストレージに共有スイッチを使用している。</block>
  <block id="c79acf75c7bb6af7f11f0d260b4152eb" category="paragraph">Fabric MetroCluster または MetroCluster IP 設定のアップグレードについては、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> MetroCluster アップグレードおよび Expansion コンテンツにリンクするには、次の手順を実行します。</block>
  <block id="4aa5a5226abeed57a9e86a4cdbd74335" category="summary">必要に応じて、ストレージ暗号化を設定し、 SSL 証明書をインストールし、 AFF A700 から AFF A900 へのアップグレード時にキー管理サーバをセットアップします。</block>
  <block id="4f3a160a50e4c72a6659dc7b565b7b99" category="summary">AFF A700 を AFF A900 にアップグレードする際、システムがクラッシュする（リブート、パニック状態、電源再投入のいずれか）場合があります。</block>
  <block id="af18adb321560258c2b9a80d2757792a" category="paragraph">アップグレードの各段階で、システムがクラッシュする（リブート、パニック状態、または電源の再投入）場合があります。</block>
  <block id="c7fc4caaca02af86d84b04f258dfd7e6" category="paragraph">node2 はテイクオーバーしませんが、ルート以外のすべてのアグリゲートから引き続きデータを提供しています。</block>
  <block id="aceac87ad181071fb431ae2fdb715377" category="summary">AFF A700 から AFF A900 へのアップグレード中に、ノード 2 のルート以外のアグリゲートをノード 1 に再配置します。</block>
  <block id="295aeb05b88224ae18df0d9c12e9931d" category="summary">対応する AFF A900 ノード 1 のコントローラモジュールと NVRAM モジュールをスワップしたら、ノード 1 をネットブートする必要があります。</block>
  <block id="7e3345ca183a02251269d1034b280331" category="list-text">node1 の LOADER プロンプトで、 node1 の「 partner-sysid 」を確認します。</block>
  <block id="042fc0ffc4af15d2e8abcf37fd293475" category="summary">AFF A700 から AFF A900 へのアップグレード時に、ノードを準備して一連の事前確認を実行します。</block>
  <block id="8a4f2711fdfcfeea79b7fe0124a6d453" category="list-text">「 y 」を選択します。次の出力が表示されます。</block>
  <block id="eeb3813f1d9a188e4d0a912235894f96" category="cell">クラスタ内のすべてのノードが正常であることを確認します。</block>
  <block id="f1e3d153ef84dd8b3cbde456e0a2bf74" category="cell">交換する両方のノードがハイアベイラビリティ（ HA ）ペア構成になっているかどうかを確認します。コントローラでストレージフェイルオーバーが有効になっていない場合、タスクは失敗します。</block>
  <block id="bb4d829c636efdbd9439e118a1e840cb" category="cell">AutoSupport 通知が設定されていないと、タスクは失敗します。コントローラの交換用手順 を開始する前に、 AutoSupport を有効にする必要があります。</block>
  <block id="48536e8deacb601a8be0bcd336b79e32" category="list-text">コントローラの交換処理が開始されて事前確認が完了すると、処理が一時停止し、コントローラのアップグレードプロセスの後半で必要になる可能性がある出力情報を収集できます。</block>
  <block id="057d1f92125d6fed46d8a437e75f2b3d" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> to link to the _NetApp Support Site_where you can obtain new 2-character license keys for 9.10.1 or lat9.キーは、 _ ソフトウェアライセンス _ の _ マイサポート _ セクションにあります。必要なライセンスキーがサイトにない場合は、ネットアップの営業担当者にお問い合わせください。</block>
  <block id="335297ca0968f54cf197ca66bb052387" category="summary">AFF A700 から AFF A900 ARL コントローラへの手順 のアップグレードの仕組みを理解します。</block>
  <block id="8e588b362fa6e77faa0431bb51b2e5d6" category="summary">部分的に自動化された ARL 手順 を使用して、 AFF A700 を AFF A900 にアップグレードします。</block>
  <block id="5d0e6c628fa55718654de0f71041a32a" category="summary">AFF A700 のコントローラハードウェアを AFF A900 にアップグレードするには、コントローラモジュールと NVS を交換します。</block>
  <block id="1c962f08f92ca556b5f958f512421f7b" category="cell">AFF A700 から AFF A900 へ</block>
  <block id="addb9e70976c2f94b8ccfc3736a31888" category="list-title">重要な情報</block>
  <block id="06e8f251b536b4b0a7af95aa92a37415" category="summary">AFF A900 コントローラモジュールと NVRAM モジュールを使用して、 node2 のインストールを確認します。</block>
  <block id="1ed68b1a1c4717bcf9913f481374e7de" category="admonition">この手順 では、 VLAN 、 ifgrp 、およびブロードキャストドメインのセクションの再作成が、 node2 で _ ネットワーク設定の名前が _Restore に変更されています。</block>
  <block id="550d4b66b2a123c0592e264de6261a21" category="paragraph">上記の例では、コントローラの交換後に node2 がブートし、クォーラムに参加しています。到達可能性のない複数のポートがあり、到達可能性スキャンを保留しています。</block>
  <block id="b09281cc619dc5d9e8148aef71038fcd" category="paragraph">上記の例に示すように、ポートの到達可能性ステータスが、現在配置されているブロードキャストドメインの到達可能性ステータスと異なる場合があることを示す警告メッセージが表示されます。ポートと回答 'y' または 'n' の接続を適宜確認します</block>
  <block id="5267f49248b15741904ddac0a8c8a79a" category="list-text">次の手順に従って、リストアが必要な SVM および LIF のホームポートがある場合は、それらを指定して LIF のホームポートをリストアします。</block>
  <block id="e57d7ba8fb9b97ff4cc0b7b8c4a0b876" category="summary">AFF A900 コントローラモジュールと NVRAM モジュールで node2 をブートします。</block>
  <block id="939b677a0e4df037cd999a739cd94317" category="paragraph">上記の例のシステム ID は一例です。アップグレードするノードの実際のシステム ID は異なります。</block>
  <block id="5952acedcc143d30a19364d245887b58" category="paragraph">プロンプトでノード名を入力するかログインプロンプトを表示するまで、ノードが数回リブートして環境変数をリストアし、システムのカードでファームウェアを更新し、他の ONTAP 更新を実行します。</block>
  <block id="4cc41ac3ff89b0e0d88cacedf58eb50d" category="summary">AFF A900 にアップグレードしたあと、古いシステムが動作しなくなったことをネットアップに知らせてください。</block>
  <block id="8a0b39942bdb20d83fc11a2c0940f45d" category="summary">ARL コントローラ手順 のアップグレード時の AFF A900 NVRAM モジュールとコントローラモジュールのインストール手順</block>
  <block id="a7b5ccf02bd0f6b23fc889ebb5354dbc" category="paragraph">接地対策がまだの場合は、自身で適切に実施します。</block>
  <block id="3d6ee5006b58007aa6b243ac902837ac" category="list-text">NVRAM モジュールをスロット 6 のシャーシ開口部の端に合わせます。</block>
  <block id="a8ad32b9b5381f0e3f1c5897679ae7eb" category="list-text">NVRAM モジュールをスロットにそっと挿入し、文字と数字が記載された I/O カムラッチを上に押して NVRAM モジュールを所定の位置にロックします。</block>
  <block id="254d1495a725edffc2f7c4eb5441615a" category="admonition">あとで手順 で指示があるまで、コントローラモジュールをシャーシに完全に挿入しないでください。</block>
  <block id="e16c4744183a5e672dc0a8f50d7250d6" category="admonition">シャーシはすでに電源がオンになっているため、完全に装着されるとすぐに node2 がブートを開始します。node2 のブートを避けるため、コントローラモジュールをスロットに完全に挿入する前に、コンソールケーブルと管理ケーブルを node2 のコントローラモジュールに接続することを推奨します。</block>
  <block id="ea842e0d624cb37b7d5b336f29a0aa73" category="admonition">コネクタの破損を防ぐため、コントローラモジュールをシャーシに挿入する際に力を入れすぎないようにしてください。</block>
  <block id="d9f54add7d47cd87694cd3f82ac8b56b" category="list-text">自動ブートを中断すると、 node2 で LOADER プロンプトが停止します。ブートを中断せずに node2 でブートが開始された場合は、プロンプトが表示されるまで待ち、 * Ctrl+C * を押してブートメニューに進みます。ノードがブートメニューで停止したら、オプション「 8 」を使用してノードをリブートし、リブート中に自動ブートを中断します。</block>
  <block id="1b829ba4059a871e329472e665878ce0" category="summary">AFF A700 から AFF A900 へのアップグレード中に、 SnapMirror 転送と SnapMirror 関係を再開します。</block>
  <block id="0a3b7a3d7928584d593ce11f1af70bda" category="summary">AFF A700 から AFF A900 へのアップグレード時に、ノード 1 上のノード 2 の NAS データ LIF がノード 1 からノード 2 に再配置されたことを確認します。</block>
  <block id="8ab86d38fbb9b5285e479977ebd1e54a" category="summary">AFF A700 から AFF A900 へのアップグレード時に、ステージ 2 、ステージ 3 、またはステージ 5 で LIF がオンラインにならない。</block>
  <block id="dcee0f9120fab3d583542a733afb5a2b" category="summary">必要に応じて、 AFF A700 から AFF A900 へのアップグレード時に、アップグレードした node1 でキー管理ツールの設定をリストアします。</block>
  <block id="44890d8a50a99cc721d8e6b9108090d8" category="summary">AFF A700 から AFF A900 へのアップグレード中に発生する可能性がある問題に関する情報。</block>
  <block id="35a64ad1fda866c93344667a7d6195db" category="summary">AFF A700 から AFF A900 へのアップグレード中に発生する可能性のある障害のトラブルシューティング。</block>
  <block id="a49504d8b75dfd4cf79a0dd8adceb34b" category="summary">ストレージ暗号化の設定と管理、認証キーの管理、および AFF A700 から AFF A900 へのアップグレード時の SnapMirror 関係の休止</block>
  <block id="2ed045fa4ee3544c7e5a632a26d55b9f" category="paragraph">ONTAP 9.10.1 以降では、 Key Management Interoperability Protocol （ KMIP ）サーバを使用して認証キーを管理できます。</block>
  <block id="d6e5bd10c189e61f84f78c2d2c5d7fa3" category="summary">必要に応じて、 AFF A700 から AFF A900 へのアップグレード時に、 node2 にキー管理ツールの設定をリストアします。</block>
  <block id="b8083dfb29da686812e3bafb3a73f823" category="summary">AFF A700 から AFF A900 へのアップグレード時に、 node2 をシャットダウンしてラックまたはシャーシから取り外します。</block>
  <block id="edb3af1551b6e96be7f9b204f3cec480" category="summary">AFF A700 から AFF A900 へのアップグレード中に、障害が発生したアグリゲートの再配置または拒否されたアグリゲート。</block>
  <block id="d1f8c09926e8e53bc0799e4043d1af79" category="summary">AFF A900 コントローラモジュールと NVRAM モジュールを使用して、ノード 1 の設置を確認します。</block>
  <block id="e373d02f1761d14eafc408b260c8b7da" category="admonition">この手順 では、 VLAN 、 ifgrp 、およびブロードキャストドメインのセクション _ が、 node1 で _ ネットワーク設定のリストア _ という名前に変更されています。</block>
  <block id="d51b3938c62e269961f6447fa716fc1f" category="paragraph">上記の例では、コントローラの交換後にノード 1 がブートしています。物理的に接続されていないため、一部のポートに到達できません。「 OK 」以外の到達可能性ステータスのポートはすべて修復する必要があります。</block>
  <block id="5e6358f28b34aeff7c31a849cd71090e" category="summary">AFF A700 から AFF A900 へのアップグレードを実行するには、特定のツールとドキュメントが必要です。</block>
  <block id="d72e37445f435123c47c01a1bd03271c" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> このアップグレードに必要な参照ドキュメントおよび参照サイトのリストにアクセスするには、次の手順を実行します。</block>
  <block id="b2d1e6982a7161543252f06b3304ae95" category="summary">アップグレードを開始する前に、 AFF A700 から AFF A900 へのアップグレードに適したハードウェアがあることを確認します。</block>
  <block id="b17a59560ebfb087ad44c6322178e9e4" category="summary">node2 で HA ペアを無効にし、 AFF A700 から AFF A900 へのアップグレード中にノード 1 をシャットダウンします。</block>
  <block id="eedd3589e87e21a342b71fbe4c46b471" category="paragraph">この段階で、 node1 は停止し、すべてのデータが node2 によって提供されます。ノード 1 とノード 2 は同じシャーシに搭載されており、同じ電源装置のセットから電力が供給されているため、シャーシの電源をオフにしないでください。node1 コントローラモジュールと node1 NVRAM モジュールのみを削除するように注意する必要があります。通常、 node1 はコントローラ A で、システム背面からコントローラを見るときにシャーシの左側に配置されます。コントローララベルは、シャーシのコントローラモジュールのすぐ上にあります。</block>
  <block id="0857dbdec564e89c1ed34a571bb8af41" category="list-text">NVRAM モジュールのロックを解除して、 node1 のスロット 6 から取り外します。</block>
  <block id="646ac9208401ea9c6c2afc14b196cad5" category="paragraph">NVRAM モジュールがシャーシから外れ、数インチ移動します。</block>
  <block id="ca401bca71da68589a6c9f6ae6d2abdf" category="list-text">NVRAM モジュール前面の両側にあるプルタブを引いてモジュールをシャーシから取り外します。</block>
  <block id="1ade29bb16a89d6eb1ac0378b26d08cc" category="image-alt">NVRAM モジュールを取り外します</block>
  <block id="5d555500d4c58002388a7088e1c8f510" category="image-alt">NVRAM モジュールを取り付けます</block>
  <block id="a93447d104277da61e99f98be3016581" category="list-text">コントローラモジュールの端をシャーシの開口部に合わせ、コントローラモジュールをシステムに半分までそっと押し込みます。</block>
  <block id="8c3e973bd184c686de74d4c99763571c" category="admonition">手順 の後半で指示があるまでコントローラモジュールをシャーシに完全に挿入しないでください。</block>
  <block id="e4d9396571178474bbad7e96ad3d6ebb" category="admonition">シャーシの電源はすでにオンになっているため、 node1 では BIOS の初期化が開始され、完全に装着されるとすぐに AUTOBOOT が開始されます。ノード 1 のブートを中断するには、コントローラモジュールをスロットに完全に挿入する前に、シリアルコンソールケーブルと管理ケーブルをノード 1 のコントローラモジュールに接続することを推奨します。</block>
  <block id="a7b2214a170507e43e239d129ff056bd" category="image-alt">コントローラモジュールを取り付けます</block>
  <block id="79ba196960d086bc934b5c973394f991" category="list-text">自動ブートを中断すると、 node1 で LOADER プロンプトが停止します。ブートを中断せずに node1 でブートが開始された場合は、プロンプトが表示されるまで待ち、 * Ctrl+C * を押してブートメニューに進みます。ノードがブートメニューで停止したら、オプション「 8 」を使用してノードをリブートし、リブート中に自動ブートを中断します。</block>
  <block id="5c29a1b28ae2f684e62d4c2276e7e8e6" category="summary">対応する AFF A900 node2 コントローラモジュールと NVRAM モジュールをスワップしたら、ネットブートが必要になることがあります。</block>
  <block id="de9f7d5e1d4c04a6ec4f1097d1a1a241" category="summary">ARL を使用して AFF A700 を AFF A900 にアップグレードできるかどうかを確認します。</block>
  <block id="253fd57a6c2965ca518ebbfc6bf1e7cc" category="paragraph">コントローラのアップグレード中に問題が発生した場合は、を参照してください <block ref="8b711d7eff849b62a32d0b2d66f85a6c" category="inline-link-macro-rx"></block> 詳細および解決策については、手順の末尾にあるセクションを参照してください。</block>
  <block id="62685a7763bc1abddb93a736f4149d3a" category="summary">HA ペアが有効になっていることを確認し、ノード 1 とノード 2 のストレージアクセスと LIF を確認し、 AFF A700 を AFF A900 にアップグレードしたあとにアグリゲートの所有権を確認します。</block>
  <block id="30dfb9ed789b89ce66132f0084fdfe74" category="paragraph">正しいセットアップを確認するには、 HA ペアが有効になっていることを確認する必要があります。さらに、 node1 と node2 が相互のストレージにアクセスできること、およびクラスタ上の他のノードに属するデータ LIF を所有していないことを確認する必要があります。また、すべてのデータアグリゲートが正しいホームノードにあり、両方のノードのボリュームがオンラインであることを確認する必要があります。新しいノードの 1 つにユニファイドターゲットアダプタがある場合は、ポート設定をすべてリストアする必要があり、場合によってはアダプタの使用方法の変更が必要になることがあります。</block>
  <block id="6e7e19ae8357eafafb5df9d5e403d692" category="paragraph">でキャプチャした出力と比較できます <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block> セクション。</block>
  <block id="7bd08b5c3a9e3849e82a1fef790d117b" category="summary">AFF A900 コントローラモジュールと NVRAM モジュールでノード 1 をブートします。</block>
  <block id="74d87258605a34730c51b53265d130eb" category="summary">ルート以外のアグリゲートと NAS データ LIF をノード 1 からノード 2 に移動し、 AFF A700 から AFF A900 へのアップグレード時にノード 1 のリソースをリストアします。</block>
  <block id="fa5b7598ff79398479188d836810f48d" category="summary">AFF A700 から AFF A900 へのコントローラアップグレードをサポートするために必要な参考資料や Web サイト。</block>
  <block id="395efc410823d3328f70ddb736016f0b" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用してアップグレードするときに 'node4 が定足数に参加し 'node1 の VLAN ' インタフェースグループ ' ブロードキャストドメインを再作成し ' キー管理ツールの構成を復元することを確認します</block>
  <block id="3a042ad216541ed5571bc523ce7be6e9" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードすると発生する可能性がある ' アグリゲートの再配置の失敗をトラブルシューティングします</block>
  <block id="42e450405147e2d982e3ee23f816c41d" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードするために 'ARL を使用するかどうかを決定します</block>
  <block id="ede3b35f81b4dfeb75a51603faaeab49" category="paragraph">[[sys_commands _95_97_supported_systems] コントローラのアップグレードでサポートされるモデルマトリックスを次の表に示します。</block>
  <block id="420f089c59b13f4ed4d58044848ec2ea" category="summary">ONTAP 9.5 から 9.7 までのコントローラでは、 system controller replace コマンドを使用して、 ARL アップグレードのステージ 3 プロセスシーケンスを実行します。</block>
  <block id="9b12fafa5a8b1307615caadc9be2c552" category="summary">ONTAP 9.5 を実行しているコントローラを 9.7 にアップグレードするときに 'system controller replace' コマンドを使用して 'node1 の物理ポートが node3 に正しくマッピングされていることを確認します</block>
  <block id="aef0be345c19587a34b9e9c1f46f47df" category="paragraph">node1 の物理ポートが node3 の物理ポートに正しくマッピングされていることを確認する必要があります。これにより、 node3 はクラスタ内の他のノードおよびアップグレード後にネットワークと通信できるようになります。</block>
  <block id="338ae3df649b35bcf4689799c5b1dcbd" category="list-text">[[auto_map_3_step5] クラスタ LIF とノード管理 / クラスタ管理 LIF をホストするブロードキャストドメインを調整します。各ブロードキャストドメインに正しいポートが含まれていることを確認します。ポートをホストしているブロードキャストドメイン間や LIF のホームになっているブロードキャストドメイン間で移動することはできないため、 LIF を移行して変更する必要がある場合があります。</block>
  <block id="1720b41605d0d1a79ed1cb1a0959412f" category="summary">必要に応じて 'system controller replace' コマンドを使用して ONTAP 9.5 を実行するコントローラを 9.7 にアップグレードするときに ' ストレージ暗号化を構成し 'SSL 証明書をインストールし ' キー管理サーバをセットアップします</block>
  <block id="8a1eac7b4b9f373d43688bdcb5d8a9f4" category="summary">ステージ 5 では、 ONTAP 9.5 を実行しているコントローラを 9.7 にアップグレードする際に、 system controller replace' コマンドを使用して、新しいノードがクォーラムに参加することを確認します。</block>
  <block id="215f34c9b7ea66107f2934a873870db6" category="paragraph">新しいコントローラが搭載されたノードがブートし、最初にクラスタへの追加を試みます。ただし、新しいノードのネットワークポートセットが異なる場合は、次の手順を実行して、ノードがクォーラムに正常に追加されたことを確認する必要があります。</block>
  <block id="669ad894cec0c80472a9d916837015cd" category="list-text">クラスタ LIF とノード管理 / クラスタ管理 LIF をホストしているブロードキャストドメインを調整します。各ブロードキャストドメインに正しいポートが含まれていることを確認します。ポートをホストしているブロードキャストドメイン間や LIF のホームになっているブロードキャストドメイン間で移動することはできないため、 LIF を移行して変更する必要がある場合があります。</block>
  <block id="bbd7c8e76a5f5fdedf0347fb039be29b" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードすると ' システムがクラッシュする（再起動 ' パニック ' または電源再投入）場合があります</block>
  <block id="3f6f16a78016b56c0e77c36d698dc890" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードする場合 ' ノード 2 の VLAN ' インターフェイスグループ ' およびブロードキャストドメインをノード 4 に再作成します</block>
  <block id="94ea383bd9faf0b55ef913f5a592de45" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードする場合 ' Config Advisor ツールを使用して一般的な構成エラーをチェックします</block>
  <block id="bf0c95f7e92a0bc6e46bfc9664dcb9ee" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードする場合は ' ノードを準備し ' 一連の事前チェックを実行します</block>
  <block id="e72db50041db5f66f874d026ca76e267" category="summary">ステージ 3 では、 ONTAP 9.5 を実行しているコントローラを 9.7 にアップグレードする際に、 system controller replace' コマンドを使用して、新しいノードがクォーラムに参加することを確認します。</block>
  <block id="0b77e44524dea6328841f8f4038b5490" category="summary">「 system controller replace 」コマンドを使用して、 ONTAP 9.5 を実行するコントローラを 9.7 にアップグレードする手順 の動作を理解します。</block>
  <block id="d06e5a4b4321a973665eb5bf9239cbfa" category="cell"><block ref="d06e5a4b4321a973665eb5bf9239cbfa" category="inline-link-macro-rx"></block></block>
  <block id="ffd40624ae18e36b15ccf2019794cb82" category="summary">部分的に自動化された ARL 手順 を使用して、 ONTAP 9.5 を実行するコントローラを 9.7 にアップグレードします。</block>
  <block id="40c0ce675eccb4fa798e15a265bca17b" category="paragraph">手動での作業は複雑で時間がかかりましたが、この簡易化された手順 では、アグリゲートの再配置を使用してコントローラの更新を実装できます。これにより、 HA ペアの無停止アップグレードをより効率的に実行できます。特に、検証、情報収集、および事後チェックに関連する手動手順は大幅に少なくなります。</block>
  <block id="3926b0a999f25273c8f07ee812e70656" category="summary">ONTAP 9.5 を実行しているコントローラハードウェアは、 system controller replace コマンドを使用してルート以外のアグリゲートの所有権を切り替え、 9.7 にアップグレードできます。</block>
  <block id="d272b28cc3a53d512c32ecaa4766dcac" category="cell"><block ref="d272b28cc3a53d512c32ecaa4766dcac" category="inline-link-macro-rx"></block></block>
  <block id="30aa9bb24bfe925d6ba56ded6afe2ad8" category="list-text">この手順は複雑で、 ONTAP の高度な管理スキルがあることを前提としています。また、内容を読んで理解しておく必要があります <block ref="4839d43871fe29773e86f5cefcab0e32" category="inline-link-macro-rx"></block> および <block ref="57e14e08755134bb6fef9ad899bb58ee" category="inline-link-macro-rx"></block> アップグレードを開始する前に、</block>
  <block id="a6f1d58c4c38c1ac76cd5929e302f723" category="summary">system controller replace' コマンドを使用して ONTAP 9.5 を実行しているコントローラを 9.7 にアップグレードする場合 ' ノード 3 がクォーラムに参加していることを確認し ' ノード 1 の VLAN ' インタフェースグループ ' ブロードキャストドメインを再作成し ' キー管理ツールの設定をリストアします</block>
  <block id="78aa9f6ca8694cb7b323d2526d948f87" category="summary">ONTAP 9.5 から 9.7 までのコントローラでは、 system controller replace コマンドを使用して、 ARL アップグレードのステージ 5 プロセスシーケンスを実行します。</block>
  <block id="1351d313beb812092d972c23cec0b57c" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードした後 ' 古いシステムが動作しなくなったことをネットアップに知らせてください</block>
  <block id="8fea7f8f2aa77d6e25d74f8f9417cb26" category="summary">ONTAP 9.5 から 9.7 までを実行しているコントローラでは、 system controller replace コマンドを使用して、 ARL アップグレードのステージ 1 プロセスシーケンスを実行します。</block>
  <block id="7588408bbfed0416d38b98777ec4d4bc" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードする場合は 'SnapMirror 転送と SnapMirror 関係を再開します</block>
  <block id="f9a53f6aba05deaa27f5f6d716227ad2" category="summary">ONTAP 9.5 から 9.7 までを実行しているコントローラでは、 system controller replace コマンドを使用して、 ARL アップグレードのステージ 6 プロセスシーケンスを実行します。</block>
  <block id="ada0af4bbf1b59e059dc781cf36c82cc" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードする場合は 'node3 をインストールして ONTAP ソフトウェアをインストールします</block>
  <block id="c37bf7d69be3ef164548ad69632832f9" category="summary">ONTAP 9.5 を実行しているコントローラを 9.7 にアップグレードするときに 'system controller replace' コマンドを使用して MetroCluster 構成のスイッチオーバー ' 修復 ' スイッチバック操作を確認します</block>
  <block id="978d52de83719de8bea4a1105fd0daa2" category="summary">ONTAP 9.5 を実行しているコントローラを「 system controller replace 」コマンドを使用して 9.7 にアップグレードすると、ステージ 2 、ステージ 3 、またはステージ 5 で移行後に LIF がオンラインにならなくなります。</block>
  <block id="00c13e2880f6565acea9eb7b236ffe2a" category="summary">ONTAP 9.5 を実行しているコントローラを 9.7 にアップグレードするときに 'system controller replace' コマンドを使用して 'node2 の物理ポートが node4 に正しくマッピングされていることを確認します</block>
  <block id="964ab85547edd708f3257e13df3d6e86" category="paragraph">node2 の物理ポートが node4 の物理ポートに正しくマッピングされていることを確認する必要があります。これにより、 node4 はクラスタ内の他のノードと通信し、アップグレード後にネットワークと通信できるようになります。</block>
  <block id="46368d1701ab9df4e7d43f073608faac" category="list-text">[[auto_map_4_Step5] クラスタ LIF およびノード管理 / クラスタ管理 LIF をホストしているブロードキャストドメインを調整します。各ブロードキャストドメインに正しいポートが含まれていることを確認します。ホストしているブロードキャストドメイン間または LIF がホームにあるブロードキャストドメイン間でポートを移動することはできないため、次の手順に示すように、 LIF を移行して変更しなければならない場合があります。</block>
  <block id="8c50cd8a05046fd9b1080cf4c1c27c2f" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードする場合は ' ノード 2 のルート以外のアグリゲートをノード 3 に移動します</block>
  <block id="d4d00d4138cf6f836ff018cfa7c86bf5" category="summary">ONTAP 9.5 から 9.7 までを実行しているコントローラでは、 system controller replace コマンドを使用して、 ARL アップグレードのステージ 2 プロセスシーケンスを実行します。</block>
  <block id="f39c9cd1dd9ad5474e1bf04afc11ae3b" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードするときに発生する可能性がある問題に関する情報</block>
  <block id="61bde87b9b52e5308c77a1e67f8e306c" category="summary">ONTAP 9.5 から 9.7 までのコントローラでは、 system controller replace コマンドを使用して、 ARL アップグレードのステージ 4 プロセスシーケンスを実行します。</block>
  <block id="e95bcc2b27fdb0dc0398231cab6f5973" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードすると発生する可能性のある障害のトラブルシューティングを行います</block>
  <block id="a1a36272d536128d8f8b47f1e4a0a0c7" category="summary">ONTAP 9.5 を実行しているコントローラを 9.7 にアップグレードする場合は 'system controller replace' コマンドを使用して ' ストレージ暗号化の構成と管理 ' 認証キーの管理 ' および SnapMirror 関係の休止を行います</block>
  <block id="14e89b35ebfcce3b97d4642f23842015" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードする場合は 'node4 をインストールし ' ONTAP ソフトウェアをインストールします</block>
  <block id="42b71ea88832319c6f3f7818996dd5aa" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードする場合は 'node2 をシャットダウンしてラックまたはシャーシから取り外します</block>
  <block id="9415404d53d7363f16891e644c2747f0" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードするときに ' 失敗したアグリゲートまたは拒否されたアグリゲートを手動で再配置します</block>
  <block id="1c49656a31f8508554999a7e7b253c6e" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードするには ' 特定のツールとマニュアルが必要です</block>
  <block id="ceb540e1a706eaef05047a7ec692cfe0" category="paragraph">ノード 4 のインストールの確認が完了し、ノード 3 からノード 4 にアグリゲートを再配置する前に、現在ノード 3 にある node2 に属する NAS データ LIF をノード 3 からノード 4 に移動する必要があります。また、ノード 4 に SAN LIF が存在することを確認する必要があります。</block>
  <block id="80e8c2a2fa9780cacd2817fdd9d5f491" category="list-text">次の手順を実行して、ノード 4 の正しいポートに SAN LIF があることを確認します。</block>
  <block id="6e221a4092f4a8a2601852d703a03630" category="admonition">リンク速度が元のポートと同じポートに SAN LIF を移動していることを確認する必要があります。</block>
  <block id="31185fb85292c7e722f79c9b5cb9cdde" category="paragraph">ノード 3 のインストールを確認し、 node2 から node3 にアグリゲートを再配置する前に、 node2 に現在あるノード 2 に属する NAS データ LIF を node2 から node3 に移動する必要があります。また、ノード 3 に SAN LIF が存在することも確認する必要があります。</block>
  <block id="0baae1538e3c38431027896976d50f54" category="admonition">SAN LIF を、元のポートとリンク速度が同じポートに移動したことを確認する必要があります。</block>
  <block id="7625a2790853e03d706fd2e8a29fb7ba" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードする場合は 'node4 オンボード FC ポート 'UTA/UTA2 ポート ' または UTA/UTA2 カードを設定します</block>
  <block id="3ab0e6df482466ba6428f0535b2e2564" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードする場合は 'node2 で HA ペアを無効にし 'node1 をシャットダウンします</block>
  <block id="1609725c89da712556fac3c5249a458a" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードする場合は ' オンボード FC ポート 'UTA/UTA2 ポート ' または UTA/UTA2 カードを node3 に設定します</block>
  <block id="e9dcea61d06851c722ca01cdb7268d58" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードできるかどうかを理解します</block>
  <block id="43923762f381f72122bd69468cc63234" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用してアップグレードした後 'HA ペアを有効にし ' ノード 3 とノード 4 のストレージアクセスを確認し ' アグリゲートの所有権を確認します</block>
  <block id="62e4a54209a0f0d1e5c6fb2d5ee8bd8d" category="summary">ONTAP 9.5 を実行しているコントローラを 9.7 にアップグレードする場合は、「 system controller replace 」コマンドを使用して、ルート以外のアグリゲートと NAS データ LIF をノード 1 からノード 2 に移動し、ノード 1 のリソースをノード 3 に移動します。</block>
  <block id="f66ca97a9759a1c8137dce34fe1c3e90" category="paragraph">この処理は、タスクの開始時にすでに一時停止されている必要があります。手動で再開する必要があります。</block>
  <block id="0d38ae98eaaae2959f4bd622e0d268c5" category="summary">ONTAP 9.5 を実行しているコントローラを 9.7 にアップグレードするときに 'system controller replace' コマンドを使用して MetroCluster 構成の正常性を確認し ' 正常に動作することを確認します</block>
  <block id="3485cf38a64932bd6b396eabcf079454" category="summary">「 system controller replace 」コマンドを使用して ONTAP 9.5 を実行するコントローラを 9.7 にアップグレードするときに、ルート以外のアグリゲートと NAS データ LIF をノード 1 からノード 2 に移動し、ノード 1 のリソースをノード 3 に移動します。</block>
  <block id="767ebec2859c7f997386a7679698edb4" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードする場合は ' ノード 3 とノード 4 をネットブートする準備をします</block>
  <block id="16d19daed45f3be78bc9bea63100bb72" category="summary">ONTAP 9.5 を実行するコントローラのアップグレードをサポートするために必要なリファレンスコンテンツと Web サイトは、「 system controller replace 」コマンドを使用して提供されます。</block>
  <block id="a75b900055b8766dbb250e1d95a6b610" category="cell"><block ref="a75b900055b8766dbb250e1d95a6b610" category="inline-link-macro-rx"></block></block>
  <block id="054dcc71a9397a2cddfbf9b907aea5ed" category="summary">ONTAP 9.7 以前を実行しているコントローラで、 ARL を手動でアップグレードする際に、ノード 4 のインストールとノード 3 との通信を確認します。</block>
  <block id="0e472afa239c2cd65ab6d08bdaa80dff" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする場合は、 SnapMirror 転送と関係を再開します。</block>
  <block id="b4828d73e6a54a557f1d9c688f9afada" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする際に発生する可能性があるアグリゲートの再配置エラーのトラブルシューティングを行います。</block>
  <block id="8dc470d3ebc8fcb9ed95d55471e7303a" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする際に、ノード 4 のオンボード FC ポート、 UTA / UTA2 ポート、または UTA / UTA2 カードを設定します。</block>
  <block id="2dc65c1b8b8821ab351c5b9fd3ab2b97" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする場合は、ノード 1 のクラスタネットワーク、管理、 FC ポート、および NVRAM システム ID に関する情報を記録します。</block>
  <block id="04a9af523510dc4b38fa46c583f9e00f" category="paragraph">ノード 3 のインストールを確認し、 node2 から node3 にアグリゲートを再配置する前に、 node2 に現在あるノード 2 に属する NAS データ LIF を node2 から node3 に移動する必要があります。ノード 3 の SAN LIF も確認する必要があります。</block>
  <block id="e7ff536dabbf6aeae42848f828c3b54a" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする場合のステージ 3 のプロセスシーケンス</block>
  <block id="05743303a73462ef6d9bbfd30ac4d38e" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする場合は、 node1 の物理ポートが node3 に正しくマッピングされていることを確認します。</block>
  <block id="516641dccf4c70d4db12878e058ae756" category="paragraph">元のノードのポートと LIF の構成を、新しいノードの構成と互換性を持つようにする必要があります。これは、新しいノードがブート時に同じ設定を再生するためです。つまり、ノード 3 をブートすると、 ONTAP は、ノード 1 で使用されていたポートで LIF をホストしようとします。</block>
  <block id="b0e739bf68d19a28b9694e06a9b2cfd7" category="list-text">[[man_map_1_step5] クラスタ LIF とノード管理 LIF またはクラスタ管理 LIF をホストするブロードキャストドメインを調整します。各ブロードキャストドメインに正しいポートが含まれていることを確認します。ポートをホストしているブロードキャストドメイン間や LIF のホームになっているブロードキャストドメイン間で移動することはできないため、 LIF を移行して変更する必要がある場合があります。</block>
  <block id="9c0cd850b64c418ab49c394ae78e52be" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする場合は、ノード 3 の NAS データ LIF を node3 から node4 に移動します。</block>
  <block id="a85ccd8e0b0b2c0119d022ef2ae803ef" category="paragraph">ノード 4 のインストールの確認が完了し、ノード 2 のアグリゲートをノード 3 からノード 4 に再配置する前に、現在ノード 3 にある node2 に所有されている NAS データ LIF をノード 4 に移動する必要があります。ノード 4 の SAN LIF も確認する必要があります。</block>
  <block id="3e1152afdb3506d941739c9a1c017958" category="summary">手動 ARL 手順 を使用して、 ONTAP 9.7 以前を実行している新しいコントローラを含む HA ペアのストレージコントローラをアップグレードするかどうかを決定します。</block>
  <block id="2c1932b86516656567d157f72eaf9746" category="summary">ONTAP 9.1 以降の場合は、ポートレイアウトを再設定し、 ONTAP 9.7 以前を実行しているコントローラで ARL を手動アップグレードする際に最新の RCF を適用します。</block>
  <block id="69824f6377ec4443972cf9847e831247" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする際に発生する可能性がある問題に関する情報。</block>
  <block id="de58ee53439e59b040872d736eb4746a" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする場合は、ノードを準備して情報を収集し、すべてのクラスタノードがクォーラムにあることを確認します。</block>
  <block id="528395f19572aa91b1963f0ea7b6ed6b" category="summary">ONTAP 9.7 以降を実行しているコントローラで ARL を手動でアップグレードする場合は、 node2 のクラスタネットワーク、管理、 FC ポート、および NVRAM システム ID に関する情報を記録します。</block>
  <block id="45e4301bce74949fdb13b7b2b487a728" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする際に、 RCF ファイルをインストールして Cisco スイッチと Brocade スイッチを再設定します。</block>
  <block id="6d2acf13fe57f3aa46b46db44d2c7e40" category="summary">ONTAP 9.7 以前を実行しているコントローラでは、 ARL を手動でアップグレードする際にメンテナンスが進行中であることを、ネットアップテクニカルサポートに通知します。</block>
  <block id="edcbc9ed6ad9e26568e29e57e3794019" category="paragraph">スイッチを再設定する前に、問題 an AutoSupport message to notify NetApp technical support that maintenance is maintenance.システム停止が発生したとみなしてテクニカルサポートがケースをオープンしないように、メンテナンスが進行中であることを通知する必要があります。</block>
  <block id="82afd892d5c2a9e4e8762a660a4866cd" category="summary">手動の ARL アップグレード手順 を使用して、 ONTAP 9.7 以前を実行しているコントローラハードウェアをアップグレードし、ルート以外のアグリゲートの所有権を切り替えます。</block>
  <block id="edcca90be305577ecf6fd870b41fb37e" category="cell">9.7 以前</block>
  <block id="3ee1f71cb1077912bbaee2aa2d00b9be" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードするには、特定のツールとドキュメントが必要です。</block>
  <block id="df9440c565e0ee041579892cbe38d8dd" category="summary">ONTAP 9.7 以前を実行しているコントローラで、 ARL を手動でアップグレードする際に、 node3 のインストールと node2 との通信を確認します。</block>
  <block id="3677ac49080ff505fdf08da5eca00056" category="paragraph">node3 のインストールとブートが完了したら、正しくインストールされていること、クラスタの一部であること、および node2 と通信できることを確認する必要があります。</block>
  <block id="b14e77f6abcd7876eb048771f706c19b" category="summary">ONTAP 9.7 以前を実行しているコントローラでの手動 ARL アップグレード時に、ノード 3 のオンボード FC ポート、 UTA / UTA2 ポート、または UTA / UTA2 カードを設定します。</block>
  <block id="4e57dcc65e363749f76aef4905047855" category="summary">Config Advisor ツールを使用して、 ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする際に、一般的な構成エラーがないかどうかを確認します。</block>
  <block id="165a3ccbddfcc85a81ddf47d09d843d2" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする場合のステージ 5 のプロセスシーケンス</block>
  <block id="4aea10f3c0d7162a37d57f70bbb18869" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードすると、古いシステムが動作しなくなることをネットアップに知らせてください。</block>
  <block id="620726f5395f82206964dd62bd21bd64" category="summary">ONTAP 9.7 以前を実行しているコントローラで、 node2 の NAS データ LIF を手動で ARL アップグレード中に node3 に移動します。</block>
  <block id="2292391a53ba8012f89e27eee26e330c" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードしたあとに、 MetroCluster 構成の無効なポートにある LIF を再同期します。</block>
  <block id="9d853a67f0d4bc462097290add47b063" category="summary">ONTAP 9.7 以前を実行しているコントローラでは、 ARL を手動でアップグレードする際に、内蔵ディスクドライブにルートアグリゲートまたはデータアグリゲートが含まれていないことを確認します。</block>
  <block id="52d87ef552d10f89d72146e323224712" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする場合のステージ 1 のプロセスシーケンス</block>
  <block id="c3ca05cd3954f0276fbe21e438b23691" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする場合のステージ 6 のプロセスシーケンス</block>
  <block id="bd01c5b770f12580d6d085fd6e8ad756" category="summary">システムをネットブートする前に、 ONTAP 9.7 以前を実行するコントローラで ARL を手動でアップグレードする際に、すべての SnapMirror 関係を休止します。</block>
  <block id="cb42877b8f5a499b59fbb4b10124a134" category="summary">ONTAP 9.7 以前を実行しているコントローラでは、 ARL を手動でアップグレードする際に、 node3 をインストールして ONTAP ソフトウェアをインストールします。</block>
  <block id="c9db4eeeb7068245ea24e65d2b3044b1" category="summary">ONTAP 9.7 以前を実行しているコントローラでは、 ARL を手動でアップグレードする際にストレージ暗号化を設定します。</block>
  <block id="a986e1d99c36977cba4daadf9f7b9d1e" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする場合に、ステージ 2 、ステージ 3 、またはステージ 5 で LIF がオンラインにならない。</block>
  <block id="10a1bf2406c5b22e1d135998f630df5f" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする場合は、 node2 の物理ポートが node4 に正しくマッピングされていることを確認します。</block>
  <block id="5392067398aba96b96eb467b43962fc8" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする場合は、 MetroCluster 構成の健全性を確認して処理を修正します。</block>
  <block id="3c27ee7df2005d2721c952492a878a6c" category="paragraph">MetroCluster 構成の健全性をチェックして、正しく動作することを確認する必要があります。</block>
  <block id="a971a57f0ab6432a971f405b5096ea03" category="summary">ONTAP 9.7 以前を実行しているコントローラで、手動 ARL アップグレード時のスイッチオーバー、修復、スイッチバックの処理を確認します。</block>
  <block id="08739e7d42267d65e0853d696be154a0" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする場合のステージ 2 のプロセスシーケンス</block>
  <block id="27effd56423bec9ee27e09277564b6ed" category="summary">必要に応じて、 ONTAP 9.7 以前を実行しているコントローラでストレージ暗号化を設定し、 SSL 証明書をインストールし、 ARL を手動でアップグレードする際にキー管理サーバをセットアップします。</block>
  <block id="f4f373f7c3019360096aef3036006d62" category="summary">ONTAP 9.7 以前を実行するコントローラペアの ARL の手動アップグレード手順 の仕組みを理解する。</block>
  <block id="19b4277aa4310fa75687e1f55755a62c" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする場合のステージ 4 のプロセスシーケンス</block>
  <block id="42a668f937c22ef51746479a618fb229" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする際に発生する可能性のある障害のトラブルシューティングを行います。</block>
  <block id="d7e5ee7c28892ef5fdf4825739b7aec0" category="summary">ONTAP 9.7 以前を実行しているコントローラで、 ARL を手動でアップグレードする場合は、 node4 をインストールしてブートし、 ONTAP ソフトウェアをインストールします。</block>
  <block id="07db5d309a895d3830f3488eb9139adb" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする場合は、ノード 2 を正しくシャットダウンしてラックまたはシャーシから取り外します。</block>
  <block id="ef3c91fa4c8f504ee640cfbd9abd851c" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする際には、特定の情報を収集します。</block>
  <block id="e3cbff5daacc19796803ce053e0bd219" category="summary">HA ペアを有効にし、 node3 と node4 にあるストレージアクセスを確認し、 ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードしたあとにアグリゲートの所有権を確認します。</block>
  <block id="ffd0deb022240e6349d0ad6c700b5228" category="summary">node2 の AutoSupport メッセージを送信し、 ONTAP 9.7 以前を実行しているコントローラで node2 の非ルートアグリゲートを手動で ARL アップグレード時にノード 2 に再配置します。</block>
  <block id="28adb05c023c689461eafc8525f2227b" category="summary">ONTAP 9.7 以前を実行しているコントローラでは、 node2 で HA ペアを無効にし、 ARL を手動でアップグレードする際に node1 を正しくシャットダウンします。</block>
  <block id="bf889ea04fe0d2a661edbef6a09d0c52" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレード手順 する方法を確認します。</block>
  <block id="bff9ee9b2d6b4fc2a731c272a4b48576" category="summary">ONTAP 9.7 以前を実行しているコントローラでは、オンボードキーマネージャを使用して ARL を手動でアップグレードする際に認証キーを管理します。</block>
  <block id="1f03fa93b012b982c272f6559a72a764" category="summary">ONTAP 9.7 以前を実行しているコントローラで、ルート以外のアグリゲートをノード 1 からノード 2 に移動し、 ARL を手動でアップグレードする際に再配置を確認します。</block>
  <block id="9698dfbd957bfa17e223947fbe0ab128" category="summary">ONTAP 9.7 以前を実行するコントローラのペアに手動 ARL 手順 を使用できるかどうかを確認します。</block>
  <block id="4d856525c09b45da9c5211e4e18d7956" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする場合、システムがクラッシュするか、パニック状態になるか、電源の再投入が行われる可能性があります。</block>
  <block id="4cb6b559e491ceb7837bbe4029df8647" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする場合は、 node2 のルート以外のアグリゲートを node3 から node4 に再配置します。</block>
  <block id="876193b993ec26f0c627e985b7857e15" category="summary">ONTAP 9.7 以前を実行しているコントローラで、手動 ARL アップグレード時にファブリック内の Brocade スイッチと Cisco スイッチを永続的に有効にします。</block>
  <block id="c91d99382b92408513aed0c125178f52" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする場合の、新しいコントローラモジュールとディスクシェルフのケーブルレイアウトを決定します。</block>
  <block id="4a249b60efb722cf2c3f1aa4209460e4" category="admonition">RCF を使用できるようにケーブル接続できない場合は、テクニカルサポートにお問い合わせください。RCF を使用できないケーブル接続の場合は、この手順を使用しないでください。</block>
  <block id="8f6790d9ae4831c2f2a5df43d0211d5b" category="summary">ONTAP 9.7 以前を実行しているコントローラでは、ファブリック内の Brocade スイッチと Cisco スイッチを無効にし、 ARL を手動でアップグレードする際に構成を変更します。</block>
  <block id="ce9a79ebc7c19f98472942ce9de695aa" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする際に、 node3 と node4 をネットブートする準備をします。</block>
  <block id="c9e368205ce643c1e4f03ece9279d673" category="summary">ONTAP 9.7 以前を実行しているコントローラでは、 ARL を手動でアップグレードする際に認証キーを管理するには、 KMIP サーバを使用します。</block>
  <block id="ed576374c6e7857fa007ac7fd9061164" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする場合は、参照コンテンツと Web サイトが必要です。</block>
  <block id="46d710808513caa456c59b3efa90d166" category="list-text">ノード 1 とノード 2 に 2 つまたは 4 つのクラスタ LIF があるかどうかを確認します。</block>
  <block id="cae5b224d557c99a0eebcc5cacc40bf4" category="inline-link-macro">ノード 3 の UTA / UTA2 ポートの確認と設定、手順 15</block>
  <block id="a298d19803fc12a7c7efaba3c5bf6f9c" category="paragraph">FC または UTA / UTA2 設定がない場合は、を実行します <block ref="9a0e78facca94ea7347680acb603c7fe" category="inline-link-macro-rx"></block> ノード 3 がノード 1 のディスクを認識できるようにします。</block>
  <block id="7fb38727f894ed52a58d4bcc31b06aaf" category="list-text">[man_record_2_step9] ： node2 の属性を表示します</block>
  <block id="532b323cb941c2d695f99125c68410df" category="cell"><block ref="532b323cb941c2d695f99125c68410df" category="inline-link-macro-rx"></block></block>
  <block id="b4fe4daa97eb40900235ae04f1cd5873" category="cell"><block ref="b4fe4daa97eb40900235ae04f1cd5873" category="inline-link-macro-rx"></block></block>
  <block id="91b0db424a5fefe25b3d6fccaca1b289" category="inline-link-macro">ワークシート</block>
  <block id="7d059b3dc572790c32264682daa9e3a8" category="list-text">[[worksheet _step2_node2]] クラスタが SAN LIF 用に構成されている場合は、 SAN LIF と既存の構成情報をこのに記録します <block ref="ed0401b9f31c3a01c0ae9e44a18d8569" category="inline-link-macro-rx"></block> 手順 の後半で使用します。</block>
  <block id="13fe413dcdf6cd4af5dc15452c261c5d" category="list-text">ノード 3 の SAN LIF を一覧表示し、出力を確認します。</block>
  <block id="c81ec76e9b8604cac0a0b80f119ad7ca" category="paragraph">「 network interface show -data-protocol fc * 」を参照してください</block>
  <block id="fefd289d498d5d5326f83433241db103" category="list-text">既存の設定を表示し、出力を確認します。</block>
  <block id="2b8adeabb17e2a28fffec9935d24095e" category="paragraph">「 fcp adapter show -fields switch-port 、 fc-wwpn 」と入力します</block>
  <block id="0570a87f66b52b8f17fb5de7ee7bc50e" category="cell">に進みます <block ref="1feafd371df4188baa75107ccc365ce6" category="inline-xref-macro-rx"></block>。</block>
  <block id="a0c840707955fb428322cd9929f8594f" category="cell">手順 4 を省略して、に進みます <block ref="fed6d849a1c6887a0026c6afdf0be295" category="inline-xref-macro-rx"></block>。</block>
  <block id="81822d00068323377a946aa7bf001d37" category="inline-xref">手順 14</block>
  <block id="203c350886e723f8907aa98829856dea" category="cell">- 完了しました <block ref="9b6384c6e14a01b359b3ceca503dc7e8" category="inline-xref-macro-rx"></block> から <block ref="0384eb2d62c044428afa7420fa66b7f3" category="inline-xref-macro-rx"></block>をクリックして、手順 10 をスキップして完了します <block ref="e8b56490494689060c7f97c7205b356e" category="inline-xref-macro-rx"></block> から <block ref="ec14a10fceb4bd2f9e1f7036303b7f20" category="inline-xref-macro-rx"></block>。</block>
  <block id="d7e12627113c3a73f5a80bf4274e8846" category="cell">手順 6~9 をスキップして完了します <block ref="5ec476e5dfed929f240a4e732b5ca6eb" category="inline-xref-macro-rx"></block> から <block ref="ec14a10fceb4bd2f9e1f7036303b7f20" category="inline-xref-macro-rx"></block>。</block>
  <block id="6944af912471eeed2e022cefd73bd566" category="cell">- 完了しました <block ref="9b6384c6e14a01b359b3ceca503dc7e8" category="inline-xref-macro-rx"></block> から <block ref="ec14a10fceb4bd2f9e1f7036303b7f20" category="inline-xref-macro-rx"></block>。</block>
  <block id="24fe95a95d6e3a63f99e4a3c5ef9f89a" category="list-text">新しい「 adapter 」および「 switch-port 」の設定が正しいことを確認するには、「 fcp adapter show 」コマンドの出力と、のワークシートに記録した新しい設定情報を比較します <block ref="126eae74e75ac7b320d7d5918436b8fc" category="inline-xref-macro-rx"></block>。</block>
  <block id="a9b96c57877203a59f39e6cc79d93f2c" category="paragraph">ノード 4 の新しい SAN LIF の設定を表示します。</block>
  <block id="b2d67401d96e568ee0cf85d65ef2b19b" category="admonition">新しい構成の SAN LIF が同じ「 switch-port 」に接続されたアダプタ上にない場合、ノードをリブートすると原因 がシステム停止状態になる可能性があります。</block>
  <block id="82b42c933396be79780fabd5e97f3c55" category="list-text">「 fcp adapter show 」コマンドの出力と、のワークシートに記録した設定情報を比較して、新しい「 adapter 」および「 switch-port 」の設定が正しいことを確認します <block ref="0cc92f396d72c25a12260a5b674f18bb" category="inline-xref-macro-rx"></block>。</block>
  <block id="c60cff9ca9befe11cdfbe93fdcc641c4" category="paragraph">ノード 3 に新しい SAN LIF の設定を表示します。</block>
  <block id="51dffedbaa43215c9eb261627011dc71" category="list-text">[[worksheet _step2] クラスタが SAN LIF 用に構成されている場合は、 SAN LIF 「 adapter 」および「 switch-port 」の構成情報をこのに記録します <block ref="df642b24162f163cd69ded792f71f977" category="inline-link-macro-rx"></block> 手順 の後半で使用します。</block>
  <block id="82bc4d9ae00b977a00f8b2b3183a9785" category="list-text">node2 の SAN LIF を一覧表示し、出力を確認します。</block>
  <block id="018c22c5b30c017d8feb43ab61d41950" category="cell">に進みます <block ref="8695dd713093cfe118008b3f87c0754f" category="inline-xref-macro-rx"></block>。</block>
  <block id="2b11e293cb7289a197df3561593aeffa" category="cell">手順 4 を省略して、に進みます <block ref="a890970ca155ddb2f966787cdb699906" category="inline-xref-macro-rx"></block>。</block>
  <block id="584e8d9cc5ee8c735cfb3dd7222c5f97" category="cell">- 完了しました <block ref="ad851a431673e6dae9d14b296383f37c" category="inline-xref-macro-rx"></block> および <block ref="1d64360fb04a1f29d7e0234ee858d9f1" category="inline-xref-macro-rx"></block>をクリックして、手順 8 をスキップして完了します <block ref="9da2a3cb41411f3d8e4509b7d9f419c9" category="inline-xref-macro-rx"></block> から <block ref="268954e5efe55fe9bc0459f35479f2f6" category="inline-xref-macro-rx"></block>。</block>
  <block id="b9c0ca8a434a5002becc00cfe521a241" category="paragraph">SAN LIF を node3 から node4 に移動したあとの設定が正しいことを確認できるように、次のワークシートを使用して、各 LIF の「 adapter 」と「 switch-port 」の情報を記録します。</block>
  <block id="53148cc93c14512428f6220d831a49bc" category="paragraph">network interface show -data-protocol fc * コマンドの出力に記載されている LIF 「 adapter 」の情報と、 node3 に対する fcp adapter show -fields switch-port 、 fc-wwpn コマンドの出力に記載されている「 switch-port 」の情報を記録します。</block>
  <block id="4609868b369b1b30d3b39e9d3f09f22f" category="paragraph">ノード 4 への移行が完了したら、ノード 4 の LIF の「 adapter 」と「 switch-port 」の情報を記録し、各 LIF が同じ「 switch-port 」に接続されていることを確認します。</block>
  <block id="bbb747b1516b5225f1ec1c65887b39fc" category="cell">ノード 3</block>
  <block id="9d976e7c6f1c5d3d7ceae80a4e6a8146" category="cell">ノード 4</block>
  <block id="b3625fe2fca73900be4e5cc7287b2712" category="cell">「アダプタ」</block>
  <block id="ea345f47a717359f0fdba3d2e4713ef4" category="cell">「 switch-port 」と入力します</block>
  <block id="c05bee806c6f915cf5ff2806f39a07ed" category="paragraph">SAN LIF を node2 から node3 に移動したあとに正しく設定されているかどうかを確認するには、次のワークシートを使用して、各 LIF の「 adapter 」と「 switch-port 」の情報を記録します。</block>
  <block id="9112b6be69a2001742ac0ee10829bee2" category="paragraph">network interface show -data-protocol fc * コマンド出力の LIF 「 adapter 」情報と、 node2 に対する fcp adapter show -fields switch-port 、 fc-wwpn コマンド出力の「 switch-port 」情報を記録します。</block>
  <block id="22b2fefa28a06ec3cc06d7ec099d5c74" category="paragraph">node3 への移行が完了したら、 node3 の LIF の「 adapter 」と「 switch-port 」の情報を記録し、各 LIF が同じ「 switch-port 」に接続されていることを確認します。</block>
  <block id="f5f366263dcc357e2720042f33286f8f" category="cell">ノード 2</block>
  <block id="b343f23906663addd5a74e2a7ef1081c" category="paragraph">2 ノード MetroCluster 構成をアップグレードする場合は、の手順を使用する必要があります<block ref="1c2430d337b01f5c69e59f26ce11e5ee" category="inline-link-rx"></block> 内容</block>
  <block id="9563ae143e5fe7208056b0b71e25b465" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードする場合は、ノード 2 の NAS データ LIF 設定情報を記録します。</block>
  <block id="f2c792d165cf5982bc257f272cf61213" category="doc">ワークシート： NAS データ LIF を node4 に移動する前に記録する情報</block>
  <block id="3845d8de38880910997f948c4173a5ae" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードする場合は、 NAS データ LIF の構成情報を 1 つ記録します。</block>
  <block id="3a9b491c3933919f7944d284e7bdf2a9" category="doc">ワークシート： NAS データ LIF をノード 3 に移動する前に記録する情報</block>
  <block id="1702aae1f318978efc37a136675dc355" category="list-text">ノード 3 にオンボードの FC ポート、オンボードの UTA / UTA2 ポート、または UTA / UTA2 カードがなく、ストレージディスクを搭載したシステムをアップグレードする場合は、に進みます <block ref="35ed01fca1dde6c35ca197b89d2bbfc7" category="inline-link-macro-rx"></block> セクション。</block>
  <block id="79ba45215eeed9692f00f54cd98176eb" category="list-text">[[auto9597_istall3_step29]] FlexArray 仮想化ソフトウェアがストレージアレイに接続されている MetroCluster 構成、 V シリーズシステム、およびシステムの場合は、に進みます <block ref="9a0e78facca94ea7347680acb603c7fe" category="inline-link-macro-rx"></block>。</block>
  <block id="42b2cb9f9e1a3cf15145887e95d849a8" category="sidebar">ワークシート：コントローラのアップグレード前後に収集する情報</block>
  <block id="17f9514d7bcdbd086bef311b63567524" category="admonition">FAS8080 や AFF8080 システムなど、ノードあたり 3 つ以上のクラスタポートを備えたシステムは、アップグレードを開始する前に、ノードあたり 2 つのクラスタポートにクラスタ LIF を移行してホームに戻す必要があります。ノードごとに 3 つ以上のクラスタポートを使用してコントローラのアップグレードを実行すると、アップグレード後に新しいコントローラのクラスタ LIF がなくなる可能性があります。</block>
  <block id="23ec9249d03285a513eaaf182a7bcd49" category="cell">AFF8080</block>
  <block id="ae201a8621d5678d9f7db2f1543be658" category="inline-link-macro">「system controller replace」コマンドを使用して、AFF A700からAFF A900またはFAS9000に、ONTAP 9.10.1以降を実行するFAS9500にアップグレードします</block>
  <block id="df69e9ae0d9f7ac20a24f0c796c5fd93" category="cell"><block ref="df69e9ae0d9f7ac20a24f0c796c5fd93" category="inline-link-macro-rx"></block></block>
  <block id="88b12ac6a25fc9dcdeff5648aa2d9e8f" category="cell">ONTAP 9.10.1以降を実行するFAS9500システムにAFF A700を無停止でアップグレードし、system controller replaceコマンドを使用してAFF A900システムまたはFAS9000にアップグレードする場合に必要なアグリゲートの再配置手順について説明します。</block>
  <block id="562fafbbb89476d10c038539c7edc691" category="list-text">システムが再起動ループに入って「ディスクが見つかりません」というメッセージが表示された場合は、ポートがターゲットモードにリセットされ、ディスクを認識できないためです。に進みます <block ref="cc511b4dbeed99af4a19f83ac3e97f04" category="inline-xref-macro-rx"></block> 終了： <block ref="8dac798a0974640f6cae187a1dbe2d57" category="inline-xref-macro-rx"></block> これを解決します。</block>
  <block id="f2c15df21143edf73966939dd59ca6fb" category="list-text">「 no disks found 」というメッセージが表示されてシステムがリブートループに入ると、システムが FC ポートまたは UTA/UTA2 ポートをターゲットモードにリセットしたため、ディスクが認識されないことを示します。この問題を解決するには、に進みます <block ref="cc511b4dbeed99af4a19f83ac3e97f04" category="inline-xref-macro-rx"></block> 終了： <block ref="8dac798a0974640f6cae187a1dbe2d57" category="inline-xref-macro-rx"></block>をクリックするか、セクションに移動します <block ref="35ed01fca1dde6c35ca197b89d2bbfc7" category="inline-link-macro-rx"></block>。</block>
  <block id="a21bb6fd42ff6eb59f1b181296f7c703" category="cell">FAS8020 ^3^、FAS8040 ^3^、FAS8060、FAS8080</block>
  <block id="34a273586a26b9c6b133c4ff92d23f7c" category="cell">FAS8060 ^4^、FAS8080 ^4^</block>
  <block id="756d409209ace98589705774b5011aa0" category="cell">FAS9500</block>
  <block id="8245966310b85f53855742d8e5ba304d" category="cell">AFF8020^3^、AFF8040^3^、AFF8060、AFF8080を参照してください</block>
  <block id="15669f56a9080989e0dd31ca6ec7de95" category="cell">AFF8060 ^4^、AFF8080 ^4^</block>
  <block id="ec5e81cea4c5ee83d635778e86350e80" category="cell">AFF A900 の略</block>
  <block id="83881871feba8f42c547551eb77311c5" category="cell">FAS8300 ^2^、FAS8700、FAS9000、FAS9500</block>
  <block id="b2eb0585a7b45bf3f01cacfcc45b17f6" category="cell">FAS8300、FAS8700、FAS9000</block>
  <block id="5b7a8b52e3325206af4bfbcf07693215" category="cell">AFF A400 ^2^、AFF A700、AFF A800^1 ^、AFF A900</block>
  <block id="e02a538b8ab4faf6c7d890fa1fcfa7a7" category="cell">AFF A320 ^4^</block>
  <block id="540dacfeb5577ce4282c41e9c7518680" category="cell">AFF A400</block>
  <block id="3987c2b3042faa1f0f41d1ec08f2ed7e" category="cell">AFF A400 、 AFF A700</block>
  <block id="41c1636eb5024bf8b152d1ca09286521" category="paragraph">^2^ AFF A300からAFF A400またはFAS8200を2ノードスイッチレスクラスタ構成でFAS8300システムにアップグレードする場合は、コントローラのアップグレード用の一時的なクラスタポートを選択する必要があります。AFF A400 および FAS8300 システムは、イーサネットバンドルとして、メザニンカードポートはイーサネットタイプ、 FC タイプの FC バンドルとして、 2 種類の構成で提供されます。</block>
  <block id="e9dc6fafb0f1f8ce64537ec567468d16" category="paragraph">^3FAS8020、FAS8040、AFF8020、およびAFF8040のシステムを上記の表のターゲット交換コントローラにアップグレードする場合、交換用コントローラが古いコントローラと同じONTAP バージョンを実行している必要があります。FAS8020、FAS8040、AFF8020、およびAFF8040のシステムは、ONTAP 9.8以降のONTAP バージョンをサポートしていません。</block>
  <block id="a45da96d0bf6575970f2d27af22be28a" category="cell">システム</block>
  <block id="d85bd4eac4ae2ba50be5c03b292af8f8" category="cell">9.9.1以降</block>
  <block id="94869c0e3d68936a54ce1ef1d7459f3e" category="cell">AFF8060の場合</block>
  <block id="a07a923eb6b740023890d052b6fb6e9a" category="cell">9.8P13以降のパッチ</block>
  <block id="728152178b0535e4c7e93f53223fbfff" category="cell">9.8P10以降のパッチ</block>
  <block id="edbeb952c4054f67ce1836afbda00903" category="cell">FAS8060</block>
  <block id="8ed24dd5fb292ecefe76fe92a5fc3988" category="cell">FAS8080</block>
  <block id="e2060bf680bf4facfccf3befec69ef04" category="cell">9.8P12以降のパッチ</block>
  <block id="c7f409d27e38c597f7352e5c3444f367" category="list-text">node3で次のコマンドを入力し、現在ポートがどのように設定されているかを確認します。</block>
  <block id="d6c2e2d86e9dabadec600438d0eb1471" category="paragraph">AFF A900またはFAS9500コントローラとNVRAMモジュールを使用して、node1のインストールを確認する必要があります。物理ポートは変更されないため、古いnode1の物理ポートを交換用node1にマッピングする必要はありません。</block>
  <block id="bec9a7c0c4bfaaeb806f9f4ddb681c8c" category="paragraph">AFF A900またはFAS9500コントローラモジュールでnode1をブートしたあと、正しくインストールされていることを確認する必要があります。ノード 1 がクォーラムに参加するのを待ってから、コントローラの交換処理を再開する必要があります。</block>
  <block id="8f34775699af0e65cbc1a35c0cb8b84b" category="admonition">AFF A700からAFF A900またはFAS9000からFAS9500コントローラへのアップグレード時、ネットワークポートとその接続は変更されません。すべてのポートを正しいブロードキャストドメインに配置し、ネットワークポートの到達可能性を変更しないでください。ただし、 LIF を node2 から node1 に戻す前に、ネットワークポートの到達可能性と健全性ステータスを確認する必要があります。</block>
  <block id="6b31a3b30b01ea09ca78efcb226343b9" category="paragraph">node2をAFF A900またはFAS9500コントローラモジュールとNVRAMモジュールに交換する前に、node2に所有されているルート以外のアグリゲートをnode1に再配置する必要があります。</block>
  <block id="ec034682ed62501de72881ae5f23afb0" category="paragraph">対応するAFF A900またはFAS9500 node2のコントローラモジュールとNVRAMを交換したあと、モジュールでネットブートが必要になることがあります。ネットブートという用語は、リモート・サーバに保存された ONTAP イメージからブートすることを意味します。ネットブートの準備を行うときは、システムがアクセスできる Web サーバに、 ONTAP 9 ブート・イメージのコピーを配置する必要があります。</block>
  <block id="7d4491ed84bf03aef84c9714a80e7635" category="paragraph">AFF A900またはFAS9500コントローラモジュールのブートメディアにインストールされているONTAP のバージョンは、シャーシに取り付けて電源がオンになっていないかぎり確認できません。AFF A900またはFAS9500ブートメディア上のONTAP バージョンは、アップグレードするAFF A700またはFAS9000システム上で実行されているONTAP バージョンと同じであり、プライマリブートイメージとバックアップブートイメージの両方が一致している必要があります。イメージを設定するには、ネットブートを実行してからブートメニューの「 wipeconfig 」コマンドを実行します。コントローラモジュールが以前に別のクラスタで使用されていた場合は、「 wipeconfig 」コマンドはブートメディア上の残留設定をクリアします。</block>
  <block id="a841a9a6470f2ced16c0b663704b5dfe" category="list-text">次の出力に示すように、AFF A900またはFAS9500コントローラモジュールで実行されているnode2がブートするまで待ち、ブートメニューのオプションを表示します。</block>
  <block id="162c8b4a39fcb111690cbc082fa26537" category="paragraph">ノード 1 を撤去するには、自動処理を再開して、ノード 2 と HA ペアを無効にし、ノード 1 を正しくシャットダウンします。あとで、AFF A700またはFAS9000コントローラとNVRAMモジュールをノード1のシャーシから取り外し、AFF A900またはFAS9500コントローラとNVRAMモジュールをノード1にインストールする必要があります。</block>
  <block id="f22136c41db26c6022caf6417275b450" category="section-title">AFF A700またはFAS9000コントローラとNVRAMモジュールを取り外します</block>
  <block id="ba579f865c148542656e741f915bc210" category="section-title">AFF A700またはFAS9000コントローラモジュールを取り外します</block>
  <block id="208671d931da81374958ab0bdeb8d0f0" category="paragraph">次の手順 を使用して、AFF A700またはFAS9000コントローラモジュールを取り外します。</block>
  <block id="831816e1924f3edb2d170ec4c291d0f3" category="section-title">AFF A700またはFAS9000 NVRAMモジュールを取り外します</block>
  <block id="fceff39b493e10b2b789e99ad15cc406" category="paragraph">次の手順 を使用して、AFF A700またはFAS9000 NVRAMモジュールを取り外します。</block>
  <block id="3d748e41fa426d2025ff3eb80b369ede" category="admonition">AFF A700またはFAS9000 NVRAMモジュールはスロット6にあり、システム内の他のモジュールの2倍の高さです。</block>
  <block id="1f15728c77802915b0186fe3b48a5405" category="section-title">AFF A900またはFAS9500 NVRAMとコントローラモジュールをnode1にインストールします</block>
  <block id="32820fb65b578170b0fc242eb57ba80e" category="list-text">コアダンプデバイスをAFF A700 NVRAMモジュールからAFF A900 NVRAMモジュールに移動しないでください。</block>
  <block id="d0106eeb656b11c6a07a8e45dcf1b214" category="list-text">FAS9000 NVRAMモジュールに取り付けられているすべてのフラッシュキャッシュモジュールをFAS9500 NVRAMモジュールに移動します。</block>
  <block id="c7fecf95820e09d00c74bf86805bc991" category="section-title">AFF A900またはFAS9500 NVRAMモジュールを取り付けます</block>
  <block id="1a841cb7f620c7f0684b56a8a034fb65" category="paragraph">次の手順 を使用して、AFF A900またはFAS9500 NVRAMモジュールをnode1のスロット6に取り付けます。</block>
  <block id="830a042377d7fdbd36c48ece8669e61c" category="section-title">AFF A900またはFAS9500コントローラモジュールをnode1にインストールします。</block>
  <block id="bb0ced2b785386259d517f7ae7bd88d1" category="paragraph">次の手順 を使用して、AFF A900またはFAS9500コントローラモジュールをnode1にインストールします。</block>
  <block id="a8785e7ad1cb0d71507bbcb99df9c1f7" category="cell">AFF A700システムをAFF A900システムに変換し、A700シャーシを保管します</block>
  <block id="3029eeb5ee6e861b02eb2a1ffd3d3b8e" category="cell">FAS9000からFAS9500へ</block>
  <block id="92edbfe3ededa1bb85b931ec295f360d" category="cell">FAS9000システムをFAS9500システムに変換して、FAS9000シャーシを維持します。</block>
  <block id="a5ce3ab443f38c92fc244c3533db25fd" category="paragraph">ハイアベイラビリティ（HA）ペアのコントローラハードウェアは、コントローラとNVRAMモジュールを交換することで、無停止でアップグレードできます。最初に、ルート以外のアグリゲートを古いコントローラノード間で移行します。インストールが完了したら、ルート以外のアグリゲートを古いコントローラノードから交換用コントローラノードに移行します。アップグレードするノードでホストされているデータには、アップグレード手順の実行中にアクセスできます。</block>
  <block id="3f8470255fba84fd3f339ba171093986" category="paragraph">このコントローラのアップグレード手順 時に、AFF A700またはFAS9000システムの各ノードの2つのフィールド交換可能ユニット（FRU）を新しいFRUと交換する必要があります。</block>
  <block id="c9df35145886ac45d1457faee2b9dd89" category="admonition">I/O カード、データケーブル、ディスクシェルフ、およびディスクを移動、切断、再接続する必要はありません。</block>
  <block id="4ed758f1326f5379f7dc30fe674ce726" category="inline-link-macro">コントローラのアップグレードに関するガイドラインを参照してください</block>
  <block id="61bb0e064fd915427168b2e72e080eff" category="list-text">この手順は複雑で、 ONTAP の高度な管理スキルがあることを前提としています。また、を読んで理解する必要があります <block ref="937d04c1dac5501bcacf105e8700fe45" category="inline-link-macro-rx"></block> および <block ref="57e14e08755134bb6fef9ad899bb58ee" category="inline-link-macro-rx"></block> アップグレード開始前のセクション。</block>
  <block id="15bb782d54e5e11e2e8ab3b723e7ec55" category="list-text">この手順 は、AFF A700システムとFAS9000システムにのみ適用されます。AFF A900またはFAS9500システムへのアップグレードが必要な他のすべてのコントローラモデルについては、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> 「 system controller replace 」コマンドを使用して、 ONTAP 9.8 以降を実行するコントローラハードウェアと、 ONTAP 9.8 以降を実行するコントローラハードウェアを手動でアップグレードするには、「 _Using Aggregate Relocation 」コマンドを使用します。</block>
  <block id="f57bde3eaa64080d17b3c49dfac5f25f" category="list-text">AFF A900およびFAS9500システムでは、高電圧（200~240V）のみがサポートされます。AFF A700またはFAS9000システムをローライン電源（100~120V）で実行している場合、この手順 を使用する前に、AFF A700またはFAS9000の入力電源を変換する必要があります。</block>
  <block id="a34fce485aa189385b6d78cd230756d8" category="list-text">ダウンタイムを発生させずにAFF A700またはFAS9000システムからアップグレードする場合、ストレージを移動するか、テクニカルサポートにお問い合わせください。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、ボリュームまたは storage _ を移動して _ Upgrade にリンクします。</block>
  <block id="3e6b0398ec9c232118e2d2bc538ec645" category="inline-link-macro">ステージ2：リソースをノード1から再配置し、AFF A700またはFAS9000 node1から撤去します</block>
  <block id="f8268b4f2949c257f7e5044e9ac05880" category="inline-link-macro">ステージ3：AFF A900またはFAS9500コントローラとNVRAMモジュールでnode1をブートします</block>
  <block id="4440b548c1cae9d923561d0a7fe3a103" category="list-text">AFF A900またはFAS9500コントローラとNVRAMモジュールでnode1をブートします</block>
  <block id="3e2a6a2edac30411bac1b47c4ba20774" category="list-text">アップグレード後のAFF A900またはFAS9500 node1は、node1個のアグリゲートのホーム所有者と現在の所有者です</block>
  <block id="88429116c298b552cf5a2fd1dfd8ac94" category="inline-link-macro">ステージ5：AFF A900またはFAS9500 NVRAMとコントローラモジュールをnode2にインストールします</block>
  <block id="dbc99796dd5482cbc7660b57b686c30f" category="list-text">AFF A900またはFAS9500 NVRAMとコントローラモジュールをnode2にインストールします</block>
  <block id="25beb58d3a670fb2c16081f902a5bff2" category="inline-link-macro">ステージ6：AFF A900またはFAS9500コントローラとNVRAMモジュールでnode2をブートします</block>
  <block id="d066afecd32f577c431df88c1a421ca4" category="list-text">AFF A900またはFAS9500コントローラとNVRAMモジュールでnode2をブートします</block>
  <block id="8c3db477300524bd7d8bcf2bba005da2" category="paragraph">AFF A700からAFF A900へのコントローラのアップグレード、またはARLを使用したFAS9000からFAS9500へのコントローラのアップグレードでは、NVRAMモジュールがサポートされています。新しいシャーシを含む完全なシステムとしてAFF A900またはFAS9500システムが新規に購入された場合は、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ONTAP 9.8 以降の _content を実行しているコントローラハードウェアをアップグレードするには、 "system controller replace" コマンドを使用してください。</block>
  <block id="446e34a339be0fda54aae2fe862c868f" category="paragraph">次の手順 を使用して、AFF A900またはFAS9500 NVRAMモジュールをnode2のスロット6に取り付けます。</block>
  <block id="b5e3968706cd8f4fee9d9a918b1b867f" category="section-title">AFF A900またはFAS9500コントローラモジュールをnode2にインストールします</block>
  <block id="43d062a38b70447bd532892c53e0817c" category="paragraph">次の手順 を使用して、AFF A900またはFAS9500コントローラモジュールをnode2にインストールします。</block>
  <block id="7226eae03ab7f26a2dd297f61cf08736" category="paragraph">これらのチェックを実行すると、システムによってルート以外のアグリゲートとNASデータLIFがnode2に再配置され、AFF A900またはFAS9500コントローラで実行されています。</block>
  <block id="1e5f9f2daefe506ea2b48caff7fcf4ae" category="paragraph">ノード1をAFF A900またはFAS9500コントローラとNVRAMモジュールに交換する前に、ルート以外のアグリゲートとNASデータLIFをノード1からノード2に移動してから、AFF A900またはFAS9500システムで実行されているノード1でノード1のリソースを最終的にリストアする必要があります。このプロセスは主に自動化されており、ステータスを確認するために処理が一時停止します。</block>
  <block id="3cf8297a666eb50587e23b50dcba8b11" category="paragraph">アップグレード手順の実行中、リモート LIF は SAN LUN へのトラフィックを処理します。アップグレード時に、クラスタまたはサービスの健常性のために SAN LIF を移動する必要はありません。AFF A900またはFAS9500システムでノード1をオンラインにしたあと、LIFが正常で適切なポートに配置されていることを確認する必要があります。</block>
  <block id="8a2c86b63701889cf10547896e555b82" category="list-text">ステージ4のあとで、node2をAFF A900またはFAS9500コントローラとNVRAMモジュールに交換します。</block>
  <block id="c0bf6385dfa15c204a13d5abb6770653" category="paragraph">このコントローラのアップグレード中に、AFF A700コントローラをAFF A900コントローラまたはFAS9000コントローラとFAS9500コントローラと交換します。このコンテンツでは、自動手順 の手順を紹介しています。自動化されたでは、ディスク割り当てとネットワークポートの到達可能性チェックを使用して、コントローラのアップグレードを簡易化します。</block>
  <block id="2a2d4d28b7b0848fbdd189061adaff52" category="paragraph">このコンテンツでは、AFF A700 HAペアのストレージコントローラを、新しいAFF A900コントローラまたはFAS9000 HAペアのコントローラと新しいFAS9500コントローラとの間でアップグレードする方法について説明します。既存のデータとディスクはすべて維持されます。これは複雑な手順であり、経験豊富な管理者のみが使用する必要があります。</block>
  <block id="3d58d6338cfd5f06b224201846bd6759" category="list-text">AFF A900またはFAS9500コントローラ、NVRAMモジュール、およびアップグレードに必要な部品を受け取ったことを、ネットアップの営業担当者に確認しておきます。</block>
  <block id="b0ce3e25b9ec3a13c13ca9a6fa5323b7" category="list-text">AFF A700またはFAS9000システムでFlexArray 仮想化ソフトウェアを使用している。</block>
  <block id="c72ac68ecc63380b07ba76bc038edf2e" category="paragraph">AFF A900またはFAS9500コントローラとNVRAMモジュールで、node2のインストールを確認する必要があります。物理ポートは変更されないため、古いnode2の物理ポートを交換するnode2にマッピングする必要はありません。</block>
  <block id="fbb88f36cd542fa5f9d7d9b7989c4fa9" category="paragraph">AFF A900またはFAS9500コントローラモジュールでnode1をブートしたあと、正しくインストールされていることを確認する必要があります。node2 がクォーラムに参加するまで待ってから、コントローラの交換処理を再開する必要があります。</block>
  <block id="0b67bd45e44a6983f2e329371f92a85c" category="paragraph">対応するAFF A900またはFAS9500 node1のコントローラモジュールとNVRAMモジュールを交換したら、ノード1をネットブートする必要があります。ネットブートという用語は、リモート・サーバに保存された ONTAP イメージからブートすることを意味します。ネットブートの準備を行うときは、システムがアクセスできる Web サーバに、 ONTAP 9 ブート・イメージのコピーを追加する必要があります。</block>
  <block id="6bc5a701ba593a754b9fc417aacb558c" category="paragraph">AFF A900またはFAS9500コントローラモジュールのブートメディアにインストールされているONTAP のバージョンは、シャーシに取り付けて電源がオンになっていないかぎり確認できません。AFF A900またはFAS9500ブートメディア上のONTAP バージョンは、アップグレードするAFF A700またはFAS9000システムで実行されているONTAP バージョンと同じであり、プライマリブートイメージとバックアップブートイメージの両方が一致している必要があります。イメージを設定するには、ネットブートを実行してからブートメニューの「 wipeconfig 」コマンドを実行します。コントローラモジュールが以前に別のクラスタで使用されていた場合は、「 wipeconfig 」コマンドはブートメディア上の残留設定をクリアします。</block>
  <block id="fed5188660beab0c1ca98ade1cf9e488" category="list-text">AFF A900またはFAS9500コントローラモジュールで実行されているnode1がブートするまで待ち、次のようにブートメニューオプションを表示します。</block>
  <block id="2fef7d8ad2c6da5a6bfc7b0d1cb4d82f" category="doc">AFF A900またはFAS9500コントローラとNVRAMモジュールでnode2をブートします</block>
  <block id="85a900d149967784a6d6e1061792097f" category="paragraph">AFF A900またはFAS9500コントローラとNVRAMモジュールで構成されたnode2が、アップグレード可能な状態になりました。AFF A700からAFF A900またはFAS9000からFAS9500へのアップグレードでは、コントローラとNVRAMモジュールをスワップすると、コンソール接続と管理接続のみが移動します。ここでは、AFF A900またはFAS9500コントローラとNVRAMモジュールでnode2をブートするために必要な手順を示します。</block>
  <block id="5e1956d6adc0bdab37f993d5b46e373b" category="paragraph">AFF A900またはFAS9500コントローラとNVRAMモジュールを搭載したノード1で、ブートの準備が完了しました。AFF A700からAFF A900またはFAS9000からFAS9500へのアップグレードでは、コントローラとNVRAMモジュールを交換すると、コンソール接続と管理接続のみが移動します。このセクションでは、AFF A900またはFAS9500コントローラとNVRAMモジュールでnode1をブートするために必要な手順について説明します。</block>
  <block id="5fa38b455ca95ac213888d230b770ee7" category="paragraph">アップグレードを開始する前に、AFF A700からAFF A900またはFAS9000からFAS9500へのアップグレードに適したハードウェアがあることを確認する必要があります。アップグレードする HA ペアごとに、システムコントローラモジュールを 2 つと NVRAM モジュールを 2 つずつ用意する必要があります。足りないパーツがある場合は、テクニカルサポートに問い合わせるか、ネットアップの営業担当者にお問い合わせください。</block>
  <block id="ba5bb93bf3745b7b90abb302dc84dab9" category="sidebar">「system controller replace」コマンドを使用して、AFF A700をAFF A900またはFAS9000からFAS9500にアップグレードします</block>
  <block id="cec0ad56d161fd372b8f511ac2258e91" category="sidebar">ステージ 2 ：リソースを再配置し、AFF A700またはFAS9000 node1を撤去します</block>
  <block id="3e7ed5dc4e5c354a7d48cc37baefc4ad" category="sidebar">ステージ 3 ：AFF A900またはFAS9500コントローラとNVRAMモジュールでnode1をブートします</block>
  <block id="1ed45ea6838f5dd96a4433ce598c8050" category="sidebar">ステージ 5 ：AFF A900またはFAS9500 NVRAMとコントローラモジュールをnode2にインストールします</block>
  <block id="6c86470db96f676f214aa83001c5a57f" category="sidebar">AFF A900またはFAS9500 NVRAMとコントローラモジュールをnode2にインストールします</block>
  <block id="ae89e936215d96a55c04a947db881581" category="sidebar">ステージ 6 ：AFF A900またはFAS9500コントローラとNVRAMモジュールでnode2をブートします</block>
  <block id="038bf310b30027962de2d4e7d3c544e6" category="paragraph">「system node AutoSupport invoke -node _node_name」-type all -message " MAINT=2h Upgrading _node_name _from_platform_original_to _platform_new_new_"」というメッセージが表示されます</block>
  <block id="10de09f0f92f196f1e5984884c43ba27" category="list-text">storage failover modify -node node_name -enabled false</block>
  <block id="981b4567a35216af18afaec3c97bc50d" category="paragraph">system node halt -node _node_name _`</block>
  <block id="59e7cb89beb0d9c0f35ba87b5c4549e3" category="list-text">元のノードでハイアベイラビリティ構成を無効にします：「storage failover modify -node _original_node_name __ enabled false</block>
  <block id="787149e64a0bc37710b15cd205977d92" category="list-text">元のノードからイプシロンを削除します。+`cluster modify -node _original_node_name __-epsilon false</block>
  <block id="cbb7de31a52f2a91eb5415ac80ca9da6" category="list-text">別のノードにイプシロンを割り当てます。+`cluster modify -node _new_node_name __-epsilon true</block>
  <block id="01d317947cf0fa7c03a1243dac797c57" category="paragraph">'cluster unjoin -NODE_ORIGNED_NODE_NAME_`</block>
  <block id="57160bbb15f3acc82c1eac8e82c87937" category="paragraph">「network port modify -node _node_name --port_port_name_-mtu 9000 -ipspace Cluster」</block>
  <block id="1db9d300a7d27735fb49e694ad616a9e" category="paragraph">「network interface migrate -vserver_vserver_name __ lif_lif_name_-source-node node1 -destination-node node1 -destination-port_name_`</block>
  <block id="cf8f2405fecce8ee1f21a7233d89115d" category="paragraph">「network interface modify -vserver Cluster -lif LIF_name–home-port_port_name_`」です</block>
  <block id="187352d45ddfcffcbd0fdfc10ef7a60b" category="paragraph">「network port broadcast-domain remove-ports -ipspace Cluster -broadcast-domain Cluster -ports_node1：port_」のようになります</block>
  <block id="19e2489a410c822305a9adb3afaaa7b9" category="paragraph">'cluster show -node-node1_-fields health`</block>
  <block id="b3ee2f857e5e883213b8165c5fba42ad" category="paragraph">`::&gt; net int modify -vserver Cluster-lif cluster_lif_cluster-status-admin down；net int modify -vserver Cluster-lif cluster_lif_-status-admin up</block>
  <block id="125acf99178c1bb4d2f46c0b3ac0015a" category="paragraph">到達可能性修復-node_name -- port_port_name_`</block>
  <block id="00cf5fbbce20ec1f9b89b147bb382971" category="paragraph">「broadcast-domain delete -broadcast-domain broadcast_domain_domain _」のようになります</block>
  <block id="cffe2489101b6ec78694eaa8b813fb84" category="paragraph">ifgrp add-port -node node_name -ifgrp_ifgrp_port_-port_port_port_name_`</block>
  <block id="35a35e20066755b8067ef6f365adf5e8" category="paragraph">ifgrp remove-port -node_name -ifgrp_ifgrp_port_-port_port_port_name_`です</block>
  <block id="b130d7e417d43cf2bb4e3462671d7c9b" category="paragraph">'vlan delete -node_name -- vlan-name_vlan_port_`</block>
  <block id="9227e3ed6facfee87d3d3cd63085fd93" category="paragraph">'vlan create -node_node_name -- vlan-name _vlan_port_`</block>
  <block id="615288f7a1a6d0cd98b83d51fa0a23b0" category="paragraph">「変位VLAN restore -node _node_name」-port_port_name -- destination -port_destination_destination_port_`</block>
  <block id="94233499c40b90b14807c18aee0ff89a" category="paragraph">「変位インターフェイスのリストア- vserver_vserver_name _- lif-name _lif_name_`</block>
  <block id="5da1c195350be952cdef0d9195e142af" category="paragraph">「network interface show -vserver_vserver_name --status-admin down」を参照してください</block>
  <block id="af5f7348cf014dba004cc0c3503f37c6" category="list-text">動作上停止しているLIFがないかどうかを確認します。network interface show -vserver vserver_name __ status-oper down</block>
  <block id="956458a9f79320f54c882fd0d5a9bc7b" category="paragraph">「network interface modify -vserver _vserver_name __ lif_lif_home-port_-home-node home_port_`</block>
  <block id="37b83e423704a4a0b505f94f44548be5" category="paragraph">'system node run -node _node_name sysconfig `</block>
  <block id="1610786a536fe66c629bd4ee88571bb3" category="paragraph">'network port show -node-node_name --物理タイプ</block>
  <block id="666c930196006a7a00cd11e4bd261a67" category="paragraph">network interface failover-groups show -vserver_vserver_name _`</block>
  <block id="70bb92c2c7b1882ff8b73acb1d379dd0" category="paragraph">「network port vlan show -node _node_name _」のように入力します</block>
  <block id="51da47a5cd2165b390d04ec231dbf88f" category="paragraph">「 network port ifgrp show -node node_name 」 - instance 」を指定します</block>
  <block id="d8a3e002e1fe8c2f25656a36ddbfbeba" category="list-text">元のノードのSVMに現在接続されているアクティブなイニシエータの一覧を表示します。+`iscsi connection show -vserver _Vserver_name -lif_old_lif_`</block>
  <block id="3b5280aac62d339d908a3019ce691faa" category="paragraph">`lun portset remove -vserver _vserver_name -portset_portset_name __ port-name _lif_name_`</block>
  <block id="6e2a280fc54f306b51d2674e9eea36fc" category="paragraph">「network interface delete -vserver _vserver_name _-lif_lif_name_`」のように指定します</block>
  <block id="0c7ec176679cf1c9c562b2bc88ed9472" category="paragraph">「network interface modify -vserver vserver_name -lif_lif_lif_name」-home-node_new_node_nameに-home-port｛&lt;netport | ifgrp&gt;｝」を指定します</block>
  <block id="83eac7b5032e95adcb3c31f926aca76c" category="paragraph">「network interface migrate -vserver vserver_name -lif_lif_name_-source-node-source_node_name __-destination-node-dest_node_name -destination-port_dest_port_name_destination-port_dest_port_name_`</block>
  <block id="24aef972cbe11a33dc4e5cb93310061b" category="paragraph">'network interface migrate-all -node _node_name _`</block>
  <block id="b84d32c43b649cc6913dcced9685f6db" category="paragraph">「network interface modify -vserver _cluster_name _-lif cluster_mgmt -home-node _new_node_nameの-home-port｛&lt;netport | ifgrp&gt;｝」のように指定します</block>
  <block id="6e4f5a3bbafa35688ed0eba9be161169" category="paragraph">「network interface migrate -vserver _vserver_name _-lif cluster -mgmt-destination-node-new_node_name -destination-port｛&lt;netport | ifgrp&gt;｝</block>
  <block id="019ba4e936e9a1ab59eec2033ea3a6b4" category="paragraph">'system node AutoSupport invoke -node node_name Type all -message "Upgrading node_name from_platform_original_to _platform_new_new_"</block>
  <block id="f29dc737795110e1cc8fbd850515968a" category="paragraph">'network port delete -node1_-port_port_name_`</block>
  <block id="525ce0d5109d2abc61cc41e941dec46b" category="paragraph">「network port broadcast-domain show -ports_node_name：port_name_`</block>
  <block id="e031a855de8a6709ad76ee26da7e1409" category="paragraph">「network interface modify -vserver _vserver_name __ lif_lif_name_–home-port_port_name_`</block>
  <block id="b81db1e95a382ce3628dd1e8a693ba94" category="paragraph">'network interface modify -failover-group_failover_group'-failover-policy_failover_policy_`</block>
  <block id="91b0b9d75ab5100fdef2cc4b9abcbf78" category="paragraph">「network interface migrate -vserver _Vserver_name -lif_lif_name_-source-node-node1_destination-node-node1 __ destination-port_port_name_`</block>
  <block id="bd804b237ebb8835d7e3b85da5d2132b" category="paragraph">「変位インターフェイスrestore -vserver _Vserver_name -lif-name_lif_name_`」のように指定します</block>
  <block id="aad098d45c08b648ea491886918a7403" category="paragraph">「network interface show -vserver _Vserver_name --status -admin down」を参照してください</block>
  <block id="0c50d3945bcacd6caf3b39ff87c93171" category="paragraph">「network interface show -vserver_Vserver_name --status-oper down」を参照してください</block>
  <block id="e43dab083a912c9831fe30bf3abbb717" category="paragraph">「network interface modify -vserver _Vserver_name -lif_lif_name_-home-port_`</block>
  <block id="43e5de1f578cb9746c8ca59e1245cba6" category="paragraph">'network interface show -data-protocol nfs|cifs -curr-node node_name</block>
  <block id="5e0a3adf85d230d7b6fa4c06e4c368c8" category="paragraph">「network interface modify -vserver _Vserver_name --lif_lif_name_-auto-revert false」という名前のコマンドを実行します</block>
  <block id="a35f1330918bb868bf87b26c734531fe" category="paragraph">「network interface migrate -vserver _Vserver_name -lif_lif_name_-destination-node-node2 _–destination-port_netport | ifgrp_`</block>
  <block id="4150a2c924149b072f28abeb13dffdce" category="paragraph">「network interface modify -vserver _Vserver_name -lif_lif_name_-home-node2_-home-node _port_netport | ifgrp_`」</block>
  <block id="ff95031f7ce5f737853f1923b377dff4" category="cell">ノード上のすべてのSAN LIFを無効にしてアップグレード用に停止します。「network interface modify -vserver _Vserver -name _-lif LIF_name -home-node _node_name _to _upgrade _-home-port port | ifgrp-status-admin down</block>
  <block id="d47ec0d8599c51072be6dd4fe781e53a" category="paragraph">「network interface migrate -vserver_Vserver -name _-lif_lif_name_-destination -node _node2 _-destination-port_data_port_`</block>
  <block id="5f2386813cdbe5a31618df40ff0bc4bb" category="paragraph">'network interface show -curr-node _node2 __-data-protocol nfs|cifs</block>
  <block id="f93a467cbe913e76f673709bbe87ce51" category="paragraph">「network interface modify -vserver _Vserver -name _-lif_lif_name_-home-node2_-home-node _port_name_`</block>
  <block id="f31d0edfdf07a61d545c83ac469f9bb9" category="paragraph">「network interface show -home-node _node2」-home-port_port_name_`</block>
  <block id="519623978ac65de377ea633801e31830" category="paragraph">'network interface show -curr-node node_name --curr -port_port_port_name_`</block>
  <block id="1739923dae3adf972cb075015edfa892" category="paragraph">「network interface migrate -vserver_Vserver -name _-lif_lif_name_-destination–node_node_name _-destination -port_port_port_name _」</block>
  <block id="31eb0ef4f6f7de4f775525a118386dc0" category="paragraph">「network interface modify -vserver _Vserver -name _-lif_lif_name_home–node_name _-home-port_port_port_name _</block>
  <block id="ae88793aaac7cea8730108832f5f7f4a" category="paragraph">「network interface modify -vserver _Vserver -name _-lif_lif_name_-home-nodename_-status-admin up</block>
  <block id="2f66a04358258a245998b2984938ec07" category="admonition">MetroCluster 構成では、ポートのブロードキャストドメインを変更できない場合があります。これは、ポートがデスティネーション Storage Virtual Machine （ SVM ）の LIF をホストしているポートに関連付けられているためです。デスティネーションLIFを適切なポートに再割り当てするには、リモートサイトの対応するソースSVMで次のコマンドを入力します：「MetroCluster vserver resync -vserver _Vserver_name _`</block>
  <block id="e52d79bdf43cd4e3113527f8ed347cf3" category="paragraph">network interface show -curr-node node1 __-role data</block>
  <block id="1481b7cc4bd1492508167440a294e706" category="paragraph">'network interface show -role data -curr-node _node2 __-is-home false -home-node node3_node3_’</block>
  <block id="7ecfa7c3ec37e921898a56a59e24206e" category="paragraph">「network interface migrate -vserver vserver_name -lif_lif_name_-destination -node _node3 _–destination-port_netport | ifgrp_`」の形式で指定します</block>
  <block id="a31ccd7b406955854500de2043b7287a" category="paragraph">「network interface modify -vserver _vserver_name __ lif_lif_name__-home-node _node3」-home-port_netport | ifgrp_`</block>
  <block id="dc76e709bffb05d962ea0689ba5d1b2f" category="cell">ノード上のすべてのSAN LIFを無効にしてアップグレード用にダウンにします。「network interface modify -vserver _vserver_name -lif_lif_name__-home-node _port_to _upgrade_-home-port port | ifgrp-status-admin down</block>
  <block id="73069d0232263b243886241ebba6b90b" category="paragraph">「network port broadcast-domain add -ports -ipspace_name_-broadcast-domain mgmt -ports_node：port_`</block>
  <block id="de6a89dd1adb8b4936fcd591e85aeeb6" category="paragraph">「network interface migrate -vserver vserver_name -lif_lif_name_-destination -node _node3 __ destination-port_netport | ifgrp_`」の形式で指定します</block>
  <block id="c8266f0f1fbbedb63c18558aac980f5d" category="paragraph">「network interface modify -vserver _vserver_name __ lif_lif_name_-home-port_netport | ifgrp _-home-node _node3 _</block>
  <block id="9838c544d58f5babeb42b1d472c0e1e5" category="paragraph">network interface show -data-protocol iscsi|fcp-home-node3_`</block>
  <block id="ba5706d48f6fd3bc4e47f824ce21ef17" category="paragraph">「 network interface modify -vserver _vserver_name __ -lif lif_name --status-admin down 」を参照してください</block>
  <block id="d3b90ce44079724b44a787455b4ae287" category="paragraph">`portset remove -vserver_name_-portset_portset_name__-port-name _port_name_`</block>
  <block id="f3a39d0b162b50737b6ab17f1a6d226d" category="paragraph">「network interface modify -vserver _vserver_name __ lif_lif_name_-home-port_'」を指定します</block>
  <block id="4e325e97c9ba13a42abd8aafd2a29c2a" category="paragraph">'network interface modify｛-home-node port_port_on_node1_-role data｝-home-node _new_home_port_on_node3 _`</block>
  <block id="5c0bc1b3624ac3c9a64b8d90f9c7463d" category="paragraph">`portset add -vserver_name_-portset_portset_name__-port-name _port_name_`</block>
  <block id="d977c5048017b0e48616fee67a878352" category="paragraph">network interface modify -home-node port_name_--home-node3_life-status-admin upです</block>
  <block id="b4127f12ddcbe59f29323d5970c2294b" category="paragraph">'network interface show -home-node node_node3 -- role data `</block>
  <block id="1a42e982e93be04446ff899e2aedf934" category="paragraph">「 network interface modify -vserver vserver_name __ -lif LIF_name -status-admin up</block>
  <block id="72b3a6ada2f13891dc74943fb05dbb46" category="paragraph">'system node AutoSupport invoke -node _node3_type all -message "node1 successfully upgraded from _platform_old_to _platform_new_"</block>
  <block id="e92abd98c681c28ac1dfc98547ae5e5f" category="cell">'disk reassign -s _node1 _sysid_-d_node3 _sysid_-p _node2 _sysid_`</block>
  <block id="78264afbb491217d7b80137b26064910" category="cell">'disk reassign -s _node1 _sysid_-d_node3 _sysid_`</block>
  <block id="f1af6307185ecf961b6cecc8e8fc02cc" category="paragraph">`_node1_sysid_`の値には'で取得した情報を使用します <block ref="111c70a978efb37ba3bd0ea564da1d79" category="inline-link-macro-rx"></block>。`_node3_sysid_`の値を取得するには'sysconfigコマンドを使用します</block>
  <block id="3d32bf30d7089bf1d038705b2a759ec3" category="paragraph">disk reassignコマンドは'_node1_sysid_'が現在の所有者であるディスクのみを再割り当てします</block>
  <block id="91792997e777152cb69307ea68b4cfa6" category="paragraph">'aggr_online _root_aggr_from_node1_`</block>
  <block id="c6fb608b8dbcdd7ac28ccfca0670de01" category="list-text">node3が元のルートアグリゲートからブートしないようにします。「aggr offline_root_aggr_on_node3」を参照してください</block>
  <block id="dfb2f1231422ff6f4c2df6fcf3b6315a" category="paragraph">「aggr options _aggr_from_node1_root」と入力します</block>
  <block id="b44d7cf4a1e6c8202283ae7adf14c206" category="paragraph">'set date_mm/dd/yyyy_`</block>
  <block id="b46b8ab5483ca342e875697fbd1c8915" category="paragraph">'set time_hh:mm:ss_`</block>
  <block id="37b25312d3c4fc7a7f7eff2c74d47d0d" category="paragraph">setsetenv partner-sysid_node2 _sysid_`</block>
  <block id="9b4c63bcc5279e1ae1942e83f78aba9c" category="paragraph">storage aggregate show -nodes_node4 --is-home true</block>
  <block id="b7c4bc0233b5c046a49d8389a2f3bd41" category="paragraph">「storage aggregate relocation start -NODE_node4」-aggr_aggr_node_A_1 -destination_node3 _」を入力します</block>
  <block id="9259024b4056dbe3033dcf92fea0fbe0" category="paragraph">storage aggregate show -aggregate aggr1、aggr2、aggr3_-fields home-name</block>
  <block id="edb6746a53c95d308002222717f4a589" category="paragraph">「_aggr1、aggr2、aggr3__」は、node1が元のホーム所有者であるアグリゲートのリストです。</block>
  <block id="df2e7d9f4faae89420497850debf6ccc" category="paragraph">system node hardware unified-connect modify-type |-t target-adapter_port_name_`</block>
  <block id="097ea61069dbe7cfc4b8a4c5d2e39926" category="paragraph">'system node unified-connect modify type|-t initiator-adapter_port_name_`</block>
  <block id="c693fda729d6e359f8eb8a8fbc88eee8" category="paragraph">storage disable adapter_adapter_adapter_adapter_name_`</block>
  <block id="5861bf10ae07bb7c0e6218d5663221a4" category="paragraph">ucadmin modify -m fc | cna-t initiator | target_adapter_name_`</block>
  <block id="c5fabf666636164983c54a60426edaab" category="cell">「network fcp adapter modify -node node_name --adapter_adapter_adapter_adapter_name_-state up」の形式で指定します</block>
  <block id="e07e74f9f1df10fa040f36e818e29bd1" category="cell">'fcp config_adapter_name_up'</block>
  <block id="d22419a850c185721a903c07372ae503" category="paragraph">「system node AutoSupport invoke -node _node2 _-type all -message」「Upgrading _node2 _from_platform_old_to _platform_new_new_」というメッセージが表示されます</block>
  <block id="0035b3ff85f938e9dcfa6e01d00bacb3" category="paragraph">system node AutoSupport show -node _node2 _-instanceです</block>
  <block id="9fb768ad6510fe46b2016783cac8eadb" category="paragraph">storage aggregate show-owner-name_node2_`</block>
  <block id="340e64569e9690b05ee5812624d5a313" category="paragraph">storage aggregate relocation start -node2_-destination_node3_aggregate-list *-nd-controller-upgrade trueを指定します</block>
  <block id="f161887b8a8315e1921bdd784254366b" category="paragraph">storage aggregate relocation show -node-node2 _`</block>
  <block id="cde8cf801e542566f503970c16a89b61" category="admonition">event log showコマンドを実行すると'発生したエラーが表示されます</block>
  <block id="9ef5127a85127a11a229ac4b55fc672f" category="paragraph">storage aggregate relocation start -node2_-destination_node3_aggregate-list *-nd-controllerupgrade true」を実行します</block>
  <block id="841745404f0f5f47ea2e369557646743" category="paragraph">storage aggregate show -node _node3 --state offline-root false</block>
  <block id="7a4b65a92ad0461916e64e86d4469810" category="paragraph">storage aggregate online -aggregate _aggr_name_`</block>
  <block id="9768bc676d49dbda7bf856a2930c4b52" category="paragraph">volume show -node _node3 --state offline`</block>
  <block id="091a8eb2e46c040b097f97a81745c527" category="paragraph">'volume online -vserver_Vserver -name_volume_volume-name _`</block>
  <block id="b69d240b40718da8e6f1771cc452c580" category="paragraph">「storage aggregate show-owner-name_node2」-ha -policy sfo-state online」と表示されます</block>
  <block id="ffd863d528f6b76a6f398dd53b185d1d" category="cell">`disk reassign -s `_node2 _sysid_-d _node4 _sysid_-p _node3 _sysid_`</block>
  <block id="9666e158b6e459758482181fdc5caf71" category="cell">disk disk reassign -s `_node2 _sysid_-d_node4 _sysid_`</block>
  <block id="8739e96f08e6885d251dc263aa1b42b4" category="paragraph">'node2 _sysid' 値には ' で取得した情報を使用します <block ref="09a261426dbc4b06f375c3dc720b5b79" category="inline-link-macro-rx"></block> をクリックします。`_node4 sysid_`の場合は'で取得した情報を使用します <block ref="9c7125eb7b33f2cb03297a560d0660b0" category="inline-xref-macro-rx"></block>。</block>
  <block id="ff573218a71a52e566a9d2cb9c112902" category="paragraph">disk reassignコマンドは'_node2 _sysid_'が現在の所有者であるディスクだけを再割り当てします</block>
  <block id="bfb9fe88864aa2cf3d9decbdba2d491d" category="paragraph">「aggr_online root_aggr_from__」に設定します</block>
  <block id="f5ff2bb513b480c8df7df73e2a7eca20" category="paragraph">'aggr offline_root_aggr_on_node4</block>
  <block id="4daae5d3b652a659ddd315488acd4db5" category="paragraph">'aggr options aggr_from__ node2 _root</block>
  <block id="7e99838c157f551e95b6714e703a5a83" category="paragraph">setsetenv partner-sysid_node3 _sysid_`</block>
  <block id="5d5ae887eff3d0bec6fe996459e81e1e" category="paragraph">snapmirror resume -destination–vserver_vserver_name _`</block>
  <block id="dfb0fec494a077d511e1162b3cb00bc8" category="paragraph">storage aggregate show -nodes_node_name -is-home false -fields owner-name、home-name、stateを指定します</block>
  <block id="669f87e406c8fda6424e840528d9149d" category="paragraph">storage failover giveback -ofnode home_node_name</block>
  <block id="b4fc8c3d263dd54ba941fc9d14834417" category="paragraph">system node image show -node-node1、node2 _-iscurrent true’</block>
  <block id="9d2de80efb63f5a2a1ee2eae629624ca" category="paragraph">network interface show -role data -is-home false -curr-node node_name _`</block>
  <block id="638610cc5c3557800c38be4545f5cf40" category="paragraph">storage disk show -nodelist_node1、node2 _-broken</block>
  <block id="32f6df046e4deff82e2d7aa91a76c76e" category="paragraph">system node show -node-node1、node2 _-instanceです</block>
  <block id="ea4cc24170a5a77d1d67cb6220f7045e" category="paragraph">'run-node_node_name sysconfig '</block>
  <block id="994ba4a0a4ce4a1b887a79e4724bef6f" category="paragraph">storage aggregate show -node _node_name --state online `</block>
  <block id="37a55a1a98dde4ca242768a7fbfe2539" category="paragraph">volume show -node node_name --state offline`</block>
  <block id="5db342f1f11964db01d0add232583ab3" category="paragraph">「network interface show -vserver _vserver_name --data-protocol iscsi | fcp」というメッセージが表示されます</block>
  <block id="2b761add74f58324b7892942bca4c01b" category="paragraph">network interface show -data-protocol iscsi|fcp-home-node_node_name _</block>
  <block id="17c13101a210d511ce2fcf1ccdcc7228" category="paragraph">system node AutoSupport show -node-node1、node2 _</block>
  <block id="34332c29c1cafae97c37db8d877845e8" category="paragraph">'system node AutoSupport show -node1_-instance `</block>
  <block id="5d7916d552fc8524067145caf231984c" category="paragraph">「security key-manager -add_key_manager_server_ip_address_`」</block>
  <block id="b2aee17ce5d9304ab1d7b938a9523e20" category="paragraph">security key-manager setup -node _new_controller_name_`</block>
  <block id="5a3b061e7aa6b6aae0ff5fce9f756296" category="paragraph">security key-manager restore -node _new_controller_name_`</block>
  <block id="1d828f70faadc8e1765bcc76134f1d56" category="admonition">ステータスが「Transferring」の場合は、転送を中止する必要があります。snapmirror abort -destination-pathは、vserver_vserver name_`です</block>
  <block id="06bd9faff44374f31ab818fd79f630b5" category="paragraph">storage failover modify -node _node1_-enabled false</block>
  <block id="90e4b9752d25c3700871768181632589" category="cell">ストレージ・フェイルオーバーを無効にします：storage failover modify -node _node1 _-enabled false</block>
  <block id="c474d50b811406147962f1e8ce7e2359" category="paragraph">network interface show -role data -curr-node 2_node2 -home-node1_home_`</block>
  <block id="f113db381dfe30746dd9d1880bb9c423" category="paragraph">cluster modify -node1_-epsilon false</block>
  <block id="06c8bee57dd2167bbb1dbfa5749c956a" category="paragraph">cluster modify -node _node2 _-epsilon true</block>
  <block id="0814e17724c439ef0cd37ea13167d663" category="paragraph">system node halt -node _node1_`</block>
  <block id="15a27fbf1719df235581c1df85f4770c" category="paragraph">'network interface show -curr-node 4：</block>
  <block id="7ad7509ea03580dbba4ac42f8a0e9061" category="paragraph">storage failover modify -enabled true -node _node3_`</block>
  <block id="f95d062b8f3dd313f851677720fd47c0" category="paragraph">storage aggregate show-owner-name_node3_`storage aggregate show-owner-name_node4 _`</block>
  <block id="68c05b65b923848aa186ea69ee9487d7" category="paragraph">volume show -node _node3 --state offline `volume show -node _node4 --state off`</block>
  <block id="113d7e75ab71ebd9bcdd1155228482fc" category="paragraph">'volume online -vserver_name_-volume_name_`</block>
  <block id="d5538e0d48b9561003d2506ab100c330" category="paragraph">'system license add -license-code_license_code'license_code'license_code..._`</block>
  <block id="f8bb98c031da24e788f5f02332ac5bb8" category="paragraph">system license clean-up-unused -expired `system license delete -serial-number_node_name --package_license_package_package_`</block>
  <block id="e4c31b5f2905d746c57c1b1f1e038eac" category="paragraph">'system license delete -serial-number_node1_serial_number_-package *`system license delete -serial-number_node2 _serial_number_-package *`</block>
  <block id="bb445430e4b0638bdd79f943cd99a597" category="paragraph">system service-processor network modify -node _node_name _`</block>
  <block id="676d4cfadd30ded5fabdceb082fde10a" category="paragraph">network interface show -curr-node node1 __ role cluster、intercluster、node-mgmt、cluster-mgmt-mgmt</block>
  <block id="bbbfa87c5efa2321ddc7c2656baf791f" category="paragraph">'network port show -node1_-type physical’</block>
  <block id="842f84c9ecff4442b192c3b8a383847f" category="paragraph">network fcp adapter show -node-node1_`</block>
  <block id="f9e6ffe449370be951e5dee9a5e83028" category="paragraph">system node show -instance -node _node1_`</block>
  <block id="a49d3e4ab576cd5b3c708cbd85a5f926" category="list-text">ターゲット・ポートをプログラムするには：system node hardware unified-connect modify -type |-t target-adapter_port_name_`</block>
  <block id="b14f7ec84bbc0ee6e43f8a43e7e8b239" category="list-text">イニシエータ・ポートをプログラムするには' system node hardware unified-connect modify -type |-t initiator -adapter_port_name_`を使用します</block>
  <block id="3145572f78011e126938a030752352da" category="paragraph">storage aggregate relocation start -node1_-destination_node2 _-aggregate-list *-nd-controller-upgrade true」を入力します</block>
  <block id="89f25b06955b673d3b572700377e5520" category="paragraph">storage aggregate relocation show -Node_node1_`</block>
  <block id="1f57e30e6554ed05fdfab4749db897a5" category="list-text">障害が発生したアグリゲートまたは拒否したアグリゲートを再配置します。storage aggregate relocation start -node1_destination_node2 _aggregate-list *-nd-controller-upgrade true</block>
  <block id="d5b3493a1e44c8ea79c837adaccb28d1" category="paragraph">storage aggregate show -node _node2 --state online -root false</block>
  <block id="34d826617b3f9c48944868362f6f276b" category="paragraph">volume show -node-node2 --状態オフライン</block>
  <block id="8d4bf0d9ef542445c79e09c181428349" category="paragraph">'volume online -vserver_name_-volume_volume-name _`</block>
  <block id="19e22a7c92ef31b57af4f64fb0bfb81f" category="paragraph">storage failover show -node _node2 _</block>
  <block id="5a0e98b3df520c8355313fe7af25f5a2" category="paragraph">「storage aggregate show-owner-name_node1_-ha -policy sfo-state online」のように表示されます</block>
  <block id="0be631e7cb236bcc0d7edcbe5a37c28a" category="paragraph">cluster modify -node-node2 -- epsilon false</block>
  <block id="1c2cf95d552fefa09207d46a804cc37f" category="paragraph">cluster modify -node _node3 _-epsilon true</block>
  <block id="90e94ee328a256af2f91a786e9cd354d" category="list-text">どちらかのコントローラで次のコマンドを入力してnode2を停止します。system node halt -node _node2 _`</block>
  <block id="b631c0c901a5596701350144caa12f5d" category="paragraph">storage aggregate show-owner-name_node3_-home-id_node2 _system_id_`</block>
  <block id="0b3ef2eb165b59b12784f339acafdc5a" category="paragraph">「storage aggregate relocation start -node3_node3_destination-node4」-aggregate-list_aggr_name1、aggr_name2..._nd-controller-upgrade true」のように指定します</block>
  <block id="61a053082ff5a1f44a15349efe3f76f8" category="paragraph">storage aggregate relocation show -node_node3_`</block>
  <block id="630cef995c8ca03cb9edd3eb475f7957" category="paragraph">「storage aggregate relocation start -node3_destination_node4」-aggregate-list_aggr_name1、aggr_name2..._nd-controller-upgrade true」のように指定します</block>
  <block id="a1f08a38eee78d50ba988aeb73b842bd" category="paragraph">storage aggregate show -node _node4 --state offline-root false</block>
  <block id="1faa76a43456724df1defa42aa55d352" category="paragraph">volume show -node-node4 --state offline`</block>
  <block id="53d8c0b5e2bdeb9e6aa3dca886003ef4" category="paragraph">'volume online -vserver_name_-volume_name_`</block>
  <block id="9ffb02c2d62ae9052f6119c3fb4c5905" category="paragraph">system node AutoSupport invoke -node _node4に-type all -message "_node2 _successfully upgraded from _platform_old_to _platform_new_"</block>
  <block id="f73357d357bf9a8fd6687b23bddfa84e" category="paragraph">「network interface migrate -vserver vserver_name -lif_lif_name_destination-node node4–destination-port_netport | ifgrp_`</block>
  <block id="bd210634c9483e180212de732ad175ce" category="paragraph">`network interface modify -vserver _vserver_name --lif_datalif_name __-home-node node4 home-port_netport | ifgrp_`</block>
  <block id="5ad0cc882422029afe6ed707f07f5f99" category="paragraph">「network interface migrate -vserver_name_-lif_datalif_name __ destination-node node4–destination-port_netport | ifgrp_`</block>
  <block id="d163a832f080399ac8eefd110915b0b1" category="paragraph">「network interface modify -vserver _vserver_name --lif_datalif_name __-home-node _node4 _home-port_netport | ifgrp_`」</block>
  <block id="d05db157629156f23e4330fb5d951e6a" category="paragraph">「network port broadcast-domain add -ports -ipspace_name_-broadcast-domain mgmt ports_node：port_`</block>
  <block id="86c0cbc4e4bb34cfbadf192d93966920" category="paragraph">「network interface migrate -vserver_name-lif_datalif -name_destination-node-node4 __ destination-port_netport | ifgrp-home-node-node4</block>
  <block id="42cd5180b669552e2933f20b93b9c540" category="paragraph">「network interface modify -vserver _vserver_name __ lif_datalif_name __-home-node port_netport | ifgrp_`」のようになります</block>
  <block id="b7fda8f488be542ba6b3bf54cbcb8481" category="paragraph">'network port delete -node_node_name -- port_port_port_name_`</block>
  <block id="2a339eca27ecf5c35182b21c82475859" category="paragraph">「network interface modify -vserver _vserver_name __-lif lif_name --status-admin down」を参照してください</block>
  <block id="ba38f10031b9749e24abefe1294e5f93" category="paragraph">「network interface modify -lif LIF_name -home-node _new_home_port_`</block>
  <block id="15fcc24eabcc47d2f5b79bc2261b8110" category="paragraph">「network interface modify｛-home-node port_port_on_node2 _-home-node2_-role data｝-home-node _new_home_port_on_node4」となります</block>
  <block id="c1c9b0d9090db8cae48ec760d0c84f93" category="paragraph">「network interface modify -vserver _vserver_name __ home-port_name_-home-node _node4 _lif_lif_name__-status-admin up</block>
  <block id="a6bb74b8cb99c1fd80b2a0b3edca08ab" category="paragraph">'network interface show -home-node _node4 --role data</block>
  <block id="a6b1f2029f11e41153d55cdc64d6c2c8" category="paragraph">「network interface modify -vserver vserver_name __-lif LIF_name -status-admin up</block>
  <block id="010ba24159202b1bac2cd77c8ec1ea80" category="paragraph">「MetroCluster vserver resync -vserver _vserver_name _fcp-mc.headupgrade.test.vs`</block>
  <block id="e94cd9be7ce902c38415449f7a812484" category="paragraph">storage encryption disk modify -disk *-data-key-id authentication_key_id_`</block>
  <block id="c657c3ae0ae199bbaa1464608a597ac0" category="paragraph">network interface show -curr-node node_name --ロールクラスタ、intercluster、nodemmgmt、cluster-mgmt</block>
  <block id="8da2128a6a3986a34895cf5980d84c14" category="paragraph">'network port show -node node_name -- type physical `+</block>
  <block id="4a5a2274e34e5f3b4d5e81db4588e4a3" category="paragraph">`_node_nameは'移行するノードです</block>
  <block id="f690de2de43fbb352bc35dd6139ef16c" category="paragraph">'system node run -node _node_name _`</block>
  <block id="da78ff3fafe58b094ac314c530751191" category="paragraph">「network interface migrate -vserver_name_-lif_lif_name_source -node node2 -destination-node node2 -destination-port_port_name_`</block>
  <block id="cdeebdd64f0b63241167868623f4268a" category="paragraph">「network port broadcast-domain remove-ports -ipspace Cluster -broadcast-domain Cluster -ports_node2：port_`」を実行します</block>
  <block id="8937dc1ce0609b75887630fff796c928" category="paragraph">ifgrp add-port -node node_name -ifgrp_ifgrp_port_port_port_port_port_name_`です</block>
  <block id="a369bef1d46b9a6e88dcba9542634b92" category="paragraph">ifgrp remove-port -node node_name -ifgrp_ifgrp_port_-port_port_port_name_`です</block>
  <block id="ca82a3bd7f422a7589fd8832d8febeaf" category="paragraph">「network interface show -vserver _vserver_name --status-oper down」を参照してください</block>
  <block id="b1436ca8cfc53be5e82377a9cb594083" category="paragraph">「network interface modify -vserver _vserver_name __ lif_lif_name_-home-port_`</block>
  <block id="9d12ffe6a303afa0a5376899a808a262" category="paragraph">「network interface show -data-protocol nfs|cifs -home-node _node2 _」を参照してください</block>
  <block id="bc2267ec9c24ec21874bf4cc796b816e" category="paragraph">「network interface migrate -vserver _Vserver_name -lif_lif_name_-destination -node _node3 _–destination-port_netport | ifgrp_`」の形式で指定します</block>
  <block id="55053aade5fca25fd593fd8d5252e09c" category="paragraph">「network interface modify -vserver _Vserver_name -lif_lif_name_-home-node3_-homeport_netport | ifgrp_`」</block>
  <block id="ae71079411dc4dfde6976b335cb42335" category="paragraph">「network interface migrate -vserver _Vserver_name -lif_lif_name_-destination -node _node3 __ destination-port_netport | ifgrp_`」の形式で指定します</block>
  <block id="1fe218a8b1c9d824835cd743ae0651c3" category="paragraph">'network interface show -curr-node node3：-data-protocol CIFS|NFS</block>
  <block id="2cea3f134cf76cc3abaaa88a2b402e1f" category="paragraph">「network interface modify -vserver _Vserver_name --lif_lif_name_-status-admin up」という名前になります</block>
  <block id="a6823219661708acd40fb583c228ab5b" category="paragraph">「network port vlan delete -node node_name」-port_ifgrp -- vlan-id_vlan_ID_`</block>
  <block id="cc917e86986e970492f7be45fdc7b952" category="paragraph">「network port ifgrp show -node node_name」-ifgrp _ifgrp_name __ instance</block>
  <block id="8909b365f802b24a2d37f4d90ed96920" category="paragraph">「network port ifgrp remove-port -node_node_name」-ifgrp_ifgrp_name -port_port_name_`」という形式で指定します</block>
  <block id="173bdd18bf4da14689baa4b97bbd0911" category="paragraph">ucadmin modify -m fc -t target_adapter_`</block>
  <block id="e963df8c33a142fa50363ce5f3bbcbb9" category="paragraph">ucadmin modify -m fc -t initiator_adapter_`</block>
  <block id="b552b2e6a2a24270da2f85599d5289a0" category="paragraph">storage aggregate show -node _node3 --state online -root false</block>
  <block id="592033840c276a690ab8f96c3c733525" category="paragraph">このコマンドで使用する'_vserver_name_'は'前のvolume showコマンドの出力にあります</block>
  <block id="5ae519d56c0326f582652e283c3ea809" category="paragraph">「network interface modify -vserver _vserver_name -- lif_lif_name_-home-node_name__-status-admin up</block>
  <block id="2d5c970ee87c5df0e21b3a8b9ed88ccb" category="paragraph">「security key-manager external add-servers -key-servers_key_manager_server_ip_address _」のように指定します</block>
  <block id="cf1e3ade592584c451b16fefa9ffaf61" category="paragraph">「storage failover show -fields local-missing-disks、partner-missing-disks」</block>
  <block id="0d12a6e9cec4647b5d9b5253b4073e2b" category="paragraph">storage aggregate show-owner-name_node3_`</block>
  <block id="0e71c4af1c9d433ba1aca904b40b449e" category="paragraph">storage aggregate show-owner-name_node4</block>
  <block id="6041278c5d25ed9c37ecc9a4ba73306b" category="paragraph">'system license add -license-code_license_code'license_code'license_code..._`</block>
  <block id="ee58b8665fc7b6cbed254e1253d5deb9" category="paragraph">'system license delete -serial-number_node_name --package_license_package_`</block>
  <block id="bcacb0089032ec901277a70c73c0ec1b" category="paragraph">'system license delete -serial-number_node1_serial_number'-package *</block>
  <block id="4a472f5ad7101a303b004c96117957a1" category="paragraph">'system license delete -serial-number_node2 _serial_number'-package *</block>
  <block id="0a06fcfc5f0fe34a7f9397c4cfc05b2a" category="paragraph">`set diag; systemshell -node-node_name --コマンドsudo kenv -u -p kmip.init.maxwait`</block>
  <block id="3bc434e6b7496efb94a7be3c795bee4a" category="paragraph">storage aggregate relocation start -node-source_node__ destination_destination-node-aggregate-list *</block>
  <block id="8723a951ee1fe15da772afbecba7e9cc" category="paragraph">'system controller replace start-nodes_node_name _`</block>
  <block id="bf0cc0f414d71ae261bebb6ad521c510" category="list-text">ノード 1 がブートすると、ノード 1 のルート以外のすべてのアグリゲートがノード 1 に戻されます。アグリゲートの手動での再配置を、node1からnode2に実行する必要があります。storage aggregate relocation start -node node1 -destination node2 -aggregate-list *-ndocontroller -upgrade true</block>
  <block id="63f803a39905918dce04f857b0dfb805" category="paragraph">'security key-manager external restore -node _new_controller_name_`</block>
  <block id="786cfe1c4db21c6a96fc7abf3a002267" category="paragraph">「storage aggregate relocation start -node1_-destination_node2」-aggregate-list_aggr_name --nd-controller-upgrade true」を指定します</block>
  <block id="07d2b82cff600a145725916fee544709" category="cell">次のコマンドを使用します。storage aggregate relocation start -node node1 -destination node2 -aggregate-list_aggr_list --nd-controller-upgrade true -override-vetoes true</block>
  <block id="eb3cf479c5f4d8026ff2061e0c748373" category="cell">次のコマンドを使用します。storage aggregate relocation start -node node1 -destination node2 -aggregate-list_aggr_list --nd-controller-upgrade true -override-vetoes true -override-vetoes true -override-vetoes destination-checks true</block>
  <block id="b23b4170fdfdcbdd9354becf14343de7" category="paragraph">ucadmin modify -m fc -t initiator -f adapter name_`</block>
  <block id="fe1416becf68ed78aa702542213dd3b3" category="paragraph">外付けディスクをサポートするシステムから、外付けディスクもサポートするシステムにアップグレードする場合は、に進みます <block ref="8dac798a0974640f6cae187a1dbe2d57" category="inline-xref-macro-rx"></block>。</block>
  <block id="9395831ce33669d17052a27e98938d9c" category="paragraph">外付けディスクをサポートするシステムから、AFF A800システムなどの内蔵ディスクと外付けディスクの両方をサポートするシステムにアップグレードする場合は、に進みます <block ref="8de8415e5ddf050c51dc9df1ad54385b" category="inline-xref-macro-rx"></block>。</block>
  <block id="d5349bcef34e462b3ca716bdf6c513bd" category="list-text">[[auto_check3_step22]] LOADERプロンプトで、次を起動します。</block>
  <block id="a87ed5e329e9adfa32bf73a93bebebf8" category="paragraph">「aggr_online root_aggr_from__」を参照してください</block>
  <block id="cfbaacc1ba42cda8c375335500d01240" category="paragraph">「aggr offline_root_aggr_on_node3」を参照してください</block>
  <block id="70ff478dea6e58f0f7e39efc7c26f752" category="paragraph">'aggr options aggr_from__ node1 __ root</block>
  <block id="d62c51936f24f85c8256879ccf0c03f5" category="cell">'security key-manager setup -node _node_name _`</block>
  <block id="3b1dc35737c41d4b6fd987e950141db7" category="paragraph">このステータスが「Transferring」の場合は、転送を中止する必要があります。snapmirror abort -destination -vserver _vserver_name _`</block>
  <block id="5f885c9d1f15ecb39fddf4635d1d4928" category="paragraph">外付けディスクをサポートするシステムから、外付けディスクもサポートするシステムにアップグレードする場合は、に進みます <block ref="1abe7aef97cf6f4670adea7171f10403" category="inline-xref-macro-rx"></block>。</block>
  <block id="e254aab1a193523733c079cf1e13cacb" category="paragraph">外付けディスクを使用するシステムから、AFF A800システムなどの内蔵ディスクと外付けディスクの両方をサポートするシステムにアップグレードする場合は、に進みます <block ref="1917bbf2d6d289423b4a495f5ba4fcca" category="inline-xref-macro-rx"></block>。</block>
  <block id="c591963f8f7b043803a41f69e9ac20a6" category="list-text">[[auto_check_4_step22]] LOADERプロンプトで、次を起動します。</block>
  <block id="41f0f9b1ee99b9ecde96064b40d13bb1" category="paragraph">「network interface migrate -vserver Cluster -lif LIF_name -source-node node3 -destination -node node3 -destination-port_port_name_`」を実行します</block>
  <block id="492be52c34773a3310eeeaae121d01cf" category="paragraph">「network port broadcast-domain add-ports -ipspace Cluster -broadcast-domain Cluster -port node：port」のようになります</block>
  <block id="5ec824db325209d322c6c40d3388ca3f" category="list-text">LIFのホームポートを変更します。「network interface modify -vserver vserver_name -home-port_name_–home_port_port_name_`必要に応じて、クラスタ間ブロードキャストドメインを調整してインタークラスタLIFを移行します。データ LIF は変更されません。</block>
  <block id="93669c55bf12d9aa964a6f157f0e0a45" category="paragraph">「network port show -node _-port_port_-fields broadcast-domain」を指定します</block>
  <block id="4fb38c7b471866eeea983bc8648d4868" category="paragraph">'broadcast-domain add-ports -ipspace Cluster-broadcast-domain Cluster-ports_node: port_`</block>
  <block id="270c9c0b120fb7418b1df6e278abbe78" category="paragraph">「network interface migrate -vserver Cluster -lif LIF_name -source-node _node3_node3_destination-node-node3 _ destination-port_port_name_`</block>
  <block id="351baa830dcdfc937a395d1a88be127c" category="paragraph">「network interface modify -vserver vserver-lif lif_name _–home-port_port_name_`」になります</block>
  <block id="a7d542688e255a907ca072d075b870bb" category="paragraph">「network interface migrate -vserver Cluster -lif LIF_name -source-node node3 destination-node node3 -destination-port_name_`</block>
  <block id="7aa0d5212b8f94602054950124e5427d" category="paragraph">「network interface modify -vserver vserver_name -lif_lif_name_–home-port_port_name_`</block>
  <block id="f70ecc5a0f4701f9f62fcd3e0a7ecee8" category="paragraph">「network port vlan create -node_node4」-vlan_vlan-names_</block>
  <block id="957ef9e5e93b1b4ab14a06ef6a857f43" category="paragraph">「network port ifgrp create -node _node4」-ifgrp_port_ifgrp_name -distr-func</block>
  <block id="d1d818ce8442975a7100e165e1af4ea6" category="paragraph">「network port broadcast-domain create -ipspace Default -broadcast-domain _broadcast_domain_names _-mtu_mtu_size_-ports_node_name：port_name、node_name：port_name、node_name：port_name</block>
  <block id="c477da37744df78aa79c382b8da95f88" category="paragraph">「network port broadcast-domain add-ports -broadcast-domain broadcast_domain_names」-ports_node_name：port_name、node_name：port_name、node_name：port_name</block>
  <block id="bb5832fe766e996d6a388078ef1764f0" category="list-text">storage array config show -switch_switch_name_`</block>
  <block id="11f09c937d4460ab0e473a33da9b1ab8" category="paragraph">network interface show -curr-node _node2 -role data</block>
  <block id="5dad8f32e66b8ee8eadc502efd8b13f1" category="paragraph">「network port ifgrp show -node _node2」-ifgrp _ifgrp_nameのように表示されます</block>
  <block id="9b7d57d0483912f37373984d2377cd38" category="paragraph">「network interface modify -vserver _vserver_name __ lif_lif_name_-home-nodename_-status-admin up</block>
  <block id="be169d5dec3b5782fc54ffe06db0f01d" category="paragraph">'network interface show -data-protocol _iscsi|fcp_-home-node _node3 _`</block>
  <block id="de16a1a2e971f09625e82410defe17a1" category="paragraph">「network interface modify -vserver _Vserver_name --lif_lif_name_-status-admin down」を指定します</block>
  <block id="a9989d8f1e7708f962bd9c5097c0053a" category="paragraph">`portset remove -vserver _Vserver_name -portset_portset_name__-port-name _port_name_`</block>
  <block id="a66e985d23f5287107e99383fdd5ffef" category="paragraph">「network interface modify -vserver _Vserver_name -lif_lif_name_-home-port_`</block>
  <block id="f31b52f0e37db7da57ff6ab88235e135" category="paragraph">`portset add -vserver _Vserver_name -portset_portset_name__-port-name _port_name_`</block>
  <block id="d68390426f58044ac5eb930d307ab3b5" category="paragraph">'network interface modify -home-node port_name_--home-node3_lif data-status admin up</block>
  <block id="ccf444ace4cdb74118c18eb6b97b7b09" category="paragraph">'network interface show -data-protocol iscsi|fcp-home-node-node4 _`</block>
  <block id="6a37e8a9d9359e09d770a057684a12d6" category="paragraph">「network interface modify -vserver _vserver_name __ lif_lif_name_-home-port_'」を指定します</block>
  <block id="97ef93c03531a15f7fcd1160b624a003" category="paragraph">「network interface modify -home-node port_port_name_-home-node4_-lif data-statusadmin up」のようになります</block>
  <block id="a46e58126262d4f20f687f4b6340fa04" category="paragraph">'network port vlan create -node_node_name -- vlan_vlan-names_</block>
  <block id="c85350c19aef1d2e9ef16125725cfbff" category="paragraph">「network port ifgrp create -node _node_name」-ifgrp _port_ifgrp_names_-distr-func」という形式で指定します</block>
  <block id="6ffba319a9343d4d7079cd092fc1731f" category="paragraph">「network interface migrate -vserver Cluster -lif LIF_name -source-node node4 destination -node node4 -destination-port_name_`</block>
  <block id="6f6feb1d5079ae856c3e038f36cf5511" category="paragraph">「network interface modify -vserver _vserver_-lif lif_name _–home-port_port_name_`」です</block>
  <block id="714116d25588d456eb2625b3a4e3438f" category="paragraph">storage aggregate relocation start -Node_node1_-destination_node2 _aggregate-list *-ndocontroller -upgrade true</block>
  <block id="c2acdfddae4bd8e19301f3c9da97795f" category="paragraph">storage aggregate show-owner-name_node1_`</block>
  <block id="782650bc65c7f77fc89c4076c7b6450d" category="paragraph">volume show -node node1 __-state offline`</block>
  <block id="d87163e47ee27f2782fe148edbe3ed57" category="paragraph">'network port reachability repair-Node_node_name -- port_port_port_name_`</block>
  <block id="ec14d769131d094d612c9fca445d8baa" category="paragraph">「変位インターフェイスのリストア-home-node-node-node_node_name _- vserver_vserver_name _-lif - name_lif_name_name_」のように指定します</block>
  <block id="5062794872bed9f85f36826d260cf264" category="paragraph">「network interface modify -vserver _vserver_name __ lif_lif_name_-home-nodename_-status-admin up</block>
  <block id="f198332498f4eb50e868251db60468b3" category="paragraph">storage aggregate show -nodes_node2 __-is-home true</block>
  <block id="bcc294d7e5b811c580b0a91d09164b49" category="paragraph">storage aggregate relocation start -node2_-aggr_aggr_node_A_1 -destination_node1_`</block>
  <block id="6ae24b2060eb78a800c8051168b74065" category="paragraph">setENV partner-sysid_node1_sysid_`</block>
  <block id="717690eebe56c458e0ffa4bc5f0d6525" category="paragraph">「network interface modify -vserver _vserver_name __ lif_lif_name_-home-nodename_-status-admin up</block>
  <block id="e31eb1c2cddca02e41412f1b6cd2b302" category="list-text">アップグレードしたnode1は、最初にnode1に属していたアグリゲートのホーム所有者および現在の所有者です。</block>
  <block id="c33c724b237783259e8e28cbab49ca90" category="paragraph">「network port show -node node_name --port_port-name_-fields broadcast-domain」</block>
  <block id="d27b633eba5532d4e3b0153c7e8ba81f" category="paragraph">「network port modify -node _node-name __ port_port_name_-ipspace Cluster -mtu 9000」の形式で指定します</block>
  <block id="a385fc25835bc7fdf106d1ea876c6df0" category="paragraph">「MetroCluster vserver resync -vserver _Vserver -name _」と入力します</block>
  <block id="09ddf190b383bfb8830070907f2476f1" category="paragraph">network interface migrate -vserver Cluster -lif LIF_name -source-node _node3_node3_destination-node-port_node3 -destination-port_port-name_`</block>
  <block id="b875887df773ea6f3f2eb58591c975a5" category="paragraph">network interface modify -vserver Cluster -lif LIF_name–home-port_port_port_name_`</block>
  <block id="d60435ea15cee212cf292da0bab5ff8f" category="paragraph">「network port broadcast-domain add-ports -ipspace Cluster -broadcast-domain Cluster -ports_node：port_`」というメッセージが表示されます</block>
  <block id="8784faee47bd495a25ae3219b33adf97" category="paragraph">cluster show -node _node3 --フィールドの健常性</block>
  <block id="6bfb8260edeb4281c26daf1a0f636bed" category="paragraph">network interface show -fields home_node、home-port_`</block>
  <block id="a2e106f5c4b014a30111356ef51939a2" category="paragraph">「network interface modify -vserver _Vserver -name _-lif_lif-name_–home-port_port-name_`」です</block>
  <block id="7109eede0c0d8b22c0220308a42f8f33" category="paragraph">'network port delete -node-node-name-'port_port-name_`</block>
  <block id="4661aca5a4351bd06a379b8a8c19a0a0" category="paragraph">network interface modify -failover-group_failover-group__-failover-policy _failover_policy_`</block>
  <block id="e5b7dcb57038c5c031b59bd236bd41c1" category="paragraph">「network port broadcast-domain remove-ports -ipspace default-broadcast-domain default-ports_node: port_`」というメッセージが表示されます</block>
  <block id="4c5e40a0d73ba8acb1095dbb78d6ead8" category="paragraph">「network port vlan delete -node _nodename」-port_ifgrp_-vlan-id_vlan_ID_`</block>
  <block id="74d77a3dc1a9f3976cd4b66d0045da79" category="paragraph">「network port show -node _-port_port_-fields broadcast-domain」次の例は、ノード4のクラスタドメインにポート「e0a」があることを示しています。</block>
  <block id="033a0895524acbe467659a15ba065ebc" category="paragraph">「MetroCluster vserver resync -vserver _vserver_name _」のようになります</block>
  <block id="eb501d5e939bfe542e8831a0cddd0387" category="paragraph">「network interface migrate -vserver Cluster -lif LIF_name -source-node node4 -destination-node node4 -destination-port_port_name_`」を実行します</block>
  <block id="bbda3f92dd82ccfb448ae4052e43524e" category="list-text">すべてのLIFフェイルオーバーグループを調整します。「network interface modify -failover-group _failover_group __-failover-policy _failover_policy_</block>
  <block id="231ba3135a6e31caf6b3923af4c55beb" category="paragraph">network interface show -curr-node node3 _`</block>
  <block id="07493a0fc8c0732e892bde4e2a915195" category="paragraph">「 storage aggregate relocation start 」、「 override-vetoes 」、および「 override-vetoes destination-checks 」オプションの詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ONTAP 9.8 コマンド：マニュアルページリファレンスにリンクするには、次の手順を実行します。</block>
  <block id="d54e143bd4cd39e7a6a6ee443fa760e8" category="paragraph">'system controller replace start-nodes _node_name --nso false</block>
  <block id="26d089c59661373f7adc82d935ee66ec" category="paragraph">「network port broadcast-domain remove-ports -broadcast-domain broadcast_domain_name」-ports_node_name -ports_node_name：port_name」</block>
  <block id="c32905979b8d558b27cabd72b7947590" category="paragraph">「network port ifgrp add -port -node node_name」-ifgrp_-port_port_port_name_`</block>
  <block id="1373295f01b75104fa472c0bcef10ac5" category="paragraph">「network port reachability show -node node_name --port_ifgrp_`」という形式で表示されます</block>
  <block id="e939420012f5682ed53e7ba265ab8761" category="paragraph">「network port broadcast-domain add-ports -broadcast-domain broadcast_domain_name」-ports_node：port_</block>
  <block id="9ed44776df842430b8a272b3696da823" category="paragraph">'network port reachability repair-Node_node_name -- port_port_port_name_`</block>
  <block id="206a6f7ae44faef6e8990b491b81f8b5" category="paragraph">network interface show -fields home-port、status-admin</block>
  <block id="5bc4edc88ab231e79ed2439d2aef1b01" category="paragraph">「network port broadcast-domain remove-ports -broadcast-domain broadcast_domain_name」-ports_node_name -ports_node_name：port_name</block>
  <block id="e9e5c266020024c12c708f4f29a26d58" category="paragraph">「cluster controller -replacement network変位- VLANs show」と表示されます</block>
  <block id="92d0b584c5f6f73a0c9afe87331eabdb" category="paragraph">クラスタ・コントローラ交換ネットワークが取り外されましたVLANがリストアされました</block>
  <block id="9446cb9af5659fef22d79389076fd8e8" category="list-text">必要に応じて'クラスタコントローラ交換ネットワークではないVLANポート用に新しいVLANポートを作成しますが'VLANは出力を示しますが'他の物理ポート上で構成する必要があります</block>
  <block id="9d27816aaf2ba7a2b350d04b6445a0ca" category="paragraph">「cluster controller -replacement network変位-interface restore-home-node-node_node_name _-vserver_vserver_name _-lif - name_lif_name_`</block>
  <block id="e2cfe3f2f5162bd48bbb5fff263ee435" category="sidebar">ステージ 1 ：アップグレードの準備（ONTAP 9.8以降での手動アップグレード）</block>
  <block id="9ad50bf57a679f1360d84fb707885cdc" category="sidebar">ステージ 2 ：ノード1の再配置と撤去（ONTAP 9.8以降での手動アップグレード）</block>
  <block id="553bd54dfad85955aae7dae67c2e3916" category="sidebar">ステージ 3 ：node3のインストールとブート（ONTAP 9.8以降での手動アップグレード）</block>
  <block id="a1943099aa30a6c2efd4a579176c2941" category="sidebar">ステージ 4 ：情報を記録してnode2を撤去（ONTAP 9.8以降での手動アップグレード）</block>
  <block id="48839137eaf0562b138582edd90137cb" category="sidebar">ステージ 5 ：ノード4のインストールとブート（ONTAP 9.8以降での手動アップグレード）</block>
  <block id="dae43a2f9b6862b045e06fc8e8a1f0fa" category="sidebar">ステージ 6 ：アップグレードの完了（ONTAP 9.8以降での手動アップグレード）</block>
  <block id="5c57d2af87e466b26b2b4fc39ddb3528" category="sidebar">トラブルシューティング（ONTAP 9.8以降での手動アップグレード）</block>
  <block id="74e4fa274dfb12601061dfed2bb17551" category="sidebar">ステージ 1 ：アップグレードの準備（ONTAP 9.5から9.7への「システムコントローラの交換」でアップグレード）</block>
  <block id="643d5d93057442ceeb2535e1257eced5" category="sidebar">ステージ 2 ：node1の再配置とリタイア（ONTAP 9.5から9.7への「システムコントローラの交換」でアップグレード）</block>
  <block id="ada4b764c9c08906945e92eb93540a70" category="sidebar">ステージ 3 ：node3のインストールと起動（ONTAP 9.5から9.7への「system controller replace」にアップグレード）</block>
  <block id="19058e0506f0695149186a942876cf05" category="sidebar">ステージ 5 ：node4のインストールとブート（ONTAP 9.5から9.7への「system controller replace」でアップグレード）</block>
  <block id="a873c3af330abd13d1f0d13b37f0184a" category="sidebar">ステージ 6 ：アップグレードの完了（ONTAP 9.5から9.7への「システムコントローラの交換」でアップグレード）</block>
  <block id="76fc41bc8d83116ac63baddd0b449b53" category="sidebar">トラブルシューティング（ONTAP 9.5を9.7にアップグレードする場合は、「システムコントローラの交換」にアップグレード）</block>
  <block id="118c7af95c723f6e6838692c3038dd9f" category="sidebar">ステージ 1 ：アップグレードを準備（AFF A900またはFAS9500にアップグレード）</block>
  <block id="addaea56fd6a1402dec2fde28d5b8826" category="sidebar">トラブルシューティング（AFF A900またはFAS9500にアップグレード）</block>
  <block id="7927776d5f92bfcf018eb0ab38e8e4f1" category="sidebar">ステージ 1 ：アップグレードを準備（ONTAP 9.7以前での手動アップグレード）</block>
  <block id="45af182181e08da91f7cc5e906088028" category="sidebar">ステージ 2 ：ノード1の再配置と撤去（ONTAP 9.7以前の手動アップグレード）</block>
  <block id="7b13f30f0f73cc51f6107da92706a043" category="sidebar">ステージ 3 ：node3のインストールとブート（ONTAP 9.7以前での手動アップグレード）</block>
  <block id="baeed26cf61fdd410097b62b1422787a" category="sidebar">ステージ 4 ：情報を記録してnode2を撤去（ONTAP 9.7以前での手動アップグレード）</block>
  <block id="df8d8c05fa045b13fa58cf2372ff5463" category="sidebar">ステージ 5 ：node4のインストールとブート（ONTAP 9.7以前での手動アップグレード）</block>
  <block id="3d0f7ed3e1c463b0750672ca18860a0f" category="sidebar">ステージ 6 ：アップグレードの完了（ONTAP 9.7以前での手動アップグレード）</block>
  <block id="e910f157098af665af7183c621e0e16e" category="sidebar">トラブルシューティング（ONTAP 9.7以前での手動アップグレード）</block>
  <block id="4ca1dd66d65d9f1294c45c6d431d28f1" category="sidebar">ステージ 1 ：アップグレードの準備（ONTAP 9.8以降では「システムコントローラの交換」でアップグレード）</block>
  <block id="ffe0419692cf91535dfc65f2ebc6be8c" category="sidebar">ステージ 2 ：ノード1の移動と撤去（ONTAP 9.8以降では「システムコントローラの交換」にアップグレード）</block>
  <block id="24b8375b0f225570ea07ebeb314eb9c8" category="sidebar">ステージ 3 ：node3のインストールと起動（ONTAP 9.8以降では「システムコントローラの交換」にアップグレード）</block>
  <block id="c7f6c7edba62aeb0070664af2982188f" category="sidebar">ステージ 5 ：ノード4をインストールしてブートします（ONTAP 9.8以降では「システムコントローラの交換」にアップグレードしてください）。</block>
  <block id="a7bb4f4bc15b3845dcbe4dd85398882a" category="sidebar">ステージ 6 ：アップグレードの完了（ONTAP 9.8以降では「システムコントローラの交換」でアップグレード）</block>
  <block id="ad783963276a8d71cfdce2a0884ea6fe" category="sidebar">トラブルシューティング（ONTAP 9.8以降の「システムコントローラの交換」にアップグレード）</block>
  <block id="8ec9dcb34f09496bfb877249e8b20474" category="paragraph">コントローラのアップグレード中に問題が発生した場合は、を参照してください <block ref="8b711d7eff849b62a32d0b2d66f85a6c" category="inline-link-macro-rx"></block> 詳細および解決策については、手順の末尾にあるセクションを参照してください。</block>
  <block id="06f03bd659c1d709e9f3635dd299f179" category="paragraph">「 * Status Admin/Oper * 」列を参照して、停止している LIF がないかどうかを確認します。停止している LIF がある場合は、を参照してください <block ref="ee9e7ed4648f930256981fc705ceec06" category="inline-link-macro-rx"></block> セクション。</block>
  <block id="9513edce58e5f4ee5ec2d01f6e5957ea" category="paragraph">'system node AutoSupport invoke -node * -type all -message MAINT=_maintenance-window-in-hours_`</block>
  <block id="8ae18c4ca2d925d74bcd4990d28f04f0" category="paragraph">このコマンドで使用する'_vserver-name_'は'前のvolume showコマンドの出力にあります</block>
  <block id="deb8c459cd0f080a7a777d2ba3e57215" category="sidebar">ステージ 4 ：node2の移動と撤去（ONTAP 9.8以降では「システムコントローラの交換」にアップグレード）</block>
  <block id="d0a53cd31cb7e1982b0b4b4350530c07" category="sidebar">ステージ 4 ：node2の再配置と撤去（ONTAP 9.5から9.7への「システムコントローラの交換」にアップグレード）</block>
  <block id="2052b0cdd036221aef35041d554abfe3" category="example-title">コンソールの出力例を展開します</block>
  <block id="9bcbfad54c93824c94a6b85331bed53e" category="list-text">ONTAP 9.6以降では、この 手順 環境 システムで4ノードMetroCluster 構成以上を実行しています。MetroCluster 構成サイトは物理的に異なる場所に設置できるため、 HA ペアの場合は各 MetroCluster サイトでコントローラの自動アップグレードを個別に実行する必要があります。</block>
  <block id="b4e995bdd78b40e4a973dab2bcf9ed16" category="list-text">[man_map_1_step5] ONTAP 9.8以降手順 、ONTAP では、ネットワークポートの到達可能性の修復時にブロードキャストドメイン間でポートが移動された場合に、LIFのホームポートが自動的に変更されます。LIF のホームポートが別のノードに移動された場合や割り当てが解除された場合、その LIF は移動された LIF として表示されます。ホームポートがなくなった、または別のノードに再配置された、取り外した LIF のホームポートをリストアします。</block>
  <block id="17c47d164b7fe13ac454c776902ff45f" category="list-text">[man_map_2_Step5] ONTAP 9.8以降手順 では、ネットワークポートの到達可能性が修復されたときにブロードキャストドメイン間でポートが移動された場合、ONTAP によってLIFのホームポートが自動的に変更されます。LIF のホームポートが別のノードに移動された場合や割り当てが解除された場合、その LIF は移動された LIF として表示されます。ホームポートがなくなった、または別のノードに再配置された、取り外した LIF のホームポートをリストアします。</block>
  <block id="ee4259e7fa1dc73036cc58b6216ac26d" category="list-text">[[assign_LIFs ]] FAS8300、AFF A400、FAS8700システムなど、特定のシステム ポート「e0a」と「e0b」をハイアベイラビリティ（HA）インターコネクトポートとして使用します。FAS8200やAFF A300などのシステムから、ポート「e0a」と「e0b」をHAインターコネクトポートとして使用するシステムにアップグレードする場合、 元のシステムのこれらのポートに設定されている管理LIFとクラスタ間LIFを、交換用システムの別のポートに再割り当てする必要があります。</block>
  <block id="bb90459e9b4aa7c112f4569c2ec19b97" category="admonition">交換用システムでポート「e0a」と「e0b」がHAインターコネクトポートとして使用されている場合、これらのポートで設定された管理LIFまたはクラスタ間LIFがあると、HA構成でポート「e0a」と「e0b」を使用して交換用システムがブートできなくなるため、アップグレードが失敗する可能性があります。</block>
  <block id="6e739de8c1925a6779ee076df8d4a525" category="list-text">交換用システムがポート「e0a」と「e0b」をHAポートとして使用しているかどうかを確認します。<block ref="f73c85a53b5d65cc9c35da0b9e0d2f09" category="inline-link-rx"></block></block>
  <block id="894aba2fe8eca246912b5f6b167c23c7" category="list-text">必要に応じて、元のシステムのポート「e0a」と「e0b」に設定されている管理LIFまたはクラスタ間LIFを特定します。</block>
  <block id="2852e76cc043363d809f6bf5b5528cc8" category="paragraph">'network interface show -home-node port_name_`</block>
  <block id="d76cdfb6e1e829cf1a8b29cf0365bb25" category="list-text">必要に応じて、交換用システムでHAポートとして使用していないネットワークポートに、影響を受けた管理LIFまたはクラスタ間LIFを再割り当てします。</block>
  <block id="868d1b2090ba0cdd2fdfac75d3678175" category="paragraph">「network interface modify -vserver _vserver_name __ lif_lif_name_-home-port_port_name_`」を指定します</block>
  <block id="8764c983c6cbb2a9680fb3a948850423" category="paragraph">「network interface revert -vserver _vserver_name -- lif_lif_name_`</block>
  <block id="e413e03d3c6a379c74dbb9834ed46b76" category="paragraph">次の例では、ネットワークポート「e0a」と「e0b」の管理LIFとクラスタ間LIFをネットワークポート「e1a」および「e1b」に再割り当てします。使用するネットワークポートはシステムによって異なるため、ノードによって異なるネットワークポートが使用されている場合があります。</block>
  <block id="82d8cfa6b0eabc1385f0c7a740d05580" category="image-alt">交換用システムのネットワークポートへのLIFの再割り当て</block>
  <block id="c8ff2d709da7bd973a342d6eb7c6952c" category="doc">ONTAP 9.8以降で最終アップグレード手順を実行します</block>
  <block id="209c912a443f069511053cb5ed7c8175" category="paragraph">これらの手順は、ONTAP 9.8以降を実行しているシステムに適用されます。ONTAP 9.7 以前を実行している場合は、の手順を使用する必要があります <block ref="91f2c94dbfb488703dd443559499d8cb" category="inline-xref-macro-rx"></block>。</block>
  <block id="be1c64568381eb09df4f452433b584eb" category="doc">ONTAP 9.8以降を使用してネットワークポートをマッピングします</block>
  <block id="6502ece9e464ee9b76872ac1891890b1" category="paragraph">これらの手順は、ONTAP 9.8以降を実行しているシステムに適用されます。ONTAP 9.7 以前を実行している場合は、の手順を使用する必要があります <block ref="02cafea91ec73e57361f0e2559069996" category="inline-xref-macro-rx"></block>。</block>
  <block id="7893bfa78df90b820f889d3721889827" category="list-text">[[map_98_7] ONTAP 9.8以降では、ネットワークポートの到達可能性が修復手順 の際にブロードキャストドメイン間でポートが移動されると、ONTAP によってLIFのホームポートが自動的に変更されます。LIF のホームポートが別のノードに移動された場合や割り当てが解除された場合、その LIF は移動された LIF として表示されます。ホームポートがなくなった、または別のノードに再配置された、取り外した LIF のホームポートをリストアします。</block>
  <block id="4a78c0c542d23d6fb37a4fe36a2eadfa" category="paragraph">これで物理ポートのマッピングが完了しました。アップグレードを完了するには、に進みます <block ref="9755845ab3f2cc4f5f51d0cd1be3153b" category="inline-xref-macro-rx"></block>。</block>
  <block id="cef52224881fd5dedd26a040c1359ee9" category="inline-xref-macro">ONTAP 9.8以降で最終アップグレード手順を実行します</block>
  <block id="c2acf33141c1e1d2087c7bc181c42bb7" category="paragraph">以下の手順は、 ONTAP 9.7 以前を実行するシステムに該当します。ONTAP 9.8以降を実行している場合は、の手順 を使用する必要があります <block ref="3b2ec221cc352b28fa15c204e2ae21f2" category="inline-xref-macro-rx"></block>。</block>
  <block id="8369511a77d2231fe0dc2666b1eb7bc3" category="list-text">ONTAP 9.8以降を実行しているシステムの場合は、* STOP *をクリックします。の手順を使用する必要があります <block ref="9755845ab3f2cc4f5f51d0cd1be3153b" category="inline-xref-macro-rx"></block>。</block>
  <block id="1e6def9e9dd4f1f64f3de8b0a57f2778" category="paragraph">以下の手順は、 ONTAP 9.7 以前を実行するシステムに該当します。ONTAP 9.8以降を実行している場合は、の手順 を使用する必要があります <block ref="ccd35a957ce7354dac1b2737d83bc4f4" category="inline-xref-macro-rx"></block>。</block>
  <block id="2fdb8263a29ca795ef82322d81fda239" category="list-text">ONTAP 9.8以降を実行しているシステムの場合は、* STOP *をクリックします。の手順を使用する必要があります <block ref="ccd35a957ce7354dac1b2737d83bc4f4" category="inline-xref-macro-rx"></block>。</block>
  <block id="ef29cfe4123c7b4d36dffdb01aac77fc" category="summary">ONTAP 9.8以降またはONTAP 9.7以前でアップグレードを完了します。</block>
  <block id="7b416fb3b0ecbf485baebef5aa26f421" category="inline-xref-macro">ONTAP 9.8以降でアップグレードを完了します</block>
  <block id="a728e0150a3319c807decfef9fd8b00c" category="list-text"><block ref="a728e0150a3319c807decfef9fd8b00c" category="inline-xref-macro-rx"></block></block>
  <block id="a6085d08f51c0f7b45dd12344b481637" category="list-text"><block ref="a6085d08f51c0f7b45dd12344b481637" category="inline-xref-macro-rx"></block></block>
  <block id="8b793a703e41666db1139bfcac16c982" category="inline-xref-macro">管理LIFまたはクラスタ間LIFを再割り当てしました</block>
  <block id="619d3ee4d9d03f1c8e85902faacf818d" category="admonition">FAS8300、AFF A400、FAS8700のように、ポート「e0a」と「e0b」をハイアベイラビリティ（HA）インターコネクトポートとして使用するシステムにコントローラをインプレースアップグレードする場合、 を確認します <block ref="5b2064061510a35b81a212ddd1a165e7" category="inline-xref-macro-rx"></block> アップグレード手順 を開始する前に、元のシステムのポート「e0a」と「e0b」で設定します。</block>
  <block id="7389b01d5fe0e17f5523a7fb85295f91" category="inline-link-macro">こちらの技術情報アーティクル</block>
  <block id="2ee5a2dd85f4cccb6dbb3701b2a263ba" category="paragraph">コントローラのアップグレードに失敗し、「rlib_port_ipspace _assign」というエラーメッセージが表示された場合は、交換用システムでHAポートとして使用されている元のシステムのネットワークポートのLIFをリバートして削除する必要があります。詳細については、を参照してください <block ref="48beba1570dcc6cd04554aaa6118327f" category="inline-link-macro-rx"></block>。</block>
  <block id="81115b2b20b22282416f6d252f1227a9" category="summary">ONTAP 9.8以降でアップグレードを完了するには、次の手順を実行します。</block>
  <block id="7a67102068269b1046a62f34688d751f" category="paragraph">ONTAP 9.8以降でアップグレードを完了するには、次の手順を実行します。</block>
  <block id="910c99c10b2b8f326ca77c1b3e34eb83" category="list-text"><block ref="910c99c10b2b8f326ca77c1b3e34eb83" category="inline-link-macro-rx"></block></block>
  <block id="479694184a7596b8d654b4519a939fb4" category="list-text"><block ref="479694184a7596b8d654b4519a939fb4" category="inline-link-macro-rx"></block></block>
  <block id="b20fa92767a639ebf6c7b69aac21e88f" category="list-text">ノードをブートメニューでブートします。</block>
  <block id="50a538d5879b1b2e51ce2921f4a4ee75" category="list-text">ノードがブートメニューで停止したら、「22/7」と入力し、非表示オプション「boot_after_controller_replacement」を選択して、AFF A700 node1のディスクをAFF A900 node1に再割り当てします。</block>
  <block id="c1ff3d9c3e793a92f67d6a17048a954d" category="paragraph">少し待機したあと、交換するノードの名前を入力するように求められます。共有ディスク（Advanced Disk Partitioning（ADP；アドバンストディスクパーティショニング）またはパーティショニングされたディスクとも呼ばれます）がある場合は、HAパートナーのノード名を入力するように求められます。</block>
  <block id="01b22e2b8dff1191395f34f0d45cdd7e" category="paragraph">これらのプロンプトは、コンソールメッセージに埋もれている可能性があります。ノード名を入力しなかった場合や間違った名前を入力した場合は、名前をもう一度入力するように求められます。</block>
  <block id="bca73eff7b855bcc19e7f22f49e2b8a3" category="paragraph">「[localhost:disk.encryptNoSupport:alert]: FIPS認定暗号化ドライブと」、または「[localhost:diskown.errorDuringIO: error]: Error」がディスクエラーで発生した場合は、次の手順を実行します。</block>
  <block id="36c8627224211217ec34fd42fe9d5435" category="list-text">LOADERプロンプトでノードを停止します。</block>
  <block id="4881f451a26b5944c6775b5342df3dbd" category="list-text">に記載されているストレージ暗号化のbootargsをチェックしてリセットします <block ref="370a03845d272602c838e3924a658003" category="inline-xref-macro-rx"></block>。</block>
  <block id="6e44d165d43069030cd99e370aeb5107" category="list-text">LOADERプロンプトで、ブートします。</block>
  <block id="5dd3fadb015da65e82238831e11341c9" category="paragraph">次の例を参考にしてください。</block>
  <block id="b76a3b855e625194513f3473a25582fd" category="list-text">ブートメニューでノードが停止したら、「22/7」と入力し、非表示オプション「boot_after_controller_replacement」を選択して、AFF A700 node2ディスクをAFF A900 node2に再割り当てします。</block>
  <block id="3dbb60dab5c1891455791640814da2b9" category="list-text">に記載されているストレージ暗号化のbootargsをチェックしてリセットします <block ref="025202ee75dff38076e126e76d5042ed" category="inline-xref-macro-rx"></block>。</block>
  <block id="e427f9006ac0f6079ad11054809d205e" category="admonition">内蔵ドライブが搭載されたモデル：FAS2520、FAS2552、FAS2554、FAS2620、FAS2650、 FAS2720、FAS2750、AFF A200、AFF A220、AFF A700s、 AFF A800、AFF A250。</block>
  <block id="db80f5bf265434b9ca90bc5f0cac1f17" category="admonition">次のシステムには内蔵ストレージがあります。FAS2520、FAS2552、FAS2554、FAS2620、FAS2650、 FAS2720、FAS2750、AFF A200、AFF A220、AFF A700s、 AFF A800、AFF A250、AFF C190。</block>
  <block id="e908e6e2b5df3efafd19fa616b538a72" category="list-text">内蔵ストレージを搭載したシステムの場合は、システムをドライブシェルフに変換して、同じクラスタ内の新しいノードに接続できます。FAS2520のコントローラはドライブシェルフに変換できません。</block>
  <block id="e9ddbc0542fbe11aae2eccf01c4e4a89" category="paragraph">最大5台のシステムをドライブシェルフに変換する作業は、ストレージを移動してアップグレードする場合のワークフローのオプションです。</block>
  <block id="aa5eafaf3f0b641d5e680da72815213b" category="paragraph">内蔵ストレージを使用するシステムの一覧を次に示します。FAS2520、FAS2552、FAS2554、FAS2620、FAS2650、 FAS2720、FAS2750、AFF A200、AFF A220、AFF A700s、 AFF A800、AFF A250。</block>
  <block id="4e54dc85c62992992a1dbefa82b638aa" category="summary">元のノードがサポート対象のモデルである場合、ストレージを移動してアップグレードする処理中に、ノードの内蔵SATAドライブ、SSD、またはSASドライブを、同じクラスタ内の新しいノードに接続されているドライブシェルフに移動できます。</block>
  <block id="fb4b0cb9efc21f6a0b33d6eb082f6db1" category="list-text">元のノードのSATA、SSD、またはSASドライブキャリアが、新しいドライブシェルフと互換性がある必要があります。</block>
  <block id="3b95007d4159237fc8935f46a265e025" category="list-text">ドライブシェルフには、元のノードのSATA、SSD、またはSASドライブキャリアを収容するための十分な空きベイが必要です。</block>
  <block id="f9327226ba1739cf1ffb9d6b89ba96b7" category="paragraph">元のノードがサポート対象のモデルである場合、ストレージを移動してアップグレードする処理中に、ノードの内蔵SATAドライブ、SSD、またはSASドライブを、同じクラスタ内の新しいノードに接続されているドライブシェルフに移動できます。</block>
  <block id="efedd93f47ad7262715836d27d7741ae" category="paragraph">ボリュームを移動してコントローラハードウェアをアップグレードする場合は、元のノードを準備し、新しいノードをクラスタに追加します。ボリュームを新しいノードに移動し、 LIF を設定して、クラスタから元のノードを削除します。ボリュームの移動によるアップグレード手順は無停止で実行できます。</block>
  <block id="e992617332e56bffc7c73bb184146d40" category="summary">元のノードがサポート対象のモデルである場合、ストレージを移動してアップグレードする処理中に、ノードの内蔵SATAドライブ、SSD、またはSASドライブを、新しいノードに接続されたドライブシェルフに移動することができます。また、システムをドライブシェルフに変換して、新しいノードに接続することもできます。</block>
  <block id="0d19f6d9c6616aec6c0d6fa998fcdc06" category="paragraph">ストレージを移動してコントローラハードウェアをアップグレードする場合は、元のノードを準備し、新しいノードをセットアップします。一部のプラットフォームモデルでは、新しいノードへの内蔵ストレージの移動がサポートされています。新しいノードにディスクを再割り当てし、ルートボリュームの設定をリストアし、ネットワークポートを設定します。ストレージの移動によるアップグレードは、停止を伴う手順で実行されます。</block>
  <block id="22e05b02f02d6d6148cff29e1b86d6eb" category="sidebar">ONTAP 9.8以降で完了します</block>
  <block id="e48a139c95341faecb199d5908a54e2e" category="paragraph">^4^次の表に、これらのコントローラアップグレードの組み合わせでサポートされる最小ONTAP バージョンとそれ以降のバージョンを示します。</block>
  <block id="b8e707d2be1c734648eb91b029352369" category="cell">9.10.1から9.12.1</block>
  <block id="4f0b48e1f65ca4ae15a6720f28d58824" category="cell">9.10.1P3～9.12.1</block>
  <block id="04d01679d16bbccad3f9da82789a187b" category="paragraph">上記の表にあるアップグレードの組み合わせについては、次の点に注意してください。</block>
  <block id="1c328c36316a518e9532ed77177daa6c" category="list-text">既存のコントローラと交換用コントローラで同じバージョンのONTAP を使用する必要はありません。ONTAP ソフトウェアのアップグレードは、コントローラのアップグレード時に実行されます。</block>
  <block id="da74cb1ad73d862a786d9f20938d9c7a" category="list-text">アップグレードするときは、サポートされているONTAP バージョンとパッチレベルで交換用コントローラを取り付ける必要があります。</block>
  <block id="dee716592bbae6fdba2b32d2854360ba" category="list-text">手順 を起動して最初のノードをアップグレードしたあとに、コントローラのアップグレードをキャンセルまたは取り消すことはできません。</block>
  <block id="37ef3103c62f7c4c537260066ec1fcad" category="paragraph">AFF A900またはFAS9500 NVRAMと、node2にアップグレード用に受け取ったコントローラモジュールをインストールします。node2 は、システムの背面からコントローラを見るときにシャーシの右側に配置されたコントローラ B です。</block>
  <block id="d9e40d62315bfc8bad4f1329f7f9b867" category="paragraph">インストールを実行する際には、次の点に注意する必要があります。</block>
  <block id="342f3ca2519e4e92f56675a89236fce6" category="list-text">スロット6-1および6-2の空のフィラーモジュールをすべて古いNVRAMモジュールから新しいNVRAMモジュールに移動します。</block>
  <block id="97bcf885640a80425f98f36e28630da4" category="paragraph">AFF A900またはFAS9500 NVRAMと、node1にアップグレード用に受け取ったコントローラモジュールをインストールします。</block>
  <block id="bbe48fb854ea022537208eeeff822f91" category="paragraph-title">このタスクについて</block>
  <block id="3468b73fe010ca505a63fcddaa4f3601" category="paragraph-title">この情報で使用される用語</block>
  <block id="5d022d26a75a4e30fae6648d5bcdd9e5" category="paragraph-title">MetroCluster FC構成の場合</block>
  <block id="b7a63528c3c16b7b7d27e4ac00d7e62e" category="list-text">を設定します<block ref="e0224203ce4fa326049e3e770300ce8f" prefix=" " category="inline-code"></block> および<block ref="fd93f52ab7757855a2e3e5cbb717ab40" prefix=" " category="inline-code"></block> node2構成のロード後にブートループが発生しないようにするための変数。</block>
  <block id="3c765a72d0082c1baa69be67b3c72b2b" category="inline-link">FIPSドライブが取り付けられていることを確認する方法</block>
  <block id="4e56428ee881bef3f54dc3003fa0c53d" category="paragraph">手順 でこれまでに行ったことがない場合は、Knowledge Baseの記事を参照してください<block ref="7c5769e31755fa3efd9b532d734be964" category="inline-link-rx"></block> 使用している自己暗号化ドライブのタイプを確認するため。</block>
  <block id="e05e5b3ebbe0e2f7ee773e008e2cd7bd" category="cell">次のドライブが使用中の場合</block>
  <block id="cbfa089efcac1a28956de515cdcbcecc" category="cell">FIPS 140-2レベル2の自己暗号化要件に準拠したNetApp Storage Encryption（NSE）ドライブ</block>
  <block id="9a7a5052834bdcd10b9395aaeaf8d876" category="list-text"><block ref="62a739993e7d046df94dbc6dc7c3f174" prefix="" category="inline-code"></block></block>
  <block id="102a08eb3220b17bfbecbc277298074d" category="cell">ネットアップの非FIPS SED</block>
  <block id="ad55a196e6d3053365555c02e73f7628" category="list-text"><block ref="20ac903c04b877a6840785a4ed61d182" prefix="" category="inline-code"></block></block>
  <block id="aac162ab6399b4219e4bd0e8dc585acb" category="list-text">FIPSドライブは、同じノードまたはHAペアで他のタイプのドライブと混在させることはできません。</block>
  <block id="31309fab75eee69087d335c5909a3146" category="list-text">SEDと非暗号化ドライブを同じノードまたはHAペアで混在させることができます。</block>
  <block id="bd32b44cc5545766a5362c0c5b6a2dfc" category="list-text">を設定したあとに停電が発生した場合は<block ref="fd93f52ab7757855a2e3e5cbb717ab40" prefix=" " category="inline-code"></block> 変数をに設定します<block ref="3262d48df5d75e3452f0f16b313b7808" prefix=" " category="inline-code"></block>を参照し、データ損失の可能性を回避するための支援をテクニカルサポートに依頼してください。</block>
  <block id="655c07fe3ce62eeab4578cf3d2d6e771" category="list-text">HAペアのコントローラのアップグレードが完了したら、の設定を解除する必要があります<block ref="fd93f52ab7757855a2e3e5cbb717ab40" prefix=" " category="inline-code"></block> 変数（Variable）：を参照してください <block ref="05a1dd6857d097edce6d7d72bdcd0017" category="inline-link-macro-rx"></block>。</block>
  <block id="3fa540556eb3ef2ac147e5b415b17e04" category="admonition">システムに共有ディスク、ハイブリッドアグリゲート、またはその両方がある場合は、適切なを使用する必要があります<block ref="a5160db2f330101874d96e78b0693369" prefix=" " category="inline-code"></block> コマンドを次の表に示します。</block>
  <block id="286eac86ce936ac4334d34f7232d08ee" category="list-text">[[step27]]を設定します<block ref="e0224203ce4fa326049e3e770300ce8f" prefix=" " category="inline-code"></block> および<block ref="fd93f52ab7757855a2e3e5cbb717ab40" prefix=" " category="inline-code"></block> ノード1の構成のロード後にブートループが発生しないようにする変数。</block>
  <block id="fec79bb13c2180d76df075734ce3012d" category="list-text">HAペアのコントローラのアップグレードが完了したら、の設定を解除する必要があります<block ref="fd93f52ab7757855a2e3e5cbb717ab40" prefix=" " category="inline-code"></block> 変数（Variable）：を参照してください <block ref="cbba924e7a6b5ca74fab65b80c811715" category="inline-link-macro-rx"></block>。</block>
  <block id="40b95c7c32986ac84f5748670a167d11" category="list-text">構成に自己暗号化ドライブが使用されている場合は、を設定しておきます<block ref="fd93f52ab7757855a2e3e5cbb717ab40" prefix=" " category="inline-code"></block> 変数をに設定します<block ref="3262d48df5d75e3452f0f16b313b7808" prefix=" " category="inline-code"></block> （例：で） <block ref="8eec167848fab5c118476094c3efd320" category="inline-link-macro-rx"></block>）を使用している場合は、次のように変数を設定解除</block>
  <block id="c73069b3e9a4e8c157316f5a836df89e" category="admonition">ストレージフェイルオーバーを無効にしないと、コントローラのアップグレードに失敗してデータアクセスが中断され、データが失われる可能性があります。</block>
  <block id="fedc720f31d5713abbb00fe9bcfd0fbd" category="list-text">構成に自己暗号化ドライブが使用されている場合は、を設定しておきます<block ref="fd93f52ab7757855a2e3e5cbb717ab40" prefix=" " category="inline-code"></block> 変数をに設定します<block ref="3262d48df5d75e3452f0f16b313b7808" prefix=" " category="inline-code"></block> （例：で） <block ref="c34adc28d35ee24325c874eba95a8786" category="inline-link-macro-rx"></block> of _ Install and boot node3 _）では、変数の設定を解除する必要があります。</block>
  <block id="b869b00024c3ac93a41114fb542db637" category="list-text">システムで自己暗号化ドライブを使用している場合は、Knowledge Baseの文書を参照してください<block ref="7c5769e31755fa3efd9b532d734be964" category="inline-link-rx"></block> アップグレード対象のHAペアで使用されている自己暗号化ドライブのタイプを確認する。ONTAP ソフトウェアは、次の2種類の自己暗号化ドライブをサポートしています。</block>
  <block id="e8b7b5e8c418c431f083fc35fbd14230" category="list-text">FIPS認定のNetApp Storage Encryption（NSE）SASドライブまたはNVMeドライブ</block>
  <block id="1ca9a18d1e5d777d127f7999796b5bcd" category="list-text">FIPS非対応の自己暗号化NVMeドライブ（SED）</block>
  <block id="e5cc9e8128ded12160c450314ec277ba" category="inline-link">サポートされている自己暗号化ドライブの詳細を確認できます</block>
  <block id="1bff84f4314291fd02efa6c2f015d30b" category="paragraph"><block ref="0929bcf40cd143b7e05dbdda06c86959" category="inline-link-rx"></block>。</block>
  <block id="006f1bc5fae53ff97ef17c1e82e53c7d" category="list-text">[[man_install3_step16]]を設定します<block ref="e0224203ce4fa326049e3e770300ce8f" prefix=" " category="inline-code"></block> および<block ref="fd93f52ab7757855a2e3e5cbb717ab40" prefix=" " category="inline-code"></block> ノード1の構成のロード後にブートループが発生しないようにする変数。</block>
  <block id="9fd2ad6608fb31c52643192f3698b653" category="admonition">他のクラスタまたはHAペアでこの新しいノードを使用したことがある場合は、を実行する必要があります<block ref="b433b76417b4f08166eb90cef3aa2a31" prefix=" " category="inline-code"></block> 次に進む前に、これを行わないと、サービスの停止やデータの損失が発生する可能性があります。交換用コントローラを以前に使用したことがある場合、特にコントローラが ONTAP 7-Mode を実行していた場合は、テクニカルサポートにお問い合わせください。</block>
  <block id="e37202a6c528e8aacf3cfa600847c395" category="list-text">[[step27]]を設定します<block ref="e0224203ce4fa326049e3e770300ce8f" prefix=" " category="inline-code"></block> および<block ref="fd93f52ab7757855a2e3e5cbb717ab40" prefix=" " category="inline-code"></block> node2構成のロード後にブートループが発生しないようにするための変数。</block>
  <block id="80c845a7cb29612164101b3b9f54de0c" category="list-text">を設定します<block ref="e0224203ce4fa326049e3e770300ce8f" prefix=" " category="inline-code"></block> および<block ref="fd93f52ab7757855a2e3e5cbb717ab40" prefix=" " category="inline-code"></block> ノード1の構成のロード後にブートループが発生しないようにする変数。</block>
  <block id="cf43271b9b370c0f4bddf73ec78aa59f" category="inline-link-macro">システムの初期セットアップのためにONTAP をインストールするためにboot_recovery loaderコマンドを使用する方法</block>
  <block id="4afbf28a131dcdda5d774d5742ccdf1e" category="admonition">また、 USB ブートオプションを使用してネットブートを実行することもできます。サポート技術情報の記事を参照してください <block ref="184f8f7294797efad8be0da4fb907563" category="inline-link-macro-rx"></block>。</block>
  <block id="9d5ce6c4c82bf9a0ff455a50cadc1ab6" category="list-text">構成に自己暗号化ドライブが使用されている場合は、を設定しておきます<block ref="fd93f52ab7757855a2e3e5cbb717ab40" prefix=" " category="inline-code"></block> 変数をに設定します<block ref="3262d48df5d75e3452f0f16b313b7808" prefix=" " category="inline-code"></block> （たとえば、AFF A900またはFAS9500コントローラとNVRAMモジュールでのIn_Boot node2など）、 <block ref="30eda0c27e5ac7524ed5f5f264f13489" category="inline-link-macro-rx"></block>）を使用している場合は、次のように変数を設定解除</block>
  <block id="21b9417932c23289b6932c3a0ac2517f" category="list-text">[[boot_node2 _stp1]を設定します<block ref="e0224203ce4fa326049e3e770300ce8f" prefix=" " category="inline-code"></block> および<block ref="fd93f52ab7757855a2e3e5cbb717ab40" prefix=" " category="inline-code"></block> node2構成のロード後にブートループが発生しないようにするための変数。</block>
  <block id="083a0c049526537d6b95a268054814fb" category="list-text">システムにハイブリッドアグリゲートがある。</block>
  <block id="6e1f6dfb0fcbfac6c4067f6818568970" category="cell">9.11.1P6または9.10.1P10（2023年2月を目標）</block>
  <block id="53f4933654122c2732aaf29d750ecb9c" category="list-text">ONTAP 9.11.1P6または9.10.1P10（2月2023日を対象）を実行している。</block>
  <block id="34fe5db3348c8cff3877298c8c064752" category="paragraph">ARLを使用して、次のシステム構成のONTAP 9.11.1P6または9.10.1P10（2月2023日を対象）を実行するコントローラのペアをアップグレードします。</block>
  <block id="b99f39b13055b86a7e0146684c21e326" category="list-text">AFF A700コントローラからAFF A900システムへの接続</block>
  <block id="9733b2ec9e26adc1936d94dc2a3bb0dd" category="list-text">FAS9000コントローラからFAS9500システムへの移行</block>
  <block id="6425a395e3062e0f480ffee2bc19d2f7" category="admonition">この手順 は、ONTAP 9.11.1P6または9.10.1P10を実行しているAFF A700からAFF A900、またはFAS9000からFAS9500へのアップグレードで厳密に環境 したものです（2月2023日を対象）。他のシステムの組み合わせのアップグレードには、この手順 を使用しないでください。</block>
  <block id="a2b13d30d388148b28bbb1a43f3d2d52" category="paragraph">の内容を展開します<block ref="f466b354adfc3ad817d7c11c037c8797" prefix=" " category="inline-code"></block> ファイルをターゲットディレクトリに移動します。</block>
  <block id="a9a690b194b002aca2d632eee1a1a1f2" category="paragraph"><block ref="1dfb54a15c6859407fd4c2e52579269b" prefix="" category="inline-code"></block></block>
  <block id="2483e54ca623f46ca2ae8747a545115d" category="admonition">Windows で内容を展開する場合は、 7-Zip または WinRAR を使用してネットブートイメージを展開します。</block>
  <block id="6850735b567ffc238538643166a7d89e" category="paragraph">ディレクトリの一覧に、カーネルファイルを含むネットブートフォルダが含まれるようにします。</block>
  <block id="3a1d38fb3626e6c6f9c179d11fad1cdc" category="paragraph"><block ref="fd10345910ec2a124c27471e14c09703" prefix="" category="inline-code"></block></block>
  <block id="647b6fb99516f69a9148d30b911dd4fd" category="cell">ディレクトリの一覧に次のファイルが表示されます。<block ref="f466b354adfc3ad817d7c11c037c8797" prefix=" " category="inline-code"></block>注：の内容を展開する必要はありません<block ref="f466b354adfc3ad817d7c11c037c8797" prefix=" " category="inline-code"></block> ファイル。</block>
  <block id="289138dc47ec0ab93b89cbb18e8d1de4" category="paragraph"><block ref="9cc92842c7e6e65d356004300ce50ecb" prefix="" category="inline-code"></block></block>
  <block id="5ddad613aada543c956bac98cec770a6" category="paragraph">ステージ2で、ルート以外のアグリゲートをノード1からノード2に再配置し、ノード1が所有するSAN以外のデータLIFを、障害アグリゲートまたは拒否アグリゲートを含めてノード2に移動します。また、手順 の後半で使用するために必要なノード1の情報を記録し、ノード1を撤去します。</block>
  <block id="090f49148634c0de3dbfc9d8f505c5ec" category="summary">ONTAP 9.7以前を実行しているコントローラでARLを手動でアップグレードする場合は、node2のnode1 NASデータLIFをnode2からnode3に移動します。</block>
  <block id="63c4659c472d1e3272c7a9dbd54f652c" category="admonition">システムにストレージディスクがある場合は、クラスタプロンプトでこのセクションのコマンドを入力する必要があります。V シリーズシステムまたは FlexArray 仮想化ソフトウェアがストレージアレイに接続されたシステムの場合は、このセクションのメンテナンスモードでコマンドを入力します。</block>
  <block id="32993181f2c2c45f225637e1dd8b41fe" category="paragraph"><block ref="dd3b9ee4e31d5ea407eb0e6f5ec37627" prefix="" category="inline-code"></block></block>
  <block id="e95e1d787e7711325a726a908ab4f7d0" category="paragraph"><block ref="b7cc4b6b2b8c0f37377b5cc259385de0" prefix="" category="inline-code"></block> は、FC4タイプ、ターゲット、イニシエータです。</block>
  <block id="895f00a95ca4fe2726b1bd5a099d3a1b" category="admonition">FCポートはイニシエータとしてプログラムする必要があります。</block>
  <block id="996083c6bbb6dbd6baa714a3a92b8e3d" category="paragraph">ステージ 3 で、ノード 3 をインストールしてブートし、クラスタポートとノード管理ポートをノード 1 からノード 3 にマッピングし、ノード 3 のインストールを確認して、ノード 1 に属するデータ LIF と SAN LIF をノード 2 からノード 3 に移動します。また、すべてのアグリゲートをnode2からnode3に再配置し、node2によって所有されているデータLIFとSAN LIFをnode3に移動します。</block>
  <block id="be8545a85af27afe951a6085f68cae22" category="summary">2ノードクラスタの場合はノード1のNASデータLIFをノード2に、ONTAP 9.7以前を実行しているコントローラでは手動でARLをアップグレードする場合は3つ目のノードに移動します。</block>
  <block id="9341d89128ab2b3446ee084ac02aab48" category="list-text">[man_map_2_step5] クラスタ LIF とノード管理 / クラスタ管理 LIF をホストするブロードキャストドメインを調整します。各ブロードキャストドメインに正しいポートが含まれていることを確認します。ホストしているブロードキャストドメイン間または LIF がホームにあるブロードキャストドメイン間でポートを移動することはできないため、次の手順に示すように、 LIF を移行して変更しなければならない場合があります。</block>
  <block id="b247b39cd3241154261788c28bc948e3" category="paragraph">ステージ4で、手順 の後半で使用するためにノード2の情報を記録し、node2を撤去します。</block>
  <block id="f228d174d82507ef121b7fcd14ddd5a1" category="paragraph">ステージ5で、node4のインストールとブートの際には、クラスタポートとノード管理ポートをnode2からnode4にマッピングし、node4のインストールを確認して、node2に属するデータLIFとSAN LIFをnode3からnode4に移動します。node2のアグリゲートもnode3からnode4に再配置します。</block>
  <block id="b432c4295d2cf5336428870eddf6eba1" category="inline-link-macro">ノード2のルート以外のアグリゲートをノード3からノード4に再配置します</block>
  <block id="9467ac5cfa9f1fb7c82f5dfc6ebcfbef" category="list-text"><block ref="9467ac5cfa9f1fb7c82f5dfc6ebcfbef" category="inline-link-macro-rx"></block></block>
  <block id="5db9a87cb6b738b68a031aa17ff2133b" category="summary">必要に応じて、ONTAP 9.7以前を実行しているコントローラでNVEまたはNAEに新しいコントローラモジュールを手動でアップグレードする際に設定します。</block>
  <block id="3047a8be78424e0d9ab2529c7ce3efb0" category="doc">新しいコントローラモジュールでNetApp VolumeまたはAggregate Encryptionをセットアップします</block>
  <block id="025ad35a81df65ec523de8553d173a8c" category="paragraph">交換したコントローラまたは新しいコントローラのハイアベイラビリティ（HA）パートナーがNetApp Volume Encryption（NVE）またはNetApp Aggregate Encryption（NAE）を使用する場合は、NVEまたはNAE用に新しいコントローラモジュールを設定する必要があります。</block>
  <block id="9ba1e09b1ddccd53d79db29e9f36df42" category="admonition">この手順 では、NetApp Storage Encryption（NSE）、NetApp Volume Encryption（NVE）、およびNetApp Aggregate Encryption（NAE）を使用できます。</block>
  <block id="3d578503a729c8eb1d1365a2ab0d1c2b" category="paragraph">ステージ6では、新しいノードが正しくセットアップされていることを確認し、暗号化が有効な新しいノードがある場合は、ストレージ暗号化またはNetApp Volume Encryptionを設定およびセットアップします。また、古いノードの運用を停止し、SnapMirrorの処理を再開する必要があります。</block>
  <block id="05a1dd6857d097edce6d7d72bdcd0017" category="list-text"><block ref="05a1dd6857d097edce6d7d72bdcd0017" category="inline-link-macro-rx"></block></block>
  <block id="3455c14a4d6102d50d6ce1e9d7dd91a6" category="list-text"><block ref="3455c14a4d6102d50d6ce1e9d7dd91a6" category="inline-link-macro-rx"></block></block>
  <block id="f524f3d3a5face12c84870f28ce71f51" category="paragraph">MetroCluster 構成を使用していない場合は、このセクションを省略できます。</block>
  <block id="194cfacfac5ae59ca8654ba8ba91969e" category="paragraph">ステージ1で必要に応じて、内部ディスクドライブにルートアグリゲートまたはデータアグリゲートが含まれていないことを確認し、ノードをアップグレードの準備をしてから、一連の事前確認を実行します。必要に応じて、ストレージ暗号化のためにディスクのキーを変更し、新しいコントローラをネットブートする準備を行います。</block>
  <block id="b1e6a51941fc762fadf553464a430f03" category="paragraph">ステージ2で、ルート以外のアグリゲートをノード1からノード2に再配置し、ノード1が所有するSAN以外のデータLIFを、障害アグリゲートまたは拒否アグリゲートを含めてノード2に移動します。手順 の後半で使用するために必要なノード1の情報を記録し、ノード1を撤去します。</block>
  <block id="eb5305681dcf43e8c1db320ce431edd8" category="paragraph">ステージ4で、あとで手順 で使用するために必要なnode2の情報を記録し、node2を撤去します。</block>
  <block id="88a0eec75ccbf727881e52be21050e3c" category="paragraph">ステージ5で、node4のインストールとブートの際には、クラスタポートとノード管理ポートをnode2からnode4にマッピングし、node4のインストールを確認して、node2に属するデータLIFとSAN LIFをnode3からnode4に移動します。node2のアグリゲートをnode3からnode4に再配置し、ノード2のNAS LIFをnode3からnode4に移動します。</block>
  <block id="17713187c4e0912bc419e03d9496d3ae" category="paragraph">ステージ6では、新しいノードが正しくセットアップされていることを確認し、新しいノードで暗号化が有効になっている場合はストレージ暗号化またはNetApp Volume Encryptionをセットアップします。また、古いノードの運用を停止し、SnapMirror処理を再開する必要があります。</block>
  <block id="ecd942205bedf95694f574a1e603a6d3" category="admonition">Storage Virtual Machine（SVM）ディザスタリカバリの更新は、割り当てられたスケジュールどおりに中断されません。</block>
  <block id="3060a5aa684070464be46cf020ad8890" category="paragraph">ストレージアレイに接続されている V シリーズシステム、またはストレージアレイに接続された FlexArray 仮想化ソフトウェアを使用するシステムをアップグレードする場合は、を完了する必要があります <block ref="533e5b5383ee7eeec7355f568e8aaf6b" category="inline-xref-macro-rx"></block> から <block ref="593996bb06ec10671cada9089fb35dd4" category="inline-xref-macro-rx"></block>をクリックします <block ref="72140e6a9de023ebc205559b767779ea" category="inline-xref-macro-rx"></block> およびの手順に従ってください <block ref="b874d68563e926f19d0f15015f15f190" category="inline-link-macro-rx"></block> および <block ref="a9e7644d0d01665bbdf613cdb831fa7f" category="inline-link-macro-rx"></block> 必要に応じて、保守モードでコマンドを入力します。その後、このセクションに戻ってからを使用して再開する必要があります <block ref="239474d202713b3a406727408fd68f72" category="inline-xref-macro-rx"></block>。</block>
  <block id="3bfda8b6f11bfce122f03267483939b5" category="paragraph">ただし、ストレージディスクが搭載されたシステムをアップグレードする場合は、このセクション全体を実行し、に進みます <block ref="b874d68563e926f19d0f15015f15f190" category="inline-link-macro-rx"></block> および <block ref="a9e7644d0d01665bbdf613cdb831fa7f" category="inline-link-macro-rx"></block>クラスタ・プロンプトでコマンドを入力します。</block>
  <block id="e5ade921515245eca4eff93f56ae42b3" category="admonition">VシリーズまたはFlexArray 仮想化ソフトウェアを使用してONTAP をブートする前に、FCオンボードポート、CNAオンボードポート、およびCNAカードを再設定する必要があります。</block>
  <block id="0fa2804ab676b4c1ef9de6071a2f7c81" category="admonition">node4にはブート環境のプロンプトが表示されたままにします。node4には戻ります <block ref="f326c815b47f4f2909494bae5cd735d5" category="inline-link-macro-rx"></block>。</block>
  <block id="0be88c4bca37291303f8b31b2c15960b" category="paragraph">ブート環境プロンプトで次のコマンドを入力して、接続を手動で設定します。<block ref="08e9ed1febc3e725e8201311cddea860" prefix=" " category="inline-code"></block></block>
  <block id="9217255664b7bb463d1293cee7c132b2" category="paragraph"><block ref="854a4be4b1fce65bf3a90ee74692188e" prefix="" category="inline-code"></block> は、ストレージシステムのIPアドレスです（必須）。<block ref="220b0a4790e2c047ae96a881e506e1fe" prefix=" " category="inline-code"></block> は、ストレージシステムのネットワークマスクです（必須）。<block ref="14fb245f7140583707d1cda241eeeff2" prefix=" " category="inline-code"></block> は、ストレージシステムのゲートウェイです（必須）。<block ref="573c932508ccab841c5c117fb2cd2186" prefix=" " category="inline-code"></block> は、ネットワーク上のネームサーバのIPアドレスです（オプション）。<block ref="79e5a69f76d034adaafbb5cb6cb8fc45" prefix=" " category="inline-code"></block> は、ドメインネームサービス（DNS）ドメイン名です。このオプションパラメータを使用する場合は、ネットブートサーバの URL に完全修飾ドメイン名を指定する必要はなく、サーバのホスト名だけを指定します。</block>
  <block id="e06e3f1d2982c656928c1758ea5cd5d2" category="paragraph"><block ref="d289f6fdbc3a8ef953e4ecbc75c5e367" prefix="" category="inline-code"></block></block>
  <block id="c3bf4c58440a787e2baab726de5e13a2" category="admonition">新しいノードを希望するイメージに更新する場合は、必ずネットブートを使用してください。別の方法で新しいコントローラにイメージをインストールすると、正しいイメージがインストールされない場合があります。この問題環境はすべての ONTAP リリースに対応しています。オプションを指定してネットブート手順 を実行する<block ref="164ab89f87a6d8b32c239f7ca0be1f74" prefix=" " category="inline-code"></block> ブートメディアを消去して、同じONTAP バージョンのONTAP を両方のイメージパーティションに配置します。</block>
  <block id="02c22536183e30deed7894475787f7d5" category="admonition">システムにストレージディスクがある場合は、クラスタプロンプトでこのセクションのコマンドを入力します。V シリーズシステムまたは FlexArray 仮想化ソフトウェアがインストールされていて、ストレージアレイに接続されている場合は、このセクションに示すコマンドを保守モードで入力します。</block>
  <block id="d9aba1a0e78e20e5794df9e5fcc38cae" category="paragraph">必要に応じて、次のコマンドを入力して、node3のFCポートを変更します。</block>
  <block id="f4ab9bf62bf77a4a6d6e3123e634bc11" category="admonition">FCポートはイニシエータとしてプログラムする必要があります。</block>
  <block id="3b6de25fda6a2ae27534a3299eeda145" category="paragraph">ステージ1で必要に応じて、内部ディスクドライブにルートアグリゲートまたはデータアグリゲートが含まれていないことを確認し、ノードをアップグレードの準備をしてから、一連の事前確認を実行します。また、ストレージ暗号化のためにディスクのキーを変更し、新しいコントローラをネットブートする準備を行う必要がある場合もあります。</block>
  <block id="59b90ab4d9f5cec87646c2acefb98a3b" category="paragraph">診断ユーザアカウントは、簡単な診断だけを目的としています。テクニカルサポートから指示があった場合にのみ使用してください。</block>
  <block id="9e2835c14d1a15176d9244c6778b33fd" category="paragraph">ユーザアカウントのロック解除については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、 _System Administration Reference_( システム管理リファレンス ) にリンクします。</block>
  <block id="db4180c74b3a703245a391eed836419a" category="admonition">VシリーズシステムでData ONTAP をブートする前に、FCオンボードポート、UTA / UTA2オンボードポート、およびUTA / UTA2カードを再設定する必要があります。</block>
  <block id="b2b2df04bed57a6afc9f9e93074818b6" category="paragraph">ブート環境プロンプトで次のコマンドを入力して、接続を手動で設定します。<block ref="8bea5c8cfd4cc82c9ee736493781c9a2" prefix=" " category="inline-code"></block></block>
  <block id="4bba0a7fcbf2ab986a1611d7021d5052" category="admonition">新しいノードを希望するイメージに更新する場合は、必ずネットブートを使用してください。別の方法で新しいコントローラにイメージをインストールした場合、正しいイメージがインストールされないことがあります。この問題環境はすべての ONTAP リリースに対応しています。オプションを指定してネットブート手順 を実行する<block ref="164ab89f87a6d8b32c239f7ca0be1f74" prefix=" " category="inline-code"></block> ブートメディアを消去して、両方のイメージパーティションに同じONTAP バージョンを配置します。</block>
  <block id="fa1a140f0168541ffe4dbde5276b265e" category="admonition">続行する前に、アグリゲートをオフラインにしてから、内蔵ディスクドライブ上のアグリゲートを削除する必要があります。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> アグリゲートの管理に関する情報を取得するには、 CLI の _content を使用して _Disk およびアグリゲートの管理にリンクします。</block>
  <block id="21d6fd2bad8758c2c979453e45b1b662" category="admonition">続行する前に、ボリュームを外付けディスクシェルフに移動し、アグリゲートをオフラインにして、内蔵ディスクドライブ上のアグリゲートを削除する必要があります。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ボリュームの移動に関する情報を取得するには、 CLI の _CONTENT を使用して、 _Disk およびアグリゲートの管理にリンクしてください。</block>
  <block id="85c002d05aa1c586f24c816bb6f781d8" category="summary">ONTAP 9.8以降を実行しているコントローラで、ARLを手動でアップグレードする際に、node2にあるnode1にあるNASデータLIFをnode2からnode3に移動します。</block>
  <block id="c5db3c51722e3584c8ee9a21eb024cc3" category="paragraph">ステージ3で、ノード3をインストールしてブートし、クラスタポートとノード管理ポートをノード1からノード3にマッピングし、ノード2からノード3に属するデータLIFとSAN LIFを移動します。また、すべてのアグリゲートをnode2からnode3に再配置し、node2によって所有されているデータLIFとSAN LIFをnode3に移動します。</block>
  <block id="0e65641a75cf4460805d4b96e2449880" category="summary">2ノードクラスタの場合はノード2に、ONTAP 9.8以降を実行しているコントローラではARLを手動でアップグレードする場合はノード3にそれぞれデータLIFを移動します。</block>
  <block id="92cca0d8fba5d6df2ba1db2e4e7cf839" category="paragraph">ステージ5で、node4をインストールしてブートし、クラスタポートとノード管理ポートをnode2からnode4にマッピングし、node2に属するデータLIFとSAN LIFをnode3からnode4に移動します。node2のアグリゲートもnode3からnode4に再配置します。</block>
  <block id="c5dc6358f70b9b01e402df306b4756e6" category="summary">必要に応じて、ONTAP 9.8以降を実行しているコントローラで、NVEまたはNAE用に新しいコントローラモジュールを手動でアップグレードする際に設定します。</block>
  <block id="f0a0eea61e7c18706f2be0d0b664df19" category="doc">新しいコントローラモジュールでNetApp VolumeまたはAggregte Encryptionをセットアップします</block>
  <block id="9c5b8b5e0f9e3862ddb4d7aea590526d" category="paragraph">ステージ2で、ルート以外のアグリゲートをノード1からノード2に再配置し、ノード1が所有するSAN以外のデータLIFを、障害アグリゲートまたは拒否アグリゲートを含めてノード2に移動します。また、手順 の後半で使用するために必要なノード1の情報を記録し、ノード1を撤去します。</block>
  <block id="b1d2d80254a37ea644bb2f1ced221235" category="paragraph">ステージ3で、ノード3をインストールしてブートし、クラスタポートとノード管理ポートをノード1からノード3にマッピングし、ノード2からノード3に属するデータLIFとSAN LIFを移動します。また、すべてのアグリゲートを node2 から node3 に再配置し、 node2 によって所有されているデータ LIF と SAN LIF を node3 に移動します。</block>
  <block id="14404b4da2811fbc2d79f7bd9ba708f3" category="paragraph">ステージ4で、あとで手順 で使用するために必要なnode2の情報を記録し、node2を撤去します。アグリゲートの所有権は変更されません。</block>
  <block id="7e21a9c9d8227ac88401921ab1292b41" category="paragraph">ステージ5で、node4をインストールしてブートし、クラスタポートとノード管理ポートをnode2からnode4にマッピングし、node2に属するデータLIFとSAN LIFをnode3からnode4に移動します。node2のアグリゲートをnode3からnode4に再配置し、node2によって所有されているデータLIFとSAN LIFをnode3に移動することもできます。</block>
  <block id="3bd7ed4f2ac8c8bee0e26402197de3f8" category="paragraph">ステージ6では、新しいノードが正しくセットアップされていることを確認し、新しいノードで暗号化が有効になっている場合はストレージ暗号化またはNetApp Volume Encryptionをセットアップします。また、古いノードの運用を停止すると、SnapMirrorの処理が再開されます。</block>
  <block id="4449fcbdc8779036fe560c92118fa9da" category="paragraph">ステージ1では、事前確認を実行し、必要に応じてアグリゲートの所有権を修正します。OKMを使用してストレージ暗号化を管理していて、SnapMirror関係を休止することができる場合は、特定の情報を記録する必要があります。</block>
  <block id="a6b2bef9fee39460e6de895c83a49b09" category="paragraph">ステージ2で、ノード1の非ルートアグリゲートとNASデータLIFをノード2に再配置します。このプロセスは主に自動化されており、ステータスを確認するために処理が一時停止します。この処理は手動で再開する必要があります。必要に応じて、障害が発生したアグリゲートまたは拒否されたアグリゲートを再ノード1を撤去する前に、手順 の後半で使用するために情報をメモしておきます。ネットブートnode3とnode4には、あとで手順 で準備することもできます。</block>
  <block id="25616d083b9db29fded5f928a5162633" category="paragraph">ステージ 3 で、ノード 3 をインストールしてブートし、ノード 1 のクラスタポートとノード管理ポートがノード 3 でオンラインになったことを確認し、ノード 3 のインストールを確認します。NetApp Volume Encryption（NVE）を使用している場合は、キー管理ツールの設定をリストアします。必要に応じて、ノード3にFCまたはUTA / UTA2設定を設定します。さらに、node1のNASデータLIFとルート以外のアグリゲートをnode2からnode3に再配置し、SAN LIFがnode3にあることを確認します。</block>
  <block id="b782fb0a43ba5a997562172fe5afc493" category="paragraph">ステージ4で、ルート以外のアグリゲートとNASデータLIFをnode2からnode3に再配置します。node2の情報は、あとで手順 で使用するために記録してから、node2を撤去することもできます。</block>
  <block id="eda221e9476c18a219f395e9629621f3" category="paragraph">ステージ 5 で、 node4 をインストールしてブートした場合、 node2 のクラスタポートとノード管理ポートがオンラインになっていることを確認し、 node4 のインストールがあることを確認します。NVEを使用している場合は、key-manager configurationをリストアします。必要に応じて、ノード4でFCまたはUTA / UTA2設定を設定します。node2のNASデータLIFとルート以外のアグリゲートもnode3からnode4に再配置し、SAN LIFがnode4にあることを確認します。</block>
  <block id="ee70b93b550a5730542d0185fb89b3ce" category="paragraph">ステージ6では、新しいノードが正しくセットアップされていることを確認し、暗号化が有効な新しいノードがある場合はストレージ暗号化またはNVEを設定してセットアップします。また、古いノードの運用を停止し、SnapMirrorの処理を再開する必要があります。</block>
  <block id="acd5b1c4fce9ef3151224f03792cb99f" category="paragraph">ディレクトリの一覧に次のファイルが表示されます。<block ref="f466b354adfc3ad817d7c11c037c8797" prefix=" " category="inline-code"></block></block>
  <block id="80466d02ebfaaecd033c6279b10259ea" category="paragraph">ステージ2で、ノード1の非ルートアグリゲートとNASデータLIFをノード2に再配置します。このプロセスは主に自動化されており、ステータスを確認するために処理が一時停止します。この処理は手動で再開する必要があります。必要に応じて、障害が発生したアグリゲートまたは拒否されたアグリゲートを再ノード1の必要な情報を記録してから、ノード1を廃棄する必要があります。ネットブートnode3とnode4には、あとで手順 で準備することもできます。</block>
  <block id="93e8beec297b8781a36255a18449c4be" category="admonition">システムにストレージディスクがある場合は、クラスタプロンプトでこのセクションのコマンドを入力します。「 V シリーズシステム」または FlexArray 仮想化ソフトウェアを使用していて、ストレージアレイに接続している場合は、このセクションにメンテナンスモードでコマンドを入力します。</block>
  <block id="667d8c0d024d474a9ae5e0aeff664274" category="list-text">[auto9597_check_node3 _step15]]ノード3で、ブートメニューに移動し、22 / 7を使用して、非表示オプションを選択します<block ref="b4ab52f7185d092e3aa56aaa9905e7e1" prefix=" " category="inline-code"></block>。プロンプトで、 node1 のディスクを node3 に再割り当てするには、次の例のように入力します。</block>
  <block id="d64291323d18992b3445302961a6c6cb" category="paragraph"><block ref="5f228d2a3233663cd573460dd92ad9ce" prefix="" category="inline-code"></block></block>
  <block id="9650478f6417a9b0762aac7fdac75148" category="paragraph">ステージ4で、ルート以外のアグリゲートとNASデータLIFをnode2からnode3に再配置します。あとで手順 で使用するために必要なノード2の情報を記録してから、node2を撤去する必要があります。</block>
  <block id="f8c0ac61744d21aa2bb63045fa011ea5" category="summary">必要に応じて、を使用してONTAP 9.8以降を実行しているコントローラをアップグレードする場合は、NVEまたはNAE用に新しいコントローラモジュールを設定します<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block> コマンド</block>
  <block id="f1ce13c7bdc83a7edc61f28f1b45e2b3" category="paragraph">新しいコントローラの交換したコントローラまたはハイアベイラビリティ（HA）パートナーがNetApp Volume Encryption（NVE）またはNetApp Aggregate Encryption（NAE）を使用している場合は、新しいコントローラモジュールをNVEまたはNAE用に設定する必要があります。</block>
  <block id="3e16f680dd8aa44fc4930c55c991d3dd" category="paragraph">*オンボードキーマネージャ*を使用してNVEまたはNAEを設定します</block>
  <block id="f43321e7d3b61cf1c8ba0245edce75e1" category="open-title">外部キー管理</block>
  <block id="13e26039ea70e331010a044a7a7923a0" category="paragraph">*外部キー管理*を使用してNVEまたはNAEを設定します</block>
  <block id="56e327f81566d68ee048f3f881ecfd0e" category="paragraph">このコマンドには、OKMのパスフレーズが必要です</block>
  <block id="313f0cfed2b97e164958a7921166aab8" category="paragraph">node2をnode4に置き換える前に、node2に所有されているルート以外のアグリゲートとNASデータLIFをnode3に再配置する必要があります。</block>
  <block id="ddcbcf4d978f7386b809fdfb01266e26" category="list-text">[[auto_check_4_step15]]ノード4で、ブートメニューに移動し、22 / 7を使用して、非表示オプションを選択します<block ref="b4ab52f7185d092e3aa56aaa9905e7e1" prefix=" " category="inline-code"></block>。プロンプトで node2 と入力し、次の例のように node2 のディスクを node4 に再割り当てします。</block>
  <block id="274fa51e35e2d7744511852ce715a339" category="summary">を使用して、ONTAP 9.8以降を実行しているコントローラをアップグレードする際に、node1の物理ポートがnode3に正しくマッピングされていることを確認し、ネットワーク設定をnode3にリストアしておく必要があります<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block> コマンド</block>
  <block id="cbba924e7a6b5ca74fab65b80c811715" category="list-text"><block ref="cbba924e7a6b5ca74fab65b80c811715" category="inline-link-macro-rx"></block></block>
  <block id="cbcc0afebe86aa7f1073794d2e9cc01f" category="list-text"><block ref="cbcc0afebe86aa7f1073794d2e9cc01f" category="inline-link-macro-rx"></block></block>
  <block id="ed5e166424b6971ce3ff91d956aed8c8" category="summary">を使用して、ONTAP 9.8以降を実行しているコントローラをアップグレードするときに、node2のnode1 NASデータLIFがnode2からnode3に再配置されていることを確認します<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block> コマンド</block>
  <block id="5e972db272a05de06b0d6fdb800b7a08" category="paragraph">NetApp Aggregate Encryption（NAE）またはNetApp Volume Encryption（NVE）を使用してアップグレードするシステムのボリュームを暗号化する場合は、暗号化設定を新しいノードに同期する必要があります。key-managerをリストアしない場合は、ARLを使用してノード2からノード3にアグリゲートを再配置すると、暗号化されたボリュームがオフラインになります。</block>
  <block id="32c58b427183169965ebb999f423176a" category="paragraph">ブート環境プロンプトで次のコマンドを使用して、接続を手動で設定します。<block ref="08e9ed1febc3e725e8201311cddea860" prefix=" " category="inline-code"></block></block>
  <block id="b159bbd899522472927771c3cfb60e98" category="paragraph"><block ref="854a4be4b1fce65bf3a90ee74692188e" prefix="" category="inline-code"></block> は、ストレージシステムのIPアドレスです（必須）。<block ref="220b0a4790e2c047ae96a881e506e1fe" prefix=" " category="inline-code"></block> は、ストレージシステムのネットワークマスクです（必須）。<block ref="14fb245f7140583707d1cda241eeeff2" prefix=" " category="inline-code"></block> は、ストレージシステムのゲートウェイです（必須）。<block ref="573c932508ccab841c5c117fb2cd2186" prefix=" " category="inline-code"></block> は、ネットワーク上のネームサーバのIPアドレスです（オプション）。<block ref="79e5a69f76d034adaafbb5cb6cb8fc45" prefix=" " category="inline-code"></block> は、Domain Name Service（DNS；ドメインネームサービス）ドメイン名です（オプション）。</block>
  <block id="303eb51c66cbd45f9e6d876421927f72" category="admonition">新しいノードを希望するイメージに更新する場合は、必ずネットブートを使用してください。別の方法で新しいコントローラにイメージをインストールした場合、正しいイメージがインストールされないことがあります。この問題環境 All ONTAP リリースオプションを指定してネットブート手順 を実行する<block ref="164ab89f87a6d8b32c239f7ca0be1f74" prefix=" " category="inline-code"></block> ブートメディアを消去して、両方のイメージパーティションに同じONTAP バージョンを配置します。</block>
  <block id="a0d94f32d0181785e386a9ef4fb1b39a" category="list-text">[[step20]]ブートローダーで、node3のパートナーシステムIDを設定します。</block>
  <block id="e392c977e2489d972197bd428e99f557" category="paragraph">ノード3の場合、<block ref="d18fd3db938a26ebbd3f74de41f0b73f" prefix=" " category="inline-code"></block> node2のものである必要があります。</block>
  <block id="0a8738306c7333e07688aef17b4e295e" category="list-text">[[auto_install3_step21]を確認します<block ref="d18fd3db938a26ebbd3f74de41f0b73f" prefix=" " category="inline-code"></block> ノード3の場合：</block>
  <block id="42390779a70dc2e07e126c5582b1578a" category="list-text"><block ref="42390779a70dc2e07e126c5582b1578a" category="inline-link-macro-rx"></block></block>
  <block id="7841bf38e658f68c682cee2c9eb5472d" category="paragraph">各ノードに接続されているシリアルポートで、次のコマンドの出力を個別に実行して保存します。</block>
  <block id="80b1a5ab2f169155be3a834be566f4c2" category="list-text"><block ref="ce640e5cc43dcc2ce28d153a849057d9" prefix="" category="inline-code"></block></block>
  <block id="b31ac11fef9a8af6fa05c2d96463d3e6" category="list-text"><block ref="453aed737e4541e2ea60f38a6b9e5777" prefix="" category="inline-code"></block></block>
  <block id="aecf19ade983215d48139521cf263910" category="list-text"><block ref="e4161dcc9b0f8f9969edf12d5b6d40b2" prefix="" category="inline-code"></block></block>
  <block id="12ab637b90c6ff7edcbf6b37e16e4e1e" category="list-text"><block ref="28093ee1f500cbf8b88317f983cf2994" prefix="" category="inline-code"></block></block>
  <block id="010377b1df1c147be7660d077da57d34" category="list-text"><block ref="f28132e6412c52c2df71902bccd9fe5d" prefix="" category="inline-code"></block></block>
  <block id="87754b6c588a162a924659bdf775cf20" category="list-text"><block ref="110550f63d97b49878bbbd584e2c3ab1" prefix="" category="inline-code"></block></block>
  <block id="284796671ad84e43740ae2f599a3a216" category="list-text"><block ref="092016153e5cdfe0f74d15d20e03a91e" prefix="" category="inline-code"></block></block>
  <block id="a0a0ad5020eac42dba5b447fc44dc48b" category="list-text"><block ref="2232629a6b33efd635768e5e55bd1038" prefix="" category="inline-code"></block></block>
  <block id="2da2426897b8d2d9deb39f8f8f957e06" category="list-text"><block ref="555e951feb1c7a290a146a3083826385" prefix="" category="inline-code"></block></block>
  <block id="d8459e94c81b2ecf3f1ef53ca57f0bfc" category="admonition">オンボードキーマネージャ（OKM）を使用するNetApp Volume Encryption（NVE）またはNetApp Aggregate Encryption（NAE）を使用している場合は、あとで手順 でキー管理ツールのパスフレーズを使用してキー管理ツールの再同期を完了できます。</block>
  <block id="e6070f78dc11f71748bff1b9003fccd0" category="paragraph"><block ref="854a4be4b1fce65bf3a90ee74692188e" prefix="" category="inline-code"></block> は、ストレージシステムのIPアドレスです（必須）。<block ref="220b0a4790e2c047ae96a881e506e1fe" prefix=" " category="inline-code"></block> は、ストレージシステムのネットワークマスクです（必須）。<block ref="14fb245f7140583707d1cda241eeeff2" prefix=" " category="inline-code"></block> は、ストレージシステムのゲートウェイです（必須）。<block ref="573c932508ccab841c5c117fb2cd2186" prefix=" " category="inline-code"></block> は、ネットワーク上のネームサーバのIPアドレスです（オプション）。<block ref="79e5a69f76d034adaafbb5cb6cb8fc45" prefix=" " category="inline-code"></block> は、DNSドメイン名です（オプション）。</block>
  <block id="5e2c0dc3398b3e8f5619e371fec2269b" category="list-text">ブートローダーのnode4にあるパートナーシステムIDを設定します。</block>
  <block id="4e01f43abaf0b878dabe329f87d4cee7" category="paragraph">ノード4の場合、<block ref="d18fd3db938a26ebbd3f74de41f0b73f" prefix=" " category="inline-code"></block> node3のノードである必要があります。</block>
  <block id="d1031e1f800c4bd6f924dc58bce65e5e" category="list-text">[[auto_install4_step21]を確認します<block ref="d18fd3db938a26ebbd3f74de41f0b73f" prefix=" " category="inline-code"></block> ノード4の場合：</block>
  <block id="47c9d570e26767f6f7f0247b3b0faa44" category="paragraph">NetApp Aggregate Encryption（NAE）またはNetApp Volume Encryption（NVE）を使用してアップグレードするシステムのボリュームを暗号化する場合は、暗号化設定を新しいノードに同期する必要があります。key-managerをリストアしない場合は、ARLを使用してnode2のアグリゲートをnode3からnode4に再配置すると、暗号化されたボリュームがオフラインになります。</block>
  <block id="1d206ee7a4d4f22dd32a3fb1be52713d" category="paragraph">ステージ1では、事前確認を実行し、必要に応じてアグリゲートの所有権を修正します。OKMを使用してストレージ暗号化を管理していて、SnapMirror関係を休止することができる場合は、特定の情報を記録する必要があります。</block>
  <block id="33ff5cb99c889e1db4238bdd49969091" category="paragraph">ステージ2で、ノード1の非ルートアグリゲートとNASデータLIFをノード2に再配置します。このプロセスは主に自動化されており、ステータスを確認するために処理が一時停止します。この処理は手動で再開する必要があります。必要に応じて、障害が発生したアグリゲートまたは拒否されたアグリゲートを再手順 の後半で使用するために必要なノード1の情報を記録してから、ノード1を撤去する必要があります。ネットブートnode3とnode4には、あとで手順 で準備することもできます。</block>
  <block id="1ed633e748d17dd08fdb27f349c57667" category="paragraph">ステージ 3 で、ノード 3 をインストールしてブートし、クラスタポートとノード管理ポートを node1 から node3 にマッピングし、ノード 3 のインストールを確認します。必要に応じて、ノード3でFCまたはUTA / UTA2設定を設定し、ノード3がクォーラムに参加していることを確認します。さらに、node1のNASデータLIFとルート以外のアグリゲートをnode2からnode3に再配置し、SAN LIFがnode3にあることを確認します。</block>
  <block id="3023bde0419d9056e2c0a1ff888f6e3a" category="paragraph">ステージ4で、ノード2の非ルートアグリゲートとSAN以外のデータLIFをノード3に再配置します。また、必要なnode2の情報を記録し、node2を撤去します。</block>
  <block id="eacd7e601ff8c3108e0e5207cbafd5b6" category="paragraph">ステージ 5 で、 node4 をインストールしてブートし、 node2 のクラスタポートとノード管理ポートを node4 にマッピングし、 node4 のインストールを確認します。必要に応じて、ノード4でFCまたはUTA / UTA2設定を設定し、ノード4がクォーラムに参加していることを確認します。node2のNASデータLIFとルート以外のアグリゲートもnode3からnode4に再配置し、SAN LIFがnode4にあることを確認します。</block>
  <block id="74d8511a5efc9e6d2f77eaf8e99a51e1" category="summary">を使用して、ONTAP 9.5を実行しているコントローラを9.7にアップグレードする場合は、node3のnode2 NASデータLIFをnode3からnode4に移動します<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block> コマンド</block>
  <block id="13b5531afc1b08c79fc18b1b09249b23" category="summary">を使用して、ONTAP 9.5を実行しているコントローラを9.7にアップグレードする場合は、ノード3にノード1のVLAN、インターフェイスグループ、およびブロードキャストドメインを再作成します<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block> コマンド</block>
  <block id="44debdffb9103c0cccd9a80b10ec8368" category="paragraph">ステージ4で、ルート以外のアグリゲートとNASデータLIFをnode2からnode3に再配置します。ノード 2 の必要な情報を記録してから、 node2 を撤去する必要があります。</block>
  <block id="ca2c50829b2f370083f7bcae75169741" category="summary">必要に応じて、を使用してONTAP 9.5を実行しているコントローラを9.7にアップグレードする場合は、NVEまたはNAE用に新しいコントローラモジュールを設定します<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block> コマンド</block>
  <block id="ef3edc70c20b3eaff285bb7a5dad5d16" category="open-title">ONTAP 9.6および9.7</block>
  <block id="42e990338c4eb3b9a0428737ba807350" category="paragraph">* ONTAP 9.6または9.7を実行しているコントローラでNVEまたはNAEを設定します</block>
  <block id="b47a9665bbb1dd8efdca2913841ff966" category="paragraph">* ONTAP 9.5*を実行しているコントローラでNVEまたはNAEを設定します</block>
  <block id="bf4ad40bcd220ad885204d8f95d5a1e2" category="list-text">[[auto_check_4_step23]]外付けディスクがあるシステムから、内蔵ディスクと外付けディスクをサポートするシステム（AFF A800システムなど）にアップグレードする場合は、node2アグリゲートをルートアグリゲートとして設定し、node2のルートアグリゲートからノード4がブートすることを確認します。ルートアグリゲートを設定するには、ブートメニューのオプションを選択します<block ref="e4da3b7fbbce2345d7772b0674a318d5" prefix=" " category="inline-code"></block> をクリックしてメンテナンスモードに切り替えます。</block>
  <block id="c18d56cb4d8dbb7a967cae5068abbca7" category="summary">を使用して、ONTAP 9.5を実行しているコントローラを9.7にアップグレードする場合は、node2のnode1 NASデータLIFをnode2からnode3に移動します<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block> コマンド</block>
  <block id="77abfc209665b592c54221e409c486f8" category="paragraph"><block ref="854a4be4b1fce65bf3a90ee74692188e" prefix="" category="inline-code"></block> は、ストレージシステムのIPアドレスです（必須）。<block ref="220b0a4790e2c047ae96a881e506e1fe" prefix=" " category="inline-code"></block> は、ストレージシステムのネットワークマスクです（必須）。<block ref="14fb245f7140583707d1cda241eeeff2" prefix=" " category="inline-code"></block> は、ストレージシステムのゲートウェイです。（必須）。<block ref="573c932508ccab841c5c117fb2cd2186" prefix=" " category="inline-code"></block> は、ネットワーク上のネームサーバのIPアドレスです（オプション）。<block ref="79e5a69f76d034adaafbb5cb6cb8fc45" prefix=" " category="inline-code"></block> は、ドメインネームサービス（DNS）ドメイン名です。このオプションパラメータを使用する場合は、ネットブートサーバの URL に完全修飾ドメイン名を指定する必要はなく、サーバのホスト名だけを指定します。</block>
  <block id="e0811ea9d9786cc8989d3ab88a4e3b4a" category="list-text"><block ref="9bd6a9f244c9332034b49ce1f74878c5" prefix="" category="inline-code"></block></block>
  <block id="5d1a6cb4c47b2c7d79ac9fd6d12f0523" category="admonition">オンボードキーマネージャを使用するNetApp Volume Encryption（NVE）またはNetApp Aggregate Encryption（NAE）を使用する場合は、あとで手順 でキー管理ツールのパスフレーズを使用してキー管理ツールの再同期を完了できるようにしておきます。</block>
  <block id="c8b61356b51e595d8d4b085138397f2a" category="paragraph">ノード4をラックに設置し、ノード2の接続をノード4に転送し、ブートノード4を起動して、ONTAP をインストールする必要があります。そのあと、このセクションで説明するように、node2上のスペアディスク、ルートボリュームに属するディスク、およびプロセスでnode3に再配置されていないルート以外のアグリゲートを再割り当てする必要があります。</block>
  <block id="c0577dde04914d4e86fcd22fc6ad5c48" category="paragraph">再配置処理はこのフェーズの開始時に一時停止されます。このプロセスはほとんどが自動化されており、処理は一時停止してステータスを確認できます。この処理は手動で再開する必要があります。また、NASデータLIFがnode4に正常に移動したことを確認する必要があります。</block>
  <block id="f5b4a0a26551c8147e4d15fe49ec53b5" category="cell">ブート環境プロンプトで次のコマンドを入力して、接続を手動で設定します。<block ref="08e9ed1febc3e725e8201311cddea860" prefix=" " category="inline-code"></block>
<block ref="854a4be4b1fce65bf3a90ee74692188e" prefix=" " category="inline-code"></block> は、ストレージシステムのIPアドレスです（必須）。<block ref="220b0a4790e2c047ae96a881e506e1fe" prefix=" " category="inline-code"></block> は、ストレージシステムのネットワークマスクです（必須）。<block ref="14fb245f7140583707d1cda241eeeff2" prefix=" " category="inline-code"></block> は、ストレージシステムのゲートウェイです（必須）。<block ref="573c932508ccab841c5c117fb2cd2186" prefix=" " category="inline-code"></block> は、ネットワーク上のネームサーバのIPアドレスです（オプション）。<block ref="79e5a69f76d034adaafbb5cb6cb8fc45" prefix=" " category="inline-code"></block> は、ドメインネームサービス（DNS）ドメイン名です。このオプションパラメータを使用する場合は、ネットブートサーバの URL に完全修飾ドメイン名を指定する必要はなく、サーバのホスト名だけを指定します。注：使用しているインターフェイスによっては、他のパラメータが必要になる場合もあります。入力するコマンド<block ref="0c6877a83224f87093205d2971ef3953" prefix=" " category="inline-code"></block> ファームウェアのプロンプトで詳細を確認します。</block>
  <block id="081bf1b51872055cec49bb711b3078cc" category="paragraph">ステージ2で、ノード1の非ルートアグリゲートとNASデータLIFをノード2に再配置します。このプロセスは主に自動化されており、ステータスを確認するために処理が一時停止します。この処理は手動で再開する必要があります。必要に応じて、障害が発生したアグリゲートまたは拒否されたアグリゲートを再手順 の後半で使用するために必要なノード1の情報を記録してから、対応するノード1のコントローラとNVRAMモジュールを交換し、ノード1を廃棄して、アップグレードしたノード1をネットブートする必要があります。</block>
  <block id="025d9ece9c4ae5853633f15285d23ef8" category="cell"><block ref="025d9ece9c4ae5853633f15285d23ef8" category="inline-link-macro-rx"></block></block>
  <block id="bc058862588424f3a586e99832b313fc" category="paragraph">ステージ2で、ノード1の非ルートアグリゲートとNASデータLIFをノード2に再配置します。このプロセスは主に自動化されており、ステータスを確認するために処理が一時停止します。この処理は手動で再開する必要があります。必要に応じて、障害が発生したアグリゲートまたは拒否されたアグリゲートを再ノード1を撤去する前に、手順 の後半で使用するために情報をメモしておきます。ネットブートの準備は、手順 のあとから行うこともできます。</block>
  <block id="8e08dc923ba10e10b88b04da341f5b14" category="cell"><block ref="8e08dc923ba10e10b88b04da341f5b14" category="inline-link-macro-rx"></block></block>
  <block id="c039d90be9eb3787189fd57d23f10d92" category="paragraph">ステージ3では、コントローラとNVRAMモジュールをアップグレードしてnode1をブートし、アップグレードしたnode1のインストールを確認します。NetApp Volume Encryption（NVE）を使用している場合は、キー管理ツールの設定をリストアします。ノード1のルート以外のアグリゲートとNASデータLIFをnode2からアップグレードしたnode1に再配置し、SAN LIFがnode1に存在することを確認します。</block>
  <block id="c56f33239addd639a546a027c679841b" category="cell"><block ref="c56f33239addd639a546a027c679841b" category="inline-link-macro-rx"></block></block>
  <block id="7abfecdf5ad8a80ea0bc5db9607dc350" category="paragraph">ステージ4で、ルート以外のアグリゲートとNASデータLIFをノード2からアップグレード後のノード1に再配置し、ノード2を撤去します。</block>
  <block id="88aba2d5ba01d267f2bde6142cd97bc6" category="cell"><block ref="88aba2d5ba01d267f2bde6142cd97bc6" category="inline-link-macro-rx"></block></block>
  <block id="b6c038f99f62e85a8d6cc2fe77ac0568" category="paragraph">ステージ5で、アップグレードしたnode2に提供された新しいNVRAMとコントローラモジュールを取り付け、さらにnode2をネットブートします。</block>
  <block id="9412b9d116170ef4dc34da34d0449344" category="cell"><block ref="9412b9d116170ef4dc34da34d0449344" category="inline-link-macro-rx"></block></block>
  <block id="2c524a09a41084103cfccb89e1e2dd49" category="paragraph">ステージ6で、コントローラとNVRAMモジュールをアップグレードしてnode2をブートし、アップグレードしたnode2のインストールを確認します。NVEを使用している場合は、key-manager configurationをリストアします。さらに、node1のルート以外のアグリゲートとNASデータLIFをnode1からアップグレードされたnode2に再配置し、SAN LIFがnode2に存在することを確認します。</block>
  <block id="2201f8be38de620c7e36cb511d56aa13" category="cell"><block ref="2201f8be38de620c7e36cb511d56aa13" category="inline-link-macro-rx"></block></block>
  <block id="fb13f8b167e25a81b898b43d42165d58" category="paragraph">ステージ7では、新しいノードが正しくセットアップされていることを確認し、暗号化が有効な新しいノードがある場合は、ストレージ暗号化またはNVEを設定してセットアップします。また、古いノードの運用を停止し、SnapMirrorの処理を再開する必要があります。</block>
  <block id="3c71d8aea4515e5bab3212b7c7635c9b" category="doc">ステージ 2 ：ノード1からリソースを再配置し、AFF A700またはFAS9000 node1を撤去します</block>
  <block id="98d03c0eb9112cc9024f712528415cd8" category="paragraph">ステージ2で、ノード1の非ルートアグリゲートとNASデータLIFをノード2に再配置します。このプロセスは主に自動化されており、ステータスを確認するために処理が一時停止します。この処理は手動で再開する必要があります。必要に応じて、障害が発生したアグリゲートまたは拒否されたアグリゲートを再手順 であとから使用するためにノード1の情報を記録しておき、対応するノード1のコントローラとNVRAMモジュールを交換し、ノード1を廃棄して、アップグレードしたノード1をネットブートする必要があります。</block>
  <block id="ba3ed006f5a9fb6f965da2e3e183b4ad" category="inline-link-macro">ネットブート</block>
  <block id="d7c7c51e5bb760e2570a29b82d44f1bf" category="list-text"><block ref="d7c7c51e5bb760e2570a29b82d44f1bf" category="inline-link-macro-rx"></block></block>
  <block id="b7bf4ef932e45b6a01a4ef305620f494" category="summary">AFF A700からAFF A900へのアップグレード時に、node2のnode1 NASデータLIFがnode2からnode1に再配置されていることを確認します。</block>
  <block id="a59f35dc95e7e305b48bffa59f6326f2" category="list-text"><block ref="a59f35dc95e7e305b48bffa59f6326f2" category="inline-link-macro-rx"></block></block>
  <block id="35ab088951b060d49693e4d4c692e7a5" category="list-text"><block ref="35ab088951b060d49693e4d4c692e7a5" category="inline-link-macro-rx"></block></block>
  <block id="3fa5ba29343ba59361bba0ce2fdcdb9e" category="list-text"><block ref="3fa5ba29343ba59361bba0ce2fdcdb9e" category="inline-link-macro-rx"></block></block>
  <block id="c9a4b38a782d53b773352b69a5dcb3f0" category="list-text"><block ref="c9a4b38a782d53b773352b69a5dcb3f0" category="inline-link-macro-rx"></block></block>
  <block id="85c9a198877fa7bb35709867c0fb30da" category="paragraph">手順の実行中に、交換用コントローラハードウェアを使用して元のコントローラハードウェアをアップグレードし、ルート以外のアグリゲートの所有権を切り替えます。アグリゲートをノードからノードに複数回移行して、アップグレード手順 全体を通じて、少なくとも 1 つのノードがアグリゲートからデータを提供していることを確認します。処理を続行する前に、クラスタ内のノード間でデータ LIF を移行することもできます。</block>
  <block id="7b26385705fc74d2f47a9aff876bdf41" category="list-text"><block ref="7b26385705fc74d2f47a9aff876bdf41" category="inline-link-macro-rx"></block></block>
  <block id="4716a557a98944472ebf4f49b8aadb3a" category="paragraph">ステージ7では、新しいノードが正しくセットアップされていることを確認し、暗号化が有効な新しいノードがある場合は、ストレージ暗号化またはNetApp Volume Encryptionを設定およびセットアップします。また、古いノードの運用を停止し、SnapMirrorの処理を再開する必要があります。</block>
  <block id="ed4c694f0027e2bf59537b7fa3096ed7" category="list-text"><block ref="ed4c694f0027e2bf59537b7fa3096ed7" category="inline-link-macro-rx"></block></block>
  <block id="64dc6def82eca9c49c8fc6cf38327fd0" category="summary">必要に応じて、AFF A700からAFF A900へのアップグレード時に、NVEまたはNAE用に新しいコントローラモジュールを設定します。」</block>
  <block id="bd7ff3b41e18f2676d912826d206a900" category="list-text"><block ref="bd7ff3b41e18f2676d912826d206a900" category="inline-link-macro-rx"></block></block>
  <block id="9de185adfdd7642791839ee7a21f58be" category="list-text"><block ref="9de185adfdd7642791839ee7a21f58be" category="inline-link-macro-rx"></block></block>
  <block id="e0e34319efe30ed6573987c64ee73a17" category="paragraph">ステージ6で、コントローラとNVRAMモジュールをアップグレードしてnode2をブートし、アップグレードしたnode2のインストールを確認します。NetApp Volume Encryption（NVE）を使用している場合は、キー管理ツールの設定をリストアします。さらに、node1のルート以外のアグリゲートとNASデータLIFをnode1からアップグレードされたnode2に再配置し、SAN LIFがnode2に存在することを確認します。</block>
  <block id="c83448ce7ef0e71f411f194e00ccc8e0" category="list-text"><block ref="c83448ce7ef0e71f411f194e00ccc8e0" category="inline-link-macro-rx"></block></block>
  <block id="1c8b8aeeae02461a9fadc4ceb618fbec" category="list-text"><block ref="1c8b8aeeae02461a9fadc4ceb618fbec" category="inline-link-macro-rx"></block></block>
  <block id="bf403b3f6213aa1d485dc29ba4deebc3" category="list-text"><block ref="bf403b3f6213aa1d485dc29ba4deebc3" category="inline-link-macro-rx"></block></block>
  <block id="0d500821bdc96d479f52180017fd421c" category="list-text"><block ref="0d500821bdc96d479f52180017fd421c" category="inline-link-macro-rx"></block></block>
  <block id="52d44ddeddf5fcbcf47ca759910fa913" category="paragraph">ステージ1で、AFF A700からAFF A900またはFAS9000からFAS9500へのアップグレードに適したハードウェアがあることを確認し、事前確認を実行して、必要に応じてアグリゲートの所有権を修正します。OKMを使用してストレージ暗号化を管理していて、SnapMirror関係を休止することができる場合は、特定の情報を記録する必要があります。</block>
  <block id="c164197fcb353dad04f1e8beb0243f33" category="list-text"><block ref="c164197fcb353dad04f1e8beb0243f33" category="inline-link-macro-rx"></block></block>
  <block id="68a11090e57970066317536eb452ff2d" category="inline-link-macro">オンボードキーマネージャを使用してストレージ暗号化を管理します</block>
  <block id="88875cea5e27f3f4eb07e601d1d82e2e" category="list-text"><block ref="88875cea5e27f3f4eb07e601d1d82e2e" category="inline-link-macro-rx"></block></block>
  <block id="d3cd60bb710f7c46488c2fdcff53e760" category="list-text"><block ref="a322323758cef88dbedb5f26cac8c538" prefix="" category="inline-code"></block></block>
  <block id="fb999a684076a243625bac3fd40af660" category="admonition">オンボードキーマネージャを使用するNetApp Volume Encryption（NVE）またはNetApp Aggregate Encryption（NAE）を使用する場合は、キー管理ツールのパスフレーズを必要なだけ残して、あとで手順 でキー管理ツールの再同期を完了します。</block>
  <block id="41107aca0599fc501e6800f801aa72b4" category="paragraph">環境の無停止の ONTAP ソフトウェアアップグレード。コントローラのアップグレードは含まれません。</block>
  <block id="3a8b3757d8c142f770f9d76513eff9ee" category="paragraph">node1の場合、<block ref="d18fd3db938a26ebbd3f74de41f0b73f" prefix=" " category="inline-code"></block> node2のものである必要があります。node2のシステムIDはから取得できます<block ref="5b70738f9bc21f7783bca30ce6275d06" prefix=" " category="inline-code"></block> node2に対するコマンドの出力。</block>
  <block id="80995018ae45f8a93e75a901e9a9749b" category="list-text">node2にパートナーシステムIDを設定します。</block>
  <block id="1f2698a1fc7b8c4a57f338488e53d435" category="paragraph">node2の場合、<block ref="d18fd3db938a26ebbd3f74de41f0b73f" prefix=" " category="inline-code"></block> AFF A900またはFAS9500にアップグレードするノード1のノードでなければなりません。</block>
  <block id="92b03f1ecf66a6ee3c76ebd05afbddda" category="list-text">node2のLOADERプロンプトで、を確認します<block ref="d18fd3db938a26ebbd3f74de41f0b73f" prefix=" " category="inline-code"></block> ノード2の場合：</block>
  <block id="ab59755d5a1df870944890a24affe31a" category="paragraph">ボリュームを移動することでアップグレードする場合、元のノードを削除する前に新しいノードをクラスタに追加します。クラスタ内のコントローラの数が、手順 でサポートされている最大クラスタサイズを超えないことを確認します。</block>
  <block id="bd7f71fd091a70c3f0b23cb5a356e64c" category="paragraph">新しいノードを設置したら、ネットブートを実行して、新しいノードが元のノードと同じバージョンのONTAP を実行するように設定する必要があります。ネットブートという用語は、リモート・サーバに保存された ONTAP イメージからブートすることを意味します。ネットブートの準備を行うときは、システムがアクセスできる Web サーバに、 ONTAP 9 ブート・イメージのコピーを配置する必要があります。</block>
  <block id="7ab8dfe9c5b72e3472374677882c9caf" category="paragraph">交換するクラスタノードがルートボリューム暗号化を使用している場合、ONTAP ソフトウェアはディスクからボリューム情報を読み取ることができません。ルートボリュームのキーをリストアします。</block>
  <block id="973101ddb988b90ce601f6442c898594" category="list-text">特別なブートメニューに戻ります。<block ref="16c75f7ad51c79b1cf539c94cd168367" prefix=" " category="inline-code"></block></block>
  <block id="17c034fb2d21ea55cdb8a8e69c62f069" category="list-text">（10）Set Onboard Key Manager Recovery secrets（オンボードキーマネージャリカバリシークレットの設定）*を選択します</block>
  <block id="a6b415fe2d6a649b63be379924ad9e5d" category="list-text">入力するコマンド<block ref="415290769594460e2e485922904f345d" prefix=" " category="inline-code"></block> 次のプロンプトが表示されます。</block>
  <block id="c2a77e29b8de9e8562b6fd93a28903df" category="paragraph"><block ref="4a405d8099ad49f7b92a6093775ada1b" prefix="" category="inline-code"></block></block>
  <block id="99a40bbc477cdc17f6e88d32032fbee2" category="list-text">プロンプトで、キー管理ツールのパスフレーズを入力します。</block>
  <block id="97da9a68ce886c4978d84008bc3d4e8b" category="list-text">プロンプトが表示されたら、バックアップデータを入力します。</block>
  <block id="71e3a0c9ae3930c06f28eb84647c689b" category="admonition">でパスフレーズとバックアップデータを入手しておく必要があります <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block> この手順のセクション。</block>
  <block id="df032103f8364ffe0942ab84f5f27f22" category="list-text">システムが再度特別な起動メニューを起動したら、オプション*（1）Normal Boot *を実行します</block>
  <block id="1997ee79006c38a9f666947dd57857f2" category="admonition">この段階でエラーが発生する場合があります。エラーが発生した場合は、の手順を繰り返します <block ref="8dac798a0974640f6cae187a1dbe2d57" category="inline-xref-macro-rx"></block> システムが正常に起動するまで。</block>
  <block id="5daba08f0febc7be0229c918d3deaa4d" category="admonition">この段階でエラーが発生する場合があります。エラーが発生した場合は、の手順を繰り返します <block ref="1abe7aef97cf6f4670adea7171f10403" category="inline-xref-macro-rx"></block> システムが正常に起動するまで。</block>
  <block id="37bcf5964cba22a5e1026e3bfd999926" category="list-text">ノード3から次のコマンドを実行します。</block>
  <block id="9b4b091bf0690393965fb7724be0006b" category="list-text">データアグリゲートを再配置する前に、ノード3のSVM-KEKキーが「true」にリストアされたことを確認します。</block>
  <block id="0a52730597fb4ffa01fc117d9e71e3a9" category="listing-title">例</block>
  <block id="13c13d2352f379924e4032f92cccb33a" category="paragraph">NetApp Volume Encryption（NVE）およびNetApp Aggregate Encryption（NAE）を使用してアップグレードするシステムのボリュームを暗号化する場合は、暗号化設定を新しいノードに同期する必要があります。キー管理ツールを同期しない場合は、ARLを使用してノード2のアグリゲートをノード3からノード4に再配置すると、ノード4に暗号化されたボリュームとアグリゲートをオンラインにするために必要な暗号化キーがないと処理が失敗することがあります。</block>
  <block id="06faea2c1bf225d7dca01142c99c8244" category="list-text">ノード4から次のコマンドを実行します。</block>
  <block id="e6c7a255c2aa3d1c9e8528fdbea53a6b" category="list-text">データアグリゲートを再配置する前に、ノード4でSVMのKEKキーが「true」にリストアされたことを確認します。</block>
  <block id="1b55e7f4887b8fb67aed1cfe14be88a6" category="list-text">[[auto_check_4_step23]]外付けディスクがあるシステムから、内蔵ディスクと外付けディスクをサポートするシステム（AFF A800システムなど）にアップグレードする場合は、node2のアグリゲートをルートアグリゲートとして設定し、node4がnode2のルートアグリゲートからブートするようにします。ルートアグリゲートを設定するには、ブートメニューのオプションを選択します<block ref="e4da3b7fbbce2345d7772b0674a318d5" prefix=" " category="inline-code"></block> をクリックしてメンテナンスモードに切り替えます。</block>
  <block id="364217334ff62898c99ab53d1c399fd0" category="paragraph">NetApp Volume Encryption（NVE）およびNetApp Aggregate Encryption（NAE）を使用してアップグレードするシステムのボリュームを暗号化する場合は、暗号化設定を新しいノードに同期する必要があります。キー管理ツールを同期しない場合、ARLを使用してノード1のアグリゲートをノード2からノード3に再配置すると、ノード3に暗号化されたボリュームとアグリゲートをオンラインにするための必要な暗号化キーがないために障害が発生することがあります。</block>
  <block id="367030bfa78ce5edbeac0c34dadc8486" category="paragraph">NetApp Aggregate Encryption（NAE）またはNetApp Volume Encryption（NVE）を使用してアップグレードするシステムのボリュームを暗号化する場合は、暗号化設定を新しいノードに同期する必要があります。キー管理ツールを再同期しない場合、ARLを使用してノード1のアグリゲートをノード2からアップグレードしたノード1に再配置すると、ノード1に暗号化されたボリュームとアグリゲートをオンラインにするための必要な暗号キーがないために障害が発生することがあります。</block>
  <block id="d78fca99557049bfe942bd572aec4d13" category="list-text">node1から次のコマンドを実行します。</block>
  <block id="722a50b23f118fce431bda63821ff8b6" category="list-text">データアグリゲートを再配置する前に、ノード1のSVM-KEKキーが「true」にリストアされたことを確認します。</block>
  <block id="5db260fa0b5fbfacb2534214a3285812" category="paragraph">NetApp Aggregate Encryption（NAE）またはNetApp Volume Encryption（NVE）を使用してアップグレードするシステムのボリュームを暗号化する場合は、暗号化設定を新しいノードに同期する必要があります。キー管理ツールを再同期しない場合は、ARLを使用して、アップグレードしたノード1からアップグレードしたノード2にノード2のアグリゲートを再配置すると、ノード2に暗号化されたボリュームとアグリゲートをオンラインにするために必要な暗号化キーがないためにエラーが発生することがあります。</block>
  <block id="593e2ad3d429d61bda399cdc2971b3d5" category="list-text">node2から次のコマンドを実行します。</block>
  <block id="2c44030cea2ae320e19712bb71a7d594" category="list-text">データアグリゲートを再配置する前に、SVMのKEKキーがnode2で「true」にリストアされていることを確認します。</block>
</blocks>