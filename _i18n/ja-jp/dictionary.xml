<?xml version="1.0" encoding="UTF-8"?>
<blocks>
  <block id="1a02fe8fc6a186319dd3345573fc3717" category="doc">ノード 4 をインストールしてブートします</block>
  <block id="75586863c552442d574a9bbfc3a0d408" category="paragraph">ノード 4 をラックに設置し、ノード 2 の接続をノード 4 に転送し、ノード 4 をブートして、 ONTAP をインストールする必要があります。次に、このセクションで説明するように、ノード 2 のスペアディスク、ルートボリュームに属するディスク、およびプロセスの前にノード 3 に再配置されなかったルート以外のアグリゲートを再割り当てする必要があります。</block>
  <block id="550ffaa7219faf74146770514db0d8e8" category="inline-link-macro">ネットブートを準備</block>
  <block id="cdb3662e6ecd47991de3008672ab3eb8" category="paragraph">node2 に同じバージョンの ONTAP 9 がインストールされていない場合は、 node4 をネットブートする必要があります。node4 のインストールが完了したら、 Web サーバに格納されている ONTAP 9 イメージからブートします。その後、の手順に従って、後続のシステムのブートに使用する正しいファイルをブートメディアデバイスにダウンロードできます <block ref="4815c2d091d790c1d3bab94177b38eaf" category="inline-link-macro-rx"></block>。</block>
  <block id="89023b09a8e04215547178052eb90222" category="inline-link-macro">ノード 4 の FC ポートを設定します</block>
  <block id="113dd8c6d49d13f5871e1cbe53350eb2" category="inline-link-macro">ノード 4 の UTA / UTA2 ポートを確認して設定してください</block>
  <block id="6f4a225b29c0975663d0e4b9e1f4547f" category="inline-xref">手順 1.</block>
  <block id="2f5ad93b7f0dd7bdcdf63542c05e8ebe" category="inline-xref">手順 21</block>
  <block id="f775037aa1f7a8a52b5159236f7449e7" category="inline-xref">手順 23</block>
  <block id="df5267f8e4bbfa9add1dd732e6b68e41" category="inline-link-macro">ノード 4 で FC または UTA / UTA2 設定を設定します</block>
  <block id="f3a29486bed19a90f2da6d007818b427" category="list-title">手順</block>
  <block id="c7009662ac7e20dc02b0e7d7e2ed8804" category="list-text">[[auto_install4_stp1] ノード 4 に十分なラックスペースがあることを確認します。</block>
  <block id="82952c70726b36a56f0651368cd2be05" category="paragraph">node4 が node2 とは別のシャーシにある場合は、 node3 と同じ場所に node4 を配置できます。node2 と node4 が同じシャーシにある場合は、 node4 が適切なラックの場所にすでに存在しているとします。</block>
  <block id="9ef9fab932162728d06bbfd2862c33d9" category="list-text">ノードモデルの _Installation and Setup Instructions _ の手順に従って、ノード 4 をラックに設置します。</block>
  <block id="179ba8fe173567627d42a1a9fc1e6948" category="list-text">ノード 4 をケーブル接続します。 node2 から node4 に接続を移動します。</block>
  <block id="d95867deadfe690e40f42068d6b59df8" category="inline-link-macro">参考資料</block>
  <block id="7c37472309a8c54b0891c8e95190096e" category="list-text">コンソール（リモート管理ポート）</block>
  <block id="f0012d7dc9fbefbb11bb69cd6932aef8" category="list-text">クラスタポート</block>
  <block id="b2d2606b76cd5df666c2b6a0f4bfc496" category="list-text">データポート</block>
  <block id="f35c347c4cb65015138a4d291827b1a1" category="list-text">クラスタポートとノード管理ポート</block>
  <block id="8c4aa541ee911e8d80451ef8cc304806" category="list-text">ストレージ</block>
  <block id="e6627a49532995a915815645abe1e3bc" category="list-text">SAN 構成： iSCSI イーサネットおよび FC スイッチポート</block>
  <block id="0046d599de2c63ac6aee024be099994d" category="admonition">ほとんどのプラットフォームモデルには一意のインターコネクトカードモデルがあるため、インターコネクトカード / FC-VI カードまたはインターコネクト / FC-VI ケーブルの接続を node2 から node4 に移動する必要はありません。MetroCluster 構成の場合は、 FC-VI ケーブルの接続を node2 から node4 に移動する必要があります。新しいホストに FC-VI カードがない場合は、 FC-VI カードの移動が必要になることがあります。</block>
  <block id="8c346c2672eda514d4b912cb897c6c54" category="list-text">node4 への電源を入れてから、コンソール端末で Ctrl+C キーを押してブートプロセスを中断し、ブート環境プロンプトにアクセスします。</block>
  <block id="994bdd0bc026ec99be435de25a9ecc3d" category="admonition">node4 をブートすると、次の警告メッセージが表示される場合があります。</block>
  <block id="d728df788701a4dbee2b7991f0468dad" category="list-text">手順 4 で警告メッセージが表示された場合は、次の操作を実行します。</block>
  <block id="3e1ef1763b3680d2c8fbf0a8ea19db9b" category="list-text">NVRAM バッテリ低下以外の問題を示すコンソールメッセージがないか確認し、必要に応じて対処します。</block>
  <block id="d73910b693432e337843357586f3e39f" category="list-text">バッテリの充電と起動プロセスが完了するまで待ちます。</block>
  <block id="b1e6d70b6a993d323936c87bff29461b" category="admonition">を参照してください <block ref="4815c2d091d790c1d3bab94177b38eaf" category="inline-link-macro-rx"></block>。</block>
  <block id="d583a56b378186283bc180e8dfcdad82" category="list-text">[[step6] 次のいずれかの操作を選択して、ネットブート接続を設定します。</block>
  <block id="3a325cd28eedfb6e2a8828a9cc5043a2" category="cell">動的ホスト構成プロトコル（ DHCP ）の状態</block>
  <block id="c1325f6903ebb5ebb2bb519a73ddb1b0" category="cell">作業</block>
  <block id="5bda814c4aedb126839228f1a3d92f09" category="cell">実行中です</block>
  <block id="aee2adde97afad89c105aeb72e6320b3" category="cell">ブート環境プロンプトで次のコマンドを使用して、自動的に接続を設定します。 ifconfig e0M -auto</block>
  <block id="84435c8fed125c1f06699e20bdcee63d" category="cell">実行されていません</block>
  <block id="15fe98426987c07cba715dffbfb96c7e" category="list-text">ノード 4 でネットブートを実行します。</block>
  <block id="0ba2b3e0a887666765eb2d690768c576" category="cell">用途</block>
  <block id="383b9c142d0ac9c95fc6323618a87c9b" category="cell">FAS/AFF8000 シリーズシステム</block>
  <block id="8385f026f91d6fc14fd02b225112bac8" category="cell">netboot\http://&lt;web_server_ip/path_to_web-accessible_directory&gt;/netboot/kernel`</block>
  <block id="edc91455dc5116cbd53031ff17548c91" category="cell">その他すべてのシステム</block>
  <block id="1e3f57d872237ce4621e377ee8ff6896" category="cell">netboot\http://&lt;web_server_ip/path_to_web-accessible_directory&gt;/&lt;ontap_version&gt;_image.tgz`</block>
  <block id="17e387f327c3866b0d0ae33451a79635" category="paragraph">「 &lt;path_the_web-accessible_directory&gt; 」は、手順 1 の「 &lt;ONTAP_version&gt;_image.tgz 」をダウンロードした場所に配置する必要があります <block ref="4815c2d091d790c1d3bab94177b38eaf" category="inline-link-macro-rx"></block>。</block>
  <block id="85bd8aebb41cb27f7bc364e977313958" category="admonition">トランクを中断しないでください。</block>
  <block id="45b788b600b6973bddaa17d7d85de037" category="list-text">起動メニューからオプション（ 7 ） Install new software first （新しいソフトウェアを最初にインストール）を選択します。</block>
  <block id="adcfa58e9fef1d45cc4bd403ac68eb9f" category="paragraph">このメニューオプションを選択すると、新しい ONTAP イメージがブートデバイスにダウンロードおよびインストールされます。</block>
  <block id="0b22fb8d0feec85055f45c8c4a298766" category="list-text">手順を続行するかどうかを確認するメッセージが表示されたら、「 y 」と入力し、パッケージの入力を求められたら URL を入力します。</block>
  <block id="84ea00dba7c6a1cf0426e58385307e4f" category="paragraph">http://&lt;web_server_ip/path_to_web-accessible_directory&gt;/&lt;ontap_version&gt;_image.tgz` にアクセスします</block>
  <block id="7b3f6c26774d36cd594edf297f0f8f57" category="list-text">次の手順を実行してコントローラモジュールをリブートします。</block>
  <block id="7043cc5b7b924f62a8af6f3d2e706c77" category="list-text">次のプロンプトが表示されたら 'n' を入力してバックアップ・リカバリをスキップします</block>
  <block id="330edabea721cfdb93e4a4aed8cd1730" category="list-text">次のプロンプトが表示されたら 'y' と入力して再起動します</block>
  <block id="ca95d6295c1b1cab041926d491fa54ba" category="list-text">ブート・メニューからメンテナンス・モード「 5 」を選択し、ブートを続行するように求めるプロンプトが表示されたら「 y 」と入力します。</block>
  <block id="bea7673b9c3eda34bfe449c80f92539f" category="list-text">コントローラとシャーシが HA 構成になっていることを確認します。</block>
  <block id="70cfb57c22486ea2d08d331675532dce" category="paragraph">「 ha-config show 」</block>
  <block id="d66825c57ef1d03f12142772b5cb7bae" category="paragraph">次に 'ha-config show コマンドの出力例を示します</block>
  <block id="8d88ee8626e30313013b223ba409abaa" category="admonition">システムは、 HA ペア構成かスタンドアロン構成かを PROM に記録します。状態は、スタンドアロンシステムまたは HA ペア内のすべてのコンポーネントで同じである必要があります。</block>
  <block id="55c802ca03b1fc5b58c1d59d28131125" category="list-text">コントローラとシャーシが HA として構成されていない場合は、次のコマンドを使用して構成を修正します。</block>
  <block id="dd974151ca8e1528e09f3e46a090f617" category="paragraph">「 ha-config modify controller ha 」を参照してください</block>
  <block id="898e93ac193351b4a5f895216aad0508" category="paragraph">「 ha-config modify chassis ha 」を参照してください</block>
  <block id="236df8dd892b4bd6bb01e86747337e6f" category="paragraph">MetroCluster 構成の場合は、次のコマンドを使用してコントローラとシャーシを変更します。</block>
  <block id="911c90c39145c3c3c0d524809f4a16c8" category="paragraph">「 ha-config modify controller mcc 」</block>
  <block id="1d3bd99dc4d12eba418aa32c0e69ed77" category="paragraph">「 ha-config modify chassis mcc 」</block>
  <block id="d09b053bad809215bd1c4350481aba44" category="list-text">メンテナンスモードを終了します。</block>
  <block id="819817945fea31f0c3596c841e685904" category="paragraph">「 halt 」</block>
  <block id="106cd92eb2d2b994c9a8675214fd438c" category="paragraph">ブート環境のプロンプトで Ctrl+C を押し、 AUTOBOOT を中断します。</block>
  <block id="088efa1f2f879b1cccaa5b548a064885" category="list-text">[auto_install4_step15]] ノード 3 で、システムの日付、時刻、およびタイムゾーンを確認します。</block>
  <block id="0dbad5b96349237116f63f0f389bd7f4" category="paragraph">「食事」</block>
  <block id="68dd867f743672fe385fd727b406983a" category="list-text">node4 で、ブート環境のプロンプトで次のコマンドを使用して日付を確認します。</block>
  <block id="3e72511c09e554faf49052f79d627689" category="paragraph">「日付」</block>
  <block id="10615484104523967682784d6824a536" category="list-text">必要に応じて、 node4 に日付を設定します。</block>
  <block id="aa03f64841cdad6f19ac1550e1ad8c29" category="list-text">node4 で、ブート環境のプロンプトで次のコマンドを使用して時間を確認します。</block>
  <block id="667f3a6a11750e110d0c1442d2aa20e7" category="paragraph">「時間」</block>
  <block id="7651eb09fbac7d811bab7ed026019b25" category="list-text">必要に応じて、 node4 に時間を設定します。</block>
  <block id="55f472f17ae9bd54337956b780332fff" category="list-text">必要に応じて、 node4 にパートナーシステム ID を設定します。</block>
  <block id="e02ed2f754f906507b04045b6d64c6a8" category="list-text">設定を保存します。</block>
  <block id="4efce637d6ec3bc2a69f403fd39b9b41" category="paragraph">'aveenv</block>
  <block id="d41d8cd98f00b204e9800998ecf8427e" category="doc"></block>
  <block id="a94e69437db24dee798bbd90bce4ee0a" category="paragraph">「 boot_ontap menu</block>
  <block id="32d978cffec9875e4d92dc55b84df69b" category="doc">node2 によって所有されているルート以外のアグリゲートと NAS データ LIF を、 node3 から node4 に移動します</block>
  <block id="33b455f1b5d98f0ba5db998a78bbbbe3" category="paragraph">ノード 4 のネットワーク設定を確認し、ノード 3 からノード 4 にアグリゲートを再配置する前に、ノード 2 に現在ノード 3 に属する NAS データ LIF が、ノード 3 からノード 4 に再配置されていることを確認する必要があります。また、ノード 4 に SAN LIF が存在することも確認する必要があります。</block>
  <block id="d2f28697e2bc23acb2a0a646043ffac0" category="paragraph">アップグレード手順の実行中、リモート LIF は SAN LUN へのトラフィックを処理します。アップグレード時にクラスタやサービスの健全性を維持するために、 SAN LIF を移動する必要はありません。SAN LIF は、新しいポートにマッピングする必要がないかぎり移動されません。ノード 4 をオンラインにしたあと、 LIF が正常に機能しており、適切なポートに配置されていることを確認します。</block>
  <block id="761fe912511daeb08557e2215d0085e3" category="list-text">再配置処理を再開します。</block>
  <block id="d6fd449bc639f92f27b747fd5b40361d" category="paragraph">「システムコントローラの交換が再開」</block>
  <block id="0088774945c7d5ae5289c2de3632524f" category="paragraph">システムは次のタスクを実行します。</block>
  <block id="8f1335854a57fa62ce5fd7596399825b" category="list-text">クラスタクォーラムチェック</block>
  <block id="9ebfbaf3d8306da9bc975b709c5ec632" category="list-text">システム ID の確認</block>
  <block id="02d365a95e78a8c9b434a9c521f379c8" category="list-text">イメージのバージョンチェック</block>
  <block id="2540df2535b5361f67db0cb18a3f91a5" category="list-text">ターゲットプラットフォームのチェック</block>
  <block id="c8740509193885a8e40f7a7fb84ebff6" category="list-text">ネットワーク到達可能性チェック</block>
  <block id="93328d3894b0eabbdee40ef873079464" category="paragraph">ネットワーク到達可能性チェックのこの段階で処理が一時停止します。</block>
  <block id="ba825b8ec370a1f6fa3b0b9ac48b0036" category="paragraph">システムは次のチェックを実行します。</block>
  <block id="e31fb2dedfef9337a9708f375d220030" category="list-text">クラスタの健全性チェック</block>
  <block id="8ea7886b35c3e44ad6fcf3a1535ab9e7" category="list-text">クラスタ LIF のステータスを確認します</block>
  <block id="545969fcc9e42f8cf5ca0598e1ec25f6" category="paragraph">これらのチェックの実行後、システムによって、 node2 によって所有されているルート以外のアグリゲートと NAS データ LIF が新しいコントローラ node4 に再配置されます。リソースの再配置が完了すると、コントローラの交換処理が一時停止します。</block>
  <block id="9b1668278d2d17d21775af5a0c8c14b3" category="list-text">アグリゲートの再配置処理と NAS データ LIF の移動処理のステータスを確認します。</block>
  <block id="f1e1b94ce2ba7179506b74127da77af2" category="paragraph">「 system controller replace show-sdetails 」というエラーが表示されます</block>
  <block id="ff23473696232fd91c1e2dcb460109e4" category="paragraph">コントローラ交換用手順が一時停止している場合は、エラーがある場合はチェックして修正し、次に「問題 re sume 」をクリックして操作を続行します。</block>
  <block id="b5cd09b90221c700e1c2cf9d6253d6a1" category="list-text">必要に応じて、取り外した LIF をリストアしてリバートします。取り外した LIF を表示します。</block>
  <block id="0b66eef739f727e3f877d8fd0e6b8862" category="paragraph">cluster controller -replacement network ヒエラー（クラスタコントローラ交換ネットワークが取り外されました） -interface show</block>
  <block id="e288d72d848472060faab52648a13f10" category="paragraph">LIF が取り外された場合は、ホームノードをノード 4 にリストアします。</block>
  <block id="26490175c6a9bb3f68c33041e7c3bd2e" category="paragraph">クラスタ・コントローラ交換ネットワークが取り外されましたインタフェース・リストア -home-node</block>
  <block id="6def760ec3a422405912b1de335c67db" category="list-text">この処理を再開すると、必要なポストチェックの実行をシステムに求めるプロンプトが表示されます。</block>
  <block id="f3bf2563f63e5f2af4793dec3cbb4411" category="paragraph">次のポストチェックが実行されます。</block>
  <block id="9e9f6a103b5a748cadf8dfd54b8e29ac" category="list-text">アグリゲートの再構築チェック</block>
  <block id="ea017e018f3e760c65f3b02f928b8e43" category="list-text">アグリゲートのステータスを確認します</block>
  <block id="08f0db77633fd9c7f12fcd8827332b9d" category="list-text">ディスクのステータスを確認します</block>
  <block id="3c1799bbeb29b748f57f26ac2c4fc6f9" category="list-text">ボリュームチェック</block>
  <block id="befd434b83717d2b7bd83967d66e9157" category="doc">ノード 2 を撤去</block>
  <block id="3b70100fce1839004dba40191f90a2c9" category="list-text">処理を再開します。</block>
  <block id="21d67404cbc8811a82f375c6eb59ce82" category="paragraph">ノードは自動的に停止します。</block>
  <block id="ac616410952c35e808a3c7ce4ea5b4a7" category="inline-link-macro">古いシステムの運用を停止</block>
  <block id="2061ab494eae73f1e7251b76a58b27d3" category="cell">ストレージまたはボリュームを移動してクラスタ内のコントローラハードウェアを簡単にアップグレードする方法について説明します。サポートされるモデルをディスクシェルフに変換する方法についても説明します。</block>
  <block id="595e15ec8af10c3d959522d0d1eab769" category="cell">MetroCluster 構成でコントローラとストレージモデルをアップグレードし、 MetroCluster FC 構成から MetroCluster IP 構成に移行し、ノードを追加して MetroCluster 構成を拡張する手順について説明します。</block>
  <block id="b42a2144e64bfdf4eecf966f7bb495c5" category="inline-link-macro">ONTAP 9.0 コマンド：マニュアルページリファレンス</block>
  <block id="a4117daa2ff8204dba8b79ed1da09e5b" category="cell"><block ref="a4117daa2ff8204dba8b79ed1da09e5b" category="inline-link-macro-rx"></block></block>
  <block id="81f65dde1fe71b470218b0fbe6dafc23" category="cell">サポートされる ONTAP 9.0 コマンドの構文と使用法について説明します。</block>
  <block id="1447526d9bfec11c73a566b23b4f87ab" category="inline-link-macro">ONTAP 9.1 コマンド：マニュアルページリファレンス</block>
  <block id="3f651f32c2efae31cb0b4da82294b37b" category="cell"><block ref="3f651f32c2efae31cb0b4da82294b37b" category="inline-link-macro-rx"></block></block>
  <block id="d7e58a36d2ecf34ed950099c1e30e349" category="cell">ONTAP 9.1 でサポートされるコマンドの構文と使用法について説明します。</block>
  <block id="25d709d9429cb9179fe81f4343515fa1" category="inline-link-macro">ONTAP 9.2 コマンド：マニュアルページリファレンス</block>
  <block id="89065c0795a681c066df18ebe55464d3" category="cell"><block ref="89065c0795a681c066df18ebe55464d3" category="inline-link-macro-rx"></block></block>
  <block id="be948fce3cd6e191738619444b30062e" category="cell">ONTAP 9.2 でサポートされるコマンドの構文と使用法について説明します。</block>
  <block id="46490acdb4b495cbc81468a4840d2c5d" category="inline-link-macro">ONTAP 9.3 コマンド：マニュアルページリファレンス</block>
  <block id="9d087aa4c3e3015b8ac013580c0f90d4" category="cell"><block ref="9d087aa4c3e3015b8ac013580c0f90d4" category="inline-link-macro-rx"></block></block>
  <block id="119362933ed4ef8c2dbccecbb68cc43b" category="cell">ONTAP 9.3 でサポートされるコマンドの構文と使用法について説明します。</block>
  <block id="1aeb70ab3e33d74db4928037aa88a7eb" category="inline-link-macro">ONTAP 9.4 コマンド：マニュアルページリファレンス</block>
  <block id="8a14044dc26b4cb3bb6448492e70e961" category="cell"><block ref="8a14044dc26b4cb3bb6448492e70e961" category="inline-link-macro-rx"></block></block>
  <block id="929d0856b69565e71fefd5bef5533d93" category="cell">ONTAP 9.4 でサポートされるコマンドの構文と使用法について説明します。</block>
  <block id="6ea3af7ae81e05b625440926c8fcc6ea" category="inline-link-macro">ONTAP 9.5 コマンド：マニュアルページリファレンス</block>
  <block id="78610e5d700899a0dc146918529c56af" category="cell"><block ref="78610e5d700899a0dc146918529c56af" category="inline-link-macro-rx"></block></block>
  <block id="db0052a2214aa0ca3e4d7e0a79e8d79a" category="cell">ONTAP 9.5 でサポートされるコマンドの構文と使用法について説明します。</block>
  <block id="384be8d232a0ab0b84a145e4bf59bbed" category="inline-link-macro">ONTAP 9.6 コマンド：マニュアルページリファレンス</block>
  <block id="84d45c7d2db474ca3af465732948fd8d" category="cell"><block ref="84d45c7d2db474ca3af465732948fd8d" category="inline-link-macro-rx"></block></block>
  <block id="7478969542b0a3320dd1f9c09d30231a" category="cell">ONTAP 9.6 でサポートされるコマンドの構文と使用法について説明します。</block>
  <block id="c9aa14f76f0f0a25762ef86776113011" category="inline-link-macro">ONTAP 9.7 コマンド：マニュアルページリファレンス</block>
  <block id="edcc14f99b45ac8b5b29319da6793eea" category="cell"><block ref="edcc14f99b45ac8b5b29319da6793eea" category="inline-link-macro-rx"></block></block>
  <block id="849578c3a682cf124d61ab2b562aa1fa" category="cell">ONTAP 9.7 でサポートされるコマンドの構文と使用法について説明します。</block>
  <block id="112d3c239cd86d18383aedfae5ed632b" category="inline-link-macro">ONTAP 9.8 コマンド：マニュアルページリファレンス</block>
  <block id="a206ae5c7f29407f29397485796cc31c" category="cell"><block ref="a206ae5c7f29407f29397485796cc31c" category="inline-link-macro-rx"></block></block>
  <block id="c85c87a5f255edc538c88661bb863907" category="cell">サポートされている ONTAP 9.8 コマンドの構文と使用法について説明します。</block>
  <block id="8514bd0cded8da51b71a7aba8599153c" category="cell">ストレージフェイルオーバー、テイクオーバー / ギブバックなどのハイアベイラビリティクラスタ構成をインストールおよび管理する方法について説明します。</block>
  <block id="ed99eca5665640e9b0e3fced8264b368" category="cell">クラスタで物理 / 仮想ネットワークポート（ VLAN およびインターフェイスグループ）、 LIF 、ルーティング、およびホスト解決サービスを設定および管理する方法、ロードバランシングでネットワークトラフィックを最適化する方法、および SNMP を使用してクラスタを監視する方法について説明します。</block>
  <block id="684c05de33c5ed574435c18094046bde" category="cell">FC と iSCSI のトポロジと配線方式について説明します</block>
  <block id="ec8a498c0ff432b735ba28247dbb239f" category="cell">ONTAP をセットアップおよび設定する方法について説明します。</block>
  <block id="38f19900a80b03ef2e62f2105ab6323a" category="cell">ONTAP システムの管理方法、 CLI インターフェイスの使用方法、クラスタへのアクセス方法、ノードの管理方法などについて説明します</block>
  <block id="25c1844876df2afa3616f32befb014b3" category="cell">ONTAP のダウンロードとアップグレードの手順については、を参照してください</block>
  <block id="9bd1a11fb0d175da8194074a575cbf3a" category="inline-link-macro">「 system controller replace 」コマンドを使用して、 ONTAP 9.5 を実行するコントローラハードウェアを ONTAP 9.7 にアップグレードします</block>
  <block id="f576635c194a19e5910126ab234152d9" category="cell"><block ref="f576635c194a19e5910126ab234152d9" category="inline-link-macro-rx"></block></block>
  <block id="76131ba473c7ab8f940b1defa73cba87" category="cell">ONTAP 9.5 を実行するコントローラを ONTAP 9.7 に無停止でアップグレードする場合に、「 system controller replace 」コマンドを使用してアグリゲートの再配置手順を説明します。</block>
  <block id="0e490704226a6f678e043e59eee46210" category="inline-link-macro">ONTAP 9.8 以降を実行しているコントローラハードウェアをアップグレードするには、「 system controller replace 」コマンドを使用します</block>
  <block id="c6f3014369a1f06fe73f7a2cba39dfb1" category="cell"><block ref="c6f3014369a1f06fe73f7a2cba39dfb1" category="inline-link-macro-rx"></block></block>
  <block id="62a92c3d7ea27667983fb6842f0835ec" category="cell">ONTAP 9.8 を実行するコントローラを、 system controller replace コマンドを使用して無停止でアップグレードする場合に必要なアグリゲートの再配置手順について説明します。</block>
  <block id="743707e39dafe5109cbff1b061b5b76d" category="inline-link-macro">ONTAP 9.7 以前を実行しているコントローラハードウェアは、アグリゲートの再配置を使用して手動でアップグレードします</block>
  <block id="5cb60fbe51b20b5c36b7dee05c9cf1f7" category="cell"><block ref="5cb60fbe51b20b5c36b7dee05c9cf1f7" category="inline-link-macro-rx"></block></block>
  <block id="55b831f07f1b45c03df3d93cd827ad94" category="cell">ONTAP 9.7 以前を実行しているコントローラの手動による無停止アップグレードを実行するために必要なアグリゲートの再配置手順について説明します。</block>
  <block id="0fcc55966131a059d63ed79deda9a495" category="inline-link-macro">ONTAP 9.8 以降を実行しているコントローラハードウェアは、アグリゲートの再配置を使用して手動でアップグレードします</block>
  <block id="48d4ce3e31086711d3ee342fa8447083" category="cell"><block ref="48d4ce3e31086711d3ee342fa8447083" category="inline-link-macro-rx"></block></block>
  <block id="f39fe3ae91660449bc81c96d4bc3f3a6" category="cell">ONTAP 9.8 以降を実行するコントローラの手動無停止アップグレードを実行するために必要なアグリゲートの再配置手順について説明します。</block>
  <block id="f7e23c11beeca2c17c91f38177574a83" category="section-title">参照サイト</block>
  <block id="9d2169c1c2855b78a7aeaa4f42d27dc7" category="inline-link-macro">ネットアップサポートサイト</block>
  <block id="da160308e3b4b4a80bf1b72b5bdbedb8" category="inline-link-macro">Hardware Universe</block>
  <block id="865e9b4ef52f3b0d3050c8b3c14eb660" category="inline-link-macro">Active IQ Config Advisor</block>
  <block id="83b27b00949218cb0d9ec7e1eb1c92ad" category="doc">ノードをアップグレードする準備をします</block>
  <block id="6510eaf8fd7e9800a5b7d62b06dc6e9c" category="list-text">ONTAP コマンドラインで次のコマンドを入力して、コントローラの交換プロセスを開始します。</block>
  <block id="53d5140b9db74b84bdd8037a6063ec88" category="paragraph">次の出力が表示されます。</block>
  <block id="9843edc4af038cb41e5ce95e9aad1e03" category="list-text">「 y 」キーを押すと、次の出力が表示されます。</block>
  <block id="ffc467f3c2a85173d4529548d72d41b9" category="paragraph">システムでは次の事前確認が実行され、あとで手順で使用するために各事前確認の出力が記録されます。</block>
  <block id="495aa5c508241f1eca40fd503bc73196" category="cell">事前チェック</block>
  <block id="b5a7adde1af5c87d7fd797b6245c2a39" category="cell">説明</block>
  <block id="688df3b12b34ef0608e319ff169390d4" category="cell">クラスタの健常性チェック</block>
  <block id="2ebe98702ab3694ec3ccfe3e623a124e" category="cell">クラスタ内のすべてのノードが正常であることを確認します。</block>
  <block id="56beb58e6d547196c5aa44214e93ccaa" category="cell">MCC クラスタチェック</block>
  <block id="f8c3b8dcbd883dc2841679a94feb852a" category="cell">システムが MetroCluster 構成かどうかを確認します。MetroCluster 構成かどうかが自動的に検出され、特定の事前確認と検証チェックが実行されます。4 ノードの MetroCluster FC 構成のみがサポートされます。2 ノード MetroCluster 構成と 4 ノード MetroCluster の IP 構成では、チェックが失敗します。MetroCluster 構成がスイッチオーバーされている場合、チェックは失敗します。</block>
  <block id="b14360b478956e0213006307a2213b01" category="cell">アグリゲートの再配置ステータスチェック</block>
  <block id="23ecfd4d5c38f058d2a5b47f3a17a9b2" category="cell">アグリゲートの再配置がすでに実行中であるかどうかを確認します。別のアグリゲートの再配置を実行中の場合、チェックは失敗します。</block>
  <block id="2fb16648e5e222f12729fb8c953149b5" category="cell">モデル名のチェック（ Model Name Check</block>
  <block id="84599dff045e3f86049bc2022bf4b930" category="cell">この手順でコントローラモデルがサポートされているかどうかを確認します。モデルがサポートされていない場合、タスクは失敗します。</block>
  <block id="67c4a102a7629dddfcaf5472ead63dd6" category="cell">クラスタクォーラムチェック</block>
  <block id="b26031d08c55750f9480d081320ddcbe" category="cell">交換するノードがクォーラムにあることを確認します。ノードがクォーラムを構成していない場合は、タスクが失敗します。</block>
  <block id="833b60ce00de23efdd84aaf2257b1cd3" category="cell">イメージのバージョンチェック</block>
  <block id="4f324d87f2095ea7b3cb652dd2dc4b10" category="cell">HA ステータスチェック</block>
  <block id="0ec2a475eb3cc7052a2df9d912b429a5" category="cell">交換する両方のノードがハイアベイラビリティ（ HA ）ペア構成になっているかどうかを確認します。コントローラでストレージフェイルオーバーが有効になっていない場合、タスクは失敗します。</block>
  <block id="13953a740d52280d2268524a1a4a3535" category="cell">アグリゲートステータスチェック</block>
  <block id="d2be5a07810282eec1226ecdcabc0e8d" category="cell">ホーム所有者でないアグリゲートを交換するノードが所有している場合、そのタスクは失敗します。ローカル以外のアグリゲートを所有するノードは使用しないでください。</block>
  <block id="6244df7e25591403b0d5255577576eb4" category="cell">ディスクステータスチェック</block>
  <block id="320bc2c593ebed7e970715ea3832bc2e" category="cell">データ LIF ステータスチェック</block>
  <block id="9433521f789681a1a8fd76815674c438" category="cell">交換するノードにローカル以外のデータ LIF があるかどうかを確認します。ホーム所有者でないデータ LIF がノードに含まれないようにしてください。ローカル以外のデータ LIF がいずれかのノードに含まれている場合、タスクは失敗します。</block>
  <block id="eb694fc97d0bfef2c84584a29b318d85" category="cell">クラスタ LIF ステータス</block>
  <block id="ce7612b7485886dbb77994528256ffe5" category="cell">両方のノードでクラスタ LIF が動作しているかどうかを確認します。クラスタ LIF が停止している場合は、タスクは失敗します。</block>
  <block id="35a80eab14772418cca0ff3317910419" category="cell">ASUP ステータスチェック</block>
  <block id="166dc880ac0c6c0bb26663235da7e471" category="cell">ASUP 通知が設定されていないと、タスクは失敗します。コントローラの交換用手順を開始する前に ASUP を有効にする必要があります。</block>
  <block id="d39a17fff59bba71c24822f913f16591" category="cell">CPU 利用率チェック</block>
  <block id="3478400e352864eaa33992de6e976ca8" category="cell">交換するノードの CPU 利用率が 50% を超えていないかどうかを確認します。CPU 使用率がかなりの時間にわたって 50% を超えると、タスクは失敗します。</block>
  <block id="1a0a7ab1ebbc5d1d73b48be5c234810d" category="cell">アグリゲートの再構築チェック</block>
  <block id="7830789d964e8c8cf3a370b1d0299a28" category="cell">いずれかのデータアグリゲートで再構築が実行されているかどうかを確認しますアグリゲートの再構築を実行中の場合、タスクは失敗します。</block>
  <block id="c17c89f5ba46492be395e9f071e013ae" category="cell">ノードアフィニティジョブチェック</block>
  <block id="83aecfe9d4bf515a2ec45766e28a4ce0" category="cell">ノードアフィニティジョブが実行されているかどうかを確認します。ノードアフィニティジョブが実行中の場合、チェックは失敗します。</block>
  <block id="22afa574ce25ee7b49bc951eecd7f0ac" category="section-title">ARL の事前確認に失敗した場合は、アグリゲートの所有権を修正</block>
  <block id="7a29204c210eec42f3d01bebd9b483ba" category="paragraph">アグリゲートステータスチェックに失敗した場合は、パートナーノードが所有するアグリゲートをホーム所有者ノードに戻し、事前確認プロセスを再度開始する必要があります。</block>
  <block id="f38dad169237355428118b60b1896828" category="list-text">パートナーノードが現在所有しているアグリゲートをホーム所有者ノードに戻します。</block>
  <block id="17ef288fc5accadf7f08a6841d89c986" category="list-text">node1 と node2 のどちらも現在の所有者（ホーム所有者ではない）アグリゲートを所有していないことを確認します。</block>
  <block id="74aa132d7caa1904dc30e16328313124" category="paragraph">次の例は、アグリゲートの現在の所有者とホーム所有者の両方がノードにある場合のコマンドの出力例を示しています。</block>
  <block id="bd965e38a0c9cf27aa1bde099308e23f" category="section-title">完了後</block>
  <block id="b034884667760545b9597461a985e372" category="paragraph">コントローラの交換プロセスを再開する必要があります。</block>
  <block id="794df3791a8c800841516007427a2aa3" category="section-title">使用許諾</block>
  <block id="0716a66a70e59256281f4030c078ce04" category="paragraph">新しいライセンスキーがない場合は、クラスタで現在ライセンスされている機能を新しいコントローラで使用できます。ただし、ライセンスされていない機能をコントローラで使用するとライセンス契約に違反する可能性があるため、アップグレードの完了後に新しいコントローラのライセンスキーをインストールする必要があります。</block>
  <block id="556a407c4a4faf57fc56c1b7137d5f36" category="paragraph">ライセンスの詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、 _System Administration Reference_( システム管理リファレンス ) にリンクします。</block>
  <block id="291e8826d2b19041a0543b448060f314" category="paragraph">ノード 4 でオンボードの FC ポート、オンボードのユニファイドターゲットアダプタ（ UTA / UTA2 ）ポート、または UTA / UTA2 カードが使用されている場合は、残りの手順を完了する前に設定する必要があります。</block>
  <block id="405ab80b96586360ea83735c37305935" category="inline-link-macro">ノード 4 のインストールを確認します</block>
  <block id="cd7dd5075be56af4a3298feff04bb98a" category="paragraph">ノード 4 にオンボードまたは FC アダプタのいずれかの FC ポートがある場合は、ポートが事前に構成されていないため、ノードを稼働状態にする前にポートの設定を行う必要があります。ポートが設定されていないと、サービスが停止する可能性があります。</block>
  <block id="3bb2def349bd01a4e09f553241c547bb" category="paragraph">セクションに保存した node2 の FC ポート設定の値を確認しておく必要があります <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block>。</block>
  <block id="8651f71cd1a76b7df1a83cae390627a8" category="paragraph">システムに FC 構成がない場合は、このセクションをスキップしてかまいません。システムにオンボード UTA / UTA2 ポートまたは UTA / UTA2 アダプタが搭載されている場合は、で設定します <block ref="5752cac0a470e06ffceef40fba1931c1" category="inline-xref-macro-rx"></block>。</block>
  <block id="4d65ef8cf84d37cbb99560183afc8431" category="list-text">次のいずれかを実行します。</block>
  <block id="a7a589b8e6e6d3aac1d1459d66a748a0" category="cell">次に、</block>
  <block id="e1a8971092776bc2e25be6babad152ab" category="cell">「 system node hardware unified-connect show 」を参照してください</block>
  <block id="5344ecb990fb0b0e60a7b979eeca26cd" category="cell">ucadmin show</block>
  <block id="ede48791c6a4d48413c294cc39314600" category="list-text">ノード 4 の FC 設定とノード 1 から前に取得した設定を比較します。</block>
  <block id="bf5ce713a37cfb1c7cddb2ef1662c419" category="paragraph">必要に応じて、ノード 4 の FC ポートを変更します。</block>
  <block id="2c28eea077fe0201e484901f94587d87" category="list-text">ターゲットポートをプログラムする場合：</block>
  <block id="c5fb075990e07d49af83b424fc450275" category="list-text">イニシエータポートをプログラミングする場合：</block>
  <block id="2b82f33f2fca28990565d495f9d55cd3" category="paragraph">`-t` は FC4 のタイプで ' ターゲットまたはイニシエータです</block>
  <block id="97c16f2bd68041ac79ef06049407d0c7" category="list-text">メンテナンスモードを終了します。</block>
  <block id="6fbd819a7ffcfac7237456907e32238d" category="list-text">コマンドを入力したら、ブート環境のプロンプトでシステムが停止するまで待ちます。</block>
  <block id="4e0dd5a6524aabaa8ad8173947fbf52a" category="list-text">保守モードのブート・メニューからオプション「 5 」を選択します。</block>
  <block id="59df83a3d8dd25ad19619fe75cc32a49" category="list-text">[[step8]] 次のいずれかの操作を実行します。</block>
  <block id="403ef226990b83673617ca3be4865d06" category="list-text">に進みます <block ref="5752cac0a470e06ffceef40fba1931c1" category="inline-xref-macro-rx"></block> ノード 4 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがある場合</block>
  <block id="69e973a9aba58ba3c0012cb107497fbd" category="paragraph">ノード 4 でオンボード UTA / UTA2 ポートまたは UTA / UTA2A カードが使用されている場合は、アップグレードしたシステムの使用方法に応じて、ポートの設定を確認して設定する必要があります。</block>
  <block id="cb462dbb35ebe0e4c6fef592bf7fd143" category="paragraph">UTA / UTA2 ポートに対応する正しい SFP+ モジュールが必要です。</block>
  <block id="d99657bf946aa6dc77b75f8f378cf072" category="admonition">ネットアップのマーケティング資料では、 UTA2 という用語を CNA アダプタとポートという意味で使用している場合があります。ただし、 CLI では CNA という用語が使用されます。</block>
  <block id="8076deb73ec5b74885a5b14258d5df96" category="paragraph">UTA / UTA2 ポートはアダプタまたはコントローラ上に次の構成で配置されます。</block>
  <block id="da3b32a8a5f86ee9c63b2d0328f453e3" category="list-text">UTA / UTA2 カードは、コントローラと同時に注文しても、希望するパーソナリティを持つ未設定の状態で出荷されます。</block>
  <block id="494d18d03e7c6fb4b46866273ca75c34" category="list-text">コントローラとは別に発注した UTA / UTA2 カードは、デフォルトの FC ターゲットパーソナリティとして出荷されます。</block>
  <block id="9fca14a117603ee6762ebe968e8cedec" category="list-text">新しいコントローラのオンボード UTA / UTA2 ポートは、要求したパーソナリティを持つように（出荷前に）設定されています。</block>
  <block id="898667c4cb95b7e44aafe17e4edf0567" category="paragraph">ただし、ノード 4 の UTA / UTA2 ポートの設定を確認し、必要に応じて変更してください。</block>
  <block id="fd894a783c8c8400a3021bd2ad147cba" category="paragraph">次の例のような出力が表示されます。</block>
  <block id="64da799aef6205bb6034c61f1f25c391" category="list-text">現在の SFP+ モジュールが目的の用途と一致しない場合は、正しい SFP+ モジュールに交換します。</block>
  <block id="d72066c585919f0b5faa9807de695bf8" category="paragraph">ネットアップの担当者に連絡して、正しい SFP+ モジュールを入手します。</block>
  <block id="89d66b059cd78c250aa205de02793541" category="list-text">ucadmin show コマンドの出力結果を調べ、 UTA / UTA2 ポートが希望するパーソナリティに対応しているかどうかを確認します。</block>
  <block id="d4a3eb778a9003e6551eb488099a389d" category="cell">CNA ポートの状況</block>
  <block id="2a6b2595426d2565bc2823be04753585" category="cell">希望するパーソナリティがない</block>
  <block id="0011237e8dc98411a0794ba6dddb9989" category="inline-xref">手順 5</block>
  <block id="feb4c7d35f5c6972a78c24ac4caebf00" category="cell">に進みます <block ref="7ffb05d2232c9c60f695127651bcf871" category="inline-xref-macro-rx"></block>。</block>
  <block id="3fa4c0ba2b210d02bdf49ea3e2812989" category="cell">あなたがほしい人格を持っている</block>
  <block id="c0f1d3db2a584ee59498c0abaa47adf7" category="inline-xref">手順 13</block>
  <block id="1228ef3c4a262a3a23b05009801f9d74" category="list-text">[[auto_check_4_step5] 次のいずれかの操作を実行します。</block>
  <block id="bb8715eb9d3c8fc0a643a55fc3e9ed29" category="cell">を設定する場合</block>
  <block id="c4c1b40245719a0e56eb453401560e8e" category="cell">UTA / UTA2 カードのポート</block>
  <block id="805e47ec7b4ef2165b02c8ff12688343" category="inline-xref">手順 7</block>
  <block id="a7f2071dd0b7eee34d97c156132a3210" category="cell">オンボードの UTA/UTA2 ポート</block>
  <block id="d60d761a93da31e724112577c571c923" category="inline-xref">手順 8</block>
  <block id="fff4e24de6543fad49dbe48a7b01e1d1" category="paragraph">ターゲットモードのアダプタは、メンテナンスモードで自動的にオフラインになります。</block>
  <block id="d8f98bdc807ae3903ae80ea0b78fbd6e" category="list-text">[[auto_check_4_step7] 現在の構成が目的の用途に一致しない場合は、必要に応じて構成を変更します。</block>
  <block id="2e23b3b6b4b04a1d678f35eda127d4d6" category="list-text">`-t` は FC4 のタイプ、「 target 」または「 initiator 」です。</block>
  <block id="fe040552b4fc83efe2ba593498969954" category="list-text">設定を確認します。</block>
  <block id="38827adabf48650b74e5fe794b8f2413" category="paragraph">次の例の出力は ' アダプタ「 1b 」の FC4 タイプがイニシエータに変更され ' アダプタ「 2a 」および「 2b 」のモードが「 cna' 」に変更されていることを示しています</block>
  <block id="4cf4d3bfbda859f7fbe3247599afeba5" category="list-text">次のいずれかのコマンドをポートごとに 1 回入力して、ターゲットポートをオンラインにします。</block>
  <block id="b50635aa317c4f94943cbad3bf2ffdf2" category="list-text">ポートをケーブル接続します。</block>
  <block id="f91809c39c7c5ad59f2475c5ee644448" category="admonition">上記のコンソールの出力例では、アドバンストディスクパーティショニング（ ADP ）ディスクを使用するシステムの場合は ONTAP からパートナーノード名の入力を求められます。</block>
  <block id="24655647ccabfd614d439a15f52407aa" category="paragraph">「 boot_ontap maint 」を使用してください</block>
  <block id="82b61383829ad9f7c791ca9adcbe4b1f" category="list-text">保守モードで、以前に設定したすべてのイニシエータポートをターゲットモードで表示します。</block>
  <block id="0237455b5c9b0d306e2c96ee6c599c24" category="paragraph">ポートをイニシエータモードに戻します。</block>
  <block id="7dca1ec13f028b73f4170b0124cf9d45" category="list-text">ポートがイニシエータモードに変更されたことを確認します。</block>
  <block id="bf1d9c5801bc3674bc765551ff2f2964" category="paragraph">「 boot_ontap 」</block>
  <block id="eedc84ab2e1ed2d5f77ae259bcc2e53d" category="paragraph">これで、ブート時に以前に割り当てられていたすべてのディスクをノードで検出できるようになり、想定どおりにブートできるようになります。</block>
  <block id="60429a189ace5d1ba3d34868ab11d685" category="admonition">* ここに示す順序で以下の手順を実行する必要があります。正しく実行しないと、原因が停止したり、データが失われたりする可能性があります。 *</block>
  <block id="534c28a3529827f81e0580e98c2c91b5" category="paragraph">次の手順では、 node4 に node2 のルートアグリゲートからブートするよう設定しています。</block>
  <block id="c9029dad52ad7bd50890b949161a37e6" category="list-text">メンテナンスモードに切り替えます。</block>
  <block id="a1dd60e47fece6bf56643327d78025eb" category="list-text">node2 アグリゲートの RAID 、プレックス、およびチェックサムの情報を確認します。</block>
  <block id="d54681223c9aa263c12e4a2a2a99ab44" category="paragraph">「 aggr status -r 」</block>
  <block id="cf43f30b70f96333f3d873e68b6170ad" category="list-text">node2 アグリゲートのステータスを確認します。</block>
  <block id="39cff9999d84ec4289e4ab2ff2e81c67" category="paragraph">「 aggr status 」を入力します</block>
  <block id="4c7213f8f3213d4809b8212b52bfc23a" category="list-text">必要に応じて、 node2 アグリゲートをオンラインにします。</block>
  <block id="40418d7b25faced12b99f33b2265e3b3" category="list-text">ノード 4 が元のルートアグリゲートからブートしないようにします。</block>
  <block id="2f71ad2b913b1589756e19c235187106" category="list-text">node2 のルートアグリゲートを node4 の新しいルートアグリゲートとして設定します。</block>
  <block id="cb891bf7e336200833c9e240c76a0cc6" category="list-text">ノード 4 のルートアグリゲートがオフラインになっていること、および node2 から提供されたディスクのルートアグリゲートがオンラインになっていて root に設定されていることを確認します。</block>
  <block id="6bab8b4510fec23b1120be927a0bfea7" category="admonition">前の手順を実行しない場合は、原因 node4 から内部ルートアグリゲートをブートするか、原因システムが新しいクラスタ構成が存在すると想定するか、あるいはクラスタ構成を特定するように求められる可能性があります。</block>
  <block id="c06377da744f281f74d745bd6cf53c71" category="paragraph">次の例は、コマンドの出力を示しています。</block>
  <block id="7ce57c4ce051863fc414ccd402a178f5" category="doc">ノード 3 でキー管理ツールの設定をリストアします</block>
  <block id="594ac9e04c14065852f0e508c7b91ccb" category="paragraph">次の手順を実行して、暗号化設定を新しいノードに同期します。</block>
  <block id="0a83ed732b07426c840d56d0ee6e648b" category="paragraph">「セキュリティキーマネージャオンボード同期」</block>
  <block id="15577d2c813239ab53fdc6f35d8a1dc5" category="doc">ノードペアをアップグレードします</block>
  <block id="5634325c9c7a1ed8bb239cc0f0ecea96" category="paragraph">ノードペアをアップグレードするには、元のノードを準備し、元のノードと新しいノードの両方で一連の手順を実行する必要があります。その後、元のノードの運用を停止できます。</block>
  <block id="a1bf01274d938e19b1e43eb57fc3c557" category="summary">MetroCluster 構成のスイッチオーバー、修復、スイッチバックの処理を検証する必要があります。</block>
  <block id="9759ad3dfabdb9631ec5fba47d71c313" category="doc">スイッチオーバー、修復、スイッチバックを検証</block>
  <block id="a57b36ea9f75076c6744f1f269e29bd8" category="paragraph">「 securitykey-manager show -status 」</block>
  <block id="d3632885c406f1fdf833bfa7e1f0af27" category="section-title">KMIP サーバを使用して認証を管理します</block>
  <block id="eef7c3c189b38852fa6fd7ff22f1836c" category="paragraph">ONTAP 9.8 以降では、 Key Management Interoperability Protocol （ KMIP ）サーバを使用して認証キーを管理できます。</block>
  <block id="761ac244160bc99600210b11c30dc464" category="list-text">新しいコントローラを追加します。</block>
  <block id="5b84aee6aa26cfb08d3ab766a49e026d" category="list-text">キー管理ツールを追加します。</block>
  <block id="321aa19fc0cdb52498a74f6673729f5e" category="list-text">キー管理サーバが設定され、クラスタ内のすべてのノードで使用できることを確認します。</block>
  <block id="a1b7f6ea0d485d5a6890d4047d37884c" category="list-text">リンクされたすべてのキー管理サーバの認証キーを新しいノードにリストアします。</block>
  <block id="bad82f8550ff52390ef854218320ca8e" category="list-text">デスティネーションクラスタの SnapMirror 関係のステータスを確認します。</block>
  <block id="5bab70a374b8d81dfb1cf1f910800c2a" category="paragraph">「 Snapmirror show 」のように表示されます</block>
  <block id="4240e52a9ba444973cab2a23381467d2" category="paragraph">SnapMirror 関係の状態が「 Transferring 」でない場合は、中止は失敗します。</block>
  <block id="39ab24c8bbd04eb5a8927ffbecfe915d" category="list-text">クラスタ間のすべての関係を休止します。</block>
  <block id="97075c537f59de355c8d44c57697ef74" category="doc">障害が発生したアグリゲートを再配置するか</block>
  <block id="b10c9e2a07f0bd22d85f72c5fb19d122" category="list-text">イベント管理システム（ EMS ）のログで、アグリゲートの再配置に失敗した理由や拒否された理由を確認します。</block>
  <block id="f5bf9910c32ce3468dc3a0f80ee2e47a" category="list-text">障害が発生したアグリゲートまたは拒否されたアグリゲートを</block>
  <block id="4f6da995dc4a823a0d6529c9d724b695" category="list-text">プロンプトが表示されたら、「 y 」と入力します。</block>
  <block id="d5f8db2e1eae8ada3af51a497dead90d" category="list-text">再配置は、次のいずれかの方法で強制的に実行できます。</block>
  <block id="054b4f3ea543c990f6b125f41af6ebf7" category="cell">オプション</block>
  <block id="bca8a20f71b5dee00fa30d0570b83068" category="cell">拒否チェックの無視</block>
  <block id="1b27217f602bc4090b93bc2c72ec2c38" category="cell">デスティネーションチェックの無効化</block>
  <block id="da289ccf0fe9b7b8a0a8c3f55c76c877" category="doc">ARL を使用したコントローラのアップグレードに関するガイドライン</block>
  <block id="1b41541e73f4542502d0cb8be4fcb926" category="paragraph">ARL を使用して ONTAP 9.8 以降を実行するコントローラのペアをアップグレードできるかどうかは、プラットフォームおよび元のコントローラと交換用コントローラの両方の構成によって異なります。</block>
  <block id="da9431cc35c8bdde2930587bdcf661c2" category="section-title">ARL のアップグレードがサポートされます</block>
  <block id="bd405ef9149168a4cb18dfb9e68d4d1e" category="paragraph">ARL 手順 for ONTAP 9.8 以降を使用してノードのペアをアップグレードする場合は、 ARL が元のコントローラおよび交換用コントローラで実行されていることを確認する必要があります。</block>
  <block id="5dab68a78b9466ced5074675f91c7438" category="paragraph">ARL を使用したコントローラのアップグレードは、 SnapLock Enterprise ボリュームおよび SnapLock Compliance ボリュームが設定されたシステムでサポートされます。</block>
  <block id="cb0385d0286af5544c83edeb7702b741" category="section-title">2 ノードスイッチレスクラスタ</block>
  <block id="69ceb2d36918ef5eab686101ab353f0d" category="paragraph">2 ノードスイッチレスクラスタのノードをアップグレードする場合は、アップグレードの実行中もスイッチレスクラスタのノードをそのまま使用できます。スイッチクラスタに変換する必要はありません。</block>
  <block id="bea87fe3e38e1c2fba92c7b4ca690a9d" category="section-title">ARL のアップグレードはサポートされていません</block>
  <block id="d061d57f2d82b85a7aa74e13aaec4c96" category="paragraph">次のアップグレードは実行できません。</block>
  <block id="70a3b031f6a4e388e4285d647440ec82" category="list-text">元のコントローラに接続されたディスクシェルフをサポートしない交換用コントローラへの接続</block>
  <block id="23498de552873202eefb3139773f663c" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ディスクサポート情報の Hardware Universe にリンクするには、次の手順を実行します。</block>
  <block id="d5457a285ea7fce244bde8387644b062" category="list-text">内蔵ドライブを搭載したエントリレベルのコントローラ。たとえば、 FAS 2500 などです。</block>
  <block id="d60c463bb4096f3ed4bd1618626dfe10" category="inline-link-macro">トラブルシューティングを行う</block>
  <block id="d5dcbeb79cc6a2aa334dc821840400c2" category="summary">アグリゲートの再配置（ ARL ）がアップグレード中に別のポイントで失敗することがあります。</block>
  <block id="b02aac451baf6d7b36d981f898537961" category="doc">アグリゲートの再配置に失敗しまし</block>
  <block id="bdbf296139657929f989f110dccebbd3" category="section-title">アグリゲートの再配置に失敗していないかどうか</block>
  <block id="12f0aff6b7931a4b46dc6629c132816a" category="paragraph">手順の処理中に、ステージ 2 、ステージ 3 、またはステージ 5 で ARL が失敗することがあります。</block>
  <block id="a5c607fe9749b0c2b2f2e3b910604ce4" category="list-text">次のコマンドを入力し、出力を確認します。</block>
  <block id="535fb4b2db5d261fd8e82fde21d267f2" category="paragraph">「 storage aggregate relocation show 」を参照してください</block>
  <block id="e0fafb56752a62a2c5a8a941a4fa2864" category="paragraph">「 storage aggregate relocation show 」コマンドを実行すると、正常に再配置されたアグリゲートと再配置されなかったアグリゲート、および障害の原因が表示されます。</block>
  <block id="85dae5feb66033271bbd3fea4eca5f7e" category="list-text">コンソールで EMS メッセージを確認します。</block>
  <block id="fe96c3f5ae23f058575d629b1b1befa1" category="list-text">「 storage aggregate relocation show 」コマンドの出力と EMS メッセージの出力に応じて、適切な方法を実行します。</block>
  <block id="b3663b253690ee49735db122d80571d6" category="list-text">「 storage aggregate relocation start 」コマンドの「 override-vetoes 」オプションまたは「 override-vetoes destination-checks 」オプションを使用して、アグリゲートまたはアグリゲートの強制的な再配置を実行します。</block>
  <block id="64f7904c016a035f1928a2cbeea82ab1" category="section-title">アグリゲートは、アップグレードの完了後、ノード 1 にもともと存在していたものとノード 4 によって所有されます</block>
  <block id="2e352bfe9deb78b924bf0f5e67164c3c" category="paragraph">アップグレード手順の最後に、 node3 は、元々ホームノードとしてノード 1 を使用していたアグリゲートの新しいホームノードである必要があります。このパスはアップグレード後に再配置できます。</block>
  <block id="0aedbbe9928008ef20e9f0f31cd1ec93" category="list-text">ステージ 3 で、アグリゲートが node2 から node3 に再配置されている場合。再配置する一部のアグリゲートのホームノードが node1 に含まれている。たとえば、このようなアグリゲートのことを aggr_node_A_1 と呼びます。ステージ 3 で aggr_node_A_1 の再配置が失敗し、強制的に再配置を実行できない場合、アグリゲートは node2 で残ります。</block>
  <block id="94db9769a66bbb4255b02f44f30a1506" category="list-text">ステージ 4 のあとで、 node2 を node4 に置き換える場合。node2 を交換すると、 aggr_node_A_1 が、 node3 ではなく node4 にあるホームノードとしてオンラインになります。</block>
  <block id="ba508067c72d91e8f63afe491acaa462" category="paragraph">ストレージフェイルオーバーを有効にしたあとに、ステージ 6 に続けて誤った所有権の問題を修正するには、次の手順を実行します。</block>
  <block id="c76bc65b459278a8c28b143bd2794d8c" category="list-text">次のコマンドを入力して、アグリゲートのリストを表示します。</block>
  <block id="d088dd9060f2818253fb3709d9939a18" category="paragraph">正しく再配置されていないアグリゲートを特定するには、セクションで取得した node1 のホーム所有者を含むアグリゲートのリストを参照してください <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block> コマンドの出力と比較してください。</block>
  <block id="a3249f2582556adc14fc6268c4136b8c" category="list-text">手順 1 の出力と、セクションで確認した node1 用の出力を比較します <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block> 再配置されていないアグリゲートがあることを確認します。</block>
  <block id="6351a4102dcb6a482f6002fe35685d71" category="list-text">[[auto_aggr_relocate_fail_Step3] ノード 4 の背後にあるアグリゲートの再配置：</block>
  <block id="19289925f6f4d12d2796b14d773968dd" category="paragraph">この再配置中は '-nd-controller-upgrade パラメータを使用しないでください</block>
  <block id="0bc9088bdd248bcc7cf35ab01ea701a4" category="list-text">node3 がアグリゲートのホームの所有者になったことを確認します。</block>
  <block id="2d5ce426423eeeead4f35769cd8b1b27" category="inline-xref">手順 3</block>
  <block id="65f247827acd19f6f7debcc6880344b0" category="paragraph">ノード 3 をホーム所有者としないアグリゲートは、の同じ再配置コマンドを使用してノード 3 に再配置できます <block ref="b826fa5e08f60e3e6100c14200617b18" category="inline-xref-macro-rx"></block>。</block>
  <block id="e7323a54c9f53a295a2c4d707c7b3fce" category="doc">MetroCluster 構成の健全性を確認</block>
  <block id="57b41b4e6b26c5d81b64f649f73c20f8" category="paragraph">Fabric MetroCluster 構成でアップグレードを開始する前に、 MetroCluster 構成の健全性をチェックして、正常に動作することを確認する必要があります。</block>
  <block id="ce1ec3b6f165be8cdde0654c531487e5" category="list-text">MetroCluster コンポーネントが正常であることを確認します。</block>
  <block id="b39709ac0ef947bdc090084f89c2ad94" category="paragraph">「 MetroCluster check run 」のようになります</block>
  <block id="f005234d35c44406394bfc86ede22866" category="paragraph">この処理はバックグラウンドで実行されます。</block>
  <block id="8600ca2371816e2374e80e982b51e056" category="list-text">MetroCluster チェックの実行操作が完了したら ' 結果を表示します</block>
  <block id="e3ccf677e56366a417a172944cdd9599" category="paragraph">MetroCluster チェックショー</block>
  <block id="070a4bbedae89743ad2f6646a3f23205" category="paragraph">約 5 分後に、次の結果が表示されます。</block>
  <block id="1a9778326fd00d0e011a777089b2bc6a" category="list-text">実行中の MetroCluster チェック処理のステータスを確認します。</block>
  <block id="fbd55aa6c7d3ee9ec90836dfa01b62d2" category="paragraph">MetroCluster オペレーション履歴 show -job-id 38`</block>
  <block id="74553544aa9c0c94d16a5a5ed85d6720" category="list-text">ヘルスアラートがないことを確認します。</block>
  <block id="838f9a3aa0c54c620c1dab5cccc98ca5" category="paragraph">「 system health alert show 」というメッセージが表示されます</block>
  <block id="5ff20c188ceb23808ed9b47d8e5637ff" category="doc">node3 をインストールしてブートします</block>
  <block id="80f347da1888e440d3f1755d2e9ca001" category="paragraph">ノード 3 をラックに設置し、ノード 1 の接続をノード 3 に転送し、ノード 3 をブートして、 ONTAP をインストールする必要があります。そのあと、このセクションで説明するように、ノード 1 のスペアディスク、ルートボリュームに属するディスク、およびその前の手順でノード 2 に再配置されなかったルート以外のアグリゲートを再割り当てする必要があります。</block>
  <block id="31ccaad020ad8995655b8785712ac7b9" category="paragraph">ノード 1 にインストールされている ONTAP 9 のバージョンが異なる場合は、ノード 3 をネットブートする必要があります。node3 のインストールが完了したら、 Web サーバに保存されている ONTAP 9 イメージからブートします。その後、の手順に従って、後続のシステムのブートに使用する正しいファイルをブートメディアデバイスにダウンロードできます <block ref="4815c2d091d790c1d3bab94177b38eaf" category="inline-link-macro-rx"></block>。</block>
  <block id="2ad1e670b60bb257ae5313d5009813a5" category="inline-link-macro">ノード 3 の FC ポートを設定</block>
  <block id="b6f436f6398306a921de09279a6a8256" category="inline-link-macro">ノード 3 の UTA / UTA2 ポートを確認して設定してください</block>
  <block id="80f025cc78499a80da49bd37c9bde220" category="list-text">ストレージディスクが搭載されたシステムをアップグレードする場合は、このセクション全体を完了して、にアクセスする必要があります <block ref="b8be2332e6727dc6b48478780a30df1b" category="inline-link-macro-rx"></block> および <block ref="e1881302722b07e924682c0aeef752a5" category="inline-link-macro-rx"></block> セクションで、クラスタ・プロンプトでコマンドを入力します。</block>
  <block id="56fd5e5051297f55fa1e22d93c8d71b8" category="list-text">[[auto_install3_step1] ノード 3 のラックスペースがあることを確認します。</block>
  <block id="2c6541bc32b15b7aae8bab68f0ca5874" category="paragraph">ノード 1 とノード 2 が別々のシャーシに搭載されている場合は、ノード 3 をノード 1 と同じラックの場所に設置できます。ただし、 node1 が node2 の同じシャーシに設置されている場合は、 node3 を専用のラックスペースに配置する必要があります。その場合は、 node1 の場所に近い場所に配置することを推奨します。</block>
  <block id="b76de3994341c25067b438fe161926b7" category="list-text">[[auto_install3_step2] ノードモデルの _Installation and Setup Instructions_ に従って、ラックにノード 3 をインストールします。</block>
  <block id="e642674ff2b68ba9c6309b786d87c4f9" category="admonition">両方のノードを同じシャーシに搭載したシステムにアップグレードする場合は、 node4 と node3 をシャーシに設置します。そうしないと、ノードをブートしたときにノードがデュアルシャーシ構成と同じように動作し、 node4 をブートした場合、ノード間のインターコネクトは稼働しません。</block>
  <block id="c558275e7d3a61c5ffa4c89d17138a8e" category="list-text">[[auto_install3_step3]] ケーブルノード 3 を接続し、ノード 1 からノード 3 に接続を移動します。</block>
  <block id="a237c9d74ab3870e45b318a1071c10f4" category="admonition">ほとんどのプラットフォームモデルには一意のインターコネクトカードモデルがあるため、インターコネクトカードまたはクラスタインターコネクトケーブルの接続を node1 から node3 に移動する必要はない場合があります。MetroCluster 構成の場合、 FC-VI ケーブルの接続を node1 から node3 に移動する必要があります。新しいホストに FC-VI カードがない場合は、 FC-VI カードの移動が必要になることがあります。</block>
  <block id="a5492c1c64c93543c424918fe38a847e" category="list-text">[[auto_install3_step4]] ノード 3 の電源をオンにしてから、コンソール端末で Ctrl+C を押してブートプロセスを中断し、ブート環境プロンプトにアクセスします。</block>
  <block id="db32660dfabf573a3553146b10c4b358" category="paragraph">両方のノードを同じシャーシに搭載したシステムにアップグレードする場合は、 node4 もリブートします。ただし、 node4 のブートはあとで破棄することができます。</block>
  <block id="93bd68c37b47b8665f3fe8bb9add087f" category="admonition">node3 をブートすると、次の警告メッセージが表示される場合があります。</block>
  <block id="7882a4b556b6996eaf604413a9e602d9" category="inline-xref">手順 4</block>
  <block id="b64113c5a70901151e544500a7cb6e41" category="list-text">[[auto_install3_step5]] で警告メッセージが表示される場合 <block ref="07e6330d4bc574888011bcb486743c88" category="inline-xref-macro-rx"></block>を使用して、次の操作を実行します。</block>
  <block id="c05c7a2303ef34ab95234ebadd79fc8f" category="cell">ブート環境プロンプトで次のコマンドを使用して、自動的に接続を設定します。 ifconfig e0M -auto</block>
  <block id="48060f068bd1fae855e05859f04c5e3f" category="list-text">[[step7] node3 でネットブートを実行します。</block>
  <block id="526c6586cac2a5ca719ec72a9f077f53" category="paragraph">「 &lt;path_the_web-accessible_directory&gt; 」は、「 &lt;ONTAP_version&gt;_image.tgz 」をダウンロードした場所を指します <block ref="4815c2d091d790c1d3bab94177b38eaf" category="inline-link-macro-rx"></block>。</block>
  <block id="00a7cfe4f4da76897b759c2fe0aa87e4" category="list-text">[[step8]] ブートメニューからオプション [(7) 新しいソフトウェアを最初にインストールする ] を選択します</block>
  <block id="f0546cfa67e11944c3c115c55c0d74c6" category="list-text">[[step9]] 手順を続行するかどうかを確認するメッセージが表示された場合は、「 y 」と入力し、パッケージのプロンプトが表示されたら URL を入力します。</block>
  <block id="b420e8eb0083114b740da33989940785" category="list-text">[[step10] コントローラモジュールをリブートするには、次の手順を実行します。</block>
  <block id="dab98833427c3d8aa8eeb5d6db41328b" category="paragraph">バックアップ設定を今すぐ復元しますか ? {y|n}`</block>
  <block id="78531eca4abf30d4c07d610d913a17b4" category="list-text">次のプロンプトが表示されたら 'y' と入力して再起動します</block>
  <block id="3cab3f136b2c476f859a364c003079c3" category="paragraph">' 新しくインストールしたソフトウェアの使用を開始するには ' ノードを再起動する必要があります今すぐリブートしますか？{y|n}`</block>
  <block id="665b6d787a8576ee10e9c9cee3583341" category="list-text">[[step11]] ブートメニューからメンテナンスモード「 5 」を選択し、起動を続行するように求めるプロンプトが表示されたら「 y 」と入力します。</block>
  <block id="d268c4054cbf23abb6afc6dec45039b4" category="list-text">[[step12]] コントローラとシャーシが HA として構成されていることを確認します。</block>
  <block id="51c448ec2d072d0227e5d83964636a54" category="list-text">[[step13]] コントローラとシャーシが HA として設定されていない場合は、次のコマンドを使用して構成を修正します。</block>
  <block id="a73d1d9d7a9d36edb67531c5cdd004f4" category="list-text">[[step14]] メンテナンスモードを終了します。</block>
  <block id="c3f299c216a4d01822966fa31545bf67" category="paragraph">ブート環境プロンプトで Ctrl+C キーを押して ' 自動ブートを中断します</block>
  <block id="46b4ada45ce5a9b580d12f2837589006" category="list-text">[[step15]] node2 で、システムの日付、時刻、およびタイムゾーンを確認します。</block>
  <block id="f68146a357d007c5719e57f0df2f6cea" category="list-text">[step16]] on node3 で、ブート環境のプロンプトで次のコマンドを使用して日付を確認します。</block>
  <block id="92b09953e03c695a41d0eca9cc7a70b3" category="list-text">[[step17]] 必要に応じて、 node3 の日付を設定します。</block>
  <block id="a35c7561d833fab42eb0820cd7256987" category="list-text">[step18]] on node3 で、ブート環境のプロンプトで次のコマンドを使用して時間を確認します。</block>
  <block id="8fa05814ac535bc4cac5dc313de56abe" category="list-text">[[step19]] 必要に応じて、ノード 3 の時刻を設定します。</block>
  <block id="b7b77c4a8d173f38e98b19b6fa156359" category="paragraph">printenv partner-sysid</block>
  <block id="bc26b5e5559721e19875fb91dce22cec" category="inline-link-macro">ノード 3 で FC または UTA / UTA2 設定を設定します</block>
  <block id="ca710412a883d1570696f0510733c7a0" category="list-text">node2 のチェック後、 node2 クラスタのストレージフェイルオーバーとクラスタ HA ペアが有効になります。処理が完了すると、両方のノードに「 Completed 」と表示され、クリーンアップ処理が実行されます。</block>
  <block id="9d070d121ee26abdb5d314d6fff4c15c" category="list-text">ストレージフェイルオーバーが有効になっていることを確認します。</block>
  <block id="751035e5db88d172e881299c202d9b13" category="paragraph">「 storage failover show 」をクリックします</block>
  <block id="715940e961cf53af2ba53d695b5bdb37" category="paragraph">次の例は、ストレージフェイルオーバーが有効になっている場合のコマンドの出力例を示しています。</block>
  <block id="9e6e3ee8077a0815c415187bf7e78b19" category="list-text">次のコマンドを使用して、 node3 と node4 が同じクラスタに属していることを確認します。出力を確認します。</block>
  <block id="494cb4f7976c64f111b74e9089d5bbd5" category="paragraph">「 cluster show 」を参照してください</block>
  <block id="fd3a247231846521133c845ae4c424c0" category="list-text">次のコマンドを使用して、 node3 と node4 が相互のストレージにアクセスできることを確認します。出力を確認します。</block>
  <block id="ed63866964a059112ba504e1f09aa077" category="list-text">次のコマンドを使用して、 node3 と node4 がクラスタ内の他のノードによってホーム所有されているデータ LIF を所有していないことを確認します。</block>
  <block id="6485b14c0e329aebda0c4dcd7d09dbd0" category="paragraph">「 network interface show 」を参照してください</block>
  <block id="dc85e26538718b459bdf2a353367f497" category="paragraph">node3 と node4 がクラスタ内の他のノードによってホーム所有されているデータ LIF を所有していない場合は、データ LIF をホーム所有者にリバートします。</block>
  <block id="98ab56275ed98fed50530abdb3a97ee7" category="paragraph">「 network interface revert 」の略</block>
  <block id="f67d0a54b752ca4f669625b9f2eba648" category="list-text">ノード 3 がノード 1 のアグリゲートを所有していること、およびノード 4 がノード 2 のアグリゲートを所有していることを確認します。</block>
  <block id="862da4c0b3b19ba62c050373943cd909" category="list-text">オフラインになっているボリュームがないかを確認します。</block>
  <block id="b2ec89d698c3bc26ab79d7bad283a953" category="list-text">オフラインになっているボリュームがある場合は、セクションで取得したオフラインボリュームのリストと比較します <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block>必要に応じて、次のコマンドを使用して、ボリュームごとに 1 回、オフラインボリュームをオンラインにします。</block>
  <block id="8b2ba35c1767c4b484add2236c0ffa6c" category="list-text">ノードごとに次のコマンドを使用して、新しいノードの新しいライセンスをインストールします。</block>
  <block id="539b1b58f1be38076506f35eb15e4340" category="paragraph">license-code パラメータには、アルファベットの文字キーをアルファベットの大文字 28 個まで入力できます。ライセンスは一度に 1 つずつ追加することも、複数追加することもできます。各ライセンスキーをカンマで区切って指定することもできます。</block>
  <block id="8fb49e1f692fe82fa4072e7f3b3adc5d" category="list-text">次のいずれかのコマンドを使用して、元のノードから古いライセンスをすべて削除します。</block>
  <block id="3ce96f90e07aec61f73d0c41634c6aa1" category="paragraph">「システムライセンスのクリーンアップ - 未使用 - 期限切れ」</block>
  <block id="b71fdf79c90ac84b34d2470620eeaa18" category="list-text">期限切れのライセンスをすべて削除します。</block>
  <block id="df1e7bcee84d26ba3ee0e0f129bf90c0" category="paragraph">「システムライセンスのクリーンアップ - 期限切れ」</block>
  <block id="b162df50db538c8339d7ad30f407e32f" category="list-text">未使用のライセンスをすべて削除します。</block>
  <block id="32be9f537283877b6e62fd279a4f5513" category="paragraph">'System license clean-up-unused （システムライセンスのクリーンアップ - 未使用） '</block>
  <block id="9501cf64d3b2dae298a8bc24331bd5f4" category="list-text">クラスタから特定のライセンスを削除するには、ノードで次のコマンドを使用します。</block>
  <block id="9a940b51cdd2b2d508cffc6eecff9e32" category="paragraph">次の出力が表示されます。</block>
  <block id="0b0ab53ca7ce0880a8c5c074d260f0ab" category="paragraph">すべてのパッケージを削除するには 'y' を入力します</block>
  <block id="f52d44aaa981f34fa588225f9d4cc820" category="paragraph">「 system license show 」を参照してください</block>
  <block id="1534946b2dbb4d79955a0d451c913c4c" category="list-text">[[Step13]] 両方のノードで次のコマンドを使用して、 SP を設定します。</block>
  <block id="e4c074cd0d17a1426d4153413c21f2b8" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> SP および _SP ONTAP 9.8 コマンドの詳細については ' システム管理リファレンスにリンクするには ' マニュアルページリファレンスを参照してください system の service-processor network modify コマンドの詳細については ' を参照してください</block>
  <block id="5fd1bcc8472b38442961eb87ca3f844a" category="paragraph">「 advanced 」の権限が必要です</block>
  <block id="6dcd1ebf4390170868ab9bcdfd967581" category="list-text">次のコマンドを入力します。</block>
  <block id="0ac9d40efe1470ec53257470c91f7314" category="list-text">admin レベルに戻ります。</block>
  <block id="d260c71f1d73fe6dce24fae82cd28aca" category="paragraph">「特権管理者」</block>
  <block id="01e6682dee79033af96ab718c5ec6c11" category="list-text">新しいノードにスイッチレスクラスタをセットアップする場合は、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ネットアップサポートサイトへのリンクを設定するには、 _ 2 ノードスイッチレスクラスタへの移行の手順に従ってください。</block>
  <block id="27af4227ca8acc558df96e2723ec9b37" category="inline-link-macro">新しいコントローラモジュールで Storage Encryption をセットアップします</block>
  <block id="a1e79be82a0d3f4b4c3568d0f3e32af4" category="paragraph">ノード 3 とノード 4 でストレージ暗号化が有効になっている場合は、セクションを完了します <block ref="18c90c300c0b71334b8b427eaf4f38a3" category="inline-link-macro-rx"></block>。それ以外の場合は、の項を実行します <block ref="6e48b929ca0767f00c15eeb6d7e78755" category="inline-link-macro-rx"></block>。</block>
  <block id="8fb4b518ce39a0704f920c9d4f2f7b77" category="doc">アグリゲートの再配置を使用してコントローラハードウェアをアップグレードする</block>
  <block id="bc0c3600d83329affdb0d85df2aeac56" category="list-text">この手順は、交換用コントローラハードウェアが新しく購入され、使用されていないことを前提としています。使用済みのコントローラを「 wipeconfig 」コマンドで準備するために必要な手順は、この手順には含まれていません。交換用コントローラハードウェアを以前に使用していた場合は、テクニカルサポートに問い合わせる必要があります。特に、コントローラが Data ONTAP 7-Mode を実行していた場合は、テクニカルサポートにお問い合わせください。</block>
  <block id="8d7b68591c9cb3f00554e8b1dd0cc34a" category="list-text">ARL を使用すると、システムを停止することなく、アップグレードするクラスタよりも新しいバージョンの ONTAP を実行する新しいコントローラへのアップグレードを実行できます。古いコントローラと新しいコントローラの ONTAP バージョンの組み合わせは、 ONTAP ソフトウェアリリースの NDU モデルによって決まります。たとえば、 ONTAP 9.8 を実行しているコントローラがあり、そのコントローラで最後にサポートされていたバージョンである場合は、 ONTAP 9.8 より後のバージョンの ONTAP を実行している新しいコントローラにアップグレードできます。</block>
  <block id="3f765691a1037f4fcf966c679a3f3a4a" category="doc">ステージ 3 ：node3 をインストールしてブートします</block>
  <block id="63ad3c4d36a1a9f413872ac57af754a7" category="inline-link-macro">ノード 3 のインストールを確認します</block>
  <block id="840820d31f6c078aeb1567ce302bdd05" category="inline-link-macro">ノード 1 で所有されているルート以外のアグリゲートと NAS データ LIF を、ノード 2 からノード 3 に移動します</block>
  <block id="bbbe961bb71cae13cea3f5b878f4dbb9" category="doc">ステージ 2 ：移行してノード 1 を撤去</block>
  <block id="7de24b16e7313de118da7559fecd8fd4" category="inline-link-macro">ノード 1 が所有するルート以外のアグリゲートと NAS データ LIF をノード 2 に再配置します</block>
  <block id="93d6a78ca650a17d67b6a45ca81b7f3f" category="inline-link-macro">ノード 1 を撤去</block>
  <block id="81605039a97ca73a232818034b412a87" category="doc">ステージ 1 ：アップグレードを準備</block>
  <block id="4ded4d845e551767daf131f3a1827b13" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> Hardware Universe にリンクして新しいノードのポートに関する情報を取得するには、次の手順を実行します。このセクションの後半の情報を使用します。</block>
  <block id="3e1a89708cfe8d08896ed24a0d0be5e8" category="paragraph">物理ポートのレイアウトは、ノードのモデルによって異なる場合があります。新しいノードがブートすると、 ONTAP は、自動的にクォーラムに参加するためにクラスタ LIF をホストするポートを判別しようとします。</block>
  <block id="98ba93dd4de23479aa574bba16f17db7" category="paragraph">node2 の物理ポートが node4 の物理ポートに直接マッピングされない場合は、次のセクションに続きます <block ref="364d871b05cd34ae9893fc6fc54b8984" category="inline-xref-macro-rx"></block> ネットワーク接続を修復するために使用する必要があります。</block>
  <block id="e39c239523fa2335eed92e50ae0e2208" category="paragraph">ノード 4 のインストールとブートが完了したら、ノード 4 が正しくインストールされていることを確認する必要があります。ノード 4 がクォーラムに参加するのを待ってから、再配置処理を再開する必要があります。</block>
  <block id="ed944478e87ce6285850bdd8efb0399a" category="paragraph">手順のこの時点で、ノード 4 がクォーラムに参加する間、処理が一時停止します。</block>
  <block id="6a8e851d9f61a3ae03d77096370ca9c6" category="list-text">ノード 4 がクォーラムに参加していることを確認し</block>
  <block id="4395613c979349d83b9f7a1fd64ad821" category="paragraph">cluster show -node node4 -fields health`</block>
  <block id="a5c25ebe0ba44233d498c66cb77e22f2" category="paragraph">「 health 」フィールドの出力は「 true 」でなければなりません。</block>
  <block id="f9bb6290635aecbf1e553e1d48da4966" category="list-text">ノード 4 がノード 3 と同じクラスタに含まれていること、およびノード 4 が正常であることを確認します。</block>
  <block id="1b294cfbc51db8a82a21bedd0caea1b7" category="list-text">advanced 権限モードに切り替えます。</block>
  <block id="248f892426f89c07bc5999439096f3e0" category="paragraph">「高度」</block>
  <block id="b1ce2a2b9289e0bdc7f0dcbfb19de9c2" category="list-text">コントローラ交換処理のステータスを確認し、 node2 を停止する前と同じ状態で一時停止状態になっていることを確認して、新しいコントローラの取り付けやケーブルの移動の物理タスクを実行します。</block>
  <block id="8005ab9a73c38cc367636a0ec9e8fa35" category="paragraph">「 system controller replace show 」と表示されます</block>
  <block id="cf24b4fbdd5de5d1db8e8fd45a8826f7" category="list-text">MetroCluster システムを使用している場合は、交換したコントローラが MetroCluster 構成に対して正しく設定されていることを確認します。 MetroCluster 構成が正常な状態である必要があります。を参照してください <block ref="14c0e32a98a31f9fd4a16b635b2f7ebd" category="inline-link-macro-rx"></block>。</block>
  <block id="f5ce4d426c8852e0090ab32842d1cd09" category="inline-xref">手順 6</block>
  <block id="459235ad323edd7deeae2dc5ded37b95" category="paragraph">MetroCluster ノード node4 にあるクラスタ間 LIF を再設定し、 MetroCluster ノード間の通信をリストアするクラスタピアリングをチェックします <block ref="ee95d9bf63146ca7fe271f7654fa2f7c" category="inline-xref-macro-rx"></block>。</block>
  <block id="45b045cb31b53300f077fd700437de5a" category="paragraph">MetroCluster ノードのステータスを確認します。</block>
  <block id="ecada3140a47012aab89f14c63ba9190" category="paragraph">MetroCluster node show</block>
  <block id="973e4031ed35bf66df5741d51fd988da" category="list-text">[[auto_verify_4_Step6]] コントローラ交換操作を再開します。</block>
  <block id="2a2c4f4e7fd268d1d4c0dda8807d69e2" category="list-text">コントローラの交換は一時停止し、次のメッセージが表示されます。</block>
  <block id="6f399bf4f62f96a02d91e295630626e7" category="list-text">コントローラの交換を一時停止状態にした状態で次のセクションに進んで、ノードのネットワーク設定をリストアします。</block>
  <block id="ad642c9296b70fbec2ff690ecca7088a" category="section-title">ノード 4 のネットワーク設定をリストアします</block>
  <block id="51c7cb1cccc939f5c24359054f6e087c" category="paragraph">node4 がクォーラムにあり、 node3 と通信できることを確認したら、 node2 の VLAN 、インターフェイスグループ、およびブロードキャストドメインが node4 にあることを確認します。また、ノード 4 のすべてのネットワークポートが正しいブロードキャストドメインに設定されていることを確認します。</block>
  <block id="c4d5be310a7b3c7d734bbcc91e576fc5" category="list-text">アップグレードされた node2 （ node4 ）にある物理ポートをすべて一覧表示します。</block>
  <block id="932f91b355fe820e44bf7015a07fe9d1" category="paragraph">「 network port show -node node4 」</block>
  <block id="7201bec4fa4ce45284b39257c7ebc9bd" category="paragraph">ノードのすべての物理ネットワークポート、 VLAN ポート、およびインターフェイスグループポートが表示されます。この出力から、 ONTAP によって「 Cluster 」ブロードキャストドメインに移動された物理ポートを確認できます。この出力を使用して、インターフェイスグループメンバーポート、 VLAN ベースポート、または LIF をホストするスタンドアロンの物理ポートとして使用するポートを決定できます。</block>
  <block id="f12a8cebc5d18fa1d15cbfd16990a033" category="list-text">クラスタのブロードキャストドメインの一覧を表示します。</block>
  <block id="5e805181dd219e5299df90fe82dbae5d" category="paragraph">「 network port reachability show 」のように表示されます</block>
  <block id="b60798a4e8624ef10969a61bd2f1a5a7" category="paragraph">コマンドの出力例を次に示します。</block>
  <block id="84bdf9c97b15a3e6ea78416bdc99e1ee" category="paragraph">上記の例では、 node2 _node4 がコントローラの交換後にブートされたとします。到達可能性のない複数のポートがあり、到達可能性スキャンを保留しています。</block>
  <block id="7e4772f5da93344d8ada20b9c581e1f9" category="list-text">[[auto_restore_4_Step4]] ノード 4 の各ポートの到達可能性を 'OK' 以外の到達可能性ステータスで修復します次のコマンドを最初に任意の物理ポートで実行し、次に任意の VLAN ポートで一度に 1 つずつ実行します。</block>
  <block id="b784d8e9f422428eac76c9239f75fe91" category="paragraph">次のような出力が表示されます。</block>
  <block id="6da5520b869a50ed547a761fe1f0e10e" category="paragraph">上記の警告メッセージは、到達可能性ステータスのポートで、現在配置されているブロードキャストドメインの到達可能性ステータスとは異なる可能性がある場合に表示されます。</block>
  <block id="2b17ef3c860c2adf63f0265d9181acce" category="paragraph">ポートと回答 'y' または 'n' の接続を適宜確認します</block>
  <block id="88e1ec169a4d9b4d08505d76c6e1eb13" category="paragraph">すべての物理ポートに想定される到達可能性があることを確認します。</block>
  <block id="763c4b6560b672163a09cf2e67ba8d89" category="paragraph">到達可能性の修復が実行されると、 ONTAP は正しいブロードキャストドメインにポートを配置しようとします。ただし、ポートの到達可能性を判別できず、既存のどのブロードキャストドメインにも属していない場合、 ONTAP はこれらのポート用に新しいブロードキャストドメインを作成します。</block>
  <block id="6c2174965c1dafdd591752b78b10faa9" category="list-text">インターフェイスグループの設定が新しいコントローラの物理ポートレイアウトと一致しない場合は、次の手順に従って設定を変更します。</block>
  <block id="a0c9e092b3640057dbbb2fad95c8d7be" category="list-text">最初に、インターフェイスグループのメンバーポートにする物理ポートを、それぞれのブロードキャストドメインメンバーシップから削除する必要があります。これを行うには、次のコマンドを使用します。</block>
  <block id="62c1275f11de1967a743be3b315a5af6" category="list-text">インターフェイスグループにメンバーポートを追加します。</block>
  <block id="0abff6a62b49a7204a8ea4607845ec05" category="list-text">インターフェイスグループは、最初のメンバーポートが追加されてから約 1 分後にブロードキャストドメインに自動的に追加されます。</block>
  <block id="8f16f590f8016a4aad84ad6c5a34e114" category="list-text">インターフェイスグループが適切なブロードキャストドメインに追加されたことを確認します。</block>
  <block id="607ae99fdc4c8f52e04ea11d57ca8694" category="paragraph">インターフェイスグループの到達可能性ステータスが「 OK 」でない場合は、適切なブロードキャストドメインに割り当てます。</block>
  <block id="1650d35c8daaa79601fdd8158052591c" category="list-text">適切な物理ポートを Cluster ブロードキャスト・ドメインに割り当てます</block>
  <block id="4c2584946af77fb7d60cf4ae472d405c" category="list-text">'Cluster' ブロードキャスト・ドメインに到達可能なポートを判別します</block>
  <block id="a2904a68bb127cf5751716be508a8cd4" category="paragraph">「 network port reachability show-reachable-broadcast-domain Cluster ： Cluster 」</block>
  <block id="9f99edf6858da9da7242d6b213567d8c" category="list-text">到達可能性ステータスが「 OK 」でない場合は、「 Cluster 」ブロードキャストドメインに到達可能なすべてのポートを修復します。</block>
  <block id="094336d39f674644064e82381591f883" category="list-text">次のいずれかのコマンドを使用して、残りの物理ポートを正しいブロードキャストドメインに移動します。</block>
  <block id="fc794a16843cc25cbaf14628270ab5d2" category="paragraph">「 network port broadcast-domain remove-port 」のようになります</block>
  <block id="db5edb9657d0577afb5f42b19b5b760f" category="paragraph">「 network port broadcast-domain add-port 」と入力します</block>
  <block id="add7de11dea94372ab92280144dd2eae" category="paragraph">「 network port reachability show-detail` 」と表示されます</block>
  <block id="67d13fe1d5e641d73d6e558118a0902a" category="list-text">次の手順を実行して、取り外された可能性のある VLAN を復元します。</block>
  <block id="cb91f704c28ecf5de2f29274ef6bf62e" category="list-text">取り外された VLAN のリスト：</block>
  <block id="551f04031696758c1c256f1c90e57b39" category="paragraph">次のような出力が表示されます。</block>
  <block id="a806d4909353769619f495a130cabdbd" category="list-text">以前のベースポートから取り外された VLAN を復元します。</block>
  <block id="e08a0549a69b4bf0d4b807833ac0b586" category="paragraph">次に、インターフェイスグループ a0a から削除された VLAN を同じインターフェイスグループにリストアする例を示します。</block>
  <block id="5382f5bbbe74b198aaaf36efb0dd9ef3" category="paragraph">次に、ポート「 e0e 」上の取り外された VLAN を「 E0h 」にリストアする例を示します。</block>
  <block id="2a31dfadfe9a33da55e9d278be8596a4" category="paragraph">VLAN の復元が成功すると、指定された宛先ポートに、取り外された VLAN が作成されます。デスティネーションポートがインターフェイスグループのメンバーである場合、またはデスティネーションポートがダウンしている場合、 VLAN のリストアは失敗します。</block>
  <block id="aad2ee0340b449143fc7eaa87d78ba8b" category="paragraph">新しくリストアした VLAN が適切なブロードキャストドメインに配置されるまで約 1 分待ちます。</block>
  <block id="9ba5961a2332be610ae3121c25c32aeb" category="list-text">ポートの修復がすべて完了したら、空のブロードキャストドメインを削除します。</block>
  <block id="6fbbdf7318a95fb2400613497f103b75" category="list-text">ポートの到達可能性を確認します</block>
  <block id="e3d6faf783eff413421d5abeaf1dad48" category="paragraph">すべてのポートが正しく設定され、正しいブロードキャストドメインに追加されている場合、「 network port reachability show 」コマンドは、接続されているすべてのポートの到達可能性ステータスを「 ok 」、物理的に接続されていないポートのステータスを「 no-reachability 」と報告する必要があります。この 2 つ以外のステータスが報告されるポートがある場合は、到達可能性修復を実行し、の手順に従ってブロードキャストドメインにポートを追加または削除します <block ref="4f595e600f8320b4ad2d574fa1a9fe37" category="inline-xref-macro-rx"></block>。</block>
  <block id="fb3f4ac6019d983118e241d6e496f536" category="list-text">すべてのポートがブロードキャストドメインに配置されたことを確認します。</block>
  <block id="47cd03a2fa721b9f4f83dca38829afea" category="paragraph">「 network port show 」のように表示されます</block>
  <block id="7b92b1d8c427dbd2b8e236ab8d9bb5f7" category="list-text">ブロードキャストドメインのすべてのポートで、正しい Maximum Transmission Unit （ MTU ；最大伝送ユニット）が設定されていることを確認します。</block>
  <block id="3ef90a77774be1f83d79d3a57d347bee" category="paragraph">「 network port broadcast-domain show 」</block>
  <block id="e2eec117ad4a813e49145093e5613f00" category="list-text">SVM のホームポートと LIF のホームポート（ある場合）をリストアする必要がある場合は、それらを指定して LIF のホームポートをリストアします。</block>
  <block id="12c772fdba51a1a482d3e3843bdaf6c4" category="list-text">移動された LIF を表示します。</block>
  <block id="b24b42eec37d4f62111bc66268ece07c" category="paragraph">「 dispaced-interface show 」</block>
  <block id="ca89b5ef1fbf8f5385df4158740fe931" category="list-text">LIF のホームポートをリストアします。</block>
  <block id="4615226c3fd7af8f5c2beb65404cb667" category="list-text">すべての LIF にホームポートがあり、意図的に稼働状態になっていることを確認します。</block>
  <block id="338e1133e592584bd1dc26b643cbe02f" category="paragraph">ノード 3 のネットワーク設定を確認し、ノード 2 からノード 3 にアグリゲートを再配置する前に、ノード 2 に現在あるノード 1 に属する NAS データ LIF が node2 からノード 3 に再配置されたことを確認する必要があります。また、ノード 3 に SAN LIF が存在することも確認する必要があります。</block>
  <block id="f329a7087048b2fb128acd99205356e2" category="paragraph">アップグレード手順の実行中、リモート LIF は SAN LUN へのトラフィックを処理します。アップグレード時にクラスタやサービスの健全性を維持するために、 SAN LIF を移動する必要はありません。SAN LIF は、新しいポートにマッピングする必要がないかぎり移動されません。ノード 3 をオンラインにしたあと、 LIF が正常に機能しており、適切なポートに配置されていることを確認します。</block>
  <block id="a29257abbaad84467babad354360d285" category="paragraph">これらのチェックの実行後、 node1 で所有されているルート以外のアグリゲートと NAS データ LIF が新しいコントローラ node3 に再配置されます。リソースの再配置が完了すると、コントローラの交換処理が一時停止します。</block>
  <block id="61d1def7733487d4ddcc1c11e4c26d34" category="paragraph">LIF が表示されなくなった場合は、ホームノードをノード 3 にリストアします。</block>
  <block id="32cbc0f35ce50a85e5c8c6b2f7b35d1f" category="paragraph">このアップグレード手順では、交換するコントローラモデルで ONTAP の新しいバージョンがサポートされておらず、新しいコントローラで以前のバージョンの ONTAP がサポートされていない主な環境アップグレードシナリオを使用します。</block>
  <block id="3f95c69711726ab20c6ad2092e62e13d" category="list-text">この手順を使用して、ノードが 3 つ以上あるクラスタでコントローラハードウェアをアップグレードできます。ただし、クラスタ内のハイアベイラビリティ（ HA ）ペアごとに手順を個別に実行する必要があります。</block>
  <block id="9ac92b97b9314fe7c9c80b03c2f61746" category="list-text">この手順環境システムは、 4 ノードの NetApp MetroCluster 構成以上を実行しています。MetroCluster 構成サイトは物理的に異なる場所に設置できるため、 HA ペアの場合は各 MetroCluster サイトでコントローラの自動アップグレードを個別に実行する必要があります。</block>
  <block id="71dd89b192a133f8ccfd6e18f0397ebc" category="paragraph">交換したコントローラまたは新しいコントローラの HA パートナーで Storage Encryption が使用されている場合は、 SSL 証明書のインストールやキー管理サーバのセットアップなど、新しいコントローラモジュールを Storage Encryption 用に設定する必要があります。</block>
  <block id="1bf6f98fb62d5ca413d6cce101954a5f" category="paragraph">この手順には、新しいコントローラモジュールで実行する手順が含まれています。コマンドは正しいノードで入力する必要があります。</block>
  <block id="d38fed7bb4bf7b2cd414582a337f388f" category="list-text">キー管理サーバがまだ使用可能であり、ステータスと認証キー情報が正しいことを確認します。</block>
  <block id="eeb811dde1344fabc569b67ecd8b95f6" category="paragraph">「セキュリティキーマネージャクエリー」</block>
  <block id="32ce57c242557f5657864f2684cf9a96" category="list-text">前の手順で確認したキー管理サーバを、新しいコントローラのキー管理サーバのリストに追加します。</block>
  <block id="39971f39aded85b4e8e1fe2d3e1acc6d" category="list-text">キー管理サーバを追加します。</block>
  <block id="74bdef17191283e61278bf225ca4520d" category="list-text">リストされている各キー管理サーバについて、同じ手順を繰り返します。最大 4 台のキー管理サーバをリンクできます。</block>
  <block id="8b2208f5ccda57697f72181172533640" category="list-text">キー管理サーバが正常に追加されたことを確認します。</block>
  <block id="0e79decb13af5d2dc1cdba7d4607d34c" category="paragraph">「 securitykey -manager show 」を参照してください</block>
  <block id="613e5831fca345289928a52de72937a1" category="list-text">新しいコントローラモジュールで、キー管理セットアップウィザードを実行して、キー管理サーバをセットアップしてインストールします。</block>
  <block id="bbdb53ee65b9a0c8fdb6fdf3661d0fb6" category="paragraph">既存のコントローラモジュールと同じキー管理サーバをインストールする必要があります。</block>
  <block id="dd0630a1638f6964504eefd155f3f818" category="list-text">新しいノードでキー管理サーバセットアップウィザードを起動します。</block>
  <block id="5560b948b9e6ef0348c58a90d5656939" category="list-text">ウィザードの手順に従って、キー管理サーバを設定します。</block>
  <block id="b0b1f7cd7ad16c151d90a8783f1752db" category="list-text">リンクされたすべてのキー管理サーバから新しいノードに認証キーをリストアします。</block>
  <block id="5eb59651a7213cf4ae352b4c3ee57a36" category="doc">ステージ 5 ：ノード 4 をインストールしてブートします</block>
  <block id="6d23265c57ba430c404cc6f3a940e117" category="inline-link-macro">ノード 4 でキー管理ツールの設定をリストアします</block>
  <block id="dd019fbf939676387b29c50185dd26bb" category="paragraph">ノード 1 をノード 3 に交換する前に、ルート以外のアグリゲートと NAS データ LIF をノード 1 からノード 2 に移動してから、ノード 1 のリソースをノード 3 に移動する必要があります。</block>
  <block id="231d6537090582d94372987139e9087b" category="paragraph">この処理は、タスクの開始時にすでに一時停止されている必要があります。手動で再開する必要があります。</block>
  <block id="93847b1108029ddbe22a512a569d1038" category="paragraph">アグリゲートと LIF の移行が完了すると、検証のために処理が一時停止されます。この段階で、ルート以外のアグリゲートと SAN 以外のデータ LIF がすべて node3 に移行されているかどうかを確認する必要があります。</block>
  <block id="bcc15f05fe7b911a3de9d9528ece7fc7" category="list-text">アグリゲートの再配置処理と NAS データ LIF の移動処理を再開します。</block>
  <block id="44d6ab00bef397f6537d95a47a570251" category="paragraph">ルート以外のアグリゲートと NAS データ LIF はすべて、 node1 から node2 に移行されます。</block>
  <block id="af443ed1e514e063894af87e3e0e83a6" category="list-text">処理が一時停止したまま、ルート以外のすべてのアグリゲートが node2 でそれぞれの状態でオンラインになっていることを確認します。</block>
  <block id="e3f90b559d39f13fadeb0be05f3d5fff" category="paragraph">次の例は、 node2 のルート以外のアグリゲートがオンラインになっていることを示しています。</block>
  <block id="761df4f887d66569090abb51e2ec705f" category="paragraph">アグリゲートがオフラインになった場合、または node2 で外部になった場合は、各アグリゲートに対して 1 回、 node2 で次のコマンドを使用してアグリゲートをオンラインにします。</block>
  <block id="f999b6b276f2c64e10bfb3630f92f94c" category="list-text">node2 で次のコマンドを使用し、出力を調べて、すべてのボリュームがオンラインであることを確認します。</block>
  <block id="074f2db71729d7f84803e85e33520125" category="paragraph">node2 上にオフラインのボリュームがある場合は、各ボリュームに対して 1 回、 node2 で次のコマンドを使用してオンラインにします。</block>
  <block id="fa39e98dea804607ace91ae82c9543d7" category="list-text">[[step5] いずれかの LIF が停止している場合は、次のコマンドを使用して、各 LIF に対して 1 回ずつ LIF の管理ステータスを「 up 」に設定します。</block>
  <block id="0218d5b45eb7cfed65f2674d40f1e479" category="list-text">ONTAP の管理経験があり、 diagnostic 権限モードで作業する場合のリスクが十分にあります。</block>
  <block id="f37bbd4cc778d5861294352bef9c1c7f" category="cell">古いコントローラ</block>
  <block id="cfdade9e474e805958704ec0836f18ac" category="cell">交換用コントローラ</block>
  <block id="8c06a9afcd20cc8675f878a8e07e16ab" category="cell">FAS8020 、 FAS8040 、 FAS8060 、 FAS8080</block>
  <block id="c86ccf041137a3e913e3e89ed65dbff5" category="cell">FAS8200 、 FAS8300 、 FAS8700 、 FAS9000</block>
  <block id="96e7c50f9e1d1f9b66d5ab1dbe5d047a" category="cell">AFF8020 、 AFF8040 、 AFF8060 、 AFF8080</block>
  <block id="c1a19380507e7e6ae4f9e86f2f492cf1" category="cell">AFF A300 、 AFF A400 、 AFF A700 、 AFF A800^1</block>
  <block id="c37feb3492d999b3f216448183986be2" category="cell">FAS8200</block>
  <block id="c78a423f3132ee2ac4f4f4c1fa5d4859" category="cell">AFF A300</block>
  <block id="73ab298c8e00d66d28156892903a39ce" category="cell">AFF A320</block>
  <block id="4852954d031f57b417813707e91dd5bd" category="admonition">コントローラのアップグレードモデルの組み合わせが上記の表にない場合は、テクニカルサポートにお問い合わせください。</block>
  <block id="3ea026f4657fa31414c8a7e80af567b7" category="list-text">AFF A400 または FAS8300 では、イーサネットタイプの構成の場合、 2 つのメザニンポートのいずれかを一時的なクラスタポートとして使用できます。</block>
  <block id="68f44553add308b567f9f6bbfc94913d" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> から ONTAP 9 ドキュメントセンターにリンクして、 ONTAP 9 製品ドキュメントにアクセスできます。</block>
  <block id="12a1856797218081c363d4151a746a51" category="paragraph">アップグレード後は、ネットアップサポートサイトから古いシステムの運用を停止できます。システムの運用を停止すると、そのシステムは動作していないことがネットアップに通知され、サポートデータベースから削除されます。</block>
  <block id="822b26e0edfc2eec63c38c61151af684" category="list-text">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> からネットアップサポートサイトにリンクしてログインします。</block>
  <block id="eb020d21f20b70e49bbe4ebed52b9e29" category="list-text">メニューから [ 製品 ]&gt;[ マイ製品 ] を選択します。</block>
  <block id="4d0016e281d3a86d70ae083a04a5da95" category="list-text">[ インストール済みシステムの表示 *] ページで、システムに関する情報の表示に使用する *Selection Criteria* を選択します。</block>
  <block id="700d67d065f1bd740439eef879e00b77" category="paragraph">次のいずれかを選択してシステムを検索できます。</block>
  <block id="9738c15508e7d3e2fce3396706fc65c8" category="list-text">シリアル番号（ユニットの背面に記載）</block>
  <block id="fce1b48d1133d34e0a4d5fdc15e8638b" category="list-text">所在地のシリアル番号</block>
  <block id="a35129a35ab8aae79ad1750a3753888c" category="paragraph">シリアル番号を含むクラスタ情報が表に表示されます。</block>
  <block id="b5554c834fafdd1adbf8f16933521491" category="list-text">テーブルでクラスタを見つけ、 Product Tool Set （製品ツールセット）ドロップダウンメニューから * Decommission this system * （このシステムのデコミッション）を選択します。</block>
  <block id="44d5329782b4f4acb8947c6cc4601de1" category="list-text">ノード 1 が停止されたことを確認します。</block>
  <block id="d1e63174073b4ec3e4d49ef0ca235c5b" category="paragraph">アップグレードが完了したら、 node1 の運用を停止できます。を参照してください <block ref="6e48b929ca0767f00c15eeb6d7e78755" category="inline-link-macro-rx"></block>。</block>
  <block id="8c0489611df3c9267665a7d99d204fa2" category="summary">LIF の移行後、ステージ 2 、ステージ 3 、またはステージ 5 で移行後にオンラインにならない場合があります。</block>
  <block id="06d473a91334306e0ea337d0cf403b02" category="doc">LIF の移行が失敗しました</block>
  <block id="8fc5e587b615f796c0e6e519e500f09c" category="list-text">ポートの MTU サイズがソースノードと同じであることを確認します。</block>
  <block id="f1dc53f85f175f3393f82fdfda459a06" category="paragraph">たとえば、ソースノードのクラスタポートの MTU サイズが 9000 の場合、デスティネーションノードは 9000 にする必要があります。</block>
  <block id="0be497933ebed90434432b1367f6ac50" category="list-text">ポートの物理的な状態が「所有」である場合は、ネットワークケーブルの物理的な接続を確認します。</block>
  <block id="394247ac369fff4729d586172906244e" category="cell">使用するコマンド</block>
  <block id="97d64be0988671e53d352ae4aa93eaf6" category="cell">「 securitykey manager key query -node node 」を参照してください</block>
  <block id="afa9cce4f8e9d7e0dc9a3f8278517e40" category="cell">「 securitykey -manager key show 」を参照してください</block>
  <block id="01a72c63e79e1fcc9b3e0cac4fb2bf75" category="list-text">前の手順で確認したキー管理サーバを新しいコントローラのキー管理サーバリストに追加します。</block>
  <block id="3cdf420c4abece4e0eba648610592dde" category="cell">「 securitykey-manager external restore 」このコマンドには、 OKM のパスフレーズが必要です</block>
  <block id="a9849e92b148965a7bbb6c14d0afbcd0" category="cell">オンボードキーマネージャ（ OKM ）</block>
  <block id="7bd5452d2f3a1c07fc54d3a08cc82d64" category="paragraph">ノード 3 にオンボードの FC ポート、オンボードのユニファイドターゲットアダプタ（ UTA / UTA2 ）ポート、または UTA / UTA2 カードがある場合は、残りの手順を完了する前に設定を行う必要があります。</block>
  <block id="d897564a1ca4a58b7f422ba34b232ab7" category="paragraph">セクションの完了が必要な場合があります <block ref="750d6dbe3bf1312d0d97a8f03a0d2304" category="inline-xref-macro-rx"></block>、を参照してください <block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block>、または両方のセクション。</block>
  <block id="7551ace690fab9fce9d0a9cad21a0ae7" category="paragraph">セクションに保存した FC ポート設定の値を node1 で確認しておく必要があります <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block>。</block>
  <block id="dfec8ed00cbb51821de82d335a0ba98b" category="paragraph">システムに FC 構成がない場合は、このセクションをスキップしてかまいません。システムにオンボード UTA / UTA2 ポートまたは UTA / UTA2 カードがある場合は、で設定します <block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block>。</block>
  <block id="831368d2ac042989f939504faf6cdf51" category="list-text">[[step2]] 次のいずれかの操作を実行します。</block>
  <block id="7e6f8de582e2388fb39a5c5c26caa64f" category="list-text">[[step3]] 次のいずれかの操作を実行します。</block>
  <block id="d2dce3cff13fd2c8259fdef7c637226e" category="list-text">[[auto_check3_step8] 次のいずれかの操作を実行します</block>
  <block id="d190fd34bae28aff670090c55eb7e24b" category="paragraph">ノード 3 にオンボード UTA / UTA2 ポートまたは UTA / UTA2 カードが搭載されている場合は、アップグレードしたシステムの使用方法によって、ポートの設定を確認し、場合によっては再設定する必要があります。</block>
  <block id="7cda71007d207ef48448dffed511abb8" category="paragraph">FC にユニファイドターゲットアダプタ（ UTA / UTA2 ）ポートを使用する場合は、まずポートの設定を確認する必要があります。</block>
  <block id="55e55fd6d28dec627ac074963cbf9279" category="paragraph">現在のポート設定を確認するには、「 ucadmin show 」コマンドを使用します。</block>
  <block id="7561dbd16073c82eda6418543cdd93ec" category="paragraph">UTA / UTA2 ポートはアダプタまたはコントローラに搭載されている場合がありますが、次の構成になっています。ノード 3 の UTA / UTA2 ポートの設定を確認し、必要に応じて変更してください。</block>
  <block id="7107b4a109094877db55716e76bb317a" category="list-text">コントローラを注文した UTA / UTA2 カードは、注文したパーソナリティを指定するために出荷前に設定されます。</block>
  <block id="ac077d6a8af47d3f6459bdc75d20144c" category="list-text">新しいコントローラのオンボード UTA / UTA2 ポートは、希望するパーソナリティを持つように出荷する前に設定されます。</block>
  <block id="b9372fe4eb2e1f51dc5ecc63ef944026" category="list-text">[[step2] 現在の SFP+ モジュールが目的の用途と一致しない場合は、正しい SFP+ モジュールと交換します。</block>
  <block id="37ba28d857fa9f472bd54799a71b4d1f" category="list-text">[[step4]] 次のいずれかの操作を実行します。</block>
  <block id="2c59ff8f0f110684a1947a7be9c33989" category="cell">UTA / UTA2 ポート</block>
  <block id="68393ca2b7b9884fdd9f7eea661220e1" category="list-text">「 -m 」はパーソナリティ・モードで、「 fc 」または「 cna 」です。</block>
  <block id="8e26679b9fca64c8419387ed5ddbd066" category="list-text">[[step19]] メンテナンスモードで、現在ターゲットモードになっている以前に設定されたすべてのイニシエータポートを表示します。</block>
  <block id="4306b082c2e67956b1918aaea01dbeec" category="list-text">[[step20]] ポートがイニシエータモードに変更されていることを確認します。</block>
  <block id="4c830d7f040ff17fe7d01c1e6f446b3f" category="list-text">[[step2]] メンテナンスモードを終了します。</block>
  <block id="2d74e383435cfe64554575d0ab7faf2a" category="paragraph">次の手順は、 node3 を node1 のルートアグリゲートからブートするように設定します。</block>
  <block id="d354d3c68fd2aba01b58a01642bf6c97" category="list-text">node1 アグリゲートの RAID 、プレックス、およびチェックサムの情報を確認します。</block>
  <block id="5447152461820ee4fbd4988f18add272" category="list-text">node1 アグリゲートのステータスを確認します。</block>
  <block id="beee7076b2d8936ef1f0677a931d72f4" category="list-text">必要に応じて、 node1 アグリゲートをオンラインにします。</block>
  <block id="59bfd9205852a4f57899d2ed024d5fcf" category="list-text">node3 を元のルートアグリゲートからブートできないようにします。</block>
  <block id="7dd49fac37eb0c12415d30414f193060" category="list-text">node1 ルートアグリゲートを、 node3 の新しいルートアグリゲートとして設定します。</block>
  <block id="d788db47fa7ed7d234dcdfbb86c17a57" category="list-text">ノード 3 のルートアグリゲートがオフラインになっていること、およびノード 1 からテイクオーバーされたディスクのルートアグリゲートがオンラインになっていて root に設定されていることを確認します。</block>
  <block id="3d7f94ab24ae28ffe95b85995cdb0a28" category="admonition">前の手順を実行しないと、原因 node3 を内部ルートアグリゲートからブートするか、原因システムで新しいクラスタ構成が存在すると想定するか、あるいはクラスタ構成を特定するように求められる可能性があります。</block>
  <block id="43ccb3503988f16a767b1af1e29d2384" category="doc">ルート以外のアグリゲートと NAS データ LIF を node2 から node3 に再配置します</block>
  <block id="b3fb9233a2435df292df205ef05e46db" category="paragraph">アップグレード手順の実行中、リモート LIF は SAN LUN へのトラフィックを処理します。アップグレード時にクラスタやサービスの健全性を維持するために、 SAN LIF を移動する必要はありません。</block>
  <block id="0569dcac35411678d2e9cbd8034fea69" category="admonition">アグリゲートおよび LIF のホーム所有者は変更されません。現在の所有者のみが変更されます。</block>
  <block id="03c6c2c179dec70c786bc644e02b16df" category="list-text">ルート以外のすべてのアグリゲートがオンラインで、ノード 3 でそれらの状態になっていることを確認します。</block>
  <block id="6702bf0268c295c6d30a4dc2db82d427" category="paragraph">アグリゲートがオフラインになった場合、または node3 で外部になった場合は、各アグリゲートに対して次のコマンドを実行してそれらのアグリゲートをオンラインにします。</block>
  <block id="809bea68dee4e68249aea4396bafacd3" category="list-text">node3 で次のコマンドを実行し、出力を調べて、すべてのボリュームがノード 3 でオンラインになっていることを確認します。</block>
  <block id="b830851aa263bbc0b84c68604beef993" category="paragraph">node3 にオフラインのボリュームがある場合は、各ボリュームに対して次のコマンドを実行してそれらのボリュームをオンラインにします。</block>
  <block id="b8520ff69f6b8ffe5e588c1f7ce8e9be" category="list-text">LIF が正しいポートに移動され、ステータスが「 up 」になっていることを確認します。LIF が 1 つでも停止している場合は、次のコマンドを LIF ごとに 1 回入力して、 LIF の管理ステータスを「 up 」に設定します。</block>
  <block id="e2172c82191a506ba37c37e48f854d2a" category="list-text">データ LIF を現在ホストしているポートが新しいハードウェアに存在しない場合は、ブロードキャストドメインから削除します。</block>
  <block id="ee210a0730802d9c055ca601e95c499c" category="paragraph">「 network port broadcast-domain remove-ports 」と入力します</block>
  <block id="99988efb9efcf982f67af1157e609379" category="list-text">[[Step5] ] 次のコマンドを入力し、出力を調べて、 node2 にデータ LIF が残っていないことを確認します。</block>
  <block id="d48dfd29ad21ccd1c5cfa50ed99cd89e" category="doc">ステージ 6 ：アップグレードを完了します</block>
  <block id="140c4ad72e426b76f7e15699ae078635" category="inline-link-macro">SnapMirror 処理を再開します</block>
  <block id="9fd68cc494a9f57cae67ac737ab1370f" category="paragraph">ノードペアのアップグレード中に障害が発生する可能性があります。ノードがクラッシュする、アグリゲートが再配置されない、または LIF が移行されない可能性があります。障害の原因とその解決策は、アップグレード手順の実行中に障害が発生したタイミングによって異なります。</block>
  <block id="135b308ed83c53f1516b7c754566d1c4" category="list-title">作業を開始する前に</block>
  <block id="1d32dacc20fe1feb077659fd0bebdc03" category="list-text">システムから HTTP サーバにアクセスできることを確認します。</block>
  <block id="3f8c328bf258e454068314be8aac5d75" category="list-text">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> からネットアップサポートサイトにリンクして、使用しているプラットフォームに必要なシステムファイルと、適切なバージョンの ONTAP をダウンロードします。</block>
  <block id="48ab14af4b0090253431ed38e4cc2440" category="paragraph">元のコントローラと同じバージョンの ONTAP 9 がインストールされていない場合は、新しいコントローラをネットブートする必要があります。新しいコントローラをそれぞれ取り付けたら、 Web サーバに保存されている ONTAP 9 イメージからシステムをブートします。その後、以降のシステムブートで使用するブートメディアデバイスに正しいファイルをダウンロードできます。</block>
  <block id="302937ad7234fe283f1f179989cd1fe0" category="list-text">ネットアップサポートサイトにアクセスして、システムのネットブートの実行に使用するファイルをダウンロードします。</block>
  <block id="103ec41a89beb368e3357fad5f451a92" category="list-text">ネットアップサポートサイトのソフトウェアダウンロードセクションから適切な ONTAP ソフトウェアをダウンロードし、「 &lt;ONTAP_version&gt;_image.tgz 」ファイルを Web にアクセスできるディレクトリに保存します。</block>
  <block id="5b1b8c3f072422a936e63f0d977e41e0" category="list-text">Web にアクセスできるディレクトリに移動し、必要なファイルが利用可能であることを確認します。</block>
  <block id="843ab277685630f82095416c5b9ae5a1" category="inline-link-macro">ステージ 3</block>
  <block id="8e698b8d4467a7a6309118b19a3aa168" category="summary">新しいハードウェアを設置するための特別なツールが必要です。また、アップグレードプロセス中に他のドキュメントを参照する必要があります。</block>
  <block id="0e635d7a91ccc4eccdfb03e35353c899" category="doc">必要な工具とドキュメント</block>
  <block id="5fa8c0eb2f030795135e9d47077f239b" category="list-text">アースストラップ</block>
  <block id="230a7914d7f06a8506c29d7466cb12cd" category="list-text">No.2 プラスドライバ</block>
  <block id="9bd7aca153821e782b62a5a9a23f4744" category="paragraph">にアクセスします <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> セクションをクリックして、このアップグレードに必要な参照ドキュメントのリストにアクセスします。</block>
  <block id="f1b92e8f33cf66355b4b9762bf95256b" category="doc">MetroCluster 構成エラーがないかどうかを確認します</block>
  <block id="fcae50d4511c2dbf452f0a9593984560" category="paragraph">ネットアップサポートサイトで入手できる Active IQ Config Advisor ツールを使用して、代表的な構成エラーがないかどうかを確認できます。</block>
  <block id="fa6c1be97ff8496ff36915e5e9a95f33" category="paragraph">Active IQ Config Advisor は、構成の検証や健常性のチェックに使用できるツールです。データ収集とシステム分析のために、セキュアなサイトにもセキュアでないサイトにも導入できます。</block>
  <block id="0109999bfef624f78c3dcf4fb94f11ba" category="admonition">Config Advisor のサポートには制限があり、オンラインでしか使用できません。</block>
  <block id="32a404f0f31163f59d88f2d052711ecf" category="list-text">をダウンロードします <block ref="02685666481d8fcfc63d60bb8f2d7352" category="inline-link-macro-rx"></block> ツール。</block>
  <block id="6afe954858ef53a16278f4735833c1a5" category="list-text">Active IQ Config Advisor を実行し、出力を確認して推奨された方法で問題に対処します。</block>
  <block id="d75bd21e9af20a5036c0fbf461bc4e2d" category="doc">リブート、パニック、電源再投入</block>
  <block id="446d36fba2e507d61203c02578774ece" category="paragraph">アップグレードの各段階で、システムがクラッシュする（リブート、パニック状態、または電源の再投入）場合があります。</block>
  <block id="dec0e91cad029c9d2b55e8bd32c88e76" category="paragraph">これらの問題の解決策は、状況によって異なります。</block>
  <block id="343eae749a23fb17ef6cdd38fd2da8f5" category="section-title">事前チェックフェーズでのリブート、パニック、電源再投入</block>
  <block id="8bea04524c5e6dcfb6d21a849345ee30" category="section-title">HA ペアを有効にして事前チェックフェーズの前にノード 1 またはノード 2 がクラッシュした場合</block>
  <block id="738ee8bcfd939a32f3de7df5814c6eba" category="paragraph">事前チェックフェーズの前にノード 1 またはノード 2 がクラッシュした場合は、再配置されたアグリゲートがなく、 HA ペア構成が有効なままになります。</block>
  <block id="0dd6e0ba50acfc16218ced7b92e813f1" category="paragraph">テイクオーバーとギブバックは正常に実行されます。</block>
  <block id="809ecf0f76cd48f719608b879e540f19" category="list-text">コンソールで、システムで発行された EMS メッセージを確認し、推奨される対処方法を実行します。</block>
  <block id="0accdb9af8ee9902e6e12e8ad3c69dd6" category="list-text">ノードペアのアップグレード用手順に進みます。</block>
  <block id="32042e1cae255d52d27eb7e6f102079f" category="section-title">最初のリソースリリースフェーズでリブート、パニック、電源再投入が発生した場合</block>
  <block id="a929dc8c44e0a4c66070b18005fcda69" category="section-title">HA ペアを有効にすると、リソースの最初のリリースフェーズでノード 1 がクラッシュします</block>
  <block id="17b207ac883ad6c7c60e4c67b540500b" category="paragraph">一部またはすべてのアグリゲートがノード 1 からノード 2 に再配置されており、 HA ペアが有効なままです。node2 は、ノード 1 のルートボリュームと再配置されていないルート以外のアグリゲートをテイクオーバーします。</block>
  <block id="658aff35f1b2ef5bf804a6eaa8bd8834" category="paragraph">再配置されたアグリゲートの所有権は、ホーム所有者が変更されていないためにテイクオーバーされたルート以外のアグリゲートの所有権と同じになります。</block>
  <block id="6ccd7f2e78c66d169bbf302fa0cd170e" category="paragraph">node1 の状態が「 waiting for giveback 」になると、 node2 はノード 1 のルート以外のすべてのアグリゲートをギブバックします。</block>
  <block id="db2e31afa00c26dc29029e29d8ff4e9f" category="section-title">HA ペアを無効にすると、リソースの最初のリリースフェーズでノード 1 がクラッシュします</block>
  <block id="a3ab092ff29c94a2c1dce4e8e58fbab8" category="paragraph">node2 はテイクオーバーしませんが、ルート以外のすべてのアグリゲートから引き続きデータを提供しています。</block>
  <block id="84604a4d07dcc33bcf3def32522ced97" category="list-text">ノード 1 を起動します。</block>
  <block id="07fcb95304f9b9b6a7b8e09bf3a43b90" category="section-title">リソースの最初のリリースフェーズで HA ペアを有効にした状態で node2 に障害が発生する</block>
  <block id="ea41d430c1801092eb658fc92447fa77" category="paragraph">ノード 1 の一部またはすべてのアグリゲートが node2 に再配置されています。HA ペアが有効になります。</block>
  <block id="4ef90a16749941dcc42841a4d350f4e3" category="paragraph">ノード 1 で、ノード 2 のすべてのアグリゲートと、ノード 2 に再配置された独自のアグリゲートがテイクオーバーされます。ノード 2 がブートすると、アグリゲートの再配置が自動的に完了します。</block>
  <block id="f377056f049a875748f0f1fb62e593b9" category="list-text">node2 を起動します。</block>
  <block id="a84419db35cfbd1052a6e3367b3e6550" category="section-title">リソースの最初のリリースフェーズと HA ペアの無効化後に、ノード 2 がクラッシュします</block>
  <block id="3902e7586591847461eb93ec52677583" category="paragraph">ノード 1 ではテイクオーバーが実行されません。</block>
  <block id="209379c90008402bff9e43e926d726f5" category="paragraph">node2 のブート中に、すべてのアグリゲートでクライアントが停止します。</block>
  <block id="c69c252a29e4c40de646b133d6b89286" category="section-title">最初の検証フェーズでリブート、パニック、または電源の再投入が発生した場合</block>
  <block id="eee0c63ddb8a9ee96da6fcbaee95750f" category="section-title">HA ペアを無効にして最初の検証フェーズで node2 がクラッシュします</block>
  <block id="3acacc48f49902e35f2acd0532846558" category="paragraph">HA ペアがすでに無効になっているため、ノード 2 のクラッシュ後にノード 3 はテイクオーバーしません。</block>
  <block id="4d671d2255fc765ecb0c9754a61e9e19" category="section-title">HA ペアを無効にして初回の検証フェーズでノード 3 がクラッシュした場合</block>
  <block id="26bf9df43caced35a52d77376336d969" category="list-text">ノード 3 を起動します。</block>
  <block id="b37a13b468d5049d51c1794bdee782ea" category="section-title">最初のリソース再取得フェーズでのリブート、パニック、電源再投入</block>
  <block id="cdf0fa097138599db352e67f83f4d60e" category="section-title">アグリゲートの再配置中にリソースを再取得する最初のフェーズでノード 2 がクラッシュする</block>
  <block id="e15376fba96131cecfad3a743435774e" category="paragraph">node2 の一部またはすべてのアグリゲートがノード 1 からノード 3 に再配置されています。node3 は、再配置されたアグリゲートからデータを提供します。HA ペアが無効になっているため、テイクオーバーはありません。</block>
  <block id="27685d530ae8434b4b7c343805519a62" category="paragraph">再配置されなかったアグリゲートのクライアントが停止しています。ノード 2 のブート時に、ノード 1 のアグリゲートがノード 3 に再配置されます。</block>
  <block id="afac1d41da19c91d8c537c0dd081b509" category="section-title">アグリゲートの再配置中に、最初のリソースのリ回復フェーズでノード 3 がクラッシュする</block>
  <block id="4309a6885186e1d672df942c1ef7364c" category="paragraph">node2 によるアグリゲートのノード 3 への再配置中にノード 3 がクラッシュした場合、ノード 3 のブート後も処理が続行されます。</block>
  <block id="c5689b790d4c37b77d1d9d0b5eb653e8" category="paragraph">node2 では残りのアグリゲートの処理が続行されますが、 node3 の起動中にすでに node3 に再配置されたアグリゲートでクライアントが停止する可能性があります。</block>
  <block id="c3ed2d002fa1511e957ac4f0f379ab64" category="list-text">コントローラのアップグレードに進みます。</block>
  <block id="c99650cbb2e9705200e0c65ef8112d66" category="section-title">チェック後のフェーズでリブート、パニック、電源再投入が発生した場合</block>
  <block id="cd64011aa9e337fac4267ca724c07c1a" category="section-title">チェック後のフェーズで node2 または node3 がクラッシュする</block>
  <block id="6cc3572daebdd8b0893f33d359db3778" category="paragraph">HA ペアが無効になっているため、テイクオーバーは行われません。リブートしたノードに属するアグリゲートでクライアントが停止しています。</block>
  <block id="79671f1c69add8723a6562ea9207f36a" category="list-text">ノードを起動します。</block>
  <block id="453e1c1e18302a590c41d9e178962389" category="section-title">リソースの 2 つ目のリリースフェーズでリブート、パニック、電源の再投入が発生した場合</block>
  <block id="48824f490a3d91487cefde6c844f77c8" category="section-title">リソースの 2 つ目のリリースフェーズでノード 3 がクラッシュする</block>
  <block id="6fdf83c70d5ac6354046a77aed7edf87" category="paragraph">node2 によるアグリゲートの再配置中にノード 3 がクラッシュした場合、ノード 3 のブート後もタスクは続行されます。</block>
  <block id="5731c7830057407975be490c2494fb1f" category="paragraph">node2 で残りのアグリゲートの処理は続行されますが、 node3 と node3 の独自のアグリゲートにすでに再配置されたアグリゲートでは、 node3 のブート中にクライアントが停止することがあります。</block>
  <block id="c025602fb85c6101c2c2b73f3aee8c22" category="list-text">コントローラのアップグレード手順に進みます。</block>
  <block id="98b7194c3f7e4d897e4fd26d695e1854" category="section-title">2 番目のリソースリリースフェーズで node2 がクラッシュします</block>
  <block id="5824934e067c33bb3114baa4a8cf9ec5" category="paragraph">アグリゲートの再配置時にノード 2 がクラッシュした場合、ノード 2 はテイクオーバーされません。</block>
  <block id="8e080faf36569e4b034dc52f5a78a0c9" category="paragraph">ノード 3 は再配置されたアグリゲートを引き続き提供しますが、ノード 2 が所有するアグリゲートではクライアントの停止が発生します。</block>
  <block id="7ece8f4248b2db8509ecfad31259ec79" category="section-title">2 回目の検証フェーズで、リブート、パニック、または電源の再投入が発生した場合</block>
  <block id="844787e278f2aed416a608ecf8da2f42" category="section-title">2 回目の検証フェーズでノード 3 がクラッシュした場合</block>
  <block id="78d45d4102c6b7fa82c29a7ee6d3feac" category="paragraph">このフェーズで node3 がクラッシュした場合は、 HA ペアがすでに無効になっているため、テイクオーバーは実行されません。</block>
  <block id="9776e59ce7d904cfd8633f152b0e9840" category="paragraph">node3 がリブートするまでは、すべてのアグリゲートのクライアントが停止します。</block>
  <block id="0e9646babd06b1afc68db209c8b7e8cc" category="section-title">2 番目の検証フェーズ中にノード 4 がクラッシュした場合</block>
  <block id="06581dc290bb90ebdc3bff784e74c05b" category="paragraph">このフェーズでノード 4 がクラッシュした場合は、テイクオーバーは実行されません。node3 は、アグリゲートからデータを提供します。</block>
  <block id="320ac33a3a3ed82ed96ef3dd7d173ed9" category="paragraph">ノード 4 のリブートまでルート以外のアグリゲートがすでに再配置されています。</block>
  <block id="d2dec120c917320cae7461e84d91f23c" category="list-text">ノード 4 を起動します。</block>
  <block id="7bc7e56fe8ddd27289de0794179c5451" category="doc">ステージ 4 ：ノード 2 の移動と撤去</block>
  <block id="ddfd90d1a40dc38efcde3d45c070506d" category="paragraph">ARL を使用してノードをアップグレードする前に、手順の動作について理解しておく必要があります。このドキュメントでは、手順をいくつかの段階に分けて説明します。</block>
  <block id="7526cf9eecac88850b8e7b400f897378" category="paragraph">手順では、交換用コントローラハードウェアを使用して元のコントローラハードウェアを一度に 1 台ずつアップグレードし、 HA ペア構成を利用してルート以外のアグリゲートの所有権を切り替えます。すべてのルート以外のアグリゲートで、アップグレード後の正しいノードである最終デスティネーションに到達するために、 2 つの再配置を実行する必要があります。</block>
  <block id="dbbdd31aeee0756ad9d276a1eca618f8" category="paragraph">各アグリゲートにはホーム所有者と現在の所有者があります。ホーム所有者はアグリゲートの実際の所有者であり、現在の所有者は一時的な所有者です。</block>
  <block id="6a8b18850ca6073a1c6456cd619cdba6" category="paragraph">次の表に、各フェーズで実行するタスクの概要と、そのフェーズの最後で実行したアグリゲートの所有権の状態を示します。詳細な手順については、手順の後半で説明します。</block>
  <block id="64c6da2436465d11573858d46056b95d" category="cell">段階</block>
  <block id="9b7c5fc0588fe7d63e81b1258a1b7a71" category="paragraph">ステージ 1 終了時のアグリゲートの所有権：</block>
  <block id="b309c38149cc0e7b5e0bdcbbb02d7372" category="list-text">node1 は、 node1 アグリゲートのホーム所有者と現在の所有者です。</block>
  <block id="c9441f483586640407720ae97b71e4aa" category="list-text">node2 には、 node2 アグリゲートのホーム所有者と現在の所有者を指定します。</block>
  <block id="7544a9f5c9c9ff572c11f753aae7dedf" category="paragraph">ステージ 2 終了時のアグリゲートの所有権：</block>
  <block id="80056829ceb7237c21b4536a01885e13" category="list-text">node2 には、 node1 アグリゲートの現在の所有者を指定します。</block>
  <block id="f6e6ad572d16caa52deed3eeb7ca0ff5" category="list-text">node2 には、 node2 アグリゲートのホーム所有者と現在の所有者を指定します。</block>
  <block id="ff8f4c5aae9f0216fa1c088e4c636ab0" category="paragraph">ステージ 3 終了時のアグリゲートの所有権：</block>
  <block id="d58c33bf48643b15350ce1c80bb474d8" category="list-text">node3 は、 node1 アグリゲートのホームの所有者であること、および現在の所有者であること。</block>
  <block id="d517ee6c427837d3874a695e344df510" category="paragraph">ステージ 4 終了時のアグリゲートの所有権：</block>
  <block id="312d1c4e0e8f2ca55c86dd955ac42bff" category="list-text">node3 は、 node1 に属していたアグリゲートのホーム所有者および現在の所有者です。</block>
  <block id="6ccf9360cf25c371211dcaee52075b0c" category="list-text">node2 には、 node2 アグリゲートのホーム所有者を指定します。</block>
  <block id="7c9dc4aa3c862a50866dfa4bf1cad537" category="list-text">node3 は、 node2 アグリゲートの現在の所有者です。</block>
  <block id="ae88ee721c31093785205944b85aa4ee" category="paragraph">ステージ 5 終了時のアグリゲートの所有権：</block>
  <block id="478c619523c38faa7066d2d25b446a3d" category="list-text">node3 は、 node1 に属していたアグリゲートのホーム所有者および現在の所有者です。</block>
  <block id="c2583ec3499fda8ccfebbd517d0af4e6" category="list-text">node4 は、 node2 に属していたアグリゲートのホーム所有者および現在の所有者です。</block>
  <block id="964b0454175f6a1894f796b6a8fc4f59" category="summary">手順のさまざまな段階で問題が発生する可能性があります。</block>
  <block id="e33c48b52ab7d302b4af41aca3bbe858" category="doc">手順の複数の段階で発生する可能性のある問題</block>
  <block id="84508423fbb2d015c45d8207837aede4" category="section-title">予期しない「 storage failover show 」コマンドの出力が表示されます</block>
  <block id="9fae6006c452841a1b4104d26127eccf" category="paragraph">手順の実行中に、すべてのデータアグリゲートをホストするノードがパニック状態になったり、誤ってリブートされたりした場合は、リブート、パニック状態、電源再投入の前後に「 storage failover show 」コマンドの出力が想定外に表示されることがあります。</block>
  <block id="8a503ef07edf673987e764eff646e0d0" category="paragraph">ステージ 2 、ステージ 3 、ステージ 4 、またはステージ 5 の「 storage failover show 」コマンドの出力結果に予期しないものが表示されることがあります。</block>
  <block id="4e873fccdf7f54c0486cf43e1300ab3f" category="paragraph">次の例は、すべてのデータアグリゲートをホストするノードでリブートやパニックが発生していない場合の「 storage failover show 」コマンドの出力を示しています。</block>
  <block id="b19cffa247e3fb2147fa3eb145c4247f" category="paragraph">次の例は、リブートまたはパニック後の「 storage failover show 」コマンドの出力例を示しています。</block>
  <block id="399a9894ac45311024aba0a4f4cd1197" category="paragraph">ノードが部分的なギブバック状態にあること、およびストレージフェイルオーバーが無効になっていることを示す出力が表示されますが、このメッセージは無視してもかまいません。</block>
  <block id="3794e9e48df4b7a93a3321f2477f7880" category="paragraph">対処は不要です。ノードペアのアップグレード手順に進みます。</block>
  <block id="5f561bedca26d8d072e51e5a351d1918" category="paragraph">アップグレード前に休止していた SnapMirror 転送を再開し、 SnapMirror 関係を再開できます。更新はアップグレードの完了後にスケジュールどおりに実行されます。</block>
  <block id="9d65950930bb25ed46073bd7f01c7392" category="list-text">デスティネーションで SnapMirror のステータスを確認します。</block>
  <block id="6e29c61f3d7ca15884f613bf76f4ad83" category="list-text">SnapMirror 関係を再開します。</block>
  <block id="e81669be921c5bd20d872e337c5b204d" category="paragraph">node1 の物理ポートが node3 の物理ポートに直接マッピングされていない場合は、次のセクションを参照してください <block ref="871101a3a410248482eefafa62332b63" category="inline-xref-macro-rx"></block> ネットワーク接続を修復するために使用する必要があります。</block>
  <block id="3e0da2be1046cdf5d552f8adaa98c3ae" category="paragraph">node3 のインストールとブートが完了したら、正しくインストールされていることを確認する必要があります。node3 がクォーラムに参加するのを待ってから、再配置処理を再開する必要があります。</block>
  <block id="60d0d1447a22e8eb1a7dd321b2eec56f" category="paragraph">手順のこの時点で、 node3 がクォーラムに参加する間、処理が一時停止します。</block>
  <block id="264f45c2e8ee62b2a09c06df8f3dea0f" category="list-text">ノード 3 がクォーラムに参加していることを確認し</block>
  <block id="0f452669c01e49cb27b82dac8c6f9656" category="paragraph">cluster show -node node3 -fields health`</block>
  <block id="1c39607d3048b34130b8a3c0d2959603" category="list-text">ノード 3 が node2 と同じクラスタに含まれており、ノード 3 が正常であることを確認します。</block>
  <block id="65e2b77d04e539a041041cfc7b7c4d8f" category="list-text">コントローラ交換処理のステータスを確認し、ノード 1 を停止する前と同じ状態で一時停止状態になっていることを確認して、新しいコントローラの設置とケーブルの移動の物理的なタスクを実行します。</block>
  <block id="7d6da636a56e3278933335b21cca97bc" category="list-text">MetroCluster システムを使用している場合は、交換したコントローラが MetroCluster 構成に対して正しく設定されていることを確認します。 MetroCluster 構成が正常な状態である必要があります。を参照してください <block ref="14c0e32a98a31f9fd4a16b635b2f7ebd" category="inline-link-macro-rx"></block>。</block>
  <block id="cc3fae395501f043309fdf0319483db7" category="paragraph">手順 6 に進む前に、 MetroCluster ノード node3 でクラスタ間 LIF を再設定し、クラスタピアリングを調べて MetroCluster ノード間の通信をリストアすることを確認します。</block>
  <block id="ab20c270d222c6ce93913a4b4444628f" category="list-text">コントローラの交換処理を再開します。</block>
  <block id="4ab15a5901ac29ba8b22502370d01f1b" category="section-title">ノード 3 でネットワーク設定をリストア</block>
  <block id="503c8b965e105d62de14a258e8389adc" category="list-text">[[step1] アップグレードした node1 （ node3 ）上のすべての物理ポートを表示します。</block>
  <block id="8e80c0200aab07655785cb1bec3cc1b7" category="paragraph">network port show -node node3</block>
  <block id="49b3d94638f7775922691a946dbeed08" category="list-text">[step2] クラスタ上のブロードキャストドメインの一覧を表示します。</block>
  <block id="a4780c06a89c299119583f29f32ac093" category="paragraph">次の例のような出力が表示されます。</block>
  <block id="d640102c0f1d010e832d7ab6c998976d" category="list-text">[[auto_verify_3_step4]] 'node3 の各ポートの到達可能性を 'OK' 以外の到達可能性ステータスで修復します次のコマンドを最初に任意の物理ポートで実行し、次に任意の VLAN ポートで一度に 1 つずつ実行します。</block>
  <block id="926bbd76240f31054ef4744babd679da" category="paragraph">上記の警告メッセージは、到達可能性ステータスのポートで、現在配置されているブロードキャストドメインの到達可能性ステータスとは異なる可能性がある場合に表示されます。ポートと回答 'y' または 'n' の接続を適宜確認します</block>
  <block id="475bdd7eeca873ac007d2e8d1ed1d0d7" category="list-text">[[step5] インターフェイスグループの設定が新しいコントローラの物理ポートレイアウトと一致しない場合は、次の手順に従って変更します。</block>
  <block id="cb5bf72c08bc8139f3d3b440a9e7819b" category="list-text">[step6] 適切な物理ポートを 'Cluster' ブロードキャストドメインに割り当てるには ' 次の手順に従います</block>
  <block id="c1c14675eda4b09d8745d772c971a760" category="list-text">'Cluster' ブロードキャスト・ドメインに到達可能なポートを判別します</block>
  <block id="1a385242d9fb60423161c8ec41af6b34" category="list-text">[[step7] 次のいずれかのコマンドを使用して、残りの物理ポートを正しいブロードキャストドメインに移動します。</block>
  <block id="652d99b8bb896eacc70cc28d4cea6df9" category="list-text">[[step8] 次の手順を使用して、取り外された可能性のある VLAN を復元します。</block>
  <block id="40ce515ca09862da0a063e257c689c4b" category="paragraph">次に、インターフェイスグループ a0a から削除された VLAN を同じインターフェイスグループにリストアする例を示します。</block>
  <block id="4f9ba38af17871a0e83fa239a6bccc71" category="paragraph">次に、ポート「 e0e 」上の取り外された VLAN を「 E0h 」にリストアする例を示します。</block>
  <block id="a14b1937d7549cfe6656638825e7aa1a" category="list-text">[[step9] すべてのポート修復が完了したら、空のブロードキャストドメインを削除します。</block>
  <block id="5831ae6a2541ef3e48c73d2d25573b1f" category="list-text">[[step10] ] ポートの到達可能性を確認します。</block>
  <block id="94e75d181c02739e78c94503deab7a67" category="paragraph">すべてのポートが正しく設定され、正しいブロードキャストドメインに追加されている場合、「 network port reachability show 」コマンドは、接続されているすべてのポートの到達可能性ステータスを「 ok 」、物理的に接続されていないポートのステータスを「 no-reachability 」と報告する必要があります。この 2 つ以外のステータスが報告されたポートがある場合は、到達可能性修復を実行し、の手順に従ってブロードキャストドメインにポートを追加または削除します <block ref="647eca8a7ea8d4d8434879df3c364180" category="inline-xref-macro-rx"></block>。</block>
  <block id="bf3f92b1cc4c69581f2185ebf4603ed4" category="list-text">次の手順に従って、リストアが必要な SVM および LIF のホームポートがある場合は、それらを指定して LIF のホームポートをリストアします。</block>
  <block id="5103bf442db985e287322952e9087bad" category="list-text">LIF のホームノードとホームポートをリストアします。</block>
  <block id="4a8c92edcf5608186b4e424977f98a73" category="cell">ブート環境プロンプトで「 ifconfig e0M -auto 」コマンドを入力すると、接続が自動的に設定されます</block>
  <block id="b24179e00e90966dedcd7ebbac3c3c96" category="list-text">ネットワークとすべての VLAN 、インターフェイスグループ、およびブロードキャストドメインが正しく設定されていることを手動で確認してください。</block>
  <block id="35c143d9885250e0128441d72be169dd" category="list-text">「 y 」と入力して続行します。</block>
  <block id="0fe1ab232beb36c111a482c1e5418bbf" category="paragraph">これらのチェックの実行後、システムによって、 node2 によって所有されているルート以外のアグリゲートと NAS データ LIF が新しいコントローラ node4 に再配置されます。リソースの再配置が完了すると、システムは一時停止します。</block>
  <block id="ec0abf2d5a391631e61dd4509cb00ed5" category="list-text">ルート以外のアグリゲートと NAS データ LIF がノード 4 に正常に再配置されたことを手動で確認します。</block>
  <block id="947b05812612f9bdff090f2792520d01" category="paragraph">いずれかのアグリゲートに再配置が失敗した場合、または拒否された場合は、アグリゲートを手動で再配置するか、必要に応じて拒否またはデスティネーションのチェックを無視する必要があります。を参照してください <block ref="f9a42009c629603217595f3693c67911" category="inline-link-macro-rx"></block> を参照してください。</block>
  <block id="5f1a63352c537579794f3a3c507ca8fb" category="list-text">次のコマンドを入力し、出力を確認します。</block>
  <block id="fd9ca0bcb22fd53f185265e5000e6dfc" category="paragraph">次の例のような出力が返されます。</block>
  <block id="700025ddacc1b1f21775237f69db717d" category="list-text">ノード 4 に、ノード 2 に存在しないポート上にある SAN LIF または SAN LIF のグループがある場合、または別のポートにマッピングする必要がある場合は、次の手順を実行して、ノード 4 の該当するポートにそれらの SAN LIF またはグループを移動します。</block>
  <block id="628e610b0dbac7c06fd03cc48e401fac" category="list-text">次のコマンドを入力して、 LIF のステータスを down に設定します。</block>
  <block id="c9ac8fe8e0b43e6046de0567dc54775e" category="list-text">ポートセットから LIF を削除します。</block>
  <block id="d21772becf211f27205d2c80c2749c12" category="list-text">次のいずれかのコマンドを入力します。</block>
  <block id="912ec22b1107a17c22a0c63f0644a0d3" category="list-text">次のコマンドを入力して、 1 つの LIF を移動します。</block>
  <block id="f037b701218bf1cc451615cabf0cca09" category="list-text">次のコマンドを入力して、単一のポートまたは間違ったポートのすべての LIF を新しいポートに移動します。</block>
  <block id="0a3646df26d19fcc6a0ee6929a6ea7be" category="list-text">LIF をポートセットに再度追加します。</block>
  <block id="2e3c23cf91c21a249f56ef996f27a61a" category="list-text">次のコマンドを入力して、すべての LIF のステータスを「 up 」に変更し、ノード上のトラフィックを LIF が受け入れて送信できるようにします。</block>
  <block id="970d4e34765aa0832a9175b5e001ed85" category="list-text">次のコマンドを入力し、出力を調べて、 LIF が正しいポートに移動されていること、およびどちらかのノードで次のコマンドを入力して LIF のステータスが「 up 」になっていることを確認します。</block>
  <block id="8c094e66fbad29785444d71fd6c0dcac" category="paragraph">'network interface show -home-node &lt;node4 &gt; -role data</block>
  <block id="086b8cee848b6ff9a25adc1f6ed791c8" category="paragraph">これらのチェックの実行後、 node1 で所有されているルート以外のアグリゲートと NAS データ LIF が新しいコントローラ node3 に再配置されます。リソースの再配置が完了すると、システムは一時停止します。</block>
  <block id="ad7a81d24d4defe671e7bcfbac5dce2c" category="list-text">ルート以外のアグリゲートと NAS データ LIF がノード 3 に正常に再配置されたことを確認します。</block>
  <block id="efd16d4be5b2e2f326b572d6729c7b2c" category="paragraph">いずれかのアグリゲートに再配置が失敗した場合、または拒否された場合は、アグリゲートを手動で再配置するか、必要に応じて拒否またはデスティネーションのチェックを無視する必要があります。を参照してください <block ref="f9a42009c629603217595f3693c67911" category="inline-link-macro-rx"></block> を参照してください。</block>
  <block id="d8c338ec7a5289c51f0e3bb79890e813" category="list-text">次の手順を実行して、ノード 3 の正しいポートに SAN LIF があることを確認します。</block>
  <block id="c54266e61fa0c81baa92579805dc7963" category="list-text">ノード 3 に、ノード 1 に存在しないポート上にある SAN LIF または SAN LIF のグループがある場合、または別のポートにマッピングする必要がある場合は、次の手順を実行して、ノード 3 の該当するポートにそれらの SAN LIF またはグループを移動します。</block>
  <block id="2fbcca46574c079f4fb5aa457abc282e" category="list-text">LIF のステータスを down に設定します。</block>
  <block id="fd8145a34775436c1a5fe969965d449f" category="list-text">1 つの LIF を移動します。</block>
  <block id="30f710fc2b8d913378fc91684f0863fd" category="list-text">存在しない、または間違ったポート上のすべての LIF を新しいポートに移動します。</block>
  <block id="3920c87ab45883a20b7f4aff2eb8f6f9" category="list-text">ノードでトラフィックを許可して送信できるように、すべての LIF のステータスを「 up 」に変更します。</block>
  <block id="b5fdeb64f12933be51c64181c2145b75" category="list-text">いずれかのノードで次のコマンドを入力し、その出力を調べて、 LIF が正しいポートに移動されていること、および LIF のステータスが「 up 」になっていることを確認します。</block>
  <block id="f70b18bc9d56cbb566a64828fa672913" category="list-text">LIF が 1 つでも停止している場合は、次のコマンドを LIF ごとに 1 回入力して、 LIF の管理ステータスを「 up 」に設定します。</block>
  <block id="a9ed443016f95a1edf1f75d02a400ef4" category="doc">ノード 3 に、 VLAN 、インターフェイスグループ、およびブロードキャストドメインを再作成します</block>
  <block id="38f0774e23dfcfc33d0c71a95a9ec915" category="paragraph">node3 がクォーラムにあり、 node2 と通信できることを確認したら、ノード 3 にある node1 の VLAN 、インターフェイスグループ、およびブロードキャストドメインを再作成する必要があります。node3 のポートは、新しく作成したブロードキャストドメインにも追加する必要があります。</block>
  <block id="75500a9c555091ca84661935a854fadd" category="list-text">に記録された node1 情報を使用して、 node3 に VLAN を再作成します <block ref="9fd31f02e13c9f75db388cfb74e0acc1" category="inline-link-macro-rx"></block> セクション。</block>
  <block id="f45acda1c521e41b3ce8a3679b6215ab" category="list-text">に記録されている node1 の情報を使用して、ノード 3 にインターフェイスグループを再作成します <block ref="9fd31f02e13c9f75db388cfb74e0acc1" category="inline-link-macro-rx"></block> セクション。</block>
  <block id="f66463ad689a1b6a786f9d835f140a4a" category="list-text">に記録されている node1 の情報を使用して、ノード 3 にブロードキャストドメインを再作成します <block ref="9fd31f02e13c9f75db388cfb74e0acc1" category="inline-link-macro-rx"></block> セクション。</block>
  <block id="64c5cc9b78a53e4aac350b1dbb4401d0" category="list-text">node3 のポートを、新しく作成したブロードキャストドメインに追加します。</block>
  <block id="9bced622fe4463826e54e9d72ffb3105" category="doc">ポートを node1 から node3 にマッピングします</block>
  <block id="44471d5aafdc0c157c500d2d6a23a19e" category="paragraph">ポート設定は、ノードのモデルによって異なる場合があります。元のノードのポートと LIF の設定を、新しいノードの計画的な使用と設定に対応させる必要があります。これは、新しいノードがブート時に同じ設定を再生するためです。つまり、ノード 3 をブートすると、 ONTAP は、ノード 1 で使用されていたポートで LIF をホストしようとします。</block>
  <block id="0e17cd2a380c7aee928d55a629e1247a" category="paragraph">そのため、 node1 の物理ポートが node3 の物理ポートに直接マッピングされていない場合は、ブート後にクラスタ、管理、およびネットワーク接続をリストアするためにソフトウェア設定の変更が必要になります。また、ノード 1 のクラスタポートがノード 3 のクラスタポートに直接マッピングされていない場合、ノード 3 は、正しい物理ポートでクラスタ LIF をホストするソフトウェア設定を変更するまで、リブート時にクォーラムに自動的に再参加しないことがあります。</block>
  <block id="8ecfd3d07d0b566573970e006b263355" category="list-text">node1 、ポート、ブロードキャストドメイン、および IPspace のすべての node1 ケーブル接続情報を表に記録します。</block>
  <block id="95416f2c916dabe21f738406546ebc53" category="cell">LIF</block>
  <block id="7c58d4376f3e9edee5dddea0cb60174b" category="cell">Node1 ポート</block>
  <block id="c9545236c254e502f1fd332fd827bb30" category="cell">ノード 1 の IPspace</block>
  <block id="d097d9fa6c24ef764e863334502d7e44" category="cell">ノード 1 のブロードキャストドメインです</block>
  <block id="a3af08ec17eafe7fd9b8af3ac85cd551" category="cell">Node3 ポート</block>
  <block id="d7dbdebdabf907055e9f9b1ad790cd2f" category="cell">ノード 3 の IPspace</block>
  <block id="da3249c2580cf367f00b7be2fbbbe3fa" category="cell">ノード 3 のブロードキャストドメイン</block>
  <block id="ad6dcf374ab3aa82295dfd9f05c5321a" category="cell">クラスタ 1</block>
  <block id="1254eb728cd3888ab12378466d7acf61" category="cell">クラスタ 2</block>
  <block id="ab9ecc9d421fd8c94654e9f43686ba1a" category="cell">クラスタ 3</block>
  <block id="bf1b6535047986fddc090d91db2256c5" category="cell">クラスタ 4</block>
  <block id="3c8ea2e650fa77bf321eab55f3572403" category="cell">ノード管理</block>
  <block id="1eb5ae63609e68a11106494d272615bf" category="cell">クラスタ管理</block>
  <block id="1fffe5dec3e7cf3665b3f3d7f9f46a13" category="cell">データ 1</block>
  <block id="1ae886c83bb2b57062f09c9ab93869df" category="cell">データ 2.</block>
  <block id="49995b31307a5ab11f30d0cfc964294f" category="cell">データ 3</block>
  <block id="4006ebc8b1e151da2d8e1860f1657adc" category="cell">データ 4.</block>
  <block id="62a0282d39568be094470486eaf70c4f" category="cell">SAN</block>
  <block id="9e825d496d7663757ece1259e7a96304" category="cell">クラスタ間ポート</block>
  <block id="a954ed2f319ed904377b750e964bbd3b" category="list-text">ノード 3 、ポート、ブロードキャストドメイン、および IPspace のすべてのケーブル接続情報を表に記録します。</block>
  <block id="15395d832f02a01663100fa8cdcdbe72" category="list-text">セットアップが 2 ノードスイッチレスクラスタかどうかを確認するには、次の手順を実行します。</block>
  <block id="b5c6fde8816eb583a49b6c0314b82928" category="list-text">権限レベルを advanced に設定します。</block>
  <block id="07d5ca0790a321e18a18d766e2a4dc46" category="paragraph">'cluster::&gt; set -privilege advanced</block>
  <block id="02447279c68e4d1b8321c16d451e2f25" category="list-text">セットアップが 2 ノードスイッチレスクラスタかどうかを確認します。</block>
  <block id="1754e82bbc644d474d95cae66bc6dae3" category="paragraph">'cluster::&gt; network options switchless-cluster show</block>
  <block id="5fc571537471df3ed57f747d12b1f82f" category="paragraph">このコマンド出力の値は、システムの物理状態と一致する必要があります。</block>
  <block id="0a33c5a38d244a756240abb6427cac6d" category="list-text">管理者権限レベルに戻ります。</block>
  <block id="ca9ef37ccec1afc84a708333d3584ceb" category="list-text">ノード 3 をクォーラムに配置するには、次の手順を実行します</block>
  <block id="1d15788f6c2c92d9fd9ae80b762e2b98" category="list-text">ノード 3 をブートします。を参照してください <block ref="b27daeccf5fbd8a2e88a3636ee615b74" category="inline-link-macro-rx"></block> ノードをブートします（まだブートしていない場合）。</block>
  <block id="e250afe1d6acb2cedbe5164cfe15e160" category="list-text">新しいクラスタポートが Cluster ブロードキャストドメインにあることを確認します。</block>
  <block id="d5a848f4f51e9593f468d025887aa790" category="paragraph">次の例は、ポート「 e0a 」が node3 のクラスタドメインにあることを示しています。</block>
  <block id="3b95836e337e89d8b015f844a70e27c5" category="list-text">クラスタポートが Cluster broadcast-domain にない場合は、次のコマンドを使用して追加します。</block>
  <block id="0d5ac86deac51d611e624857bd351157" category="paragraph">次の例は、ノード 3 にクラスタポート「 e1b 」を追加します。</block>
  <block id="f82bb6762cd68512cb29bd2a7f8ae49b" category="list-text">クラスタブロードキャストドメインに適切なポートを追加します。</block>
  <block id="a45073b4c9b4451293184e2e132d0416" category="paragraph">network port modify -node -port -ipspace Cluster -mtu 9000`</block>
  <block id="6a5060000cc7ede4725a843f1b406b97" category="paragraph">次の例では、 node4 にクラスタポート「 e1b 」を追加します。</block>
  <block id="79498ed93931f11551ee000416c681ad" category="list-text">LIF を 1 つずつ新しいポートに移行します。</block>
  <block id="19822d45a3cb02a6f584bb24bcaa5b08" category="list-text">クラスタ LIF のホームポートを変更します。</block>
  <block id="85530f2f9f1c84469942b904bd0afd80" category="list-text">クラスタブロードキャストドメインから古いポートを削除します。</block>
  <block id="02a331c3e689130522f148a92e794698" category="paragraph">次のコマンドは、ノード 3 のポート「 e0d 」を削除します。</block>
  <block id="453a5afbc81eb04f9be87066e772f47c" category="paragraph">「 network port broadcast-domain remove-ports -ipspace Cluster -broadcast-domain Cluster ‑ ports node3 ： e0d</block>
  <block id="73a476e3954651a03a873f15c78fb2cf" category="list-text">ノード 3 が再びクォーラムに参加したことを確認します。</block>
  <block id="4076f0d6df989532aff6382687e9888e" category="list-text">LIF のホームポートを表示します。</block>
  <block id="b2dc601f3d617280e54bd9153ba2aa9a" category="paragraph">network interface show -fields home-node 、 home-port</block>
  <block id="151015f4cf01b0b6b0ba1839b9b1bd6a" category="list-text">このポートを含むブロードキャストドメインを表示します。</block>
  <block id="c65a432daff80bb22606190592ba03a1" category="list-text">ブロードキャストドメインのポートを追加または削除します。</block>
  <block id="8f822f2d07295ece2b3ed7d8bc0255ff" category="paragraph">「 network port broadcast-domain add-ports 」と入力します</block>
  <block id="f6f7703e9fef5152575d8f4d7f724839" category="list-text">LIF のホームポートを変更します。</block>
  <block id="721f2cf56861c6620ae10af678a11201" category="list-text">に示すコマンドを使用して、クラスタ間 LIF に使用されるネットワークポートのブロードキャストドメインメンバーシップを調整します <block ref="fea3b13a0d2ee88cc51adec05dc6a35c" category="inline-xref-macro-rx"></block>。</block>
  <block id="ef347e13fc7ddb5d862f419e62a1814c" category="list-text">必要に応じて、のコマンドと同じコマンドを使用して、他のブロードキャストドメインを調整してデータ LIF を移行します <block ref="fea3b13a0d2ee88cc51adec05dc6a35c" category="inline-xref-macro-rx"></block>。</block>
  <block id="ebde3c7ee6d00f9081b9e50638aee5c0" category="list-text">ノード 1 にノード 3 に存在しないポートがある場合は、次の手順に従って削除します。</block>
  <block id="f2797e57746a2e92ae2db208aa4ca684" category="list-text">どちらかのノードで advanced 権限レベルにアクセスします。</block>
  <block id="848d81ec28722b1c7b9863d586ec791b" category="list-text">ポートを削除します。</block>
  <block id="e292843f0f8aa27c8a0485033bbc83a8" category="list-text">すべての LIF フェイルオーバーグループを調整します。</block>
  <block id="7a0381687cdc9de622bbd1da886f7a53" category="paragraph">次のコマンドは、フェイルオーバーポリシーを「 broadcast-domain-wide 」に設定し、ノード 3 の LIF 「 data1 」のフェイルオーバーターゲットとして、フェイルオーバーグループ「 fg1 」のポートを使用します。</block>
  <block id="cb78b2e3deaeee9f6221f0adf18ae798" category="paragraph">network interface modify -vserver node3 -lif data1 failover-policy broadcast-domain-domainwide -failover-group fg1</block>
  <block id="b5c60a344329e79b3bc3ea4e338dec46" category="list-text">ノード 3 で変更内容を確認します。</block>
  <block id="ca6c97b959d192578a21a39e5daa0dcb" category="doc">ノード 4 で VLAN 、インターフェイスグループ、およびブロードキャストドメインを再作成します</block>
  <block id="06531598d2f1f8cb4d0e1748bdd53cb1" category="paragraph">ノード 4 がクォーラムにあり、ノード 3 と通信できることを確認したら、ノード 2 の VLAN 、インターフェイスグループ、およびブロードキャストドメインをノード 4 に再作成する必要があります。node3 のポートは、新しく作成したブロードキャストドメインにも追加する必要があります。</block>
  <block id="f510fd869131d6e75b451f4d5143753d" category="list-text">で記録した node2 の情報を使用して、 node4 に VLAN を再作成します <block ref="f7f70c2c98be066b2a9d668ac7d63467" category="inline-link-macro-rx"></block> セクション。</block>
  <block id="90f14f8b8c696d6b840bbeaafeef318b" category="list-text">で記録した node2 の情報を使用して、 node4 にインターフェイスグループを再作成します <block ref="f7f70c2c98be066b2a9d668ac7d63467" category="inline-link-macro-rx"></block> セクション。</block>
  <block id="080ec370c2d913fcb5020dced626cc50" category="list-text">で記録した node2 の情報を使用して、 node4 にブロードキャストドメインを再作成します <block ref="f7f70c2c98be066b2a9d668ac7d63467" category="inline-link-macro-rx"></block> セクション。</block>
  <block id="f10d0345f9a30980e7c9be821215c028" category="list-text">新たに作成したブロードキャストドメインにノード 4 のポートを追加します。</block>
  <block id="28ee1efc4e85d8c498824b6d179e810b" category="list-text">オンボードキーマネージャの暗号化設定を同期するには、クラスタプロンプトで次のコマンドを実行します。</block>
  <block id="261226346341bab3c9b8e706c0ad80c1" category="cell">この ONTAP バージョンの場合 ...</block>
  <block id="6307f29fb047a8637ca6f025a1dec02d" category="cell">ONTAP 9.6 または 9.7</block>
  <block id="0fcf2ee62acd9eae83b609a0e7ecaa72" category="cell">ONTAP 9.5</block>
  <block id="3554bd6dca965e0e8bcb314a54ef655c" category="list-text">オンボードキーマネージャのクラスタ全体のパスフレーズを入力します。</block>
  <block id="04e69ed9c039a8d1bc156ec97e69f0d2" category="inline-link-macro">node2 のポートを node4 にマッピングします</block>
  <block id="38c5d8cbf396fa8049b864a52905989e" category="inline-link-macro">ノードのネットワークポートセットが異なる場合は、クォーラムを追加します</block>
  <block id="9645dac7a86b8b52dafb1d2bce8d2cbc" category="paragraph">ONTAP 9.5 から 9.7 では、 Key Management Interoperability Protocol （ KMIP ）サーバを使用して認証キーを管理できます。</block>
  <block id="40f491be1da04740c193fe7b8e4df207" category="paragraph">アグリゲートの再配置（ ARL ）を使用して ONTAP 9.5 を実行するコントローラのペアを ONTAP 9.7 にアップグレードできるかどうかは、プラットフォームと、元のコントローラと交換用コントローラの両方の構成によって異なります。</block>
  <block id="58753da369714fb951c22c96476b373b" category="paragraph">この ARL 手順 for ONTAP 9.5 を使用して ONTAP 9.7 にノードのペアをアップグレードする場合は、 ARL が元のコントローラと交換用コントローラで実行可能であることを確認する必要があります。</block>
  <block id="92d7a6cff22927442a55701963967daa" category="paragraph">元のシステムでサポートされるすべての定義済みアグリゲートのサイズとディスク数を確認する必要があります。次に、サポートされるアグリゲートサイズとディスク数を、新しいシステムでサポートされるアグリゲートサイズとディスク数と比較する必要があります。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> この情報がある Hardware Universe にリンクするには、次の手順を実行します。新しいシステムでサポートされるアグリゲートサイズとディスク数は、元のシステムでサポートされるアグリゲートサイズとディスク数以上であることが必要です。</block>
  <block id="49b8e12e4922dd11255eee6c82462eae" category="paragraph">元のコントローラを交換したときに、新しいノードが既存のノードとクラスタの一部になることができるかどうかは、クラスタ混在ルールで検証する必要があります。クラスタ混在ルールの詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> Hardware Universe にリンクするには、次の手順を実行します。</block>
  <block id="e20e9ea1f6702a02cf275f42f38fd063" category="admonition">AFF システムのアップグレードを実行する前に、 ONTAP をリリースバージョン 9.5P1 以降にアップグレードする必要があります。これらのリリースレベルは、アップグレードを成功させるために必要です。</block>
  <block id="e13ef1734f457a6634d02e817f76fb23" category="paragraph">ARL を使用したコントローラのアップグレードは、 SnapLock Enterprise ボリュームおよび SnapLock Compliance ボリュームが設定されたシステムでサポートされます。</block>
  <block id="38cf27caef6776abd0225a54be1e9972" category="list-text">[[auto9597_istall3_step6] 次のいずれかの操作を選択して、ネットブート接続を設定します。</block>
  <block id="2dc628959227b30796539097566ced4e" category="list-text">[[Step13]] 両方のノードで次のコマンドを使用して、 SP を設定します。</block>
  <block id="cffe1635d7e645065b5457e425a54cdd" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> SP および _SP ONTAP 9 コマンドの詳細については ' システム管理リファレンスにリンクするには ' マニュアルページリファレンスを参照してください system の service-processor network modify コマンドの詳細については ' を参照してください</block>
  <block id="17acc08dd9b9cc179eb2c71ee42f1438" category="paragraph">この情報では、元のノードの名前は「 node1 」と「 node2 」になり、新しいノードの名前は「 node3 」と「 node4 」になります。説明されている手順では、「 node1 」は「 node3 」に置き換えられ、「 node2 」は「 node4 」に置き換えられます。</block>
  <block id="87955a4e69dc9556a2a78cd5f057d2f3" category="paragraph">「 node1 」、「 node2 」、「 node3 」、および「 node4 」は、元のノードと新しいノードを区別するためだけに使用されます。手順を使用するときは、元のノードと新しいノードの実際の名前を置き換える必要があります。ただし実際には、ノードの名前は変更されません。「 node3 」の名前は「 node1 」と同じで、「 node4 」の名前はコントローラハードウェアのアップグレード後に「 node2 」と同じです。</block>
  <block id="48d957729e77cbd1ec1cf772f951270a" category="list-text">この手順は、交換用コントローラハードウェアが新しく購入され、使用されていないことを前提としています。使用済みのコントローラを「 wipeconfig 」コマンドで準備するために必要な手順は、この手順には含まれていません。交換用コントローラハードウェアを以前に使用していた場合は、テクニカルサポートに問い合わせる必要があります。特に、コントローラが Data ONTAP 7-Mode を実行していた場合は、テクニカルサポートにお問い合わせください。</block>
  <block id="e5e0e33438e3e93b68faec10a86b2f1c" category="list-text">この手順を使用して、ノードが 3 つ以上あるクラスタのコントローラハードウェアをアップグレードできますが、クラスタ内の HA ペアごとに手順を個別に実行する必要があります。</block>
  <block id="5606085c29237d873046f0814d8b70b0" category="list-text">次のコマンドを入力して、 node4 が node3 と同じクラスタに含まれていること、および正常であることを確認します。</block>
  <block id="7f1799dcf19180943a8e7e660bf6a3dd" category="list-text">処理のステータスを確認し、 node4 の設定情報が node2 と同じであることを確認します。</block>
  <block id="a10c88f3a400c8c2aa654ddd4a616518" category="paragraph">ノード 4 の設定が異なる場合は、あとで手順でシステムが停止する可能性があります。</block>
  <block id="838d8de52d85e0b64e9643b598ef2b7e" category="list-text">交換したコントローラが MetroCluster 構成に対して正しく設定されており、スイッチオーバーモードでないことを確認します。</block>
  <block id="d214189b511a4dddc29ca037a9c05cc4" category="paragraph">アップグレード手順の実行中、リモート LIF は SAN LUN へのトラフィックを処理します。アップグレード時にクラスタやサービスの健全性を維持するために、 SAN LIF を移動する必要はありません。ノード 3 をオンラインにしたあと、 LIF が正常に機能しており、適切なポートに配置されていることを確認する必要があります。</block>
  <block id="b003ff957beed57b873253f1e4cd0441" category="list-text">[[step5] - データ LIF をホストしているポートが新しいハードウェアに存在しない場合は、ブロードキャストドメインから削除します。</block>
  <block id="45560e4a070877091866d34d12016154" category="list-text">インターフェイスグループまたは VLAN が設定されている場合は、次の手順を実行します。</block>
  <block id="8e2087071d353c6f56da3d27b7a84dfc" category="list-text">インターフェイスグループから VLAN を削除します。</block>
  <block id="3f3edadf07afca334ee7f44554a2b78f" category="admonition">対処方法に従って、 vlan delete コマンドで表示されるエラーを解決します。</block>
  <block id="f4d11d72b637e9ed5ccd913b9007a29e" category="list-text">次のコマンドを入力し、その出力を調べて、ノードにインターフェイスグループが設定されているかどうかを確認します。</block>
  <block id="04e176453ee24840739bd91255d982c4" category="paragraph">次の例に示すように、ノードのインターフェイスグループ情報が表示されます。</block>
  <block id="e477f90becbcba9c7c9b92ec022ad754" category="list-text">ノードにインターフェイスグループが設定されている場合は、それらのグループの名前とグループに割り当てられているポートを記録し、ポートごとに次のコマンドを 1 回入力してポートを削除します。</block>
  <block id="358f52f6680f0f2b534acb9ac77674d2" category="list-text">停止している LIF がある場合は、次のコマンドを LIF ごとに 1 回入力して、 LIF の管理ステータスを「 up 」に設定します。</block>
  <block id="44d2fdf7ea40f3d7321cb94a4051b609" category="paragraph">「 network interface modify -vserver _Vserver_name -lif LIF_name `-home-node_nodename __ -status-admin up</block>
  <block id="65dafd80488559eb25b9b16c7ae60e27" category="list-text">次のコマンドを入力して、インターフェイスグループから VLAN を削除します。</block>
  <block id="38c250e3cea10de8e69a05edc403fb4f" category="paragraph">「 network port vlan delete -node _nodename 」 -port_ifgrp --vlan-id_vlan_ID_`</block>
  <block id="11c404f7c79ae3005a460cd2d80c457a" category="paragraph">「 network port ifgrp show -node nodename 」 -ifgrp _ifgrp_name のように表示されます</block>
  <block id="d72c3f2754ea2c427cb4caa21b66f58a" category="paragraph">「 network port ifgrp remove-port -node_nodename 」 -ifgrp _ifgrp_name -port_netport_ 」のようになります</block>
  <block id="6694385292a5e940b67087561676a6aa" category="list-text">ONTAP 9.5 、 9.6 、または 9.7 を実行しているネットアップコントローラをアップグレードする場合。本ドキュメントは、 ONTAP 9.8 へのアップグレードには適用されません。</block>
  <block id="9ac1bc9aa08a3adb056bbe14e9db22f9" category="list-text">MetroCluster 構成をアップグレードする場合は、 4 ノード以上の FC 構成になり、すべてのノードで ONTAP 9.6 または 9.7 を実行します。</block>
  <block id="b20b578c387911a06f818e60f8b42fc9" category="cell">AFF A300 、 AFF A400 、 AFF A700 ^1 ^ 、 AFF A800^2^</block>
  <block id="08b8b3c8e271efd7690222a017e7f380" category="cell">FAS8700 、 FAS9000 、 FAS8300 ^4^ 、 ^5^</block>
  <block id="da8b8662f7c1d5fff02df5d395e1d253" category="cell">AFF A700 ^1 ^ 、 AFF A800 ^2 ^ ^ 、 ^3^ 、 AFF A400 ^ 4 ^ ^ 、 ^5^</block>
  <block id="e51c635d01c8dc3e816e9f14ad0767cf" category="paragraph">^1 ^ARL AFF A700 システムの自動アップグレードは、 ONTAP 9.7P2 からサポートされています。</block>
  <block id="cc31b65361b7c697a4d3c0f75b928baf" category="paragraph">^3^ARL AFF A300 から AFF A800 システムへの自動アップグレードは、 ONTAP 9.7P5 からサポートされています。</block>
  <block id="2e2d0e127c8eb55e752ddae9109b7b26" category="paragraph">^4^ARL AFF A300 から AFF A400 への自動アップグレード、および FAS8200 から FAS8300 への自動アップグレードは、 ONTAP 9.7P8 からサポートされています。</block>
  <block id="0d17b2b0ee5853657bc79eefe010abec" category="paragraph">^5^ AFF A300 から AFF A400 または FAS8200 を 2 ノードスイッチレスクラスタ構成で FAS8300 システムにアップグレードする場合は、コントローラのアップグレード用の一時的なクラスタポートを選択する必要があります。AFF A400 および FAS8300 システムは、イーサネットバンドルとして、メザニンカードポートはイーサネットタイプ、 FC タイプの FC バンドルとして、 2 種類の構成で提供されます。</block>
  <block id="03b11da9f8060b934f9b3411198fea29" category="list-text">リストされている各キー管理サーバについて、同じ手順を繰り返します。</block>
  <block id="c61ecb9aacaa88894fa1697ec209966a" category="paragraph">最大 4 台のキー管理サーバをリンクできます。</block>
  <block id="db109f602a3b7cebd1a7f99683224535" category="list-text">リンクされたすべてのキー管理サーバから新しいノードに認証キーをリストアします。</block>
  <block id="d2b3e4b0ae30abdd31414891613ecac2" category="list-text">外部キー管理ツールの認証をリストアします。</block>
  <block id="74c90316d25b4cdc5c8e524af066a5a0" category="paragraph">「セキュリティキーマネージャの外部リストア」</block>
  <block id="eed577fe70cdcd6a422d81d49e0f94ca" category="paragraph">このコマンドには、オンボードキーマネージャ（ OKM ）のパスフレーズが必要です。</block>
  <block id="57bd5edad2e4a85125aa9528f6fa4cea" category="list-text">OKM の認証をリストアします：</block>
  <block id="fb2ae3407dbb65ffe5f8f2ab09ba07d0" category="list-text">次のコマンドを入力し、出力を確認して、新しいクラスタポートがクラスタブロードキャストドメインにあることを確認します。</block>
  <block id="3cb8659a043650dc7ac58ea24d685632" category="paragraph">「 network port show -node node -port port -fields broadcast-domain 」</block>
  <block id="31ee4113a91e33fbefc812b660a4b1ed" category="paragraph">次の例は、ポート「 e1a 」が node3 のクラスタドメインにあることを示しています。</block>
  <block id="5196f85280b4d8f2fde41a628b5ed883" category="list-text">次のコマンドを入力し、出力を確認して、クラスタブロードキャストドメインに正しいポートを追加します。</block>
  <block id="3c5acee2cec17679c5be3b6cbcdd5c0d" category="list-text">次のコマンドを使用して、 LIF ごとに 1 回、クラスタ LIF を新しいポートに移行します。</block>
  <block id="2bb80bd4ebcf6539543d74e66779c6af" category="list-text">クラスタポートが Cluster broadcast-domain にない場合は、次のコマンドを使用して追加します。</block>
  <block id="251908cb596e6149cba77f2cb7558b73" category="list-text">クラスタブロードキャストドメインから古いポートを削除します。関連する任意のノードに対してを使用できます。次のコマンドは、ノード 3 のポート「 e0d 」を削除します。</block>
  <block id="3a77dcc8c0ced4edb3012a4377887fef" category="paragraph">「 network port broadcast-domain remove-ports network port broadcast-domain remove-ports ipspace Cluster -broadcast-domain Cluster -ports node3 ： e0d</block>
  <block id="94633ca5c1dd75af12a1c5cf6f093384" category="list-text">ノードが再びクォーラムメンバーになったことを確認します。</block>
  <block id="cd44bb6e4bc3e07a88dbfa652b3b8611" category="list-text">ブロードキャストドメインに対してポートを追加または削除します。「 network port broadcast-domain add-ports network port broadcast-domain remove-port</block>
  <block id="1f689cbf21b231665fddfb1e6d536c70" category="paragraph">ノード 4 のソフトウェア設定がノード 4 の物理的な接続と一致していること、およびアップグレードを続行する前に IP 接続がリストアされていることが必要です。</block>
  <block id="bf8b9055a5342a7293763811a06a8608" category="paragraph">ポート設定は、ノードのモデルによって異なる場合があります。元のノードのポートと LIF の構成を、新しいノードの構成と互換性を持つようにする必要があります。これは、新しいノードがブート時に同じ設定を再生するためです。つまり、ノード 4 のブート時に、 Data ONTAP が node2 で使用されていたポートで LIF をホストするように試行するためです。</block>
  <block id="fbec007548b328ac0c95f6da4a3baeae" category="paragraph">したがって、 node2 の物理ポートが node4 の物理ポートに直接マッピングされない場合は、ブート後にクラスタ、管理、およびネットワーク接続をリストアするためにソフトウェア設定の変更が必要となります。また、 node2 のクラスタポートが node4 のクラスタポートに直接マッピングされていない場合は、正しい物理ポートでクラスタ LIF をホストするソフトウェア設定が変更されるまで、リブート時に node4 がクォーラムに自動的に再参加しないことがあります。</block>
  <block id="bad707bf91a771b52edba306ada6de3a" category="list-text">node2 、ポート、ブロードキャストドメイン、 IPspace のすべてのケーブル接続情報を表に記録します。</block>
  <block id="7d59f6e2a8043f873c459c922f1be4ac" category="cell">Node2 ポート</block>
  <block id="45b46ba4750e074aa4e7304855388746" category="cell">ノード 2 の IPspace</block>
  <block id="7774466fbe6f6785b221d88e974172bf" category="cell">ノード 2 のブロードキャストドメイン</block>
  <block id="b820c2559c77f1207711b13680c2cd4b" category="cell">Node4 ポート</block>
  <block id="db2291ca53692966923fd04da1d08262" category="cell">ノード 4 の IPspace</block>
  <block id="29ed689e40f8d5b58cdea33f9a18e301" category="cell">ノード 4 のブロードキャストドメインが必要です</block>
  <block id="e0b5ca8e30da43caab0dc808ecb2fd97" category="list-text">ノード 4 、ポート、ブロードキャストドメイン、および IPspace のすべてのケーブル接続情報を表に記録します。</block>
  <block id="0906da04c2f71c2ff6e8d8aa1a0b62e6" category="paragraph">このコマンドの値は、システムの物理状態と一致している必要があります。</block>
  <block id="c3e082d7583cd2ead0dcc409f5542b21" category="list-text">ノード 4 をクォーラムに追加する手順は、次のとおりです。</block>
  <block id="db937998c9896c71a694ce3ace71be28" category="list-text">ノード 4 をブートします。を参照してください <block ref="f326c815b47f4f2909494bae5cd735d5" category="inline-link-macro-rx"></block> ノードをブートします（まだブートしていない場合）。</block>
  <block id="9721a97ccd9a5f90e5dbf3fc6d7d79e8" category="paragraph">次の例は、ポート「 e0a 」が node4 にあるクラスタドメイン内にあることを示しています。</block>
  <block id="97b7450d8bd85e6393b74d4dbf4450d0" category="paragraph">network port modify -node node4 -port e1b -ipspace Cluster -mtu 9000`</block>
  <block id="69b32f8a94b6832dc6d48eee17de9eb8" category="paragraph">次のコマンドは、ノード 4 のポート「 e0d 」を削除します。</block>
  <block id="b99a704778802fd3eec12de47c8eef3e" category="paragraph">「 network port broadcast-domain remove-ports -ipspace Cluster -broadcast-domain Cluster -ports node4 ： e0d</block>
  <block id="046f5601edc5838681a4341447d07a3c" category="list-text">ノード 4 が再びクォーラムメンバーになったことを確認します。</block>
  <block id="6780452e8545385148d380db905f436b" category="paragraph">「 network port broadcast-domain add-ports 」「 network port broadcast-domain remove-ports 」</block>
  <block id="9cad7d7bd6306823f6764eed03150b40" category="list-text">必要に応じて、と同じコマンドを使用して、クラスタ間ブロードキャストドメインを調整してクラスタ間 LIF を移行します <block ref="c86367403222084077e79731124e45bf" category="inline-xref-macro-rx"></block>。</block>
  <block id="85668f79ccc0a9c2b457eb839ed11619" category="list-text">必要に応じて、のコマンドと同じコマンドを使用して、他のブロードキャストドメインを調整してデータ LIF を移行します <block ref="c86367403222084077e79731124e45bf" category="inline-xref-macro-rx"></block>。</block>
  <block id="df67040888f09ede9f57e8123e071106" category="list-text">node2 に存在しないポートが残っている場合は、次の手順に従って削除します。</block>
  <block id="5a2881d4439f8933c1dc179fb49a9495" category="paragraph">次のコマンドは ' フェイルオーバー・ポリシーを broadcast-domain-wide に設定し ' フェイルオーバー・グループ fg1 のポートを 'node4 の LIF のフェイルオーバー・ターゲットとして使用します</block>
  <block id="c85edd1a59a6da53fbfe967ef36e8db3" category="paragraph">'network interface modify -vserver node4 -lif data1 failover-policy broadcast-domainwide -failover-group fg1</block>
  <block id="197cf83159625e94e69b0fc1efa0e824" category="list-text">ノード 4 で変更を確認します。</block>
  <block id="37df1e4edda8a9bce8aa91096f265331" category="list-text">[[Step5] ] 次のコマンドを入力し、出力を調べて、 node2 にデータ LIF が残っていないことを確認します。</block>
  <block id="c76c038ef9582123a69154e143b5e63f" category="list-text">次のコマンドを入力し、ノードに設定されているインターフェイスグループがないかどうかを確認します。</block>
  <block id="83d7d02690134c88d040a5e6d81a981b" category="paragraph">関連するノードに対してこの手順を使用できます。node3 は、次のサンプル全体で使用されます。</block>
  <block id="aa38e04ca4c35fceef45210d8b6a003a" category="list-text">次のコマンドを入力し、出力を確認して、新しいクラスタポートがクラスタブロードキャストドメインにあることを確認します。</block>
  <block id="9c334e7e4defdbeb8571e0c5e2a8abf3" category="list-text">次のコマンドを入力し、出力を確認して、クラスタブロードキャストドメインに正しいポートを追加します。</block>
  <block id="03631f9ee15255f006df50849cffb9de" category="list-text">クラスタ LIF のホームポートを次のように変更します。</block>
  <block id="929697b9e81ed66dcaa4410aa1b6eea4" category="paragraph">「 network port broadcast-domain add-ports -ipspace Cluster -broadcastdomain Cluster ports node: port 」のように設定されています</block>
  <block id="440a119559739fb047b33344e93fc5ac" category="list-text">ノードが次のようにクォーラムに再参加したことを確認します。</block>
  <block id="ca5fc614df4c9dce6d5728a3a2c40003" category="paragraph">「 network port broadcast-domain add-ports network port broadcast-domain remove-port 」というメッセージが表示されます</block>
  <block id="deb6dba98f2d5d5a1fde945303708e5d" category="list-text">LIF のホームポートを変更します。</block>
  <block id="764f98dfaba7470447914335050a58df" category="paragraph">必要に応じて、クラスタ間ブロードキャストドメインを調整してクラスタ間 LIF を移行します。データ LIF は変更されません。</block>
  <block id="b42a4717030452cc205d4d9947f80c7b" category="paragraph">いずれかのアグリゲートに再配置が失敗した場合、または拒否された場合は、アグリゲートを手動で再配置するか、必要に応じて拒否またはデスティネーションのチェックを無視する必要があります。</block>
  <block id="70ab34491b1c348e1a029bf39dad5d2c" category="list-text">EMS ログで、アグリゲートの再配置に失敗した理由や拒否された理由を確認します。</block>
  <block id="cc9d127dc39047b3e73421f03d8d0026" category="cell">次のコマンドを入力します。「 storage aggregate relocation start -override-vetoes * -ndocontroller -upgrade true</block>
  <block id="6067a4436975e19e7c76700ceeabd5c2" category="cell">次のコマンドを入力します。「 storage aggregate relocation start -overridedestination-checks * -nd-controllerupgrade true</block>
  <block id="83e3abbe2d4f63155eff798e62e1a616" category="inline-link-macro">ステージ 3 ：ノード 3 の設置とブート</block>
  <block id="47d2d2bfe5e2f318b6d816e5adc3929d" category="paragraph">このフェーズで node3 がクラッシュした場合は、 HA がすでに無効になっているため、テイクオーバーは実行されません。</block>
  <block id="f361f80547aae98b60e1c7ecc861a027" category="paragraph">ノード 3 のリブートまでルート以外のアグリゲートがすでに再配置されています。</block>
  <block id="07c1aaa58cd1a9ed9a8f92aecfc26662" category="paragraph">node3 のブート中に、すべてのアグリゲートでクライアントが停止します。</block>
  <block id="3ffee04e4bb020103f1bece18c2ac58e" category="doc">コントローラのアップグレードプロセスを自動化する</block>
  <block id="de8c3311256a86cce047cb3a63efa71a" category="paragraph">コントローラのアップグレード時に、コントローラは、より新しい、またはより強力なプラットフォームを実行する別のコントローラに交換されます。</block>
  <block id="0a00cf76c766f3c9437fe3941fdf22c4" category="cell">ステージ 1 ：アップグレードを準備</block>
  <block id="2fa5c37305bc33a6ae27bb983656d1e3" category="list-text">処理のステータスを確認し、 node3 の設定情報が node1 と同じであることを確認します。</block>
  <block id="7ae288e57d9c04f2d5a1b7ff338ee758" category="paragraph">node3 の設定が異なる場合は、手順の後半でシステムが停止する可能性があります。</block>
  <block id="d845d17a5ef5b3ab80e9280a67c911e8" category="list-text">交換したコントローラが MetroCluster 構成に対して正しく設定されていることを確認します。 MetroCluster 構成は正常な状態であり、スイッチオーバーモードではないことが必要です。を参照してください <block ref="14c0e32a98a31f9fd4a16b635b2f7ebd" category="inline-link-macro-rx"></block>。</block>
  <block id="3c18bf7f079d36181ad6878ed8071663" category="summary">ルートボリュームからブートデバイスに構成情報をリストアする必要があります。</block>
  <block id="bc40b2f6345ce25ab7662ef954f79eac" category="doc">ルートボリューム構成をリストア</block>
  <block id="8025560869bc5bb571a283b93eb36c25" category="list-text">LOADER プロンプトからブートメニューにアクセスします。</block>
  <block id="3b30581e1dcf21fb5bc10ab7b7b14ebc" category="list-text">ブート・メニューから '(6) Update flash from backup config' を選択し ' 続行するかどうかを確認するメッセージが表示されたら 'y' を入力します次のいずれかを選択してください。</block>
  <block id="e568219783dc2975662f32e6665b9312" category="paragraph">フラッシュの更新プロセスが数分間実行され、システムがリブートします。</block>
  <block id="64c7b7b950f686aaa9399673582360b1" category="list-text">システム ID の不一致を確認するプロンプトが表示されたら、「 y 」と入力します。</block>
  <block id="e4c1c828d40a575431492bab6401d8ae" category="paragraph">起動シーケンスは正常に実行されます。</block>
  <block id="f068cb7de6bc557a6102cbb510f726f0" category="summary">元のノードからボリュームを移動できるように、新しいノードを設置してクラスタに追加する必要があります。</block>
  <block id="0a89217206ded71020fde70b9be96510" category="doc">新しいノードを設置してクラスタに追加</block>
  <block id="b241ff4d47149b1cfcc3bff8ac743191" category="paragraph">ボリュームを移動することでコントローラハードウェアをアップグレードする場合は、元のノードと新しいノードの両方が同じクラスタに存在する必要があります。</block>
  <block id="48c7c41b72e1d678923ce3571aa65b2d" category="list-title">ステップ</block>
  <block id="c73b08eed72ad3afd194519ddb22ebc4" category="list-text">新しいノードを設置してクラスタに追加します。</block>
  <block id="5da3c5c759e159e1aab297e687e23060" category="cell">クラスタのバージョン</block>
  <block id="b7c4538baf1def6c115b8c9ce3581612" category="cell">参照するドキュメント</block>
  <block id="a0783764f121d0362f984f57649b230b" category="paragraph">ONTAP 9.0 以降</block>
  <block id="ed3f2da4177cc35b1433eccf1a2e9b37" category="paragraph">ONTAP 9.0 より前のリリース</block>
  <block id="8f2f5cebfa6b4e869a159dbf3cedb773" category="inline-link">使用しているバージョンの Data ONTAP 8 に対する『クラスタの拡張エクスプレスガイド』を検索してください</block>
  <block id="2f22c527d871517945ac34102d2f6931" category="summary">ストレージを移動することでアップグレードの手順を完了するには、新しいノードから未使用のポートと LIF を削除し、ストレージフェイルオーバーまたはハイアベイラビリティを再度有効にし、サービスプロセッサ \ （ sp\ ）を設定し、新しいライセンスをインストールし、 AutoSupport をセットアップする必要があります。また、ストレージまたはボリュームの暗号化を設定し、 FC ポートまたは CNA ポートを設定する必要がある場合もあります。</block>
  <block id="5112ce36807c8e031c9ab063bc28ce71" category="doc">ONTAP 9.7 以前で最終アップグレード手順を実行します</block>
  <block id="83e8f1a7c1a2c10d90059989f69becc7" category="list-text">ストレージシステムのプロンプトで、 LIF に関する情報を表示します。</block>
  <block id="de11c3d9da699c5b0528297ad39e25cb" category="list-text">新しいノードから未使用のポートを削除します（ advanced 権限レベル）。</block>
  <block id="1edc30c9cec2665a01f0a9cc7910d9fc" category="paragraph">「 network port delete 」のように表示されます</block>
  <block id="89bd08809cd5f941c4bb2cc6687fe212" category="list-text">SAN 環境の場合は、未使用の LIF をポートセットから削除して、 LIF を削除できるようにします。</block>
  <block id="76cde272010074b17076f956bb6d89f8" category="list-text">ポートセットリストを表示します。</block>
  <block id="18ecf1639f5534ac5a785a3b8e1d413f" category="paragraph">lun portset show</block>
  <block id="c9afae54fd0724e5cf3fea1615684aa8" category="list-text">未使用の LIF をポートセットから削除します。</block>
  <block id="2585d1a54081f67afe396a9a7f2d20fc" category="paragraph">「 lun portset remove 」</block>
  <block id="c0535f3650a99508f47cb0b1cc1a34ac" category="list-text">新しいノードから未使用の各 LIF を削除します。</block>
  <block id="ab316765db1b6096837da27d30f7afbd" category="paragraph">「 network interface delete 」</block>
  <block id="eb300e9e31367fa48035e27472f75b6f" category="list-text">必要に応じて、新しいノードペアでストレージフェイルオーバーまたはハイアベイラビリティを再度有効にします。</block>
  <block id="e8599f3c8ef213317efbf60b0379685c" category="cell">使用する方法</block>
  <block id="73b5646d22daa7a0c1b15cb75822045d" category="cell">2 ノードクラスタ</block>
  <block id="7315714b19f21e9ad91dfa8b10b194f9" category="cell">高可用性を再度有効にします : 「 cluster ha modify -configured true</block>
  <block id="1ec03101c59723f4e07d47729c2bb2c0" category="cell">3 つ以上のノードで構成されるクラスタ</block>
  <block id="35dece72c7fa8f55fa95338ea53d5bb8" category="cell">ストレージフェイルオーバーを再度有効にします。「 storage failover modify -node node_name -enabled true 」</block>
  <block id="8f581810d42d6aab9a995890e97f0a55" category="list-text">必要に応じて、新しいノードで SP を設定します。</block>
  <block id="ac1f1418c4fb176ba9565108305de59a" category="paragraph">「 system service-processor network modify 」を参照してください</block>
  <block id="7e8a470724bdedbac7acdf0c919a8f0d" category="list-text">必要に応じて、新しいノードに新しいライセンスをインストールします。</block>
  <block id="5da2b156280daaa1fc2fe1cb2772416f" category="paragraph">「システムライセンスが追加されました」</block>
  <block id="3d0e110b052ddfe7c5e1d2238e076ff2" category="list-text">新しいノードで AutoSupport をセットアップします。</block>
  <block id="844ad6e55c95a4328e37b5e065b5ff4a" category="paragraph">「システム・ノード AutoSupport modify 」</block>
  <block id="e31a23cd4ecc24fce8358862c8b9bae7" category="list-text">新しい各ノードから、アップグレード後の AutoSupport メッセージをテクニカルサポートに送信します。</block>
  <block id="39f6fe42807470e793eabaa7b4decf63" category="paragraph">「 system node AutoSupport invoke -node node_name -type all -message 」 MAINT= end node_name が platform_old から platform_new に正常にアップグレードされました</block>
  <block id="ef613ca6be844d20a9465aad12778acf" category="list-text">新しいノードに FC ポート（オンボードまたは FC アダプタ上）、オンボード CNA ポート、または CNA カードがある場合は、ストレージシステムプロンプトで次のコマンドを入力して、 FC ポートまたは CNA ポートを設定します。</block>
  <block id="7334dc04c7292582343d824254e622ce" category="paragraph">「 system node hardware unified-connect modify -node node-name -adapter adapter-name -mode ｛ fc | cna ｝ -type ｛ target | initiator ｝ 」です</block>
  <block id="b50a05f2d30350b2ea8e112696c796d0" category="paragraph">CNA の設定は、 CNA アダプタがオフラインの場合にのみ変更できます。</block>
  <block id="55c24359193cebab5cdb49b7cf7d04b5" category="list-text">必要に応じて、新しいノードにスイッチレスクラスタをセットアップします。</block>
  <block id="a4fda524e3ce1bcbcd36efab17cd9e24" category="inline-link">Cisco クラスタスイッチを使用した 2 ノードスイッチクラスタへの移行</block>
  <block id="0e15b03083512d986709666b0825a949" category="inline-link">NetApp CN1610 クラスタスイッチを使用した 2 ノードスイッチクラスタへの移行</block>
  <block id="caa541c368ed2e96d996d661d22bc171" category="list-text">必要に応じて、ネットアップサポートサイト経由で元のシステムを運用停止にし、システムの運用を停止したこととサポートデータベースから削除できることをネットアップに通知します。</block>
  <block id="09ea0908fbfc4cde85bf416e35dc55c8" category="inline-link">ネットアップサポート</block>
  <block id="5f76ca3d5838bbe4e3afe662f3e0e008" category="list-text">[ インストール済みシステム ] のリンクをクリックします。</block>
  <block id="b64b23511c1735fad8c07cd83da6444e" category="list-text">[ インストール済みシステム ] ページで、フォームに古いシステムのシリアル番号を入力し、 [* Go!] をクリックします</block>
  <block id="6bdb588e04554302f22e13e36fc8cfcd" category="list-text">Decommission Form ページでフォームに入力し、 *Submit をクリックします。</block>
  <block id="a6544f7c3c36002518f645319241e489" category="paragraph">手順のアップグレードが完了している。</block>
  <block id="5b0415c2846efde1fb66c48433f25633" category="doc">コントローラハードウェアをアップグレードする方法を選択します</block>
  <block id="e5e09031843479ef9ef8cbbd4c2f404c" category="inline-link">NetApp Hardware Universe の略</block>
  <block id="ae2a729cf8a689b034991414ae49b1fb" category="summary">ストレージを移動してアップグレードするときは、まず node3 と node4 を設置し、新しいノードへの電源、コンソール、およびネットワーク接続を接続します。</block>
  <block id="6659a60f476a4bc6bb0fb4f4102757a3" category="doc">新しいノードをインストール</block>
  <block id="7bee235304d66460f5514bec30b84491" category="list-text">プラットフォームの _Installation and Setup Instructions _ に従って、新しいノードを設置します。</block>
  <block id="d3bce5b47df40dd2fa2c5263447f1fef" category="paragraph">この時点では、元のノードのディスクシェルフを新しいノードに接続しないでください。</block>
  <block id="eee400f6654fba9ea347faff838af3e5" category="list-text">プラットフォームの _Installation and Setup Instructions _ に従って、電源とコンソール接続を node3 / node4 HA ペアに接続します。</block>
  <block id="24d72d714e0459bffa2dc49d7ff220e1" category="list-text">ネットワークケーブルを接続します。</block>
  <block id="9d50d3e8c7d08c93404d2be2587afc66" category="list-text">ストレージシェルフのケーブルを除く残りのすべてのケーブルを、ノード 1 とノード 2 の HA ペアからノード 3 とノード 4 の対応するポートにそれぞれ転送します。</block>
  <block id="5a8dfa3943e8e71201fd576d26e40b9d" category="paragraph">ストレージシェルフの接続に使用しないファイバチャネルケーブルとイーサネットケーブルも含まれます。</block>
  <block id="9cd94a0a224271a5cd21acb271cdd506" category="summary">元のノードから移動するボリュームを格納するために、新しい各ノードに少なくとも 1 つのアグリゲートを作成します。ボリュームごとにアグリゲートを指定し、各ボリュームを個別に移動する必要があります。</block>
  <block id="3085ebd8810ece8cd93e0024bdb65eb1" category="doc">アグリゲートを作成してボリュームを新しいノードに移動</block>
  <block id="b256175cc88e3f891053e44ca8855b5d" category="paragraph">ボリュームを移動するには、データ保護ミラー関係を初期化しておく必要があります。</block>
  <block id="4cbaf693faaaa40a1e90a2e2918ba582" category="list-text">新しいノードごとに少なくとも 1 つのアグリゲートを作成します。</block>
  <block id="fe82c8b7274d1544ce545c5b1bb60481" category="paragraph">「 vserver add-aggregates 」</block>
  <block id="39e7eb0e1fd08f1ba6fea6e4df4f0d50" category="paragraph">新しいアグリゲートとボリュームの移動元となる古いアグリゲートの両方が同じ SVM に存在する必要があります。</block>
  <block id="65c0e65d7f3d4f9b7e59695a5beed439" category="list-text">新しいアグリゲートが元のノードのアグリゲートと同じ SVM に割り当てられていることを確認します。</block>
  <block id="60ffd94dccfc67beb8507929d59460e3" category="list-text">元のノードから新しいノードに移動するボリュームの情報を表示します。</block>
  <block id="045e4ac6df29d2cafc7b15a9d2d9e81e" category="paragraph">あとで参照できるように、コマンドの出力は残しておく必要があります。</block>
  <block id="291a171e8b949620eda68d899d2e3e06" category="paragraph">次の例は、「 vs1 」 SVM と「 node0 」ノードのボリュームを表示します。</block>
  <block id="383baa78f8d3606514a0526bf7b76432" category="list-text">指定したボリュームを移動可能なアグリゲートを特定します。</block>
  <block id="2ed27953e3f00d2cb31db4ae51e73953" category="paragraph">次の例は、「 vs2 」 SVM の「 user_max 」ボリュームを、表示されているどのアグリゲートにも移動できることを示しています。</block>
  <block id="275730138630968709a9e2b4981691e3" category="list-text">移動する各ボリュームで検証チェックを実行し、指定したアグリゲートに移動できることを確認します。</block>
  <block id="de2d56bd81b546dcca46b829e3e1e6f1" category="list-text">ボリュームを一度に 1 つずつ移動します（ advanced 権限レベル）。</block>
  <block id="5b41753377d891121fddc57b374ecd0c" category="paragraph">ノードのルートボリューム（ vol0 ）は移動できません。SVM ルートボリュームを含むその他のボリュームも移動できます。</block>
  <block id="b9a2da3111645d69717822ff4c8d43bc" category="list-text">「 volume move 」操作の結果を表示して、ボリュームが正常に移動されたことを確認します。</block>
  <block id="ef14daf085f4427e7af6d6339e2a9dd6" category="list-text">複数回試行しても 'volume move' 操作が最終フェーズを完了しない場合は ' 強制的に移動を終了します</block>
  <block id="faadc653b9d5250917700d625763b5cc" category="paragraph">ボリュームの移動処理を強制的に終了させると、移動しているボリュームへのクライアントアクセスが中断される可能性があります。</block>
  <block id="c127e808b121ddcc589e1612e8629e3d" category="list-text">ボリュームが指定した SVM に正常に移動され、正しいアグリゲートに配置されていることを確認します。</block>
  <block id="88b8cfb0eb0372af5622adb072f8536f" category="inline-link-macro">ONTAP 9.8 を使用してネットワークポートをマッピングします</block>
  <block id="0f25f34bbc6624def56436f34d66a8ca" category="doc">オプション：内蔵ストレージを移動するか、システムをドライブシェルフに変換します</block>
  <block id="5445f44c8361f04d7db7417496478290" category="inline-link-macro">内蔵ドライブを元のノードから移動します</block>
  <block id="32bdc1101e093c57bf74fbd9789794c2" category="inline-link-macro">元のノードをドライブシェルフに変換します</block>
  <block id="afe97a2560f5930aa2a5c5663fce5add" category="inline-link-macro">コントローラハードウェアのアップグレードに関する考慮事項</block>
  <block id="84dc193ac12ec0c17e52a119451eb5ee" category="list-text">互換性のあるドライブシェルフが新しいノードにすでに接続されている必要があります。</block>
  <block id="14118424a52e5faf27de83ea1ae0b462" category="list-text">システムの前面からベゼルをそっと取り外します。</block>
  <block id="1009ece53b201ef044edbb499bcabdd6" category="list-text">[[move_int_drive_2]] ドライブキャリアの左側にあるリリースボタンを押します。</block>
  <block id="addb5ded0310559ea0a26d75615eeff4" category="paragraph">キャリアのカムハンドルが途中まで開き、キャリアがミッドプレーンから外れます。</block>
  <block id="b74ab52594e3216640ae873b11d66486" category="list-text">カムハンドルを完全に引き下げてミッドプレーンからキャリアを外し、キャリアをドライブシェルフからそっと引き出します。</block>
  <block id="7e66410308ed9486077135ccddda4a00" category="admonition">取り外し、取り付け、持ち運びなど、ドライブを扱うときは常に両手で作業してください。ただし、キャリアの下側のむき出しになっている基板に手を置かないでください。</block>
  <block id="14d43cc881a50f3a6183180fefe24888" category="list-text">カムハンドルを開いた状態で、キャリアを新しいドライブシェルフのスロットに挿入し、キャリアが停止するまでしっかりと押し込みます。</block>
  <block id="84292dc65a5d7c537ea712d040de613a" category="admonition">キャリアを挿入するときは両手を使います。</block>
  <block id="1c21d383507612a44944a4ef460798a2" category="list-text">[[move_int_drive_5] キャリアがミッドプレーンに完全に収まり、カチッという音がして固定されるまで、カムハンドルを閉じます。</block>
  <block id="e31ad1284b7618a9c10777ed99b12e64" category="inline-xref">手順 2</block>
  <block id="4d388dae867b0a86458ede8119b8865e" category="list-text">繰り返します <block ref="267cbc67ee851d16fc5833a2bb2eacbb" category="inline-xref-macro-rx"></block> から <block ref="07cb79f26065ce7eb3e55fb46a8c9f8b" category="inline-xref-macro-rx"></block> 新しいシステムに移動するすべてのドライブについて確認します。</block>
  <block id="0c297b93e672c9bc05e823d846073d38" category="doc">ONTAP 9.7 以前でアップグレードを完了します</block>
  <block id="e2235c37305cb98ad3fd9aa58c7fad4b" category="inline-link-macro">ONTAP 9.7 以前を使用してネットワークポートをマッピングします</block>
  <block id="6b0020689d6a1c40c97b6df1736d8e38" category="inline-link-macro">ONTAP 9.7 以前で最終アップグレード手順を実行します</block>
  <block id="9dd804cbb0c89e2e63928e7cedd0c88f" category="summary">アップグレードを計画するには、アップグレードに関する一般的な考慮事項を理解しておく必要があります。必要に応じて、テクニカルサポートに連絡して、クラスタの構成に固有の推奨事項とガイダンスを確認してください。</block>
  <block id="a3cb839890daad4f93490c8dec227de5" category="paragraph">要件および制限事項</block>
  <block id="f2c81e3dbd5898a4f589948eb2c23e36" category="paragraph">内蔵ストレージを搭載したシステム</block>
  <block id="b96d37f28c3d7d06841f391d5e809dbd" category="list-text">内蔵ストレージを搭載したシステム、または内蔵 SATA ドライブまたは SSD にボリュームまたはアグリゲートを格納したシステムを使用している場合は、同じクラスタ内の新しいノードに接続されているドライブシェルフに内蔵ストレージを移動することでアップグレードできます。</block>
  <block id="3c62ff9b7896a5eed67cfbeb8bc9bfdf" category="paragraph">内蔵ストレージの移動は、ストレージを移動してアップグレードするワークフローのオプションです。</block>
  <block id="31e9ea6f4ed38186085bf9a52128a461" category="inline-link">ストレージコントローラマザーボードの交換時および iSCSI と FCP を使用したヘッドのアップグレード時の問題の解決方法</block>
  <block id="b578e0f4f47404bddfc292477bc08776" category="inline-xref-macro">ストレージを移動してコントローラハードウェアをアップグレードします</block>
  <block id="9932dd20d13ac6c57fa0b56b3ed1e4a0" category="inline-xref-macro">ボリュームを移動してコントローラハードウェアをアップグレードする</block>
  <block id="e062efd67a70d34c188657c2ffafc80e" category="summary">ノード 1 とノード 2 に属していたディスクを、それぞれノード 3 とノード 4 に再割り当てする必要があります。</block>
  <block id="43b6e140cee78de5a68c093867c65596" category="doc">ストレージシェルフを接続し、ディスク所有権を再割り当てします</block>
  <block id="507efb4e488acd48724d3f1c3d4b184d" category="paragraph">このセクションの手順は、 node3 と node4 で実行します。そのあと、 node3 の各手順を完了してから次の手順に進みます。</block>
  <block id="6617e295325d64b4136755492970fe4c" category="list-text">node3 の LOADER プロンプトから、メンテナンスモードでブートします。</block>
  <block id="533823574e82f810ad592fb31173b543" category="list-text">node3 のシステム ID を表示します。</block>
  <block id="9d0e35f7d62f6d238b5cb5794b6d495c" category="paragraph">「ディスクショー V 」</block>
  <block id="01c50956963e384ca8ffd4c7db35055b" category="paragraph">以下の手順 4 で使用する node3 のシステム ID を記録します。</block>
  <block id="8796eefce7338c136136dae2ceb1ae48" category="list-text">ノード 1 のスペアディスク、ルートアグリゲートに属するディスク、およびデータアグリゲートを再割り当てします。</block>
  <block id="35698942e3e79abf6ab8cd4cb3593dc3" category="paragraph">「ディスクの再割り当て -s _node1 _sysid _ -d _node3 _sysid _ -p _node2 _SysID_ 」</block>
  <block id="ae448c109542203d3a3cde5363cfccee" category="list-text">共有ディスクが存在する場合にのみ '--p partner_SysID_' パラメータを指定します</block>
  <block id="a6ac6e206a687fa5e638aeb5a2505e40" category="paragraph">node2 のスペアディスク、ルートアグリゲートに属するディスク、およびすべてのデータアグリゲートを再割り当てする場合、コマンドは次のようになります。</block>
  <block id="2e4156d3cca76c6a7c2a2eb02d8fcbd2" category="paragraph">「ディスクの再割り当て -s node2_sysid -d node4 sysid -p node3 _SysID 」</block>
  <block id="7f616e8c743e57f3b11fac3e3bd7ffb1" category="paragraph">次のようなメッセージが表示されます。</block>
  <block id="d0848afd8553c34945705222a97a4553" category="paragraph">次のような出力が表示されます。</block>
  <block id="e931682ac0f69e4f23e778b87a1949e7" category="summary">ストレージを移動してアップグレードするプロセスでは、 node3 と node4 の電源をオンにし、ソフトウェアイメージをブートしてノードを設定します。</block>
  <block id="b1fa2ac0707a8d8f4408434b0191d0fe" category="doc">新しいノードをセットアップ</block>
  <block id="cc32105596984688d6ab5fee199bc645" category="list-text">node3 の電源をオンにし、すぐにコンソール端末で Ctrl+C キーを押して LOADER プロンプトにアクセスします。</block>
  <block id="25870cbb4fe9afef5797b531420b7012" category="paragraph">node3 と node4 が同じシャーシにある場合は、手順 2 に進みます。ない場合は、手順 3 に進みます。</block>
  <block id="6c43e0670806fec2f9b82e002c3d44d5" category="list-text">node3 と node4 が単一シャーシ構成（同じシャーシ内にコントローラがある場合）の場合は、次の手順を実行します。</block>
  <block id="d486515e741f0bde35c2fd426a867b3d" category="list-text">ノード 4 にシリアルコンソールを接続します。</block>
  <block id="bab144c0a8977d9f14b3ec5a34769bb7" category="list-text">ノード 4 の電源がオンになっていない場合はオンにし、コンソール端末で Ctrl+C キーを押してブートプロセスを中断して LOADER プロンプトにアクセスします。</block>
  <block id="7f3fbfaad92df530efc5e2c935feab6d" category="paragraph">両方のコントローラが同じシャーシ内にある場合は、電源はすでにオンになっているはずです。</block>
  <block id="02dcb64a1d27e1eeab5837de925863e2" category="paragraph">node4 には LOADER プロンプトが表示されたままにします。この手順に戻り、 node3 の設置後に以下の手順を繰り返します。</block>
  <block id="e0c72359a74d5f255e008145ee1a65aa" category="list-text">LOADER プロンプトで、次のコマンドを入力します。</block>
  <block id="70dbb49a6cbad96a6befa2a87cf2c5ce" category="paragraph">「デフォルト設定」</block>
  <block id="f1115a4ee76c827e3baf90e4fccb2989" category="list-text">LOADER プロンプトで、管理 LIF のネットブート接続を設定します。</block>
  <block id="d28de6877e1c71b43aa9dbe62d9bc5a1" category="cell">IP アドレス</block>
  <block id="54201c55d2bdc7a9e19d9e032d8c0ede" category="cell">DHCP</block>
  <block id="ae5171433beb404b3b19f1a8c6ab2aec" category="cell">自動接続を構成します :ifconfig e0M -auto</block>
  <block id="84a8921b25f505d0d2077aeb5db4bc16" category="cell">静的</block>
  <block id="6d762fbeecd3a906c826d40dcc3e0ec8" category="cell">手動接続を設定します。「 ifconfig e0M -addr= ip_addr-mask= netmask -gw= gateway 」</block>
  <block id="fc77134b1cf9bee36efeff8c4e7ff00d" category="list-text">LOADER プロンプトで、ノード 3 でネットブートを実行します。</block>
  <block id="792eb4d1b571ca19a55c8073d075e399" category="cell">FAS2200 、 FAS2500 、 FAS3200 、 FAS6200 、 FAS/AFF8000 シリーズシステム</block>
  <block id="b684c44ca7e473a2454503d632a74387" category="cell">netboot\http://web_server_ip/path_to_webaccessible_directory/netboot/kernel`</block>
  <block id="a0be7aade7801be3a4df66bacd6674d0" category="cell">netboot\http://web_server_ip/path_to_webaccessible_directory/ontap_version_image.tgz`</block>
  <block id="e9df9be17a53094a5ff251f40e848216" category="paragraph">「 path_to_the_web-accessible_directory 」は、ダウンロードした「 ONTAP_version_image.tgz 」ファイルの場所です。</block>
  <block id="a7cb2d731b29707bf9c40c8d88a0c732" category="admonition">新しいコントローラをネットブートできない場合は、テクニカルサポートにお問い合わせください。</block>
  <block id="9a8c20fab9267090fe0211c579b8d259" category="list-text">ブートメニューからオプション * （ 7 ） Install new software first * を選択し、新しいソフトウェアイメージをダウンロードしてブートデバイスにインストールします。</block>
  <block id="53986d70143c63a3205b1deed773b405" category="paragraph">"This 手順 is not supported for NonDisruptive Upgrade on an HA pair" というメッセージは無視しますIT 環境：ソフトウェアの無停止アップグレード。コントローラのアップグレードは対象外。</block>
  <block id="efb4ec8002f3f7ed99b1b4f92cbef052" category="list-text">手順を続行するかどうかを尋ねられたら、「 y 」と入力します。パッケージの入力を求められたら、イメージファイルの URL を入力します。</block>
  <block id="3bb3e0dc251b6c719d9693145812f91b" category="paragraph">http://web_server_ip/path_to_web-accessible_directory/ontap_version_image.tgz`</block>
  <block id="647f982b341b67a165ac63d735784a54" category="paragraph">必要に応じてユーザ名とパスワードを入力するか、 Enter キーを押して続行します。</block>
  <block id="a01beec0f6ce0a2dd45c8f1d5aa3e76c" category="list-text">次のようなプロンプトが表示されたら 'n' を入力してバックアップ・リカバリをスキップします</block>
  <block id="4c311f4de89068c42d4731e90025eefc" category="list-text">次のようなプロンプトが表示されたら 'y' と入力して再起動します</block>
  <block id="3772c3f3ea70d5c6527c33a07c35e34b" category="list-text">リブートプロセスを中断するよう求めるプロンプトが表示されたら、 Ctrl+C キーを押してブートメニューを表示します。</block>
  <block id="6854e023bbdb323be06c87482d9b3a73" category="list-text">ブートメニューから * （ 5 ） Maintenance mode boot * を選択して、メンテナンスモードにアクセスします。</block>
  <block id="2e17578ed57b4217f0fff6fb665fb7db" category="list-text">必要に応じて、ノードの FC ポートまたは CNA ポートへの変更を実施し、ノードをメンテナンスモードにリブートします。</block>
  <block id="39b29886f880d41a4124d49c7d84425f" category="paragraph">システムは、 HA ペア構成かスタンドアロン構成かを PROM に記録します。状態は、スタンドアロンシステムまたは HA ペア内のすべてのコンポーネントで同じである必要があります。</block>
  <block id="1c02d552a23cb0d5ccd392be156357f4" category="paragraph">「 ha-config modify controller ha 」コマンドは、コントローラ設定の「 ha 」を設定します。「 ha-config modify chassis ha 」コマンドを実行すると、シャーシ設定に「 ha 」が設定されます。</block>
  <block id="168534119baada9aef15b0bbbe44b454" category="paragraph">システムが LOADER プロンプトで停止します。</block>
  <block id="928eff2006adc1184e5f768e70b85796" category="summary">元のノードがサポート対象のモデルである場合、ストレージを移動してアップグレードする処理中に、ノードをドライブシェルフに変換し、同じクラスタ内の新しいノードに接続できます。</block>
  <block id="93ee61ace756458b9aac549506050c57" category="list-text">変換するノードのコントローラモジュールを適切な IOM モジュールと交換します。</block>
  <block id="e420822bb33a20469fdc3f065d3d63ca" category="list-text">ドライブシェルフ ID を設定します。</block>
  <block id="e3a1e42d336af98f7116d009f256cff5" category="paragraph">シャーシを含む各ドライブシェルフには、一意の ID が必要です。</block>
  <block id="bf4f5599e53150e46e0e54293db42d76" category="list-text">必要に応じて、他のドライブシェルフ ID をリセットします。</block>
  <block id="2b1d453e5c526d2daec5dda41e6bf086" category="list-text">新しいノードに接続されているドライブシェルフの電源をオフにしてから、新しいノードの電源をオフにします。</block>
  <block id="3c3916219a878033fa2aaddd792ed605" category="list-text">変換したドライブシェルフを新しいシステムの SAS ポートに接続し、アウトオブバンド ACP ケーブルを使用している場合は新しいノードの ACP ポートに接続します。</block>
  <block id="28391dfe8511b351c91dba3094b1ba03" category="list-text">変換したドライブシェルフおよび新しいノードに接続されているその他のドライブシェルフの電源をオンにします。</block>
  <block id="c2f0cd821e5ee148eb1900a96d516f19" category="list-text">新しいノードの電源をオンにしてから、各ノードで Ctrl+C キーを押してブートプロセスを中断し、ブート環境プロンプトにアクセスします。</block>
  <block id="1a364d01ffd247339721f8976186fb42" category="summary">ストレージを移動してアップグレードする場合は、元のノードを準備し、新しいノードをセットアップします。一部のプラットフォームモデルでは、新しいノードへの内蔵ストレージの移動がサポートされています。新しいノードにディスクを再割り当てし、ルートボリュームの設定をリストアし、ネットワークポートを設定します。ストレージの移動によるアップグレードは、停止を伴う手順で実行されます。</block>
  <block id="4b52611cbeb99e3693b2989804997376" category="inline-xref-macro">ストレージ移動時にアップグレードを準備</block>
  <block id="c4612c419c5b77fdb1400d9db61d37d0" category="inline-xref-macro">元のノードをシャットダウンします</block>
  <block id="761cd859f3a1152e9ed0b1bbb19f801e" category="inline-xref-macro">新しいノードに接続されているディスクの所有権を削除します</block>
  <block id="65e0e6759e9c5622cb5684aa9ab3918c" category="inline-xref-macro">新しいノードのデフォルト設定をリセットします</block>
  <block id="2d425665af37b9989f89179649650990" category="inline-xref-macro">アップグレードを完了します</block>
  <block id="1059655c106e5ea0199f3774e670962f" category="summary">ボリュームを移動してコントローラハードウェアをアップグレードする前に、いくつかの準備手順を実行する必要があります。</block>
  <block id="65ef2ef8754850d3945f71f106c239bf" category="doc">ボリューム移動時にアップグレードを準備</block>
  <block id="e9adb27e90050d8289d9a9c063d397bc" category="list-text">元のノード上のボリュームを表示します。</block>
  <block id="448f48037793339f6909fa019ac572e8" category="paragraph">volume show</block>
  <block id="9a196f75795aecf7d88cba65270aa82d" category="paragraph">コマンド出力を使用して、新しいノードに移動するボリュームのリストを準備します。</block>
  <block id="ca1e7d2036709df38bf67d5763ea1196" category="list-text">元のノードのライセンス情報を表示して記録します。</block>
  <block id="415a99ccf5f33b1917dc69dd5ae1cc49" category="list-text">元のノードでストレージ暗号化を使用しており、新しいノードに暗号化対応ディスクがある場合は、元のノードのディスクにキーが正しく設定されていることを確認します。</block>
  <block id="8a27eb0213ced2501be4946695cfd6de" category="list-text">自己暗号化ディスク（ SED ）に関する情報を表示します。</block>
  <block id="af11fb45c89d3718886f151c8a08d22c" category="paragraph">「 storage encryption disk show 」のように表示されます</block>
  <block id="21673b2e55b47fc43d8ff1f5ae5ace2d" category="list-text">Manufacturer Secure ID （ MSID ；メーカーのセキュア ID ）以外のキーが関連付けられたディスクがある場合は、 MSID キーに変更します。</block>
  <block id="6532a36b400d423741e990e7bfb3a4f9" category="paragraph">「 storage encryption disk modify 」</block>
  <block id="e7a03543f0b46d4d160d9cb6f548c923" category="list-text">現在のクラスタが 2 ノードのスイッチレス構成である場合は、希望するタイプのスイッチを使用する 2 ノードのスイッチクラスタに移行します。</block>
  <block id="a20d9980e43b578ea10896a930345b17" category="list-text">元の各ノードから AutoSupport メッセージを送信して、テクニカルサポートにアップグレードについて通知します。</block>
  <block id="4d3a4f006fa6b11c769a39a41cac5793" category="summary">ストレージを移動してアップグレードの手順を完了するには、新しいノードから未使用のポートと LIF を削除し、ストレージフェイルオーバーまたはハイアベイラビリティを再度有効にし、サービスプロセッサ \ （ sp\ ）を設定し、新しいライセンスをインストールし、 AutoSupport をセットアップする必要があります。また、ストレージまたはボリュームの暗号化を設定し、 FC ポートまたは CNA ポートを設定する必要がある場合もあります。</block>
  <block id="de87a7c00dcfcf1112ca50efd583f924" category="paragraph">ストレージを移動してアップグレードの手順を完了するには、新しいノードから未使用のポートと LIF を削除し、ストレージフェイルオーバーまたはハイアベイラビリティを再度有効にし、サービスプロセッサ（ SP ）を設定し、新しいライセンスをインストールし、 AutoSupport をセットアップする必要があります。また、ストレージまたはボリュームの暗号化を設定し、 FC ポートまたは CNA ポートを設定する必要がある場合もあります。</block>
  <block id="0bde8f7cae6f7006cf8059b9d923c0a4" category="inline-xref-macro">ONTAP 9.7 以前で最終アップグレード手順を実行します</block>
  <block id="602dfb74c3c65622a6e81f6da6da5716" category="paragraph">高可用性を再度有効にします : 「 cluster ha modify -configured true</block>
  <block id="68e75079cb8b3e7a53d47ecb9c69a59e" category="paragraph">ストレージフェイルオーバーを再度有効にします。「 storage failover modify -node node_name -enabled true 」</block>
  <block id="07bcd7f493b550a7d6a23f2400273a8b" category="summary">ストレージを移動してアップグレードする前に、元のノードからライセンス情報を収集し、ネットワーク設定を計画し、システム ID を記録して、ネットブートに必要なファイルを準備する必要があります。</block>
  <block id="8f173fba352550b4b824b719504591e0" category="list-text">元のノード node1 と node2 のライセンス情報を表示して記録します。</block>
  <block id="d49b56a3426b3aa04db4098a00a258f3" category="list-text">ノード 1 / ノード 2 HA ペアでストレージ暗号化を使用していて、新しいノードに暗号化が有効なディスクがある場合は、元のノードのディスクにキーが正しく設定されていることを確認します。</block>
  <block id="f86586d6856ab5f19b8787f7761d1c45" category="list-text">自己暗号化ディスク（ SED ）に関する情報を表示します。</block>
  <block id="2ca3f33b8690b8bfadc126b4fa162fd8" category="list-text">Manufacturer Secure ID （ MSID ；メーカーのセキュア ID ）以外のキーが関連付けられたディスクがある場合は、 MSID キーに変更します</block>
  <block id="f4b5604db85f1d0c81857a7ac77548c5" category="list-text">[[prepare_move_store_3]] ノード 1 / ノード 2 の HA ペアにポートと LIF の設定情報を記録します。</block>
  <block id="4d4e0186fe4a6767fbe04fce3b401b3a" category="cell">表示する情報</block>
  <block id="79bd216cbc0f386a597365eaa04f09ac" category="cell">入力するコマンド</block>
  <block id="9e3848dac335cb237199f520c6525242" category="paragraph">シェルフ、各シェルフ内のディスク数、フラッシュストレージの詳細、メモリ、 NVRAM 、ネットワークカード</block>
  <block id="654e1d01ab7f77e6f39636c95aa8c372" category="paragraph">クラスタネットワーク LIF とノード管理 LIF</block>
  <block id="b789920aa34a06ff52a0a140eb8211ba" category="paragraph">'network interface show -role cluster, node-mgmt</block>
  <block id="1edb05285bdfcd8326cc54455703d7ec" category="paragraph">物理ポート</block>
  <block id="bcc0e5a3e08cd34e80692195d056b06d" category="paragraph">フェイルオーバーグループ</block>
  <block id="b8b0fe3149c819fa21f2a86823ef8abc" category="paragraph">clusterwide 以外のフェイルオーバーグループの名前とポートを記録します。</block>
  <block id="e7462d2e6e123bc7d973071af507af96" category="paragraph">VLAN の設定</block>
  <block id="e8b11d1241a22730e9b7b2847fce1105" category="paragraph">各ネットワークポートと VLAN ID のペアを記録します。</block>
  <block id="7313f6357960954d1290c9360512a59f" category="paragraph">インターフェイスグループの設定</block>
  <block id="61d37f34e493a0639bf5de53ed879037" category="paragraph">インターフェイスグループの名前と割り当てられているポートを記録します。</block>
  <block id="e4fba9d169fb5edb171e52cb71d98ff6" category="paragraph">ブロードキャストドメイン</block>
  <block id="4c9d53b2ac777e0e1e7588f7fa1bc00c" category="paragraph">IPspace 情報</block>
  <block id="f4e3ea14a86c053c771cffad27e184f6" category="paragraph">network ipspace show</block>
  <block id="a6d12afddb580faaf04d9a073325f914" category="paragraph">* FAS2200 、 FAS2500 、 FAS3200 、 FAS6200 、 FAS/AFF8000 シリーズシステム *</block>
  <block id="724182e8d5c3b1bb2c819f46951a63be" category="paragraph">「 ONTAP_version_image.tgz 」ファイルの内容をターゲットディレクトリ「 tar -zxvf ONTAP_version_image.tgz 」に展開します</block>
  <block id="6495df55b307404a4ea0b4f64a7ae26a" category="paragraph">* 注： Windows で内容を展開する場合は、 7-Zip または WinRAR を使用してネットブート・イメージを展開します。</block>
  <block id="da18433407867d03800be7785b789106" category="paragraph">ディレクトリの一覧には、カーネル・ファイル「 netboot/ kernel 」を含むネットブート・フォルダが含まれている必要があります</block>
  <block id="339dbbf2e3919abe2381758c4b54e24c" category="paragraph">* その他すべてのシステム *</block>
  <block id="21694d70fa63b61a0a68e7a39cc96e19" category="paragraph">ディレクトリの一覧に次のファイルが表示されます。</block>
  <block id="00296cd0500c321060de54661554739a" category="paragraph">「 ONTAP_version_image.tgz 」</block>
  <block id="0caecd7c9276edc19599cb97a20eac4d" category="admonition">「 ONTAP_version_image.tgz 」ファイルの内容を抽出する必要はありません。</block>
  <block id="c9b87fd8826330d02eb0f7e03c49023c" category="summary">ボリュームを移動することでアップグレードの手順を完了するには、サービスプロセッサ \ （ sp\ ）を設定し、新しいライセンスをインストールし、 AutoSupport をセットアップする必要があります。また、ストレージまたはボリュームの暗号化を設定し、 FC ポートまたは NCA ポートを設定する必要がある場合もあります。</block>
  <block id="d01decedde31fd5fc9aee34a816e3a84" category="paragraph">「 system node AutoSupport invoke -node node_name -type all -message 」 node_name が platform_old から platform_new にアップグレードされました</block>
  <block id="533d1f26c154725c9c91afdd1b89aaa4" category="list-text">[ インストール済みシステム ] ページで、フォームに古いシステムのシリアル番号を入力し、 [* Go!] をクリックします</block>
  <block id="44e9f0c666ea054f51421040e37dee98" category="summary">元のノードからボリュームを移動したら、 SAN 以外のデータ LIF とクラスタ管理 LIF を元のノードから新しいノードに移行する必要があります。</block>
  <block id="7d0330f92f5b6340af08f88bf712e687" category="doc">SAN 以外のデータ LIF とクラスタ管理 LIF を新しいノードに移動します</block>
  <block id="87375b5769d5bc8e37ee39d964c25804" category="paragraph">VMware vStorage APIs for Array Integration （ VAAI ）でコピーオフロード処理に使用されている LIF を移行することはできません。</block>
  <block id="fc522dd9612f86c0ea7c802be05de893" category="cell">移行する項目</block>
  <block id="1d073f20d5a5045e1aa3afacf792bf7c" category="cell">入力するコマンド</block>
  <block id="0a4bc8aea04444e0f2b960facbd686f4" category="paragraph">特定の LIF</block>
  <block id="fb465127c12aa152a3a6787bc1358040" category="paragraph">SAN 以外のすべてのデータ LIF とクラスタ管理 LIF</block>
  <block id="8d4031ef52b7ff00f19077a56df4c26e" category="paragraph">次のコマンドは、 SVM 「 vs0 」の「 datalif1 」という名前の LIF を「 node0b 」のポート「 e0d 」に移行します。</block>
  <block id="44807f621f3e0960500d7db205f07c8e" category="paragraph">次に、現在の（ローカル）ノードからすべてのデータ LIF とクラスタ管理 LIF を移行するコマンドを示します。</block>
  <block id="68c8a99bc9172a87f6301c02d55008f8" category="list-text">クラスタ管理 LIF のホームノードが元のいずれかのノードにある場合は、次の手順を実行します。</block>
  <block id="a7d2bd92477c7708999d89fc281f2cfb" category="list-text">クラスタ管理 LIF のホームノードを新しいノードの 1 つに切り替えます。</block>
  <block id="038faacffbd9c39ca68e42dccdbe915f" category="list-text">クラスタ管理 LIF を新しいノードの 1 つに移行します。</block>
  <block id="f6feea768bbf907f8918a30130dc7d38" category="summary">診断の実行後、コントローラモジュールのストレージとネットワークを再度ケーブル接続する必要があります。</block>
  <block id="ea122bb8fa70f0ea4b180db441cf1abd" category="doc">システムにケーブルを再接続</block>
  <block id="3c0c8efee11cd7a51266228208ce0a13" category="paragraph">診断の実行後、コントローラモジュールのストレージとネットワークを再度ケーブル接続する必要があります。</block>
  <block id="d0b16eb1b162f9fb3ef65f59b13902e7" category="list-text">システムにケーブルを再接続します。</block>
  <block id="4ba20dd7668682720b8eed837f2ea1a8" category="list-text">Config Advisor を使用して、ケーブル接続が正しいことを確認します。</block>
  <block id="eea0c04ed0e3acb7893e5192e1e8223d" category="list-text">ネットアップサポートサイトから Config Advisor をダウンロードしてインストールします。</block>
  <block id="0373910e51252c7b97dcbea9f4942604" category="inline-link">mysupport.netapp.com</block>
  <block id="31509d9d2ecd7357c2d79b6100170edf" category="paragraph"><block ref="31509d9d2ecd7357c2d79b6100170edf" category="inline-link-rx"></block></block>
  <block id="d1bb82954c2ac129418d4ca65eb100d5" category="list-text">ターゲット・システムの情報を入力し '[* データ収集 ] をクリックします</block>
  <block id="6361d7cb04e4c3f294b622b2cc3e87a0" category="list-text">[*Cabling *] タブをクリックし ' 出力を確認します</block>
  <block id="e322e9be3fd030740b4239a7bfbeed70" category="paragraph">すべてのディスクシェルフが表示されていること、およびすべてのディスクが出力に表示されていることを確認し、ケーブル接続に関する問題が見つかった場合は修正します。</block>
  <block id="2d46bc00fe1306e504816e238db01e8e" category="list-text">該当するタブをクリックして他のケーブル接続を確認し、 Config Advisor からの出力を確認します。</block>
  <block id="1e9be7aa46166eca7db0fc1c4e7a887b" category="paragraph">これらの手順は、 node3 と node4 で実行する必要があります。</block>
  <block id="7f0307060728fe46960f5901c576848b" category="admonition">次のコマンド例では、「 node1 」と呼んでいます。この段階で手順の交換用ノード「 node3 」と「 node4 」の名前は実際には「 node1 」と「 node2 」です。</block>
  <block id="4fb89fe4ba344b621e7afe206f6a8a4e" category="list-text">次の変更を行います。</block>
  <block id="757ee83d9d913287174eb13a32791a9a" category="list-text">node3 と node4 にまだログインしていない場合は、ブートしてログインします。</block>
  <block id="488704cff7055e0adb667e6434ad04b5" category="list-text">クラスタブロードキャストドメインに追加するポートを変更します。</block>
  <block id="1d79ea5a41dff0854a82efdbcdb2f72d" category="paragraph">次の例では 'node1' に 'Cluster' port e1b を追加します</block>
  <block id="44cfd5499c1c5e138a09d952646d13a0" category="paragraph">network port modify -node node1 -port e1b -ipspace Cluster -mtu 9000`</block>
  <block id="112d21318dcb3758e7fe3f932ebc36f5" category="paragraph">すべてのクラスタ LIF が移行され、クラスタ通信が確立されたら、クラスタがクォーラムに参加する必要があります。</block>
  <block id="f8c4e1930d2ec49e8149c2e48e43d636" category="list-text">クラスタ LIF のホームポートを変更します。</block>
  <block id="1e746213020788bee82da3b663d9a8c9" category="list-text">'Cluster' ブロードキャスト・ドメインから古いポートを削除します</block>
  <block id="c59ee067f1e2a7f5c083dccd15039be2" category="list-text">node3 と node4 の健全性状態を表示します。</block>
  <block id="2e2786810124b219ec88817aab856aed" category="list-text">すべてのポートの到達可能性ステータスを表示します。</block>
  <block id="339d7d0493d7df43c35e2a1d483c9cba" category="list-text">物理ポートと VLAN ポートの到達可能性を修復するには、各ポートで次のコマンドを 1 つずつ実行します。</block>
  <block id="8c40a77b34a5d773edb70494e7f10d84" category="paragraph">次のような警告が表示されます。「 y 」または「 n 」を確認し、必要に応じて入力します。</block>
  <block id="1708f24291e02d5444d943fd9a4a384c" category="list-text">クラスタのすべてのブロードキャストドメインを一覧表示します。</block>
  <block id="7b4ead482f6c92170f4c6bef96fe284b" category="list-text">到達可能性の修復が実行されると、 ONTAP は正しいブロードキャストドメインにポートを配置しようとします。ただし、ポートの到達可能性を特定できず、既存のブロードキャストドメインに対応していない場合は、 ONTAP によってそれらのポート用の新しいブロードキャストドメインが作成されます。すべてのメンバーポートがインターフェイスグループのメンバーポートになる場合は、必要に応じて、新しく作成したブロードキャストドメインを削除できます。ブロードキャストドメインを削除する</block>
  <block id="991ac44bc0f4b09cc233a9a79f867f55" category="list-text">インターフェイスグループの設定を確認し、必要に応じてメンバーポートを追加または削除します。インターフェイスグループポートにメンバーポートを追加します。</block>
  <block id="6d260ed9cb63935d4eff6ef0cbc812bc" category="paragraph">インターフェイスグループポートからメンバーポートを削除します。</block>
  <block id="c99cfb03dbd1f20e150b31f5f9c7e297" category="list-text">必要に応じて VLAN ポートを削除し、再作成します。VLAN ポートを削除します。</block>
  <block id="77fd7c219c7b6d2330906a24cbb05d97" category="paragraph">VLAN ポートを作成します。</block>
  <block id="244220515525d7bbce7364431256c704" category="admonition">アップグレードするシステムのネットワーク構成の複雑さによっては、手順 5 、手順（ a ）から（ g ）を繰り返して、必要に応じてすべてのポートを正しく配置する必要があります。</block>
  <block id="ea655de7a1937b3e3b33b8a800b7cb49" category="list-text">取り外された VLAN を表示します。</block>
  <block id="472aa5d8ae9d1d5726cc523100b48335" category="list-text">取り外した VLAN を目的の宛先ポートに復元します。</block>
  <block id="0bb998238231c13a494cdbd3689c6d25" category="list-text">すべての取り外された VLAN が復元されたことを確認します。</block>
  <block id="47520b16706f00daa0983c140c0ad715" category="list-text">VLAN は、作成後約 1 分後に適切なブロードキャストドメインに自動的に配置されます。リストアした VLAN が適切なブロードキャストドメインに配置されていることを確認します。</block>
  <block id="5f8dfcaae8cea23af1ab8bab1c7c23ad" category="list-text">ホームポートの LIF が別のノードに移動されたか、すでに存在していない可能性がある LIF を表示します。</block>
  <block id="5f6447c81c91c2a68fcce7c90bfd253a" category="list-text">各 LIF のホームポートをリストアします。</block>
  <block id="25d37c99a98fed25bef30e1dc9dfbbc2" category="list-text">すべての LIF ホームポートがリストアされたことを確認します。</block>
  <block id="db548c254460f5243399043fe56f9785" category="list-text">正しいブロードキャストドメインに属するポート上ですべての LIF が意図的に稼働していることを確認します。</block>
  <block id="60b2815df1dfab3c2fb93c656ce873c2" category="list-text">管理上の理由で停止している LIF がないか確認します。</block>
  <block id="c4610b7b449885970b4973ca609dd9dd" category="list-text">変更する必要がある LIF のホームポートを変更します。</block>
  <block id="0f5308f3f4f3c464e7f648069ec71c80" category="admonition">iSCSI LIF の場合、ホームポートを変更するには LIF が管理上停止している必要があります。</block>
  <block id="7960433234d5162e1055d53630a352f5" category="list-text">ホームでない LIF をそれぞれのホームポートにリバートします。</block>
  <block id="50314d4f124e0153ee89d1686a2bc452" category="paragraph">「 network interface revert * 」の略</block>
  <block id="029d23f0db183aa13dd611784328ec8c" category="admonition">ONTAP 9.8 では、自動ポート配置機能が導入され、ハードウェアのアップグレード手順が簡略化されています。</block>
  <block id="797fc5bb1530b93a4d119b95138dc85d" category="list-text">元のノードと新しいノードに互換性があり、サポートされている。</block>
  <block id="afcdd6a539b6392327d97fd8eb2cd065" category="list-text">元のノードの IP アドレス、ネットワークマスク、およびゲートウェイを新しいノードで再利用する。</block>
  <block id="4fd09292f1a407286c9372555595d59c" category="list-text">ストレージまたはボリュームを移動することで、コントローラハードウェアをアップグレードすることを計画している。</block>
  <block id="4836c86a753695232f6579b2d1e052e6" category="list-text">ストレージを移動してアップグレードする場合は、停止を伴う手順を実行する準備ができている。</block>
  <block id="8cdba56188d6642a771d0c327a72af57" category="paragraph">ボリュームの移動によるアップグレードは無停止で実行できます。</block>
  <block id="56089842bd614396cfba7cdf9bb6601f" category="list-text">サポート対象モデルのノードをディスクシェルフに変換し、新しいノードに接続することを計画している。</block>
  <block id="3d9010fa119828bc81f438c75af15b63" category="paragraph">ストレージを移動してコントローラハードウェアをアップグレードする手順では、元のノードは node1 と node2 に、新しいノードは node3 と node4 と呼ばれます。説明されている手順では、 node1 は node3 に置き換えられ、 node2 は node4 に置き換えられます。</block>
  <block id="5b3de670b2de55fec257c6f89ab421bc" category="summary">ボリュームを移動してアップグレードする場合は、元のノードを準備し、新しいノードをクラスタに追加します。ボリュームを新しいノードに移動し、 LIF を設定して、クラスタから元のノードを削除します。ボリュームの移動によるアップグレード手順は無停止で実行できます。</block>
  <block id="f5b49dd631a7fa0c45fc2aea8bcfa384" category="paragraph">使用している ONTAP のバージョンに対応した手順を使用する必要があります。</block>
  <block id="51bea01f527b8a0a7714408789058c6b" category="summary">元のノードをシャットダウンして削除するときは、アップグレードについての AutoSupport メッセージを送信し、メールボックスを削除し、ノードの電源をオフにして、シャーシを取り外す必要があります。</block>
  <block id="0b5874c3f69c1393f6461a11d78dfa9c" category="list-text">node1 と node2 から AutoSupport メッセージを送信し、テクニカルサポートにアップグレードについて通知します。</block>
  <block id="3173ac672a7cdfb43fd506ad10daef11" category="list-text">ノード 1 とノード 2 でハイアベイラビリティまたはストレージフェイルオーバーを無効にします。</block>
  <block id="d875f9fec183da794cd6d6245ef00d1d" category="list-text">cluster ha modify -configured false</block>
  <block id="bbe624d4e7e26aa8777e96c55a0041f3" category="paragraph">3 ノード以上のクラスタ</block>
  <block id="d74abfb55f46e179952b0f9d29ab5c58" category="list-text">ノードを停止します。</block>
  <block id="aa20c612e4b09a19b572b1a0ae5851b5" category="paragraph">リブート・プロセス中に定足数チェックを抑制するには '-ignore-quorum -warnings オプションを使用します</block>
  <block id="ef081f0763db1e61273c7141947a007f" category="list-text">[[shutdown_node_A_1 step5] - メンテナンスモードでディスク所有権情報を通じて取得された、各元のノードのシステム ID を記録します。</block>
  <block id="7692418b27cf02fad97f4990a434658d" category="paragraph">システム ID は、元のノードのディスクを新しいノードに割り当てるときに必要となります。</block>
  <block id="6ad89260dedeef1270be905e718e6682" category="list-text">FC または CNA ポートを設定している場合は、設定をメンテナンスモードで表示します。</block>
  <block id="84886c64e807dd28c16702155c350818" category="paragraph">あとで参照できるように、コマンドの出力を記録しておく必要があります。</block>
  <block id="7f7deb46e1585e846e2fd054b1b2af5a" category="paragraph">「マイボックス破壊ローカル」</block>
  <block id="280e883e4dc586328892b13e3a6a5f9d" category="paragraph">次のようなメッセージがコンソールに表示されます。</block>
  <block id="36e3bf7b64851aa82d534b6219858a39" category="list-text">次のようなプロンプトが表示されたら 'y' と入力してメールボックスを削除します</block>
  <block id="e3c00d0f293a58871853ed866dc020a2" category="list-text">ノード 1 とノード 2 の電源をオフにし、電源からケーブルを抜きます。</block>
  <block id="250a399ca40ceae22935ccb2c65facb5" category="list-text">ノード 1 とノード 2 からすべてのケーブルにラベルを付けて取り外します。</block>
  <block id="ee6adde8f8004d94fe449a931d889e98" category="list-text">ノード 1 とノード 2 を含むシャーシを取り外します。</block>
  <block id="1a8639e4c8ee9656522efd4a2b9f58d0" category="list-text">node3 と node4 をクラスタプロンプトでブートしていない場合は、それらをブートします。</block>
  <block id="4a95a6730ba2310bfeb433fbf30d8aab" category="list-text">「 Cluster 」ブロードキャストドメインに正しいポートを追加します。</block>
  <block id="48965dff18dc1b1a8625e27956a0c97b" category="paragraph">次の例では 'Cluster ポート e1b を node1 に追加します</block>
  <block id="0e515e9baf5c9c8904811cad4ca86f4a" category="list-text">LIF を 1 つずつ新しいポートに移行します。</block>
  <block id="81a582aafef39a5c34471a2df478041e" category="paragraph">SAN データ LIF は、オフラインの場合にのみ移行できます。</block>
  <block id="acb31929dc066067c0841bfad48a777b" category="list-text">新しいコントローラの物理ポート・レイアウトに合わせて、 VLAN および「 ifgrp config 」を変更します。</block>
  <block id="159c3e7b0c178674563a1589bc1f32e3" category="list-text">node3 と node4 に存在しなくなった node1 ポートと node2 ポートを削除します（ advanced 権限レベル）。</block>
  <block id="82e992dffa9a18c86087b3d3c3489290" category="list-text">ポートを含むブロードキャストドメインを表示します。</block>
  <block id="df8657642711d6967d7e6acd72cc9e97" category="list-text">必要に応じて、ブロードキャストドメインにポートを追加またはドメインから削除します。</block>
  <block id="4b84dfb5a597238ada9ab2341f5ec5c9" category="list-text">必要に応じて LIF のホームポートを変更します。</block>
  <block id="c625e6bca32182b354cc2e2ecdbbf7ec" category="paragraph">次のコマンドは、フェイルオーバーポリシーを broadcast-domain-wide に設定し、フェイルオーバーグループ「 fg1 」のポートを「 node1 」の LIF 「 data1 」のフェイルオーバーターゲットとして使用します。</block>
  <block id="f0307b0ba42c934e076f749d65448b21" category="paragraph">「 network interface modify -vserver node1 -lif data1 -failover-policy broadcast-domain-wide -failover-group fg1 」というメッセージが表示されます</block>
  <block id="baec9716e3c721b8360a740bf6d657ec" category="list-text">ノード 3 とノード 4 のネットワークポートの属性を表示します。</block>
  <block id="286fbbe010dacee8143fe129c976e8b1" category="paragraph">network port show -node node1</block>
  <block id="161c64322f806c6fa66fcfcc4f963ca2" category="list-text">ノードをブートメニューでブートします。</block>
  <block id="17137d920db60e7b0b7bfb0be3579b56" category="list-text">ブートメニューのプロンプトで「 wipeconfig 」と入力し、 Enter キーを押します。</block>
  <block id="b14047e1956c68f095842760b1beaea2" category="paragraph">次の画面はブートメニューのプロンプトを示しています。</block>
  <block id="d4041bfba261eda3180ae9fbf6285d95" category="list-text">次のようなプロンプトが表示されたら 'yes' と入力します</block>
  <block id="8b8e41e588d3f28837be58712aeec25a" category="paragraph">システムは wipeconfig 手順を起動し、再起動します。手順が完了すると、システムはブートメニューに戻ります。</block>
  <block id="72992cc1c16f1dbbbcb7cc77a55977d9" category="list-text">advanced 権限レベルに切り替えます。</block>
  <block id="dc4a67b269dfaba9479198e3f11a2a68" category="list-text">イプシロンが設定されたノードを特定します。</block>
  <block id="9f964a34bab4b3112781e0b28258f5bb" category="paragraph">次の例では、「 node0 」に現在イプシロンが設定されています。</block>
  <block id="7f1e916ec0aa6a4296149be58ba61a1b" category="list-text">クラスタにノードが 2 つしか残っていない場合は、 2 ノードクラスタのハイアベイラビリティを設定します。</block>
  <block id="c1f192f6d626bc5f27fc74b0848a1250" category="paragraph">cluster ha modify -configured true</block>
  <block id="3f1179e7186b307a8709f115c39b6447" category="summary">交換用ノードを稼働状態に戻す前に、 LIF がホームポートにあることを確認し、 AutoSupport が有効な場合は交換用ノードのシリアル番号を登録して、自動ギブバックをリセットする必要があります。</block>
  <block id="628b47858489e93aecb44f24bebc9752" category="doc">LIF を確認してシリアル番号を登録</block>
  <block id="462ec873925d8409f9ead354ff424e1b" category="list-text">論理インターフェイスがホームサーバとポートに報告されていることを確認します。「 network interface show -is-home false 」</block>
  <block id="d1197fe9a52f419575a145acccb941a2" category="paragraph">いずれかの LIF が false と表示されている場合は、ホームポートにリバートします。「 network interface revert *</block>
  <block id="bfe787834fd9e46156b1d62f2f5029f8" category="list-text">システムのシリアル番号をネットアップサポートに登録します。</block>
  <block id="bfa9de45095a3a90ebc55708a5ee6dd2" category="cell">状況</block>
  <block id="f5090af0ae9521298aea8ea3cd0e570f" category="paragraph">AutoSupport が有効になっている</block>
  <block id="494f202ae3a9c9ea2b452b55743f4c56" category="paragraph">AutoSupport メッセージを送信してシリアル番号を登録します。</block>
  <block id="f08f2281e0941651d12c9d63e01b3a7e" category="paragraph">AutoSupport が有効になっていません</block>
  <block id="8ba4d456a3db9d62662e21be8c9d6a65" category="paragraph">ネットアップサポートに連絡してシリアル番号を登録します。</block>
  <block id="073b364a34edc88074c1df13d44748dc" category="list-text">自動ギブバックを無効にした場合は、再度有効にします。「 storage failover modify -node local-auto-giveback true 」</block>
  <block id="cfc31108ced0d656186982f19a21b817" category="summary">新しいノードに内蔵ディスクまたはアドオンシェルフがシステムに接続されている場合は、コントローラのアップグレードが妨げられる可能性があります。node3 / node4 に付属した新しいディスクの所有権を削除するには、次の手順を実行します。</block>
  <block id="0384bfe1408e63aec8306b1fb36df994" category="paragraph">これらの手順は、 node3 と node4 に相互に実行します。ノードの順序は重要ではありません。</block>
  <block id="12750846be9d21d5385ed58a60cddf27" category="list-text">ノード 1 とノード 2 のシェルフは、この段階ではノード 3 とノード 4 に物理的に接続されていません。</block>
  <block id="db39a0ef5bc94a0b575d978a8f76229a" category="list-text">ディスク所有権を削除する必要があるのは、新しいコントローラが付属しているディスクとシェルフのみです。</block>
  <block id="9ec9f63f098d105f79f28fc374c9efa9" category="list-text">古いコントローラを内蔵ドライブプラットフォーム上の新しいコントローラと交換し、古いコントローラのシャーシとディスクを保持しながらハードウェアをアップグレードする場合、ディスクの所有権を削除する必要はありません。</block>
  <block id="70cb24dc68388db99857a34f097c9997" category="paragraph">コントローラのアップグレード中にディスク所有権を削除する方法について不明な点がある場合は、ネットアップテクニカルサポートにお問い合わせください。</block>
  <block id="bd6c6f37524ad70ce38bbd0fcea22fe4" category="list-text">ノードの LOADER プロンプトで、コマンドを入力します。</block>
  <block id="1d16d3ddc3b796c6db7da6cbb645757e" category="list-text">ブートメニュープロンプトで '9a' と入力して 'Enter キーを押します</block>
  <block id="8b33e54d0bef1c80ef3462386d101928" category="paragraph">次の画面はブートメニューのプロンプトを示しています。</block>
  <block id="543ee8d410a9846b897a6a8491f4e3b9" category="list-text">次のようなプロンプトが表示されたら、「 y 」と入力してディスク所有権を削除します。</block>
  <block id="d9eb47ff217ad0469ac1858d577a0cfb" category="paragraph">ディスク所有権が削除されてブートメニューに戻ります。</block>
  <block id="cfd1f1b088da29d35da848a99036f2c2" category="list-text">ブート・メニューで '5' を入力してメンテナンス・モードに切り替えます</block>
  <block id="c256ea1e274adba11cfac708ac1ca615" category="list-text">保守モードで、「 Disk show 」コマンドを実行します。</block>
  <block id="07073a18c7281a79e3145d79b79ade85" category="paragraph">表示されるディスクはないはずです。</block>
  <block id="549400d83d5a33165c1b78f09eaa13cd" category="list-text">コマンド： ' を実行します</block>
  <block id="b42167fc8c56e26bc5bde99cbcb98104" category="paragraph">「ディスクショー - A` 」</block>
  <block id="5057bd67c1c2576016193c2f0d132b9e" category="paragraph">未割り当てのディスクがすべて表示されます。</block>
  <block id="94a76ebba8e86706797afe6001140741" category="list-text">iSCSI イニシエータを使用している場合は、次の手順を実行します。</block>
  <block id="9882b7407728c4a51f28a203651b752e" category="paragraph">次の例は、 SVM vs1 に接続されたアクティブなイニシエータを使用したコマンドの出力を示しています。</block>
  <block id="2a81dce4a4ecbdb4f7260dfa1838dac6" category="list-text">元のノードにログインしているイニシエータがある場合は、ホストコンピュータからセッションをログアウトします。</block>
  <block id="493c466bbc1a048411e1332636aef467" category="list-text">ポートセットリストを表示して、元のノードの iSCSI LIF または FC LIF がポートセットに属しているかどうかを確認します。</block>
  <block id="5972ec667e5c2e5cbe773b47e490a953" category="paragraph">次に、「 lun portset show 」コマンドの出力例を示します。</block>
  <block id="d69982078792402e28116b8f58d9d635" category="list-text">元のノードのいずれかの iSCSI または FC LIF がポートセットのメンバーである場合は、ポートセットから削除します。</block>
  <block id="49804bf53ebb394c1046383af76de316" category="list-text">元のノードの LIF を削除します。</block>
  <block id="58822be5f616d4235e991fbe0296fada" category="doc">node1 で所有されている NAS データ LIF を node2 に移動します</block>
  <block id="79fcafddf2ef06a07412a35db15035c1" category="list-text">次のコマンドを入力し、出力をキャプチャして、 node1 でホストされているすべての NAS データ LIF を表示します。</block>
  <block id="612e04a0c9957c7f74e9d436ac270501" category="paragraph">次の例のように、 node1 に NAS データ LIF が表示されます。</block>
  <block id="423e99aaa66fb1d5698571ceb7787197" category="cell">ノード 1 の状況</block>
  <block id="9f5a5f99675a7cf2f4c0f632bd521264" category="cell">VLAN のインターフェイスグループが設定されている</block>
  <block id="3fbab376baacaf9d09315af900da3f6a" category="cell">に進みます <block ref="73988682af36d698a9ae8b48b9a2737d" category="inline-xref-macro-rx"></block>。</block>
  <block id="e47ea6851b10e922828b9e5bacc36c92" category="cell">インターフェイスグループまたは VLAN が設定されていない</block>
  <block id="8a083d04d78f8fe76f58b24395ba2022" category="cell">手順 3 を省略して、に進みます <block ref="beab2fdc7da05fb5989bf509ea2daea5" category="inline-xref-macro-rx"></block>。</block>
  <block id="4712f9e61b86338570c118282bc641ed" category="paragraph">「 network port vlan show 」コマンドを使用して、 VLAN に接続されたネットワークポートに関する情報を表示し、「 network port ifgrp show 」コマンドを使用してポートインターフェイスグループに関する情報を表示します。</block>
  <block id="6528b79560f5ae1516e9968be210a07d" category="list-text">[man_move_lif_1_2_step3] 次の手順を実行して、 node1 のインターフェイスグループおよび VLAN でホストされている NAS データ LIF を移行します。</block>
  <block id="8bd077e3dce2f8f220ab19459980af51" category="list-text">[man_move_lif_1_2_substpa ] インターフェイスグループおよび node1 の VLAN でホストされている LIF を、インターフェイスグループと同じネットワーク上の LIF をホストできる node2 のポートに移行します。そのためには、各 LIF に対して次のコマンドを 1 回入力します。</block>
  <block id="d280fa5d8e575828d8f638790f296c00" category="inline-xref">手順 a</block>
  <block id="1628d2e876b9a7ece7457b58b454f0f8" category="list-text">で、 LIF および VLAN のホームポートとホームノードを変更します <block ref="b068a71282806dafa110a592d499562a" category="inline-xref-macro-rx"></block> LIF をホストしているポートとノードに対して次のコマンドを 1 回入力します。</block>
  <block id="086b32c6a9769e491af04f596b7bfca4" category="list-text">[man_move_lif_1_2_step4] 次のいずれかの操作を実行します</block>
  <block id="9b9179b830c575fb1e672a3bed56f248" category="cell">クラスタの設定対象</block>
  <block id="c07ee5debf5f3a3fef16c1ee5e8e4942" category="cell">NAS</block>
  <block id="9db3a11cc23080bb3486b4959df93f89" category="cell">- 完了しました <block ref="6be540ebb4740a88748088c797e28dfb" category="inline-xref-macro-rx"></block> から <block ref="8c4818d75222cc6bc9243f323ca4103f" category="inline-xref-macro-rx"></block>。</block>
  <block id="edb9ff92dd35aa076c32a5b0487cf528" category="list-text">[[man_move_lif_1_2_step5] 各データ LIF に対して次のコマンドを 1 回入力して、 NAS データ LIF を node1 から node2 に移行します。</block>
  <block id="011613a251d2244827057c36e226c438" category="list-text">[[step6] ] 次のコマンドを入力し、その出力を調べて、 LIF が正しいポートに移動されていること、およびいずれかのノードで次のコマンドを入力して LIF のステータスが up になっていることを確認します。</block>
  <block id="0ca2ea33efb8a577e5384d4a18adcffd" category="list-text">[[step7] 次のコマンドを入力して、移行された LIF のホームノードを変更します。</block>
  <block id="54c8107ec5763757535759e84fcccba4" category="inline-xref">手順 9</block>
  <block id="24a01d225f607904f05ab3a7a5eff1be" category="list-text">[man_move_lif_1_2_step8] LIF がホームまたは現在のポートとして使用しているかどうかを確認しますポートがホームでない場合や現在のポートでない場合は、に進みます <block ref="ba7153f88da2aa27ea58156672491fe1" category="inline-xref-macro-rx"></block>：</block>
  <block id="2a1a5d0b34f7d2f4f340e16e5ed9d90a" category="list-text">[man_move_lif_1_2_step9] LIF がホームポートまたは現在のポートとしてポートを使用している場合は、別のポートを使用するように LIF を変更します。</block>
  <block id="cdae0f8302333cbd9fe195bb2499a162" category="list-text">[[step10] ] 現在ホストしているデータ LIF をホストしているポートが新しいハードウェアに存在しないようにする場合は、すぐにブロードキャストドメインから削除します。</block>
  <block id="6632ea124419e4975a848a28ab279bcc" category="list-text">[[step11]] いずれかの LIF が停止している場合は、各 LIF に対して次のコマンドを 1 回入力して、 LIF の管理ステータスを「 up 」に設定します。</block>
  <block id="1f6fa329d299f0b4d14f73ea128a6b26" category="list-text">[[step12]] 次のコマンドを入力し、その出力を調べて、 node1 にデータ LIF が残っていないことを確認します。</block>
  <block id="317d3198e2e906761f5856d7e9ba7889" category="list-text">[[step13]] インターフェイスグループまたは VLAN が設定されている場合は、次の手順を実行します。</block>
  <block id="bdb96da2d8e74dfce89eef174e77991a" category="list-text">[[man_install4_Step1] 次のいずれかの操作を行います。</block>
  <block id="668ee630125cb736935532180dec5496" category="cell">ノード 4 の配置先</block>
  <block id="162e71035e50cc882a8bc6f9ff5b49f2" category="cell">ノード 3 とは別のシャーシ</block>
  <block id="fd915b6d9d7d8df5863bf1a398fcf38a" category="cell">に進みます <block ref="5da993404245519b124ccd5cfdc8f96e" category="inline-xref-macro-rx"></block>。</block>
  <block id="517089a54c66f01f0ee8cb8683dad1ec" category="cell">同じシャーシを node3 と一緒に配置する</block>
  <block id="9a56a499535dc46c81b504689b6f1584" category="cell">手順 2 と 3 を省略して、に進みます <block ref="d70dd93eaf2d4e4f4bee874c28b01d22" category="inline-xref-macro-rx"></block>。</block>
  <block id="409539264ec665ff1676a423db4f5983" category="list-text">[[man_install4_Step2]] ノード 4 に十分なラックスペースがあることを確認します。</block>
  <block id="b8b0bf4a502958083dc62a5c96442944" category="paragraph">node4 と node3 が別々のシャーシにある場合は、 node4 を node2 と同じ場所に配置できます。node3 と node4 が同じシャーシにある場合は、 node4 が適切なラックの場所にすでに存在しているとします。</block>
  <block id="b2a26edcdea9e0bc9d1a1f149aaa56af" category="list-text">[[man_install4_Step4]] ケーブルノード 4 を接続し、ノード 2 からノード 4 に接続を移動します。</block>
  <block id="9f13bb9f267a0b057f115598b95b4a04" category="paragraph">次の参考資料は、適切なケーブル接続を行う場合に役立ちます。に進みます <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックしてリンクします。</block>
  <block id="19c5c8c6d8397114c1994a6c3eb88f1f" category="paragraph">次の配線を行います。</block>
  <block id="6b3c36f97ba6ae6e5b790f8c06f76595" category="admonition">ほとんどのプラットフォームモデルには一意のインターコネクトカードモデルがあるため、インターコネクトカード / FC-VI カードまたはインターコネクト / FC-VI ケーブルの接続を node2 から node4 に移動する必要はありません。</block>
  <block id="7c6dcbfbd814e3914af912fc227236db" category="cell">ノード 4 の構成</block>
  <block id="0eac7849b27808b92dfd85fd93d5adf9" category="cell">ノード 3 と同じシャーシ</block>
  <block id="ebfef1d5b820c6361e45e99afc605aff" category="cell">に進みます <block ref="4b3dcb4f5ad67f2f001c91135169a837" category="inline-xref-macro-rx"></block>。</block>
  <block id="23651fb868295760fbf6e0040b0debb0" category="cell">に進みます <block ref="38932d9b2776291a7bec718b723ae495" category="inline-xref-macro-rx"></block>。</block>
  <block id="2533698a45ba6cab05df3bd9337b544f" category="admonition">node4 をブートすると、次のメッセージが表示される場合があります。</block>
  <block id="6904f97422da010c9982167637cc6d56" category="list-text">[[man_install4_Step7] ステップ 6 で警告メッセージが表示された場合は、次の操作を実行します。</block>
  <block id="abb5e8621f032d746c9aa9b35f472595" category="list-text">NVRAM バッテリ低下以外の問題を示すコンソールメッセージがないか確認し、必要に応じて対処します。</block>
  <block id="8ece0169cd074b513037985b1656b1cd" category="list-text">バッテリの充電と起動プロセスが完了するまで待ちます。</block>
  <block id="fb89a7ef586904dc37e09f10f3f0ec64" category="inline-xref">手順 15</block>
  <block id="2f31b93de57cc6e92ee38aaed9b49765" category="paragraph">ブート環境プロンプトが表示されます。</block>
  <block id="9b30a77b62fcc76d557f789dd6ce3167" category="list-text">ONTAP のノード 4 を設定します。</block>
  <block id="c769624c49a19cf249ae2dabe50fafd5" category="list-text">ノード 4 にインストールされている ONTAP のバージョンが node2 にインストールされている ONTAP 9 と同じかそれ以降の場合は、次のコマンドを入力します。</block>
  <block id="648ad8a1b1818127b7b933420429d236" category="cell">アップグレードするシステム</block>
  <block id="bd525e59dc1c481092f22bdaeff4a9cb" category="cell">ノード 4 に正しい ONTAP バージョンまたは現在の バージョンがない</block>
  <block id="9b66895c756fece1df6c42e12763649b" category="cell">ノード 4 の ONTAP のバージョンが正しいか、最新のバージョンであることが必要です</block>
  <block id="a1e9c2458084c8aed432506005e0789e" category="cell">netboot\http://web_server_ip/path_to_webaccessible_directory/netboot/kernel`</block>
  <block id="7e0c898eb7a2157f9a4fe767ff353ea1" category="cell">netboot\http://web_server_ip/path_to_webaccessible_directory/ontap_version_image.tgz`</block>
  <block id="feed6e71880a4cdb6f484b72b59ad1c7" category="paragraph">「 path_to_the_web-accessible_directory 」は、「 ONTAP_version_image.tgz 」をダウンロードした場所を指します <block ref="d7ca8bd1bdacba48998a89c59527e756" category="inline-link-macro-rx"></block> の項で、 netboot_ の準備を参照してください。</block>
  <block id="309791cba48d347af2b367032b3dd97b" category="list-text">起動メニューから 'option(7) Install new software first ’を選択します</block>
  <block id="0b2229e3a518ca5320ae9e1f22775ad9" category="paragraph">このメニューオプションを選択すると、新しい Data ONTAP イメージがブートデバイスにダウンロードおよびインストールされます。</block>
  <block id="c0c1ca8a9ddeae72e1e2be38243a2522" category="paragraph">次のメッセージは無視してください。</block>
  <block id="52e732ba64db04aee6e7ad74ff701940" category="paragraph">コントローラのアップグレードではなく、 Data ONTAP による環境の無停止アップグレードも記録されています。</block>
  <block id="3649c3b28305249c1b3207c6087eaedc" category="list-text">[man_install4_step23]] 手順を続行するかどうかを確認するメッセージが表示されたら、 y を入力します。パッケージの入力を求められたら、次の URL を入力します。</block>
  <block id="ad4f522a516d9a5742a3b1abdd5d7e77" category="paragraph">http://web_server_ip/path_to_web-accessible_directory/ontap_version_image.tgz` にアクセスします</block>
  <block id="3678fe02acf5ec3ff8f4fbebc3fd7a4d" category="list-text">次の手順を実行します。</block>
  <block id="037fcad07615e2da823be3a48a35cfb8" category="paragraph">コントローラモジュールはリブートしますが、ブートメニューで停止します。これは、ブートデバイスが再フォーマットされたことにより、構成データのリストアが必要なためです。</block>
  <block id="7e3544f15733cd05bc2830419b4be7f9" category="list-text">次のコマンドを入力し、出力を調べて node4 のシステム ID を特定します。</block>
  <block id="4e974a66c77c6d900d32abc8f0338440" category="paragraph">次の例に示すように、ノードのシステム ID 、およびそのディスクに関する情報が表示されます。</block>
  <block id="fae986fa29654ebe6966932d05eb132d" category="inline-link-macro">ルート以外のアグリゲートを node2 から node3 に再配置します。</block>
  <block id="6ebd270373edc34882879e2c2ed9e67b" category="list-text">ノード 2 のスペア、ルートに属するディスク、および前のセクションでノード 3 に再配置されなかったルート以外のアグリゲートを再割り当てします <block ref="2eb3ddacc3cdbca929068de80db9b0b7" category="inline-link-macro-rx"></block>：</block>
  <block id="f6083059f6516202ed7ac1092bed861b" category="cell">ディスクタイプ</block>
  <block id="65f83791dfc3308f8c98325d44977d10" category="cell">実行するコマンド</block>
  <block id="8e209d660098d73b07642a1950888f1d" category="cell">共有ディスクの場合</block>
  <block id="567c7db5eb132ed0419b894d763f1872" category="cell">共有なし</block>
  <block id="b95982609bcaa66a9948629f87fe8589" category="inline-link-macro">手順 10</block>
  <block id="2e55dc5dee1972467c8f86adee9b26a8" category="admonition">-p オプションは ' 共有ディスクが存在する場合にのみ保守モードで必要です</block>
  <block id="6a76a1a5611a7cd78d175bb62eecc5c0" category="paragraph">次のメッセージが表示されます。</block>
  <block id="685b8dfe5883c0cc4f183236c52e6cdd" category="paragraph">ディスクの再割り当てを中止するかどうかを尋ねられたら 'n' を入力します</block>
  <block id="c8baecc7560f46020b0d73d658566eab" category="paragraph">ディスクの再割り当てを中止するように求められた場合は、次の手順に従って一連のプロンプトを回答に出力する必要があります。</block>
  <block id="906012ab50dee220a65fb1458eb58128" category="list-text">ディスク所有権の更新を許可するには 'y' を入力します</block>
  <block id="81d274af1a54983c64b259dfc78b1c9f" category="admonition">* 警告：次の手順を記載された順序で実行する必要があります。正しく実行しないと、原因が停止したり、データが失われたりする可能性があります。 *</block>
  <block id="1ca7ffcdba47b0e1e7fe67ed3e918c17" category="list-text">node2 アグリゲートの全体的なステータスを確認します。</block>
  <block id="9cf332fc3e49cdbc8c4e5181c30ae161" category="list-text">次のコマンドを入力し、出力を確認して、コントローラとシャーシが「 ha 」として設定されていることを確認します。</block>
  <block id="af2a502808ef81f73370e9e64784659d" category="paragraph">システムは、 HA ペア構成かスタンドアロン構成かを PROM に記録します。状態は、スタンドアロンシステムまたは HA ペア内のすべてのコンポーネントで同じである必要があります。</block>
  <block id="92435116502eec5121875eb86e01c666" category="paragraph">コントローラとシャーシが「 ha 」として設定されていない場合は、次のコマンドを使用して設定を修正します。</block>
  <block id="2e89fd69efdc517bb6463b3444e009df" category="paragraph">「 ha-config modify chassis ha 」を参照してください。</block>
  <block id="efa973aed3146abf01226e85a9e5f816" category="paragraph">MetroCluster 構成を使用している場合は、次のコマンドを使用して設定を修正します。</block>
  <block id="27dae2ee8e632216c89579f651774f45" category="paragraph">「 ha-config modify chassis mcc 」</block>
  <block id="79d038b849b0e37c67ee77c0b56d066f" category="list-text">node4 にあるメールボックスを破棄します。</block>
  <block id="953d8f613cc775b0d7904f99aec7a052" category="list-text">ノード 3 で、システムの日付、時刻、およびタイムゾーンを確認します。</block>
  <block id="e3f03a007dc36d2b8067017bfe222275" category="list-text">ノード 4 で、ブート環境プロンプトの日付を確認します。</block>
  <block id="02bb70865b20c57eb319b73c84b5fd7f" category="list-text">ノード 4 で、ブート環境プロンプトの時刻を確認します。</block>
  <block id="6f690bd73c9853fafd7c1e4456ccea21" category="inline-xref">手順 26</block>
  <block id="0f463f9540d67b2794aa78893f83b8aa" category="list-text">ブート環境プロンプトでブートメニューを入力します。</block>
  <block id="ca0b24352c36c0cc73393a18e38ead22" category="list-text">ブート・メニューで ' プロンプトに「 6 」と入力して 'Option *(6) Update flash from backup config * を選択します</block>
  <block id="23fc33b520f7242c5f2fb610689e9e8c" category="list-text">プロンプトで「 y 」と入力します。</block>
  <block id="d9f991b0b3aa3c03080efb5d84a35c57" category="paragraph">ブートが正常に続行され、システム ID の不一致を確認するように求められます。</block>
  <block id="88d91937c0736919ae3483a3cb1e1f7e" category="admonition">不一致の警告が表示される前にシステムが 2 回リブートする可能性があります。</block>
  <block id="c3a51f505b0a44650db3707558ddeefc" category="list-text">不一致を確認します。正常にブートする前に、ノードの 1 回のリブートが完了することがあります。</block>
  <block id="cc7dd78f409b3f942015e8a65f2c11e8" category="list-text">ノード 4 にログインします。</block>
  <block id="530a7a6682d1262288d095a4aa2ae42b" category="summary">ARL のアップグレードワークフロー</block>
  <block id="1952abc535fabeeeed9743b9b39b5e18" category="paragraph">次の図は、手順の各ステージを示しています。濃い薄いグレーの矢印はアグリゲートの再配置と LIF の移動を表し、薄い黒い矢印は元のノードの削除を表します。元のノードは小規模なコントローライメージで表しており、大規模なコントローライメージが新しいノードを表しています。</block>
  <block id="5191d5caf73991c5e6249017d138d1c4" category="inline-image-macro">ARL 手順の各ステージを示す図</block>
  <block id="259768fa3d43366eeb4e13b056365613" category="paragraph"><block ref="259768fa3d43366eeb4e13b056365613" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7b943baeaf962c0831949aad447620ea" category="paragraph">次の表に、各フェーズで実行するタスクの概要と、そのフェーズの最後で実行したアグリゲートの所有権の状態を示します。詳細な手順については、手順の後半で説明します。</block>
  <block id="b72f5020c23dbd9ffc6d4450f84ec5f3" category="cell">ステージ 1 ：アップグレードの準備</block>
  <block id="c315bb47606529cfc4eee6fee9473961" category="cell">ステージ 2 ： node1 を廃棄する</block>
  <block id="131c1215f55f2db7a9cee6671cd5a15c" category="list-text">node1 は、 node1 アグリゲートのホーム所有者です。</block>
  <block id="34c13ce480fd28c643a03477e436ea69" category="cell">ステージ 3 ：ノード 3 をインストールしてブートします</block>
  <block id="6bcc99fe1628db9ec14216040c21696b" category="list-text">node2 は node2 アグリゲートのホーム所有者ですが、現在の所有者ではありません。</block>
  <block id="96823812e251fed8294451535c6f95b0" category="list-text">node3 は、 node1 にもともと属していたアグリゲートのホーム所有者および現在の所有者です。</block>
  <block id="118095c680df28bffff023170d56342d" category="list-text">node2 には、ホームの所有者とホームの所有者ではなく、 node2 に属するアグリゲートの現在の所有者が指定されます。</block>
  <block id="b38e1811a17ec144866f464ed239210b" category="cell">ステージ 4 ： node2 を廃棄する</block>
  <block id="fade32ca4e9efe2a0861758d027705e9" category="paragraph">アグリゲートの所有権は変更されません。</block>
  <block id="6c02f76a0894d55a982cb5450ab57f22" category="cell">ステージ 5 ：ノード 4 をインストールしてブートします</block>
  <block id="f76e06dd184bc4ee38bfcca355bec6fd" category="cell">ステージ 6 ：アップグレードを完了する</block>
  <block id="ac9d5901ac51a7a9e98d7f8c6c0740f1" category="cell">クラスタの種類</block>
  <block id="318bbb9db21483c1e16d2e2dbe7f1651" category="cell">2 ノードクラスタ</block>
  <block id="34d4031d3d37d8d9b80a5f9b450de553" category="cell">に進みます <block ref="1cb6f5a9f7eef3599c4443318664abfe" category="inline-xref-macro-rx"></block>。</block>
  <block id="5e674106f615dae34230d16b22371cb8" category="cell">に進みます <block ref="0bbd9dc76625f42ec6de8739e60cb44f" category="inline-xref-macro-rx"></block>。</block>
  <block id="b2af6e76142ed067163cd5edf51978b0" category="list-text">[[man_リタイヤ _2_Step2] 両方のノードで次のコマンドを入力して、 advanced 権限レベルにアクセスします。</block>
  <block id="1626aa8f9ba900c076affceeaaad8930" category="list-text">次のコマンドを入力し、出力を確認して、クラスタ HA が無効になっていることを確認します。</block>
  <block id="485e8bd9380904feaa09d87fa46616ff" category="paragraph">cluster ha show</block>
  <block id="35df860936da8d9b2d5477ee7413fdee" category="list-text">node2 にイプシロンが設定されているかどうかを確認するには、次のコマンドを入力して出力を調べます。</block>
  <block id="7d25068d39532ede875f6fae939c62aa" category="paragraph">次の例では、 node2 にイプシロンが設定されています。</block>
  <block id="7b8424ae8ebc04e308b8d348d8d07edf" category="list-text">node2 にイプシロンが設定されている場合は、ノードにイプシロンを「 false 」として設定して、ノードを node3 に転送できるようにします。</block>
  <block id="9b3ca02a7473e1db3c0c57693a01aabe" category="list-text">node3 の epsilon true とマークを付けて、イプシロンを node3 に移動します。</block>
  <block id="0bd1c8991d4969dac07a0c2f2dde50b5" category="paragraph">network options switchless-cluster show</block>
  <block id="b7a9c811aab8e6da8894f06c47eec709" category="list-text">[[man_detup_2_Step9] 管理者レベルに戻ります。</block>
  <block id="befba560e8eaef2f66cac914b95edc61" category="list-text">ノード 2 が完全にシャットダウンしたら、シャーシまたはラックからノードを取り外します。アップグレードの完了後に、 node2 の運用を停止できます。を参照してください <block ref="6e48b929ca0767f00c15eeb6d7e78755" category="inline-link-macro-rx"></block>。</block>
  <block id="1a378d96df8037e2d0440e83a971d50b" category="inline-link-macro">コントローラの内蔵ディスクドライブにアグリゲートがあるかどうかを確認します</block>
  <block id="5bfe738b0f48a11f74df0b195987ecb0" category="inline-link-macro">SnapMirror 関係を休止します</block>
  <block id="c25935ce11d9d76fca75e6795d090984" category="list-text">MetroCluster 9.5 以前を実行している Fabric ONTAP 4 ノードおよび 8 ノード構成を使用するシステムがある。</block>
  <block id="9d5a474aaa552210ff0298949aeb6c0a" category="cell">必要な情報</block>
  <block id="7fe24adf461d2bb8561714f2d23dc1a8" category="cell">収集されるタイミング</block>
  <block id="6eb41a5158360001c1c3220e5b835719" category="cell">使用時</block>
  <block id="46f0a08ed8c916f4c012866457f2c3c5" category="cell">収集された情報</block>
  <block id="58e005b13052724c67a7a029375b81e6" category="cell">元のノードのモデル、システム ID 、シリアル番号</block>
  <block id="98de75a555a47984f815060d1cb202f6" category="cell">ステージ 1 ： _ アップグレードのためのノードを準備します</block>
  <block id="96a7b0dc109f4a220518540bd844100f" category="cell">ステージ 3 ： _ インストールとブート node3 _ ステージ 5 ： _ インストールとブート node4 _ ステージ 6 ： _ 古いシステムの運用を停止します</block>
  <block id="53e14d7212592e557eb0045b4f222c00" category="cell">シェルフとディスクの情報、フラッシュストレージの詳細、メモリ、 NVRAM 、アダプタカードが元のノードにあります</block>
  <block id="6b13a963976d4b8d2fbc2b61b03cb419" category="cell">ステージ 1 ： _ アップグレードのためのノードの準備</block>
  <block id="9c17c7bcbc4a33e8adf5afdd66b5ddfc" category="cell">手順全体</block>
  <block id="81c61f27d311b6c30ec668cf353ea1de" category="cell">元のノード上のアグリゲートとボリュームをオンラインにします</block>
  <block id="94359ed6e12b4ed191d93ab756e3edc7" category="cell">手順では、短時間の再配置を除き、アグリゲートとボリュームがオンラインのままであることを確認できます</block>
  <block id="7fe437ad7bf96c159fda41c06deb8257" category="cell">コマンド「 network port vlan show 」および「 network port ifgrp show 」の出力</block>
  <block id="6df8f51a4f207a8aec19520cbafdafd9" category="cell">ステージ 3 ： _ ノード 1 のポートを node3 ステージ 5 ： _node2 のポートを node4 に再割り当てする</block>
  <block id="0cefe51dc41d2718e2eb5823909bbc12" category="cell">（ SAN 環境のみ） FC ポートのデフォルト設定</block>
  <block id="f7a78d2e3df99d48acd611b5ebd92bff" category="cell">新しいノードで FC ポートを設定する</block>
  <block id="72a91a015e8c747a5a63794308310840" category="cell">SP の IP アドレス</block>
  <block id="e3d8433cfe5569460492707086339074" category="cell">ライセンスキー</block>
  <block id="234cfc2e3636ba2a3e5d47da84d5bd32" category="cell">ステージ 1 ： _ ストレージ暗号化のディスクのキーを変更 _</block>
  <block id="a6bab46fa807f06174c4873c5331a9b2" category="cell">ステージ 6 ：新しいノードでのストレージ暗号化のセットアップ _</block>
  <block id="09c90f884edd2efc00874f9fc863daeb" category="cell">Web にアクセスできるディレクトリの名前とパス。ノードをネットブートするためにファイルをダウンロードします</block>
  <block id="8d880de8591f29262b623575d315d6f9" category="cell">ステージ 1 ： _ netboot_ への準備</block>
  <block id="8308cf8c26a7dcc26ef279edbb2465b2" category="cell">ステージ 3 ： _ インストールとブート node3 _ ステージ 5 ： _ インストールとブート node4 _</block>
  <block id="55b2136ebb20d11fca61578e034c0825" category="cell">SAN 以外のデータ LIF は node1 で所有されています</block>
  <block id="36f18a42c47c1ba2b97c49f28fb8814c" category="cell">ステージ 2 ： _ ノード 1 が所有する Nonsan データ LIF を node2 に移動します</block>
  <block id="ffab931268e5c5e23eb65969fdc5d778" category="cell">の後半で説明します</block>
  <block id="baac9a78080d05f11c33a3240628d4f8" category="cell">クラスタポート、クラスタ間ポート、ノード管理ポート、クラスタ管理ポート、物理ポート</block>
  <block id="bd1e8b7ddd738e8d113d4887d3f4bba6" category="cell">ステージ 2 ： _ ノード 1 の情報を記録 _</block>
  <block id="5f7558f445c484b7024a112b18c200a6" category="cell">ステージ 3 ： _ インストールとブート node3 _ ステージ 3 ： _ ポートを node1 から node3 _ にマッピングします</block>
  <block id="7712e1e9d181323ad2123bf3c1218513" category="cell">新しいノードのポートを指定します</block>
  <block id="dcfac71d6abccba3c94c782790822f55" category="cell">ステージ 3 ： _ ポートを node1 から node3 にマッピングします</block>
  <block id="1f2d038d966e575c88681d78a0b7e550" category="cell">の後半のセクションと section_Map ポート（ node2 から node4 への）</block>
  <block id="968d71039e6cb3f4f7f4aa7223382c8f" category="cell">ノード 3 の使用可能なポートとブロードキャストドメイン</block>
  <block id="621f6a9e04692c2889f288c336e29c97" category="cell">SAN 以外のデータ LIF は node2 で所有されていません</block>
  <block id="8600c3328f8a228f306c6d5830a2576c" category="cell">_ ノード 1 に属する SAN 以外のデータ LIF をノード 2 からノード 3 に移動し、 node3 の SAN LIF を確認します</block>
  <block id="5da569cf0c9cfab6143aa1456b0d2b27" category="cell">ノード 2 が所有する SAN 以外のデータ LIF です</block>
  <block id="792578ec3edacbf85c56d7d346753a2f" category="cell">ステージ 3 ： _node2 によって所有されている Nonsan データ LIF を node3 に移動します</block>
  <block id="53c29bbede61f5ab1245941503af76c4" category="cell">ステージ 4 ： _ ノード 2 の情報を記録 _</block>
  <block id="979b8628aef26052c5b8843be52e1fa9" category="cell">ステージ 5 ： _ node4 ステージ 5 ： _ ノード 2 から node4 にポートをマッピングしてブートする</block>
  <block id="a992103a413243514b1fe86c6db582f6" category="cell">ノード 4 のクラスタネットワークポート</block>
  <block id="f2805ed5889ac7ba2f7220a38fc00350" category="cell">ステージ 5 ： _node2 のポートを node4 にマップする</block>
  <block id="ba9d984599b9d029b2fc827939de2324" category="cell">ノード 4 の使用可能なポートとブロードキャストドメイン</block>
  <block id="9b978a712974278ab5f3f7e894871a48" category="cell">ストレージシステムのプライベート SSL 証明書とパブリック SSL 証明書、および各キー管理サーバのプライベート SSL 証明書</block>
  <block id="d22f146c49d95d305653bf62234fdbc9" category="paragraph">新しいノードのポートに関する情報を Hardware Universe から取得しておく必要があります。に進みます <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、 Hardware Universe にリンクします。この情報は、このセクションおよびの後半で使用します <block ref="fface1ac702bde6d72ceb6e55eb8b2b6" category="inline-link-macro-rx"></block>。</block>
  <block id="a7e55a2eda4d6d9856ad9438d37fbed0" category="paragraph">そのため、 node1 の物理ポートが node3 の物理ポートに直接マッピングされていない場合は、ブート後にクラスタ、管理、およびネットワーク接続をリストアするためにソフトウェア設定の変更が必要になります。また、ノード 1 のクラスタポートがノード 3 のクラスタポートに直接マッピングされていないと、ノード 3 は、正しい物理ポートでクラスタ LIF をホストするソフトウェア設定が変更されるまで、リブート時にクォーラムに自動的に再参加しないことがあります。</block>
  <block id="cbf79efe25579eb8669620f8a705d90c" category="list-text">[[step1] ノード 1 、ポート、ブロードキャストドメイン、 IPspace のすべてのケーブル接続情報を次の表に記録します。</block>
  <block id="2a04e456c6cc4811fe58e125c72d102f" category="cell">ノード 1 のブロードキャストドメインです</block>
  <block id="a73f157295775ec357e4cbb83394837d" category="cell">クラスタ 5</block>
  <block id="f8b0e66f09382485306db5e1ba20e4fc" category="cell">クラスタ 6</block>
  <block id="8ebc8c8801836bd409313dd264bebb92" category="inline-link-macro">ノード 1 の情報を記録します</block>
  <block id="032db7a5ba2209ef2a98f177b97ef9c0" category="paragraph">を参照してください <block ref="111c70a978efb37ba3bd0ea564da1d79" category="inline-link-macro-rx"></block> を実行して、この情報を取得します。</block>
  <block id="d6fd23476a280d6343ba76f013c499fd" category="list-text">[step2] node3 のすべてのケーブル接続情報、ポート、ブロードキャストドメイン、および IPspace を、の同じ手順を使用して前のテーブルに記録します <block ref="111c70a978efb37ba3bd0ea564da1d79" category="inline-link-macro-rx"></block>。</block>
  <block id="db8e77631790a3f2f7e9e65f99e95d55" category="list-text">[[step3]] 以下の手順に従って、セットアップが 2 ノードのスイッチレスクラスタであるかどうかを確認します。</block>
  <block id="64544217a0060d8a47ba296eaa9eda15" category="list-text">[[step4]] 次の手順を実行して、ノード 3 をクォーラムに参加させる。</block>
  <block id="e20f03b7201e18349c5baa3209b997a6" category="paragraph">次の例は、ポート「 e0a 」が node3 の「 Cluster 」ドメインにあることを示しています。</block>
  <block id="8d39e79fe126ab08c8533329b616fed4" category="admonition">MetroCluster 構成の場合、ポートのブロードキャストドメインを変更できないことがあります。これは、同期先 SVM の LIF をホストしているポートに関連付けられており、のようなエラーが表示されますが、次のメッセージに制限されないためです。</block>
  <block id="8b3323601551341609485df18e91de19" category="paragraph">リモートサイトの対応する同期元 SVM から次のコマンドを入力して、同期先の LIF を適切なポートに再割り当てします。</block>
  <block id="3db1cb9c339f5db3439420bdee3c086f" category="list-text">クラスタポートが Cluster broadcast-domain にない場合は、追加します。</block>
  <block id="7da7933fdddd6ba0e6adfac1eb9d1672" category="paragraph">次の例は、ノード 3 のポート「 e0d 」を削除します。</block>
  <block id="a84cdc90d98c6148502139e8da567ade" category="list-text">[man_map_1_step6] 必要に応じて、に示す同じコマンドを使用して、クラスタ間ブロードキャストドメインを調整し、クラスタ間 LIF を移行します <block ref="4c0abef6869b6cad04a71c175246f8ab" category="inline-xref-macro-rx"></block>。</block>
  <block id="15d8a3fb33ef05850a50f8685a3b3c02" category="list-text">[[step7] 必要に応じて、に示す同じコマンドを使用して、他のブロードキャストドメインを調整してデータ LIF を移行します <block ref="4c0abef6869b6cad04a71c175246f8ab" category="inline-xref-macro-rx"></block>。</block>
  <block id="3eed5b0c094ac012f4929ba5382bf4dd" category="list-text">[[step8] 、ノード 3 に存在しないポートが node1 にある場合は、次の手順に従って削除します。</block>
  <block id="5eb3a6c1204974756e1a1ba11f2ec598" category="list-text">ポートを削除します。</block>
  <block id="f063d629ff68f957f5da6e6d4a1024c5" category="list-text">[[step9] すべての LIF フェイルオーバーグループを調整します。</block>
  <block id="b9ce0c55aad8eead03f3c1634c34732f" category="paragraph">次の例は、フェイルオーバーポリシーを「 broadcast-domain-wide 」に設定し、フェイルオーバーグループ「 fg1 」のポートを「 node3 」の LIF 「 data1 」のフェイルオーバーターゲットとして使用します。</block>
  <block id="cb01034aedc70b6d88070cceb3ec5fd6" category="doc">ノード 2 の情報を記録します</block>
  <block id="06482362cad7119c97decfadddef47d1" category="list-text">ノード 2 のクラスタネットワークポート、ノード管理ポート、クラスタ間ポート、およびクラスタ管理ポートを特定します。</block>
  <block id="9581ef2fce7ca5bef124feac72dd7c62" category="paragraph">次の例に示すように、クラスタ内のそのノードと他のノードの LIF が表示されます。</block>
  <block id="db388cc11af248e636d23a7634f79da1" category="list-text">セクションで使用する情報を出力に記録します <block ref="fface1ac702bde6d72ceb6e55eb8b2b6" category="inline-link-macro-rx"></block>。</block>
  <block id="d852fb2583585e10c3885982eaf29670" category="paragraph">出力情報は、新しいコントローラポートを古いコントローラポートにマッピングするために必要です。</block>
  <block id="b226d44baee1fdcf5f175befc4240f79" category="list-text">node2 の物理ポートを特定します。</block>
  <block id="a36b8ceea3403515d94e1d9ad1d33833" category="paragraph">次の例に示すように、 node2 の物理ポートが表示されます。</block>
  <block id="e39f84c1a169d8d90af9c95f44865bc0" category="list-text">ポートとそのブロードキャストドメインを記録します。</block>
  <block id="1a494d33f95411ce2d7f871e87234bb6" category="paragraph">ブロードキャストドメインは、あとで手順の新しいコントローラのポートにマッピングする必要があります。</block>
  <block id="36d2ce7941b2c78c3d67d83e5bab95ab" category="list-text">node2 の FC ポートを確認します。</block>
  <block id="922cfc273cc764471719b8a70b2bd795" category="paragraph">「 network fcp adapter show 」のように表示されます</block>
  <block id="e2ce1c0ee0599997916e05613833e82e" category="paragraph">次の例に示すように、 node2 の FC ポートが表示されます。</block>
  <block id="f33b448fa0bb738f614e66795ee372d4" category="list-text">ポートを記録します。</block>
  <block id="183e98aa2a84c4dee16223d4c260f2ce" category="paragraph">出力情報は、手順の後半で新しいコントローラの新しい FC ポートをマッピングするために必要です。</block>
  <block id="f30296e85c9b7a573f431b89a15b6b93" category="list-text">まだ設定していない場合は、 node2 にインターフェイスグループまたは VLAN が設定されているかどうかを確認します。</block>
  <block id="9e650495d6414abbc47ea05fdc36dd7e" category="paragraph">ifgrp show`</block>
  <block id="35803428da21a4a214ff09f1442e2f58" category="paragraph">「 vlan show 」</block>
  <block id="15fb68f8a892a3ed6a57c8b5eca53ec5" category="paragraph">このセクションの情報を使用します <block ref="fface1ac702bde6d72ceb6e55eb8b2b6" category="inline-link-macro-rx"></block>。</block>
  <block id="61a6d655671eebbd633c1d84fae09e17" category="cell">状況</block>
  <block id="1f7052fd85a8ced9cd9c65f079fcb154" category="cell">に記録された NVRAM システム ID 番号 <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block></block>
  <block id="65e4801fe9cb3563a071b657463a3c1c" category="cell">に進みます <block ref="610cb2d6e87c5e838ceef8f48f57b082" category="inline-link-macro-rx"></block>。</block>
  <block id="30183fbd349bcd94fdabd371e0fdc8d9" category="cell">NVRAM システムの ID 番号をに記録しませんでした <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block></block>
  <block id="b31b744fd8c5cbe34c282a8e3311866b" category="cell">- 完了しました <block ref="3ef612fafd35c4ea98dad97a133c5f3f" category="inline-xref-macro-rx"></block> および <block ref="a3461a8cfeac3856b6bf21e7388f2534" category="inline-xref-macro-rx"></block> 次に、次のセクションに進みます。 <block ref="610cb2d6e87c5e838ceef8f48f57b082" category="inline-link-macro-rx"></block>。</block>
  <block id="5d34eef64c7b53994a7dde374d44b94b" category="paragraph">「 system node show -instance -node node2 」</block>
  <block id="bc110b3ccc057d2275d5e8ae87f525b0" category="list-text">[man_record_2_step10] セクションで使用する NVRAM システム ID を記録します <block ref="f326c815b47f4f2909494bae5cd735d5" category="inline-link-macro-rx"></block>。</block>
  <block id="7314fe3b616597bb78463e3503d3cdea" category="paragraph">アグリゲートの再配置（ ARL ）を使用して ONTAP 9.0 を実行するコントローラのペアをアップグレードできるかどうかは、プラットフォームおよび元のコントローラと交換用コントローラの両方の構成によって異なります。</block>
  <block id="03a076130908bcb8ba3ef3e4a9879406" category="paragraph">ARL を使用してノードのペアをアップグレードできる状況は次のとおりです。</block>
  <block id="fef08cb6b104300c9963da8490224b47" category="list-text">アップグレード前に、元のコントローラと交換用コントローラの両方で同じバージョンの ONTAP 9.x が実行されている必要があります。</block>
  <block id="85bf786cb7564154a7193e9a32b9470f" category="list-text">交換用コントローラの容量は元のコントローラと同じかそれ以上である必要があります。容量が等しいかそれよりも大きい場合は、 NVRAM サイズ、ボリューム、 LUN 、アグリゲート数の上限などの属性を表し、新しいノードのボリュームまたはアグリゲートの最大サイズも表します。</block>
  <block id="f8990401799da4daa91e6353e208a0ca" category="list-text">次の種類のシステムをアップグレードできます。</block>
  <block id="9fc712c36470ee134b5baf35a0628f67" category="list-text">FAS システムから FAS システムへの移動。</block>
  <block id="5759b3c09faaa5e5121a707b989bc410" category="list-text">AFF システムへの AFF システム。</block>
  <block id="b840d5771a2ef91436a0bedbee3a165d" category="admonition">AFF システムのアップグレードを実行する前に、 ONTAP をリリースバージョン 9.3P12 、 9.4P6 、または 9.5P1 以降にアップグレードする必要があります。これらのリリースレベルは、アップグレードを成功させるために必要です。</block>
  <block id="17d299f0ea21ebf5e64a916dc31f3150" category="admonition">どちらのシステムもハイアベイラビリティ（ HA ）と非 HA のどちらかです。両方のノードがこの機能を有効または無効にする必要があります。オールフラッシュで最適化されたノードと同じ HA ペアで最適化が有効になっていないノードを組み合わせることはできません。パーソナリティが異なる場合は、テクニカルサポートに連絡してください。</block>
  <block id="eb54474fb812ae2f0b8cbe44a679c0e9" category="admonition">新しいシステムのスロット数が元のシステムのスロット数より少ない場合、またはポートの数が少ないか異なる場合は、新しいシステムにアダプタを追加しなければならないことがあります。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> 特定のプラットフォームの詳細については、ネットアップサポートサイトの Hardware Universe にリンクしてください。</block>
  <block id="64958cd32ea9482fb68bd827389c4b5d" category="list-text">ONTAP 9.0 から ONTAP 9.7 への ONTAP のバージョンを実行できないコントローラとの間。</block>
  <block id="fd753b120c7506bdd866bd69666299a0" category="paragraph">Data ONTAP 7-Mode を実行するシステムでのコントローラのアップグレードについては、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> からネットアップサポートサイトにリンクできます。</block>
  <block id="8d99b40dd6349fd6acdd377f1170526a" category="list-text">元のコントローラに接続されたディスクシェルフをサポートしない交換用コントローラへの接続</block>
  <block id="c2bba071fde6bd6aaadda02df6be1824" category="paragraph">ディスクサポート情報については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> Hardware Universe にリンクするには、次の手順を実行します。</block>
  <block id="0ed554de4f15b56b25624509bfd8b8e2" category="list-text">ルートアグリゲートまたは内蔵ドライブ上のデータアグリゲートを含むコントローラからのアクセス。</block>
  <block id="aa4444dc8b6bab3b2f6234aeca290090" category="section-title">前提条件と用語</block>
  <block id="c77e53bb71e6f82e9c063dc5e5174b70" category="paragraph">このマニュアルの記述は次の前提に基づいています。</block>
  <block id="3eb93a8b34b97361565e1e43b5172c6c" category="list-text">交換用コントローラハードウェアは新しく購入され、使用されていません。</block>
  <block id="813522154d0016da078c804c8b48926e" category="list-text">ノードのペアをアップグレードする際のガイドラインを確認し、理解しておきます。</block>
  <block id="4e2f57efeba52fa3484b04fa5b7501f6" category="list-text">「 mody 」コマンドの前後に適切なコマンドを実行し、両方の「 show 」コマンドの出力を比較して、「 mody 」コマンドが成功したことを確認しています。</block>
  <block id="418bba28a84b33a46f081045deea4425" category="list-text">SAN 構成の場合、 HA ペア上の各 Storage Virtual Machine （ SVM ）にローカル LIF とパートナー LIF があります。各 SVM にローカル LIF とパートナー LIF がない場合は、アップグレードを開始する前に、その SVM のリモートノードとローカルノードに SAN データ LIF を追加します。</block>
  <block id="4deee541ccbe8bdf4518c19cd687519b" category="list-text">SAN 構成でポートセットを使用する場合は、バインドされた各ポートセットに HA ペアの各ノードの LIF が少なくとも 1 つ含まれていることを確認しておく必要があります。</block>
  <block id="1cb03b52ed6596c669089e6356a17e4c" category="paragraph">この手順では、ノードのリブートや環境変数の出力や設定など、特定のタスクを実行できるノード上のプロンプトを「 _boot environment prompt_ 」で参照します。このプロンプトは、 _boot loader prompt_ と非公式に呼ばれることがあります。</block>
  <block id="f12c4790f612bd1e2efaede10265d567" category="paragraph">ブート環境のプロンプトの例を次に示します。</block>
  <block id="3f17352bf969c985d68f77c2833285c4" category="section-title">ONTAP 9.7 以前のライセンス</block>
  <block id="fa6e3787c7c887f4c69ddbc0dec0424e" category="paragraph">すべてのライセンスキーは、 28 文字の大文字のアルファベットです。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ONTAP 9.7 の新しい 28 文字のライセンスキーを取得する方法については、 _NetApp サポートサイト _ にリンクしてください。またはそれ以前のバージョン。キーは、 _ ソフトウェアライセンス _ の _ マイサポート _ セクションにあります。必要なライセンスキーがサイトにない場合は、ネットアップの営業担当者にお問い合わせください。</block>
  <block id="4d832de97d9ead053e5d9f0ec85efced" category="paragraph">ライセンスの詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、 _System Administration Reference_( システム管理リファレンス ) にリンクします。</block>
  <block id="444b1cfaed2cd1215abe5706af9673cd" category="section-title">ストレージ暗号化</block>
  <block id="9519937cbd956cff6c45361bbdf5972a" category="paragraph">ストレージ暗号化を使用する場合は、ノードに関連付けられているすべてのディスクドライブに自己暗号化ディスクドライブが必要です。</block>
  <block id="f57ddae179006dfe93c570a9886b51b0" category="list-text">元のノードのパフォーマンスベースラインを作成するには、次の手順を実行します。</block>
  <block id="e2ce8b648cf2a8577d2ac0054c830df5" category="list-text">診断ユーザアカウントのロックが解除されていることを確認します。</block>
  <block id="8fafe7b0e88d09400ee18fcc9299185e" category="list-text">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ネットアップサポートサイトへのリンクには、 Performance and Statistics Collector （ Perfstat Converged ）をダウンロードしてください。</block>
  <block id="061b69246434dcda481ca9452cf30635" category="paragraph">Perfstat Converged ツールを使用すると、アップグレード後に比較するためのパフォーマンスのベースラインを設定できます。</block>
  <block id="3e5ae45cd6aac12d01461471b0995845" category="list-text">ネットアップサポートサイトの手順に従ってパフォーマンスのベースラインを作成します。</block>
  <block id="7fcb92cfc1dea17cbdc84eda52cfac2b" category="list-text">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> からネットアップサポートサイトにリンクして、ネットアップサポートサイトでサポートケースをオープンしてください。</block>
  <block id="38fd59ef0181a70014c49f0cfdd6ed5d" category="paragraph">アップグレード中に発生する可能性がある問題をケースで報告できます。</block>
  <block id="e7b328a01b5a6b8fffc172cfd9f564c0" category="list-text">node3 と node4 の NVMEM または NVRAM バッテリが充電されていることを確認し、充電されていない場合は充電します。</block>
  <block id="051d9c31ffa2621a5e49ba9e6d76c916" category="list-text">node3 と node4 にある ONTAP のバージョンを確認します。</block>
  <block id="53e359796554176ecef5639c8ed3ed05" category="paragraph">node3 と node4 にある ONTAP のバージョンに関する情報は、梱包箱に含める必要があります。ONTAP のバージョンは、ノードがブートするとき、またはノードを保守モードでブートしてコマンドを実行するときに表示されます。</block>
  <block id="7877022c956918624cc0373ff564cad4" category="paragraph">「バージョン」</block>
  <block id="a2d27af8ce0592e36b8a208c0cb93d3e" category="paragraph">「 network interface show -role cluster 」のように表示されます</block>
  <block id="97946b80ce2a390dfbe694abb89b8da6" category="paragraph">次の例に示すように、すべてのクラスタ LIF が表示されます。</block>
  <block id="b6f048f47d754b1245e072cf13364151" category="list-text">ノード 1 またはノード 2 にクラスタ LIF が 2 つまたは 4 つある場合は、次の手順を実行して、使用可能なすべてのパスで両方のクラスタ LIF に ping を送信できることを確認します。</block>
  <block id="4ae0280fe3dd6476913cdfef9bf98f8f" category="list-text">advanced 権限レベルに切り替えます。</block>
  <block id="88bdbe46ad1d0b5212db8d769f0d6c7c" category="list-text">「 y 」と入力します。</block>
  <block id="1be278766df14cf22410e71cf6d2cf07" category="list-text">ノードに ping を実行して接続をテストします。</block>
  <block id="30533ddc427fb292c7d2a7a069e893e2" category="paragraph">cluster ping-cluster -node node_name</block>
  <block id="e2ef0e388993deb8d5ac2d2c4c589106" category="paragraph">次の例のようなメッセージが表示されます。</block>
  <block id="87d93b522596e870c62c871bdbe44c11" category="paragraph">ノードで 2 つのクラスタポートが使用されている場合、次の例に示すように、 4 つのパスで通信可能であることを確認できます。</block>
  <block id="063014cb1baf1ab4cfba01ed9c5cdcb1" category="list-text">管理者レベルの権限に戻ります。</block>
  <block id="7a309bb6c6af5ef06efe5f48e0c54074" category="paragraph">次の例は、ノードが相互に接続されていて、テイクオーバーが可能な場合の出力例を示しています。</block>
  <block id="8ad3217d99ee19b408199ad575ffe3af" category="paragraph">どちらのノードも部分的なギブバック状態にはなりません。次の例では、 node1 の部分的なギブバックが完了しています。</block>
  <block id="e86a1d7ab77ef690a506c50aeb0e4407" category="paragraph">node1 と node2 のどちらも現在の所有者（ホーム所有者ではない）アグリゲートを所有していない場合、次の例のようなメッセージが返されます。</block>
  <block id="b985e562bbb6750dd51f653600fe0a16" category="paragraph">次の例は、 4 つのアグリゲートのホーム所有者ではなくホーム所有者である node2 というノードに対するコマンドの出力を示しています。</block>
  <block id="d2d09b67c3b189d4996ce96fdb6e7f46" category="cell">のコマンドの場合は <block ref="f234334393599d38df4eb27863e3dcfa" category="inline-xref-macro-rx"></block>...</block>
  <block id="187bf5770ab4eb046ac279545d76a28d" category="cell">空の出力がありました</block>
  <block id="618ca5b25d5cf4c26b7057f25a52023b" category="inline-xref">手順 12</block>
  <block id="6cf9162d078961b85385ab5ffe206def" category="cell">手順 11 を省略して、に進みます <block ref="9e04aeb1482ff26e4ec2b4e66367360a" category="inline-xref-macro-rx"></block>。</block>
  <block id="4862cab8c196cf3e955c3421a6f0ab8b" category="cell">出力あり</block>
  <block id="5f97f3ee15cc9d2abee53d7af46e1799" category="inline-xref">手順 11</block>
  <block id="009df4941179f7e77d7594ecfc0c10f7" category="cell">に進みます <block ref="1fe89f878ebb086a789e2e41fed56343" category="inline-xref-macro-rx"></block>。</block>
  <block id="edc71aed1f3d88be9cfa9b3b3f030a94" category="list-text">[man_prepare-to-downgrade 11]] ノード 1 またはノード 2 が現在の所有者であり、ホーム所有者ではないアグリゲートを所有している場合は、次の手順を実行します。</block>
  <block id="d4a6afd0a40d578ef1c16c580930990a" category="paragraph">「 storage failover show -fields local-missing-disks 、 partner-missing-disks 」というメッセージが表示されます</block>
  <block id="9351d7b864e0fec6d8e9ce484c7e1792" category="paragraph">次の例は、不足しているディスクがない場合の出力例を示しています。</block>
  <block id="f1178fa107fef2eea6cd954e57dbda27" category="paragraph">次の例は、両方のノードが正常である場合の出力を示しています。</block>
  <block id="ee93f64f74bbb51a61f0871bf27e8d58" category="paragraph">次の例は、コマンドの出力例を示しています。</block>
  <block id="39011a93d54cda514415ade9083fc4bd" category="list-text">ノード 1 とノード 2 のどちらもクラスタ内の他のノードに属するデータ LIF を所有していないことを確認し、出力の「 Current Node 」列と「 Is Home 」列をチェックします。</block>
  <block id="5ac0c9fe3d719e05a93a39b429e96f47" category="paragraph">次の例は、 node1 に、ホーム所有の LIF がクラスタ内の他のノードにない場合の出力を示しています。</block>
  <block id="c94a099e774b563198a3d0a4747eeeb1" category="paragraph">次の例は、 node1 がもう一方のノードによってホーム所有されているデータ LIF を所有している場合の出力を示しています。</block>
  <block id="624ebabf7bed06677af18b73e9b75ed4" category="list-text">の出力の場合は <block ref="f85aebae90992a111c19def12492ab18" category="inline-xref-macro-rx"></block> ノード 1 とノード 2 のどちらかがクラスタ内の他のノードでホーム所有されているデータ LIF を所有しており、データ LIF をノード 1 とノード 2 のどちらからも移行することを示します。</block>
  <block id="b4ebcf376ab05c920671af65b7daaf8c" category="paragraph">network interface revert -vserver * -lif *</block>
  <block id="90cb08ba1d76f3a3dfeee17c19be4d3e" category="paragraph">network interface revert コマンドの詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ONTAP 9 コマンド：マニュアルページリファレンスにリンクするには、次の手順を実行します。</block>
  <block id="9aad19d5c9012d934daf081b9a8a5f8d" category="list-text">ノード 1 とノード 2 で障害ディスクが所有されているかどうかを確認します。</block>
  <block id="897a592bf71f640f9c341f736bc9ee4e" category="list-text">次の手順を実行して node1 と node2 に関する情報を収集し、各コマンドの出力を記録します。</block>
  <block id="76a16743e07ac3cea2f75990f2aad527" category="admonition">この情報は、手順の後半で使用します。</block>
  <block id="86bd7b7efad49e1892e19e0073d55fb5" category="list-text">両方のノードのモデル、システム ID 、シリアル番号を記録します。</block>
  <block id="dfb5c700fcc3e30efac3db32160fbcf2" category="admonition">この情報を使用して、ディスクの再割り当てと元のノードの運用を停止します。</block>
  <block id="e09e773592434045763d0f91877696a1" category="list-text">ノード 1 とノード 2 の両方で次のコマンドを入力し、シェルフ、各シェルフ内のディスク数、フラッシュストレージの詳細、メモリ、 NVRAM 、ネットワークカードに関する情報を出力に記録します。</block>
  <block id="183d8f9cbafac0e6a6d6ea1ecdc927af" category="list-text">ノード 1 とノード 2 の両方で次のコマンドを入力し、両方のノードでオンラインになっているアグリゲートを記録します。</block>
  <block id="8e812627c78a44fd6a82255d855942ae" category="admonition">この情報と次の手順の情報を使用して、再配置時にオフラインになった短時間のアグリゲートとボリュームが手順全体でオンラインのままになっていることを確認できます。</block>
  <block id="75cf5ffcfa777a87d0faf388944df0a1" category="list-text">[[man_prepare_nodes_step19]] ノード 1 とノード 2 の両方で次のコマンドを入力し、両方のノードでオフラインになっているボリュームを記録します。</block>
  <block id="649d1a5dd8b62184f1d84c77b9e0782d" category="admonition">アップグレード後にもう一度コマンドを実行し、この手順の出力と比較して、他のボリュームがオフラインになったかどうかを確認します。</block>
  <block id="f1914c021e0eba7910a7110848bb7b02" category="list-text">次のコマンドを入力して、 node1 または node2 にインターフェイスグループまたは VLAN が設定されているかどうかを確認します。</block>
  <block id="668c0014fabb7b9c53aeeddba81cd3f5" category="paragraph">「 network port ifgrp show 」のように表示されます</block>
  <block id="793d1d4f275c1119fa9ef4c6bdeb245e" category="paragraph">「 network port vlan show 」と表示されます</block>
  <block id="f44fab1c935aab23f65aad42a018c6c3" category="paragraph">インターフェイスグループまたは VLAN がノード 1 とノード 2 のどちらで設定されているかを確認します。手順の次の手順以降で、その情報を確認する必要があります。</block>
  <block id="b84ea1287ec7320899965ee9778b33f8" category="list-text">次のコマンドを入力して 'clusterwide 以外のノードにフェイルオーバー・グループがあるかどうかを確認します</block>
  <block id="b60d742c0bb409f0ebcb8588e87621e0" category="paragraph">「 network interface failover-groups show 」と表示されます</block>
  <block id="091f947ae047399826a034c153b6f964" category="paragraph">フェイルオーバーグループは、システムに存在するネットワークポートのセットです。コントローラハードウェアをアップグレードすると物理ポートの場所が変わる可能性があるため、アップグレード中にフェイルオーバーグループを誤って変更する可能性があります。</block>
  <block id="8d9c45aa37c89a2c1648b1756ab487ea" category="paragraph">次の例に示すように、ノード上のフェイルオーバーグループが表示されます。</block>
  <block id="da98a346ceebae46d5f809b0a76fa466" category="list-text">clusterwide 以外のフェイルオーバー・グループがある場合は ' フェイルオーバー・グループ名と ' そのフェイルオーバー・グループに属するポートを記録します</block>
  <block id="4284018d8ed5fd4750bbe54e42d5131e" category="list-text">次のコマンドを入力して、ノードに VLAN が設定されているかどうかを確認します。</block>
  <block id="c4bc09685f2b51c989913c717d719690" category="paragraph">VLAN は物理ポートを介して設定されます。物理ポートが変わった場合は、あとで手順で VLAN を再作成する必要があります。</block>
  <block id="d12a9049e51fd6e424aa4359a72b4295" category="paragraph">次の例に示すように、ノードに設定されている VLAN が表示されます。</block>
  <block id="c14e11ebbdc4deecee898760f94845d8" category="list-text">ノードに VLAN が設定されている場合は、各ネットワークポートと VLAN ID のペアをメモします。</block>
  <block id="52be7caa23f8083514a04ae35866982c" category="cell">インターフェイスグループまたは VLAN の状態</block>
  <block id="298af6f79d48efea731daf2a5fb8b16a" category="cell">ノード 1 またはノード 2</block>
  <block id="4d65d20e483d642b29f52e830db50552" category="inline-xref">手順 24</block>
  <block id="aa969b6a363de5881c89bb2473ec8437" category="cell">- 完了しました <block ref="9b49efbf480dedd669e8261bbf55488f" category="inline-xref-macro-rx"></block> および <block ref="75c40b124b57824cd48270709549c07b" category="inline-xref-macro-rx"></block>。</block>
  <block id="6c2e7ce55ecae714a2208a38f28950b9" category="cell">ノード 1 とノード 2 ではありません</block>
  <block id="68eb39c6bade33093ea7116e69724b9d" category="cell">に進みます <block ref="75c40b124b57824cd48270709549c07b" category="inline-xref-macro-rx"></block>。</block>
  <block id="371f291ab5b98703097ed6da7c8ed52f" category="list-text">[[man_prepare_nodes_step23]] SAN 環境または SAN 以外の環境で node1 と node2 が存在するかどうかが不明な場合は、次のコマンドを入力して出力を確認します。</block>
  <block id="acbfcb7305e244387e0051fa5f508401" category="paragraph">SVM に iSCSI も FC も設定されていない場合、次の例のようなメッセージが表示されます。</block>
  <block id="f5ec26fd612e05501dc188ab23c1e529" category="paragraph">ノードが NAS 環境にあることを確認するには '-data-protocol nfs|cifs パラメータを指定した network interface show コマンドを使用します</block>
  <block id="94b030f9c4d0cf01d4214519980e06e7" category="paragraph">SVM に iSCSI または FC が設定されている場合、次の例のようなメッセージが表示されます。</block>
  <block id="6d0f0ab3ba176428ba45b4d0b08cb29a" category="list-text">[man_prepare-to-downgrade 24]] 次の手順を実行して、クラスタ内のすべてのノードがクォーラムにあることを確認します。</block>
  <block id="41755192777732f571a4c320827bfc6d" category="list-text">カーネル内のクラスタサービスの状態をノードごとに 1 回確認します。</block>
  <block id="998af7db71400f287ae13a492f9d193a" category="paragraph">「 cluster kernel-service show 」のように表示されます</block>
  <block id="a911ca42751cdd210f50c82f44049c10" category="paragraph">過半数のノードが正常で相互に通信可能な場合に、クラスタ内のノードがクォーラムを構成している。詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、 _System Administration Reference_( システム管理リファレンス ) にリンクします。</block>
  <block id="6c4e983088f8ed9f67246e1b17b638ca" category="list-text">admin 権限レベルに戻ります。</block>
  <block id="bd63b39861eaf09922b2f696e573be58" category="cell">クラスタの状況</block>
  <block id="cf72c95a9046542261893f709403a8d2" category="cell">SAN が設定されている</block>
  <block id="a2ca851f93b3aab00f2a1a9d215797c0" category="cell">に進みます <block ref="25d05608683c9030994c9dfb7a4f0a9b" category="inline-xref-macro-rx"></block>。</block>
  <block id="6f3802a8c39ecd17753209796818c9f5" category="cell">SAN が設定されていません</block>
  <block id="bb321334fcb278e04a88480d13054b7e" category="inline-xref">手順 29</block>
  <block id="4bf8f638d47f6a7f9ed2b167e6c58b28" category="cell">に進みます <block ref="423690fd8b3d3c5955a0b43d62ab9b67" category="inline-xref-macro-rx"></block>。</block>
  <block id="dca3bf352f9922771b35f1e03c591788" category="list-text">[man_prepare-to-downgrade 26]] 次のコマンドを入力して、 SAN iSCSI または FC サービスが有効になっている各 SVM で、ノード 1 とノード 2 に SAN LIF があることを確認します。</block>
  <block id="963e82614f757a8eee0259303f34527b" category="paragraph">コマンドは、ノード 1 とノード 2 の SAN LIF 情報を表示します。次の例は、 Status Admin/Oper 列に up/up と表示されているステータスを示しています。これは、 SAN iSCSI サービスと FC サービスが有効になっていることを示しています。</block>
  <block id="8a70e662724b21080c560e6be7f2c5c4" category="paragraph">また、次のコマンドを入力して、 LIF の詳細情報を確認することもできます。</block>
  <block id="d026c064778006f9c03fdbc86d65f2bb" category="paragraph">'network interface show -instance -data-protocol iscsi|fcp</block>
  <block id="ff03f81e3805469dd3ca43d2811a614d" category="list-text">次のコマンドを入力してシステムの出力を記録し、元のノードの FC ポートのデフォルト設定を取得します。</block>
  <block id="3e2b2bdb70af85f67ec523ee76a4f03b" category="paragraph">コマンドは、次の例に示すように、クラスタ内のすべての FC ポートに関する情報を表示します。</block>
  <block id="b0465c9d2f8edb4e2978de4f3bb93497" category="paragraph">アップグレード後の情報を使用して、新しいノードに FC ポートを設定できます。</block>
  <block id="fd24198d12e02d20f511f9c35f66ebb1" category="list-text">元のいずれかのノードで次のコマンドを入力し、出力を記録します。</block>
  <block id="7321ac6691d90f67ea8ea42f26847df8" category="paragraph">「 service-processor show -node * -instance 」のように表示されます</block>
  <block id="72dfb8d3e52e5d9045db9ad00960535b" category="paragraph">両方のノードの SP に関する詳細情報が表示されます。</block>
  <block id="7f4649d278edc769a0ec529585086778" category="list-text">SP の IP アドレスやその他の情報を記録します。</block>
  <block id="2874b759bc0f9d6f832a84f482485f96" category="paragraph">リモート管理デバイスのネットワーク・パラメータ（この場合は SP ）を ' 新しいノードの SP の元のシステムから再利用することができますSP の詳細については ' を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> 『 _System Administration Reference_and the ONTAP 9 Commands ： Manual Page Reference_』 にリンクするには、次の手順を実行します。</block>
  <block id="57fb8c1782e77bfa17ea95c66f54a6dd" category="paragraph">「 system license show -owner * 」と表示されます</block>
  <block id="4f8f7baa705fb90b9c5bec95668e59f5" category="paragraph">次の例では、 cluster1 のサイトライセンスを表示しています。</block>
  <block id="b83718d5186db84761322d32f4ea05ac" category="list-text">新しいノードの新しいライセンスキーを the _NetApp Support Site_. に取得します。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> からネットアップサポートサイトにリンクしてください。</block>
  <block id="5bb4c97c29100d63e333b5886f7e88b0" category="paragraph">必要なライセンスキーがサイトにない場合は、ネットアップの営業担当者にお問い合わせください。</block>
  <block id="6e97d82c25e14f4edc2307703de3f74f" category="list-text">元のシステムで AutoSupport が有効になっているかどうかを確認するには、各ノードで次のコマンドを入力し、出力を調べます。</block>
  <block id="28705e432bcaee564beb0750f6d4f55d" category="paragraph">次の例に示すように、コマンド出力には AutoSupport が有効になっているかどうかが表示されます。</block>
  <block id="9d35920fb64314f04ebb4c503b9d4637" category="cell">元のシステム</block>
  <block id="82afadce5c137568366e29a810db005a" category="cell">AutoSupport が有効になっています ...</block>
  <block id="c732f1d7a89abd68a48f92313a9b4364" category="inline-xref">手順 34</block>
  <block id="1ab718a04314b36269d3b2b096aac75a" category="list-text">に進みます <block ref="395265ffe56efe9e97ae9cc3752b2f60" category="inline-xref-macro-rx"></block>。</block>
  <block id="9c13f9e2316ce6eb31c97c43c9f42070" category="cell">AutoSupport が有効になっていません ...</block>
  <block id="6fcae9afe7013bc84597d8c4231312ba" category="list-text">AutoSupport を有効にするには、 _System Administration Reference_. の手順に従ってください。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、 _System Administration Reference_. にリンクします。）</block>
  <block id="4179c1d88c83e870ed525f69e82e0369" category="list-text">[man_prepare_nodes _step34]] 元のノードの両方で次のコマンドを入力し、 AutoSupport が正しいメールホストの詳細および受信者の E メール ID で設定されていることを確認します。</block>
  <block id="a8c3aac51d9227fa38d968e2651f9145" category="paragraph">「 system node AutoSupport show -node node_name -instance 」の略</block>
  <block id="f9145af7d3453430abd5b300de96a961" category="paragraph">AutoSupport の詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> 『 _System Administration Reference_and the ONTAP 9 Commands ： Manual Page Reference_』 にリンクするには、次の手順を実行します。</block>
  <block id="1139339a9b05d9d73e22e4329260fdc9" category="list-text">[[man_prepare-to-downgrade 35 、 Step 35]] 次のコマンドを入力して、 node1 のネットアップに AutoSupport メッセージを送信します。</block>
  <block id="2dc3e53d8dbc94d5425e399af7be362e" category="paragraph">「 system node AutoSupport invoke -node node1 -type all -message 」「 Upgrading node1 from platform_old to platform_new 」というメッセージが表示されます</block>
  <block id="4086f5138ec309c4999cbff0dc76073d" category="admonition">この時点では node2 の AutoSupport メッセージはネットアップに送信しないでください。これはあとで手順で送信します。</block>
  <block id="37fdb57fc31ec512b7d4dde37a7ab8d7" category="list-text">[man_prepare-to-downgrade 36 、 Step 36]] 次のコマンドを入力して、 AutoSupport メッセージが送信されたことを確認します。</block>
  <block id="28dd44ad0b0bcceee8ca8498734facba" category="paragraph">「 Last Subject Sent ：」フィールドと「 Last Time Sent ：」フィールドには、最後に送信されたメッセージのメッセージタイトルと、メッセージが送信された時刻が含まれています。</block>
  <block id="5e8f88089134f38f7cf630a3a4ce36ff" category="admonition">ネットアップのマーケティング資料では、 UTA2 という用語を CNA アダプタとポートという意味で使用している場合があります。ただし、 CLI では「 cna 」という用語を使用しています。</block>
  <block id="218c1c22487e3cea0e94aedcabb843e2" category="paragraph">に保存した FC ポート設定の値を node1 で確認しておく必要があります <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block>。</block>
  <block id="7f3a5152afa49c8421359b8761a9a8ad" category="cell">新しいノードのデフォルトの FC 設定</block>
  <block id="cb4a7a262c1057120daeee2df7839247" category="cell">ノード 1 で取得したものと同じです</block>
  <block id="2cc211fd01662dba325fa6afb2cb24dc" category="cell">ノード 1 で取得したものとは異なります</block>
  <block id="3e5bf76136102b434c2a000604dc77c1" category="list-text">ノード 3 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがある場合は、に進みます <block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block>。</block>
  <block id="306e854e226a650b7acec40ba5a0e249" category="list-text">ノード 3 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがない場合は、この手順を省略してください <block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block> にアクセスします <block ref="3b6c063a8efbc88c969c7838f0611434" category="inline-link-macro-rx"></block>。</block>
  <block id="581e0d52eede5c7a9002197a5955188f" category="list-text">[[step3]] 「 system node hardware unified-connect show 」コマンドまたは「 ucadmin show 」コマンドの出力を調べて、 UTA / UTA2 ポートに希望するパーソナリティがあるかどうかを確認します。</block>
  <block id="39e1a687c8a1a3bb49c730ad7b98a3d5" category="cell">に進みます <block ref="2fc3b3e515184c116c95342a9ca8cb9f" category="inline-xref-macro-rx"></block>。</block>
  <block id="de2f29988a1562cff5aece8243895ec3" category="paragraph">ターゲットモードのアダプタは、メンテナンスモードで自動的にオフラインになります。</block>
  <block id="87f04db4bf78b3f620b7363444f3162e" category="list-text">システムを停止します。</block>
  <block id="4ccd0b13a5d5d3be43ff2600a91655cc" category="list-text">[[step11]] 設定を確認します。</block>
  <block id="52b727613ccb81e1e924ffec991b2e74" category="paragraph">次の例の出力は ' アダプタ「 1b 」の FC4 タイプがイニシエータに変更されており ' アダプタ「 2a 」および「 2b 」のモードが「 cna' 」に変更されていることを示しています</block>
  <block id="a96ea627b3d5d65e112aacf5d7b2c1e1" category="inline-link-macro">node2 によって所有されている NAS データ LIF を node3 から node4 に移動し、 node4 にある SAN LIF を確認します</block>
  <block id="1d92796a70af1d22c31d2b64c9064278" category="inline-link-macro">ノード 2 のルート以外のアグリゲートをノード 3 からノード 4 に再配置します</block>
  <block id="8a934a6945c2524f52729212e6e676c1" category="doc">node2 によって所有されている NAS データ LIF を node3 に移動する</block>
  <block id="0798efe32af9ed8a849deddb03ef31cf" category="paragraph">アグリゲートを node2 から node3 に再配置したら、 node2 によって所有されている NAS データ LIF を node3 に移動する必要があります。</block>
  <block id="71f0ff9a99872664cb504bc17756a9a7" category="paragraph">アップグレード手順の実行中、リモート LIF は SAN LUN へのトラフィックを処理します。アップグレード時にクラスタやサービスの健全性を維持するために、 SAN LIF を移動する必要はありません。SAN LIF は、新しいポートにマッピングする必要がないかぎり移動されません。ノード 3 からノード 4 に LIF を移動し、ノード 4 がオンラインになったあとで、 LIF が正常に機能しており、適切なポートに配置されていることを確認する必要があります。</block>
  <block id="e2400a5784b6e69a68f8240fc8be98e0" category="list-text">[[step1] ノードごとに次のコマンドを入力し、出力をキャプチャして、 node2 が所有するすべての NAS データ LIF を一覧表示します。</block>
  <block id="1dfd4aeb9eb2d67718bb179a87daccb5" category="paragraph">次の例は、 node2 のコマンドの出力を示しています。</block>
  <block id="aa0c21cc929471b59f51bf7561edb3b2" category="cell">ノード 2 の条件</block>
  <block id="141b9f4f51c5a1d44c0555e2cab43f56" category="cell">インターフェイスグループまたは VLAN が設定されている</block>
  <block id="0cce85d021e13ea0d84461759b2a3b08" category="cell">に進みます <block ref="d5cd2572a667e81ae2cb0b0539de3785" category="inline-xref-macro-rx"></block>。</block>
  <block id="d7f8ef927cf7428c7625c268a1c951ef" category="cell">手順 3 を省略して、に進みます <block ref="2dd22df3b6260ee6ac1883b31af6d999" category="inline-xref-macro-rx"></block>。</block>
  <block id="6d3379271564572a595ab2fbc869131a" category="list-text">[man_move_lif_2_3_step3] 次の手順を実行して、 node2 のインターフェイスグループおよび VLAN でホストされている NAS データ LIF を移行します。</block>
  <block id="daaee2c9342de97c2c423f905e0ea71f" category="list-text">[[man_move_lif_2_3_substpa]] ノード 2 のインターフェイスグループでホストされているすべてのデータ LIF を、同じネットワーク上の LIF をホストできるノード 3 のポートに移行するには、各 LIF に対して 1 回、次のコマンドを入力します。</block>
  <block id="4fd830a8ef7653e7cc91a40076c34365" category="list-text">LIF のホームポートとホームノードを変更します <block ref="6c89c517e670ac026543379bd9a9844e" category="inline-xref-macro-rx"></block> 各ノードについて次のコマンドを 1 回入力して、 LIF を現在ホストしているポートとノードに接続します。</block>
  <block id="274dd4ace55dc7cc39f1a5eb3afbcbf1" category="list-text">[man_move_lif_2_3_substpc ]] node2 上の VLAN でホストされている LIF を、 node2 上のポートにノード 3 上のポートに移行します。その際、各 LIF に対して 1 回、次のコマンドを入力して、 VLAN と同じネットワーク上の LIF をホストできます。</block>
  <block id="9ad3609f9c94e5d3764345c4a95d6e85" category="inline-xref">サブステップ c</block>
  <block id="107232f6e653a89ac23c99590a7ea101" category="list-text">LIF のホームポートとホームノードを変更します <block ref="e5ef0b90c6e2aafbe1f927b2cb6685c9" category="inline-xref-macro-rx"></block> LIF をホストしているポートとノードに対して次のコマンドを 1 回入力します。</block>
  <block id="d113d66e692935f5a59a62900427b861" category="list-text">[man_move_lif_2_3_step4] 次のいずれかの操作を実行します</block>
  <block id="20cdfa79ed0499babc80c9a3f7d7297c" category="cell">- 完了しました <block ref="2da0d67c04c83434137e9b301dfd86dd" category="inline-xref-macro-rx"></block> から <block ref="12556117786215462f4f983b89f009f9" category="inline-xref-macro-rx"></block>。</block>
  <block id="44f77dbcf99acc01b3bf655a89bfcc5e" category="cell">手順 5 から 8 をスキップし、完了します <block ref="b80e3f5f2f06a1383cb71c69b52c021e" category="inline-xref-macro-rx"></block>。</block>
  <block id="7f84238811a0744aed44244f31a3bd53" category="cell">NAS と SAN の両方</block>
  <block id="da070fa74bde99b92534bf987c65a7e1" category="cell">- 完了しました <block ref="2da0d67c04c83434137e9b301dfd86dd" category="inline-xref-macro-rx"></block> から <block ref="ccd0910cd159fbfd70d254145a6c4d20" category="inline-xref-macro-rx"></block>。</block>
  <block id="1b8095077175bc0e7f7bb5fbb73e6504" category="list-text">[[man_move_lif_2_3_step5] プラットフォームで同じでないデータポートがある場合は、ブロードキャストドメインにポートを追加します。</block>
  <block id="2f563bb65059883cdd406846273f0ca4" category="paragraph">次の例は、ノード「 6280 」のポート「 e0a 」とノード「 8060-1 」のポート「 e0i 」を IPspace 「 Default 」のブロードキャストドメイン「 mgmt 」に追加します。</block>
  <block id="1062bb6c92253a8c9b640ee692419b26" category="list-text">[[step6] それぞれの LIF に対して次のコマンドを 1 回入力して、各 NAS データ LIF を node3 に移行します。</block>
  <block id="0049a5f9500f1de5ca8ef0f389c62f72" category="list-text">[[step7] 両方のノードで次のコマンドを入力し、 NAS LIF が正しいポートに移動されていること、および LIF のステータスが up になっていることを確認します。</block>
  <block id="6f72830bc34189a08fe7627d74d89f3b" category="list-text">[[man_move_lif_2_3_step8] いずれかの LIF が停止している場合は、各 LIF に対して 1 回次のコマンドを入力して、 LIF の管理ステータスを「 up 」に設定します。</block>
  <block id="ba45f9f836b05d2d37a836a9ed696d6f" category="list-text">[man_move_lif_2_3_step9] インターフェイスグループまたは VLAN が設定されている場合は、次の手順を実行します。</block>
  <block id="ef57ddf1d14f7687cdf12a4b023fe0ba" category="list-text">次のコマンドを入力し、その出力を調べて、ノードにインターフェイスグループが設定されているかどうかを確認します。</block>
  <block id="32c2f2dc33f1ff3a5d165af69042d610" category="paragraph">次の例に示すように、ノードのインターフェイスグループ情報が表示されます。</block>
  <block id="c02532d4249a0cf1658188c0c95a7129" category="list-text">ノードにインターフェイスグループが設定されている場合は、インターフェイスグループの名前とグループに割り当てられているポートを記録し、各ポートについて次のコマンドを 1 回入力してポートを削除します。</block>
  <block id="921eaa458ace17addc7c79b9466bf144" category="doc">node1 で所有されている NAS データ LIF を node2 から node3 に移動し、ノード 3 の SAN LIF を確認します</block>
  <block id="44bbe343e421273c157c5d1c833a433b" category="list-text">[[step1] ノードごとに次のコマンドを入力し、出力をキャプチャして、 node2 が所有していないすべての NAS データ LIF を一覧表示します。</block>
  <block id="4273a0997ee0d6df35945422d9f57ec6" category="cell">インターフェイスグループまたは VLAN が設定されている</block>
  <block id="31a8cab14d1d7febef6f8053dcd9552d" category="cell">インターフェイスグループまたは VLAN が設定されていません</block>
  <block id="8c5ada6be3ca66f32616fd020694ec45" category="list-text">[[man_lif_verify_3_step3]] 次の手順を実行して、インターフェイスグループおよび VLAN でホストされていた NAS データ LIF を、ノード 2 からノード 3 に移行します。</block>
  <block id="fd8bd88e1dcef54d04236465f2b87693" category="list-text">[[man_lif_verify_3_substpa]] インターフェイスグループ上の node1 に属していた node2 でホストされているデータ LIF を、同じネットワーク上の LIF をホストできる node3 のポートに移行するには、各 LIF に対して 1 回、次のコマンドを入力します。</block>
  <block id="630798093592f408d28e43d1a5875c4f" category="list-text">LIF のホームポートとホームノードを変更します <block ref="ffe3d697e3afcad8e9e0e14f978885cb" category="inline-xref-macro-rx"></block> LIF をホストしているポートとノードに対して次のコマンドを 1 回入力します。</block>
  <block id="569a27e0dcf14d4091837fcac510315b" category="list-text">[man_lif_verify_3_substpc ]] VLAN ポートでノード 1 に属していた node2 でホストされているすべてのデータ LIF を、同じネットワーク上の LIF をホストできるポート node3 に移行するには、各 LIF に対して 1 回、次のコマンドを入力します。</block>
  <block id="acdda21dc8c7ea3a875f05cfa2d42fb8" category="list-text">LIF のホームポートとホームノードを変更します <block ref="0ba0c3832c194a002bde244af82cc6e8" category="inline-xref-macro-rx"></block> LIF をホストしているポートとノードに対して次のコマンドを 1 回入力します。</block>
  <block id="f0de8680ab31eb7304741a5d6c335bce" category="list-text">[man_lif_verify_3_step4] 次のいずれかの操作を実行します</block>
  <block id="99025819fe651e3a15c4cafd9ba07587" category="list-text">[man_lif_verify_3_step5] プラットフォームで同じでないデータポートがある場合は、ブロードキャストドメインにポートを追加します。</block>
  <block id="76b84f6ac9c180bd922bf1f7f126e4f3" category="list-text">[man_lif_verify_3_step6] それぞれの LIF に対して次のコマンドを 1 回入力して、各 NAS データ LIF を node3 に移行します。</block>
  <block id="2a315513f7616cc1af14936ea2d874e2" category="list-text">[man_lif_verify_3_step7] データ移行が永続的であることを確認します。</block>
  <block id="2a5c2b7daa59600bf737f8138fa7c5d8" category="list-text">LIF のステータスを「 down 」に設定します。</block>
  <block id="95ecba7b6bea27535042e5096f91549c" category="list-text">いずれかのノードで次のコマンドを入力し、その出力を調べて、 LIF が正しいポートに移動されていること、およびいずれかのノードで次のコマンドを入力して LIF のステータスが「 up 」になっていることを確認します。</block>
  <block id="2e0b337c1378c2a234102f1198e8adba" category="list-text">[[man_lif_verify_3_step11]] いずれかの LIF が停止している場合は、次のコマンドを 1 回入力して、各 LIF について LIF の管理ステータスを「 up 」に設定します。</block>
  <block id="78036b97ca6165fc32dd17167726e77f" category="list-text">アップグレード後に行う AutoSupport メッセージを node1 のネットアップに送信します。</block>
  <block id="30c652bad12788fabddea0712def2e8e" category="doc">ONTAP 9.1 以降の FC スイッチレイアウトを再設定します</block>
  <block id="d30f280fa32f9327e8485ff0aa1b5b70" category="paragraph">既存の FC スイッチレイアウトが ONTAP 9.1 より前に構成されていた場合は、ポートレイアウトを再構成して、最新のリファレンス構成ファイル（ RCF ）を適用する必要があります。この手順は、 MetroCluster FC 構成にのみ適用されます。</block>
  <block id="37ce42e81f71d3eac5866566739a5a56" category="paragraph">ファブリックドメイン内の FC スイッチを特定する必要があります。</block>
  <block id="f2bd3f00211cc48acb66c611b574098b" category="paragraph">管理パスワードと FTP サーバまたは SCP サーバへのアクセスが必要です。</block>
  <block id="19c0b52227bc66456bf8c55fcff3eb89" category="paragraph">既存の FC スイッチレイアウトが ONTAP 9.1 より前に構成されたもので、 ONTAP 9.1 以降でサポートされるプラットフォームモデルにアップグレードする場合は、このタスクを実行する必要があります。ONTAP 9.1 以降用に設定された既存のスイッチレイアウトからアップグレードする場合は、 _not_required です。</block>
  <block id="27370eebc219409a38405d3941b09a1a" category="paragraph">この手順はシステムを停止せずに実行でき、ディスクが初期化されている場合は約 4 時間で完了します（ラックとスタックは除く）。</block>
  <block id="51c3ff1ea95b633c723b087fbf10b31f" category="inline-link-macro">カスタム AutoSupport メッセージは、スイッチの再設定前に送信します</block>
  <block id="cd7f6b17ef2ed204c4c6382062e38468" category="list-text"><block ref="cd7f6b17ef2ed204c4c6382062e38468" category="inline-link-macro-rx"></block></block>
  <block id="ef6f40d3ce7e7a9983b40931e61073f2" category="list-text"><block ref="ef6f40d3ce7e7a9983b40931e61073f2" category="inline-link-macro-rx"></block></block>
  <block id="3ff5cf5ad1c2c9c9e30693bbeb4d8306" category="list-text"><block ref="3ff5cf5ad1c2c9c9e30693bbeb4d8306" category="inline-link-macro-rx"></block></block>
  <block id="21a86fa1fb645db8452b527892434bd3" category="inline-link-macro">スイッチを永続的に無効にします</block>
  <block id="a7cd0f7276da428232eaddd32f025cec" category="list-text"><block ref="a7cd0f7276da428232eaddd32f025cec" category="inline-link-macro-rx"></block></block>
  <block id="7fc77faa536c8e7ba6f065e5930679ee" category="inline-link-macro">新しいケーブルレイアウトを決定します</block>
  <block id="1e3a603a58f58380bbf882725903f11b" category="list-text"><block ref="1e3a603a58f58380bbf882725903f11b" category="inline-link-macro-rx"></block></block>
  <block id="d627b57cf15134483e5785196cf7030f" category="inline-link-macro">RCF ファイルを適用し、スイッチを再接続します</block>
  <block id="d59f7f355b5fe1cff54983019e740407" category="list-text"><block ref="d59f7f355b5fe1cff54983019e740407" category="inline-link-macro-rx"></block></block>
  <block id="f3c7f494d0dbc1a358d6608915190a02" category="inline-link-macro">スイッチを永続的に有効にします</block>
  <block id="7fbb5636a5ddbbcf8eb4ac03b417349e" category="list-text"><block ref="7fbb5636a5ddbbcf8eb4ac03b417349e" category="inline-link-macro-rx"></block></block>
  <block id="0e8d966af50d635bc6072c43a2909953" category="list-text"><block ref="0e8d966af50d635bc6072c43a2909953" category="inline-link-macro-rx"></block></block>
  <block id="56b7bc3034bef19019ebfa88f6cac964" category="paragraph">「 storage aggregate relocation start 」、「 override-vetoes 」、および「 override-vetoes destination-checks 」オプションの詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ONTAP 9 コマンド：マニュアルページリファレンスにリンクするには、次の手順を実行します。</block>
  <block id="de10ab1a09136633c0a0d61641d1973a" category="list-text">[man_aggr_ffail _step1] 次のコマンドを入力して、アグリゲートのリストを表示します。</block>
  <block id="d741a7f5a9101301995b152ddb32e5b0" category="list-text">[[step2] の出力を比較します <block ref="fd60626f79429d907548fd26d9ef209a" category="inline-xref-macro-rx"></block> セクションで node1 用に取得した出力を確認します <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block> 再配置されていないアグリゲートがあることを確認します。</block>
  <block id="51cad6c5dffb7d53bbb0121b4ba9d369" category="list-text">[man_aggr_fil_Step3] ノード 4 の背後にあるアグリゲートの再配置を行います。</block>
  <block id="f51f0d388b73026dbf95e6d91f6386c1" category="list-text">次のコマンドを入力して、 node3 がアグリゲートのホームの所有者になっていることを確認します。</block>
  <block id="5bf0f8993606c9f18dbf04cc257eab62" category="paragraph">ノード 3 をホーム所有者としないアグリゲートは、の同じ再配置コマンドを使用してノード 3 に再配置できます <block ref="d5a5e127c26ff67c138bce9a8ae2c1fa" category="inline-xref-macro-rx"></block>。</block>
  <block id="1b5474698e4bc6bfa928589ed23b1571" category="list-text">[[man_install3_step1] ノード 3 のラックスペースがあることを確認します。</block>
  <block id="773d119bfcf7806a94138f5cf32996fe" category="list-text">[[step2] ノードモデルの _ インストールおよびセットアップ手順 _ に従って、ラックにノード 3 をインストールします。</block>
  <block id="5528857f98fded77afccd9d97a9a0711" category="list-text">[[step3]] ケーブルノード 3 を接続し、ノード 1 からノード 3 に接続を移動します。</block>
  <block id="63cc66bd900313017fb0834b1cbbbc81" category="list-text">[[man_install3_step4]] ノード 3 の電源をオンにしてから、コンソール端末で Ctrl+C キーを押してブートプロセスを中断し、ブート環境プロンプトにアクセスします。</block>
  <block id="6c2cb2a49908831d5791f25bb5371a3d" category="list-text">[[man_install3_step5]] で警告メッセージが表示される場合 <block ref="189d751c0d059b7e2fcaef080c81111f" category="inline-xref-macro-rx"></block>を使用して、次の操作を実行します。</block>
  <block id="8b2f23f3c3f7445164b524932e61d65b" category="cell">アップグレード後のシステムの構成</block>
  <block id="1f00007c6687ede4ed2d2b6e91ce451d" category="cell">デュアルシャーシ構成（コントローラが別々のシャーシに搭載されている場合）</block>
  <block id="0471a95f16e566048e66f2d81f432967" category="cell">シングルシャーシ構成（コントローラが同じシャーシに搭載されている場合）</block>
  <block id="0aaa18e158b2b22ed630223549710480" category="list-text">コンソールケーブルを node3 から node4 に切り替えます。</block>
  <block id="ffb09ffc35bea252e4e21d97d6400ddf" category="list-text">ノード 4 の電源をオンにしてから、コンソール端末で Ctrl+C キーを押してブートプロセスを中断し、ブート環境プロンプトにアクセスします。</block>
  <block id="85418bdb866bf209cc89fc9250fd0f04" category="paragraph">両方のコントローラが同じシャーシ内にある場合は、電源はすでにオンになっているはずです。</block>
  <block id="620bed07fd84663ccd35004111b0a13c" category="list-text">に警告メッセージが表示される場合は <block ref="189d751c0d059b7e2fcaef080c81111f" category="inline-xref-macro-rx"></block>の手順に従ってください <block ref="593996bb06ec10671cada9089fb35dd4" category="inline-xref-macro-rx"></block></block>
  <block id="a70d58ca96ede2bc6122de5eaba9afaf" category="list-text">コンソールケーブルを node4 から node3 に戻します。</block>
  <block id="0546806bd19b344e7d0ca13460d96992" category="list-text">[[man_install3_step17]] node3 にインストールされている ONTAP のバージョンが、 node1 にインストールされている ONTAP 9 のバージョンと同じかそれ以降である場合は、ディスクをリストして新しい node3 に再割り当てします。</block>
  <block id="7be8c6136747afe24ab6f25f931c2451" category="list-text">[[man_install3_step19]] 次のいずれかの操作を実行します</block>
  <block id="b65dee077de24058e64aa96e60e2a56a" category="cell">Does _ not_ have the correct or current ONTAP version on node3 （ノード 3 に正しい バージョンまたは現在の バージョンがありません</block>
  <block id="de22fad1fba6c28f624ef4e272674d1c" category="cell">ノード 3 に正しいバージョンまたは最新バージョンの ONTAP があること</block>
  <block id="060bac7551430a178937e2648b5887ad" category="cell">netboot\http://web_server_ip/path_to_webaccessible_directory/netboot/kernel`</block>
  <block id="00b4984c2d25fdcefc8d29921eef1f1e" category="cell">netboot\http://web_server_ip/path_to_webaccessible_directory/ontap_version_image.tgz`</block>
  <block id="69a0e067620a40fba4263752d3fe4568" category="paragraph">コントローラのアップグレードではなく、 ONTAP による環境の無停止アップグレードも記録されています。</block>
  <block id="3c0f763f2bc1dd7e6fadcfba8981f852" category="paragraph">http://web_server_ip/path_to_web-accessible_directory/ontap_version_image.tgz` にアクセスします</block>
  <block id="785f077ce03eca259bde1ebc98236191" category="list-text">[[man_install3_step26]] 続行する前に、に進みます <block ref="fae618cfa140cbca52d057afef5df1da" category="inline-link-macro-rx"></block> ノードの FC ポートまたは UTA / UTA2 ポートに必要な変更を加えるため。</block>
  <block id="28d8bed0b221acc406520dd121da3607" category="paragraph">これらのセクションで推奨される変更を行ってからノードをリブートし、メンテナンスモードに切り替えます。</block>
  <block id="11856588314d0c959b2b916a938edde8" category="inline-link-macro">ルート以外のアグリゲートを node1 から node2 に再配置します。</block>
  <block id="e58f70cf5e99e435b7646dac5761bf14" category="paragraph">システムに共有ディスクがあるかどうかに応じて、適切な形式の「 disk reassign 」コマンドを入力します。</block>
  <block id="b7e4748ce69e686648ca756a108c4b9a" category="cell">ディスクタイプ</block>
  <block id="7dcd3c42056665a1fe2861837141a4ef" category="cell">実行するコマンド</block>
  <block id="4f477aa8d74177d31f1821bc7c80ca24" category="cell">ディスクを共有しない</block>
  <block id="41ba4da5f40ea13d5dbc91aee57574fa" category="list-text">[man_install3_step29]] 「 n` 」と入力します。</block>
  <block id="fa85c8699d7f56dacbb4e8faea6f7ca9" category="list-text">[man_install3_step30]] 「 y 」と入力します</block>
  <block id="3048e99df5c1d939bc99597cf7c39563" category="list-text">[man_install3_step31]] 「 y 」と入力します。</block>
  <block id="d3d32ef75ce9ff503846dd7cba71bf68" category="admonition">* 警告 * ：次の手順を記載された順序で実行する必要があります。正しく実行しないと、原因が停止したり、データが失われたりする可能性があります。</block>
  <block id="78eac47117b1548ba46bbe2c967c2d0e" category="list-text">必要に応じて、 node1 アグリゲートをオンラインにします。</block>
  <block id="b954307d2b22ae21f23dbb0d3021f158" category="list-text">[man_install3_step33]] コントローラとシャーシが 'ha' として構成されていることを確認します</block>
  <block id="87e6946315bfe910b90ed3288541cb11" category="paragraph">次に、 ha-config show コマンドの出力例を示します。</block>
  <block id="915fe2ff566601b3b69119813a6a715c" category="paragraph">コントローラとシャーシが「 HA 」として構成されていない場合は、次のコマンドを使用して構成を修正します。</block>
  <block id="43a7c5c250e7fdd6688e153749ea1e66" category="list-text">[man_install3_step34]] ノード 3 のメールボックスを破棄します</block>
  <block id="8d299662551d8d2c41258f4f6d6c9a12" category="paragraph">コンソールに次のメッセージが表示されます。</block>
  <block id="675438e125383dfd4814c428aefc13d8" category="list-text">[man_install3_step35]] ローカルメールボックスを破棄することを確認するプロンプトで 'y' を入力します</block>
  <block id="0f364398a13cd3160c5a3eba4374e4ce" category="list-text">[[man_install3_step36]] メンテナンスモードを終了します。</block>
  <block id="6c2cda43f17004428fa50b03b8e373c3" category="list-text">[man_install3_step37]] node2 で、システムの日付、時刻、およびタイムゾーンを確認します。</block>
  <block id="dd26f958a5b55f32337b614d1f3ab0b4" category="list-text">[man_install3_step38]] ノード 3 で、ブート環境プロンプトで日付を確認します。</block>
  <block id="0c06e4208a8e928e9b4bef1d6977045b" category="list-text">[[man_install3_step39]] 必要に応じて、 node3 の日付を設定します。</block>
  <block id="837e654f683f43c3c5fa5a8cbc3e1758" category="list-text">[man_install3_step40]] ノード 3 で、ブート環境のプロンプトで時刻を確認します。</block>
  <block id="eddc7836dd13de8cd3248be302e5a1a2" category="list-text">[[man_install3_step41] 必要に応じて、 node3 に時間を設定します。</block>
  <block id="ec135f98d38764e511e3c524db87080e" category="list-text">[[man_install3_step43] 必要に応じて、 node3 にパートナーシステム ID を設定します。</block>
  <block id="7cab439150d9019f1bfd1705f608418d" category="list-text">[man_install3_step44]] ブート環境プロンプトでブートメニューにアクセスします</block>
  <block id="09022876876a6198264f6a07698a4d4c" category="list-text">[man_install3_step45]] ブートメニューで ' プロンプトで '6` を入力して 'option *(6) Update flash from backup config* を選択します</block>
  <block id="e5dbae26747d85c8b1145f23fe152ba6" category="list-text">[[man_install3_step46]] プロンプトで「 y 」と入力します。</block>
  <block id="8a149c3025530503ca7711ed784cd091" category="paragraph">ブートが正常に続行され、システム ID の不一致を確認するよう求められます。</block>
  <block id="c818f07a4851d5ab8b1a806cff312e25" category="list-text">[[man_install3_step47]] 次の例に示すように、不一致を確認します。</block>
  <block id="fb74f9c51a3457e88ae16fbed6c6b978" category="paragraph">正常にブートする前に、ノードが 1 回限りのリブートを実行する可能性があります。</block>
  <block id="f52332ab232b64dcde0ca0ea781c1755" category="list-text">[[man_install3_step48]] node3 にログインします。</block>
  <block id="0d5eded42a5e8cbfa58553f5dd4cd263" category="summary">node2 のルート以外のアグリゲートを node3 に再配置したら、そのアグリゲートを node3 から node4 に再配置する必要があります。</block>
  <block id="a6bef5c01b3429b867cf90c4a3de3fac" category="list-text">[[man_relocate_3_4_Step1] いずれかのコントローラで次のコマンドを入力し、出力を調べて再配置するルート以外のアグリゲートを特定します。</block>
  <block id="d7a08960a9315fad49e6564d33d4cb9c" category="list-text">次の手順を実行して、アグリゲートを再配置します。</block>
  <block id="8e8511da8932baf12f2a23e74d02e1c7" category="list-text">いずれかのノードで次のコマンドを入力して、 advanced 権限レベルにアクセスします。</block>
  <block id="1aa99f376709f3c0651ec2c29125ea92" category="paragraph">アグリゲートリストは、で取得したノード 4 が所有するアグリゲートのリストです <block ref="ba9af23ac982f5cc7837b1ecc9c3cb47" category="inline-xref-macro-rx"></block>。</block>
  <block id="35b5d5d5526d39377fa3fde3fe0919cd" category="paragraph">再配置はバックグラウンドで実行されます。アグリゲートの再配置には数秒から数分かかる場合があります。この時間には、クライアントの停止部分と停止部分の両方が含まれます。このコマンドでは、オフラインまたは制限されたアグリゲートが再配置されません。</block>
  <block id="edcc2ad4cfcd55c9715e9c9b93b871f5" category="list-text">[[step3]] 再配置のステータスを確認します。</block>
  <block id="435f14e8c9936aa21efde9eac795b40f" category="paragraph">アグリゲートが再配置されると、そのアグリゲートに対しては「 1 」と表示されます。</block>
  <block id="48cbb5f03f0f49e19a1fa9ce8f82961f" category="admonition">node2 のすべてのアグリゲートが再配置されてノード 4 に再配置されてから、次の手順に進みます。</block>
  <block id="b81c90895c008292ba5de518bf5f82a3" category="cell">再配置する対象</block>
  <block id="ffd498a9668905f8533b8e27b647969c" category="cell">すべてのアグリゲートが完了しました</block>
  <block id="80e9ee80960399cedd826a005aef0a59" category="cell">に進みます <block ref="77e0750fdfbf6d57fd18f2bfe5d7ed8c" category="inline-xref-macro-rx"></block>。</block>
  <block id="773fa54d2a554dd5ed9a1437e409ed98" category="cell">アグリゲートに障害が発生したか、拒否された</block>
  <block id="2716a9803b0e07013e6cd314ef080ce2" category="list-text">EMS ログで対処方法を確認します。</block>
  <block id="434233acf6409db55ccbef4618a05f4c" category="list-text">対処方法を実行します。</block>
  <block id="32a147207e605041251ef80abd4e6acf" category="paragraph">アグリゲートリストには、障害が発生したアグリゲートまたは拒否されたアグリゲートが表示されます</block>
  <block id="7b6a4090ff6553e6b643348d522b6560" category="list-text">次のコマンドを入力して、 admin レベルに戻ります。</block>
  <block id="91fabe0a54e8933e0d8a78d90297363f" category="paragraph">必要に応じて、次のいずれかの方法で強制的に再配置を実行できます。</block>
  <block id="fac06d8e56699ef41a841be6b176ebd7" category="list-text">拒否チェックの無視</block>
  <block id="2af820da1a1b18a7aaeb296667169248" category="paragraph">「 storage aggregate relocation start -override-vetoes -nd-controller-upgrade 」を実行します</block>
  <block id="d43b683fda30183131790fb642203a1d" category="list-text">デスティネーションチェックの無効化</block>
  <block id="01c6e1a269dc83c83d6e3aa64688f33f" category="paragraph">「 storage aggregate relocation start -override-destination-checks -ndocontroller -upgrade 」を参照します</block>
  <block id="74e5caecf2b87f363c4a9dae7dca9c15" category="list-text">[man_relocate_3_4_Step5] - ノード 2 のすべての非ルートアグリゲートがオンラインであり、ノード 4 の状態であることを確認します。</block>
  <block id="ba83d23180997e074fb16dcfc2cd6da8" category="paragraph">node2 アグリゲートがのコマンドの出力に表示されています <block ref="ba9af23ac982f5cc7837b1ecc9c3cb47" category="inline-xref-macro-rx"></block>。</block>
  <block id="176e1e5a47c3db6bc56e4ccb10905065" category="list-text">オフラインになったアグリゲートや外部になったアグリゲートがある場合は、各アグリゲートに対して次のコマンドを使用してオンラインにします。</block>
  <block id="00751ef0752943fad6f5c251990dbefb" category="list-text">ノード 2 のアグリゲート内のすべてのボリュームがノード 4 でオンラインになっていることを確認します。</block>
  <block id="9fe3979261ad706bcee5b4c047e18834" category="list-text">ノード 4 でオフラインになっているボリュームがある場合は、オンラインにします。</block>
  <block id="54ab7b4b354c31db3c1958974da7349a" category="list-text">ノード 4 のアップグレード後の AutoSupport メッセージをネットアップに送信します。</block>
  <block id="9fe5e1c0bb75be0e3f5f145103e72caa" category="cell">ONTAP 9.5 以前</block>
  <block id="6bdf9080f49ca89e65220e312d51e688" category="list-text">次のコマンドを使用して、キー管理サーバを追加します。</block>
  <block id="0dd9d4ff0944e970430f96022e169191" category="list-text">次のコマンドを使用して、キー管理サーバが正常に追加されたことを確認します。</block>
  <block id="3bf7f9a82df0c130b46780052ca49e4c" category="list-text">次のコマンドを使用して、新しいノードでキー管理サーバセットアップウィザードを起動します。</block>
  <block id="a5e463e5138622ba8c2355b41f67a0ff" category="paragraph">このコマンドには、オンボードキーマネージャ（ OKM ）のパスフレーズが必要です</block>
  <block id="ce4c94d5e669859aacda58a7f2429ddf" category="cell">その他すべての ONTAP バージョン</block>
  <block id="db3c32b2915aa7ffd2fcacb5e017dbc9" category="list-text">ノード 1 で次のコマンドを入力して、再配置ステータスを確認します。</block>
  <block id="d550e31a6ccbb056c2d7ab1e68692363" category="admonition">ノード 1 に所有されているルート以外のアグリゲートがすべて node2 に再配置されてから、次の手順に進みます。</block>
  <block id="b77ef5d765d72155b0da6da7cb47f0ed" category="cell">再配置の場合</block>
  <block id="b15b9b498c001e92853f9fea21ef7ef8" category="cell">作業</block>
  <block id="a0fba600b5c045fae79ae007d77c6f09" category="cell">すべてのアグリゲートのすべてが完了しました</block>
  <block id="2ac86beb93582e4754639412014b59eb" category="cell">に進みます <block ref="449ef68af8e0094cdf2287c1416d1ff3" category="inline-xref-macro-rx"></block>。</block>
  <block id="1141d7067c13df20d6186fc00309e10b" category="cell">いずれかのアグリゲートに障害が発生するか、または拒否されます</block>
  <block id="9eb367512ec712e8def159a017644487" category="list-text">admin レベルに戻ります。必要に応じて、次のいずれかの方法で強制的に再配置を実行できます。</block>
  <block id="a927bee35dc67490b39aa8c4291ca745" category="list-text">拒否のチェックを無視：「 storage aggregate relocation start -override-vetoes true -nd-controller-upgrade</block>
  <block id="592a7b363e77ec54f4a9454a15b2fa70" category="list-text">デスティネーションのチェックを無効にします。「 storage aggregate relocation start -override-destination-checks true -nd-controller-upgrade</block>
  <block id="dc1c151c89f0b15dbd97af39108f3403" category="list-text">[man_relocate_1_2_step4] ルート以外のすべてのアグリゲートがオンラインであり、 node2 にあるそれらの状態を確認します。</block>
  <block id="5614977b273243c18da92e09a399f4ff" category="list-text">node2 で次のコマンドを入力し、出力を調べて、すべてのボリュームがオンラインであることを確認します。</block>
  <block id="c5fde6e8a15ba7f224d13ea83e3c2c34" category="paragraph">このコマンドで使用する「 vserver -name 」は、前の「 volume show 」コマンドの出力にあります。</block>
  <block id="9b65be5be5396e39e6973853034324bc" category="list-text">node2 で次のコマンドを入力します。</block>
  <block id="7fb67b5bff7cd5b5583c80436154eeca" category="paragraph">出力に次のメッセージが表示されます。</block>
  <block id="bc50ecc4b8edbc1374bfa0e110d2cdf4" category="list-text">node1 のルート以外のアグリゲートがオンラインになっていないことを確認します。</block>
  <block id="e68954fba0117f19310a10c0e5f075ec" category="paragraph">出力には、すでに node2 に再配置されているオンラインのルート以外のアグリゲートは表示されません。</block>
  <block id="81a9550623341df13e0aba0c1ee5a8fb" category="doc">スイッチを永続的に無効にします</block>
  <block id="54df0e073e21c236c69bb55be46a0eef" category="paragraph">ファブリックの構成を変更できるように、ファブリック内のスイッチを永続的に無効にする必要があります。</block>
  <block id="ede6141978802cdf393c52a40bfc7002" category="paragraph">スイッチを無効にするには、スイッチのコマンドラインでコマンドを実行します。使用するのは ONTAP コマンドではありません。</block>
  <block id="f93acf16d7cf836bd48acbaead6bc9d8" category="paragraph">スイッチを永続的に無効にします。</block>
  <block id="616a5e8ee58c5b9f34f27c22233e48ac" category="list-text">Brocade スイッチの場合は、「 witchCfgPersistentDisable 」コマンドを使用します。</block>
  <block id="cc28c008eb62a2601a150836c9ef2378" category="list-text">Cisco スイッチの場合は 'uspend' コマンドを使用します</block>
  <block id="1e4597321089186160edaf9ec94c2070" category="paragraph">次のコマンドは Brocade スイッチを永続的に無効にします。</block>
  <block id="b537a2a134134343c8340992032bb870" category="paragraph">次のコマンドは、 Cisco スイッチを無効にします。</block>
  <block id="5558cf6a71b5cb1c7c5c61639dd48b9f" category="doc">アップグレード後に LIF が無効なポートに接続されています</block>
  <block id="5f1f479c27b40118bdce39d08fd87e39" category="paragraph">アップグレードの完了後、 MetroCluster 構成を使用している場合は、誤ったポートに FC 論理インターフェイス（ LIF ）が残っている可能性があります。再同期処理を実行して、 LIF を正しいポートに再割り当てすることができます。</block>
  <block id="c5f17233f63f2587b0691c2790a00316" category="list-text">MetroCluster を正しいポートに再割り当てするには、「 cifs vserver resync 」コマンドを入力します。</block>
  <block id="c1b0decfff03539572f29fa76c9fa6a8" category="list-text">システムプロンプトで、 node4 にログインします。</block>
  <block id="3be6725513a330b5d11f9b5f7999fb8b" category="list-text">ノード 4 がノード 3 と同じクラスタに含まれていること、および正常であることを確認します。</block>
  <block id="85d0ae2423c3b64edbdd304078db296d" category="list-text">ノード 4 がノード 3 と通信できること、およびすべての LIF が動作していることを確認します。</block>
  <block id="a977a3a71a2db8bc73e5bd38f68aa82d" category="cell">ノード 4 の状態</block>
  <block id="4acd31ec7c5bc2e4aa0a25c4c79958d6" category="cell">ノード 3 とは別のシャーシに設置します</block>
  <block id="b5c12383845491dd07b053068802e47c" category="paragraph">次の手順を実行して、ノード間の HA インターコネクトを接続します。</block>
  <block id="64764fe30a19213c6eca8ee4dc0abe64" category="list-text">node3 の上部インターコネクトポートを node4 の上部インターコネクトポートに接続します。</block>
  <block id="d32a43feea6183c721d8fb1e167ffba4" category="list-text">node3 の下部インターコネクトポートを node4 の下部インターコネクトポートに接続します。</block>
  <block id="2b7d6e150b1ad9a7324920d58add53e8" category="list-text">に進みます <block ref="41c022824608ca37267e3212853fde36" category="inline-xref-macro-rx"></block>。</block>
  <block id="02bbb5b96351de7fa7429d251ff6aa5a" category="cell">ノード 3 と同じシャーシに搭載します</block>
  <block id="88365b6e3e2809b970dbfedc2b94e36f" category="cell">に進みます <block ref="41c022824608ca37267e3212853fde36" category="inline-xref-macro-rx"></block>。ノード間の HA インターコネクトを手動で接続する必要はありません。同じシャーシ構成では、 HA インターコネクトがバックプレーンを使用して自動的に接続されます。</block>
  <block id="30a868238f55d1d59e57331a33e79d19" category="list-text">[[Step5] 次のいずれかの操作を行います。</block>
  <block id="aa9eec4e05c527e3e3152695def83f22" category="cell">SAN 環境の場合</block>
  <block id="8c059d90c29a474c1e6a9e3012ec3908" category="cell">- 完了しました <block ref="fd65cf600cef4b4bb6b03d85bec2cb92" category="inline-xref-macro-rx"></block> をクリックして、セクションに移動します <block ref="433d8081a28a0d8c06bf54d23d4e1297" category="inline-link-macro-rx"></block>。</block>
  <block id="f85d6db9ec5b69c436957b687c13324c" category="cell">SAN 環境では使用できません</block>
  <block id="3e86840ff7c230f787d687166a945ac9" category="cell">手順 6 をスキップしてセクションに進みます <block ref="433d8081a28a0d8c06bf54d23d4e1297" category="inline-link-macro-rx"></block>。</block>
  <block id="2e5d45b5b4c7ee72c9442a1c00ef4881" category="list-text">[[Step6] ノードの 1 つで次のコマンドを入力して、ノード 3 とノード 4 の両方がクォーラムにあることを確認します。</block>
  <block id="07794a041dac9632db557c4f4b050f28" category="paragraph">event log show -messagename scsiblade. *</block>
  <block id="340477541e5fdc93ffc7488a1377706f" category="paragraph">次の例は、クラスタ内のノードがクォーラムにある場合の出力を示しています。</block>
  <block id="d5560010a4b579866a98e0b680b5c248" category="paragraph">SnapMirror 関係が Transferring 状態でない場合は、中止は失敗します。</block>
  <block id="4799633d9eb6a31235d0102c0d2b1812" category="list-text">スイッチの設定が保存されたことを確認します。</block>
  <block id="1dd8fdc75f0d1d8e00ce9ec094e07e48" category="list-text">で作成したケーブルレイアウトを使用して、両方の FC-to-SAS ブリッジを FC スイッチにケーブル接続します <block ref="1e3a603a58f58380bbf882725903f11b" category="inline-link-macro-rx"></block>。</block>
  <block id="31ff80cac58b75352ccd7cb184fd3f2f" category="list-text">ポートがオンラインであることを確認します。</block>
  <block id="9537b49cfa32d77c52482152d98a6cb7" category="list-text">Brocade スイッチの場合は 'witchshow' コマンドを使用します</block>
  <block id="3f55318e22b0811a1f8462eb6d4db6a3" category="list-text">Cisco スイッチの場合は、 show ’ interface brief ’コマンドを使用します。</block>
  <block id="8a2a15ae261b57a2a7df03e71f7e6475" category="list-text">コントローラの FC-VI ポートとスイッチをケーブル接続します。</block>
  <block id="ca6b3b9d3521dc913cc6a3273b729760" category="list-text">既存のノードから、 FC-VI ポートがオンラインであることを確認します。</block>
  <block id="823eab722f92d2115c2effb645f5bc93" category="paragraph">MetroCluster インターコネクト・アダプタ・ショー</block>
  <block id="39b8d1f1fde39b620b3646f81db31ad4" category="paragraph">MetroCluster interconnect mirror show</block>
  <block id="b01288321618ebc4fb03d07a48ec080c" category="list-text">[[step1] 次のコマンドを入力し、その出力を取得します。</block>
  <block id="a9f729911b0af57b8d1d08f2584625b6" category="paragraph">「 network route show 」と表示されます</block>
  <block id="db55c697ce008329c5b7d6628a252009" category="list-text">次のコマンドを入力し、出力をキャプチャします。</block>
  <block id="743c43b069d893a88b2732926f57f5db" category="paragraph">vserver services name-service dns show</block>
  <block id="e06877d8614b07524debe1149bac1e78" category="list-text">[man_record_node1_step3] どちらかのコントローラで次のコマンドを入力して、ノード管理ポートとクラスタネットワークを特定します。</block>
  <block id="2f163f9a8fcb45472b7c0a84f088f4de" category="paragraph">次の例に示すように、クラスタ内のノードについて、クラスタ LIF 、クラスタ間 LIF 、ノード管理 LIF 、およびクラスタ管理 LIF が表示されます。</block>
  <block id="5feb72299c708ed8b5e527e5963476fe" category="admonition">システムにクラスタ間 LIF がない可能性があります。</block>
  <block id="8fac25219c50f2cc9f32de6a06dd0afa" category="list-text">のコマンドの出力に情報を記録します <block ref="63c89ae17921f4702dc8719a6b0480a8" category="inline-xref-macro-rx"></block> をクリックしてください <block ref="3b6c063a8efbc88c969c7838f0611434" category="inline-link-macro-rx"></block>。</block>
  <block id="4dea80d6ab207bc372820b8a74a583df" category="list-text">node1 で次のコマンドを入力します。</block>
  <block id="c98e23a6f059dd6276dbffb11af4d53d" category="paragraph">次の例に示すように、ノードの物理ポートが表示されます。</block>
  <block id="00e8b0b0df56090152aa5c1cb1bd4a45" category="paragraph">ブロードキャストドメインは、あとで手順の新しいコントローラの新しいポートにマッピングする必要があります。</block>
  <block id="554c196eb9c5953b024f2cc2c07ba455" category="paragraph">次の例に示すように、ノードの FC ポートが表示されます。</block>
  <block id="5d3cbeccba5dac0370b9c40f95d5d063" category="list-text">まだ設定していない場合は、次のコマンドを入力して、ノード 1 でインターフェイスグループまたは VLAN が設定されているかどうかを確認します。</block>
  <block id="f6f8a9635aff4aef3e52d34ba925926b" category="paragraph">このセクションの情報を使用します <block ref="3b6c063a8efbc88c969c7838f0611434" category="inline-link-macro-rx"></block>。</block>
  <block id="8c197b9ca5649983d88c28532ed4d151" category="inline-link-macro">アップグレードのためのノードを準備</block>
  <block id="43ac883a14249b98283d8e22e6127ba8" category="cell">セクションに NVRAM システム ID 番号を記録しました <block ref="7eb7fb0c5f668aa416ee9ca8030df058" category="inline-link-macro-rx"></block>。</block>
  <block id="722b28462ad8b131d5cfd84a2c2f881a" category="cell">次のセクションに進みます。 <block ref="830cfeba72054433fc0dcccc19f6d055" category="inline-link-macro-rx"></block>。</block>
  <block id="105886469ee101bc5425140d42df484b" category="cell">セクションに NVRAM システム ID 番号が記録されていませんでした <block ref="7eb7fb0c5f668aa416ee9ca8030df058" category="inline-link-macro-rx"></block></block>
  <block id="1c5349057e46140156bc0d263443383c" category="cell">- 完了しました <block ref="91d37fb83183cdc5da036c812dec4eb7" category="inline-xref-macro-rx"></block> および <block ref="2a3037c203afea4262e2cc05eb0708b3" category="inline-xref-macro-rx"></block> に進みます <block ref="830cfeba72054433fc0dcccc19f6d055" category="inline-link-macro-rx"></block>。</block>
  <block id="866ca6e46d7456a7c276afd3eb54db5d" category="list-text">[[man_record_node1_step11]] どちらかのコントローラで次のコマンドを入力します。</block>
  <block id="9bcd562ef44a8e11e5fd0e0492ebe6c4" category="paragraph">次の例に示すように、 node1 に関する情報が表示されます。</block>
  <block id="5b9519c4c2b57166c18827dfa9f50f7c" category="list-text">[[man_record_node1_step12]] セクションで使用する NVRAM システム ID 番号を記録します <block ref="b27daeccf5fbd8a2e88a3636ee615b74" category="inline-link-macro-rx"></block>。</block>
  <block id="d3724945a8761461ffee756c3d88b5f7" category="paragraph">ノード 4 にオンボードの FC ポート、オンボード UTA / UTA2 ポート、または UTA / UTA2 カードがなく、ストレージディスクが搭載されたシステムをアップグレードする場合は、に進みます <block ref="fface1ac702bde6d72ceb6e55eb8b2b6" category="inline-link-macro-rx"></block>。</block>
  <block id="bdb2780eb5f1795b94cdb7892cd5237b" category="list-text">新しいノードの FC 設定を、元のノードで取り込んだ設定と比較します。</block>
  <block id="348795cf2ff362808ef4789bfce998c1" category="paragraph">`-type ` は FC4 のタイプ、ターゲットまたはイニシエータである。</block>
  <block id="e7df8bff382bf85b07ece9703c2f6808" category="cell">元のノードでキャプチャしたのと同じです</block>
  <block id="7327bd79e6072c9ccdc2b478d3afacfb" category="cell">元のノードでキャプチャしたものとは異なります</block>
  <block id="5f05ecbc9bc4d038e9ed396780511251" category="list-text">に進みます <block ref="5752cac0a470e06ffceef40fba1931c1" category="inline-xref-macro-rx"></block> ノード 4 に UTA / UTA2A カードまたは UTA / UTA2 オンボードポートがある場合</block>
  <block id="1e7bd254c963a338c489202373c4ab17" category="list-text">セクションをスキップして、に進みます <block ref="fface1ac702bde6d72ceb6e55eb8b2b6" category="inline-link-macro-rx"></block> ノード 4 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがない場合</block>
  <block id="fe3a7dc1b68f02ec33d1b3d2d4f9bc56" category="list-text">「 system node hardware unified-connect show 」コマンドと「 ucadmin show 」コマンドの出力を調べ、 UTA / UTA2 ポートに希望するパーソナリティが設定されているかどうかを確認します。</block>
  <block id="e48bdf2afbb963c9c495bf4f571895e3" category="cell">に進みます <block ref="ffd96dfebf67595a1e4a6d625bee7496" category="inline-xref-macro-rx"></block>。</block>
  <block id="fa74cc012fef0feff6e924f8039749e1" category="cell">手順 5 から 12 を省略して、に進みます <block ref="ff1d63240cee2bdc1933860b7f07a8df" category="inline-xref-macro-rx"></block>。</block>
  <block id="6515c49355bf1419526d1fd9c737ec8c" category="cell">UTA / UTA2A カードのポート</block>
  <block id="36408e09de8feb146f54fe1e158d953d" category="list-text">「 -m' 」はパーソナリティ・モードである FC または 10 GbE UTA です。</block>
  <block id="0e0addb82f30f2aa03c68b146f054849" category="list-text">次のコマンドを入力し、出力を確認して、設定を確認します。</block>
  <block id="315359e3c6323d4eda359054319c0815" category="list-text">次のいずれかを実行します。</block>
  <block id="9b035cae403b89af2a989a976daad295" category="paragraph">次の例の出力では ' アダプタ「 1b 」の FC4 タイプがイニシエータに変更されており ' アダプタ「 2a 」と「 2b 」のモードが CNA に変更されています</block>
  <block id="f8cd2564c015235fc797e229583e1023" category="list-text">[[man_check_4_Step13]] ポートをケーブル接続します。</block>
  <block id="4cd072d48be3e3705aa89a6c546ddb3c" category="paragraph">ONTAP 9.5 以降では、 Key Management Interoperability Protocol （ KMIP ）サーバを使用して認証キーを管理できます。</block>
  <block id="0d687993b6b67e20ff0472f32d9693b0" category="paragraph">新しいコントローラモジュールおよび新しいディスクシェルフと既存の FC スイッチとのケーブル接続を決定する必要があります。</block>
  <block id="6485f9afbf9c5f34e988054e67e3b142" category="paragraph">このタスクは MetroCluster サイトごとに実行する必要があります。</block>
  <block id="8d20a51d0c0718e7e116461f15d49fb3" category="paragraph">アップグレード手順の実行中、リモート LIF は SAN LUN へのトラフィックを処理します。アップグレード時にクラスタやサービスの健全性を維持するために、 SAN LIF を移動する必要はありません。SAN LIF は、新しいポートにマッピングする必要がないかぎり移動されません。ノード 4 をオンラインにしたあと、 LIF が正常に機能しており、適切なポートに配置されていることを確認します。</block>
  <block id="12720c14368020238cd7150824f980eb" category="list-text">node3 が所有していないすべての NAS データ LIF を表示するには、いずれかのノードで次のコマンドを入力し、出力をキャプチャします。</block>
  <block id="9482a7fa27802a7ab7e05f7ded4a42bd" category="paragraph">network interface show -role data -curr-node node3 -is-home false</block>
  <block id="dac6519e0e0abeb2d86af52963ff687b" category="list-text">[man_lif_verify_4_Step3] インターフェイスグループおよび VLAN でホストされている NAS データ LIF をノード 3 からノード 4 にすべて移行するには、次の手順を実行します。</block>
  <block id="bea582814d8029e4e79ed1f1f67178fa" category="list-text">[[man_lif_verify_4_substpa]] インターフェイスグループ上の node2 に属していた node3 でホストされている LIF を、同じネットワーク上の LIF をホストできる node4 のポートに移行するには、それぞれの LIF に対して 1 回、次のコマンドを入力します。</block>
  <block id="bb2b7d2b593abe391065563c1a991c60" category="list-text">LIF のホームポートとホームノードを変更します <block ref="f2edbd3671dda6c8c6a0d5b9f5139a77" category="inline-xref-macro-rx"></block> LIF をホストしているポートとノードに対して次のコマンドを 1 回入力します。</block>
  <block id="ca8c32ea8d9ad20129f9bd82dd476c20" category="list-text">[man_lif_verify_4_substpc ]] VLAN ポート上の node2 に属していた node3 でホストされている LIF を、同じネットワーク上の LIF をホストできる node4 のポートに移行するには、それぞれの LIF に対して 1 回、次のコマンドを入力します。</block>
  <block id="b9698583aeb95570efa407aaaba06094" category="list-text">LIF のホームポートとホームノードを変更します <block ref="239198568c8cd082441ca4901dc23f34" category="inline-xref-macro-rx"></block> LIF をホストしているポートとノードに対して次のコマンドを 1 回入力します。</block>
  <block id="1ba9f89e7307ad05e44ad05bb958ca27" category="list-text">[[man_lif_verify_4_Step4]] 次のいずれかの操作を行います。</block>
  <block id="486afcecd3768de955874ac9b04d982d" category="list-text">[man_lif_verify_4_Step5] プラットフォームで同じでないデータポートがある場合は、次のコマンドを入力してブロードキャストドメインにポートを追加します。</block>
  <block id="59770005b7a829dfa2de1246fe18d7ed" category="paragraph">次の例は、 IPspace デフォルトで、ノード「 6280 」のポート「 e0a 」とノード「 8060-1 」のポート「 e0i 」をブロードキャストドメイン管理に追加します。</block>
  <block id="271e5c91e502440a4641a9bc05a02df6" category="list-text">各 NAS データ LIF について次のコマンドを 1 回入力して、各 NAS データ LIF を node4 に移行します。</block>
  <block id="45c770ea39ce7a89e3fa87a10d51bc25" category="list-text">データ移行が永続的であることを確認します。</block>
  <block id="8ad5a71314693935e3bce24596d44ef1" category="list-text">[man_lif_verify_4_Step8] 次のコマンドを入力して ' すべてのリンクのステータスを up で確認し ' すべてのネットワーク・ポートの一覧を表示し ' その出力を調べます</block>
  <block id="2a2c5a2b5a3d8988556727450e1a29e2" category="paragraph">次に、一部の LIF が稼働し、その他が停止している「 network port show 」コマンドの出力例を示します。</block>
  <block id="ed11f195f4f8f4017e6e51d88466a5a2" category="list-text">[man_lif_verify_4_Step9] 'network port show コマンドの出力に新しいノードでは使用できず ' 古いノードに存在するネットワーク・ポートが表示される場合は ' 次の手順を実行して古いネットワーク・ポートを削除します</block>
  <block id="7d4a5f4bd766fdaca38d0e0f6141ee90" category="list-text">次のコマンドを入力して、 advanced 権限レベルに切り替えます。</block>
  <block id="c72099f9d20f92c2086837037b97fc90" category="list-text">古いネットワークポートごとに次のコマンドを 1 回入力します。</block>
  <block id="175804e163fef92888323305db0643d2" category="paragraph">'network interface show -data-protocol iscsi|fcp-home-node node4</block>
  <block id="35ca9ca12f5a137b27b3f6675a68cbd9" category="list-text">ノード 4 に、ノード 2 に存在しないポート上に SAN LIF または SAN LIF のグループがある場合は、次のいずれかのコマンドを入力して、ノード 4 の適切なポートにそれらの LIF またはグループを移動します。</block>
  <block id="f1eab2abaeb4ee31499ddda2b6919c69" category="list-text">いずれかのノードで次のコマンドを入力し、出力を調べて、すべての SAN LIF が正しいポートに移動されていること、および LIF のステータスが「 up 」になっていることを確認します。</block>
  <block id="b0da7502535a227e64440d7a547ea6dd" category="list-text">[[man_lif_verify_4_Step13]] LIF が 1 つでも停止している場合は、各 LIF に対して次のコマンドを 1 回入力して、 LIF の管理ステータスを「 up 」に設定します。</block>
  <block id="aa7894ff1a9d6e45a378e3bbe939cb80" category="list-text">クラスタ内のノード数を確認します。</block>
  <block id="0520dd500d342650e01dc4a099a267bb" category="paragraph">次の例に示すように、クラスタ内のノードが表示されます。</block>
  <block id="44fe06f5f571cfd547aa44853b8a4f9d" category="list-text">[[man_stリタイヤ 1_step2] ストレージフェイルオーバーを無効にします。</block>
  <block id="f4c0a7ed135e62d38e56c9a16bf13990" category="list-text">いずれかのノードで次のコマンドを入力して、クラスタハイアベイラビリティを無効にします。</block>
  <block id="27a8730bbe580dd65301349dcdc539f8" category="list-text">ストレージフェイルオーバーを無効にします。</block>
  <block id="8048736d756a32521201f074d2730091" category="list-text">ストレージフェイルオーバーが無効になっていることを確認します。</block>
  <block id="2adf18e995507a97d0d1e8af8c85e4f0" category="paragraph">次の例は、ノードでストレージフェイルオーバーが無効になっている場合の「 storage failover show 」コマンドの出力を示しています。</block>
  <block id="c4b530495164ce1eeaab4b08e9534859" category="list-text">データ LIF のステータスを確認します。</block>
  <block id="5fbed693cb6b31f11a703890fc87d45f" category="inline-link-macro">不具合のすす</block>
  <block id="8405f8a611485472bfa1ab420a9a9a02" category="cell">に進みます <block ref="caeb7d58e7293f2d87a762ba5d4df397" category="inline-xref-macro-rx"></block>。</block>
  <block id="a4749d514e1548558e90fda0a15746ff" category="cell">に進みます <block ref="242f372e62d4ec9b0208b2bd3cc69817" category="inline-xref-macro-rx"></block>。</block>
  <block id="9cd28d632d37554bc6b8bc94ae2073e5" category="list-text">[[man_denter_1_step6] どちらかのノードの advanced 権限レベルにアクセスします。</block>
  <block id="fa3bee6ea4c5e23d15d4c301c3141248" category="list-text">[[step7] クラスタ HA が無効になっていることを確認します。</block>
  <block id="f113138c0fa8fa7f0032e6a3fdc72c0a" category="paragraph">クラスタ HA が無効になっていない場合は、この手順を繰り返します <block ref="af42b54b31642eb564c9e40bb4e550a9" category="inline-xref-macro-rx"></block>。</block>
  <block id="a646d4448d74f354bb17f8dd1f3b7055" category="list-text">[[man_リタイヤ _1_step8] 現在 node1 にイプシロンが設定されているかどうかを確認します。</block>
  <block id="c3eb5e5ac705b7d7ad0bcb8afd287152" category="paragraph">ノード数が偶数のクラスタの場合は同票となる可能性があるため、 1 つのノードにイプシロンと呼ばれる追加の投票荷重が設定されます。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> 詳細については ' を参照してください</block>
  <block id="1eca50be6c9670acdf0a0635f4b23d14" category="admonition">4 ノードクラスタの場合は、クラスタ内の別の HA ペアのノードにイプシロンが設定されていることがあります。</block>
  <block id="d582f21b8a69a6d942b9b1950f660f93" category="paragraph">次の例では、 node1 にイプシロンが設定されています。</block>
  <block id="56083d4ecb6381ba220374fe9dad2f3b" category="list-text">node1 にイプシロンが設定されている場合は、 node2 に転送できるように、イプシロンを false に設定します。</block>
  <block id="c50c8db58d7cb6ecb263a833f1594cf2" category="list-text">node2 のイプシロンを true に設定して ' イプシロンを node2 に転送します</block>
  <block id="6f223a55c3e4c37c6154b48d9ad6d103" category="list-text">node2 に対する変更が発生したことを確認します。</block>
  <block id="0e3cd42cd6320745185eaab80053ad4a" category="paragraph">node2 のイプシロンを true に設定し、 node1 のイプシロンを false に設定します。</block>
  <block id="f11c9613319f6e81aa0fa42fd830a1cb" category="list-text">セットアップが 2 ノードスイッチレスクラスタかどうかを確認します。</block>
  <block id="f72b72c0926d6dd4d51ae53a658c3ab1" category="list-text">node1 プロンプトから node1 を停止します。</block>
  <block id="ecd3525fa194c253a8cabf432a4a5041" category="list-text">システムを停止するかどうかを確認するメッセージが表示されたら、「 y 」と入力します。</block>
  <block id="4554f5f9818af46c131a159c2ec43887" category="paragraph">ノードはブート環境のプロンプトで停止します。</block>
  <block id="839c9527e6867357b4949b3cb19bd5a6" category="list-text">node1 にブート環境プロンプトが表示されたら、シャーシまたはラックからブート環境プロンプトを削除します。</block>
  <block id="1ae386d38d4b2e016ff919c2da5eb601" category="list-text">ポートの物理的な状態が「停止」である場合は、ネットワークケーブルの物理的な接続を確認します。</block>
  <block id="58e9601fd22e1eb1174624568b62ceaf" category="paragraph">内蔵ディスクドライブにアグリゲートがあるコントローラをアップグレードしない場合は、このセクションをスキップし、セクションに進みます <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block>。</block>
  <block id="3553fa4aee6c92a690d8b3d2baf9f853" category="list-text">元のノードごとに 1 回、ノードシェルを入力します。</block>
  <block id="4321f2c566f6fd9e0f937fb671257921" category="list-text">内蔵ドライブを表示します。</block>
  <block id="71d2d9e08815f28311d42e1fe65de729" category="paragraph">「 sysconfig -av 」</block>
  <block id="1a1cbaa9026d328ea0e1db1e1d719d1e" category="paragraph">次の例に示すように、ストレージを含む、ノードの構成に関する詳細情報が出力に表示されます。</block>
  <block id="1cec74df52c25d24213897a006ddbc7e" category="list-text">「 sysconfig -av 」コマンドのストレージ出力を調べて内蔵ディスク・ドライブを特定し、その情報を記録します。</block>
  <block id="63590836c75e5189303be6a7e2f1c0d6" category="paragraph">内蔵ドライブの ID は先頭に「 00 」と表示されます。「 00 」は内蔵ディスクシェルフを示し、小数点以下の数字は個々のディスクドライブを示します。</block>
  <block id="2581141629fb014ce68faf5b319c8a1e" category="list-text">[[man_aggr_step4]] 両方のコントローラで次のコマンドを入力します。</block>
  <block id="5047ace67eeca6eaa0de7c2c565db85b" category="paragraph">次の例の出力の一部に示すように、ノードのアグリゲートステータスが表示されます。</block>
  <block id="67e1c5578ec472925218b8535f73fd69" category="admonition">アグリゲートの作成に使用されるデバイスは物理ディスクではなく、パーティションの場合もあります。</block>
  <block id="ffdb41868fb358842d696b4ff8240d4e" category="list-text">aggr status -r コマンドの出力を調べて、内蔵ディスク・ドライブを使用しているアグリゲートを特定し、その情報を記録します。</block>
  <block id="4da1edbdb956754e59f0224136b9f957" category="paragraph">前の手順の例では、シェルフ ID が「 0 」の場合、「 aggr2 」は内蔵ドライブを使用します。</block>
  <block id="a0baee3eabdee6658afa877291a41600" category="list-text">両方のコントローラで次のコマンドを入力します。</block>
  <block id="8248266e12181ad17765b9cf8ce40a99" category="paragraph">次の例の出力の一部に示すように、アグリゲート上のボリュームに関する情報が表示されます。</block>
  <block id="f8fee0808da945cb32ac4bfb7b116901" category="paragraph">の出力に基づきます <block ref="fafa89bc8a6136079f9e2f0a2a127d07" category="inline-xref-macro-rx"></block> 手順 6 では、 aggr2 は 3 つの内蔵ドライブ「 0a.00.1 」、「 0a.00.3 」、「 0a.00.9 」を使用します。「 aggr2 」のボリュームは「 vol6 」、「 vol5 」、「 vol14 」です。また、手順 6 の出力では、「 aggr0 」の読み出しには、アグリゲートの情報の先頭に「 root 」という単語が含まれています。ルートボリュームが含まれていることを示します。</block>
  <block id="85eba1a1c40e954eefa7c966f21fa202" category="list-text">「 aggr status -v 」コマンドの出力を調べ、内部ドライブ上のアグリゲートに属するボリュームと、それらのボリュームにルート・ボリュームが含まれているかどうかを確認します。</block>
  <block id="a0879940337c9b44fb9cad5bc9f2d541" category="list-text">各コントローラで次のコマンドを入力して、ノードシェルを終了します。</block>
  <block id="d9f6eac526670fe9182f1a63d251a180" category="paragraph">「 exit</block>
  <block id="f5a25cddbc643e856eabde4c6ba4d2a8" category="cell">コントローラの状況</block>
  <block id="087b658bc1f71a1f2cb5ec53fee94d23" category="cell">内蔵ディスクドライブにアグリゲートを含めないでください</block>
  <block id="6a58d5f6ed9134ff245eb1172f368af9" category="cell">この手順に進みます。</block>
  <block id="979cce52ff595ac16546680501986d88" category="cell">内蔵ディスクドライブにはアグリゲートは含まれますが、ボリュームは含まれません</block>
  <block id="0b63c25d5be0c7543233464f799ff9f8" category="cell">内蔵ドライブにルート以外のボリュームを格納します</block>
  <block id="1547c14e8c3676ab43b1f9bc7b69d98d" category="cell">内部ドライブ上のルートボリュームが含まれます</block>
  <block id="cf992e4682189e679999df1f59ac6447" category="cell">この手順を続行しないでください。コントローラをアップグレードする方法について、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> 手順を実行しているノードペアで、ボリュームを移動して Data ONTAP を実行しているコントローラハードウェアのアップグレードを実行し、 _NetApp Support Site_and へのリンク。</block>
  <block id="dec8ae2cc1cff82c9a15f47488d0827b" category="cell">内蔵ドライブにルート以外のボリュームを格納し、外付けストレージにボリュームを移動することはできません</block>
  <block id="823ba7326edea0fb085b50c3aab24f80" category="cell">この手順を続行しないでください。clustered Data ONTAP を実行しているノードのペアで手順 _ ボリュームを移動してコントローラハードウェアをアップグレードする方法を説明します。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> からネットアップサポートサイトにリンクして、この手順にアクセスできます。</block>
  <block id="5fca7ca4e218be9851d30cba0f329262" category="paragraph">新しいノードのポートに関する情報を確認しておく必要があります。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> Hardware Universe にリンクするには、次の手順を実行します。このセクションの後半の情報を使用します。</block>
  <block id="8897c39b9e3259e6b8f69dc05949b6b0" category="paragraph">ノード 4 のソフトウェア設定がノード 4 の物理的な接続と一致している必要があります。また、アップグレードを続行する前に、 IP 接続をリストアする必要があります。</block>
  <block id="1b10a983f98ed23432fa58568f54f671" category="paragraph">したがって、 node2 の物理ポートが node4 の物理ポートに直接マッピングされない場合は、ブート後にクラスタ、管理、およびネットワーク接続をリストアするためにソフトウェア設定の変更が必要となります。また、 node2 のクラスタポートが node4 のクラスタポートに直接マッピングされていない場合は、正しい物理ポートでクラスタ LIF をホストするソフトウェア設定が変更されるまで、 node4 がリブートされたときに自動的にクォーラムに再参加しないことがあります。</block>
  <block id="529041da4d36160525aac5502b5d8ff7" category="list-text">ノード 2 、ポート、ブロードキャストドメイン、 IPspace に関するすべての node2 ケーブル接続情報を次の表に記録します。</block>
  <block id="24738875225e89a3fe6b531d598a45f9" category="paragraph">この情報を取得する手順については、「ノード 2 情報の記録」を参照してください。</block>
  <block id="7974b2ee243c61270cbc49955821fd33" category="list-text">の同じ手順を使用して、ノード 4 、ポート、ブロードキャストドメイン、および IPspace のすべてのケーブル接続情報を前の表に記録します <block ref="bf281b48b35a7cc176890f2be65ca906" category="inline-link-macro-rx"></block> この情報の入手方法については、を参照してください。</block>
  <block id="4a4552a72df2a500f815fd3a0166db9c" category="list-text">ノード 4 をクォーラムに追加するには、次の手順を実行します。</block>
  <block id="8ce18e9d769ff67698580bd546d1e73d" category="admonition">MetroCluster 構成の場合、ポートのブロードキャストドメインを変更できないことがあります。これは、同期先 SVM の LIF をホストしているポートに関連付けられており、次のようなエラーが表示されますが、制限はありません。</block>
  <block id="9d5b8b168e2bd5a1bd98e2db65454236" category="paragraph">このコマンドは、 node4 にあるポート「 e0d 」を削除します。「 network port broadcast-domain remove-ports -ipspace Cluster-broadcast-domain Cluster -ports node4 ： e0d 」</block>
  <block id="979cd06d4d4cd640769d9da9d1735ead" category="list-text">必要に応じて、と同じコマンドを使用して、クラスタ間ブロードキャストドメインを調整してクラスタ間 LIF を移行します <block ref="8ca8005a6030839efa079ea5fc0aa218" category="inline-xref-macro-rx"></block>。</block>
  <block id="7d978d05ebca2bca32b82488daa9e7db" category="list-text">必要に応じて、のコマンドと同じコマンドを使用して、他のブロードキャストドメインを調整してデータ LIF を移行します <block ref="8ca8005a6030839efa079ea5fc0aa218" category="inline-xref-macro-rx"></block>。</block>
  <block id="fc5f8a7ca5bfb1a8040e796e49ecaa6c" category="paragraph">次のコマンドは ' フェイルオーバー・ポリシーを broadcast-domain-wide に設定し ' フェイルオーバー・グループ fg1 のポートを 'node4 の LIF のフェイルオーバー・ターゲットとして使用します</block>
  <block id="87724d5ff91f88d675b5dc5cf4703ebb" category="paragraph">「 network interface modify -vserver node4 -lif data1 failover-policy broadcast-domain-wide -failover-group fg1 」というメッセージが表示されます</block>
  <block id="f7afd5134081c6d88b6809aff0cfe38b" category="summary">アップグレードの各段階で、システムがクラッシュする（リブート、パニック状態、または電源の再投入）場合があります。これらの問題の解決策は、状況によって異なります。</block>
  <block id="8d2ddd9f1b9624e868ebb43ee6cda365" category="section-title">ステージ 2 でリブート、パニック、または電源の再投入が発生した場合</block>
  <block id="e614ebb551c0186535d784a7b48379a2" category="paragraph">クラッシュは、ステージ 2 の前後、またはステージ 2 のアグリゲートをノード 1 からノード 2 に再配置し、ノード 1 が所有するデータ LIF と SAN LIF をノード 2 に移動し、ノード 1 の情報を記録し、ノード 1 を廃棄する前、実行中、またはただちに発生します。</block>
  <block id="f9fc0ccdf6eca6c6dbb00170548006b8" category="section-title">HA を有効にして第 2 段階の前にノード 1 またはノード 2 がクラッシュする</block>
  <block id="04818410504d7e5aff0400546dfc87fe" category="paragraph">ステージ 2 の前にノード 1 またはノード 2 がクラッシュした場合は、再配置されたアグリゲートがなく、 HA 構成が有効なままになります。</block>
  <block id="141bacc3e7a6f502bd3657db72437350" category="list-text">コンソールで、システムで発行された EMS メッセージを確認し、推奨される対処方法を実行します。</block>
  <block id="7495ab667ca2ae1018dd9d3dd2908757" category="section-title">HA を有効にして第 2 段階の実行中または直後にノード 1 がクラッシュする</block>
  <block id="6647bb8df429d773e26f287ab8630e64" category="paragraph">一部またはすべてのアグリゲートがノード 1 からノード 2 に再配置されており、 HA が有効なままです。node2 は、 node1 のルートボリュームと再配置されていないルート以外のアグリゲートをテイクオーバーします。</block>
  <block id="74d5b8b871208d748fdac979190074e1" category="section-title">HA を無効にすると、ステージ 2 のあとにノード 1 がクラッシュします</block>
  <block id="9ad3dc0563b6521da592666e0c96170d" category="paragraph">node2 はテイクオーバーしませんが、ルート以外のすべてのアグリゲートから引き続きデータを提供しています。</block>
  <block id="cf843a9114c64e407d26e842eb2aa5c2" category="inline-link-macro">予期しない「 storage failover show 」コマンドの出力が表示されます</block>
  <block id="15c9d515df1ae9990db781b0882abe66" category="section-title">ステージ 2 の実行中または実行後に、 HA を有効にして node2 に障害が発生する</block>
  <block id="716abd00d1127a1995735a99a806c57a" category="paragraph">ノード 1 の一部またはすべてのアグリゲートが node2 に再配置されています。HA が有効になっている。</block>
  <block id="f0cdf8c3a0614c42ddbb847f4d954ecc" category="paragraph">ノード 1 は、ノード 2 のすべてのアグリゲートと、ノード 2 に再配置された独自のアグリゲートをテイクオーバーします。node2 が Waiting for giveback' 状態になると、 node1 は node2 のすべてのアグリゲートをギブバックします。</block>
  <block id="d9cfe3ea2fdbf3c16ed9c5e72d3e656c" category="section-title">ステージ 2 で HA を無効にすると、ノード 2 がクラッシュする</block>
  <block id="60d779c99277ce73af20b8df4f5f56d7" category="paragraph">ノード 1 ではテイクオーバーされません。</block>
  <block id="6cd506af8fb7a9917363ff2842c8cc31" category="paragraph">node2 のブート中にすべてのアグリゲートでクライアントが停止します。</block>
  <block id="4fcbd6d017dc3bed8096ddf23845774a" category="list-text">残りのノードペアのアップグレード手順に進みます。</block>
  <block id="a5d750c0f90be33b555932b544614491" category="section-title">ステージ 3 でリブート、パニック、電源の再投入が発生した場合</block>
  <block id="c4ff6b7da7d4d6d1387161732065f7e3" category="paragraph">ステージ 3 の実行中または実行直後に障害が発生し、ステージ 3 ではノード 1 からノード 3 へのポートのマッピング、ノード 1 とノード 2 に属するデータ LIF と SAN LIF のノード 3 への移動、ノード 2 からノード 3 へのすべてのアグリゲートの再配置が行われます。</block>
  <block id="6c6e673ed49e2d3170e896afadb82987" category="section-title">HA を無効にした状態でステージ 3 が実行され、アグリゲートを再配置する前にノード 2 がクラッシュする</block>
  <block id="d0dbe31475820a3a3bf65dc0bcdc3d22" category="paragraph">HA がすでに無効になっているため、ノード 2 のクラッシュ後はノード 3 はテイクオーバーしません。</block>
  <block id="123d371d6f3654b02ea395d3cdce7a43" category="section-title">一部またはすべてのアグリゲートの再配置後、ステージ 3 でノード 2 がクラッシュする</block>
  <block id="3312049a8df38d6a9cc500f8d982615c" category="paragraph">node2 の一部またはすべてのアグリゲートが node3 に再配置され、再配置されたアグリゲートからデータが提供されます。HA が無効になっています。</block>
  <block id="4293c82d89ec7602e20335979cb19469" category="paragraph">再配置されなかったアグリゲートのクライアントが停止します。</block>
  <block id="7777ccf7f0f06dad3ffad451bb0e83b8" category="section-title">ステージ 3 でノード 2 からアグリゲートが再配置される前に、ノード 3 がクラッシュした場合</block>
  <block id="ec2cd6235f2c50a1e7fed067fe8301f8" category="section-title">アグリゲートの再配置中に、ステージ 3 でノード 3 がクラッシュした場合</block>
  <block id="bdf12c9e6bf2221b5ef584b80346aaaf" category="paragraph">node2 によるアグリゲートのノード 3 への再配置中にノード 3 がクラッシュした場合、 node2 を使用すると残りのアグリゲートの再配置が中止されます。</block>
  <block id="5f54439349a0049ded037d046c54cb66" category="paragraph">node2 では残りのアグリゲートの処理が続行されますが、 node3 のブート中にすでに node3 に再配置されたアグリゲートでクライアントが停止する可能性があります。</block>
  <block id="78d6fd9200a4f713a83c4db59f80581d" category="section-title">ステージ 3 でクラッシュすると、ノード 3 がブートしない</block>
  <block id="1f3a2d115338d5055575085be720a753" category="paragraph">重大な障害が原因で、ステージ 3 のクラッシュ後に node3 をブートすることはできません。</block>
  <block id="50c2d2087402d2dc8c5767a6ac83e96d" category="paragraph">テクニカルサポートにお問い合わせください。</block>
  <block id="cf3f87997342db92eccc23b02a73f26b" category="section-title">ステージ 3 のあと、ステージ 5 の前に node2 がクラッシュします</block>
  <block id="f9266620f38392278a4002882f41b801" category="paragraph">ノード 3 では、すべてのアグリゲートのデータの提供が続行されます。HA ペアが無効になります。</block>
  <block id="45e4e2e875b4e69af2a57be92e35bd6d" category="section-title">ステージ 3 の完了後、ステージ 5 の前にノード 3 がクラッシュした場合</block>
  <block id="3558827f5793acfed9bd716ccf9185d2" category="paragraph">ステージ 3 の完了後、ステージ 5 の前にノード 3 がクラッシュした場合。HA ペアが無効になります。</block>
  <block id="a7b36ae4a63894ec22ce7b4ffc1a7601" category="paragraph">すべてのアグリゲートがクライアントで停止します。</block>
  <block id="dba18149d1d705af7c19dced9bbd93eb" category="section-title">ステージ 5 でリブート、パニック、または電源の再投入が発生した場合</block>
  <block id="6faaefd8133cb9348e7c089d482c5e7d" category="paragraph">クラッシュは、ステージ 5 、ノード 4 のインストールとブートのステージ、ノード 2 からノード 4 へのポートのマッピング、ノード 2 に属するデータ LIF と SAN LIF のノード 2 からノード 4 への移動、ノード 2 のすべてのアグリゲートのノード 3 からノード 4 への再配置の実行中に発生する可能性があります。</block>
  <block id="188229afd48ed8799252ee3f4371adf0" category="section-title">ステージ 5 でノード 3 がクラッシュする</block>
  <block id="12c209a765d259bdad104c55c61bccd8" category="paragraph">ノード 3 の一部またはすべてのアグリゲートが node4 に再配置されている。node4 にはテイクオーバーは行われず、 node3 がすでに再配置されたルート以外のアグリゲートは引き続き提供されます。HA ペアが無効になります。</block>
  <block id="a018f0afc69622b99ebe84263c79ed31" category="list-text">ノードペアのアップグレード用手順に進みます。</block>
  <block id="17772501b6724fd9858e76539d802bae" category="section-title">ステージ 5 でノード 4 がクラッシュした場合</block>
  <block id="ed77b7aeb374975ae2dc4f8a9a5d5551" category="paragraph">ノード 3 の一部またはすべてのアグリゲートが node4 に再配置されている。node3 は、自身が所有しているルート以外のアグリゲートおよび再配置されていないアグリゲートを引き続き提供します。HA が無効になっています。</block>
  <block id="599f33809165d54cb3217e306c6f0f1f" category="paragraph">ノード 4 が再びブートするまで再配置されたルート以外のアグリゲートは停止します。</block>
  <block id="fb876532a1278ecbe2a9e2aa30ef59c2" category="list-text">AutoSupport メッセージが送信されたことを確認します。</block>
  <block id="632ce4fa5102cfac495b3c1490de0513" category="paragraph">「 Last Subject Sent ：」および「 Last Time Sent ：」のフィールドには、最後に送信されたメッセージのメッセージタイトルと、メッセージが送信された時刻が含まれています。</block>
  <block id="33cfec7231d81810ac482a09c5b69c00" category="list-text">node2 が所有するアグリゲートを表示します。</block>
  <block id="e5d22039d8dff591d18701d62fb4083d" category="list-text">アグリゲートの再配置を開始する：</block>
  <block id="cba3015195e189328dd15ef19c0cdcff" category="admonition">コマンドは、ルート以外のアグリゲートのみを特定します。</block>
  <block id="00bfced11707df12b7beabc9cb1854c6" category="list-text">admin 権限レベルに戻ります。</block>
  <block id="6b5ba31b334c119525a36a4c654c79fc" category="list-text">node2 の再配置のステータスを確認します。</block>
  <block id="5f99044f7fd5dd98c2e83408099900a7" category="admonition">node2 に所有されているすべてのアグリゲートが node3 に再配置されてから次の手順に進む必要があります。</block>
  <block id="12d1b6919c7c68de63bfe55847d735a3" category="cell">アグリゲートに障害が発生したか、拒否された</block>
  <block id="d6e415f41ef651a14c6408b58b5f34fa" category="list-text">詳細なステータスメッセージを表示します。</block>
  <block id="4382ef08403cdc87d0db14f4b0dbe621" category="paragraph">「 storage aggregate show -instance 」のように表示されます</block>
  <block id="52aa1d8f7452c944bbc112edc69d159d" category="paragraph">EMS ログで必要な対処方法を確認することもできます。</block>
  <block id="856f354dcadb2aef2f73a7a610300d05" category="paragraph">必要に応じて、次のいずれかの方法で強制的に再配置を実行できます。</block>
  <block id="6abaecd9da93fcc5260d726fe8a8fa56" category="list-text">拒否のチェックを無視する：</block>
  <block id="b62638cdb7e1a6240698379b6c81d35b" category="paragraph">「 storage aggregate relocation start -override-vetoes true -nd-controller-upgrade</block>
  <block id="230cd704f9f55647ecfe8129ed941e8e" category="list-text">送信先チェックを無効にする：</block>
  <block id="35df77bf8b92d76c3b871148e8c46c51" category="paragraph">「 storage aggregate relocation start -override-destination-checks true -ndocontroller -upgrade 」を実行します</block>
  <block id="ecc3f3e0b2ef3c70a30fe8be1af81d75" category="paragraph">オフラインになったアグリゲートや外部になったアグリゲートがある場合は、各アグリゲートを 1 つずつオンラインにする必要があります。</block>
  <block id="1dc7145853b865022c2423c0562bf7ed" category="list-text">ノード 3 ですべてのボリュームがオンラインになっていることを確認します。</block>
  <block id="8526a5587200c78144bc2d1fabd13d3a" category="paragraph">ノード 3 でオフラインになっているボリュームがある場合は、各ボリュームについて 1 回、オンラインにする必要があります。</block>
  <block id="232cf0d45bdcae298c19689d1bf05bea" category="paragraph">ルート以外のオンラインアグリゲートがすべて node3 にすでに再配置されているため、コマンドの出力にルート以外のオンラインアグリゲートが表示されないようにする必要があります。</block>
  <block id="71c5d3d7f0857c67830fb002783fd24e" category="paragraph">手順の各フェーズについては、セクションの表を参照してください <block ref="25c64b56e1634b7195570b2ce4c1228b" category="inline-link-macro-rx"></block>。発生する可能性がある障害の情報は、手順のフェーズ別に表示されます。</block>
  <block id="96518cf6fc4836f38d5963152c3b52fc" category="list-text"><block ref="96518cf6fc4836f38d5963152c3b52fc" category="inline-link-macro-rx"></block></block>
  <block id="b41eca4a9e61478c5412544da1b31c9f" category="list-text"><block ref="b41eca4a9e61478c5412544da1b31c9f" category="inline-link-macro-rx"></block></block>
  <block id="03f183bce69c6c170ce7d98b73a0da9b" category="list-text"><block ref="03f183bce69c6c170ce7d98b73a0da9b" category="inline-link-macro-rx"></block></block>
  <block id="bffc8177304b2cba0a93e9425c22a1b7" category="list-text"><block ref="bffc8177304b2cba0a93e9425c22a1b7" category="inline-link-macro-rx"></block></block>
  <block id="e74451404fb8d41f6db27c4f815f8cf3" category="list-text"><block ref="e74451404fb8d41f6db27c4f815f8cf3" category="inline-link-macro-rx"></block></block>
  <block id="2df3dd26d8dceded8e8da8277098895a" category="paragraph">ファブリック内のスイッチを永続的に有効にする必要があります。</block>
  <block id="5c399963772634ba1fc18f52ce25b7d5" category="paragraph">スイッチを永続的に有効にします。</block>
  <block id="1b9078b6f6fd34ef368d1162644a9f35" category="list-text">Brocade スイッチの場合は、「 witchCfgPersistentenable 」コマンドを使用します。</block>
  <block id="7f53ae5380891cb24e6bd16877533f63" category="list-text">Cisco スイッチの場合は 'no suspend' コマンドを使用します</block>
  <block id="017a287daf9403479607113762fdf28d" category="paragraph">ノード 3 とノード 4 を手順の後半で物理的にラックに設置したあと、ネットブートが必要になることがあります。「 _netboot_ 」は、リモートサーバに保存されている ONTAP イメージからブートすることを意味します。ネットブートの準備を行うときは、システムがアクセスできる Web サーバに、 ONTAP 9 ブート・イメージのコピーを配置する必要があります。</block>
  <block id="021eb7b60dabf41949ccbeca660311c4" category="list-text">[man_netboot_Step1] ネットアップサポートサイトにアクセスして、システムのネットブートの実行に使用するファイルをダウンロードします。</block>
  <block id="9049f1bbc92896381d7b5ffdc386e3b2" category="list-text">いずれかのノードで次のコマンドを入力して、ストレージフェイルオーバーを有効にします。</block>
  <block id="44b65ecdfbcd9fda48c21d17aae6347e" category="cell">クラスタの種類</block>
  <block id="f58285c881fa273f24181ed6fc4f5253" category="cell">どちらかのノードで cluster ha modify -configured true コマンドを入力して ' クラスタの高可用性を有効にします</block>
  <block id="97b53f9857ac13c0da869099d031be38" category="cell">に進みます <block ref="822b8237ef75a77ff6f775dfc30b209c" category="inline-xref-macro-rx"></block>。</block>
  <block id="c923a045fa01384244a7d722820ecb7f" category="list-text">[[man_ver_setup_Step4]] 次のコマンドを入力して、 node3 と node4 が同じクラスタに属していることを確認します。</block>
  <block id="993ec2fcd18633816cf0d4d290fcf5a3" category="list-text">次のコマンドを入力し、出力を調べて、 node3 と node4 が相互のストレージにアクセスできることを確認します。</block>
  <block id="00c012d0f7127c31c470ac3c1c76aa44" category="list-text">次のコマンドを入力し、出力を調べて、 node3 と node4 がクラスタ内の他のノードによってホーム所有されているデータ LIF を所有していないことを確認します。</block>
  <block id="2a6d96821a4ce6866da866e48a1ece2a" category="paragraph">node3 または node4 に、クラスタ内の他のノードがホーム所有するデータ LIF がある場合は、「 network interface revert 」コマンドを使用して、データ LIF をホーム所有者にリバートします。</block>
  <block id="183048ad5f29710efbac355627777865" category="inline-link-macro">手順 19 （ d ）</block>
  <block id="5d41e09cfbf05ac79dc026cd1e32857c" category="list-text">ノードごとに次のコマンドを入力して、新しいノード用の新しいライセンスをインストールします。</block>
  <block id="65d93c0f2eae68c69877f67ce3781996" category="paragraph">license-code パラメータには、アルファベットの文字キーをアルファベットの大文字 28 個まで入力できます。ライセンスは一度に 1 つずつ追加することも、ライセンスキーごとにカンマで区切って複数ずつ追加することもできます。</block>
  <block id="1f6c8829a415beddc4ce10181f20094a" category="inline-link-macro">手順 16</block>
  <block id="c13dda3e4975b286bfb62f3d9aa8cfa5" category="list-text">元のノードから古いライセンスをすべて削除するには、次のいずれかのコマンドを入力します。</block>
  <block id="f1645d1878d86f7024812da747846642" category="list-text">期限切れのライセンスをすべて削除するには、次のように入力します</block>
  <block id="fd6db757e3a6fb12f04139c8f48aab93" category="list-text">未使用のライセンスをすべて削除するには、次のように入力し</block>
  <block id="0fae8f5a8ab68238375deb31e474111d" category="list-text">クラスタから特定のライセンスを削除するには、ノードで次のコマンドを入力します。</block>
  <block id="65816664fef74fe3f15406730c518f76" category="list-text">両方のノードで次のコマンドを実行して、 SP を設定します。</block>
  <block id="3d39e72120bdfa8b32eb4183896ece25" category="paragraph">に進みます <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> SP の詳細については ' システム管理リファレンスにリンクし '_System ONTAP 9 コマンド：マニュアルページリファレンスにリンクし 'system service-processor network modify コマンドの詳細については ' を参照してください</block>
  <block id="52eb8cb5708af7396828abc72517413d" category="list-text">新しいノードにスイッチレスクラスタをセットアップする場合は、に進みます <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ネットワークサポートサイトへのリンクをクリックし、 2 ノードスイッチレスクラスタへの移行の手順に従ってください。</block>
  <block id="a98b8d21a1cabe96a7d765976c724ace" category="paragraph">ノード 3 とノード 4 でストレージ暗号化が有効になっている場合は、の手順を実行します <block ref="94c0a6a874300fcf012d00a23a1b673f" category="inline-link-macro-rx"></block>。それ以外の場合は、の手順を実行します <block ref="6e48b929ca0767f00c15eeb6d7e78755" category="inline-link-macro-rx"></block>。</block>
  <block id="68e6b44b3a749a5a92b3130b283a8d5c" category="paragraph">このタスクは MetroCluster サイトごとに実行する必要があります。</block>
  <block id="2582e010e97c2f1b4ef7a684672e4598" category="list-text">クラスタにログインします。</block>
  <block id="ee4b431a595989bb32df666099e34bf8" category="list-text">メンテナンスの開始を通知する AutoSupport メッセージを起動します。</block>
  <block id="8b8313711f50dddf1be23555c3e398af" category="paragraph">「 maintenance-window-in-hours 」の値は、メンテナンス時間の長さを指定します。最大値は 72 時間です。この時間が経過する前にメンテナンスが完了した場合は、メンテナンス期間が終了したことを通知する AutoSupport メッセージを起動できます。</block>
  <block id="538f577c4284d097aef57681a2acf728" category="paragraph">「 system node AutoSupport invoke -node * -type all -message MAINT= end 」というメッセージが表示されます</block>
  <block id="047c004f2f53364ce170133f533be47f" category="list-text">同じ手順をパートナーサイトでも実行します。</block>
  <block id="a8b14471d941953a592683e741c0ca1c" category="list-text">[[step1] システムプロンプトで、ノード 3 にログインします。そのあと、 node3 が node2 と同じクラスタの両方に属しており、正常であることを確認します。</block>
  <block id="c526c49b8044ea431a2ad56bde07cd17" category="list-text">[step2] node3 が node2 と通信できること、およびすべての LIF が動作していることを確認します。</block>
  <block id="0ccfa81b1f21bfb5655a443ca59f1146" category="inline-link-macro">ノード 1 で所有されている NAS データ LIF をノード 2 からノード 3 に移動し、ノード 3 の SAN LIF を確認します</block>
  <block id="d1e338a03ea3eb1b2592ad7856e6b249" category="list-text">[[step4]] ノードの 1 つで次のコマンドを入力し、その出力を調べて、 node2 および node3 がクォーラムにあることを確認します。</block>
  <block id="c659f2c431be96152886f89fc8d66545" category="list-text">[step2] ノード 1 およびノード 2 のすべての LIF の自動リバート設定を変更します。</block>
  <block id="cbda167ce953729cf8b9be29b0e35ede" category="list-text">[[step3] インターフェイスグループおよび VLAN でホストされる NAS データ LIF を node1 で移行するには、次の手順を実行します。</block>
  <block id="9ebd90a8ee1baaa50f7229ecbad7e8b4" category="list-text">[[substepa]] すべてのインターフェイスグループでホストされている LIF と node1 上の VLAN を、インターフェイスグループと同じネットワーク上の LIF をホストできる node2 のポートに移行します。そのためには、各 LIF に対して次のコマンドを 1 回入力します。</block>
  <block id="38dc91fe258c6eeb7ff70deac7ba3ee0" category="list-text">で、 LIF および VLAN のホームポートとホームノードを変更します <block ref="cf21dd79faca0741f745aead7a1f3856" category="inline-xref-macro-rx"></block> LIF をホストしているポートとノードに対して次のコマンドを 1 回入力します。</block>
  <block id="f665edf5cc407acfccaabfb5603ae07e" category="cell">- 完了しました <block ref="a7f3a08749b96b9fef80c08c6457135d" category="inline-xref-macro-rx"></block> から <block ref="ebde17035ccd0e1d011f2e188b8e17d6" category="inline-xref-macro-rx"></block>。</block>
  <block id="9afdff3547467f61598636f379b01049" category="list-text">[man_lif_1_2_step5] 各データ LIF に対して次のコマンドを 1 回入力して、 NAS データ LIF を node1 から node2 に移行します。</block>
  <block id="46d8840624eee12f277b28b36bc04ac9" category="list-text">[step7] 移行された LIF のホームノードを変更します。</block>
  <block id="399d0e6b3a5d6f6a955d15b76e16dac3" category="list-text">[man_lif_1_2_step8] LIF がホームまたは現在のポートとして使用しているかどうかを確認しますポートがホームでない場合や現在のポートでない場合は、に進みます <block ref="9afb853eb1a825acf900d55aa2bce20e" category="inline-xref-macro-rx"></block>：</block>
  <block id="f48b3299d16d6b2107cabf71fe17fc7a" category="list-text">[man_lif_1_2_step9] LIF がホームポートまたは現在のポートとしてポートを使用している場合は、別のポートを使用するように LIF を変更します。</block>
  <block id="eb107bf9c16173703c7eb7800e543b49" category="list-text">[[step10]] いずれかの LIF が停止している場合は、各 LIF に対して次のコマンドを 1 回入力して、 LIF の管理ステータスを「 up 」に設定します。</block>
  <block id="5410f279e38e9c157f57b06f35930496" category="list-text">[[step11]] 次のコマンドを入力し、その出力を調べて、 node1 にデータ LIF が残っていないことを確認します。</block>
  <block id="90506ded7e085b5dfb368983176adad1" category="list-text">MetroCluster 9.8 以降を実行する 4 ノードおよび 8 ノードの Fabric ONTAP 構成を使用するシステムがある場合。</block>
  <block id="7ae38f6d8449bab135d62e112d801780" category="paragraph">ポート設定は、ノードのモデルによって異なる場合があります。</block>
  <block id="18d6cf18e081291f183ebc71cad11449" category="list-text">[[step1] 次の手順を実行して、セットアップが 2 ノードのスイッチレスクラスタであるかどうかを確認します。</block>
  <block id="506c2c0c7f5b70af3df68c45c46f45a7" category="paragraph">例：</block>
  <block id="813d293c72e7757d7214e56a35a3d239" category="list-text">[[step2] 次の変更を行います。</block>
  <block id="3528faaf395daaaf0d052ce18e3bb68f" category="paragraph">次の例では、「 node1 」にクラスタポート e1b を追加します。</block>
  <block id="a2667267edacd035171d6f2c7a379271" category="list-text">node1 と node3 のヘルス状態を表示します。</block>
  <block id="0dd0951b0ff75b50f90162a4e89cea83" category="list-text">[man_map_1_step3] データ LIF をホストする物理ポートのブロードキャストドメインメンバーシップを変更します。</block>
  <block id="8d324785c287a538f58e372f40bed342" category="list-text">到達可能性の修復が実行されると、 ONTAP は正しいブロードキャストドメインにポートを配置しようとします。ただし、ポートの到達可能性を判別できず、既存のブロードキャストドメインのいずれにも対応していない場合、 ONTAP はこれらのポート用に新しいブロードキャストドメインを作成します。すべてのメンバーポートがインターフェイスグループのメンバーポートになる場合は、必要に応じて、新しく作成したブロードキャストドメインを削除できます。ブロードキャストドメインを削除する</block>
  <block id="ad26ddf2e9b94d63fc11537e49b3ecb8" category="list-text">インターフェイスグループの設定を確認し、必要に応じてメンバーポートを追加または削除します。</block>
  <block id="4f8ff7a721c81a3185d356f1a33fae2d" category="paragraph">インターフェイスグループポートにメンバーポートを追加します。</block>
  <block id="615e12bd105ff14dbfe4918eedb06e9c" category="admonition">アップグレードするシステムのネットワーク構成の複雑さによっては、すべてのポートが必要な場所に正しく配置されるまで手順（ a ）から（ g ）を繰り返してください。</block>
  <block id="f885f903824205e3ac8b26efa5254e8d" category="list-text">[[step4]] システムに VLAN が設定されていない場合は、に進みます <block ref="4c0abef6869b6cad04a71c175246f8ab" category="inline-xref-macro-rx"></block>。VLAN が設定されている場合は、すでに存在しないポートまたは別のブロードキャストドメインに移動されたポートで設定されていたポート上で、取り外された VLAN を復元します。</block>
  <block id="aaa2b516ee5f7ea24e6108032acc280f" category="paragraph">すべてのポートが正しく設定され、正しいブロードキャストドメインに追加されている場合、「 network port reachability show 」コマンドは、接続されているすべてのポートの到達可能性ステータスを「 ok 」、物理的な接続がないポートのステータスを「 no-reachability 」と報告する必要があります。これら 2 つ以外のステータスを報告しているポートがある場合は、に記載されているように、到達可能性を修復します <block ref="908f101af36ad2335dd086df5698bdbf" category="inline-xref-macro-rx"></block>。</block>
  <block id="c2e8f597299baf99355b3fa78126f551" category="list-text">[[man_map_1_step6] すべての LIF が、正しいブロードキャストドメインに属するポートで管理上の理由で稼働していることを確認します。</block>
  <block id="294217f067c6d528ded0650ae8192e3f" category="list-text">動作状態が down になっている LIF がないか確認します。</block>
  <block id="a58275251c4ceab5ef8fb93df1152efe" category="paragraph">アグリゲートの再配置（ ARL ）を使用して ONTAP 9.8 を実行しているコントローラのペアをアップグレードできるかどうかは、プラットフォームおよび元のコントローラと交換用コントローラの両方の構成によって異なります。</block>
  <block id="b2ea28d5ed885ef7926100979ab12c7a" category="list-text">アップグレード前に、元のコントローラと交換用コントローラの両方で同じバージョンの ONTAP 9.8 を実行している必要があります。</block>
  <block id="e52edde4a2daa372f1d2553f7b9406eb" category="list-text">ONTAP 9.8 以降を実行できないコントローラとの間。</block>
  <block id="0b7e952693f4986837beff2196d112d7" category="section-title">ONTAP 9.8 以降のライセンス</block>
  <block id="12ee56bc4ae8d39a35db35e248722ec3" category="paragraph">すべてのライセンスキーは、 28 文字の大文字のアルファベットです。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ONTAP 9.8 用の 28 文字の新しいライセンスキーを入手する方法は、 _NetApp サポートサイト _ にリンクしてください。以降が必要です。キーは、 _ ソフトウェアライセンス _ の _ マイサポート _ セクションにあります。必要なライセンスキーがサイトにない場合は、ネットアップの営業担当者にお問い合わせください。</block>
  <block id="94c614d182457fbc97ae1deaaabd5813" category="paragraph">2 ノードスイッチレスクラスタのノードをアップグレードする場合は、アップグレードの実行中もスイッチレスクラスタのノードをそのまま使用できます。スイッチクラスタに変換する必要はありません。</block>
  <block id="fdc03a42e0e3399344b3116546b77b4d" category="list-text">[man_lif_verify_3_step5] プラットフォームで同じでないデータポートがある場合は、ブロードキャストドメインにポートを追加します。</block>
  <block id="3e874a6c7a8a7acafa16272d6c2b74ee" category="paragraph">次の例は、ノード「 8200-1 」のポート「 e0a 」とノード「 8060-1 」のポート「 e0i 」を、 IPspace 「 Default 」内のブロードキャストドメイン「 mgmt 」に追加します。</block>
  <block id="e5255775e89f083d8e69c73098e5fff2" category="list-text">次のコマンドを入力して、 node4 が node3 と同じクラスタの一部であること、および healthy であることを確認します。</block>
  <block id="a8b841bb612aacb195cf6acc0585fc92" category="list-text">次のコマンドを入力して、ノード 4 がノード 3 と通信できること、およびすべての LIF が動作していることを確認します。</block>
  <block id="07d4c533878766923bd46c0ad1c07580" category="list-text">に進みます <block ref="861668d9cff26e583cb336053a01f9e4" category="inline-xref-macro-rx"></block>。</block>
  <block id="9bce91076db18294fb11d6102c6ff059" category="cell">に進みます <block ref="861668d9cff26e583cb336053a01f9e4" category="inline-xref-macro-rx"></block>。ノード間の HA インターコネクトを手動で接続する必要はありません。同じシャーシ構成では、 HA インターコネクトがバックプレーンを使用して自動的に接続されます。</block>
  <block id="ff7a118b46f3869beb6bcd084db3f81c" category="cell">手順 6 を実行し、セクションに進みます <block ref="433d8081a28a0d8c06bf54d23d4e1297" category="inline-link-macro-rx"></block>。</block>
  <block id="55663f6258861b526745aa5208196d3a" category="cell">手順 6 をスキップしてセクションに進みます<block ref="433d8081a28a0d8c06bf54d23d4e1297" category="inline-link-macro-rx"></block>。</block>
  <block id="66807f2defef8b7eaf2bfaddf801fc4a" category="list-text">いずれかのノードで次のコマンドを入力して、 node3 と node4 の両方がクォーラムにあることを確認します。</block>
  <block id="b36eedb3dc2096d3226039d46eaf45f8" category="list-text">この MetroCluster ファブリック手順環境は、 MetroCluster 以外の構成に加えて、 ONTAP 9.8 以降を実行する 4 ノードおよび 8 ノード構成の Fabric Manager です。</block>
  <block id="ca49ea726cf177756380ffbec6a54a54" category="list-text">ONTAP 9.7 以前を実行する MetroCluster 構成の場合は、に進みます <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ONTAP 9.7 以前を実行しているコントローラハードウェアを手動でアップグレードするには、アグリゲートの再配置を使用するには、をリンクしてください。</block>
  <block id="4839549656731e0245736bfa32bc3606" category="list-text">セットアップが 2 ノードスイッチレスクラスタかどうかを確認するには、次の手順を実行します。</block>
  <block id="0237dfb60fb0152194b2ef8069110809" category="list-text">次のコマンドを使用して、管理者権限レベルに戻ります。</block>
  <block id="cfcca4ee19f6b4091072ade66937870b" category="list-text">「 Cluster 」ブロードキャストドメインの一部となるポートを変更します。</block>
  <block id="e7556064c17516d1637d45f8010ff06c" category="paragraph">次の例では、「 node2 」にクラスタポート「 e1b 」を追加します。</block>
  <block id="1a356c921266e2599c929346ed1cf8f2" category="paragraph">network port modify -node node2 -port e1b -ipspace Cluster -mtu 9000`</block>
  <block id="9df9250bef265936667a669a94c73c45" category="list-text">node2 / node4 の「 health 」状態を表示します。</block>
  <block id="90a80dbcfe2d9dc6015a2d205a26af80" category="paragraph">cluster show -node node2 -fields health`</block>
  <block id="6897b79e7e86c3bf656b3cf8bb05bc85" category="list-text">[man_map_2_Step3] データ LIF をホストする物理ポートのブロードキャストドメインメンバーシップを変更します。</block>
  <block id="322b25940728d29a26180978d33a75a7" category="paragraph">次のような警告が表示されます。y または n を確認し、必要に応じて入力します。</block>
  <block id="28ffee9aa7a190ca41675de91fb9710b" category="list-text">システムに VLAN が設定されていない場合は、に進みます <block ref="f0f83db123b2b495e546349e9d3200d8" category="inline-xref-macro-rx"></block>。VLAN が設定されている場合は、すでに存在しないポートまたは別のブロードキャストドメインに移動されたポートで設定されていたポート上で、取り外された VLAN を復元します。</block>
  <block id="c5c3d54cdf6631e2e290953a91dcd842" category="paragraph">すべてのポートが正しく設定され、正しいブロードキャストドメインに追加されている場合、「 network port reachability show 」コマンドは、接続されているすべてのポートの到達可能性ステータスを「 ok 」、物理的に接続されていないポートのステータスを「 no-reachability 」と報告する必要があります。これら 2 つ以外のステータスを報告しているポートがある場合は、に記載されているように、到達可能性を修復します <block ref="42e2bf4f4ef15f603bcc30bc206d35c3" category="inline-xref-macro-rx"></block>。</block>
  <block id="fd6616fb43f706cbccb578942fa320ab" category="paragraph">ONTAP 9 を実行しているノードペアで、ルート以外のアグリゲートを元のノードから同じクラスタ内の新しいノードに移行することにより、コントローラハードウェアを無停止でアップグレードできます。アップグレード中は、アップグレード対象のノードでホストされているデータにアクセスできます。</block>
  <block id="60b36970c08352c3c476769f29561cf4" category="paragraph">この手順では、 Aggregate Relocation （ ARL ；アグリゲートの再配置）と呼ばれる方法を使用します。 ARL を使用すると、 HA 構成を活用して、ルート以外のアグリゲートの所有権をノード間で移動できます（ルートが同じクラスタ内のストレージを共有している場合）。</block>
  <block id="be11c74c1dd7f307bb80183a90dc2067" category="sidebar">はじめに</block>
  <block id="7d94daad2b6e9d77a6320a64c21fbc4a" category="sidebar">MetroCluster 構成のシステムをアップグレードする</block>
  <block id="dfcc398099d6a64026e51ab282e16253" category="sidebar">リソースの追加</block>
  <block id="dd032435fa83549d8bf3928550409a3e" category="sidebar">ONTAP ソフトウェアのドキュメント</block>
  <block id="519131237f79eadb2dc6a1e003a087bc" category="sidebar">NetApp Active IQ Config Advisor の略</block>
  <block id="bc8be72fdc9d6054f356bb2b7f80fd12" category="sidebar">NetApp Interoperability Matrix を参照してください</block>
  <block id="dd490b81914dd945601e442a41cb4222" category="sidebar">ネットアップコミュニティ</block>
  <block id="d087c3faf4708dbb3c8dfcfefd9745e9" category="sidebar">「 system controller replace 」コマンドを使用して、 ONTAP 9.5 を実行するコントローラハードウェアを 9.7 にアップグレードします</block>
  <block id="c4d333d48f2e07ddeaa6a230635663cf" category="sidebar">ボリュームまたはストレージを移動してアップグレードします</block>
  <block id="ea61e2c2ff507048203824add1eb7c21" category="sidebar">考慮事項</block>
  <block id="78ab525858e669cbe2bbf5be70ac71b8" category="sidebar">ストレージを移動してアップグレード</block>
  <block id="24f47cdbe9ddba774a7cc53e51d9032e" category="sidebar">ワークフロー</block>
  <block id="f8199556cf6a62ca9268aa50c99b34a1" category="sidebar">準備</block>
  <block id="1b775107e10aa9acb2f611db5db714f7" category="sidebar">元のノードをシャットダウンします</block>
  <block id="f4d03224dd15fbdbe8ce7ceae5d94e1b" category="sidebar">ディスク所有権を削除します</block>
  <block id="8c2a9dc1e3eabd2cf2048386719438d7" category="sidebar">デフォルト設定をリセットします</block>
  <block id="b89f2ce6accc5047e235ddc8dae13aa5" category="sidebar">新しいノードをインストール</block>
  <block id="bca5cff73543fb5c182ae115c9e682dc" category="sidebar">新しいノードをセットアップ</block>
  <block id="6a26b76071c114327f8c2765939aa5a7" category="sidebar">オプション - 内蔵ストレージを移動するか、ドライブシェルフに変換します</block>
  <block id="2f8a43bf9cc884df869e4198adef3e58" category="sidebar">内蔵ドライブを移動します</block>
  <block id="fb96a6f2421e21a53ee4078e03bf0b62" category="sidebar">ノードをドライブシェルフに変換します</block>
  <block id="68274bddbfd931594dff2906c4d537d8" category="sidebar">ルートボリューム構成をリストア</block>
  <block id="e2328b54876f0cd6379d9fcbc5572e87" category="sidebar">アップグレードを完了する</block>
  <block id="7686c34f0400921210a5e039c6743309" category="sidebar">ONTAP 9.8 で最後の手順を実行します</block>
  <block id="26000c062eace835ce5a8e9b4f5d553a" category="sidebar">ONTAP 9.7 以前で完了します</block>
  <block id="181a3a0697aaadf877eed027e84ebe7f" category="sidebar">ONTAP 9.7 以前で最終手順を実行します</block>
  <block id="51e0a0afc4d011a307d3419bfe742eba" category="sidebar">ボリュームを移動してアップグレード</block>
  <block id="ff56b4f5944c3419d2cbe4a5a19eb150" category="sidebar">新しいノードを設置して追加</block>
  <block id="f86f16f11e093ddd1a9acafc8ee58e6f" category="sidebar">SAN 以外のデータ LIF とクラスタ管理 LIF を移動する</block>
  <block id="79f3abfd76c996d707b348dbfb91c42b" category="sidebar">ノード 4 で FC または UTA / UTA2 設定を設定します</block>
  <block id="82a3300ad94a5e1dcf0a6abbfe1060e2" category="paragraph">このコンテンツの手順を実行するときは、参照コンテンツを参照するか、参照 Web サイトにアクセスする必要があります。</block>
  <block id="ec5873b9b6861954a7c07d183dd486b0" category="section-title">参照コンテンツ</block>
  <block id="bc6bec578fabd4f81f97a21373822230" category="paragraph">このアップグレードに固有のコンテンツを次の表に示します。</block>
  <block id="f15c1cae7882448b3fb0404682e17e61" category="cell">内容</block>
  <block id="e2ea913994dd610f57aa9df505badbaa" category="cell"><block ref="e2ea913994dd610f57aa9df505badbaa" category="inline-link-macro-rx"></block></block>
  <block id="07ae19817dfc58c8d1b72b612a233da3" category="inline-link-macro">MetroCluster の管理とディザスタリカバリ</block>
  <block id="c750cfcf9c6045b6e0b4b0d6de2212f3" category="inline-link-macro">MetroCluster のアップグレードと拡張</block>
  <block id="d1b75581244e03161b57c29a9ac4bb22" category="inline-link-macro">CLI によるディスクおよびアグリゲートの管理</block>
  <block id="c3aed88c9ee3a48f5d62930613f5710f" category="cell"><block ref="c3aed88c9ee3a48f5d62930613f5710f" category="inline-link-macro-rx"></block></block>
  <block id="083222857448e1fa46a20ea7d228c4a3" category="cell">CLI を使用して ONTAP 物理ストレージを管理する方法について説明します。アグリゲートを作成、拡張、管理する方法、 Flash Pool アグリゲートを使用する方法、ディスクを管理する方法、および RAID ポリシーを管理する方法を示します。</block>
  <block id="c1a14ef4c1320caf80e81dff4161eb9b" category="inline-link-macro">CLI を使用した論理ストレージ管理</block>
  <block id="23806251831778e9042b7dc8e04e42d9" category="cell"><block ref="23806251831778e9042b7dc8e04e42d9" category="inline-link-macro-rx"></block></block>
  <block id="9dc1904e0c3ace141704b477cd9b345d" category="inline-link-macro">Network Management の略</block>
  <block id="378e9004462b7ecfad8256f25b57fbf6" category="cell"><block ref="378e9004462b7ecfad8256f25b57fbf6" category="inline-link-macro-rx"></block></block>
  <block id="65fd0eeec8bd27e4c5c654edfee09feb" category="inline-link-macro">CLI での SAN 管理</block>
  <block id="664cc44494bab5cf2c42eaaf2e325791" category="cell"><block ref="664cc44494bab5cf2c42eaaf2e325791" category="inline-link-macro-rx"></block></block>
  <block id="47773d8cdfca4f560a96f33d81b47858" category="cell">iSCSI および FC プロトコルを使用して LUN 、 igroup 、ターゲットを設定および管理する方法、 NVMe/FC プロトコルを使用してネームスペースとサブシステムを設定および管理する方法について説明します。</block>
  <block id="121d9e4993fb92968420c9621abc9dd8" category="inline-link-macro">SAN 構成リファレンス</block>
  <block id="b6cd49332e8e4e167bacc80f785766b6" category="cell"><block ref="b6cd49332e8e4e167bacc80f785766b6" category="inline-link-macro-rx"></block></block>
  <block id="52e0bf29e7e2fb64c989717df1d63c01" category="inline-link-macro">クラスタセットアップで System Manager と ONTAP CLI のどちらを使用するかを決定します</block>
  <block id="c8043f5acc6a28fdf197d7834583500e" category="cell"><block ref="c8043f5acc6a28fdf197d7834583500e" category="inline-link-macro-rx"></block></block>
  <block id="a2960939186ae78b824d694e2cbba800" category="inline-link-macro">CLI での管理の概要</block>
  <block id="1baf9f7ecc4554f61d6168e4897ea002" category="cell"><block ref="1baf9f7ecc4554f61d6168e4897ea002" category="inline-link-macro-rx"></block></block>
  <block id="d04e5f519989e5f2ca95f9541ffe17a0" category="inline-link-macro">ONTAP をアップグレードします</block>
  <block id="52fe96f88349d1bc6c73acbb2110bf86" category="cell"><block ref="52fe96f88349d1bc6c73acbb2110bf86" category="inline-link-macro-rx"></block></block>
  <block id="10c0930f56be634af04f178b42398018" category="paragraph">。 <block ref="a578dfd24b9ac76011d432b13fc1b9d1" category="inline-link-macro-rx"></block> また、システムで使用する可能性のあるネットワークインターフェイスカード（ NIC ）やその他のハードウェアに関するドキュメントも含まれています。また、にも含まれています <block ref="9c839fcdfb8699a63c787254d7b1ae03" category="inline-link-macro-rx"></block>をクリックします。このコマンドは、新しいシステムでサポートされるハードウェアに関する情報を提供します。</block>
  <block id="c09b5be4c2da04f4040eef1878f258aa" category="inline-link">ONTAP 9 のドキュメント</block>
  <block id="4c77344094e11bcee3a61c5cd6d9d092" category="paragraph">にアクセスします<block ref="10428d07d2ebc7af9af6725963887c6d" category="inline-link-rx"></block>。</block>
  <block id="4c6af378b95f57bc3cd0d3c8aeab771d" category="paragraph">にアクセスします <block ref="5fbf315c6f5ea598be883d972c599456" category="inline-link-macro-rx"></block> ツール。</block>
  <block id="4ba8d4701b7c72b570a63797aff938e0" category="list-text">ONTAP 9.10.1 以降では、 4 ノードの MetroCluster FC 構成のデフォルトの自動ネゴシエートスイッチオーバー（ NSO ）ベースのアップグレード手順が使用されます。4 ノード MetroCluster FC 構成をアップグレードする場合、「 system controller replace start 」コマンドを問題するときに、「 -nso 」パラメータを「 false 」に設定して、 NSO ベースの手順の起動を禁止する必要があります。</block>
  <block id="45e3f26bb2c9a72d8467afe9a6c33e38" category="cell">交換するノードで同じバージョンの ONTAP が実行されていることを確認します。ONTAP イメージのバージョンが異なると、タスクは失敗します。新しいノードには、元のノードと同じバージョンの ONTAP 9.x がインストールされている必要があります。新しいノードに別のバージョンの ONTAP がインストールされている場合は、設置後に新しいコントローラをネットブートする必要があります。ONTAP のアップグレード方法については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> リンク先： ONTAP のアップグレード _ 。</block>
  <block id="3f906c041fb469b2794aa7ce7964b2a7" category="list-text">システムコンソールで、コントローラの交換用手順の指示に従って、次のコマンドセットを実行します。</block>
  <block id="c209ee9c3a703005ec3303b04dddff2f" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> MetroCluster の管理とディザスタリカバリのコンテンツにリンクし、ネゴシエートスイッチオーバー、修復、スイッチバックについて記載された手順を使用するには、次の手順を実行します。</block>
  <block id="b029dd94e134cfaf963a04051ff43f6d" category="admonition">内蔵ドライブをサポートするシステム（ FAS2700 または AFF A250 など）をアップグレードする場合でも内蔵ドライブがないときは、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> および、 _ アグリゲートの再配置に含まれる手順を使用して、使用している ONTAP のバージョンに適したコントローラ Hardware_content を手動でアップグレードします。</block>
  <block id="14fc1fec490b9f5ad23d58c3c55d4441" category="paragraph">内蔵ドライブを搭載したエントリレベルのコントローラをアップグレードする場合は、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ボリュームまたは storage を移動して _Upgrade にリンクし、 Data ONTAP に移動して、 clustered 手順を実行するノードのペアをアップグレードする _ に進みます。</block>
  <block id="c78fd54aa1461d651da28406676f336f" category="admonition">この手順では、 VLAN 、 ifgrp 、およびブロードキャストドメインの作成に関するセクションの名前が「 _node4 にあるネットワーク設定のリストア」に変更されています。</block>
  <block id="de1d1723e281ecfbe16611cb895dd237" category="paragraph">VLAN 、インターフェイスグループ、およびブロードキャストドメインの作成と再作成の詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして _ ネットワーク管理 _ にリンクします。</block>
  <block id="84b1703925b211a597f4b166b1d80848" category="list-text">HA クラスタなどの MetroCluster 以外手順のシステムでは、 ARL アップグレードのみがサポートされます。</block>
  <block id="598121171fa3c84a4730985ce38a5809" category="list-text">AFF A320 システムからアップグレードする場合は、ボリューム移動を使用してコントローラハードウェアをアップグレードするか、テクニカルサポートにお問い合わせください。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、ボリュームまたは storage _ を移動して _ Upgrade にリンクします。</block>
  <block id="10d20d0fff1a2bb0b064f8b1a068b234" category="paragraph">コントローラハードウェアを別の方法でアップグレードして、ボリュームの移動を希望する場合は、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、ボリュームまたは storage _ を移動して _ Upgrade にリンクします。</block>
  <block id="5faf3e9d007712b89cd716c2cbabed9f" category="paragraph">コントローラのアップグレード時に、コントローラは、より新しい、またはより強力なプラットフォームを実行する別のコントローラに交換されます。このコンテンツの以前のバージョンには、完全に手動で実行するだけで構成されるコントローラの無停止更新プロセスの手順が含まれていました。このコンテンツでは、新しい自動手順の手順を紹介します。自動化された新しい では、ネットワークポートの到達可能性チェックが自動化され、コントローラのアップグレードがさらに簡単になります。</block>
  <block id="794c7b1870555759c37165eedd11e861" category="admonition">この手順では、 VLAN 、 ifgrp 、およびブロードキャストドメインの作成に関するセクションの名前が、 node3 のネットワーク設定の名前が _Restore に変更されています。</block>
  <block id="2618ba1924760141eb8ebfb30bb1d8a9" category="paragraph">VLAN 、インターフェイスグループ、およびブロードキャストドメインの作成と再作成の詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> およびリンク先： _ ネットワーク管理 _ 。</block>
  <block id="b838d4fde6c980fa55cf1649eccebfb3" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、 _Network Management_ または _ONTAP 9 コマンド：マニュアルページリファレンスにリンクしてください。</block>
  <block id="eff04d06fc1c15ba7f721c6eb771ca87" category="list-text">AFF A320 システムからアップグレードする場合は、ボリューム移動を使用してコントローラハードウェアをアップグレードするか、テクニカルサポートにお問い合わせください。ボリュームの移動を希望する場合は、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、ボリュームまたは storage _ を移動して _ Upgrade にリンクします。</block>
  <block id="9897d9d5a6dc54cd05e35a06df6d54b5" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ネットワーク管理 _ または _ ONTAP 9 コマンド：マニュアルページリファレンス _ および _ LIF でのフェイルオーバー設定の詳細については、 _ を参照してください。</block>
  <block id="c27e64cafb401d038cff1543dd15a9f5" category="paragraph">このコンテンツの以前のバージョンには、完全に手動で実行するだけで構成されるコントローラの無停止更新プロセスの手順が含まれていました。このコンテンツでは、新しい自動手順の手順を説明します。</block>
  <block id="0fe674cba26a6125717793de11bb3096" category="inline-link">クラスタ拡張管理</block>
  <block id="ba4c26e136f2c434b8b6af81213365cf" category="paragraph"><block ref="ba4c26e136f2c434b8b6af81213365cf" category="inline-link-rx"></block></block>
  <block id="9d9192129e1b9a1e59bd50fc144f8867" category="paragraph"><block ref="9d9192129e1b9a1e59bd50fc144f8867" category="inline-link-rx"></block></block>
  <block id="086420e81e05bfb84cdecaa4b231e80e" category="paragraph"><block ref="086420e81e05bfb84cdecaa4b231e80e" category="inline-link-rx"></block></block>
  <block id="fbe34624578a760349ae68127c704b12" category="paragraph"><block ref="fbe34624578a760349ae68127c704b12" category="inline-link-rx"></block></block>
  <block id="22e61f778fcc138303ee1a3352b40770" category="list-text">にログインします<block ref="9a6f401ca1e7e89d8a0c29fb0cbe81b7" category="inline-link-rx"></block> サイト</block>
  <block id="32f214bce43cce7090d2126fda118b4f" category="paragraph">お使いのシステムが上記のリストにない場合は、を参照してください<block ref="f73c85a53b5d65cc9c35da0b9e0d2f09" category="inline-link-rx"></block> 内蔵ドライブがあるかどうかを確認します。</block>
  <block id="60dc130e71debefeec3618ac3017c8cc" category="list-text">必要に応じて、 node3 と node4 にアダプタを取り付けます。その際には、該当するアダプタのインストール手順の手順に従います。</block>
  <block id="05a828bdf3e9eb5eb73dbd8f32fc87ba" category="inline-link">必要なデータ保護手順を探します</block>
  <block id="830476e871eedc92e5ffda6c2c33b533" category="paragraph"><block ref="331cb63b7c37688cf0c07ea29b8a4923" category="inline-link-rx"></block>。</block>
  <block id="605eb2ff368b7d55e14901ea718fa36c" category="list-text">を確認しておく必要があります <block ref="3548781d8fe3c65e8421c7698ed973f9" category="inline-link-macro-rx"></block> 内蔵ドライブの移動について</block>
  <block id="7c5ee56a01b06b00d2d910cc295d8c56" category="paragraph"><block ref="7c5ee56a01b06b00d2d910cc295d8c56" category="inline-link-rx"></block></block>
  <block id="793b486187db5ad7f686089607c08fea" category="list-text">パラメータ '_node1_sysid_' は ' 元のノードのシャットダウン _ で記録した値です <block ref="1e1f8cc7c148a6ce0e555a2eab402733" category="inline-link-macro-rx"></block>。</block>
  <block id="cfd2431baff6fc4122f2c8fed540c128" category="paragraph">ストレージを移動してアップグレードするプロセスでは、 node3 と node4 の電源をオンにし、ソフトウェアイメージをブートしてノードを設定します。元のノードと新しいノードで、物理ポートのレイアウトが異なる場合があります。ポートと接続の適切なレイアウトを特定するには、元のノードと交換用ノードの間のポートのマッピングを行う必要があります。</block>
  <block id="a57aac48a821a53a307169a496e18118" category="inline-link-macro">手順 5.</block>
  <block id="2b74e29dce2257a68211617c402f9061" category="paragraph">新しいノードで実行されている ONTAP のバージョンが元のノードのバージョンと異なる場合は、ネットアップサポートサイトから Web にアクセスできるディレクトリに正しい「 &lt;ONTAP_version&gt;_image.tgz 」ファイルをダウンロードしておく必要があります（ storage_, を移動するときのアップグレードの準備を参照してください）。 <block ref="a49c2511b21eba354c03ca701f675aae" category="inline-link-macro-rx"></block>）。システムのネットブートを実行するには、「 &lt;ONTAP_version&gt;_image.tgz 」ファイルが必要です。</block>
  <block id="ac8600b2addf6ed639b9f65bda812bde" category="list-text">アップグレードする新しい各ノードについて、デフォルトのクラスタポート、データポート、およびノード管理ポートに関する情報を取得します。<block ref="f73c85a53b5d65cc9c35da0b9e0d2f09" category="inline-link-rx"></block></block>
  <block id="2c6817284baf4051a1411668b9c30fcb" category="list-text">[[prepare_move_store_5] ネットブートの実行に使用するファイルをダウンロードして準備します。</block>
  <block id="f18720a1eb7d7bace925c2a97a20075f" category="list-text">にアクセスします<block ref="3725c06f412bedb14ffd610de312875d" category="inline-link-rx"></block> システムのネットブートの実行に使用するファイルをダウンロードするには、次の手順を実行します。</block>
  <block id="7d29fb6edb20ce6f3fcde443c39ef137" category="inline-xref-macro">新しいノードをセットアップ</block>
  <block id="3098dc1e81196ed0a5c7526536b21dc6" category="list-text">storage_, の移動時のアップグレードの準備でメモしておいたノード 1 とノード 2 のポートと LIF の設定情報を確認します。 <block ref="54c74de3517b342dfae1a3129a67e9ec" category="inline-link-macro-rx"></block>。</block>
  <block id="785fd52ca2c4957e9caba4406db084c0" category="list-text">storage_ 、 <block ref="54c74de3517b342dfae1a3129a67e9ec" category="inline-link-macro-rx"></block>。</block>
  <block id="b27e1f5014645cf6a835fb2e11524da4" category="list-text">システムに VLAN が設定されていない場合は、に進みます <block ref="44c817ee9110592f40577b67e8940aff" category="inline-xref-macro-rx"></block>。VLAN が設定されている場合は、すでに存在しないポートまたは別のブロードキャストドメインに移動されたポートで設定されていたポート上で、取り外された VLAN を復元します。</block>
  <block id="72a19323d192a6a70bcf03b98d5355ae" category="paragraph">すべてのポートが正しく設定され、正しいブロードキャストドメインに追加されている場合、 network port reachability show コマンドで、接続されているすべてのポートのプレゼンスステータスが OK と報告され、物理的な接続がないポートのステータスは no-reachability と報告される必要があります。これら 2 つ以外のステータスを報告しているポートがある場合は、に記載されているように、到達可能性を修復します <block ref="84a764803e273063ea87749716b7c654" category="inline-xref-macro-rx"></block>。</block>
  <block id="2c6770803baeb326c3573c2c99ff387a" category="summary">このコンテンツでは、ストレージまたはボリュームを移動することで、クラスタ内の AFF システムまたは FAS システムのコントローラハードウェアをアップグレードする方法について説明します。</block>
  <block id="10ce071fec41e8ee934d0d2c7ef28c46" category="doc">ボリュームまたはストレージを移動してアップグレードするかどうかを決定します</block>
  <block id="4888a1163bab7e13f5a9de829f599dba" category="inline-link">MetroCluster のメンテナンスタスクの手順の参照先</block>
  <block id="effb241d20cc6c1913b072368a57f470" category="paragraph"><block ref="effb241d20cc6c1913b072368a57f470" category="inline-link-rx"></block></block>
  <block id="8b6679d6197b72adb78dae0febbb41a1" category="list-text">storage_ 、 <block ref="54c74de3517b342dfae1a3129a67e9ec" category="inline-link-macro-rx"></block>。</block>
  <block id="f7099f8383ed0316e1e0935c4d6ccef1" category="list-text">[[map_97_7] ノード管理ブロードキャストドメインを調整し、必要に応じてノード管理 LIF とクラスタ管理 LIF を移行します。</block>
  <block id="273df14d79796f9686588da9d3449080" category="list-text">必要に応じて、のコマンドを使用して、クラスタ間ブロードキャストドメインを調整し、クラスタ間 LIF を移行します <block ref="ff47d2d93900744c317edfe39ed00899" category="inline-xref-macro-rx"></block>。</block>
  <block id="34c3e41105245eedc58a41b84d06a8da" category="list-text">必要に応じて、のコマンドを使用して、他のブロードキャストドメインを調整してデータ LIF を移行します <block ref="ff47d2d93900744c317edfe39ed00899" category="inline-xref-macro-rx"></block>。</block>
  <block id="72860e73833a237fd9811df9152c9a7a" category="list-text">該当するディスクシェルフの手順を選択します</block>
  <block id="6afaaeefe5c37f69581ad1614c57cff4" category="paragraph">に進みます <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、 _Network Management_ または _ONTAP 9 コマンド：マニュアルページリファレンスにリンクしてください。</block>
  <block id="9f60baa5d0a7e514432de3c5beb88857" category="paragraph">ルートアグリゲートまたはデータアグリゲートが含まれるコントローラを内蔵ディスクドライブにアップグレードする場合は、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ボリュームまたは storage を移動して _Upgrade にリンクし、 Data ONTAP に移動して、 clustered 手順を実行するノードのペアをアップグレードする _ に進みます。</block>
  <block id="ae307041467b0820fea754d90cc7abda" category="admonition">クラスタ内のノードの ONTAP をアップグレードする場合は、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> リンク先： ONTAP のアップグレード _ 。</block>
  <block id="26284a568c7e38bb6355694c41ff5f8d" category="paragraph">いずれかのディスクで障害が発生した場合は、 CLI での _Disk およびアグリゲートの管理の手順に従ってディスクを取り外します。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> CLI を使用してディスクおよびアグリゲートの管理にリンクするには、を参照してください）。</block>
  <block id="025b7f36f1c9c8c4d48374557ce1ad36" category="paragraph">storage aggregate relocation コマンドの詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> CLI_ および ONTAP 9 コマンド：マニュアルページリファレンス _ を使用してディスクおよびアグリゲートの管理にリンクするには、次の手順を実行します。</block>
  <block id="30e26e7bc72201dff893ca95a6a239d8" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> CLI の _content および ONTAP 9 コマンド：マニュアル・ページ・リファレンスで、ストレージ・アグリゲートの再配置コマンドの詳細を確認するには、 _ ディスクおよびアグリゲートの管理にリンクしてください。</block>
  <block id="b146e8621e721a92c4b9d852f016cd74" category="paragraph">RCF を使用するためには、 FC スイッチポートの用途がファブリック接続 MetroCluster インストールおよび設定コンテンツに記載されている用途と同じである必要があります。に進みます <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ファブリック接続 MetroCluster インストールおよびコンフィギュレーションコンテンツにリンクするには、次の手順を実行します。</block>
  <block id="c7ed61befb59e9d4925fe6dba2f74da6" category="paragraph">8 ノード MetroCluster 構成のポート用途に従って、スイッチタイプに対応したケーブルレイアウトを決定するには、 _ Fabric-attached MetroCluster Installation and Configuration_content を使用します。リファレンス構成ファイル（ RCF ）を使用できるようにするために、 FC スイッチポートの用途がコンテンツに記載されている用途と同じである必要があります。</block>
  <block id="873e03798738ee8f4ea5e24bbff9d693" category="paragraph">に進みます <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ファブリック接続 MetroCluster インストールおよびコンフィギュレーションコンテンツにリンクするには、次の手順を実行します。</block>
  <block id="bba101d4874014cacb5b1fc7fbe7165c" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> MetroCluster の管理とディザスタリカバリのコンテンツにリンクし、ネゴシエートスイッチオーバー、修復、スイッチバックの手順に従ってください。</block>
  <block id="d39db7fce48b58f92b4d2b9b0c3351df" category="paragraph">詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ネットワーク管理 _ または _ ONTAP 9 コマンド：マニュアルページリファレンス _ にリンクするには、 _ LIF でのフェイルオーバーの設定 _ に進みます。</block>
  <block id="2c075b61ab1e5a7bc43a337e5b594a77" category="paragraph">storage aggregate relocation コマンドの詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> CLI_ および ONTAP 9 コマンド：マニュアルページリファレンス _ を使用してディスクおよびアグリゲートの管理にリンクするには、次の手順を実行します。</block>
  <block id="5f57a66b3e1d6733761d27be10e87b12" category="list-text">MetroCluster IP 構成および Fabric MetroCluster 構成のその他のアップグレードオプションについては、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> MetroCluster アップグレードおよび Expansion コンテンツにリンクするには、次の手順を実行します。</block>
  <block id="8ccdb707cd31c1e478505a54dfa90f7a" category="paragraph">このコンテンツでは、アグリゲートの再配置を使用して、システムを停止することなくコントローラハードウェアをアップグレードする方法について説明します。</block>
  <block id="55b615d5a5d5462e3f46ce9376778ab0" category="list-text">node3 の起動後に node3 に VLAN とインターフェイスグループの情報を再作成できるように、 VLAN とインターフェイスグループの情報を記録します。</block>
  <block id="a2e30cff23423051f81bd802a4867e92" category="list-text">ポートおよびインターフェイスグループの情報をまだ保存していない場合は、ノード 3 のブート後にそれらの VLAN とインターフェイスグループをノード 3 で再作成できるように、それらの情報を記録します。</block>
  <block id="d5736566f3b38c38d89537f2b1d352ca" category="list-text">まだ保存していない場合は、 VLAN および ifgrp の情報を記録して、ノード 3 のブート後に VLAN および ifgrp を作成し直すことができます。</block>
  <block id="2b3144340f2db340218f76914a6af256" category="doc">新しい SAN LIF を作成するか、削除した SAN LIF を再作成します</block>
  <block id="051662f99e538a90d87104fddd664c40" category="inline-link">ネットワークインターフェイスが作成されます</block>
  <block id="0b3461f9ff1cc0e9748c51914f12d1ac" category="paragraph">クラスタ環境の要件に応じて、この手順で削除した新しい SAN LIF を作成するか、または SAN LIF を再作成することができます。を使用して、 SAN LIF を作成または再作成できます<block ref="307c1988750a87c4014551385f0a3aa7" category="inline-link-rx"></block> OnCommand ® System Manager_documentation を使用したクラスタ管理の手順</block>
  <block id="25f08d7b61860ee1109108f6e40dfa08" category="doc">SAN LIF の移動に関する考慮事項</block>
  <block id="78e610b85ab6101167c6fa157b66555f" category="paragraph">クラスタにノードを追加したりクラスタからノードを削除するなど、クラスタの構成を変更する場合は、 SAN LIF を移動するだけで済みます。LIF を移動した場合、 FC ファブリックを再ゾーニングしたり、クラスタに接続されたホストとその新しいターゲットインターフェイスとの間に新しい iSCSI セッションを作成したりする必要はありません。</block>
  <block id="cea2f29230da8c2fef3774a56b365b07" category="paragraph">SAN LIF を移動するには、「 network interface modify 」コマンドを使用します。SAN LIF を移動するには、 LIF をオフラインにし、別のホームノードやポートに移動してから、移動先の新しい場所で LIF をオンラインに戻す必要があります。Asymmetric Logical Unit Access （ ALUA ；非対称論理ユニットアクセス）は、任意の ONTAP 解決策の一部として冗長パスと自動選択を提供します。このため、移動時に LIF がオフラインになっても、 I/O の中断は生じません。ホストは再試行してから、 I/O を別の LIF に移動するだけです。</block>
  <block id="5a7069a59566aed43a1807b999c67b98" category="paragraph">LIF の移動中は、システムを停止することなく次のタスクを実行できます。</block>
  <block id="e30c2c276ce1db1c06a2b1d0b484ce01" category="list-text">クラスタの 1 つの HA ペアを、 LUN データにアクセスするホストにはまったく支障のない形で、アップグレードした HA ペアに置き換えます</block>
  <block id="6122825da89f3a77f8980f730d12d268" category="list-text">ターゲットインターフェイスカードをアップグレードします</block>
  <block id="995489fe191f249d97b2746413c8ce51" category="list-text">Storage Virtual Machine （ SVM ）のリソースをクラスタ内のノードセットから同じクラスタ内の別のノードセットに移行する</block>
  <block id="56156496b19659e54135677ece56f2f7" category="list-text">ホストサーバがオンラインのときに、ホストサーバによる LUN データへのアクセスを中断することなく、 SAN LUN を新しい HA ペアに移動できます</block>
  <block id="2dd82882bae57f157f720bee2e0f1c24" category="inline-link">SAN LIF の移動</block>
  <block id="f6e1595cdf693f15c733ea3348445b77" category="paragraph">詳細については、を参照してください<block ref="52d99da56caea8d9bc5c4380abc20d71" category="inline-link-rx"></block> SAN ストレージ管理に関するドキュメントの手順</block>
  <block id="b5d4cb67b7812ac1a600c8741c4e6c3e" category="summary">クラスタの内容とクラスタ環境に応じて、 SAN LIF を移動、削除、または作成するか、削除した SAN LIF を再作成する必要があります。</block>
  <block id="8093d580d9cc0468991044c64c97b174" category="doc">SAN LIF を移動、削除、または作成する</block>
  <block id="fa332b15cdfbb22760413e4a60513a40" category="cell">- 完了しました <block ref="a4882b71f5935aea43154f35b1a6d350" category="inline-xref-macro-rx"></block> セクションに移動します <block ref="7401650b9cd3ea8be2a2d31b363b2b3c" category="inline-link-macro-rx"></block>。</block>
  <block id="b6481dacfe88e9c856041be2326875ff" category="cell">手順 4 を省略して、に進みます <block ref="7401650b9cd3ea8be2a2d31b363b2b3c" category="inline-link-macro-rx"></block>。</block>
  <block id="5055165524bf9c633a40b424396e9008" category="section-title">SnapMirror 関係を休止します（オプション）。</block>
  <block id="0df71f161bb7f6f4a1dd4c0ceefcb245" category="sidebar">ステージ 4 ：情報を記録し、 node2 を撤去</block>
  <block id="69dd6fe430ae07730e1c32b2939c278c" category="inline-link-macro">ONTAP 9.9.1 コマンド：マニュアルページリファレンス</block>
  <block id="9d844ecf2e54ad978b96146975590298" category="cell"><block ref="9d844ecf2e54ad978b96146975590298" category="inline-link-macro-rx"></block></block>
  <block id="aaf9449e1999e9c9362cfeac571fbaee" category="cell">ONTAP 9.9.1 でサポートされるコマンドの構文と使用法について説明します。</block>
  <block id="b76266f70180ffb55ceb5ea73e67d7c7" category="inline-link-macro">ONTAP 9.10.1 コマンド：マニュアルページリファレンス</block>
  <block id="c08479ef32255dff91c1115570f6aff4" category="cell"><block ref="c08479ef32255dff91c1115570f6aff4" category="inline-link-macro-rx"></block></block>
  <block id="d361c32c7588b81ad0ce225fabf9cc83" category="cell">サポートされる ONTAP 9.10.1 コマンドの構文と使用法について説明します。</block>
  <block id="8a0208d39b7cf58f7d76559678e6cfb4" category="paragraph">前の段階で確認したあとに、 node2 のリソースリリースが自動的に開始されます。ルート以外のアグリゲートと SAN 以外のデータ LIF が node2 から node3 に移行されます。</block>
  <block id="ef3d7350487977f271f56e19fff958fa" category="paragraph">ARL を使用してノードをアップグレードする前に、手順の動作について理解しておく必要があります。このコンテンツでは、手順はいくつかの段階に分かれています。</block>
  <block id="c76a89f966d60816d2016df1cbb1b151" category="paragraph">にアクセスします <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> セクションでは、このアップグレードに必要な参照ドキュメントと参照サイトのリストを参照できます</block>
  <block id="4c8b55d155015695884299d539ae7e00" category="paragraph">手順を続行する前に、すべての SnapMirror 関係が休止状態になっていることを確認する必要があります。休止された SnapMirror 関係は、リブート後およびフェイルオーバー後も休止状態のままです。</block>
  <block id="d62ce8b165f2d134de4a161b0ce71f49" category="list-text">残りのノードペアのアップグレード用手順に進みます。</block>
  <block id="987d908c963b953e34ffd0bc33ebfd50" category="inline-link-macro">ONTAP 9.8 以降を実行しているコントローラハードウェアを手動でアップグレードします</block>
  <block id="9732e7498adc911676ddbf1eb96c90f1" category="inline-link-macro">ONTAP 9.7 以前を実行しているコントローラハードウェアを手動でアップグレードします</block>
  <block id="5967cd2dd5257e032e2c1568e265b057" category="list-text">node1 は、 node1 アグリゲートのホーム所有者と現在の所有者です</block>
  <block id="a324d0a89d17fcc011978fff16b784da" category="list-text">node2 には、 node2 アグリゲートのホーム所有者と現在の所有者を指定します</block>
  <block id="70bfac3efc816446939b969cb549c8b8" category="list-text">node2 には、 node1 アグリゲートの現在の所有者を指定します</block>
  <block id="ec258c431af242bb93ebbf0d82a4afd2" category="list-text">node2 には、 node2 アグリゲートのホーム所有者と現在の所有者を指定します</block>
  <block id="0ac66da022e888300d8ec43f47b716d6" category="list-text">アップグレードした node1 でキー管理ツールの設定をリストアします</block>
  <block id="487b7a723d50ceb8e8e166efb4cef927" category="list-text">ルート以外のアグリゲートと NAS データ LIF を node2 から node1 に再配置します</block>
  <block id="be74d1508b2732e00219890be181ffa6" category="list-text">アップグレードした node1 は、元は node1 に属していたアグリゲートのホーム所有者および現在の所有者です</block>
  <block id="5e4cf46306e58ecb7565589182d4efcf" category="list-text">アップグレードした node1 は、 node2 アグリゲートの現在の所有者です</block>
  <block id="f28e6dd67b477412b5b29af155fdd706" category="list-text">ネットブート node2</block>
  <block id="bc594bc91cd11d472f20e22d31df3f8a" category="list-text">アップグレードされた node2 は、元々 node2 に属していたアグリゲートのホーム所有者と現在の所有者です。</block>
  <block id="cf76afd058516dd90fe89aedbec6904e" category="list-text">ルート以外のアグリゲートと NAS データ LIF を node2 に戻します</block>
  <block id="52a370bfb3df9d6787958443a448c014" category="cell">ステージ 7 ：アップグレードを完了する</block>
  <block id="b7d2dd68a616ff5846545cdb7a4d940b" category="section-title">アップグレードの完了後、元々 node1 にあるアグリゲートは node2 によって所有されています</block>
  <block id="a6092067c1f4eef24a7887959e25fb77" category="paragraph">アップグレード手順の最後に、 node1 がホームノードとして使用されていたアグリゲートの新しいホームノードになっている必要があります。このパスはアップグレード後に再配置できます。</block>
  <block id="a98ce2caf38bef05082af61a7b3cfd2a" category="paragraph">次の状況で、アグリゲートを再配置できず、ノード 1 ではなくホームノードとしてノード 2 になっている可能性があります。</block>
  <block id="17d6197f66fac0500a1052e1756381a7" category="list-text">ステージ 3 で、アグリゲートが node2 から node1 に再配置されたとき。</block>
  <block id="b64ff0aed650d75434d24e770d7ac535" category="paragraph">再配置する一部のアグリゲートのホームノードが node1 に含まれている。たとえば、このようなアグリゲートのことを aggr_node_A_1 と呼びます。ステージ 3 で aggr_node_A_1 の再配置が失敗し、強制的に再配置を実行できない場合は、アグリゲートは node2 で残ります。</block>
  <block id="bbc15afd4ded8ef20f852908a9e94008" category="paragraph">node2 を交換すると、 aggr_node_A_1 は、 node2 ではなくノード 1 とホームノードとしてオンラインになります。</block>
  <block id="7161e79fb43252db4d620ecbcfbe0672" category="paragraph">ストレージフェイルオーバーを有効にしたあと、ステージ 6 に続けて所有権に関する誤った問題を修正するには、次の手順を実行します。</block>
  <block id="99fb891a920a0a874aa601c151d5ef1b" category="list-text">アグリゲートのリストを取得します。</block>
  <block id="4db16bef5cbc6f50c437fd04132472a1" category="paragraph">正しく再配置されていないアグリゲートを特定するには、セクションで取得した node1 のホーム所有者を含むアグリゲートのリストを参照してください <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block> コマンドの出力と比較してください。</block>
  <block id="0cdc803707489b410a938130768dfdb6" category="list-text">node2 の残りのアグリゲートを再配置します。</block>
  <block id="1204caf15b63ea601a42b09bd0feafca" category="paragraph">この再配置の実行時は、 -nd-controller-upgrade パラメータを使用しないでください。</block>
  <block id="9840fa5d3c651e50130a98db335d1163" category="list-text">node1 がアグリゲートのホーム所有者になったことを確認します。</block>
  <block id="445fae138e0209c0bbf33e92c38c82b6" category="paragraph">ホーム所有者としてノード 1 を持たないアグリゲートは、手順 3 で同じ再配置コマンドを使用してノード 1 に再配置できます。</block>
  <block id="6224b74d5b0b8d2ad6d1e4b341f1fa19" category="paragraph">アップグレード手順の実行中、リモート LIF は SAN LUN へのトラフィックを処理します。アップグレード時にクラスタやサービスの健全性を維持するために、 SAN LIF を移動する必要はありません。SAN LIF は、新しいポートにマッピングする必要がないかぎり移動されません。ノード 1 をオンラインにしたら、 LIF が正常に機能しており、適切なポート上に配置されていることを確認する必要があります。</block>
  <block id="0bff73dcb819ba800842aebfbaa1ea03" category="list-text">ネットワーク到達可能性チェックを実行します。</block>
  <block id="22754bd796837dc212cb05d513ad94cb" category="paragraph">インターフェイスグループポートおよび VLAN ポートを含むすべての接続ポートのステータスが「 OK 」であることを確認します。</block>
  <block id="d22abe120efea253d7c808e8381ed917" category="paragraph">これらのチェックの実行後、システムは、 node1 で所有されているルート以外のアグリゲートと NAS データ LIF を新しい node1 に再配置します。</block>
  <block id="7d7b11f14dacd1dc55ecbacf79121ab1" category="paragraph">リソースの再配置が完了すると、コントローラの交換処理が一時停止します。</block>
  <block id="371a52c6bb799f6fb34f1a8ac8617b35" category="paragraph">コントローラ交換用手順が一時停止している場合は、エラーがある場合はチェックして修正し、次に「問題 re sume 」をクリックして操作を続行します。</block>
  <block id="3757d9b51a1e3f55c16c5d25fae22e61" category="paragraph">LIF が表示されなくなった場合は、ホームノードをノード 1 にリストアします。</block>
  <block id="1b8060cb5ae9dd21090d2ec07cc376b2" category="paragraph">アップグレードを実行するには接地ストラップが必要です。また、アップグレードプロセス中に他のマニュアルを参照する必要があります。</block>
  <block id="0c28f03f85d0a7cc4b82f95fce4d86da" category="doc">アップグレードハードウェアを確認します</block>
  <block id="af9d3f15b5098b02572b4a5b4c346c3d" category="doc">ノード 1 のインストールを確認します</block>
  <block id="c6fd244601cc323697fc7e6249268acd" category="paragraph">手順のこの時点で、コントローラのアップグレード処理はノード 1 がクォーラムへの自動参加を試みるため一時停止している必要があります。</block>
  <block id="ff5725f7647773e4bb6ba48f86580a14" category="list-text">node1 がクォーラムに参加していることを確認します</block>
  <block id="73dac86302530c6371ee49f4ae0c3157" category="paragraph">cluster show -node node1 -fields health`</block>
  <block id="a877d77b53f7818728787e578280c690" category="list-text">コントローラの交換処理が一時停止し、次のメッセージが表示されます。</block>
  <block id="ae76f3c30991fdb1e3693cb5811cb1dc" category="list-text">コントローラの交換が一時停止状態になった状態で、に進みます <block ref="a4e280a8ee04f7ed15cf014345b7be25" category="inline-xref-macro-rx"></block>。</block>
  <block id="830de75aac3de476490ce8697cfc84ee" category="section-title">ノード 1 でネットワーク設定をリストアします</block>
  <block id="7b3bcbfe626392f126d3c9c59049f669" category="paragraph">node1 がクォーラムにあり、 node2 と通信できることを確認したら、 node1 の VLAN 、インターフェイスグループ、およびブロードキャストドメインが node1 で認識されていることを確認します。また、ノード 1 のすべてのネットワークポートが正しいブロードキャストドメインに設定されていることを確認します。</block>
  <block id="97d81579a938e85b79eb326c1bccdb4a" category="paragraph">VLAN 、インターフェイスグループ、およびブロードキャストドメインの作成と再作成の詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、 _Network Management_content にリンクします。</block>
  <block id="909b05c70a22b9f37b5b0dd91c33c2da" category="list-text">アップグレードした node1 にあるすべての物理ポートの一覧を表示します。</block>
  <block id="85aa04fa5dfb58230ad2b2fb89c2b86d" category="paragraph">ノードのすべての物理ネットワークポート、 VLAN ポート、およびインターフェイスグループポートが表示されます。この出力から、 ONTAP によって「 Cluster 」ブロードキャストドメインに移動された物理ポートを確認できます。この出力を使用して、インターフェイスグループメンバーポート、 VLAN ベースポート、または LIF をホストするスタンドアロンの物理ポートとして使用するポートを決定できます。</block>
  <block id="97a140c436b20824a78c55187d8f3252" category="list-text">node1 のすべてのポートに到達できるネットワークポートを表示します。</block>
  <block id="cceb77422957d2a7588c1df43f5eacd8" category="paragraph">network port reachability show -node node1</block>
  <block id="a5fb308a92e4604c009062c3de7b2789" category="list-text">[[restore_node1_step4]] 次の順序で、次のコマンドを使用して、 node1 の各ポートの到達可能性ステータスを「 ok 」以外に修復します。</block>
  <block id="2c7aa9454c1ca6be9ef48b69c5b8cab5" category="list-text">VLAN ポート</block>
  <block id="cf45ec2f4095abbc4f4afca15dbaa0f3" category="paragraph">すべてのポートが正しく設定され、正しいブロードキャストドメインに追加されている場合、「 network port reachability show 」コマンドは、接続されているすべてのポートの到達可能性ステータスを「 ok 」、物理的に接続されていないポートのステータスを「 no-reachability 」と報告する必要があります。この 2 つ以外のステータスが報告されたポートがある場合は、到達可能性修復を実行し、の手順に従ってブロードキャストドメインにポートを追加または削除します <block ref="b6d8caf83cd967ca96a109c1173cf68b" category="inline-xref-macro-rx"></block>。</block>
  <block id="c34ebe5a54f4ac62ebd2695c126240e9" category="paragraph">network interface show -fields home-port 、 status-admin</block>
  <block id="9d9f265fd42c463def1909297104525a" category="paragraph">前の段階で確認したあとに、 node2 のリソースリリースが自動的に開始されます。ルート以外のアグリゲートと SAN 以外のデータ LIF が node2 から新しい node1 に移行されます。</block>
  <block id="e254cf6efdd2e615e6727237969d6011" category="paragraph">アグリゲートと LIF の移行が完了すると、検証のために処理が一時停止されます。この段階で、ルート以外のアグリゲートと SAN 以外のデータ LIF がすべて新しい node1 に移行されたことを確認する必要があります。</block>
  <block id="e7fbff0ca3f51e1ef167cd5ff9eba89b" category="list-text">ルート以外のすべてのアグリゲートがオンラインで、 node1 上のそれらの状態になっていることを確認します。</block>
  <block id="ced536efc0a82fa41600b180eeacc30a" category="paragraph">storage aggregate show -node node1 -state online -root false</block>
  <block id="1ef0b56555ccbaef35e99c2bfb8ce9df" category="paragraph">次の例は、 node1 にあるルート以外のアグリゲートがオンラインになっていることを示しています。</block>
  <block id="f69a858b07bbad6343f4772f5dcbe1fe" category="paragraph">アグリゲートがオフラインになった場合、またはノード 1 で外部になった場合は、新しいノード 1 で各アグリゲートに対して 1 回、次のコマンドを実行してアグリゲートをオンラインにします。</block>
  <block id="8ffd93ea6386b629720c74b50bc25c2e" category="list-text">node1 で次のコマンドを使用し、出力を調べて、すべてのボリュームが node1 でオンラインになっていることを確認します。</block>
  <block id="30c92ab6acc222d81011f6b7ee804f3f" category="paragraph">volume show -node node1 -state offline`</block>
  <block id="85e5ea53a85c7a28840f38eea6491b3c" category="paragraph">ノード 1 上のボリュームのいずれかがオフラインになっている場合は、各ボリュームについて 1 回、 node1 で次のコマンドを使用してボリュームをオンラインにします。</block>
  <block id="6e13fc9d1e75c160461788f1b750083d" category="list-text">次のコマンドを使用して、 node2 にデータ LIF が残っていないことを確認します。</block>
  <block id="ee2ce060961db1c7ec1f363acef87d91" category="paragraph">アップグレード手順の実行中、リモート LIF は SAN LUN へのトラフィックを処理します。アップグレード時にクラスタやサービスの健全性を維持するために、 SAN LIF を移動する必要はありません。SAN LIF は、新しいポートにマッピングする必要がないかぎり移動されません。node2 をオンラインにしたあと、 LIF が正常に機能しており、適切なポートに配置されていることを確認する必要があります。</block>
  <block id="b990f6960d7072e815b8e4d805f92035" category="paragraph">LIF が取り外された場合、ホームノードを node2 にリストアします。</block>
  <block id="51108f40a613018fdc6b3ad89f42122e" category="list-text">この手順は、交換用コントローラハードウェアが新しく購入されていて、他のシステムで使用されていないことを前提としています。使用済みのコントローラを「 wipeconfig 」コマンドで準備するために必要な手順は、この手順には含まれていません。交換用コントローラハードウェアが以前に別の ONTAP クラスタまたはスタンドアロンのシングルノードシステムとして使用されていた場合は、テクニカルサポートにお問い合わせください。</block>
  <block id="5077f34346404c6e6b1972588ad2c047" category="list-text">ONTAP コマンドラインの advanced 権限モードで次のコマンドを入力して、コントローラの交換プロセスを開始します。</block>
  <block id="db4336e2ca46622010f5ba0c4094ec50" category="paragraph">事前確認フェーズでは、以下のチェックがバックグラウンドで実行されます。</block>
  <block id="f51ac25569c065e7813718ef345e9ddc" category="cell">交換するノードにローカル以外のデータ LIF があるかどうかを確認します。ホーム所有者でないデータ LIF がノードに含まれないようにしてください。ローカル以外のデータ LIF がいずれかのノードに含まれている場合、タスクは失敗します。</block>
  <block id="c293ce688a142a8943b3fa428c09e414" category="paragraph">ノード 1 が完全に停止したら、 node1 の LOADER プロンプトが表示されている必要があります。LOADER プロンプトを表示するには、 node1 のシリアルコンソールに接続します。</block>
  <block id="16597a9dd20f2d5db13339b0bf3ad60c" category="admonition">ノード 1 で作業しているときは、コンソールケーブルと e0M ケーブルのみをノード 1 から取り外します。このプロセスの実行中は、 node1 または node2 の他のケーブルや接続を取り外したり変更したりしないでください。</block>
  <block id="4f15dffc58c8598c508fa46cd5335ebb" category="list-text">コントローラモジュール A のロックを解除してシャーシから取り外します。</block>
  <block id="c1ed0cd23ea77c49b5611e5929537b3f" category="list-text">カムハンドルのオレンジ色のボタンを下にスライドさせてロックを解除します。</block>
  <block id="f58d98f433350ee3e614bfdfe3036a89" category="image-alt">コントローラモジュールを取り外します</block>
  <block id="fb6d576fd0865356efea00348612bf65" category="image-alt">番号 1</block>
  <block id="b05aea0ff1931b3ce07289e5c24c4357" category="cell">カムハンドルのリリースボタン</block>
  <block id="72f0f1912ae3ec72b1995b632a2cc692" category="image-alt">番号 2</block>
  <block id="b733ab833a64f07b84375a26a6af83f0" category="cell">カムハンドル</block>
  <block id="1ce9441378e5288a31f9dee89eb4cb1d" category="list-text">カムハンドルを回転させて、コントローラモジュールをシャーシから完全に外し、コントローラモジュールをシャーシから引き出します。</block>
  <block id="838771143f1029cc3b1ac5c3be2796bc" category="paragraph">このとき、空いている手でコントローラモジュールの底面を支えてください。</block>
  <block id="1746c03166c1029bf12087835ea936f0" category="list-text">文字と数字が記載されたカムボタンを押し下げます。</block>
  <block id="e73d298eda7538e8d44a7ca445767962" category="paragraph">カムボタンがシャーシから離れます。</block>
  <block id="805f241c9acf04968d6f84157a96e0c1" category="list-text">カムラッチを下に回転させて水平にします。</block>
  <block id="c6e52defde912721ad3ec5315c5d9664" category="cell">文字と数字が記載された I/O カムラッチ</block>
  <block id="0e50691d6ac3e9df529fa546f2486bd7" category="cell">ロックが完全に解除された I/O ラッチ</block>
  <block id="85b0e5132d3bec02fcda8eb6f24b6062" category="list-text">管理ポートとコンソールポートを node1 コントローラモジュールにケーブル接続します。</block>
  <block id="9ce6fd0a8d01a2b4341b85fdb23f1ba5" category="list-text">コントローラモジュールをシャーシに挿入し、ミッドプレーンまでしっかりと押し込んで完全に装着します。</block>
  <block id="9d3d5ccff9d9d7f336c5f4adfb3eea08" category="paragraph">コントローラモジュールが完全に装着されると、ロックラッチが上がります。</block>
  <block id="f39c570aa40591b3a07f64b52d7d04bd" category="cell">カムハンドルのロックラッチ</block>
  <block id="3f5e8e551ad561c269d0656e1bd198f0" category="cell">カムハンドルがアンロック位置にある</block>
  <block id="2ea32610c0c34642fe97bf6f44009b1f" category="list-text">モジュールを装着したらすぐにシリアルコンソールに接続し、 node1 の自動ブートを中断できるようにします。</block>
  <block id="941f1a1f76f1ea9874688b46955c3e10" category="list-text">node1 の LOADER プロンプトで、デフォルトの環境変数を設定します。</block>
  <block id="bb54a67e0ba8edb77dda51dedb81fec0" category="list-text">デフォルトの環境変数設定を保存します。</block>
  <block id="753fbbab7087d2d0ed1ee7008bb7cf3d" category="list-text">残りのノードペアのアップグレード用手順を使用してを続行します。</block>
  <block id="4268d96ccc42c6690ac8aae29513a187" category="paragraph">HA ペアがすでに無効になっているため、ノード 1 は node2 のクラッシュ後にテイクオーバーしません。</block>
  <block id="407e2777bfd7bd53cdb708f5debf979e" category="section-title">HA ペアを無効にすると、最初の検証フェーズでノード 1 がクラッシュします</block>
  <block id="b1d9db53b400440509215a88326131de" category="paragraph">node2 の一部またはすべてのアグリゲートが node1 から node1 に再配置されています。node1 は、再配置されたアグリゲートからデータを提供します。HA ペアが無効になっているため、テイクオーバーはありません。</block>
  <block id="1079e854ebb97bcd056598f1d85d2d41" category="paragraph">再配置されなかったアグリゲートのクライアントが停止しています。ノード 2 をブートすると、ノード 1 のアグリゲートがノード 1 に再配置されます。</block>
  <block id="34bef26d43d2971beb837b24432bf29f" category="section-title">アグリゲートの再配置中にリソースを再取得する最初のフェーズでノード 1 がクラッシュする</block>
  <block id="6567edc5b92aa998986653af564fb84d" category="paragraph">ノード 2 でアグリゲートをノード 1 に再配置しているときにノード 1 がクラッシュした場合、ノード 1 がブートしたあともタスクは続行されます。</block>
  <block id="eb7af4b5a2136599dcb38458658acd79" category="paragraph">node2 では残りのアグリゲートの処理が続行されますが、ノード 1 に再配置済みのアグリゲートでは、ノード 1 のブート中にクライアントが停止します。</block>
  <block id="3bbbd3988dc6983974f5205284fa9cec" category="section-title">チェック後のフェーズでノード 1 またはノード 2 がクラッシュした</block>
  <block id="eea59a2de6754c9ba099cb152770e327" category="section-title">リソースの 2 つ目のリリースフェーズでノード 1 がクラッシュする</block>
  <block id="cf352bc2feea6caf0c382dc7013ccc96" category="paragraph">node2 によるアグリゲートの再配置中にノード 1 がクラッシュした場合、ノード 1 がブートしたあとも処理が続行されます。</block>
  <block id="069b00a46005a091a86bc4c0fa514dcf" category="paragraph">ノード 2 は残りのアグリゲートの処理を続行しますが、ノード 1 とノード 1 のアグリゲートにすでに再配置されたアグリゲートでは、ノード 1 のブート中にクライアントが停止します。</block>
  <block id="8a8dae69aeea749618a3f3fab32fb26c" category="paragraph">ノード 1 は再配置されたアグリゲートを引き続き提供しますが、ノード 2 が所有するアグリゲートではクライアントが停止します。</block>
  <block id="8e1b610012ea588eb83fba108e3403b6" category="section-title">第 2 の検証フェーズでノード 1 がクラッシュした</block>
  <block id="a811b72e20218470dc07093ef4249bdf" category="paragraph">このフェーズでノード 1 がクラッシュした場合、 HA ペアがすでに無効になっているため、テイクオーバーは実行されません。</block>
  <block id="26f30b0cbca3c1ffde0236a5a136b1c4" category="paragraph">ノード 1 がリブートするまでは、すべてのアグリゲートのクライアントが停止します。</block>
  <block id="92c94fd4970b81f16fb965f2eaf5c5f3" category="section-title">2 番目の検証フェーズで node2 がクラッシュします</block>
  <block id="913675daad9fd7d57823502b858e93f3" category="paragraph">このフェーズで node2 がクラッシュすると、テイクオーバーは実行されません。node1 はアグリゲートからデータを提供します。</block>
  <block id="e035160959e76686219645967f202317" category="paragraph">ノード 2 がリブートするまでルート以外のアグリゲートがすでに再配置されている場合、停止します。</block>
  <block id="8fec9698e48614a1961275dcbf888442" category="doc">ネットブート node1</block>
  <block id="dc4e68dae6f2c9aa089b7b7f44a400c0" category="list-text">ご使用のシステムに必要なシステムファイルと適切なバージョンの ONTAP を、 _NetApp サポートサイトからダウンロードします。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> からネットアップサポートサイトにリンクできます。</block>
  <block id="2ba573cec1f6a3141c471fb88430735b" category="list-text">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ネットアップサポートサイトへのリンクをクリックして、システムのネットブートの実行に使用するファイルをダウンロードします。</block>
  <block id="b3fa942f65431caf219b9891c77a7cc2" category="list-text">[netboot_node1_step2] _netapp サポートサイト _ のソフトウェアダウンロードセクションから適切な ONTAP ソフトウェアをダウンロードし、「 ONTAP_version_image.tgz 」ファイルを Web にアクセスできるディレクトリに保存します。</block>
  <block id="6ecb92f5d83c8c88c6eee4e21a07fa4b" category="list-text">ディレクトリの一覧に「 ONTAP_version_image.tgz 」が含まれている必要があります。</block>
  <block id="f47f57e3434d00c4cb0ddb03933b3fc5" category="list-text">次のいずれかを実行してネットブート接続を設定します。</block>
  <block id="1e23f3f1f1ff4c1174660749785a3e47" category="admonition">インターフェイスによっては、その他のパラメータが必要になる場合もあります。ファームウェア・プロンプトで「 help ifconfig 」と入力すると、詳細が表示されます。</block>
  <block id="2e9296c7316d4c4c76380224c1db72b2" category="list-text">node1 でネットブートを実行します。</block>
  <block id="99002edb0db3876428b0f60105beedae" category="paragraph">netboot\http://web_server_ip/path_to_web_accessible_directory/netboot/kernel`</block>
  <block id="a303e403af842ae1a3aee97050fd5dcf" category="list-text">手順を続行するかどうかを確認するメッセージが表示されたら 'y' と入力し ' パッケージの入力を求められたら 'URL:\http://web_server_ip/path_to_web-accessible_directory/ontap_version_image.tgz` と入力します</block>
  <block id="e581180eb51e0c55c220313efa4f6d03" category="paragraph">「 path_to_the_web-accessible_directory 」は、「 ONTAP_version_image.tgz 」をダウンロードした場所を指します <block ref="3c453ca3ddf73b988300a74fd18c23c3" category="inline-xref-macro-rx"></block>。</block>
  <block id="19447c446165b59a012b755c1aa9b173" category="list-text">次のメッセージが表示されたら、回答は「はい」を選択します。</block>
  <block id="d9942055ef69c8d0b4c6c187ca017527" category="list-text">ノードがリブートして「 wipeconfig 」を終了し、ブートメニューで停止します。</block>
  <block id="e3dcb6e98d703b4041ac7a4b6d40412e" category="list-text">ブート・メニューからオプション「 5 」を選択して、保守モードに切り替えます。ノードがメンテナンス・モードで停止し ' コマンド・プロンプト *' が表示されるまで 'yes' を選択します回答</block>
  <block id="e45b434885da7370501c14b198e0d2e4" category="list-text">コントローラとシャーシが「 HA 」として構成されていることを確認します。</block>
  <block id="c88945f452b82e198d1feb0b8588ed41" category="list-text">「 ha-config 」の設定を確認します。</block>
  <block id="1fc3994f37da8b8908bef1c9bf2acf39" category="list-text">ノード 1 を停止します。</block>
  <block id="c81f7065b2f44e30972bdae18530e5c8" category="paragraph">ノード 1 は LOADER プロンプトで停止します。</block>
  <block id="ce12a4bf50a5a230a60ced68a1d299b9" category="list-text">node2 で、システムの日付、時刻、およびタイムゾーンを確認します。</block>
  <block id="2282aeb7788cacc368146303b22e4114" category="list-text">node1 で、ブート環境プロンプトで次のコマンドを使用して日付を確認します。</block>
  <block id="6169e268732842e26b1f460c798a9b1c" category="list-text">必要に応じて、 node1 に日付を設定します。</block>
  <block id="a696e7909c208805ac0eb6dbf1915519" category="admonition">node1 で対応する UTC 日付を設定します。</block>
  <block id="546dffd75f02d9ea5fb5b2b1c3e32430" category="list-text">ノード 1 で、ブート環境のプロンプトで次のコマンドを使用して時間を確認します。</block>
  <block id="b7f0c2363c0b962e051ab6e71f426536" category="list-text">必要に応じて、 node1 で時刻を設定します。</block>
  <block id="36a69b26aa6ef29ce10557879031670f" category="admonition">node1 で対応する UTC 時間を設定します。</block>
  <block id="0b0ffc724c1bc5094f0087b16afb9c41" category="list-text">node1 でパートナーシステム ID を設定します。</block>
  <block id="68757294a9e11cada8382926574adf4d" category="list-text">[netboot_t2_step2] ネットアップサポートサイトのソフトウェアダウンロードセクションから適切な ONTAP ソフトウェアをダウンロードし、「 ONTAP_version_image.tgz 」ファイルを Web にアクセスできるディレクトリに保存します。</block>
  <block id="521d2e7a8ad46807c0ef8c12e39a788c" category="list-text">node2 でネットブートを実行します。</block>
  <block id="69c80750b2ca197795d12a8c04c972ec" category="paragraph">「 path_to_the_web-accessible_directory 」は、「 ONTAP_version_image.tgz 」をダウンロードした場所を指します <block ref="76bd6b715ce71dc5a44082b74fc8f01f" category="inline-xref-macro-rx"></block>。</block>
  <block id="d254d61b5be1df9d2c66c57fd4212982" category="list-text">ノード 2 を停止します。</block>
  <block id="13eaf17fec5f96e644d7f96eacceff2d" category="paragraph">node2 で LOADER プロンプトが停止します。</block>
  <block id="eaa06243d79c8afa1405151e312e38dd" category="list-text">node2 で、ブート環境のプロンプトで次のコマンドを使用して日付を確認します。</block>
  <block id="cb34b4f010c7f4a67f9f369e6bcaaca2" category="list-text">必要に応じて、 node2 で日付を設定します。</block>
  <block id="203bd2f32b8f21bd7ddbf50feca53f2d" category="admonition">node2 で対応する UTC 日付を設定します。</block>
  <block id="fe00ea02f2b926e29ff2f68aaf7fa198" category="list-text">node2 で、ブート環境のプロンプトで次のコマンドを使用して時刻を確認します。</block>
  <block id="9e84800f4ac2f15c0e92f8a0bfedcb2c" category="list-text">必要に応じて、 node2 で時刻を設定します。</block>
  <block id="dc7e3044e4900ae357994969cd1ff606" category="admonition">node2 で対応する UTC 時間を設定します。</block>
  <block id="9242c558140d9a52d10f2e6b57f75893" category="list-text">コントローラモジュールの端をシャーシのベイ B に合わせ、コントローラモジュールをシステムに半分までそっと押し込みます。</block>
  <block id="1ba57f7982d64e52fcc3eb0235996968" category="admonition">ベイラベルは、シャーシのコントローラモジュールのすぐ上にあります。</block>
  <block id="2cd913fdf7e7f2f1c4a048df3be22534" category="list-text">管理ポートとコンソールポートを node2 コントローラモジュールにケーブル接続します。</block>
  <block id="da2b45cbcbfabc951a211d4aed4ae9d5" category="doc">キー管理ツールの設定を node2 にリストアします</block>
  <block id="c33d1193fa61b53992488cb1598a346b" category="list-text">node2 のチェック後、 node2 クラスタのストレージフェイルオーバーとクラスタ HA ペアが有効になります。処理が完了すると、両方のノードに「 Completed 」と表示され、クリーンアップ処理が実行されます。</block>
  <block id="9eabbc872717665c9d6cf452e2e948ce" category="list-text">次のコマンドを使用して出力を調べ、 node1 と node2 が同じクラスタに属していることを確認します。</block>
  <block id="7de71753e32700489d3b6afdd9b1e417" category="list-text">次のコマンドを使用して、 node1 と node2 が相互のストレージにアクセスできることを確認します。</block>
  <block id="0fe6701c2bd4920c5d453b5ee906eed1" category="list-text">次のコマンドを使用して、 node1 と node2 のどちらもクラスタ内の他のノードがホーム所有するデータ LIF を所有していないことを確認します。</block>
  <block id="6a4e3b384743506a60b9d8b065cd9569" category="paragraph">クラスタ内の他のノードがホーム所有するデータ LIF をノード 1 とノード 2 のどちらも所有していない場合は、データ LIF をホーム所有者にリバートします。</block>
  <block id="539dfd2d954ae3879b62b16e5593152b" category="list-text">アグリゲートがそれぞれのホームノードで所有されていることを確認します。</block>
  <block id="8f3c31fbc98a55b30d3c8c6b6ba60ad1" category="list-text">次のコマンドを使用して出力を調べ、ライセンスが正しくインストールされていることを確認します。</block>
  <block id="83384f48b367d39b20d627f5230807a9" category="list-text">両方のノードで次のコマンドを使用して SP を設定します。</block>
  <block id="09e9f7abfe1cdfbd7b4465d4dbc6bd0c" category="paragraph">ノード 1 とノード 2 でストレージ暗号化が有効になっている場合は、セクションを完了します <block ref="18c90c300c0b71334b8b427eaf4f38a3" category="inline-link-macro-rx"></block>。それ以外の場合は、の項を実行します <block ref="6e48b929ca0767f00c15eeb6d7e78755" category="inline-link-macro-rx"></block>。</block>
  <block id="ab8666705fb8255d0f27c0919160c1e4" category="doc">node2 のインストールを確認します</block>
  <block id="ba7d8f5ebb18592d91d949241848dfe6" category="paragraph">手順のこの時点で、 node2 がクォーラムに参加する間、処理が一時停止します。</block>
  <block id="c32050bd0152940e859c61963c8eac2b" category="list-text">node2 がクォーラムに参加していることを確認します</block>
  <block id="8c8bbdd54247874dc95cb56adf2233aa" category="list-text">コントローラの交換が一時停止状態になった状態で、に進みます <block ref="cf2f6e65074eee957c362f92c9fdd8b5" category="inline-xref-macro-rx"></block>。</block>
  <block id="c7ac27a6d6c91af26ae2248d25a66f1f" category="section-title">node2 でネットワーク設定をリストアします</block>
  <block id="26c2308a63a61c5f8f6891347ee8e59b" category="paragraph">node2 がクォーラムにあり、 node1 と通信できることを確認したら、 node1 の VLAN 、インターフェイスグループ、およびブロードキャストドメインが node2 に表示されていることを確認します。また、 node2 のすべてのネットワークポートが正しいブロードキャストドメインに設定されていることを確認します。</block>
  <block id="2d9a324d737623f68053a45037166f3b" category="list-text">アップグレードした node2 上のすべての物理ポートを表示します。</block>
  <block id="37d34a6dfe6383da0e88e7b677055d44" category="paragraph">network port show -node node2`</block>
  <block id="5b2006e0f6d482c797a962849e1eccf4" category="list-text">node2 のすべてのポートの到達可能性を表示します。</block>
  <block id="7c587f95f797c282f896f4e149ba42f0" category="paragraph">network port reachability show -node node2`</block>
  <block id="6996b4514e4836b99cfcaa0e279b06fe" category="paragraph">次の例のような出力が表示されます。ポート名とブロードキャスト名はさまざまです。</block>
  <block id="f73c63fe868c9eadae0867a98f883222" category="list-text">[[restore_node2 _step4] 次のコマンドを使用して、 node2 の各ポートの到達可能性を「 ok 」以外の到達可能性ステータスで修復します。</block>
  <block id="cdd786773bbaae1529cd3ffa5c7d238c" category="paragraph">すべてのポートが正しく設定され、正しいブロードキャストドメインに追加されている場合、「 network port reachability show 」コマンドは、接続されているすべてのポートの到達可能性ステータスを「 ok 」、物理的に接続されていないポートのステータスを「 no-reachability 」と報告する必要があります。この 2 つ以外のステータスが報告されたポートがある場合は、到達可能性修復を実行し、の手順に従ってブロードキャストドメインにポートを追加または削除します <block ref="9da9497007dcbdf9ea585e9965505651" category="inline-xref-macro-rx"></block>。</block>
  <block id="5042d04c33524bcbd54a634369ce4d6b" category="list-text">node4 にあるすべてのポートの到達可能性をリストします。</block>
  <block id="5e997021ee0d4607339bb16384449e18" category="list-text">[[step3]] node3 のすべてのポートの到達可能性をリストします。</block>
  <block id="e58fe7640209496d4d7a887457b3a8c5" category="sidebar">ステージ 7 ：アップグレードを完了します</block>
  <block id="815c0aa063df3c53b17744c860357708" category="paragraph">アップグレードの完了後に、 node2 の運用を停止できます。を参照してください <block ref="6e48b929ca0767f00c15eeb6d7e78755" category="inline-link-macro-rx"></block>。</block>
  <block id="5980c068f7f0508562e337b63f7ad8d1" category="doc">ワークシート：コントローラのアップグレード前後に収集する情報</block>
  <block id="a097e8e84a8d86baba412e5958e51b5a" category="inline-link">ネットアップの技術情報アーティクル SU436 ：「 clam takeover default configuration changed</block>
  <block id="2b628f1eeda50351f42204c06da24fe7" category="list-text">ONTAP 9.6P11 、 9.7P8 、またはそれ以降のリリースを使用している場合は、 Connectivity 、 live, and Availability Monitor （ CLAM ）のテイクオーバーを有効にして、特定のノード障害が発生したときにクラスタをクォーラムに戻すことを推奨します。「 kernel-service 」コマンドには、 advanced 権限レベルのアクセスが必要です。詳細については、を参照してください<block ref="7c246f3223ef6280d0a553bd56956f52" category="inline-link-rx"></block>。</block>
  <block id="b8dabd137df5202c83400e4fde74838d" category="paragraph">`::&gt; network connections listening show -vserver Cluster `</block>
  <block id="9c26c389cd17f0bf0da92eb4d2187822" category="paragraph">次の 2 ノードクラスタの例に示すように、クラスタポートでリスンしているポート 7700 は想定される結果です。</block>
  <block id="8f6f15e3cd3793ad38c3214c75a0a348" category="paragraph">手順 11 を繰り返して、クラスタ LIF がポート 7700 でリスンしていることを確認します。</block>
  <block id="d1a7512eb8f4b6dc2ebea16def830204" category="paragraph">手順 11 を繰り返して、クラスタ LIF がポート 7700 でリスンしていることを確認します。</block>
  <block id="ceb1502357ca7edd7dc13458f9f78895" category="paragraph">手順（ g ）を繰り返して、クラスタ LIF がポート 7700 でリスンしていることを確認します。</block>
  <block id="9694fd9e35e64d8c445c0824b45a5dff" category="inline-link-macro">ONTAP 9.7 以前のバージョンを使用してネットワークポートをマッピングし、手順 7 を実行します</block>
  <block id="b97fc198d08784bb72759208e4a261de" category="paragraph">手順（ f ）を繰り返して、クラスタ LIF がポート 7700 でリスンしていることを確認します。</block>
  <block id="c4bb7f0d17cacb6fbdc03f40dfe338e7" category="paragraph">手順 3 を繰り返して、クラスタ LIF がポート 7700 でリスンしていることを確認します。</block>
  <block id="d86684c09dde7ea5d5d7306c6f674ea3" category="list-text">各クラスタ LIF がポート 7700 をリスンしている必要があります。クラスタ LIF がポート 7700 をリスンしていることを確認します。</block>
  <block id="3a96acfd6567b2f5ad01ec7a0444dccd" category="paragraph">「 security key-manager external enable 」と入力します</block>
  <block id="f448f5b6d3d32deaf11413ff5379c871" category="paragraph">「 security key-manager external show-status 」</block>
  <block id="49bfbad696a2529ef03d859ad9b3f40a" category="paragraph">「 security key-manager external show 」と入力します</block>
  <block id="c497a6b930105164567b744840c21e94" category="paragraph">「 securitykey manager onboard show-backup 」を参照してください</block>
  <block id="d666aabcb0474ed724f0c2bbfd2378fc" category="paragraph">新しいノードに合わせてスイッチを再設定するには、適切なリファレンス構成ファイル（ RCF ）を適用する必要があります。RCF を適用したら、スイッチを再接続できます。</block>
  <block id="61cecfa3ef719d9c2d42720a7467139d" category="inline-link">MetroCluster の RCF ダウンロード</block>
  <block id="529fa8fad2e5f9e9ec2a18c99f9fc39e" category="list-text">にアクセスします<block ref="0813f64c6803a33deb9dfac6dfb10541" category="inline-link-rx"></block> ページで、スイッチ構成用の RCF を選択します。</block>
  <block id="2a7e4a94676516e8b47d9d81e8df4e81" category="paragraph">使用しているスイッチモデルに対応した RCF を使用する必要があります。</block>
  <block id="52ce6e876ac27324725c74f98c46d204" category="list-text">FC スイッチの RCF をインストールするには、使用しているスイッチモデルに一致する手順 を選択し、インストール手順に従います。</block>
  <block id="aebc5d784c007f0e8cc41b6a373e879a" category="inline-link">Brocade FC スイッチの RCF をインストールします</block>
  <block id="0283024582f18d79aeec623eb7ec67f9" category="list-text"><block ref="0283024582f18d79aeec623eb7ec67f9" category="inline-link-rx"></block></block>
  <block id="a46316d3c1d9191fc02a8477780cbda6" category="inline-link">Cisco FC スイッチの RCF をインストールします</block>
  <block id="e2dd418f8bec46f2839cbe69bcf70fb5" category="list-text"><block ref="e2dd418f8bec46f2839cbe69bcf70fb5" category="inline-link-rx"></block></block>
  <block id="89cb6d555dc47b476897d862f860da4b" category="paragraph">これらの手順は、 node3 と node4 で実行する必要があります。まず一方のノードでそれぞれの手順を完了してから、次の手順に進みます。</block>
  <block id="758ed2ce94a0d48e369a05e9792df5bf" category="paragraph">ボリュームを移動することでアップグレードの手順 を完了するには、サービスプロセッサ（ SP ）を設定し、新しいライセンスをインストールし、 AutoSupport をセットアップする必要があります。また、ストレージまたはボリュームの暗号化を設定し、 FC ポートまたは NCA ポートを設定する必要がある場合もあります。</block>
  <block id="19c5e12737453438de328e8d1b0bf8e9" category="paragraph">元のノードからボリュームを移動したら、 SAN 以外のデータ LIF とクラスタ管理 LIF を元のノードから新しいノードに移行する必要があります。</block>
  <block id="86f8743a1b5fe2af67d144308957dbfc" category="summary">ブートメディアの設定情報がコントローラのアップグレードの妨げにならないように、 node3 と node4 の設定をデフォルトの設定にリセットする必要があります。</block>
  <block id="e4b60fefa0013671f6066bd9990def84" category="paragraph">ブートメディアの設定情報がコントローラのアップグレードの妨げにならないように、 node3 と node4 の設定をデフォルトの設定にリセットする必要があります。</block>
  <block id="3c6d839c276fd97f3efa9e0584e8ab14" category="paragraph">node3 と node4 には、次の手順を実行する必要があります。この手順は各ノードで並行して実行できます。</block>
  <block id="bfa39e83f3483c34263e33d3e5ad162c" category="paragraph">ご使用の構成に固有のガイダンスが必要な場合は、テクニカルサポートにお問い合わせください。</block>
  <block id="aa6a7c81aeaad5ec8cef068df556cb9d" category="paragraph">ハンドルは、キャリアの前面に揃うようにゆっくりと閉じる必要があります。</block>
  <block id="14f8d7aeb38b3b3c06627b7d57fdaecb" category="list-text">コマンド出力に「 ha 」と表示されていることを確認する必要があります。</block>
  <block id="b245fdf63109e1cd27dd2f23120f7502" category="paragraph">アップグレードを計画するには、アップグレードに関する一般的な考慮事項を把握しておく必要があります。必要に応じて、テクニカルサポートに連絡して、クラスタの構成に固有の推奨事項とガイダンスを確認してください。</block>
  <block id="03004a754e91e01bc54b3719dea50cd1" category="paragraph">アップグレード後に node3 と node4 がクラスタ内およびネットワークと相互に通信できるようにするには、物理ポートがクラスタやデータなどの目的の用途に応じた設定で正しく設定されていることを確認する必要があります。</block>
  <block id="280d42fd22f6ddb732aa3a4794b2f8cd" category="list-text">ONTAP が修復を完了できるようにするには、最後のポートで「 reachability repair repair repair repair repair repair repair 」コマンドを実行してから約 1 分待ちます。</block>
  <block id="f9549720965f3c3fb632f663b0449f83" category="paragraph">交換用ノードを稼働状態に戻す前に、 LIF がホームポートにあることを確認し、 AutoSupport が有効な場合は交換用ノードのシリアル番号を登録して、自動ギブバックをリセットする必要があります。</block>
  <block id="d5ab5005da45084a6ce089842fe78dbc" category="list-text">シリアルコンソールに接続していない場合は、接続します。ノードに LOADER プロンプトが表示されている必要があります。「 boot_ontap maint 」コマンドを使用して、メンテナンスモードに切り替えてブートします。</block>
  <block id="440ba7279ff63f95d423448a61e1f397" category="paragraph">パートナーノードが停止しているか、パートナーノードでテイクオーバーが手動で無効になっていることの確認を求めるメッセージが表示されることがあります。続行するには 'yes' を入力します</block>
  <block id="820e7fd61363b779a8b96275d3f43cd7" category="list-text">メンテナンスモードで、 node1 と node2 のメールボックスを削除します。 +</block>
  <block id="6074c781af342d278c2cc2ce1cf3994c" category="list-text">options フィールドで node1 のルートアグリゲートが「 root 」に設定され、他のアグリゲートがオンラインであることを確認します。</block>
  <block id="894e562062b22c583508fbba2535e930" category="paragraph">を確認しておく必要があります <block ref="3548781d8fe3c65e8421c7698ed973f9" category="inline-link-macro-rx"></block> ノードのドライブシェルフへの変換について説明しています。ご使用の構成に固有のガイダンスが必要な場合は、テクニカルサポートにお問い合わせください。</block>
  <block id="2c812e8ad85843d2fb30e9ee5a9139e7" category="paragraph">ボリュームを移動してコントローラハードウェアをアップグレードする前に、いくつかの準備手順を実行する必要があります。</block>
  <block id="ee854370fd2f5a7eb524cd691b34306b" category="paragraph">クラスタの内容とクラスタ環境に応じて、 SAN LIF を移動、削除、または作成するか、削除した SAN LIF を再作成する必要があります。</block>
  <block id="26ade9476b94b8c52725c91b6938ea23" category="paragraph">この手順 は、次の状況でコントローラハードウェアをアップグレードする場合に使用します。</block>
  <block id="6d760bf8ac1b665771cffc45fc130866" category="paragraph">コントローラモジュールはリブートしますが、ブートメニューで停止します。これは、ブートデバイスが再フォーマットされたことにより、構成データをリストアする必要があるためです。</block>
  <block id="585bb8123c8fd5789aad3617861008af" category="paragraph">UTA / UTA2 ポートは、ネイティブの FC モードまたは UTA / UT2A モードに設定できます。FC モードでは FC イニシエータと FC ターゲットがサポートされます。 UTA / UTA2 モードを使用すると、 NIC と FCoE の同時トラフィックで同じ 10GbE SFP+ インターフェイスを共有し、 FC ターゲットをサポートすることができます。</block>
  <block id="41a9b66b782d6f3bf7e297fd670a7c20" category="list-text">「 -m 」はパーソナリティ・モード、 FC または 10GbE UTA です。</block>
  <block id="6a09a9f81757d30fb9d957be6637ae37" category="paragraph">新しいハードウェアを設置するための特別なツールが必要です。また、アップグレードプロセス中に他のドキュメントを参照する必要があります。また、コントローラのアップグレードに必要な情報を記録しておく必要があります。情報を記録するためのワークシートが用意されています。</block>
  <block id="c4cd2838020f3d163cb45dd2d33de6b2" category="paragraph">アップグレードを実行するには、次の工具が必要です。</block>
  <block id="7368fc5c8c51bc8dc679464700a9f443" category="paragraph">ノード 1 をノード 3 に交換する前に、 storage aggregate relocation コマンドを使用してルート以外のアグリゲートをノード 1 からノード 2 に移動し、再配置を確認する必要があります。</block>
  <block id="e45573b969f614ffe0b1bc0150964664" category="paragraph">再配置はバックグラウンドで実行されます。アグリゲートの再配置には数秒から数分かかる場合があります。この時間には、クライアントの停止部分と停止部分の両方が含まれます。このコマンドでは、オフラインまたは制限されたアグリゲートが再配置されません。</block>
  <block id="f01701363e083789a1f1072d5e752654" category="paragraph">このコンテンツは、次の状況で使用します。</block>
  <block id="a32dd2ca79d8d8a0056821cb37fed7f4" category="cell">オンボードキーマネージャ</block>
  <block id="476ac05553cb9f39ca703fbfa6eee309" category="paragraph">認証キーを使用できなかったか、 EKM サーバに到達できなかったためにボリュームがオフラインになっていないか確認してください。volume online コマンドを使用して ' これらのボリュームをオンラインに戻します</block>
  <block id="99216628ad8791a98d0d65a1149b6ef1" category="section-title">ARL アップグレードシーケンスの概要</block>
  <block id="823095cde7c39355f11b0bd61e896495" category="paragraph">新しいライセンスキーがない場合は、クラスタで現在ライセンスされている機能を新しいコントローラで使用でき、引き続き使用できます。ただし、ライセンスされていない機能をコントローラで使用するとライセンス契約に違反する可能性があるため、アップグレードの完了後に新しいコントローラの新しいライセンスキーをインストールする必要があります。</block>
  <block id="4244f87afdd4c8b0ebf9ac5e3301a435" category="list-text">「 * Go ！ * 」を選択します</block>
  <block id="de418d0eb742cb1027dedde84846a1a0" category="paragraph">UTA / UTA2 ポートは、ネイティブの FC モードまたは UTA / UTA2 モードに設定できます。FC モードは FC イニシエータと FC ターゲットをサポートします。 UTA / UTA2 モードは、同じ 10GbE SFP+ インターフェイスを共有する NIC と FCoE のトラフィックの同時処理を可能にし、 FC ターゲットをサポートします。</block>
  <block id="76c7e3320831285f65d8e81c92ccd88a" category="paragraph">手順の実行中に、交換用コントローラハードウェアを使用して元のコントローラハードウェアをアップグレードし、ルート以外のアグリゲートの所有権を切り替えます。アグリゲートをノードからノードに複数回移行して、アップグレード手順 全体を通じて、少なくとも 1 つのノードがアグリゲートからデータを提供していることを確認します。また、処理を続行する前に、データ論理インターフェイス（ LIF ）を移行し、新しいコントローラのネットワークポートをインターフェイスグループに割り当てます。</block>
  <block id="c95c6a92ffa35efbbd76f2afcad3663c" category="list-title">重要な情報：</block>
  <block id="90b3509f7da0bd37fd6636cace1d2404" category="paragraph">正しいセットアップを確認するには、 HA ペアを有効にする必要があります。さらに、 node3 と node4 が相互のストレージにアクセスできること、およびクラスタ内の他のノードに属するデータ LIF を所有していないことを確認する必要があります。また、 node3 が node1 のアグリゲートを所有しており、 node4 が node2 のアグリゲートを所有していること、および両方のノードのボリュームがオンラインであることを確認する必要があります。</block>
  <block id="4883a9a9fced202f6b61720c6c0446a2" category="list-text">次のコマンドを入力し、出力を調べて、ライセンスが正しくインストールされていることを確認します。</block>
  <block id="6e8734f19d50032240b4c921c28e1359" category="admonition">ネットアップのマーケティング資料では、 Converged Network Adapter （ CNA ；統合ネットワークアダプタ）アダプタおよびポートを UTA2 と呼ぶ場合があります。ただし、 CLI では CNA という用語が使用されます。</block>
  <block id="d7907cb3489253518aab7ff40ebf0def" category="paragraph">ノード 2 を撤去するには、ノード 2 を正しくシャットダウンし、ラックまたはシャーシから取り外す必要があります。クラスタが SAN 環境にある場合は、 SAN LIF も削除する必要があります。</block>
  <block id="ef5ec2a32c562be2385847f4327ea89b" category="paragraph">UTA / UTA2 ポートは、ネイティブの FC モードまたは UTA / UTA2 モードに設定できます。FC モードでは FC イニシエータと FC ターゲットがサポートされます。 UTA / UTA2 モードを使用すると、同じ 10GbE SFP+ インターフェイスを共有する NIC と FCoE のトラフィックを同時に処理でき、 FC ターゲットをサポートできます。</block>
  <block id="b097fd1d2cefb144b4a3f6950a0c96f6" category="paragraph">次の状況で、アグリゲートを正しく再配置できず、ノード 1 がノード 3 ではなくホームノードになっている可能性があります。</block>
  <block id="5c7c176cb23c0fd455f08f6713c4569c" category="paragraph">ノード 3 をラックに設置し、ノード 1 の接続をノード 3 に転送し、ノード 3 をブートして、 ONTAP をインストールする必要があります。また、ノード 1 のスペアディスク、ルートボリュームに属するディスク、およびルート以外のアグリゲートのうち、ノード 2 に再配置されていないディスクも再割り当てする必要があります。</block>
  <block id="8a3caa8f970994704d4e4c76f1691656" category="admonition">ネットブート接続として管理ポートおよび IP を使用する必要があります。データ LIF IP を使用しないでください。使用していると、アップグレードの実行中にデータが停止する可能性があります。</block>
  <block id="aa2204ca3e9ad3d68d5e741c96bc1b23" category="paragraph">「 path_to_the_web-accessible_directory 」は、の「 ONTAP_version_image.tgz 」をダウンロードした場所を指します <block ref="d7ca8bd1bdacba48998a89c59527e756" category="inline-link-macro-rx"></block> の項で、 netboot_ の準備を参照してください。</block>
  <block id="377b8d4c735171feb47b0d695ca5aa75" category="admonition">コマンドを入力すると、「ディスクはありません」というメッセージが表示される場合があります。これはエラーメッセージではないため、手順を続行できます。</block>
  <block id="84789105d710844372227e7f8b701198" category="list-text">[[man_install3_step32]] 外付けディスクがあるシステムから、内蔵ディスクと外付けディスクをサポートするシステム（ AFF A800 システムなど）にアップグレードする場合は、 node1 アグリゲートを root として設定し、 node3 が node1 のルートアグリゲートからブートすることを確認します。</block>
  <block id="a9b6d9aa37a2b246ff71e7efcd734bcf" category="paragraph">システムは、 HA ペア構成かスタンドアロン構成かにかかわらず、プログラム可能 ROM （ PROM ）に記録されます。状態は、スタンドアロンシステムまたは HA ペア内のすべてのコンポーネントで同じである必要があります。</block>
  <block id="d7abdf7c6312ac172c1ef5a8bd826f97" category="paragraph">内蔵ディスクドライブを搭載したコントローラをアップグレードする場合は、いくつかのコマンドを実行し、その出力を調べて、ルートアグリゲートやデータアグリゲートが含まれている内蔵ディスクドライブがないことを確認する必要があります。</block>
  <block id="845a94c1ed34fe833c91b960798ffff2" category="paragraph">再配置処理はこのフェーズの開始時に一時停止されます。このプロセスは主に自動化されており、ステータスを確認するために処理が一時停止します。この処理は手動で再開する必要があります。また、 SAN LIF がノード 3 に正常に移動したことを確認する必要があります。</block>
  <block id="2c57b3816ff5f5700ca371be22f428e1" category="cell">ボリューム、 FlexClone ボリューム、ファイル、 LUN を使用して論理ストレージリソースを効率的に管理する方法について説明します。 FlexCache 、重複排除、圧縮、 qtree 、およびクォータ</block>
  <block id="97100ba8af68fa3886b472eaf454f74b" category="cell">計画的なメンテナンス時または災害発生時の両方のケースにおける、 MetroCluster のスイッチオーバーとスイッチバック処理の実行方法について説明します。</block>
  <block id="9207f0d2f15feec52f0acba2d7786a53" category="paragraph">ノード 1 の物理ポートがノード 3 の物理ポートに正しくマッピングされていることを確認します。これにより、ノード 3 はクラスタ内の他のノードと通信し、アップグレード後にネットワークと通信できるようになります。</block>
  <block id="33f0e8a0f6ded5a1669e805f22005635" category="paragraph">元のノードまたは新しいノードでストレージ暗号化が有効になっている場合があります。その場合は、この手順 で追加の手順を実行して、ストレージ暗号化が正しく設定されていることを確認する必要があります。</block>
  <block id="604021e164c6285018b6c1a32742b633" category="list-text">[[man_lif_verify_4_Step10] ] 次の手順を実行して、ノード 4 の正しいポートに SAN LIF があることを確認します。</block>
  <block id="7ca66f8c8bf2c1987204f43fd4061a0d" category="admonition">SAN LIF は、元のポートとリンク速度が同じポートに移動する必要があります。</block>
  <block id="1cbc4ae835bdfd185bb57405d5775373" category="list-text">ノード 1 とノード 2 の両方で次の手順を実行して、手順 の後半で物理ポートを正しくマッピングできることを確認します。</block>
  <block id="be557a46041dd265b6e485ddc4d73cca" category="list-text">SP のステータスがオンラインであることを確認します</block>
  <block id="e67c4ced29cdd2e25e3754fa50aa41c0" category="list-text">SP ネットワークが設定されていることを確認する。</block>
  <block id="bfacc8eef0b077fb7822880dd6814cc1" category="list-text">次のコマンドを使用して出力を調べ、ライセンスが正しくインストールされていることを確認します。</block>
  <block id="20d8c464d7ec22352c6b329b84051301" category="paragraph">出力を、セクションでキャプチャした出力と比較できます <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block>。</block>
  <block id="c2f768afcc24a25937246844b60ab9eb" category="paragraph">ノードペアをアップグレードするには、元のノードを準備し、元のノードと新しいノードの両方で一連の手順を実行する必要があります。その後、元のノードの運用を停止できます。</block>
  <block id="3de332599e65c45dacd3ed3d86baaf4b" category="paragraph">ARL を元のコントローラおよび交換用コントローラで実行できるかどうかを確認する必要があります。元のシステムでサポートされるすべての定義済みアグリゲートのサイズとディスク数を確認する必要があります。新しいシステムでサポートされるアグリゲートのサイズとディスク数を比較します。この情報にアクセスするには、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> Hardware Universe にリンクするには、次の手順を実行します。新しいシステムでサポートされるアグリゲートサイズとディスク数は、元のシステムでサポートされるアグリゲートサイズとディスク数以上であることが必要です。</block>
  <block id="731f4fb299fe0fa8bc324a58661cca70" category="paragraph">元のコントローラを交換したときに、新しいノードが既存のノードとクラスタの一部になることができるかどうかは、クラスタ混在ルールで検証する必要があります。クラスタ混在ルールの詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> Hardware Universe にリンクするには、次の手順を実行します。</block>
  <block id="9e8e7bf29c653d52cfbdfb677b4fb6bf" category="list-text">[man_lif_verify_3_step8] SAN LIF が node3 の正しいポートにあることを確認します。</block>
  <block id="78216d3d261872be404d0ef7c21408bf" category="paragraph">UTA / UTA2 ポートは、ネイティブの FC モードまたは UTA / UT2A モードに設定できます。FC モードは FC イニシエータと FC ターゲットをサポートします。 UTA / UTA2 モードを使用すると、 NIC と FCoE の同時トラフィックで同じ 10GbE SFP+ インターフェイスを共有し、 FC ターゲットをサポートすることができます。</block>
  <block id="916e7815c3f105e14fd158f1ffbeb91d" category="paragraph">ただし、ノード 4 の UTA / UTA2 ポートの設定を確認し、必要に応じて変更することができます。</block>
  <block id="85f1db26fc36597793844fca03a7f854" category="paragraph">ノード 4 をラックに設置し、ノード 2 の接続をノード 4 に転送し、ノード 4 をブートする必要があります。ノード 2 のスペア、ルートに属するディスク、および node3 でそれよりも前に再配置されなかったルート以外のアグリゲートも再割り当てする必要があります。</block>
  <block id="a5ac04d57c5af778b5a6063c21c23be1" category="admonition">ネットブート接続として管理ポートおよび IP アドレスを使用する必要があります。アップグレードの実行中にデータ LIF の IP アドレスを使用しないでください。データ LIF が停止する可能性があります。</block>
  <block id="080d5dc3ee89ba9cabba1525988c4bea" category="list-text">外付けディスクが搭載されたシステムから、内蔵ディスクと外付けディスクをサポートするシステム（ A800 システムなど）にアップグレードする場合は、 node4 を root として設定し、 node2 のルートアグリゲートからブートすることを確認します。</block>
  <block id="59af70dd915dcdb0e4027b17846b1638" category="paragraph">発生した問題に対する解決策 が見つからない場合は、テクニカルサポートにお問い合わせください。</block>
  <block id="ca96ef2d79771ffe95064c2ba8f795ee" category="paragraph">ノード 2 をシャットダウンして撤去する前に、クラスタネットワーク、管理、および FC ポートとその NVRAM システム ID に関する情報を記録しておく必要があります。この情報は、 node2 を node4 にマッピングしてディスクを再割り当てするときに、手順で必要となります。</block>
  <block id="0e1dd14206fc60d11a3acb5ef31b4193" category="paragraph">元のノードを交換する前に、ノードが HA ペア構成になっていて、不足しているディスクや障害ディスクがないこと、相互のストレージにアクセスできること、およびクラスタ内の他のノードに割り当てられているデータ LIF を所有していないことを確認する必要があります。また、元のノードに関する情報を収集し、クラスタが SAN 環境にある場合は、クラスタ内のすべてのノードがクォーラムにあることを確認する必要があります。</block>
  <block id="b88f4069a24bcdd70aa256d82f95a4a7" category="list-text">テイクオーバーモード時に両方のノードの負荷に対応できるだけの十分なリソースが元の各ノードにあることを確認します。</block>
  <block id="18f606894983467a22af084725dc9ac7" category="paragraph">node3 と node4 を物理的にチェックして、 NVMEM または NVRAM バッテリが充電されているかどうかを確認する必要があります。node3 と node4 のモデルの LED の詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> Hardware Universe にリンクするには、次の手順を実行します。</block>
  <block id="c70df2aabab33218fc65e3c0dc6f873f" category="paragraph">新しいノードには、元のノードと同じバージョンの ONTAP 9.x がインストールされている必要があります。新しいノードに別のバージョンの ONTAP がインストールされている場合は、設置後に新しいコントローラをネットブートする必要があります。ONTAP のアップグレード方法については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> リンク先： ONTAP のアップグレード _ 。</block>
  <block id="4fd96863c7332ca953dbbdb95b4c0457" category="list-text">ノード 1 とノード 2 が HA ペアになっていることを確認し、ノードが相互に接続されており、テイクオーバーが可能であることを確認します。</block>
  <block id="077bf43ae0702cf4ef1519ff5ec6b8f3" category="list-text">[man_prepare-to-downgrade 9] 現在の所有者（ホーム所有者ではない）であるアグリゲートを node1 と node2 のどちらも所有していないことを確認します。</block>
  <block id="540684201c9c484246cd2060826ea5b6" category="list-text">[man_prepare_nodes_step12]] ノード 1 とノード 2 がお互いのストレージにアクセスできることを確認し、ディスクが見つからないことを確認します。</block>
  <block id="d951eff85d635d18c7d30d8323f2bfa4" category="list-text">ノード 1 とノード 2 が正常に機能しており、クラスタへの参加条件を満たしていることを確認します。</block>
  <block id="37522abc5c58d8935eb7c6c44799dd5d" category="list-text">[man_prepare-to-downgrade 15]] ノード 1 とノード 2 で同じ ONTAP リリースが実行されていることを確認します。</block>
  <block id="c685ef92ee54cacdd0c225fa2bb12fbe" category="cell">ステージ 6 ： _ 新しいコントローラが正しくセットアップされていることを確認します _</block>
  <block id="0ec2ad7eda30b3cde303c205b91073e8" category="paragraph">ノード 1 を撤去するには、ノード 2 で HA ペアを無効にし、ノード 1 を正しくシャットダウンしてラックまたはシャーシから取り外します。</block>
  <block id="ab329064c02455ccdd701ac2ba43fd04" category="admonition">アグリゲートおよび LIF のホーム所有者は変更されません。現在の所有者のみが変更されます。</block>
  <block id="a237d7c8e8a8ae58e2aad1d8f40bc092" category="paragraph">処理が一時停止することで、ノード 1 のルート以外のアグリゲートと SAN 以外のデータ LIF がすべて node2 に移行されているかどうかを確認できます。</block>
  <block id="4aacc9aec1f66da10a6f4c09d02fe381" category="paragraph">ノード 1 をシャットダウンして廃棄する前に、クラスタネットワークポート、管理ポート、および FC ポートとその NVRAM システム ID に関する情報を記録しておく必要があります。この情報は、ノード 1 をノード 3 にマッピングし、ディスクを再割り当てするときに、手順で必要になります。</block>
  <block id="4fabb82b0ea371ba2434024a4145924d" category="paragraph">アップグレード手順 の最後に、 node3 は、元々ホームノードとしてノード 1 を使用していたアグリゲートの新しいホームノードである必要があります。このパスはアップグレード後に再配置できます。</block>
  <block id="4737e9bd68e050a3ff527329392a0902" category="paragraph">再配置されたアグリゲートの所有権は、ホーム所有者が変更されていないためにテイクオーバーされたルート以外のアグリゲートの所有権と同じように見えます。node1 の状態が「 waiting for giveback state 」になると、 node2 はノード 1 のルート以外のすべてのアグリゲートをギブバックします。</block>
  <block id="28332742784b3fba161ff8020b7948ef" category="paragraph">node3 が再度ブートするまでは、残りのアグリゲートが停止している必要があります。</block>
  <block id="f068e1c881bcb261ac497abe62b5aef7" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードするときに 'system controller replace' コマンドを使用して 'node2 の物理ポートが node4 に正しくマッピングされていることを確認します</block>
  <block id="4b23fc3c80c3c248a200cfd0971d83e3" category="paragraph">node2 の物理ポートが node4 の物理ポートに正しくマッピングされていることを確認する必要があります。これにより、 node4 はアップグレード後にクラスタ内の他のノードおよびネットワークと通信できるようになります。</block>
  <block id="ccc4d287ed40737d309a426c85cda5fc" category="paragraph">到達不能または予期しないポートが存在しないことを確認します。次のコマンドを使用してすべての物理ポートの到達可能性ステータスをチェックし、出力を調べてステータスが「 OK 」であることを確認します。</block>
  <block id="a5493bc67e24703f243d4cfc0298650e" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードするために 'system controller replace' コマンドを使用した場合に発生する可能性のある ' アグリゲートの再配置の失敗のトラブルシューティング</block>
  <block id="422d8952c3ec01e2b6b65ff004556457" category="summary">ONTAP 9.8 以降を実行するコントローラをアップグレードするために ARL を使用するかどうかを決定するには 'system controller replace' コマンドを使用します</block>
  <block id="c9ee572a8e71e6ba4e03747ac09a21a8" category="list-text">AFF A400 または FC タイプの構成で FAS8300 を使用する場合は、 4 ポートの 10GbE ネットワークインターフェイスカード（パーツ番号 X1147A ）を追加して一時的なクラスタポートを提供する必要があります。</block>
  <block id="652f24bc7c2d2709481afa47ee0f81bf" category="list-text">一時的なクラスタポートを使用したコントローラのアップグレードが完了したら、クラスタ LIF を無停止で e3a および e3b 、 AFF A400 システムの 100GbE ポート、 FAS8300 システムの e0c および e0d 、 100GbE ポートに移行できます。</block>
  <block id="1e1e54cae5bb87dec61012a56a2eaa5a" category="summary">必要に応じて 'system controller replace' コマンドを使用して ONTAP 9.8 以降を実行するコントローラをアップグレードするときに ' ストレージ暗号化を構成し 'SSL 証明書をインストールし ' キー管理サーバを設定します</block>
  <block id="7fb09ce149939f5078b07b7d45f68e40" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードするときに 'system controller replace' コマンドを使用して ' 再起動 ' パニック ' 電源再投入などのさまざまな段階でシステムがクラッシュすることがあります</block>
  <block id="1d6e912902b1e30f8b9da52e03335a4b" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードするときは、 system controller replace' コマンドを使用してノードを準備し、一連の事前チェックを実行します。</block>
  <block id="4624c4b44b48ffb05b83bfbd93925a33" category="list-text">コントローラの交換処理が開始されて事前確認が完了すると、処理が一時停止するため、ノード 3 の設定時にあとで必要になる可能性がある出力情報を収集できます。</block>
  <block id="5d642f56c168a61a7302b4ee2b4f1776" category="summary">「 system controller replace 」コマンドを使用して、 ONTAP 9.8 以降を実行するコントローラをアップグレードする手順 の動作を理解します。</block>
  <block id="c58e06e13ea00648461f7e5d6400a1e2" category="summary">部分的に自動化された ARL 手順 を使用して、 ONTAP 9.8 以降を実行するコントローラをアップグレードします。</block>
  <block id="6842ea6d980ed82db538f2da553da6d9" category="paragraph">手動での作業は時間がかかり複雑でしたが、この簡易化された手順 では、アグリゲートの再配置を使用してコントローラの更新を実装できるため、 HA ペアの無停止アップグレードをより効率的に実行できます。特に、検証、情報収集、および事後チェックに関連する手動手順は大幅に少なくなります。</block>
  <block id="0bc12c090040b2c995d1f511a738331b" category="summary">ONTAP 9.8 以降を実行しているコントローラ・ハードウェアをアップグレードするには 'system controller replace コマンドを使用して ' ルート以外のアグリゲートの所有権を切り替えます</block>
  <block id="3b2a75ebc087c7f3c4fa9ac0e2a92ebe" category="cell">ONTAP バージョン</block>
  <block id="0fe595dcf68c11944d6702639057e6d6" category="paragraph">node1 の物理ポートが、 node3 の物理ポートに正しくマッピングされていることを確認する必要があります。これにより、 node3 は、アップグレード後にクラスタ内の他のノードおよびネットワークと通信できるようになります。</block>
  <block id="078c10fbc24c84a3e4f0b77caa19df99" category="paragraph">node3 がクォーラムにあり、 node2 と通信できることを確認したら、 node1 の VLAN 、インターフェイスグループ、およびブロードキャストドメインが node3 にあることを確認します。また、 node3 のすべてのネットワークポートが正しいブロードキャストドメインに設定されていることを確認します。</block>
  <block id="3826f7a548ec9fd12d4b782702777113" category="paragraph">ノードのすべての物理ネットワークポート、 VLAN ポート、およびインターフェイスグループポートが表示されます。この出力から、 ONTAP によって「 Cluster 」ブロードキャストドメインに移動された物理ポートを確認できます。この出力を使用して、 LIF をホストするためにインターフェイスグループメンバーポート、 VLAN ベースポート、またはスタンドアロンの物理ポートとして使用するポートを決定できます。</block>
  <block id="d35fa840e002cbb887332e9d1f1e5a3b" category="paragraph">上記の例では、 node1 _node3 はコントローラの交換後にブートしたばかりです。一部のポートは想定されるブロードキャストドメインに到達できないため、修復が必要です。</block>
  <block id="ddb5eb2be2cb4d619fb6d97af7f0979a" category="summary">ONTAP 9.8 以降を実行しているコントローラを 'system controller replace' コマンドを使用してアップグレードすると ' 古いシステムが動作しなくなったことをネットアップに知らせてください</block>
  <block id="37b10337aa44c11a05aa4efa324640ba" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードするときは 'system controller replace' コマンドを使用して SnapMirror 転送と SnapMirror 関係を再開します</block>
  <block id="beda7e39626b719165412c5becb115d5" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードする場合は、「 system controller replace 」コマンドを使用して、 node3 をインストールし、 ONTAP ソフトウェアをインストールします。</block>
  <block id="131a7dee0b529b4cbcbd4da77cad2ec0" category="admonition">ネットブート接続として管理ポートおよび IP を使用する必要があります。アップグレードの実行中にデータ LIF IP を使用しないでください。データ LIF が停止する可能性があります。</block>
  <block id="b710e003cdfabdeb2229447675cd3808" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードするときに 'system controller replace' コマンドを使用して MetroCluster 構成のスイッチオーバー ' 修復 ' およびスイッチバック操作を確認します</block>
  <block id="312ce282bc7d7bc7d34249cfcaff7db6" category="summary">必要に応じて 'system controller replace' コマンドを使用して ONTAP 9.8 以降を実行しているコントローラをアップグレードするときに 'node4 にあるキー管理ツールの構成を復元します</block>
  <block id="330937217378a90989c78312814a4d5c" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードするときに、ステージ 2 、ステージ 3 、またはステージ 5 で「 system controller replace 」コマンドを使用して移行後に LIF がオンラインにならない。</block>
  <block id="fd24c846065712469415a8e763eddf49" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードするときに 'system controller replace' コマンドを使用して 'node2 のルート以外のアグリゲートを node3 に移動します</block>
  <block id="5e668aadf3c84d39f49c47f9c74523b2" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードするときに発生する可能性のある問題については 'system controller replace' コマンドを使用して説明します</block>
  <block id="53cd5409b5ec64b4f5341cb93a822fab" category="summary">必要に応じて 'system controller replace' コマンドを使用して ONTAP 9.8 以降を実行しているコントローラをアップグレードするときに ' キー管理ツールの構成をノード 3 にリストアします</block>
  <block id="f810af73d1a28d1f55ad862f678355f9" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードする場合は 'system controller replace' コマンドを使用して ' ストレージ暗号化の構成と管理 ' 認証キーの管理 ' および SnapMirror 関係の休止を行います</block>
  <block id="334aac8182abb9ed5a53014b66433691" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードする場合は 'system controller replace' コマンドを使用して 'node4 をインストールして ONTAP ソフトウェアをインストールします</block>
  <block id="dc97d8a31027159f1cd8fddd5b4c5dab" category="paragraph">再配置処理はこのフェーズの開始時に一時停止されます。このプロセスはほとんどが自動化されており、処理は一時停止してステータスを確認できます。この処理は手動で再開する必要があります。</block>
  <block id="e13e6c141a78d2d49110f9de675a4ce7" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードする場合は 'system controller replace' コマンドを使用して 'node2 をシャットダウンし ' ラックまたはシャーシから取り外します</block>
  <block id="1565fea61c4b7c7821ea0d9a5ab00d22" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードするときに 'system controller replace' コマンドを使用して ' 一般的な構成エラーがないかどうかを確認するには ' Config Advisor ツールを使用します</block>
  <block id="23826189d4179acfb46645b446f69080" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードするには 'system controller replace' コマンドを使用して ' 特定のツールとマニュアルを用意する必要があります</block>
  <block id="f8ed537bd19062002074276a187e6a78" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードするときに 'system controller replace' コマンドを使用して 'node3 にある node2 の NAS データ LIF が node3 から node4 に再配置されていることを確認します</block>
  <block id="bc8355e3ba73925a2f4cf661fa66be6a" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードするときに 'system controller replace' コマンドを使用して 'node4 のオンボード FC ポート 'UTA/UTA2 ポート ' または UTA/UTA2 カードを設定します</block>
  <block id="48ec3f88b1540532a71a1bff492cf63b" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードするときに 'system controller replace' コマンドを使用して 'node2 で HA ペアを無効にし 'node1 をシャットダウンします</block>
  <block id="08ff55c299fd8105ff1d7a024f588b9a" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードするときに 'system controller replace' コマンドを使用して ' オンボード FC ポート 'UTA/UTA2 ポート ' または UTA/UTA2 カードをノード 3 に設定します</block>
  <block id="19742459913bf455e1f34dbda6e44b09" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードできるかどうかを確認するには 'system controller replace' コマンドを使用します</block>
  <block id="4c77267472cd5a012c12d7a0806f4b65" category="paragraph">元のシステムでサポートされるすべての定義済みアグリゲートのサイズとディスク数を確認する必要があります。次に、サポートされるアグリゲートサイズとディスク数を、新しいシステムでサポートされるアグリゲートサイズとディスク数と比較する必要があります。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> この情報がある Hardware Universe にリンクするには、次の手順を実行します。新しいシステムでサポートされるアグリゲートサイズとディスク数は、元のシステムでサポートされるアグリゲートサイズとディスク数以上であることが必要です。</block>
  <block id="e5e0987f6acee5e5d5ae72ab8928e424" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードした後で 'system controller replace' コマンドを使用して HA ペアを有効にし ' ノード 3 とノード 4 のストレージアクセスを確認し ' アグリゲートの所有権を確認します</block>
  <block id="679aeab1d22d4d8240be92e911cb16a4" category="doc">新しいコントローラが正しくセットアップされていることを確認します</block>
  <block id="5c004e4cd778be46f64bcf74109c107c" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードするときに 'system controller replace' コマンドを使用して MetroCluster 構成の正常性を確認し ' 正常に動作することを確認します</block>
  <block id="7495838c3a0836d1a2caef4024f4af0e" category="paragraph">Fabric MetroCluster 構成でアップグレードを開始する前に、 MetroCluster 構成の健全性をチェックして、正常に動作することを確認する必要があります。</block>
  <block id="4316c777785e82f7a78c696e8c493776" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードするときに 'system controller replace' コマンドを使用して ' ルート以外のアグリゲートと NAS データ LIF をノード 1 からノード 2 に移動し ' ノード 1 のリソースをノード 3 に移動します</block>
  <block id="f48d321f9a6be0abe9b9d0094dc62a63" category="summary">ONTAP 9.8 以降を実行しているコントローラをアップグレードするときに 'system controller replace' コマンドを使用して 'node3 と node4 をネットブートする準備をします</block>
  <block id="8749fd273c1ff3de22cc73e8f3a4e1fd" category="summary">ONTAP 9.8 以降を実行しているコントローラのアップグレードをサポートするために必要なリファレンスコンテンツおよび Web サイトは、「 system controller replace 」コマンドを使用して参照できます。</block>
  <block id="e8281ab8cf28639b54483c189cac4d56" category="summary">ONTAP 9.8 以降を実行しているコントローラで、 ARL を手動でアップグレードする際に、ノード 4 のインストールとノード 3 との通信を確認します。</block>
  <block id="16285c696d110c3e6ece1092e2680d1b" category="paragraph">node4 のインストールとブートの完了後、正しくインストールされていること、クラスタの一部であること、および node3 と通信できることを確認する必要があります。</block>
  <block id="de6503b8a7fac41c2c9719a0c8144a9a" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードする場合は、 SnapMirror 転送と SnapMirror 関係を再開します。</block>
  <block id="db3f9fca63856b4feb30f923ab1bd250" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードしたときに発生する可能性があるアグリゲートの再配置エラーのトラブルシューティングを行います。</block>
  <block id="92f11749596b34888281bb0c579c2d25" category="summary">ONTAP 9.8 以降を実行しているコントローラで、 ARL を手動でアップグレードする際に、ノード 4 のオンボード FC ポート、 UTA / UTA2 ポート、または UTA / UTA2 カードを設定します。</block>
  <block id="00b7688be7e2c70e950c77f4946b4705" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードする場合は、ノード 1 のクラスタネットワーク、管理、 FC ポート、および NVRAM システム ID に関する情報を記録します。</block>
  <block id="15d41a5d0f00f256b9567a9663dd77a0" category="paragraph">node2 から node3 にアグリゲートを再配置する前に、 node2 に現在ある node1 に属する NAS データ LIF を node2 から node3 に移動する必要があります。ノード 3 の SAN LIF も確認する必要があります。</block>
  <block id="a54f5c2e2731f201663a2d288e5fec98" category="summary">ONTAP 9.8 以降を実行しているコントローラで、 ARL を手動でアップグレードする際に、 node1 の物理ポートが node3 に正しくマッピングされていることを確認します。</block>
  <block id="9dc287c462a550f7a777c45376221074" category="summary">ONTAP 9.8 以降を実行しているコントローラで、 ARL を手動でアップグレードする場合は、ノード 3 にあるノード 2 の NAS データ LIF をノード 4 に移動します。</block>
  <block id="9a345e333b9f909502e3b795f0eaa861" category="paragraph">ポートを node2 から node4 にマッピングしたあと、 node2 のアグリゲートを node3 から node4 に再配置する前に、 node3 の現在の node2 に所有されている NAS データ LIF を node3 から node4 に移動する必要があります。ノード 4 の SAN LIF も確認する必要があります。</block>
  <block id="867625d8a162da584d5c7633adccb4ae" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードする際に発生する可能性のある問題に関する情報。</block>
  <block id="ad475825ae83ecbd372fe679f99f127d" category="summary">ノードを準備して情報を収集し、 ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードする際に、すべてのクラスタノードがクォーラムにあることを確認する。</block>
  <block id="afe5b70a93730d0b136c0f9de3376f9e" category="summary">ONTAP 9.8 以降を実行しているコントローラでの手動 ARL アップグレード時に、 node2 のクラスタネットワーク、管理、 FC ポート、および NVRAM システム ID に関する情報を記録します。</block>
  <block id="ad7dc11f39fb32e1f4ba6e7e9644fdd2" category="summary">手動の ARL アップグレード手順 を使用して、 ONTAP 9.8 以降を実行するコントローラハードウェアをアップグレードし、ルート以外のアグリゲートの所有権を切り替えます。</block>
  <block id="1124fb2cf4d1e4ab29aa545667f1d946" category="list-text">FAS システムから FAS システムへの移動</block>
  <block id="0c3fa4233df158763903bac5cebd18a9" category="list-text">AFF システムから AFF システムへの移動</block>
  <block id="a08819cb67238a1ec917f745d4de58c8" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードするには、特定のツールとドキュメントが必要です。</block>
  <block id="555d9e461a574dac83e9908b06022e17" category="summary">ONTAP 9.8 以降を実行しているコントローラでの手動 ARL アップグレード時に、オンボードの FC ポート、 UTA / UTA2 ポート、または UTA / UTA2 カードをノード 3 に設定します。</block>
  <block id="0623848243436b0f8821316dbca47636" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードしたあと、古いシステムが動作しなくなったことをネットアップに知らせてください。</block>
  <block id="54792986c9e5a9530740e9a8afba852a" category="summary">ONTAP 9.8 以降を実行しているコントローラで、 ARL を手動でアップグレードする場合は、ノード 2 の NAS データ LIF をノード 3 に移動します。</block>
  <block id="068f6c7dacb395036577acd9693c65a6" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードしたあとに、 MetroCluster 構成の無効なポートにある LIF を再同期します。</block>
  <block id="c6834152ce1c2fbdaa43b11fcc10df66" category="summary">ONTAP 9.8 以降を実行しているコントローラで、 ARL を手動でアップグレードする際に、内蔵ディスクドライブにルートアグリゲートまたはデータアグリゲートが含まれていないことを確認します。</block>
  <block id="f17d4647b6777b8ed14edf7798d3bfd3" category="summary">システムをネットブートする前に、 ONTAP 9.8 以降を実行するコントローラ上で ARL を手動でアップグレードする際に、すべての SnapMirror 関係を休止します。</block>
  <block id="118f7a6ae9a5d6b5cd8f73c4762b1730" category="summary">ONTAP 9.8 以降を実行しているコントローラで、 ARL を手動でアップグレードする際に、 node3 をインストールして ONTAP ソフトウェアをインストールします。</block>
  <block id="b85552635e2dd14cc0f1841daf296ac6" category="summary">ONTAP 9.8 以降を実行しているコントローラで、ステージ 2 、ステージ 3 、またはステージ 5 の ARL を手動でアップグレードしても LIF がオンラインにならない。</block>
  <block id="ec4374c74901037b92a2e0de7e3fe4a2" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードする場合は、 node2 の物理ポートが node4 に正しくマッピングされていることを確認します。</block>
  <block id="d30a32a5505fed77045c8a821e24f7ac" category="paragraph">node2 の物理ポートが node4 の物理ポートに正しくマッピングされていることを確認する必要があります。そうすれば、 node4 はクラスタ内の他のノードおよびアップグレード後のネットワークと通信できるようになります。</block>
  <block id="a6622ede89e2aa557c17c891098162c7" category="summary">必要に応じて、 ONTAP 9.8 以降を実行しているコントローラで、ストレージ暗号化を設定し、 SSL 証明書をインストールし、 ARL を手動でアップグレードする際にキー管理サーバをセットアップします。</block>
  <block id="51e89318188a5b34821d1b5e345bf2ac" category="summary">ONTAP 9.8 以降を実行しているコントローラペアの ARL の手動アップグレード手順 の仕組みを理解する。</block>
  <block id="d8c00530740b99a040c7fce14b2d9416" category="paragraph">ARL を使用してノードをアップグレードする前に、手順 の動作について理解しておく必要があります。このドキュメントでは、手順をいくつかの段階に分けて説明します。</block>
  <block id="9e03cd15ada28569caebd6918552def0" category="summary">ONTAP 9.8 以降を実行しているコントローラで、 ARL を手動でアップグレードする場合は、 node4 をインストールしてブートし、 ONTAP ソフトウェアをインストールします。</block>
  <block id="391e08617f92cd9108184ce8327560e2" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードする場合は、ノード 2 を正しくシャットダウンし、ラックまたはシャーシから取り外します。</block>
  <block id="000ffb8f7270dfe4b3ee36da16c47b89" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードする際には、特定の情報を収集します。</block>
  <block id="e0fe97fee5d48e893c74670b61264c13" category="summary">HA ペアを有効にし、 node3 と node4 にあるストレージアクセスを確認し、 ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードしたあとにアグリゲートの所有権を確認します。</block>
  <block id="4c00b803b6709d23e498ac9ee5baa935" category="summary">node2 に AutoSupport メッセージを送信し、 ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードする際に、 node2 の非ルートアグリゲートをノード 3 に手動で再配置します。</block>
  <block id="11ef6190ca83fe053ab04e945a3de360" category="paragraph">ノード 1 をノード 3 に交換する前に、 2 ノードクラスタの場合はノード 1 で所有されている NAS データ LIF をノード 2 に、クラスタに 3 つ以上のノードがある場合はノード 3 に移動する必要があります。使用する方法は、クラスタが NAS 用に設定されているか SAN 用に設定されているかによって異なります。</block>
  <block id="42ee6b32597aab87a0d5dd8e08490bfd" category="summary">ONTAP 9.8 以降を実行しているコントローラでは、ノード 2 と HA ペアを無効にし、 ARL を手動でアップグレードする際に、ノード 1 を正しくシャットダウンします。</block>
  <block id="fd35edd14227b026dc566a7178c387d7" category="summary">ルート以外のアグリゲートをノード 1 からノード 2 に移動し、 ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードする際に再配置を確認します。</block>
  <block id="81d842dc6512a201e5ccc1816f833428" category="summary">ONTAP 9.8 以降を実行しているコントローラペアで ARL の手動アップグレード手順 を使用できるかどうかを確認します。</block>
  <block id="1e56bf3dedc43784dd2378dd828d3106" category="list-text">一部の ARL コントローラアップグレードでは、交換用コントローラの一時的なクラスタポートをアップグレードに使用できます。たとえば、 AFF A300 から AFF A400 システムにアップグレードする場合、 AFF A400 構成に応じて、 2 つのメザニンポートのいずれかを使用するか、 4 ポート 10GbE ネットワークインターフェイスカードを追加して一時的なクラスタポートを提供できます。一時的なクラスタポートを使用してコントローラのアップグレードを完了したら、交換用コントローラの 100GbE ポートにクラスタを無停止で移行できます。</block>
  <block id="20f9ffc49541e7095d1cdcdcdbacdc68" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードすると、システムがクラッシュする、リブート、パニック状態、または電源の再投入が発生する場合があります。</block>
  <block id="cf82606c547b81a04874bee6575b4863" category="summary">ONTAP 9.8 以降を実行しているコントローラで、 ARL を手動でアップグレードする際に、 node2 のルート以外のアグリゲートを node3 から node4 に再配置します。</block>
  <block id="c0ff48676f87627f73474db6b1018a88" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードする際に、 node3 と node4 をネットブートする準備をします。</block>
  <block id="14173ffe47c7c7e4971c06932a3084e2" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードする場合は、 KMIP サーバを使用して認証キーを管理します。</block>
  <block id="78bd6f667bd547c51374b0e978e9d001" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードする場合に必要な参照コンテンツと Web サイト。</block>
  <block id="af18adb321560258c2b9a80d2757792a" category="paragraph">アップグレードの各段階で、システムがクラッシュする（リブート、パニック状態、または電源の再投入）場合があります。</block>
  <block id="c7fc4caaca02af86d84b04f258dfd7e6" category="paragraph">node2 はテイクオーバーしませんが、ルート以外のすべてのアグリゲートから引き続きデータを提供しています。</block>
  <block id="7e3345ca183a02251269d1034b280331" category="list-text">node1 の LOADER プロンプトで、 node1 の「 partner-sysid 」を確認します。</block>
  <block id="8a4f2711fdfcfeea79b7fe0124a6d453" category="list-text">「 y 」を選択します。次の出力が表示されます。</block>
  <block id="eeb3813f1d9a188e4d0a912235894f96" category="cell">クラスタ内のすべてのノードが正常であることを確認します。</block>
  <block id="f1e3d153ef84dd8b3cbde456e0a2bf74" category="cell">交換する両方のノードがハイアベイラビリティ（ HA ）ペア構成になっているかどうかを確認します。コントローラでストレージフェイルオーバーが有効になっていない場合、タスクは失敗します。</block>
  <block id="bb4d829c636efdbd9439e118a1e840cb" category="cell">AutoSupport 通知が設定されていないと、タスクは失敗します。コントローラの交換用手順 を開始する前に、 AutoSupport を有効にする必要があります。</block>
  <block id="48536e8deacb601a8be0bcd336b79e32" category="list-text">コントローラの交換処理が開始されて事前確認が完了すると、処理が一時停止し、コントローラのアップグレードプロセスの後半で必要になる可能性がある出力情報を収集できます。</block>
  <block id="1ed68b1a1c4717bcf9913f481374e7de" category="admonition">この手順 では、 VLAN 、 ifgrp 、およびブロードキャストドメインのセクションの再作成が、 node2 で _ ネットワーク設定の名前が _Restore に変更されています。</block>
  <block id="550d4b66b2a123c0592e264de6261a21" category="paragraph">上記の例では、コントローラの交換後に node2 がブートし、クォーラムに参加しています。到達可能性のない複数のポートがあり、到達可能性スキャンを保留しています。</block>
  <block id="b09281cc619dc5d9e8148aef71038fcd" category="paragraph">上記の例に示すように、ポートの到達可能性ステータスが、現在配置されているブロードキャストドメインの到達可能性ステータスと異なる場合があることを示す警告メッセージが表示されます。ポートと回答 'y' または 'n' の接続を適宜確認します</block>
  <block id="5267f49248b15741904ddac0a8c8a79a" category="list-text">次の手順に従って、リストアが必要な SVM および LIF のホームポートがある場合は、それらを指定して LIF のホームポートをリストアします。</block>
  <block id="939b677a0e4df037cd999a739cd94317" category="paragraph">上記の例のシステム ID は一例です。アップグレードするノードの実際のシステム ID は異なります。</block>
  <block id="5952acedcc143d30a19364d245887b58" category="paragraph">プロンプトでノード名を入力するかログインプロンプトを表示するまで、ノードが数回リブートして環境変数をリストアし、システムのカードでファームウェアを更新し、他の ONTAP 更新を実行します。</block>
  <block id="a7b5ccf02bd0f6b23fc889ebb5354dbc" category="paragraph">接地対策がまだの場合は、自身で適切に実施します。</block>
  <block id="3d6ee5006b58007aa6b243ac902837ac" category="list-text">NVRAM モジュールをスロット 6 のシャーシ開口部の端に合わせます。</block>
  <block id="a8ad32b9b5381f0e3f1c5897679ae7eb" category="list-text">NVRAM モジュールをスロットにそっと挿入し、文字と数字が記載された I/O カムラッチを上に押して NVRAM モジュールを所定の位置にロックします。</block>
  <block id="e16c4744183a5e672dc0a8f50d7250d6" category="admonition">シャーシはすでに電源がオンになっているため、完全に装着されるとすぐに node2 がブートを開始します。node2 のブートを避けるため、コントローラモジュールをスロットに完全に挿入する前に、コンソールケーブルと管理ケーブルを node2 のコントローラモジュールに接続することを推奨します。</block>
  <block id="2ed045fa4ee3544c7e5a632a26d55b9f" category="paragraph">ONTAP 9.10.1 以降では、 Key Management Interoperability Protocol （ KMIP ）サーバを使用して認証キーを管理できます。</block>
  <block id="e373d02f1761d14eafc408b260c8b7da" category="admonition">この手順 では、 VLAN 、 ifgrp 、およびブロードキャストドメインのセクション _ が、 node1 で _ ネットワーク設定のリストア _ という名前に変更されています。</block>
  <block id="d72e37445f435123c47c01a1bd03271c" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> このアップグレードに必要な参照ドキュメントおよび参照サイトのリストにアクセスするには、次の手順を実行します。</block>
  <block id="0857dbdec564e89c1ed34a571bb8af41" category="list-text">NVRAM モジュールのロックを解除して、 node1 のスロット 6 から取り外します。</block>
  <block id="646ac9208401ea9c6c2afc14b196cad5" category="paragraph">NVRAM モジュールがシャーシから外れ、数インチ移動します。</block>
  <block id="ca401bca71da68589a6c9f6ae6d2abdf" category="list-text">NVRAM モジュール前面の両側にあるプルタブを引いてモジュールをシャーシから取り外します。</block>
  <block id="1ade29bb16a89d6eb1ac0378b26d08cc" category="image-alt">NVRAM モジュールを取り外します</block>
  <block id="5d555500d4c58002388a7088e1c8f510" category="image-alt">NVRAM モジュールを取り付けます</block>
  <block id="a93447d104277da61e99f98be3016581" category="list-text">コントローラモジュールの端をシャーシの開口部に合わせ、コントローラモジュールをシステムに半分までそっと押し込みます。</block>
  <block id="a7b2214a170507e43e239d129ff056bd" category="image-alt">コントローラモジュールを取り付けます</block>
  <block id="6e7e19ae8357eafafb5df9d5e403d692" category="paragraph">でキャプチャした出力と比較できます <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block> セクション。</block>
  <block id="395efc410823d3328f70ddb736016f0b" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用してアップグレードするときに 'node4 が定足数に参加し 'node1 の VLAN ' インタフェースグループ ' ブロードキャストドメインを再作成し ' キー管理ツールの構成を復元することを確認します</block>
  <block id="3a042ad216541ed5571bc523ce7be6e9" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードすると発生する可能性がある ' アグリゲートの再配置の失敗をトラブルシューティングします</block>
  <block id="42e450405147e2d982e3ee23f816c41d" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードするために 'ARL を使用するかどうかを決定します</block>
  <block id="9b12fafa5a8b1307615caadc9be2c552" category="summary">ONTAP 9.5 を実行しているコントローラを 9.7 にアップグレードするときに 'system controller replace' コマンドを使用して 'node1 の物理ポートが node3 に正しくマッピングされていることを確認します</block>
  <block id="aef0be345c19587a34b9e9c1f46f47df" category="paragraph">node1 の物理ポートが node3 の物理ポートに正しくマッピングされていることを確認する必要があります。これにより、 node3 はクラスタ内の他のノードおよびアップグレード後にネットワークと通信できるようになります。</block>
  <block id="338ae3df649b35bcf4689799c5b1dcbd" category="list-text">[[auto_map_3_step5] クラスタ LIF とノード管理 / クラスタ管理 LIF をホストするブロードキャストドメインを調整します。各ブロードキャストドメインに正しいポートが含まれていることを確認します。ポートをホストしているブロードキャストドメイン間や LIF のホームになっているブロードキャストドメイン間で移動することはできないため、 LIF を移行して変更する必要がある場合があります。</block>
  <block id="1720b41605d0d1a79ed1cb1a0959412f" category="summary">必要に応じて 'system controller replace' コマンドを使用して ONTAP 9.5 を実行するコントローラを 9.7 にアップグレードするときに ' ストレージ暗号化を構成し 'SSL 証明書をインストールし ' キー管理サーバをセットアップします</block>
  <block id="8a1eac7b4b9f373d43688bdcb5d8a9f4" category="summary">ステージ 5 では、 ONTAP 9.5 を実行しているコントローラを 9.7 にアップグレードする際に、 system controller replace' コマンドを使用して、新しいノードがクォーラムに参加することを確認します。</block>
  <block id="215f34c9b7ea66107f2934a873870db6" category="paragraph">新しいコントローラが搭載されたノードがブートし、最初にクラスタへの追加を試みます。ただし、新しいノードのネットワークポートセットが異なる場合は、次の手順を実行して、ノードがクォーラムに正常に追加されたことを確認する必要があります。</block>
  <block id="669ad894cec0c80472a9d916837015cd" category="list-text">クラスタ LIF とノード管理 / クラスタ管理 LIF をホストしているブロードキャストドメインを調整します。各ブロードキャストドメインに正しいポートが含まれていることを確認します。ポートをホストしているブロードキャストドメイン間や LIF のホームになっているブロードキャストドメイン間で移動することはできないため、 LIF を移行して変更する必要がある場合があります。</block>
  <block id="bbd7c8e76a5f5fdedf0347fb039be29b" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードすると ' システムがクラッシュする（再起動 ' パニック ' または電源再投入）場合があります</block>
  <block id="3f6f16a78016b56c0e77c36d698dc890" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードする場合 ' ノード 2 の VLAN ' インターフェイスグループ ' およびブロードキャストドメインをノード 4 に再作成します</block>
  <block id="94ea383bd9faf0b55ef913f5a592de45" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードする場合 ' Config Advisor ツールを使用して一般的な構成エラーをチェックします</block>
  <block id="bf0c95f7e92a0bc6e46bfc9664dcb9ee" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードする場合は ' ノードを準備し ' 一連の事前チェックを実行します</block>
  <block id="e72db50041db5f66f874d026ca76e267" category="summary">ステージ 3 では、 ONTAP 9.5 を実行しているコントローラを 9.7 にアップグレードする際に、 system controller replace' コマンドを使用して、新しいノードがクォーラムに参加することを確認します。</block>
  <block id="0b77e44524dea6328841f8f4038b5490" category="summary">「 system controller replace 」コマンドを使用して、 ONTAP 9.5 を実行するコントローラを 9.7 にアップグレードする手順 の動作を理解します。</block>
  <block id="ffd40624ae18e36b15ccf2019794cb82" category="summary">部分的に自動化された ARL 手順 を使用して、 ONTAP 9.5 を実行するコントローラを 9.7 にアップグレードします。</block>
  <block id="40c0ce675eccb4fa798e15a265bca17b" category="paragraph">手動での作業は複雑で時間がかかりましたが、この簡易化された手順 では、アグリゲートの再配置を使用してコントローラの更新を実装できます。これにより、 HA ペアの無停止アップグレードをより効率的に実行できます。特に、検証、情報収集、および事後チェックに関連する手動手順は大幅に少なくなります。</block>
  <block id="3926b0a999f25273c8f07ee812e70656" category="summary">ONTAP 9.5 を実行しているコントローラハードウェアは、 system controller replace コマンドを使用してルート以外のアグリゲートの所有権を切り替え、 9.7 にアップグレードできます。</block>
  <block id="a6f1d58c4c38c1ac76cd5929e302f723" category="summary">system controller replace' コマンドを使用して ONTAP 9.5 を実行しているコントローラを 9.7 にアップグレードする場合 ' ノード 3 がクォーラムに参加していることを確認し ' ノード 1 の VLAN ' インタフェースグループ ' ブロードキャストドメインを再作成し ' キー管理ツールの設定をリストアします</block>
  <block id="1351d313beb812092d972c23cec0b57c" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードした後 ' 古いシステムが動作しなくなったことをネットアップに知らせてください</block>
  <block id="7588408bbfed0416d38b98777ec4d4bc" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードする場合は 'SnapMirror 転送と SnapMirror 関係を再開します</block>
  <block id="ada0af4bbf1b59e059dc781cf36c82cc" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードする場合は 'node3 をインストールして ONTAP ソフトウェアをインストールします</block>
  <block id="c37bf7d69be3ef164548ad69632832f9" category="summary">ONTAP 9.5 を実行しているコントローラを 9.7 にアップグレードするときに 'system controller replace' コマンドを使用して MetroCluster 構成のスイッチオーバー ' 修復 ' スイッチバック操作を確認します</block>
  <block id="978d52de83719de8bea4a1105fd0daa2" category="summary">ONTAP 9.5 を実行しているコントローラを「 system controller replace 」コマンドを使用して 9.7 にアップグレードすると、ステージ 2 、ステージ 3 、またはステージ 5 で移行後に LIF がオンラインにならなくなります。</block>
  <block id="00c13e2880f6565acea9eb7b236ffe2a" category="summary">ONTAP 9.5 を実行しているコントローラを 9.7 にアップグレードするときに 'system controller replace' コマンドを使用して 'node2 の物理ポートが node4 に正しくマッピングされていることを確認します</block>
  <block id="964ab85547edd708f3257e13df3d6e86" category="paragraph">node2 の物理ポートが node4 の物理ポートに正しくマッピングされていることを確認する必要があります。これにより、 node4 はクラスタ内の他のノードと通信し、アップグレード後にネットワークと通信できるようになります。</block>
  <block id="46368d1701ab9df4e7d43f073608faac" category="list-text">[[auto_map_4_Step5] クラスタ LIF およびノード管理 / クラスタ管理 LIF をホストしているブロードキャストドメインを調整します。各ブロードキャストドメインに正しいポートが含まれていることを確認します。ホストしているブロードキャストドメイン間または LIF がホームにあるブロードキャストドメイン間でポートを移動することはできないため、次の手順に示すように、 LIF を移行して変更しなければならない場合があります。</block>
  <block id="8c50cd8a05046fd9b1080cf4c1c27c2f" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードする場合は ' ノード 2 のルート以外のアグリゲートをノード 3 に移動します</block>
  <block id="f39c9cd1dd9ad5474e1bf04afc11ae3b" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードするときに発生する可能性がある問題に関する情報</block>
  <block id="a1a36272d536128d8f8b47f1e4a0a0c7" category="summary">ONTAP 9.5 を実行しているコントローラを 9.7 にアップグレードする場合は 'system controller replace' コマンドを使用して ' ストレージ暗号化の構成と管理 ' 認証キーの管理 ' および SnapMirror 関係の休止を行います</block>
  <block id="14e89b35ebfcce3b97d4642f23842015" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードする場合は 'node4 をインストールし ' ONTAP ソフトウェアをインストールします</block>
  <block id="42b71ea88832319c6f3f7818996dd5aa" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードする場合は 'node2 をシャットダウンしてラックまたはシャーシから取り外します</block>
  <block id="9415404d53d7363f16891e644c2747f0" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードするときに ' 失敗したアグリゲートまたは拒否されたアグリゲートを手動で再配置します</block>
  <block id="1c49656a31f8508554999a7e7b253c6e" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードするには ' 特定のツールとマニュアルが必要です</block>
  <block id="ceb540e1a706eaef05047a7ec692cfe0" category="paragraph">ノード 4 のインストールの確認が完了し、ノード 3 からノード 4 にアグリゲートを再配置する前に、現在ノード 3 にある node2 に属する NAS データ LIF をノード 3 からノード 4 に移動する必要があります。また、ノード 4 に SAN LIF が存在することを確認する必要があります。</block>
  <block id="80e8c2a2fa9780cacd2817fdd9d5f491" category="list-text">次の手順を実行して、ノード 4 の正しいポートに SAN LIF があることを確認します。</block>
  <block id="6e221a4092f4a8a2601852d703a03630" category="admonition">リンク速度が元のポートと同じポートに SAN LIF を移動していることを確認する必要があります。</block>
  <block id="31185fb85292c7e722f79c9b5cb9cdde" category="paragraph">ノード 3 のインストールを確認し、 node2 から node3 にアグリゲートを再配置する前に、 node2 に現在あるノード 2 に属する NAS データ LIF を node2 から node3 に移動する必要があります。また、ノード 3 に SAN LIF が存在することも確認する必要があります。</block>
  <block id="0baae1538e3c38431027896976d50f54" category="admonition">SAN LIF を、元のポートとリンク速度が同じポートに移動したことを確認する必要があります。</block>
  <block id="7625a2790853e03d706fd2e8a29fb7ba" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードする場合は 'node4 オンボード FC ポート 'UTA/UTA2 ポート ' または UTA/UTA2 カードを設定します</block>
  <block id="3ab0e6df482466ba6428f0535b2e2564" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードする場合は 'node2 で HA ペアを無効にし 'node1 をシャットダウンします</block>
  <block id="1609725c89da712556fac3c5249a458a" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードする場合は ' オンボード FC ポート 'UTA/UTA2 ポート ' または UTA/UTA2 カードを node3 に設定します</block>
  <block id="e9dcea61d06851c722ca01cdb7268d58" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードできるかどうかを理解します</block>
  <block id="43923762f381f72122bd69468cc63234" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用してアップグレードした後 'HA ペアを有効にし ' ノード 3 とノード 4 のストレージアクセスを確認し ' アグリゲートの所有権を確認します</block>
  <block id="62e4a54209a0f0d1e5c6fb2d5ee8bd8d" category="summary">ONTAP 9.5 を実行しているコントローラを 9.7 にアップグレードする場合は、「 system controller replace 」コマンドを使用して、ルート以外のアグリゲートと NAS データ LIF をノード 1 からノード 2 に移動し、ノード 1 のリソースをノード 3 に移動します。</block>
  <block id="f66ca97a9759a1c8137dce34fe1c3e90" category="paragraph">この処理は、タスクの開始時にすでに一時停止されている必要があります。手動で再開する必要があります。</block>
  <block id="0d38ae98eaaae2959f4bd622e0d268c5" category="summary">ONTAP 9.5 を実行しているコントローラを 9.7 にアップグレードするときに 'system controller replace' コマンドを使用して MetroCluster 構成の正常性を確認し ' 正常に動作することを確認します</block>
  <block id="3485cf38a64932bd6b396eabcf079454" category="summary">「 system controller replace 」コマンドを使用して ONTAP 9.5 を実行するコントローラを 9.7 にアップグレードするときに、ルート以外のアグリゲートと NAS データ LIF をノード 1 からノード 2 に移動し、ノード 1 のリソースをノード 3 に移動します。</block>
  <block id="767ebec2859c7f997386a7679698edb4" category="summary">ONTAP 9.5 を実行しているコントローラを 'system controller replace' コマンドを使用して 9.7 にアップグレードする場合は ' ノード 3 とノード 4 をネットブートする準備をします</block>
  <block id="16d19daed45f3be78bc9bea63100bb72" category="summary">ONTAP 9.5 を実行するコントローラのアップグレードをサポートするために必要なリファレンスコンテンツと Web サイトは、「 system controller replace 」コマンドを使用して提供されます。</block>
  <block id="054dcc71a9397a2cddfbf9b907aea5ed" category="summary">ONTAP 9.7 以前を実行しているコントローラで、 ARL を手動でアップグレードする際に、ノード 4 のインストールとノード 3 との通信を確認します。</block>
  <block id="0e472afa239c2cd65ab6d08bdaa80dff" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする場合は、 SnapMirror 転送と関係を再開します。</block>
  <block id="b4828d73e6a54a557f1d9c688f9afada" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする際に発生する可能性があるアグリゲートの再配置エラーのトラブルシューティングを行います。</block>
  <block id="8dc470d3ebc8fcb9ed95d55471e7303a" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする際に、ノード 4 のオンボード FC ポート、 UTA / UTA2 ポート、または UTA / UTA2 カードを設定します。</block>
  <block id="2dc65c1b8b8821ab351c5b9fd3ab2b97" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする場合は、ノード 1 のクラスタネットワーク、管理、 FC ポート、および NVRAM システム ID に関する情報を記録します。</block>
  <block id="04a9af523510dc4b38fa46c583f9e00f" category="paragraph">ノード 3 のインストールを確認し、 node2 から node3 にアグリゲートを再配置する前に、 node2 に現在あるノード 2 に属する NAS データ LIF を node2 から node3 に移動する必要があります。ノード 3 の SAN LIF も確認する必要があります。</block>
  <block id="05743303a73462ef6d9bbfd30ac4d38e" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする場合は、 node1 の物理ポートが node3 に正しくマッピングされていることを確認します。</block>
  <block id="516641dccf4c70d4db12878e058ae756" category="paragraph">元のノードのポートと LIF の構成を、新しいノードの構成と互換性を持つようにする必要があります。これは、新しいノードがブート時に同じ設定を再生するためです。つまり、ノード 3 をブートすると、 ONTAP は、ノード 1 で使用されていたポートで LIF をホストしようとします。</block>
  <block id="b0e739bf68d19a28b9694e06a9b2cfd7" category="list-text">[[man_map_1_step5] クラスタ LIF とノード管理 LIF またはクラスタ管理 LIF をホストするブロードキャストドメインを調整します。各ブロードキャストドメインに正しいポートが含まれていることを確認します。ポートをホストしているブロードキャストドメイン間や LIF のホームになっているブロードキャストドメイン間で移動することはできないため、 LIF を移行して変更する必要がある場合があります。</block>
  <block id="9c0cd850b64c418ab49c394ae78e52be" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする場合は、ノード 3 の NAS データ LIF を node3 から node4 に移動します。</block>
  <block id="a85ccd8e0b0b2c0119d022ef2ae803ef" category="paragraph">ノード 4 のインストールの確認が完了し、ノード 2 のアグリゲートをノード 3 からノード 4 に再配置する前に、現在ノード 3 にある node2 に所有されている NAS データ LIF をノード 4 に移動する必要があります。ノード 4 の SAN LIF も確認する必要があります。</block>
  <block id="2c1932b86516656567d157f72eaf9746" category="summary">ONTAP 9.1 以降の場合は、ポートレイアウトを再設定し、 ONTAP 9.7 以前を実行しているコントローラで ARL を手動アップグレードする際に最新の RCF を適用します。</block>
  <block id="69824f6377ec4443972cf9847e831247" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする際に発生する可能性がある問題に関する情報。</block>
  <block id="de58ee53439e59b040872d736eb4746a" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする場合は、ノードを準備して情報を収集し、すべてのクラスタノードがクォーラムにあることを確認します。</block>
  <block id="528395f19572aa91b1963f0ea7b6ed6b" category="summary">ONTAP 9.7 以降を実行しているコントローラで ARL を手動でアップグレードする場合は、 node2 のクラスタネットワーク、管理、 FC ポート、および NVRAM システム ID に関する情報を記録します。</block>
  <block id="45e4301bce74949fdb13b7b2b487a728" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする際に、 RCF ファイルをインストールして Cisco スイッチと Brocade スイッチを再設定します。</block>
  <block id="6d2acf13fe57f3aa46b46db44d2c7e40" category="summary">ONTAP 9.7 以前を実行しているコントローラでは、 ARL を手動でアップグレードする際にメンテナンスが進行中であることを、ネットアップテクニカルサポートに通知します。</block>
  <block id="edcbc9ed6ad9e26568e29e57e3794019" category="paragraph">スイッチを再設定する前に、問題 an AutoSupport message to notify NetApp technical support that maintenance is maintenance.システム停止が発生したとみなしてテクニカルサポートがケースをオープンしないように、メンテナンスが進行中であることを通知する必要があります。</block>
  <block id="82afd892d5c2a9e4e8762a660a4866cd" category="summary">手動の ARL アップグレード手順 を使用して、 ONTAP 9.7 以前を実行しているコントローラハードウェアをアップグレードし、ルート以外のアグリゲートの所有権を切り替えます。</block>
  <block id="3ee1f71cb1077912bbaee2aa2d00b9be" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードするには、特定のツールとドキュメントが必要です。</block>
  <block id="df9440c565e0ee041579892cbe38d8dd" category="summary">ONTAP 9.7 以前を実行しているコントローラで、 ARL を手動でアップグレードする際に、 node3 のインストールと node2 との通信を確認します。</block>
  <block id="3677ac49080ff505fdf08da5eca00056" category="paragraph">node3 のインストールとブートが完了したら、正しくインストールされていること、クラスタの一部であること、および node2 と通信できることを確認する必要があります。</block>
  <block id="b14e77f6abcd7876eb048771f706c19b" category="summary">ONTAP 9.7 以前を実行しているコントローラでの手動 ARL アップグレード時に、ノード 3 のオンボード FC ポート、 UTA / UTA2 ポート、または UTA / UTA2 カードを設定します。</block>
  <block id="4e57dcc65e363749f76aef4905047855" category="summary">Config Advisor ツールを使用して、 ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする際に、一般的な構成エラーがないかどうかを確認します。</block>
  <block id="4aea10f3c0d7162a37d57f70bbb18869" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードすると、古いシステムが動作しなくなることをネットアップに知らせてください。</block>
  <block id="620726f5395f82206964dd62bd21bd64" category="summary">ONTAP 9.7 以前を実行しているコントローラで、 node2 の NAS データ LIF を手動で ARL アップグレード中に node3 に移動します。</block>
  <block id="2292391a53ba8012f89e27eee26e330c" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードしたあとに、 MetroCluster 構成の無効なポートにある LIF を再同期します。</block>
  <block id="9d853a67f0d4bc462097290add47b063" category="summary">ONTAP 9.7 以前を実行しているコントローラでは、 ARL を手動でアップグレードする際に、内蔵ディスクドライブにルートアグリゲートまたはデータアグリゲートが含まれていないことを確認します。</block>
  <block id="bd01c5b770f12580d6d085fd6e8ad756" category="summary">システムをネットブートする前に、 ONTAP 9.7 以前を実行するコントローラで ARL を手動でアップグレードする際に、すべての SnapMirror 関係を休止します。</block>
  <block id="cb42877b8f5a499b59fbb4b10124a134" category="summary">ONTAP 9.7 以前を実行しているコントローラでは、 ARL を手動でアップグレードする際に、 node3 をインストールして ONTAP ソフトウェアをインストールします。</block>
  <block id="a986e1d99c36977cba4daadf9f7b9d1e" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする場合に、ステージ 2 、ステージ 3 、またはステージ 5 で LIF がオンラインにならない。</block>
  <block id="10a1bf2406c5b22e1d135998f630df5f" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする場合は、 node2 の物理ポートが node4 に正しくマッピングされていることを確認します。</block>
  <block id="5392067398aba96b96eb467b43962fc8" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする場合は、 MetroCluster 構成の健全性を確認して処理を修正します。</block>
  <block id="3c27ee7df2005d2721c952492a878a6c" category="paragraph">MetroCluster 構成の健全性をチェックして、正しく動作することを確認する必要があります。</block>
  <block id="a971a57f0ab6432a971f405b5096ea03" category="summary">ONTAP 9.7 以前を実行しているコントローラで、手動 ARL アップグレード時のスイッチオーバー、修復、スイッチバックの処理を確認します。</block>
  <block id="27effd56423bec9ee27e09277564b6ed" category="summary">必要に応じて、 ONTAP 9.7 以前を実行しているコントローラでストレージ暗号化を設定し、 SSL 証明書をインストールし、 ARL を手動でアップグレードする際にキー管理サーバをセットアップします。</block>
  <block id="f4f373f7c3019360096aef3036006d62" category="summary">ONTAP 9.7 以前を実行するコントローラペアの ARL の手動アップグレード手順 の仕組みを理解する。</block>
  <block id="d7e5ee7c28892ef5fdf4825739b7aec0" category="summary">ONTAP 9.7 以前を実行しているコントローラで、 ARL を手動でアップグレードする場合は、 node4 をインストールしてブートし、 ONTAP ソフトウェアをインストールします。</block>
  <block id="07db5d309a895d3830f3488eb9139adb" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする場合は、ノード 2 を正しくシャットダウンしてラックまたはシャーシから取り外します。</block>
  <block id="ef3c91fa4c8f504ee640cfbd9abd851c" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする際には、特定の情報を収集します。</block>
  <block id="e3cbff5daacc19796803ce053e0bd219" category="summary">HA ペアを有効にし、 node3 と node4 にあるストレージアクセスを確認し、 ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードしたあとにアグリゲートの所有権を確認します。</block>
  <block id="ffd0deb022240e6349d0ad6c700b5228" category="summary">node2 の AutoSupport メッセージを送信し、 ONTAP 9.7 以前を実行しているコントローラで node2 の非ルートアグリゲートを手動で ARL アップグレード時にノード 2 に再配置します。</block>
  <block id="28adb05c023c689461eafc8525f2227b" category="summary">ONTAP 9.7 以前を実行しているコントローラでは、 node2 で HA ペアを無効にし、 ARL を手動でアップグレードする際に node1 を正しくシャットダウンします。</block>
  <block id="1f03fa93b012b982c272f6559a72a764" category="summary">ONTAP 9.7 以前を実行しているコントローラで、ルート以外のアグリゲートをノード 1 からノード 2 に移動し、 ARL を手動でアップグレードする際に再配置を確認します。</block>
  <block id="9698dfbd957bfa17e223947fbe0ab128" category="summary">ONTAP 9.7 以前を実行するコントローラのペアに手動 ARL 手順 を使用できるかどうかを確認します。</block>
  <block id="4d856525c09b45da9c5211e4e18d7956" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする場合、システムがクラッシュするか、パニック状態になるか、電源の再投入が行われる可能性があります。</block>
  <block id="4cb6b559e491ceb7837bbe4029df8647" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする場合は、 node2 のルート以外のアグリゲートを node3 から node4 に再配置します。</block>
  <block id="876193b993ec26f0c627e985b7857e15" category="summary">ONTAP 9.7 以前を実行しているコントローラで、手動 ARL アップグレード時にファブリック内の Brocade スイッチと Cisco スイッチを永続的に有効にします。</block>
  <block id="c91d99382b92408513aed0c125178f52" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする場合の、新しいコントローラモジュールとディスクシェルフのケーブルレイアウトを決定します。</block>
  <block id="4a249b60efb722cf2c3f1aa4209460e4" category="admonition">RCF を使用できるようにケーブル接続できない場合は、テクニカルサポートにお問い合わせください。RCF を使用できないケーブル接続の場合は、この手順を使用しないでください。</block>
  <block id="8f6790d9ae4831c2f2a5df43d0211d5b" category="summary">ONTAP 9.7 以前を実行しているコントローラでは、ファブリック内の Brocade スイッチと Cisco スイッチを無効にし、 ARL を手動でアップグレードする際に構成を変更します。</block>
  <block id="ce9a79ebc7c19f98472942ce9de695aa" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする際に、 node3 と node4 をネットブートする準備をします。</block>
  <block id="c9e368205ce643c1e4f03ece9279d673" category="summary">ONTAP 9.7 以前を実行しているコントローラでは、 ARL を手動でアップグレードする際に認証キーを管理するには、 KMIP サーバを使用します。</block>
  <block id="ed576374c6e7857fa007ac7fd9061164" category="summary">ONTAP 9.7 以前を実行しているコントローラで ARL を手動でアップグレードする場合は、参照コンテンツと Web サイトが必要です。</block>
  <block id="46d710808513caa456c59b3efa90d166" category="list-text">ノード 1 とノード 2 に 2 つまたは 4 つのクラスタ LIF があるかどうかを確認します。</block>
  <block id="7fb38727f894ed52a58d4bcc31b06aaf" category="list-text">[man_record_2_step9] ： node2 の属性を表示します</block>
  <block id="532b323cb941c2d695f99125c68410df" category="cell"><block ref="532b323cb941c2d695f99125c68410df" category="inline-link-macro-rx"></block></block>
  <block id="b4fe4daa97eb40900235ae04f1cd5873" category="cell"><block ref="b4fe4daa97eb40900235ae04f1cd5873" category="inline-link-macro-rx"></block></block>
  <block id="91b0db424a5fefe25b3d6fccaca1b289" category="inline-link-macro">ワークシート</block>
  <block id="7d059b3dc572790c32264682daa9e3a8" category="list-text">[[worksheet _step2_node2]] クラスタが SAN LIF 用に構成されている場合は、 SAN LIF と既存の構成情報をこのに記録します <block ref="ed0401b9f31c3a01c0ae9e44a18d8569" category="inline-link-macro-rx"></block> 手順 の後半で使用します。</block>
  <block id="13fe413dcdf6cd4af5dc15452c261c5d" category="list-text">ノード 3 の SAN LIF を一覧表示し、出力を確認します。</block>
  <block id="c81ec76e9b8604cac0a0b80f119ad7ca" category="paragraph">「 network interface show -data-protocol fc * 」を参照してください</block>
  <block id="fefd289d498d5d5326f83433241db103" category="list-text">既存の設定を表示し、出力を確認します。</block>
  <block id="2b8adeabb17e2a28fffec9935d24095e" category="paragraph">「 fcp adapter show -fields switch-port 、 fc-wwpn 」と入力します</block>
  <block id="0570a87f66b52b8f17fb5de7ee7bc50e" category="cell">に進みます <block ref="1feafd371df4188baa75107ccc365ce6" category="inline-xref-macro-rx"></block>。</block>
  <block id="a0c840707955fb428322cd9929f8594f" category="cell">手順 4 を省略して、に進みます <block ref="fed6d849a1c6887a0026c6afdf0be295" category="inline-xref-macro-rx"></block>。</block>
  <block id="81822d00068323377a946aa7bf001d37" category="inline-xref">手順 14</block>
  <block id="203c350886e723f8907aa98829856dea" category="cell">- 完了しました <block ref="9b6384c6e14a01b359b3ceca503dc7e8" category="inline-xref-macro-rx"></block> から <block ref="0384eb2d62c044428afa7420fa66b7f3" category="inline-xref-macro-rx"></block>をクリックして、手順 10 をスキップして完了します <block ref="e8b56490494689060c7f97c7205b356e" category="inline-xref-macro-rx"></block> から <block ref="ec14a10fceb4bd2f9e1f7036303b7f20" category="inline-xref-macro-rx"></block>。</block>
  <block id="d7e12627113c3a73f5a80bf4274e8846" category="cell">手順 6~9 をスキップして完了します <block ref="5ec476e5dfed929f240a4e732b5ca6eb" category="inline-xref-macro-rx"></block> から <block ref="ec14a10fceb4bd2f9e1f7036303b7f20" category="inline-xref-macro-rx"></block>。</block>
  <block id="6944af912471eeed2e022cefd73bd566" category="cell">- 完了しました <block ref="9b6384c6e14a01b359b3ceca503dc7e8" category="inline-xref-macro-rx"></block> から <block ref="ec14a10fceb4bd2f9e1f7036303b7f20" category="inline-xref-macro-rx"></block>。</block>
  <block id="24fe95a95d6e3a63f99e4a3c5ef9f89a" category="list-text">新しい「 adapter 」および「 switch-port 」の設定が正しいことを確認するには、「 fcp adapter show 」コマンドの出力と、のワークシートに記録した新しい設定情報を比較します <block ref="126eae74e75ac7b320d7d5918436b8fc" category="inline-xref-macro-rx"></block>。</block>
  <block id="a9b96c57877203a59f39e6cc79d93f2c" category="paragraph">ノード 4 の新しい SAN LIF の設定を表示します。</block>
  <block id="b2d67401d96e568ee0cf85d65ef2b19b" category="admonition">新しい構成の SAN LIF が同じ「 switch-port 」に接続されたアダプタ上にない場合、ノードをリブートすると原因 がシステム停止状態になる可能性があります。</block>
  <block id="82b42c933396be79780fabd5e97f3c55" category="list-text">「 fcp adapter show 」コマンドの出力と、のワークシートに記録した設定情報を比較して、新しい「 adapter 」および「 switch-port 」の設定が正しいことを確認します <block ref="0cc92f396d72c25a12260a5b674f18bb" category="inline-xref-macro-rx"></block>。</block>
  <block id="c60cff9ca9befe11cdfbe93fdcc641c4" category="paragraph">ノード 3 に新しい SAN LIF の設定を表示します。</block>
  <block id="51dffedbaa43215c9eb261627011dc71" category="list-text">[[worksheet _step2] クラスタが SAN LIF 用に構成されている場合は、 SAN LIF 「 adapter 」および「 switch-port 」の構成情報をこのに記録します <block ref="df642b24162f163cd69ded792f71f977" category="inline-link-macro-rx"></block> 手順 の後半で使用します。</block>
  <block id="82bc4d9ae00b977a00f8b2b3183a9785" category="list-text">node2 の SAN LIF を一覧表示し、出力を確認します。</block>
  <block id="018c22c5b30c017d8feb43ab61d41950" category="cell">に進みます <block ref="8695dd713093cfe118008b3f87c0754f" category="inline-xref-macro-rx"></block>。</block>
  <block id="2b11e293cb7289a197df3561593aeffa" category="cell">手順 4 を省略して、に進みます <block ref="a890970ca155ddb2f966787cdb699906" category="inline-xref-macro-rx"></block>。</block>
  <block id="584e8d9cc5ee8c735cfb3dd7222c5f97" category="cell">- 完了しました <block ref="ad851a431673e6dae9d14b296383f37c" category="inline-xref-macro-rx"></block> および <block ref="1d64360fb04a1f29d7e0234ee858d9f1" category="inline-xref-macro-rx"></block>をクリックして、手順 8 をスキップして完了します <block ref="9da2a3cb41411f3d8e4509b7d9f419c9" category="inline-xref-macro-rx"></block> から <block ref="268954e5efe55fe9bc0459f35479f2f6" category="inline-xref-macro-rx"></block>。</block>
  <block id="b9c0ca8a434a5002becc00cfe521a241" category="paragraph">SAN LIF を node3 から node4 に移動したあとの設定が正しいことを確認できるように、次のワークシートを使用して、各 LIF の「 adapter 」と「 switch-port 」の情報を記録します。</block>
  <block id="53148cc93c14512428f6220d831a49bc" category="paragraph">network interface show -data-protocol fc * コマンドの出力に記載されている LIF 「 adapter 」の情報と、 node3 に対する fcp adapter show -fields switch-port 、 fc-wwpn コマンドの出力に記載されている「 switch-port 」の情報を記録します。</block>
  <block id="4609868b369b1b30d3b39e9d3f09f22f" category="paragraph">ノード 4 への移行が完了したら、ノード 4 の LIF の「 adapter 」と「 switch-port 」の情報を記録し、各 LIF が同じ「 switch-port 」に接続されていることを確認します。</block>
  <block id="bbb747b1516b5225f1ec1c65887b39fc" category="cell">ノード 3</block>
  <block id="9d976e7c6f1c5d3d7ceae80a4e6a8146" category="cell">ノード 4</block>
  <block id="b3625fe2fca73900be4e5cc7287b2712" category="cell">「アダプタ」</block>
  <block id="ea345f47a717359f0fdba3d2e4713ef4" category="cell">「 switch-port 」と入力します</block>
  <block id="c05bee806c6f915cf5ff2806f39a07ed" category="paragraph">SAN LIF を node2 から node3 に移動したあとに正しく設定されているかどうかを確認するには、次のワークシートを使用して、各 LIF の「 adapter 」と「 switch-port 」の情報を記録します。</block>
  <block id="9112b6be69a2001742ac0ee10829bee2" category="paragraph">network interface show -data-protocol fc * コマンド出力の LIF 「 adapter 」情報と、 node2 に対する fcp adapter show -fields switch-port 、 fc-wwpn コマンド出力の「 switch-port 」情報を記録します。</block>
  <block id="22b2fefa28a06ec3cc06d7ec099d5c74" category="paragraph">node3 への移行が完了したら、 node3 の LIF の「 adapter 」と「 switch-port 」の情報を記録し、各 LIF が同じ「 switch-port 」に接続されていることを確認します。</block>
  <block id="f5f366263dcc357e2720042f33286f8f" category="cell">ノード 2</block>
  <block id="9563ae143e5fe7208056b0b71e25b465" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードする場合は、ノード 2 の NAS データ LIF 設定情報を記録します。</block>
  <block id="f2c792d165cf5982bc257f272cf61213" category="doc">ワークシート： NAS データ LIF を node4 に移動する前に記録する情報</block>
  <block id="3845d8de38880910997f948c4173a5ae" category="summary">ONTAP 9.8 以降を実行しているコントローラで ARL を手動でアップグレードする場合は、 NAS データ LIF の構成情報を 1 つ記録します。</block>
  <block id="3a9b491c3933919f7944d284e7bdf2a9" category="doc">ワークシート： NAS データ LIF をノード 3 に移動する前に記録する情報</block>
  <block id="42b2cb9f9e1a3cf15145887e95d849a8" category="sidebar">ワークシート：コントローラのアップグレード前後に収集する情報</block>
  <block id="17f9514d7bcdbd086bef311b63567524" category="admonition">FAS8080 や AFF8080 システムなど、ノードあたり 3 つ以上のクラスタポートを備えたシステムは、アップグレードを開始する前に、ノードあたり 2 つのクラスタポートにクラスタ LIF を移行してホームに戻す必要があります。ノードごとに 3 つ以上のクラスタポートを使用してコントローラのアップグレードを実行すると、アップグレード後に新しいコントローラのクラスタ LIF がなくなる可能性があります。</block>
  <block id="23ec9249d03285a513eaaf182a7bcd49" category="cell">AFF8080</block>
  <block id="a21bb6fd42ff6eb59f1b181296f7c703" category="cell">FAS8020 ^3^、FAS8040 ^3^、FAS8060、FAS8080</block>
  <block id="34a273586a26b9c6b133c4ff92d23f7c" category="cell">FAS8060 ^4^、FAS8080 ^4^</block>
  <block id="756d409209ace98589705774b5011aa0" category="cell">FAS9500</block>
  <block id="8245966310b85f53855742d8e5ba304d" category="cell">AFF8020^3^、AFF8040^3^、AFF8060、AFF8080を参照してください</block>
  <block id="15669f56a9080989e0dd31ca6ec7de95" category="cell">AFF8060 ^4^、AFF8080 ^4^</block>
  <block id="ec5e81cea4c5ee83d635778e86350e80" category="cell">AFF A900 の略</block>
  <block id="83881871feba8f42c547551eb77311c5" category="cell">FAS8300 ^2^、FAS8700、FAS9000、FAS9500</block>
  <block id="b2eb0585a7b45bf3f01cacfcc45b17f6" category="cell">FAS8300、FAS8700、FAS9000</block>
  <block id="5b7a8b52e3325206af4bfbcf07693215" category="cell">AFF A400 ^2^、AFF A700、AFF A800^1 ^、AFF A900</block>
  <block id="e02a538b8ab4faf6c7d890fa1fcfa7a7" category="cell">AFF A320 ^4^</block>
  <block id="540dacfeb5577ce4282c41e9c7518680" category="cell">AFF A400</block>
  <block id="3987c2b3042faa1f0f41d1ec08f2ed7e" category="cell">AFF A400 、 AFF A700</block>
  <block id="e9dc6fafb0f1f8ce64537ec567468d16" category="paragraph">^3FAS8020、FAS8040、AFF8020、およびAFF8040のシステムを上記の表のターゲット交換コントローラにアップグレードする場合、交換用コントローラが古いコントローラと同じONTAP バージョンを実行している必要があります。FAS8020、FAS8040、AFF8020、およびAFF8040のシステムは、ONTAP 9.8以降のONTAP バージョンをサポートしていません。</block>
  <block id="a45da96d0bf6575970f2d27af22be28a" category="cell">システム</block>
  <block id="d85bd4eac4ae2ba50be5c03b292af8f8" category="cell">9.9.1以降</block>
  <block id="94869c0e3d68936a54ce1ef1d7459f3e" category="cell">AFF8060の場合</block>
  <block id="a07a923eb6b740023890d052b6fb6e9a" category="cell">9.8P13以降のパッチ</block>
  <block id="728152178b0535e4c7e93f53223fbfff" category="cell">9.8P10以降のパッチ</block>
  <block id="edbeb952c4054f67ce1836afbda00903" category="cell">FAS8060</block>
  <block id="8ed24dd5fb292ecefe76fe92a5fc3988" category="cell">FAS8080</block>
  <block id="e2060bf680bf4facfccf3befec69ef04" category="cell">9.8P12以降のパッチ</block>
  <block id="ba579f865c148542656e741f915bc210" category="section-title">AFF A700またはFAS9000コントローラモジュールを取り外します</block>
  <block id="831816e1924f3edb2d170ec4c291d0f3" category="section-title">AFF A700またはFAS9000 NVRAMモジュールを取り外します</block>
  <block id="3d748e41fa426d2025ff3eb80b369ede" category="admonition">AFF A700またはFAS9000 NVRAMモジュールはスロット6にあり、システム内の他のモジュールの2倍の高さです。</block>
  <block id="d0106eeb656b11c6a07a8e45dcf1b214" category="list-text">FAS9000 NVRAMモジュールに取り付けられているすべてのフラッシュキャッシュモジュールをFAS9500 NVRAMモジュールに移動します。</block>
  <block id="4ed758f1326f5379f7dc30fe674ce726" category="inline-link-macro">コントローラのアップグレードに関するガイドラインを参照してください</block>
  <block id="038bf310b30027962de2d4e7d3c544e6" category="paragraph">「system node AutoSupport invoke -node _node_name」-type all -message " MAINT=2h Upgrading _node_name _from_platform_original_to _platform_new_new_"」というメッセージが表示されます</block>
  <block id="10de09f0f92f196f1e5984884c43ba27" category="list-text">storage failover modify -node node_name -enabled false</block>
  <block id="981b4567a35216af18afaec3c97bc50d" category="paragraph">system node halt -node _node_name _`</block>
  <block id="57160bbb15f3acc82c1eac8e82c87937" category="paragraph">「network port modify -node _node_name --port_port_name_-mtu 9000 -ipspace Cluster」</block>
  <block id="1db9d300a7d27735fb49e694ad616a9e" category="paragraph">「network interface migrate -vserver_vserver_name __ lif_lif_name_-source-node node1 -destination-node node1 -destination-port_name_`</block>
  <block id="cf8f2405fecce8ee1f21a7233d89115d" category="paragraph">「network interface modify -vserver Cluster -lif LIF_name–home-port_port_name_`」です</block>
  <block id="187352d45ddfcffcbd0fdfc10ef7a60b" category="paragraph">「network port broadcast-domain remove-ports -ipspace Cluster -broadcast-domain Cluster -ports_node1：port_」のようになります</block>
  <block id="19e2489a410c822305a9adb3afaaa7b9" category="paragraph">'cluster show -node-node1_-fields health`</block>
  <block id="b3ee2f857e5e883213b8165c5fba42ad" category="paragraph">`::&gt; net int modify -vserver Cluster-lif cluster_lif_cluster-status-admin down；net int modify -vserver Cluster-lif cluster_lif_-status-admin up</block>
  <block id="125acf99178c1bb4d2f46c0b3ac0015a" category="paragraph">到達可能性修復-node_name -- port_port_name_`</block>
  <block id="00cf5fbbce20ec1f9b89b147bb382971" category="paragraph">「broadcast-domain delete -broadcast-domain broadcast_domain_domain _」のようになります</block>
  <block id="cffe2489101b6ec78694eaa8b813fb84" category="paragraph">ifgrp add-port -node node_name -ifgrp_ifgrp_port_-port_port_port_name_`</block>
  <block id="35a35e20066755b8067ef6f365adf5e8" category="paragraph">ifgrp remove-port -node_name -ifgrp_ifgrp_port_-port_port_port_name_`です</block>
  <block id="b130d7e417d43cf2bb4e3462671d7c9b" category="paragraph">'vlan delete -node_name -- vlan-name_vlan_port_`</block>
  <block id="9227e3ed6facfee87d3d3cd63085fd93" category="paragraph">'vlan create -node_node_name -- vlan-name _vlan_port_`</block>
  <block id="615288f7a1a6d0cd98b83d51fa0a23b0" category="paragraph">「変位VLAN restore -node _node_name」-port_port_name -- destination -port_destination_destination_port_`</block>
  <block id="94233499c40b90b14807c18aee0ff89a" category="paragraph">「変位インターフェイスのリストア- vserver_vserver_name _- lif-name _lif_name_`</block>
  <block id="5da1c195350be952cdef0d9195e142af" category="paragraph">「network interface show -vserver_vserver_name --status-admin down」を参照してください</block>
  <block id="af5f7348cf014dba004cc0c3503f37c6" category="list-text">動作上停止しているLIFがないかどうかを確認します。network interface show -vserver vserver_name __ status-oper down</block>
  <block id="956458a9f79320f54c882fd0d5a9bc7b" category="paragraph">「network interface modify -vserver _vserver_name __ lif_lif_home-port_-home-node home_port_`</block>
  <block id="37b83e423704a4a0b505f94f44548be5" category="paragraph">'system node run -node _node_name sysconfig `</block>
  <block id="1610786a536fe66c629bd4ee88571bb3" category="paragraph">'network port show -node-node_name --物理タイプ</block>
  <block id="666c930196006a7a00cd11e4bd261a67" category="paragraph">network interface failover-groups show -vserver_vserver_name _`</block>
  <block id="70bb92c2c7b1882ff8b73acb1d379dd0" category="paragraph">「network port vlan show -node _node_name _」のように入力します</block>
  <block id="51da47a5cd2165b390d04ec231dbf88f" category="paragraph">「 network port ifgrp show -node node_name 」 - instance 」を指定します</block>
  <block id="d8a3e002e1fe8c2f25656a36ddbfbeba" category="list-text">元のノードのSVMに現在接続されているアクティブなイニシエータの一覧を表示します。+`iscsi connection show -vserver _Vserver_name -lif_old_lif_`</block>
  <block id="3b5280aac62d339d908a3019ce691faa" category="paragraph">`lun portset remove -vserver _vserver_name -portset_portset_name __ port-name _lif_name_`</block>
  <block id="6e2a280fc54f306b51d2674e9eea36fc" category="paragraph">「network interface delete -vserver _vserver_name _-lif_lif_name_`」のように指定します</block>
  <block id="019ba4e936e9a1ab59eec2033ea3a6b4" category="paragraph">'system node AutoSupport invoke -node node_name Type all -message "Upgrading node_name from_platform_original_to _platform_new_new_"</block>
  <block id="f29dc737795110e1cc8fbd850515968a" category="paragraph">'network port delete -node1_-port_port_name_`</block>
  <block id="525ce0d5109d2abc61cc41e941dec46b" category="paragraph">「network port broadcast-domain show -ports_node_name：port_name_`</block>
  <block id="e031a855de8a6709ad76ee26da7e1409" category="paragraph">「network interface modify -vserver _vserver_name __ lif_lif_name_–home-port_port_name_`</block>
  <block id="b81db1e95a382ce3628dd1e8a693ba94" category="paragraph">'network interface modify -failover-group_failover_group'-failover-policy_failover_policy_`</block>
  <block id="91b0b9d75ab5100fdef2cc4b9abcbf78" category="paragraph">「network interface migrate -vserver _Vserver_name -lif_lif_name_-source-node-node1_destination-node-node1 __ destination-port_port_name_`</block>
  <block id="bd804b237ebb8835d7e3b85da5d2132b" category="paragraph">「変位インターフェイスrestore -vserver _Vserver_name -lif-name_lif_name_`」のように指定します</block>
  <block id="aad098d45c08b648ea491886918a7403" category="paragraph">「network interface show -vserver _Vserver_name --status -admin down」を参照してください</block>
  <block id="0c50d3945bcacd6caf3b39ff87c93171" category="paragraph">「network interface show -vserver_Vserver_name --status-oper down」を参照してください</block>
  <block id="e43dab083a912c9831fe30bf3abbb717" category="paragraph">「network interface modify -vserver _Vserver_name -lif_lif_name_-home-port_`</block>
  <block id="43e5de1f578cb9746c8ca59e1245cba6" category="paragraph">'network interface show -data-protocol nfs|cifs -curr-node node_name</block>
  <block id="5e0a3adf85d230d7b6fa4c06e4c368c8" category="paragraph">「network interface modify -vserver _Vserver_name --lif_lif_name_-auto-revert false」という名前のコマンドを実行します</block>
  <block id="a35f1330918bb868bf87b26c734531fe" category="paragraph">「network interface migrate -vserver _Vserver_name -lif_lif_name_-destination-node-node2 _–destination-port_netport | ifgrp_`</block>
  <block id="4150a2c924149b072f28abeb13dffdce" category="paragraph">「network interface modify -vserver _Vserver_name -lif_lif_name_-home-node2_-home-node _port_netport | ifgrp_`」</block>
  <block id="ff95031f7ce5f737853f1923b377dff4" category="cell">ノード上のすべてのSAN LIFを無効にしてアップグレード用に停止します。「network interface modify -vserver _Vserver -name _-lif LIF_name -home-node _node_name _to _upgrade _-home-port port | ifgrp-status-admin down</block>
  <block id="d47ec0d8599c51072be6dd4fe781e53a" category="paragraph">「network interface migrate -vserver_Vserver -name _-lif_lif_name_-destination -node _node2 _-destination-port_data_port_`</block>
  <block id="5f2386813cdbe5a31618df40ff0bc4bb" category="paragraph">'network interface show -curr-node _node2 __-data-protocol nfs|cifs</block>
  <block id="f93a467cbe913e76f673709bbe87ce51" category="paragraph">「network interface modify -vserver _Vserver -name _-lif_lif_name_-home-node2_-home-node _port_name_`</block>
  <block id="f31d0edfdf07a61d545c83ac469f9bb9" category="paragraph">「network interface show -home-node _node2」-home-port_port_name_`</block>
  <block id="519623978ac65de377ea633801e31830" category="paragraph">'network interface show -curr-node node_name --curr -port_port_port_name_`</block>
  <block id="1739923dae3adf972cb075015edfa892" category="paragraph">「network interface migrate -vserver_Vserver -name _-lif_lif_name_-destination–node_node_name _-destination -port_port_port_name _」</block>
  <block id="31eb0ef4f6f7de4f775525a118386dc0" category="paragraph">「network interface modify -vserver _Vserver -name _-lif_lif_name_home–node_name _-home-port_port_port_name _</block>
  <block id="ae88793aaac7cea8730108832f5f7f4a" category="paragraph">「network interface modify -vserver _Vserver -name _-lif_lif_name_-home-nodename_-status-admin up</block>
  <block id="2f66a04358258a245998b2984938ec07" category="admonition">MetroCluster 構成では、ポートのブロードキャストドメインを変更できない場合があります。これは、ポートがデスティネーション Storage Virtual Machine （ SVM ）の LIF をホストしているポートに関連付けられているためです。デスティネーションLIFを適切なポートに再割り当てするには、リモートサイトの対応するソースSVMで次のコマンドを入力します：「MetroCluster vserver resync -vserver _Vserver_name _`</block>
  <block id="e52d79bdf43cd4e3113527f8ed347cf3" category="paragraph">network interface show -curr-node node1 __-role data</block>
  <block id="1481b7cc4bd1492508167440a294e706" category="paragraph">'network interface show -role data -curr-node _node2 __-is-home false -home-node node3_node3_’</block>
  <block id="7ecfa7c3ec37e921898a56a59e24206e" category="paragraph">「network interface migrate -vserver vserver_name -lif_lif_name_-destination -node _node3 _–destination-port_netport | ifgrp_`」の形式で指定します</block>
  <block id="a31ccd7b406955854500de2043b7287a" category="paragraph">「network interface modify -vserver _vserver_name __ lif_lif_name__-home-node _node3」-home-port_netport | ifgrp_`</block>
  <block id="dc76e709bffb05d962ea0689ba5d1b2f" category="cell">ノード上のすべてのSAN LIFを無効にしてアップグレード用にダウンにします。「network interface modify -vserver _vserver_name -lif_lif_name__-home-node _port_to _upgrade_-home-port port | ifgrp-status-admin down</block>
  <block id="73069d0232263b243886241ebba6b90b" category="paragraph">「network port broadcast-domain add -ports -ipspace_name_-broadcast-domain mgmt -ports_node：port_`</block>
  <block id="de6a89dd1adb8b4936fcd591e85aeeb6" category="paragraph">「network interface migrate -vserver vserver_name -lif_lif_name_-destination -node _node3 __ destination-port_netport | ifgrp_`」の形式で指定します</block>
  <block id="c8266f0f1fbbedb63c18558aac980f5d" category="paragraph">「network interface modify -vserver _vserver_name __ lif_lif_name_-home-port_netport | ifgrp _-home-node _node3 _</block>
  <block id="9838c544d58f5babeb42b1d472c0e1e5" category="paragraph">network interface show -data-protocol iscsi|fcp-home-node3_`</block>
  <block id="ba5706d48f6fd3bc4e47f824ce21ef17" category="paragraph">「 network interface modify -vserver _vserver_name __ -lif lif_name --status-admin down 」を参照してください</block>
  <block id="d3b90ce44079724b44a787455b4ae287" category="paragraph">`portset remove -vserver_name_-portset_portset_name__-port-name _port_name_`</block>
  <block id="f3a39d0b162b50737b6ab17f1a6d226d" category="paragraph">「network interface modify -vserver _vserver_name __ lif_lif_name_-home-port_'」を指定します</block>
  <block id="4e325e97c9ba13a42abd8aafd2a29c2a" category="paragraph">'network interface modify｛-home-node port_port_on_node1_-role data｝-home-node _new_home_port_on_node3 _`</block>
  <block id="5c0bc1b3624ac3c9a64b8d90f9c7463d" category="paragraph">`portset add -vserver_name_-portset_portset_name__-port-name _port_name_`</block>
  <block id="d977c5048017b0e48616fee67a878352" category="paragraph">network interface modify -home-node port_name_--home-node3_life-status-admin upです</block>
  <block id="b4127f12ddcbe59f29323d5970c2294b" category="paragraph">'network interface show -home-node node_node3 -- role data `</block>
  <block id="1a42e982e93be04446ff899e2aedf934" category="paragraph">「 network interface modify -vserver vserver_name __ -lif LIF_name -status-admin up</block>
  <block id="72b3a6ada2f13891dc74943fb05dbb46" category="paragraph">'system node AutoSupport invoke -node _node3_type all -message "node1 successfully upgraded from _platform_old_to _platform_new_"</block>
  <block id="e92abd98c681c28ac1dfc98547ae5e5f" category="cell">'disk reassign -s _node1 _sysid_-d_node3 _sysid_-p _node2 _sysid_`</block>
  <block id="78264afbb491217d7b80137b26064910" category="cell">'disk reassign -s _node1 _sysid_-d_node3 _sysid_`</block>
  <block id="f1af6307185ecf961b6cecc8e8fc02cc" category="paragraph">`_node1_sysid_`の値には'で取得した情報を使用します <block ref="111c70a978efb37ba3bd0ea564da1d79" category="inline-link-macro-rx"></block>。`_node3_sysid_`の値を取得するには'sysconfigコマンドを使用します</block>
  <block id="3d32bf30d7089bf1d038705b2a759ec3" category="paragraph">disk reassignコマンドは'_node1_sysid_'が現在の所有者であるディスクのみを再割り当てします</block>
  <block id="91792997e777152cb69307ea68b4cfa6" category="paragraph">'aggr_online _root_aggr_from_node1_`</block>
  <block id="c6fb608b8dbcdd7ac28ccfca0670de01" category="list-text">node3が元のルートアグリゲートからブートしないようにします。「aggr offline_root_aggr_on_node3」を参照してください</block>
  <block id="dfb2f1231422ff6f4c2df6fcf3b6315a" category="paragraph">「aggr options _aggr_from_node1_root」と入力します</block>
  <block id="b44d7cf4a1e6c8202283ae7adf14c206" category="paragraph">'set date_mm/dd/yyyy_`</block>
  <block id="b46b8ab5483ca342e875697fbd1c8915" category="paragraph">'set time_hh:mm:ss_`</block>
  <block id="37b25312d3c4fc7a7f7eff2c74d47d0d" category="paragraph">setsetenv partner-sysid_node2 _sysid_`</block>
  <block id="9b4c63bcc5279e1ae1942e83f78aba9c" category="paragraph">storage aggregate show -nodes_node4 --is-home true</block>
  <block id="b7c4bc0233b5c046a49d8389a2f3bd41" category="paragraph">「storage aggregate relocation start -NODE_node4」-aggr_aggr_node_A_1 -destination_node3 _」を入力します</block>
  <block id="9259024b4056dbe3033dcf92fea0fbe0" category="paragraph">storage aggregate show -aggregate aggr1、aggr2、aggr3_-fields home-name</block>
  <block id="edb6746a53c95d308002222717f4a589" category="paragraph">「_aggr1、aggr2、aggr3__」は、node1が元のホーム所有者であるアグリゲートのリストです。</block>
  <block id="c693fda729d6e359f8eb8a8fbc88eee8" category="paragraph">storage disable adapter_adapter_adapter_adapter_name_`</block>
  <block id="5861bf10ae07bb7c0e6218d5663221a4" category="paragraph">ucadmin modify -m fc | cna-t initiator | target_adapter_name_`</block>
  <block id="c5fabf666636164983c54a60426edaab" category="cell">「network fcp adapter modify -node node_name --adapter_adapter_adapter_adapter_name_-state up」の形式で指定します</block>
  <block id="cde8cf801e542566f503970c16a89b61" category="admonition">event log showコマンドを実行すると'発生したエラーが表示されます</block>
  <block id="7a4b65a92ad0461916e64e86d4469810" category="paragraph">storage aggregate online -aggregate _aggr_name_`</block>
  <block id="ffd863d528f6b76a6f398dd53b185d1d" category="cell">`disk reassign -s `_node2 _sysid_-d _node4 _sysid_-p _node3 _sysid_`</block>
  <block id="9666e158b6e459758482181fdc5caf71" category="cell">disk disk reassign -s `_node2 _sysid_-d_node4 _sysid_`</block>
  <block id="ff573218a71a52e566a9d2cb9c112902" category="paragraph">disk reassignコマンドは'_node2 _sysid_'が現在の所有者であるディスクだけを再割り当てします</block>
  <block id="bfb9fe88864aa2cf3d9decbdba2d491d" category="paragraph">「aggr_online root_aggr_from__」に設定します</block>
  <block id="f5ff2bb513b480c8df7df73e2a7eca20" category="paragraph">'aggr offline_root_aggr_on_node4</block>
  <block id="4daae5d3b652a659ddd315488acd4db5" category="paragraph">'aggr options aggr_from__ node2 _root</block>
  <block id="7e99838c157f551e95b6714e703a5a83" category="paragraph">setsetenv partner-sysid_node3 _sysid_`</block>
  <block id="5d5ae887eff3d0bec6fe996459e81e1e" category="paragraph">snapmirror resume -destination–vserver_vserver_name _`</block>
  <block id="dfb0fec494a077d511e1162b3cb00bc8" category="paragraph">storage aggregate show -nodes_node_name -is-home false -fields owner-name、home-name、stateを指定します</block>
  <block id="669f87e406c8fda6424e840528d9149d" category="paragraph">storage failover giveback -ofnode home_node_name</block>
  <block id="b4fc8c3d263dd54ba941fc9d14834417" category="paragraph">system node image show -node-node1、node2 _-iscurrent true’</block>
  <block id="9d2de80efb63f5a2a1ee2eae629624ca" category="paragraph">network interface show -role data -is-home false -curr-node node_name _`</block>
  <block id="638610cc5c3557800c38be4545f5cf40" category="paragraph">storage disk show -nodelist_node1、node2 _-broken</block>
  <block id="32f6df046e4deff82e2d7aa91a76c76e" category="paragraph">system node show -node-node1、node2 _-instanceです</block>
  <block id="ea4cc24170a5a77d1d67cb6220f7045e" category="paragraph">'run-node_node_name sysconfig '</block>
  <block id="994ba4a0a4ce4a1b887a79e4724bef6f" category="paragraph">storage aggregate show -node _node_name --state online `</block>
  <block id="37a55a1a98dde4ca242768a7fbfe2539" category="paragraph">volume show -node node_name --state offline`</block>
  <block id="5db342f1f11964db01d0add232583ab3" category="paragraph">「network interface show -vserver _vserver_name --data-protocol iscsi | fcp」というメッセージが表示されます</block>
  <block id="2b761add74f58324b7892942bca4c01b" category="paragraph">network interface show -data-protocol iscsi|fcp-home-node_node_name _</block>
  <block id="17c13101a210d511ce2fcf1ccdcc7228" category="paragraph">system node AutoSupport show -node-node1、node2 _</block>
  <block id="34332c29c1cafae97c37db8d877845e8" category="paragraph">'system node AutoSupport show -node1_-instance `</block>
  <block id="5d7916d552fc8524067145caf231984c" category="paragraph">「security key-manager -add_key_manager_server_ip_address_`」</block>
  <block id="b2aee17ce5d9304ab1d7b938a9523e20" category="paragraph">security key-manager setup -node _new_controller_name_`</block>
  <block id="5a3b061e7aa6b6aae0ff5fce9f756296" category="paragraph">security key-manager restore -node _new_controller_name_`</block>
  <block id="1d828f70faadc8e1765bcc76134f1d56" category="admonition">ステータスが「Transferring」の場合は、転送を中止する必要があります。snapmirror abort -destination-pathは、vserver_vserver name_`です</block>
  <block id="06bd9faff44374f31ab818fd79f630b5" category="paragraph">storage failover modify -node _node1_-enabled false</block>
  <block id="90e4b9752d25c3700871768181632589" category="cell">ストレージ・フェイルオーバーを無効にします：storage failover modify -node _node1 _-enabled false</block>
  <block id="c474d50b811406147962f1e8ce7e2359" category="paragraph">network interface show -role data -curr-node 2_node2 -home-node1_home_`</block>
  <block id="f113db381dfe30746dd9d1880bb9c423" category="paragraph">cluster modify -node1_-epsilon false</block>
  <block id="06c8bee57dd2167bbb1dbfa5749c956a" category="paragraph">cluster modify -node _node2 _-epsilon true</block>
  <block id="0814e17724c439ef0cd37ea13167d663" category="paragraph">system node halt -node _node1_`</block>
  <block id="15a27fbf1719df235581c1df85f4770c" category="paragraph">'network interface show -curr-node 4：</block>
  <block id="bb445430e4b0638bdd79f943cd99a597" category="paragraph">system service-processor network modify -node _node_name _`</block>
  <block id="676d4cfadd30ded5fabdceb082fde10a" category="paragraph">network interface show -curr-node node1 __ role cluster、intercluster、node-mgmt、cluster-mgmt-mgmt</block>
  <block id="bbbfa87c5efa2321ddc7c2656baf791f" category="paragraph">'network port show -node1_-type physical’</block>
  <block id="842f84c9ecff4442b192c3b8a383847f" category="paragraph">network fcp adapter show -node-node1_`</block>
  <block id="f9e6ffe449370be951e5dee9a5e83028" category="paragraph">system node show -instance -node _node1_`</block>
  <block id="3145572f78011e126938a030752352da" category="paragraph">storage aggregate relocation start -node1_-destination_node2 _-aggregate-list *-nd-controller-upgrade true」を入力します</block>
  <block id="89f25b06955b673d3b572700377e5520" category="paragraph">storage aggregate relocation show -Node_node1_`</block>
  <block id="1f57e30e6554ed05fdfab4749db897a5" category="list-text">障害が発生したアグリゲートまたは拒否したアグリゲートを再配置します。storage aggregate relocation start -node1_destination_node2 _aggregate-list *-nd-controller-upgrade true</block>
  <block id="d5b3493a1e44c8ea79c837adaccb28d1" category="paragraph">storage aggregate show -node _node2 --state online -root false</block>
  <block id="34d826617b3f9c48944868362f6f276b" category="paragraph">volume show -node-node2 --状態オフライン</block>
  <block id="8d4bf0d9ef542445c79e09c181428349" category="paragraph">'volume online -vserver_name_-volume_volume-name _`</block>
  <block id="19e22a7c92ef31b57af4f64fb0bfb81f" category="paragraph">storage failover show -node _node2 _</block>
  <block id="5a0e98b3df520c8355313fe7af25f5a2" category="paragraph">「storage aggregate show-owner-name_node1_-ha -policy sfo-state online」のように表示されます</block>
  <block id="0be631e7cb236bcc0d7edcbe5a37c28a" category="paragraph">cluster modify -node-node2 -- epsilon false</block>
  <block id="1c2cf95d552fefa09207d46a804cc37f" category="paragraph">cluster modify -node _node3 _-epsilon true</block>
  <block id="90e94ee328a256af2f91a786e9cd354d" category="list-text">どちらかのコントローラで次のコマンドを入力してnode2を停止します。system node halt -node _node2 _`</block>
  <block id="b631c0c901a5596701350144caa12f5d" category="paragraph">storage aggregate show-owner-name_node3_-home-id_node2 _system_id_`</block>
  <block id="0b3ef2eb165b59b12784f339acafdc5a" category="paragraph">「storage aggregate relocation start -node3_node3_destination-node4」-aggregate-list_aggr_name1、aggr_name2..._nd-controller-upgrade true」のように指定します</block>
  <block id="61a053082ff5a1f44a15349efe3f76f8" category="paragraph">storage aggregate relocation show -node_node3_`</block>
  <block id="630cef995c8ca03cb9edd3eb475f7957" category="paragraph">「storage aggregate relocation start -node3_destination_node4」-aggregate-list_aggr_name1、aggr_name2..._nd-controller-upgrade true」のように指定します</block>
  <block id="a1f08a38eee78d50ba988aeb73b842bd" category="paragraph">storage aggregate show -node _node4 --state offline-root false</block>
  <block id="1faa76a43456724df1defa42aa55d352" category="paragraph">volume show -node-node4 --state offline`</block>
  <block id="53d8c0b5e2bdeb9e6aa3dca886003ef4" category="paragraph">'volume online -vserver_name_-volume_name_`</block>
  <block id="9ffb02c2d62ae9052f6119c3fb4c5905" category="paragraph">system node AutoSupport invoke -node _node4に-type all -message "_node2 _successfully upgraded from _platform_old_to _platform_new_"</block>
  <block id="f73357d357bf9a8fd6687b23bddfa84e" category="paragraph">「network interface migrate -vserver vserver_name -lif_lif_name_destination-node node4–destination-port_netport | ifgrp_`</block>
  <block id="bd210634c9483e180212de732ad175ce" category="paragraph">`network interface modify -vserver _vserver_name --lif_datalif_name __-home-node node4 home-port_netport | ifgrp_`</block>
  <block id="5ad0cc882422029afe6ed707f07f5f99" category="paragraph">「network interface migrate -vserver_name_-lif_datalif_name __ destination-node node4–destination-port_netport | ifgrp_`</block>
  <block id="d163a832f080399ac8eefd110915b0b1" category="paragraph">「network interface modify -vserver _vserver_name --lif_datalif_name __-home-node _node4 _home-port_netport | ifgrp_`」</block>
  <block id="d05db157629156f23e4330fb5d951e6a" category="paragraph">「network port broadcast-domain add -ports -ipspace_name_-broadcast-domain mgmt ports_node：port_`</block>
  <block id="86c0cbc4e4bb34cfbadf192d93966920" category="paragraph">「network interface migrate -vserver_name-lif_datalif -name_destination-node-node4 __ destination-port_netport | ifgrp-home-node-node4</block>
  <block id="42cd5180b669552e2933f20b93b9c540" category="paragraph">「network interface modify -vserver _vserver_name __ lif_datalif_name __-home-node port_netport | ifgrp_`」のようになります</block>
  <block id="b7fda8f488be542ba6b3bf54cbcb8481" category="paragraph">'network port delete -node_node_name -- port_port_port_name_`</block>
  <block id="2a339eca27ecf5c35182b21c82475859" category="paragraph">「network interface modify -vserver _vserver_name __-lif lif_name --status-admin down」を参照してください</block>
  <block id="ba38f10031b9749e24abefe1294e5f93" category="paragraph">「network interface modify -lif LIF_name -home-node _new_home_port_`</block>
  <block id="15fcc24eabcc47d2f5b79bc2261b8110" category="paragraph">「network interface modify｛-home-node port_port_on_node2 _-home-node2_-role data｝-home-node _new_home_port_on_node4」となります</block>
  <block id="c1c9b0d9090db8cae48ec760d0c84f93" category="paragraph">「network interface modify -vserver _vserver_name __ home-port_name_-home-node _node4 _lif_lif_name__-status-admin up</block>
  <block id="a6bb74b8cb99c1fd80b2a0b3edca08ab" category="paragraph">'network interface show -home-node _node4 --role data</block>
  <block id="a6b1f2029f11e41153d55cdc64d6c2c8" category="paragraph">「network interface modify -vserver vserver_name __-lif LIF_name -status-admin up</block>
  <block id="010ba24159202b1bac2cd77c8ec1ea80" category="paragraph">「MetroCluster vserver resync -vserver _vserver_name _fcp-mc.headupgrade.test.vs`</block>
  <block id="c657c3ae0ae199bbaa1464608a597ac0" category="paragraph">network interface show -curr-node node_name --ロールクラスタ、intercluster、nodemmgmt、cluster-mgmt</block>
  <block id="8da2128a6a3986a34895cf5980d84c14" category="paragraph">'network port show -node node_name -- type physical `+</block>
  <block id="4a5a2274e34e5f3b4d5e81db4588e4a3" category="paragraph">`_node_nameは'移行するノードです</block>
  <block id="f690de2de43fbb352bc35dd6139ef16c" category="paragraph">'system node run -node _node_name _`</block>
  <block id="da78ff3fafe58b094ac314c530751191" category="paragraph">「network interface migrate -vserver_name_-lif_lif_name_source -node node2 -destination-node node2 -destination-port_port_name_`</block>
  <block id="cdeebdd64f0b63241167868623f4268a" category="paragraph">「network port broadcast-domain remove-ports -ipspace Cluster -broadcast-domain Cluster -ports_node2：port_`」を実行します</block>
  <block id="8937dc1ce0609b75887630fff796c928" category="paragraph">ifgrp add-port -node node_name -ifgrp_ifgrp_port_port_port_port_port_name_`です</block>
  <block id="a369bef1d46b9a6e88dcba9542634b92" category="paragraph">ifgrp remove-port -node node_name -ifgrp_ifgrp_port_-port_port_port_name_`です</block>
  <block id="ca82a3bd7f422a7589fd8832d8febeaf" category="paragraph">「network interface show -vserver _vserver_name --status-oper down」を参照してください</block>
  <block id="b1436ca8cfc53be5e82377a9cb594083" category="paragraph">「network interface modify -vserver _vserver_name __ lif_lif_name_-home-port_`</block>
  <block id="9d12ffe6a303afa0a5376899a808a262" category="paragraph">「network interface show -data-protocol nfs|cifs -home-node _node2 _」を参照してください</block>
  <block id="bc2267ec9c24ec21874bf4cc796b816e" category="paragraph">「network interface migrate -vserver _Vserver_name -lif_lif_name_-destination -node _node3 _–destination-port_netport | ifgrp_`」の形式で指定します</block>
  <block id="55053aade5fca25fd593fd8d5252e09c" category="paragraph">「network interface modify -vserver _Vserver_name -lif_lif_name_-home-node3_-homeport_netport | ifgrp_`」</block>
  <block id="ae71079411dc4dfde6976b335cb42335" category="paragraph">「network interface migrate -vserver _Vserver_name -lif_lif_name_-destination -node _node3 __ destination-port_netport | ifgrp_`」の形式で指定します</block>
  <block id="1fe218a8b1c9d824835cd743ae0651c3" category="paragraph">'network interface show -curr-node node3：-data-protocol CIFS|NFS</block>
  <block id="2cea3f134cf76cc3abaaa88a2b402e1f" category="paragraph">「network interface modify -vserver _Vserver_name --lif_lif_name_-status-admin up」という名前になります</block>
  <block id="a6823219661708acd40fb583c228ab5b" category="paragraph">「network port vlan delete -node node_name」-port_ifgrp -- vlan-id_vlan_ID_`</block>
  <block id="cc917e86986e970492f7be45fdc7b952" category="paragraph">「network port ifgrp show -node node_name」-ifgrp _ifgrp_name __ instance</block>
  <block id="8909b365f802b24a2d37f4d90ed96920" category="paragraph">「network port ifgrp remove-port -node_node_name」-ifgrp_ifgrp_name -port_port_name_`」という形式で指定します</block>
  <block id="173bdd18bf4da14689baa4b97bbd0911" category="paragraph">ucadmin modify -m fc -t target_adapter_`</block>
  <block id="e963df8c33a142fa50363ce5f3bbcbb9" category="paragraph">ucadmin modify -m fc -t initiator_adapter_`</block>
  <block id="2d5c970ee87c5df0e21b3a8b9ed88ccb" category="paragraph">「security key-manager external add-servers -key-servers_key_manager_server_ip_address _」のように指定します</block>
  <block id="cf1e3ade592584c451b16fefa9ffaf61" category="paragraph">「storage failover show -fields local-missing-disks、partner-missing-disks」</block>
  <block id="0a06fcfc5f0fe34a7f9397c4cfc05b2a" category="paragraph">`set diag; systemshell -node-node_name --コマンドsudo kenv -u -p kmip.init.maxwait`</block>
  <block id="3bc434e6b7496efb94a7be3c795bee4a" category="paragraph">storage aggregate relocation start -node-source_node__ destination_destination-node-aggregate-list *</block>
  <block id="8723a951ee1fe15da772afbecba7e9cc" category="paragraph">'system controller replace start-nodes_node_name _`</block>
  <block id="bf0cc0f414d71ae261bebb6ad521c510" category="list-text">ノード 1 がブートすると、ノード 1 のルート以外のすべてのアグリゲートがノード 1 に戻されます。アグリゲートの手動での再配置を、node1からnode2に実行する必要があります。storage aggregate relocation start -node node1 -destination node2 -aggregate-list *-ndocontroller -upgrade true</block>
  <block id="63f803a39905918dce04f857b0dfb805" category="paragraph">'security key-manager external restore -node _new_controller_name_`</block>
  <block id="b23b4170fdfdcbdd9354becf14343de7" category="paragraph">ucadmin modify -m fc -t initiator -f adapter name_`</block>
  <block id="a87ed5e329e9adfa32bf73a93bebebf8" category="paragraph">「aggr_online root_aggr_from__」を参照してください</block>
  <block id="cfbaacc1ba42cda8c375335500d01240" category="paragraph">「aggr offline_root_aggr_on_node3」を参照してください</block>
  <block id="70ff478dea6e58f0f7e39efc7c26f752" category="paragraph">'aggr options aggr_from__ node1 __ root</block>
  <block id="d62c51936f24f85c8256879ccf0c03f5" category="cell">'security key-manager setup -node _node_name _`</block>
  <block id="3b1dc35737c41d4b6fd987e950141db7" category="paragraph">このステータスが「Transferring」の場合は、転送を中止する必要があります。snapmirror abort -destination -vserver _vserver_name _`</block>
  <block id="41f0f9b1ee99b9ecde96064b40d13bb1" category="paragraph">「network interface migrate -vserver Cluster -lif LIF_name -source-node node3 -destination -node node3 -destination-port_port_name_`」を実行します</block>
  <block id="492be52c34773a3310eeeaae121d01cf" category="paragraph">「network port broadcast-domain add-ports -ipspace Cluster -broadcast-domain Cluster -port node：port」のようになります</block>
  <block id="5ec824db325209d322c6c40d3388ca3f" category="list-text">LIFのホームポートを変更します。「network interface modify -vserver vserver_name -home-port_name_–home_port_port_name_`必要に応じて、クラスタ間ブロードキャストドメインを調整してインタークラスタLIFを移行します。データ LIF は変更されません。</block>
  <block id="93669c55bf12d9aa964a6f157f0e0a45" category="paragraph">「network port show -node _-port_port_-fields broadcast-domain」を指定します</block>
  <block id="4fb38c7b471866eeea983bc8648d4868" category="paragraph">'broadcast-domain add-ports -ipspace Cluster-broadcast-domain Cluster-ports_node: port_`</block>
  <block id="270c9c0b120fb7418b1df6e278abbe78" category="paragraph">「network interface migrate -vserver Cluster -lif LIF_name -source-node _node3_node3_destination-node-node3 _ destination-port_port_name_`</block>
  <block id="351baa830dcdfc937a395d1a88be127c" category="paragraph">「network interface modify -vserver vserver-lif lif_name _–home-port_port_name_`」になります</block>
  <block id="a7d542688e255a907ca072d075b870bb" category="paragraph">「network interface migrate -vserver Cluster -lif LIF_name -source-node node3 destination-node node3 -destination-port_name_`</block>
  <block id="7aa0d5212b8f94602054950124e5427d" category="paragraph">「network interface modify -vserver vserver_name -lif_lif_name_–home-port_port_name_`</block>
  <block id="f70ecc5a0f4701f9f62fcd3e0a7ecee8" category="paragraph">「network port vlan create -node_node4」-vlan_vlan-names_</block>
  <block id="957ef9e5e93b1b4ab14a06ef6a857f43" category="paragraph">「network port ifgrp create -node _node4」-ifgrp_port_ifgrp_name -distr-func</block>
  <block id="d1d818ce8442975a7100e165e1af4ea6" category="paragraph">「network port broadcast-domain create -ipspace Default -broadcast-domain _broadcast_domain_names _-mtu_mtu_size_-ports_node_name：port_name、node_name：port_name、node_name：port_name</block>
  <block id="c477da37744df78aa79c382b8da95f88" category="paragraph">「network port broadcast-domain add-ports -broadcast-domain broadcast_domain_names」-ports_node_name：port_name、node_name：port_name、node_name：port_name</block>
  <block id="bb5832fe766e996d6a388078ef1764f0" category="list-text">storage array config show -switch_switch_name_`</block>
  <block id="11f09c937d4460ab0e473a33da9b1ab8" category="paragraph">network interface show -curr-node _node2 -role data</block>
  <block id="5dad8f32e66b8ee8eadc502efd8b13f1" category="paragraph">「network port ifgrp show -node _node2」-ifgrp _ifgrp_nameのように表示されます</block>
  <block id="9b7d57d0483912f37373984d2377cd38" category="paragraph">「network interface modify -vserver _vserver_name __ lif_lif_name_-home-nodename_-status-admin up</block>
  <block id="be169d5dec3b5782fc54ffe06db0f01d" category="paragraph">'network interface show -data-protocol _iscsi|fcp_-home-node _node3 _`</block>
  <block id="de16a1a2e971f09625e82410defe17a1" category="paragraph">「network interface modify -vserver _Vserver_name --lif_lif_name_-status-admin down」を指定します</block>
  <block id="a9989d8f1e7708f962bd9c5097c0053a" category="paragraph">`portset remove -vserver _Vserver_name -portset_portset_name__-port-name _port_name_`</block>
  <block id="a66e985d23f5287107e99383fdd5ffef" category="paragraph">「network interface modify -vserver _Vserver_name -lif_lif_name_-home-port_`</block>
  <block id="f31b52f0e37db7da57ff6ab88235e135" category="paragraph">`portset add -vserver _Vserver_name -portset_portset_name__-port-name _port_name_`</block>
  <block id="d68390426f58044ac5eb930d307ab3b5" category="paragraph">'network interface modify -home-node port_name_--home-node3_lif data-status admin up</block>
  <block id="ccf444ace4cdb74118c18eb6b97b7b09" category="paragraph">'network interface show -data-protocol iscsi|fcp-home-node-node4 _`</block>
  <block id="6a37e8a9d9359e09d770a057684a12d6" category="paragraph">「network interface modify -vserver _vserver_name __ lif_lif_name_-home-port_'」を指定します</block>
  <block id="97ef93c03531a15f7fcd1160b624a003" category="paragraph">「network interface modify -home-node port_port_name_-home-node4_-lif data-statusadmin up」のようになります</block>
  <block id="a46e58126262d4f20f687f4b6340fa04" category="paragraph">'network port vlan create -node_node_name -- vlan_vlan-names_</block>
  <block id="c85350c19aef1d2e9ef16125725cfbff" category="paragraph">「network port ifgrp create -node _node_name」-ifgrp _port_ifgrp_names_-distr-func」という形式で指定します</block>
  <block id="6ffba319a9343d4d7079cd092fc1731f" category="paragraph">「network interface migrate -vserver Cluster -lif LIF_name -source-node node4 destination -node node4 -destination-port_name_`</block>
  <block id="6f6feb1d5079ae856c3e038f36cf5511" category="paragraph">「network interface modify -vserver _vserver_-lif lif_name _–home-port_port_name_`」です</block>
  <block id="714116d25588d456eb2625b3a4e3438f" category="paragraph">storage aggregate relocation start -Node_node1_-destination_node2 _aggregate-list *-ndocontroller -upgrade true</block>
  <block id="d87163e47ee27f2782fe148edbe3ed57" category="paragraph">'network port reachability repair-Node_node_name -- port_port_port_name_`</block>
  <block id="ec14d769131d094d612c9fca445d8baa" category="paragraph">「変位インターフェイスのリストア-home-node-node-node_node_name _- vserver_vserver_name _-lif - name_lif_name_name_」のように指定します</block>
  <block id="5062794872bed9f85f36826d260cf264" category="paragraph">「network interface modify -vserver _vserver_name __ lif_lif_name_-home-nodename_-status-admin up</block>
  <block id="f198332498f4eb50e868251db60468b3" category="paragraph">storage aggregate show -nodes_node2 __-is-home true</block>
  <block id="bcc294d7e5b811c580b0a91d09164b49" category="paragraph">storage aggregate relocation start -node2_-aggr_aggr_node_A_1 -destination_node1_`</block>
  <block id="6ae24b2060eb78a800c8051168b74065" category="paragraph">setENV partner-sysid_node1_sysid_`</block>
  <block id="717690eebe56c458e0ffa4bc5f0d6525" category="paragraph">「network interface modify -vserver _vserver_name __ lif_lif_name_-home-nodename_-status-admin up</block>
  <block id="e31eb1c2cddca02e41412f1b6cd2b302" category="list-text">アップグレードしたnode1は、最初にnode1に属していたアグリゲートのホーム所有者および現在の所有者です。</block>
  <block id="c33c724b237783259e8e28cbab49ca90" category="paragraph">「network port show -node node_name --port_port-name_-fields broadcast-domain」</block>
  <block id="d27b633eba5532d4e3b0153c7e8ba81f" category="paragraph">「network port modify -node _node-name __ port_port_name_-ipspace Cluster -mtu 9000」の形式で指定します</block>
  <block id="a385fc25835bc7fdf106d1ea876c6df0" category="paragraph">「MetroCluster vserver resync -vserver _Vserver -name _」と入力します</block>
  <block id="09ddf190b383bfb8830070907f2476f1" category="paragraph">network interface migrate -vserver Cluster -lif LIF_name -source-node _node3_node3_destination-node-port_node3 -destination-port_port-name_`</block>
  <block id="b875887df773ea6f3f2eb58591c975a5" category="paragraph">network interface modify -vserver Cluster -lif LIF_name–home-port_port_port_name_`</block>
  <block id="d60435ea15cee212cf292da0bab5ff8f" category="paragraph">「network port broadcast-domain add-ports -ipspace Cluster -broadcast-domain Cluster -ports_node：port_`」というメッセージが表示されます</block>
  <block id="8784faee47bd495a25ae3219b33adf97" category="paragraph">cluster show -node _node3 --フィールドの健常性</block>
  <block id="6bfb8260edeb4281c26daf1a0f636bed" category="paragraph">network interface show -fields home_node、home-port_`</block>
  <block id="a2e106f5c4b014a30111356ef51939a2" category="paragraph">「network interface modify -vserver _Vserver -name _-lif_lif-name_–home-port_port-name_`」です</block>
  <block id="7109eede0c0d8b22c0220308a42f8f33" category="paragraph">'network port delete -node-node-name-'port_port-name_`</block>
  <block id="4661aca5a4351bd06a379b8a8c19a0a0" category="paragraph">network interface modify -failover-group_failover-group__-failover-policy _failover_policy_`</block>
  <block id="e5b7dcb57038c5c031b59bd236bd41c1" category="paragraph">「network port broadcast-domain remove-ports -ipspace default-broadcast-domain default-ports_node: port_`」というメッセージが表示されます</block>
  <block id="4c5e40a0d73ba8acb1095dbb78d6ead8" category="paragraph">「network port vlan delete -node _nodename」-port_ifgrp_-vlan-id_vlan_ID_`</block>
  <block id="74d77a3dc1a9f3976cd4b66d0045da79" category="paragraph">「network port show -node _-port_port_-fields broadcast-domain」次の例は、ノード4のクラスタドメインにポート「e0a」があることを示しています。</block>
  <block id="033a0895524acbe467659a15ba065ebc" category="paragraph">「MetroCluster vserver resync -vserver _vserver_name _」のようになります</block>
  <block id="eb501d5e939bfe542e8831a0cddd0387" category="paragraph">「network interface migrate -vserver Cluster -lif LIF_name -source-node node4 -destination-node node4 -destination-port_port_name_`」を実行します</block>
  <block id="bbda3f92dd82ccfb448ae4052e43524e" category="list-text">すべてのLIFフェイルオーバーグループを調整します。「network interface modify -failover-group _failover_group __-failover-policy _failover_policy_</block>
  <block id="231ba3135a6e31caf6b3923af4c55beb" category="paragraph">network interface show -curr-node node3 _`</block>
  <block id="07493a0fc8c0732e892bde4e2a915195" category="paragraph">「 storage aggregate relocation start 」、「 override-vetoes 」、および「 override-vetoes destination-checks 」オプションの詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ONTAP 9.8 コマンド：マニュアルページリファレンスにリンクするには、次の手順を実行します。</block>
  <block id="d54e143bd4cd39e7a6a6ee443fa760e8" category="paragraph">'system controller replace start-nodes _node_name --nso false</block>
  <block id="26d089c59661373f7adc82d935ee66ec" category="paragraph">「network port broadcast-domain remove-ports -broadcast-domain broadcast_domain_name」-ports_node_name -ports_node_name：port_name」</block>
  <block id="c32905979b8d558b27cabd72b7947590" category="paragraph">「network port ifgrp add -port -node node_name」-ifgrp_-port_port_port_name_`</block>
  <block id="1373295f01b75104fa472c0bcef10ac5" category="paragraph">「network port reachability show -node node_name --port_ifgrp_`」という形式で表示されます</block>
  <block id="e939420012f5682ed53e7ba265ab8761" category="paragraph">「network port broadcast-domain add-ports -broadcast-domain broadcast_domain_name」-ports_node：port_</block>
  <block id="9ed44776df842430b8a272b3696da823" category="paragraph">'network port reachability repair-Node_node_name -- port_port_port_name_`</block>
  <block id="206a6f7ae44faef6e8990b491b81f8b5" category="paragraph">network interface show -fields home-port、status-admin</block>
  <block id="5bc4edc88ab231e79ed2439d2aef1b01" category="paragraph">「network port broadcast-domain remove-ports -broadcast-domain broadcast_domain_name」-ports_node_name -ports_node_name：port_name</block>
  <block id="e9e5c266020024c12c708f4f29a26d58" category="paragraph">「cluster controller -replacement network変位- VLANs show」と表示されます</block>
  <block id="92d0b584c5f6f73a0c9afe87331eabdb" category="paragraph">クラスタ・コントローラ交換ネットワークが取り外されましたVLANがリストアされました</block>
  <block id="9446cb9af5659fef22d79389076fd8e8" category="list-text">必要に応じて'クラスタコントローラ交換ネットワークではないVLANポート用に新しいVLANポートを作成しますが'VLANは出力を示しますが'他の物理ポート上で構成する必要があります</block>
  <block id="9d27816aaf2ba7a2b350d04b6445a0ca" category="paragraph">「cluster controller -replacement network変位-interface restore-home-node-node_node_name _-vserver_vserver_name _-lif - name_lif_name_`</block>
  <block id="e2cfe3f2f5162bd48bbb5fff263ee435" category="sidebar">ステージ 1 ：アップグレードの準備（ONTAP 9.8以降での手動アップグレード）</block>
  <block id="9ad50bf57a679f1360d84fb707885cdc" category="sidebar">ステージ 2 ：ノード1の再配置と撤去（ONTAP 9.8以降での手動アップグレード）</block>
  <block id="553bd54dfad85955aae7dae67c2e3916" category="sidebar">ステージ 3 ：node3のインストールとブート（ONTAP 9.8以降での手動アップグレード）</block>
  <block id="a1943099aa30a6c2efd4a579176c2941" category="sidebar">ステージ 4 ：情報を記録してnode2を撤去（ONTAP 9.8以降での手動アップグレード）</block>
  <block id="48839137eaf0562b138582edd90137cb" category="sidebar">ステージ 5 ：ノード4のインストールとブート（ONTAP 9.8以降での手動アップグレード）</block>
  <block id="dae43a2f9b6862b045e06fc8e8a1f0fa" category="sidebar">ステージ 6 ：アップグレードの完了（ONTAP 9.8以降での手動アップグレード）</block>
  <block id="5c57d2af87e466b26b2b4fc39ddb3528" category="sidebar">トラブルシューティング（ONTAP 9.8以降での手動アップグレード）</block>
  <block id="74e4fa274dfb12601061dfed2bb17551" category="sidebar">ステージ 1 ：アップグレードの準備（ONTAP 9.5から9.7への「システムコントローラの交換」でアップグレード）</block>
  <block id="643d5d93057442ceeb2535e1257eced5" category="sidebar">ステージ 2 ：node1の再配置とリタイア（ONTAP 9.5から9.7への「システムコントローラの交換」でアップグレード）</block>
  <block id="ada4b764c9c08906945e92eb93540a70" category="sidebar">ステージ 3 ：node3のインストールと起動（ONTAP 9.5から9.7への「system controller replace」にアップグレード）</block>
  <block id="19058e0506f0695149186a942876cf05" category="sidebar">ステージ 5 ：node4のインストールとブート（ONTAP 9.5から9.7への「system controller replace」でアップグレード）</block>
  <block id="a873c3af330abd13d1f0d13b37f0184a" category="sidebar">ステージ 6 ：アップグレードの完了（ONTAP 9.5から9.7への「システムコントローラの交換」でアップグレード）</block>
  <block id="76fc41bc8d83116ac63baddd0b449b53" category="sidebar">トラブルシューティング（ONTAP 9.5を9.7にアップグレードする場合は、「システムコントローラの交換」にアップグレード）</block>
  <block id="118c7af95c723f6e6838692c3038dd9f" category="sidebar">ステージ 1 ：アップグレードを準備（AFF A900またはFAS9500にアップグレード）</block>
  <block id="addaea56fd6a1402dec2fde28d5b8826" category="sidebar">トラブルシューティング（AFF A900またはFAS9500にアップグレード）</block>
  <block id="7927776d5f92bfcf018eb0ab38e8e4f1" category="sidebar">ステージ 1 ：アップグレードを準備（ONTAP 9.7以前での手動アップグレード）</block>
  <block id="45af182181e08da91f7cc5e906088028" category="sidebar">ステージ 2 ：ノード1の再配置と撤去（ONTAP 9.7以前の手動アップグレード）</block>
  <block id="7b13f30f0f73cc51f6107da92706a043" category="sidebar">ステージ 3 ：node3のインストールとブート（ONTAP 9.7以前での手動アップグレード）</block>
  <block id="baeed26cf61fdd410097b62b1422787a" category="sidebar">ステージ 4 ：情報を記録してnode2を撤去（ONTAP 9.7以前での手動アップグレード）</block>
  <block id="df8d8c05fa045b13fa58cf2372ff5463" category="sidebar">ステージ 5 ：node4のインストールとブート（ONTAP 9.7以前での手動アップグレード）</block>
  <block id="3d0f7ed3e1c463b0750672ca18860a0f" category="sidebar">ステージ 6 ：アップグレードの完了（ONTAP 9.7以前での手動アップグレード）</block>
  <block id="e910f157098af665af7183c621e0e16e" category="sidebar">トラブルシューティング（ONTAP 9.7以前での手動アップグレード）</block>
  <block id="4ca1dd66d65d9f1294c45c6d431d28f1" category="sidebar">ステージ 1 ：アップグレードの準備（ONTAP 9.8以降では「システムコントローラの交換」でアップグレード）</block>
  <block id="ffe0419692cf91535dfc65f2ebc6be8c" category="sidebar">ステージ 2 ：ノード1の移動と撤去（ONTAP 9.8以降では「システムコントローラの交換」にアップグレード）</block>
  <block id="24b8375b0f225570ea07ebeb314eb9c8" category="sidebar">ステージ 3 ：node3のインストールと起動（ONTAP 9.8以降では「システムコントローラの交換」にアップグレード）</block>
  <block id="c7f6c7edba62aeb0070664af2982188f" category="sidebar">ステージ 5 ：ノード4をインストールしてブートします（ONTAP 9.8以降では「システムコントローラの交換」にアップグレードしてください）。</block>
  <block id="a7bb4f4bc15b3845dcbe4dd85398882a" category="sidebar">ステージ 6 ：アップグレードの完了（ONTAP 9.8以降では「システムコントローラの交換」でアップグレード）</block>
  <block id="ad783963276a8d71cfdce2a0884ea6fe" category="sidebar">トラブルシューティング（ONTAP 9.8以降の「システムコントローラの交換」にアップグレード）</block>
  <block id="9513edce58e5f4ee5ec2d01f6e5957ea" category="paragraph">'system node AutoSupport invoke -node * -type all -message MAINT=_maintenance-window-in-hours_`</block>
  <block id="8ae18c4ca2d925d74bcd4990d28f04f0" category="paragraph">このコマンドで使用する'_vserver-name_'は'前のvolume showコマンドの出力にあります</block>
  <block id="deb8c459cd0f080a7a777d2ba3e57215" category="sidebar">ステージ 4 ：node2の移動と撤去（ONTAP 9.8以降では「システムコントローラの交換」にアップグレード）</block>
  <block id="d0a53cd31cb7e1982b0b4b4350530c07" category="sidebar">ステージ 4 ：node2の再配置と撤去（ONTAP 9.5から9.7への「システムコントローラの交換」にアップグレード）</block>
  <block id="2052b0cdd036221aef35041d554abfe3" category="example-title">コンソールの出力例を展開します</block>
  <block id="9bcbfad54c93824c94a6b85331bed53e" category="list-text">ONTAP 9.6以降では、この 手順 環境 システムで4ノードMetroCluster 構成以上を実行しています。MetroCluster 構成サイトは物理的に異なる場所に設置できるため、 HA ペアの場合は各 MetroCluster サイトでコントローラの自動アップグレードを個別に実行する必要があります。</block>
  <block id="b4e995bdd78b40e4a973dab2bcf9ed16" category="list-text">[man_map_1_step5] ONTAP 9.8以降手順 、ONTAP では、ネットワークポートの到達可能性の修復時にブロードキャストドメイン間でポートが移動された場合に、LIFのホームポートが自動的に変更されます。LIF のホームポートが別のノードに移動された場合や割り当てが解除された場合、その LIF は移動された LIF として表示されます。ホームポートがなくなった、または別のノードに再配置された、取り外した LIF のホームポートをリストアします。</block>
  <block id="17c47d164b7fe13ac454c776902ff45f" category="list-text">[man_map_2_Step5] ONTAP 9.8以降手順 では、ネットワークポートの到達可能性が修復されたときにブロードキャストドメイン間でポートが移動された場合、ONTAP によってLIFのホームポートが自動的に変更されます。LIF のホームポートが別のノードに移動された場合や割り当てが解除された場合、その LIF は移動された LIF として表示されます。ホームポートがなくなった、または別のノードに再配置された、取り外した LIF のホームポートをリストアします。</block>
  <block id="ee4259e7fa1dc73036cc58b6216ac26d" category="list-text">[[assign_LIFs ]] FAS8300、AFF A400、FAS8700システムなど、特定のシステム ポート「e0a」と「e0b」をハイアベイラビリティ（HA）インターコネクトポートとして使用します。FAS8200やAFF A300などのシステムから、ポート「e0a」と「e0b」をHAインターコネクトポートとして使用するシステムにアップグレードする場合、 元のシステムのこれらのポートに設定されている管理LIFとクラスタ間LIFを、交換用システムの別のポートに再割り当てする必要があります。</block>
  <block id="bb90459e9b4aa7c112f4569c2ec19b97" category="admonition">交換用システムでポート「e0a」と「e0b」がHAインターコネクトポートとして使用されている場合、これらのポートで設定された管理LIFまたはクラスタ間LIFがあると、HA構成でポート「e0a」と「e0b」を使用して交換用システムがブートできなくなるため、アップグレードが失敗する可能性があります。</block>
  <block id="6e739de8c1925a6779ee076df8d4a525" category="list-text">交換用システムがポート「e0a」と「e0b」をHAポートとして使用しているかどうかを確認します。<block ref="f73c85a53b5d65cc9c35da0b9e0d2f09" category="inline-link-rx"></block></block>
  <block id="894aba2fe8eca246912b5f6b167c23c7" category="list-text">必要に応じて、元のシステムのポート「e0a」と「e0b」に設定されている管理LIFまたはクラスタ間LIFを特定します。</block>
  <block id="2852e76cc043363d809f6bf5b5528cc8" category="paragraph">'network interface show -home-node port_name_`</block>
  <block id="d76cdfb6e1e829cf1a8b29cf0365bb25" category="list-text">必要に応じて、交換用システムでHAポートとして使用していないネットワークポートに、影響を受けた管理LIFまたはクラスタ間LIFを再割り当てします。</block>
  <block id="868d1b2090ba0cdd2fdfac75d3678175" category="paragraph">「network interface modify -vserver _vserver_name __ lif_lif_name_-home-port_port_name_`」を指定します</block>
  <block id="8764c983c6cbb2a9680fb3a948850423" category="paragraph">「network interface revert -vserver _vserver_name -- lif_lif_name_`</block>
  <block id="e413e03d3c6a379c74dbb9834ed46b76" category="paragraph">次の例では、ネットワークポート「e0a」と「e0b」の管理LIFとクラスタ間LIFをネットワークポート「e1a」および「e1b」に再割り当てします。使用するネットワークポートはシステムによって異なるため、ノードによって異なるネットワークポートが使用されている場合があります。</block>
  <block id="82d8cfa6b0eabc1385f0c7a740d05580" category="image-alt">交換用システムのネットワークポートへのLIFの再割り当て</block>
  <block id="c8ff2d709da7bd973a342d6eb7c6952c" category="doc">ONTAP 9.8以降で最終アップグレード手順を実行します</block>
  <block id="be1c64568381eb09df4f452433b584eb" category="doc">ONTAP 9.8以降を使用してネットワークポートをマッピングします</block>
  <block id="7893bfa78df90b820f889d3721889827" category="list-text">[[map_98_7] ONTAP 9.8以降では、ネットワークポートの到達可能性が修復手順 の際にブロードキャストドメイン間でポートが移動されると、ONTAP によってLIFのホームポートが自動的に変更されます。LIF のホームポートが別のノードに移動された場合や割り当てが解除された場合、その LIF は移動された LIF として表示されます。ホームポートがなくなった、または別のノードに再配置された、取り外した LIF のホームポートをリストアします。</block>
  <block id="cef52224881fd5dedd26a040c1359ee9" category="inline-xref-macro">ONTAP 9.8以降で最終アップグレード手順を実行します</block>
  <block id="ef29cfe4123c7b4d36dffdb01aac77fc" category="summary">ONTAP 9.8以降またはONTAP 9.7以前でアップグレードを完了します。</block>
  <block id="7b416fb3b0ecbf485baebef5aa26f421" category="inline-xref-macro">ONTAP 9.8以降でアップグレードを完了します</block>
  <block id="8b793a703e41666db1139bfcac16c982" category="inline-xref-macro">管理LIFまたはクラスタ間LIFを再割り当てしました</block>
  <block id="7389b01d5fe0e17f5523a7fb85295f91" category="inline-link-macro">こちらの技術情報アーティクル</block>
  <block id="2ee5a2dd85f4cccb6dbb3701b2a263ba" category="paragraph">コントローラのアップグレードに失敗し、「rlib_port_ipspace _assign」というエラーメッセージが表示された場合は、交換用システムでHAポートとして使用されている元のシステムのネットワークポートのLIFをリバートして削除する必要があります。詳細については、を参照してください <block ref="48beba1570dcc6cd04554aaa6118327f" category="inline-link-macro-rx"></block>。</block>
  <block id="b20fa92767a639ebf6c7b69aac21e88f" category="list-text">ノードをブートメニューでブートします。</block>
  <block id="c1ff3d9c3e793a92f67d6a17048a954d" category="paragraph">少し待機したあと、交換するノードの名前を入力するように求められます。共有ディスク（Advanced Disk Partitioning（ADP；アドバンストディスクパーティショニング）またはパーティショニングされたディスクとも呼ばれます）がある場合は、HAパートナーのノード名を入力するように求められます。</block>
  <block id="01b22e2b8dff1191395f34f0d45cdd7e" category="paragraph">これらのプロンプトは、コンソールメッセージに埋もれている可能性があります。ノード名を入力しなかった場合や間違った名前を入力した場合は、名前をもう一度入力するように求められます。</block>
  <block id="bca73eff7b855bcc19e7f22f49e2b8a3" category="paragraph">「[localhost:disk.encryptNoSupport:alert]: FIPS認定暗号化ドライブと」、または「[localhost:diskown.errorDuringIO: error]: Error」がディスクエラーで発生した場合は、次の手順を実行します。</block>
  <block id="36c8627224211217ec34fd42fe9d5435" category="list-text">LOADERプロンプトでノードを停止します。</block>
  <block id="5dd3fadb015da65e82238831e11341c9" category="paragraph">次の例を参考にしてください。</block>
  <block id="4e54dc85c62992992a1dbefa82b638aa" category="summary">元のノードがサポート対象のモデルである場合、ストレージを移動してアップグレードする処理中に、ノードの内蔵SATAドライブ、SSD、またはSASドライブを、同じクラスタ内の新しいノードに接続されているドライブシェルフに移動できます。</block>
  <block id="fb4b0cb9efc21f6a0b33d6eb082f6db1" category="list-text">元のノードのSATA、SSD、またはSASドライブキャリアが、新しいドライブシェルフと互換性がある必要があります。</block>
  <block id="3b95007d4159237fc8935f46a265e025" category="list-text">ドライブシェルフには、元のノードのSATA、SSD、またはSASドライブキャリアを収容するための十分な空きベイが必要です。</block>
  <block id="22e05b02f02d6d6148cff29e1b86d6eb" category="sidebar">ONTAP 9.8以降で完了します</block>
  <block id="e48a139c95341faecb199d5908a54e2e" category="paragraph">^4^次の表に、これらのコントローラアップグレードの組み合わせでサポートされる最小ONTAP バージョンとそれ以降のバージョンを示します。</block>
  <block id="b8e707d2be1c734648eb91b029352369" category="cell">9.10.1から9.12.1</block>
  <block id="4f0b48e1f65ca4ae15a6720f28d58824" category="cell">9.10.1P3～9.12.1</block>
  <block id="04d01679d16bbccad3f9da82789a187b" category="paragraph">上記の表にあるアップグレードの組み合わせについては、次の点に注意してください。</block>
  <block id="da74cb1ad73d862a786d9f20938d9c7a" category="list-text">アップグレードするときは、サポートされているONTAP バージョンとパッチレベルで交換用コントローラを取り付ける必要があります。</block>
  <block id="d9e40d62315bfc8bad4f1329f7f9b867" category="paragraph">インストールを実行する際には、次の点に注意する必要があります。</block>
  <block id="342f3ca2519e4e92f56675a89236fce6" category="list-text">スロット6-1および6-2の空のフィラーモジュールをすべて古いNVRAMモジュールから新しいNVRAMモジュールに移動します。</block>
  <block id="bbe48fb854ea022537208eeeff822f91" category="paragraph-title">このタスクについて</block>
  <block id="3468b73fe010ca505a63fcddaa4f3601" category="paragraph-title">この情報で使用される用語</block>
  <block id="e05e5b3ebbe0e2f7ee773e008e2cd7bd" category="cell">次のドライブが使用中の場合</block>
  <block id="9a7a5052834bdcd10b9395aaeaf8d876" category="list-text"><block ref="62a739993e7d046df94dbc6dc7c3f174" prefix="" category="inline-code"></block></block>
  <block id="102a08eb3220b17bfbecbc277298074d" category="cell">ネットアップの非FIPS SED</block>
  <block id="ad55a196e6d3053365555c02e73f7628" category="list-text"><block ref="20ac903c04b877a6840785a4ed61d182" prefix="" category="inline-code"></block></block>
  <block id="aac162ab6399b4219e4bd0e8dc585acb" category="list-text">FIPSドライブは、同じノードまたはHAペアで他のタイプのドライブと混在させることはできません。</block>
  <block id="31309fab75eee69087d335c5909a3146" category="list-text">SEDと非暗号化ドライブを同じノードまたはHAペアで混在させることができます。</block>
  <block id="3fa540556eb3ef2ac147e5b415b17e04" category="admonition">システムに共有ディスク、ハイブリッドアグリゲート、またはその両方がある場合は、適切なを使用する必要があります<block ref="a5160db2f330101874d96e78b0693369" prefix=" " category="inline-code"></block> コマンドを次の表に示します。</block>
  <block id="c73069b3e9a4e8c157316f5a836df89e" category="admonition">ストレージフェイルオーバーを無効にしないと、コントローラのアップグレードに失敗してデータアクセスが中断され、データが失われる可能性があります。</block>
  <block id="e8b7b5e8c418c431f083fc35fbd14230" category="list-text">FIPS認定のNetApp Storage Encryption（NSE）SASドライブまたはNVMeドライブ</block>
  <block id="1ca9a18d1e5d777d127f7999796b5bcd" category="list-text">FIPS非対応の自己暗号化NVMeドライブ（SED）</block>
  <block id="e5cc9e8128ded12160c450314ec277ba" category="inline-link">サポートされている自己暗号化ドライブの詳細を確認できます</block>
  <block id="1bff84f4314291fd02efa6c2f015d30b" category="paragraph"><block ref="0929bcf40cd143b7e05dbdda06c86959" category="inline-link-rx"></block>。</block>
  <block id="9fd2ad6608fb31c52643192f3698b653" category="admonition">他のクラスタまたはHAペアでこの新しいノードを使用したことがある場合は、を実行する必要があります<block ref="b433b76417b4f08166eb90cef3aa2a31" prefix=" " category="inline-code"></block> 次に進む前に、これを行わないと、サービスの停止やデータの損失が発生する可能性があります。交換用コントローラを以前に使用したことがある場合、特にコントローラが ONTAP 7-Mode を実行していた場合は、テクニカルサポートにお問い合わせください。</block>
  <block id="cf43271b9b370c0f4bddf73ec78aa59f" category="inline-link-macro">システムの初期セットアップのためにONTAP をインストールするためにboot_recovery loaderコマンドを使用する方法</block>
  <block id="4afbf28a131dcdda5d774d5742ccdf1e" category="admonition">また、 USB ブートオプションを使用してネットブートを実行することもできます。サポート技術情報の記事を参照してください <block ref="184f8f7294797efad8be0da4fb907563" category="inline-link-macro-rx"></block>。</block>
  <block id="083a0c049526537d6b95a268054814fb" category="list-text">システムにハイブリッドアグリゲートがある。</block>
  <block id="a2b13d30d388148b28bbb1a43f3d2d52" category="paragraph">の内容を展開します<block ref="f466b354adfc3ad817d7c11c037c8797" prefix=" " category="inline-code"></block> ファイルをターゲットディレクトリに移動します。</block>
  <block id="a9a690b194b002aca2d632eee1a1a1f2" category="paragraph"><block ref="1dfb54a15c6859407fd4c2e52579269b" prefix="" category="inline-code"></block></block>
  <block id="2483e54ca623f46ca2ae8747a545115d" category="admonition">Windows で内容を展開する場合は、 7-Zip または WinRAR を使用してネットブートイメージを展開します。</block>
  <block id="6850735b567ffc238538643166a7d89e" category="paragraph">ディレクトリの一覧に、カーネルファイルを含むネットブートフォルダが含まれるようにします。</block>
  <block id="3a1d38fb3626e6c6f9c179d11fad1cdc" category="paragraph"><block ref="fd10345910ec2a124c27471e14c09703" prefix="" category="inline-code"></block></block>
  <block id="647b6fb99516f69a9148d30b911dd4fd" category="cell">ディレクトリの一覧に次のファイルが表示されます。<block ref="f466b354adfc3ad817d7c11c037c8797" prefix=" " category="inline-code"></block>注：の内容を展開する必要はありません<block ref="f466b354adfc3ad817d7c11c037c8797" prefix=" " category="inline-code"></block> ファイル。</block>
  <block id="289138dc47ec0ab93b89cbb18e8d1de4" category="paragraph"><block ref="9cc92842c7e6e65d356004300ce50ecb" prefix="" category="inline-code"></block></block>
  <block id="090f49148634c0de3dbfc9d8f505c5ec" category="summary">ONTAP 9.7以前を実行しているコントローラでARLを手動でアップグレードする場合は、node2のnode1 NASデータLIFをnode2からnode3に移動します。</block>
  <block id="996083c6bbb6dbd6baa714a3a92b8e3d" category="paragraph">ステージ 3 で、ノード 3 をインストールしてブートし、クラスタポートとノード管理ポートをノード 1 からノード 3 にマッピングし、ノード 3 のインストールを確認して、ノード 1 に属するデータ LIF と SAN LIF をノード 2 からノード 3 に移動します。また、すべてのアグリゲートをnode2からnode3に再配置し、node2によって所有されているデータLIFとSAN LIFをnode3に移動します。</block>
  <block id="be8545a85af27afe951a6085f68cae22" category="summary">2ノードクラスタの場合はノード1のNASデータLIFをノード2に、ONTAP 9.7以前を実行しているコントローラでは手動でARLをアップグレードする場合は3つ目のノードに移動します。</block>
  <block id="9341d89128ab2b3446ee084ac02aab48" category="list-text">[man_map_2_step5] クラスタ LIF とノード管理 / クラスタ管理 LIF をホストするブロードキャストドメインを調整します。各ブロードキャストドメインに正しいポートが含まれていることを確認します。ホストしているブロードキャストドメイン間または LIF がホームにあるブロードキャストドメイン間でポートを移動することはできないため、次の手順に示すように、 LIF を移行して変更しなければならない場合があります。</block>
  <block id="b432c4295d2cf5336428870eddf6eba1" category="inline-link-macro">ノード2のルート以外のアグリゲートをノード3からノード4に再配置します</block>
  <block id="5db9a87cb6b738b68a031aa17ff2133b" category="summary">必要に応じて、ONTAP 9.7以前を実行しているコントローラでNVEまたはNAEに新しいコントローラモジュールを手動でアップグレードする際に設定します。</block>
  <block id="3047a8be78424e0d9ab2529c7ce3efb0" category="doc">新しいコントローラモジュールでNetApp VolumeまたはAggregate Encryptionをセットアップします</block>
  <block id="025ad35a81df65ec523de8553d173a8c" category="paragraph">交換したコントローラまたは新しいコントローラのハイアベイラビリティ（HA）パートナーがNetApp Volume Encryption（NVE）またはNetApp Aggregate Encryption（NAE）を使用する場合は、NVEまたはNAE用に新しいコントローラモジュールを設定する必要があります。</block>
  <block id="9ba1e09b1ddccd53d79db29e9f36df42" category="admonition">この手順 では、NetApp Storage Encryption（NSE）、NetApp Volume Encryption（NVE）、およびNetApp Aggregate Encryption（NAE）を使用できます。</block>
  <block id="3d578503a729c8eb1d1365a2ab0d1c2b" category="paragraph">ステージ6では、新しいノードが正しくセットアップされていることを確認し、暗号化が有効な新しいノードがある場合は、ストレージ暗号化またはNetApp Volume Encryptionを設定およびセットアップします。また、古いノードの運用を停止し、SnapMirrorの処理を再開する必要があります。</block>
  <block id="f524f3d3a5face12c84870f28ce71f51" category="paragraph">MetroCluster 構成を使用していない場合は、このセクションを省略できます。</block>
  <block id="194cfacfac5ae59ca8654ba8ba91969e" category="paragraph">ステージ1で必要に応じて、内部ディスクドライブにルートアグリゲートまたはデータアグリゲートが含まれていないことを確認し、ノードをアップグレードの準備をしてから、一連の事前確認を実行します。必要に応じて、ストレージ暗号化のためにディスクのキーを変更し、新しいコントローラをネットブートする準備を行います。</block>
  <block id="b1e6a51941fc762fadf553464a430f03" category="paragraph">ステージ2で、ルート以外のアグリゲートをノード1からノード2に再配置し、ノード1が所有するSAN以外のデータLIFを、障害アグリゲートまたは拒否アグリゲートを含めてノード2に移動します。手順 の後半で使用するために必要なノード1の情報を記録し、ノード1を撤去します。</block>
  <block id="eb5305681dcf43e8c1db320ce431edd8" category="paragraph">ステージ4で、あとで手順 で使用するために必要なnode2の情報を記録し、node2を撤去します。</block>
  <block id="88a0eec75ccbf727881e52be21050e3c" category="paragraph">ステージ5で、node4のインストールとブートの際には、クラスタポートとノード管理ポートをnode2からnode4にマッピングし、node4のインストールを確認して、node2に属するデータLIFとSAN LIFをnode3からnode4に移動します。node2のアグリゲートをnode3からnode4に再配置し、ノード2のNAS LIFをnode3からnode4に移動します。</block>
  <block id="17713187c4e0912bc419e03d9496d3ae" category="paragraph">ステージ6では、新しいノードが正しくセットアップされていることを確認し、新しいノードで暗号化が有効になっている場合はストレージ暗号化またはNetApp Volume Encryptionをセットアップします。また、古いノードの運用を停止し、SnapMirror処理を再開する必要があります。</block>
  <block id="ecd942205bedf95694f574a1e603a6d3" category="admonition">Storage Virtual Machine（SVM）ディザスタリカバリの更新は、割り当てられたスケジュールどおりに中断されません。</block>
  <block id="0fa2804ab676b4c1ef9de6071a2f7c81" category="admonition">node4にはブート環境のプロンプトが表示されたままにします。node4には戻ります <block ref="f326c815b47f4f2909494bae5cd735d5" category="inline-link-macro-rx"></block>。</block>
  <block id="0be88c4bca37291303f8b31b2c15960b" category="paragraph">ブート環境プロンプトで次のコマンドを入力して、接続を手動で設定します。<block ref="08e9ed1febc3e725e8201311cddea860" prefix=" " category="inline-code"></block></block>
  <block id="9217255664b7bb463d1293cee7c132b2" category="paragraph"><block ref="854a4be4b1fce65bf3a90ee74692188e" prefix="" category="inline-code"></block> は、ストレージシステムのIPアドレスです（必須）。<block ref="220b0a4790e2c047ae96a881e506e1fe" prefix=" " category="inline-code"></block> は、ストレージシステムのネットワークマスクです（必須）。<block ref="14fb245f7140583707d1cda241eeeff2" prefix=" " category="inline-code"></block> は、ストレージシステムのゲートウェイです（必須）。<block ref="573c932508ccab841c5c117fb2cd2186" prefix=" " category="inline-code"></block> は、ネットワーク上のネームサーバのIPアドレスです（オプション）。<block ref="79e5a69f76d034adaafbb5cb6cb8fc45" prefix=" " category="inline-code"></block> は、ドメインネームサービス（DNS）ドメイン名です。このオプションパラメータを使用する場合は、ネットブートサーバの URL に完全修飾ドメイン名を指定する必要はなく、サーバのホスト名だけを指定します。</block>
  <block id="e06e3f1d2982c656928c1758ea5cd5d2" category="paragraph"><block ref="d289f6fdbc3a8ef953e4ecbc75c5e367" prefix="" category="inline-code"></block></block>
  <block id="c3bf4c58440a787e2baab726de5e13a2" category="admonition">新しいノードを希望するイメージに更新する場合は、必ずネットブートを使用してください。別の方法で新しいコントローラにイメージをインストールすると、正しいイメージがインストールされない場合があります。この問題環境はすべての ONTAP リリースに対応しています。オプションを指定してネットブート手順 を実行する<block ref="164ab89f87a6d8b32c239f7ca0be1f74" prefix=" " category="inline-code"></block> ブートメディアを消去して、同じONTAP バージョンのONTAP を両方のイメージパーティションに配置します。</block>
  <block id="59b90ab4d9f5cec87646c2acefb98a3b" category="paragraph">診断ユーザアカウントは、簡単な診断だけを目的としています。テクニカルサポートから指示があった場合にのみ使用してください。</block>
  <block id="9e2835c14d1a15176d9244c6778b33fd" category="paragraph">ユーザアカウントのロック解除については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、 _System Administration Reference_( システム管理リファレンス ) にリンクします。</block>
  <block id="b2b2df04bed57a6afc9f9e93074818b6" category="paragraph">ブート環境プロンプトで次のコマンドを入力して、接続を手動で設定します。<block ref="8bea5c8cfd4cc82c9ee736493781c9a2" prefix=" " category="inline-code"></block></block>
  <block id="4bba0a7fcbf2ab986a1611d7021d5052" category="admonition">新しいノードを希望するイメージに更新する場合は、必ずネットブートを使用してください。別の方法で新しいコントローラにイメージをインストールした場合、正しいイメージがインストールされないことがあります。この問題環境はすべての ONTAP リリースに対応しています。オプションを指定してネットブート手順 を実行する<block ref="164ab89f87a6d8b32c239f7ca0be1f74" prefix=" " category="inline-code"></block> ブートメディアを消去して、両方のイメージパーティションに同じONTAP バージョンを配置します。</block>
  <block id="fa1a140f0168541ffe4dbde5276b265e" category="admonition">続行する前に、アグリゲートをオフラインにしてから、内蔵ディスクドライブ上のアグリゲートを削除する必要があります。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> アグリゲートの管理に関する情報を取得するには、 CLI の _content を使用して _Disk およびアグリゲートの管理にリンクします。</block>
  <block id="21d6fd2bad8758c2c979453e45b1b662" category="admonition">続行する前に、ボリュームを外付けディスクシェルフに移動し、アグリゲートをオフラインにして、内蔵ディスクドライブ上のアグリゲートを削除する必要があります。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ボリュームの移動に関する情報を取得するには、 CLI の _CONTENT を使用して、 _Disk およびアグリゲートの管理にリンクしてください。</block>
  <block id="85c002d05aa1c586f24c816bb6f781d8" category="summary">ONTAP 9.8以降を実行しているコントローラで、ARLを手動でアップグレードする際に、node2にあるnode1にあるNASデータLIFをnode2からnode3に移動します。</block>
  <block id="0e65641a75cf4460805d4b96e2449880" category="summary">2ノードクラスタの場合はノード2に、ONTAP 9.8以降を実行しているコントローラではARLを手動でアップグレードする場合はノード3にそれぞれデータLIFを移動します。</block>
  <block id="c5dc6358f70b9b01e402df306b4756e6" category="summary">必要に応じて、ONTAP 9.8以降を実行しているコントローラで、NVEまたはNAE用に新しいコントローラモジュールを手動でアップグレードする際に設定します。</block>
  <block id="f0a0eea61e7c18706f2be0d0b664df19" category="doc">新しいコントローラモジュールでNetApp VolumeまたはAggregte Encryptionをセットアップします</block>
  <block id="9c5b8b5e0f9e3862ddb4d7aea590526d" category="paragraph">ステージ2で、ルート以外のアグリゲートをノード1からノード2に再配置し、ノード1が所有するSAN以外のデータLIFを、障害アグリゲートまたは拒否アグリゲートを含めてノード2に移動します。また、手順 の後半で使用するために必要なノード1の情報を記録し、ノード1を撤去します。</block>
  <block id="b1d2d80254a37ea644bb2f1ced221235" category="paragraph">ステージ3で、ノード3をインストールしてブートし、クラスタポートとノード管理ポートをノード1からノード3にマッピングし、ノード2からノード3に属するデータLIFとSAN LIFを移動します。また、すべてのアグリゲートを node2 から node3 に再配置し、 node2 によって所有されているデータ LIF と SAN LIF を node3 に移動します。</block>
  <block id="14404b4da2811fbc2d79f7bd9ba708f3" category="paragraph">ステージ4で、あとで手順 で使用するために必要なnode2の情報を記録し、node2を撤去します。アグリゲートの所有権は変更されません。</block>
  <block id="7e21a9c9d8227ac88401921ab1292b41" category="paragraph">ステージ5で、node4をインストールしてブートし、クラスタポートとノード管理ポートをnode2からnode4にマッピングし、node2に属するデータLIFとSAN LIFをnode3からnode4に移動します。node2のアグリゲートをnode3からnode4に再配置し、node2によって所有されているデータLIFとSAN LIFをnode3に移動することもできます。</block>
  <block id="3bd7ed4f2ac8c8bee0e26402197de3f8" category="paragraph">ステージ6では、新しいノードが正しくセットアップされていることを確認し、新しいノードで暗号化が有効になっている場合はストレージ暗号化またはNetApp Volume Encryptionをセットアップします。また、古いノードの運用を停止すると、SnapMirrorの処理が再開されます。</block>
  <block id="a6b2bef9fee39460e6de895c83a49b09" category="paragraph">ステージ2で、ノード1の非ルートアグリゲートとNASデータLIFをノード2に再配置します。このプロセスは主に自動化されており、ステータスを確認するために処理が一時停止します。この処理は手動で再開する必要があります。必要に応じて、障害が発生したアグリゲートまたは拒否されたアグリゲートを再ノード1を撤去する前に、手順 の後半で使用するために情報をメモしておきます。ネットブートnode3とnode4には、あとで手順 で準備することもできます。</block>
  <block id="b782fb0a43ba5a997562172fe5afc493" category="paragraph">ステージ4で、ルート以外のアグリゲートとNASデータLIFをnode2からnode3に再配置します。node2の情報は、あとで手順 で使用するために記録してから、node2を撤去することもできます。</block>
  <block id="ee70b93b550a5730542d0185fb89b3ce" category="paragraph">ステージ6では、新しいノードが正しくセットアップされていることを確認し、暗号化が有効な新しいノードがある場合はストレージ暗号化またはNVEを設定してセットアップします。また、古いノードの運用を停止し、SnapMirrorの処理を再開する必要があります。</block>
  <block id="acd5b1c4fce9ef3151224f03792cb99f" category="paragraph">ディレクトリの一覧に次のファイルが表示されます。<block ref="f466b354adfc3ad817d7c11c037c8797" prefix=" " category="inline-code"></block></block>
  <block id="d64291323d18992b3445302961a6c6cb" category="paragraph"><block ref="5f228d2a3233663cd573460dd92ad9ce" prefix="" category="inline-code"></block></block>
  <block id="f8c0ac61744d21aa2bb63045fa011ea5" category="summary">必要に応じて、を使用してONTAP 9.8以降を実行しているコントローラをアップグレードする場合は、NVEまたはNAE用に新しいコントローラモジュールを設定します<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block> コマンド</block>
  <block id="f1ce13c7bdc83a7edc61f28f1b45e2b3" category="paragraph">新しいコントローラの交換したコントローラまたはハイアベイラビリティ（HA）パートナーがNetApp Volume Encryption（NVE）またはNetApp Aggregate Encryption（NAE）を使用している場合は、新しいコントローラモジュールをNVEまたはNAE用に設定する必要があります。</block>
  <block id="f43321e7d3b61cf1c8ba0245edce75e1" category="open-title">外部キー管理</block>
  <block id="56e327f81566d68ee048f3f881ecfd0e" category="paragraph">このコマンドには、OKMのパスフレーズが必要です</block>
  <block id="274fa51e35e2d7744511852ce715a339" category="summary">を使用して、ONTAP 9.8以降を実行しているコントローラをアップグレードする際に、node1の物理ポートがnode3に正しくマッピングされていることを確認し、ネットワーク設定をnode3にリストアしておく必要があります<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block> コマンド</block>
  <block id="ed5e166424b6971ce3ff91d956aed8c8" category="summary">を使用して、ONTAP 9.8以降を実行しているコントローラをアップグレードするときに、node2のnode1 NASデータLIFがnode2からnode3に再配置されていることを確認します<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block> コマンド</block>
  <block id="5e972db272a05de06b0d6fdb800b7a08" category="paragraph">NetApp Aggregate Encryption（NAE）またはNetApp Volume Encryption（NVE）を使用してアップグレードするシステムのボリュームを暗号化する場合は、暗号化設定を新しいノードに同期する必要があります。key-managerをリストアしない場合は、ARLを使用してノード2からノード3にアグリゲートを再配置すると、暗号化されたボリュームがオフラインになります。</block>
  <block id="32c58b427183169965ebb999f423176a" category="paragraph">ブート環境プロンプトで次のコマンドを使用して、接続を手動で設定します。<block ref="08e9ed1febc3e725e8201311cddea860" prefix=" " category="inline-code"></block></block>
  <block id="b159bbd899522472927771c3cfb60e98" category="paragraph"><block ref="854a4be4b1fce65bf3a90ee74692188e" prefix="" category="inline-code"></block> は、ストレージシステムのIPアドレスです（必須）。<block ref="220b0a4790e2c047ae96a881e506e1fe" prefix=" " category="inline-code"></block> は、ストレージシステムのネットワークマスクです（必須）。<block ref="14fb245f7140583707d1cda241eeeff2" prefix=" " category="inline-code"></block> は、ストレージシステムのゲートウェイです（必須）。<block ref="573c932508ccab841c5c117fb2cd2186" prefix=" " category="inline-code"></block> は、ネットワーク上のネームサーバのIPアドレスです（オプション）。<block ref="79e5a69f76d034adaafbb5cb6cb8fc45" prefix=" " category="inline-code"></block> は、Domain Name Service（DNS；ドメインネームサービス）ドメイン名です（オプション）。</block>
  <block id="303eb51c66cbd45f9e6d876421927f72" category="admonition">新しいノードを希望するイメージに更新する場合は、必ずネットブートを使用してください。別の方法で新しいコントローラにイメージをインストールした場合、正しいイメージがインストールされないことがあります。この問題環境 All ONTAP リリースオプションを指定してネットブート手順 を実行する<block ref="164ab89f87a6d8b32c239f7ca0be1f74" prefix=" " category="inline-code"></block> ブートメディアを消去して、両方のイメージパーティションに同じONTAP バージョンを配置します。</block>
  <block id="a0d94f32d0181785e386a9ef4fb1b39a" category="list-text">[[step20]]ブートローダーで、node3のパートナーシステムIDを設定します。</block>
  <block id="e392c977e2489d972197bd428e99f557" category="paragraph">ノード3の場合、<block ref="d18fd3db938a26ebbd3f74de41f0b73f" prefix=" " category="inline-code"></block> node2のものである必要があります。</block>
  <block id="0a8738306c7333e07688aef17b4e295e" category="list-text">[[auto_install3_step21]を確認します<block ref="d18fd3db938a26ebbd3f74de41f0b73f" prefix=" " category="inline-code"></block> ノード3の場合：</block>
  <block id="7841bf38e658f68c682cee2c9eb5472d" category="paragraph">各ノードに接続されているシリアルポートで、次のコマンドの出力を個別に実行して保存します。</block>
  <block id="80b1a5ab2f169155be3a834be566f4c2" category="list-text"><block ref="ce640e5cc43dcc2ce28d153a849057d9" prefix="" category="inline-code"></block></block>
  <block id="b31ac11fef9a8af6fa05c2d96463d3e6" category="list-text"><block ref="453aed737e4541e2ea60f38a6b9e5777" prefix="" category="inline-code"></block></block>
  <block id="12ab637b90c6ff7edcbf6b37e16e4e1e" category="list-text"><block ref="28093ee1f500cbf8b88317f983cf2994" prefix="" category="inline-code"></block></block>
  <block id="010377b1df1c147be7660d077da57d34" category="list-text"><block ref="f28132e6412c52c2df71902bccd9fe5d" prefix="" category="inline-code"></block></block>
  <block id="87754b6c588a162a924659bdf775cf20" category="list-text"><block ref="110550f63d97b49878bbbd584e2c3ab1" prefix="" category="inline-code"></block></block>
  <block id="284796671ad84e43740ae2f599a3a216" category="list-text"><block ref="092016153e5cdfe0f74d15d20e03a91e" prefix="" category="inline-code"></block></block>
  <block id="a0a0ad5020eac42dba5b447fc44dc48b" category="list-text"><block ref="2232629a6b33efd635768e5e55bd1038" prefix="" category="inline-code"></block></block>
  <block id="2da2426897b8d2d9deb39f8f8f957e06" category="list-text"><block ref="555e951feb1c7a290a146a3083826385" prefix="" category="inline-code"></block></block>
  <block id="e6070f78dc11f71748bff1b9003fccd0" category="paragraph"><block ref="854a4be4b1fce65bf3a90ee74692188e" prefix="" category="inline-code"></block> は、ストレージシステムのIPアドレスです（必須）。<block ref="220b0a4790e2c047ae96a881e506e1fe" prefix=" " category="inline-code"></block> は、ストレージシステムのネットワークマスクです（必須）。<block ref="14fb245f7140583707d1cda241eeeff2" prefix=" " category="inline-code"></block> は、ストレージシステムのゲートウェイです（必須）。<block ref="573c932508ccab841c5c117fb2cd2186" prefix=" " category="inline-code"></block> は、ネットワーク上のネームサーバのIPアドレスです（オプション）。<block ref="79e5a69f76d034adaafbb5cb6cb8fc45" prefix=" " category="inline-code"></block> は、DNSドメイン名です（オプション）。</block>
  <block id="5e2c0dc3398b3e8f5619e371fec2269b" category="list-text">ブートローダーのnode4にあるパートナーシステムIDを設定します。</block>
  <block id="4e01f43abaf0b878dabe329f87d4cee7" category="paragraph">ノード4の場合、<block ref="d18fd3db938a26ebbd3f74de41f0b73f" prefix=" " category="inline-code"></block> node3のノードである必要があります。</block>
  <block id="d1031e1f800c4bd6f924dc58bce65e5e" category="list-text">[[auto_install4_step21]を確認します<block ref="d18fd3db938a26ebbd3f74de41f0b73f" prefix=" " category="inline-code"></block> ノード4の場合：</block>
  <block id="47c9d570e26767f6f7f0247b3b0faa44" category="paragraph">NetApp Aggregate Encryption（NAE）またはNetApp Volume Encryption（NVE）を使用してアップグレードするシステムのボリュームを暗号化する場合は、暗号化設定を新しいノードに同期する必要があります。key-managerをリストアしない場合は、ARLを使用してnode2のアグリゲートをnode3からnode4に再配置すると、暗号化されたボリュームがオフラインになります。</block>
  <block id="33ff5cb99c889e1db4238bdd49969091" category="paragraph">ステージ2で、ノード1の非ルートアグリゲートとNASデータLIFをノード2に再配置します。このプロセスは主に自動化されており、ステータスを確認するために処理が一時停止します。この処理は手動で再開する必要があります。必要に応じて、障害が発生したアグリゲートまたは拒否されたアグリゲートを再手順 の後半で使用するために必要なノード1の情報を記録してから、ノード1を撤去する必要があります。ネットブートnode3とnode4には、あとで手順 で準備することもできます。</block>
  <block id="3023bde0419d9056e2c0a1ff888f6e3a" category="paragraph">ステージ4で、ノード2の非ルートアグリゲートとSAN以外のデータLIFをノード3に再配置します。また、必要なnode2の情報を記録し、node2を撤去します。</block>
  <block id="74d8511a5efc9e6d2f77eaf8e99a51e1" category="summary">を使用して、ONTAP 9.5を実行しているコントローラを9.7にアップグレードする場合は、node3のnode2 NASデータLIFをnode3からnode4に移動します<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block> コマンド</block>
  <block id="13b5531afc1b08c79fc18b1b09249b23" category="summary">を使用して、ONTAP 9.5を実行しているコントローラを9.7にアップグレードする場合は、ノード3にノード1のVLAN、インターフェイスグループ、およびブロードキャストドメインを再作成します<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block> コマンド</block>
  <block id="ca2c50829b2f370083f7bcae75169741" category="summary">必要に応じて、を使用してONTAP 9.5を実行しているコントローラを9.7にアップグレードする場合は、NVEまたはNAE用に新しいコントローラモジュールを設定します<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block> コマンド</block>
  <block id="ef3edc70c20b3eaff285bb7a5dad5d16" category="open-title">ONTAP 9.6および9.7</block>
  <block id="42e990338c4eb3b9a0428737ba807350" category="paragraph">* ONTAP 9.6または9.7を実行しているコントローラでNVEまたはNAEを設定します</block>
  <block id="b47a9665bbb1dd8efdca2913841ff966" category="paragraph">* ONTAP 9.5*を実行しているコントローラでNVEまたはNAEを設定します</block>
  <block id="c18d56cb4d8dbb7a967cae5068abbca7" category="summary">を使用して、ONTAP 9.5を実行しているコントローラを9.7にアップグレードする場合は、node2のnode1 NASデータLIFをnode2からnode3に移動します<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block> コマンド</block>
  <block id="77abfc209665b592c54221e409c486f8" category="paragraph"><block ref="854a4be4b1fce65bf3a90ee74692188e" prefix="" category="inline-code"></block> は、ストレージシステムのIPアドレスです（必須）。<block ref="220b0a4790e2c047ae96a881e506e1fe" prefix=" " category="inline-code"></block> は、ストレージシステムのネットワークマスクです（必須）。<block ref="14fb245f7140583707d1cda241eeeff2" prefix=" " category="inline-code"></block> は、ストレージシステムのゲートウェイです。（必須）。<block ref="573c932508ccab841c5c117fb2cd2186" prefix=" " category="inline-code"></block> は、ネットワーク上のネームサーバのIPアドレスです（オプション）。<block ref="79e5a69f76d034adaafbb5cb6cb8fc45" prefix=" " category="inline-code"></block> は、ドメインネームサービス（DNS）ドメイン名です。このオプションパラメータを使用する場合は、ネットブートサーバの URL に完全修飾ドメイン名を指定する必要はなく、サーバのホスト名だけを指定します。</block>
  <block id="e0811ea9d9786cc8989d3ab88a4e3b4a" category="list-text"><block ref="9bd6a9f244c9332034b49ce1f74878c5" prefix="" category="inline-code"></block></block>
  <block id="5d1a6cb4c47b2c7d79ac9fd6d12f0523" category="admonition">オンボードキーマネージャを使用するNetApp Volume Encryption（NVE）またはNetApp Aggregate Encryption（NAE）を使用する場合は、あとで手順 でキー管理ツールのパスフレーズを使用してキー管理ツールの再同期を完了できるようにしておきます。</block>
  <block id="c8b61356b51e595d8d4b085138397f2a" category="paragraph">ノード4をラックに設置し、ノード2の接続をノード4に転送し、ブートノード4を起動して、ONTAP をインストールする必要があります。そのあと、このセクションで説明するように、node2上のスペアディスク、ルートボリュームに属するディスク、およびプロセスでnode3に再配置されていないルート以外のアグリゲートを再割り当てする必要があります。</block>
  <block id="c0577dde04914d4e86fcd22fc6ad5c48" category="paragraph">再配置処理はこのフェーズの開始時に一時停止されます。このプロセスはほとんどが自動化されており、処理は一時停止してステータスを確認できます。この処理は手動で再開する必要があります。また、NASデータLIFがnode4に正常に移動したことを確認する必要があります。</block>
  <block id="f5b4a0a26551c8147e4d15fe49ec53b5" category="cell">ブート環境プロンプトで次のコマンドを入力して、接続を手動で設定します。<block ref="08e9ed1febc3e725e8201311cddea860" prefix=" " category="inline-code"></block>
<block ref="854a4be4b1fce65bf3a90ee74692188e" prefix=" " category="inline-code"></block> は、ストレージシステムのIPアドレスです（必須）。<block ref="220b0a4790e2c047ae96a881e506e1fe" prefix=" " category="inline-code"></block> は、ストレージシステムのネットワークマスクです（必須）。<block ref="14fb245f7140583707d1cda241eeeff2" prefix=" " category="inline-code"></block> は、ストレージシステムのゲートウェイです（必須）。<block ref="573c932508ccab841c5c117fb2cd2186" prefix=" " category="inline-code"></block> は、ネットワーク上のネームサーバのIPアドレスです（オプション）。<block ref="79e5a69f76d034adaafbb5cb6cb8fc45" prefix=" " category="inline-code"></block> は、ドメインネームサービス（DNS）ドメイン名です。このオプションパラメータを使用する場合は、ネットブートサーバの URL に完全修飾ドメイン名を指定する必要はなく、サーバのホスト名だけを指定します。注：使用しているインターフェイスによっては、他のパラメータが必要になる場合もあります。入力するコマンド<block ref="0c6877a83224f87093205d2971ef3953" prefix=" " category="inline-code"></block> ファームウェアのプロンプトで詳細を確認します。</block>
  <block id="7abfecdf5ad8a80ea0bc5db9607dc350" category="paragraph">ステージ4で、ルート以外のアグリゲートとNASデータLIFをノード2からアップグレード後のノード1に再配置し、ノード2を撤去します。</block>
  <block id="fb13f8b167e25a81b898b43d42165d58" category="paragraph">ステージ7では、新しいノードが正しくセットアップされていることを確認し、暗号化が有効な新しいノードがある場合は、ストレージ暗号化またはNVEを設定してセットアップします。また、古いノードの運用を停止し、SnapMirrorの処理を再開する必要があります。</block>
  <block id="d3cd60bb710f7c46488c2fdcff53e760" category="list-text"><block ref="a322323758cef88dbedb5f26cac8c538" prefix="" category="inline-code"></block></block>
  <block id="41107aca0599fc501e6800f801aa72b4" category="paragraph">環境の無停止の ONTAP ソフトウェアアップグレード。コントローラのアップグレードは含まれません。</block>
  <block id="3a8b3757d8c142f770f9d76513eff9ee" category="paragraph">node1の場合、<block ref="d18fd3db938a26ebbd3f74de41f0b73f" prefix=" " category="inline-code"></block> node2のものである必要があります。node2のシステムIDはから取得できます<block ref="5b70738f9bc21f7783bca30ce6275d06" prefix=" " category="inline-code"></block> node2に対するコマンドの出力。</block>
  <block id="80995018ae45f8a93e75a901e9a9749b" category="list-text">node2にパートナーシステムIDを設定します。</block>
  <block id="92b03f1ecf66a6ee3c76ebd05afbddda" category="list-text">node2のLOADERプロンプトで、を確認します<block ref="d18fd3db938a26ebbd3f74de41f0b73f" prefix=" " category="inline-code"></block> ノード2の場合：</block>
  <block id="bd7f71fd091a70c3f0b23cb5a356e64c" category="paragraph">新しいノードを設置したら、ネットブートを実行して、新しいノードが元のノードと同じバージョンのONTAP を実行するように設定する必要があります。ネットブートという用語は、リモート・サーバに保存された ONTAP イメージからブートすることを意味します。ネットブートの準備を行うときは、システムがアクセスできる Web サーバに、 ONTAP 9 ブート・イメージのコピーを配置する必要があります。</block>
  <block id="973101ddb988b90ce601f6442c898594" category="list-text">特別なブートメニューに戻ります。<block ref="16c75f7ad51c79b1cf539c94cd168367" prefix=" " category="inline-code"></block></block>
  <block id="17c034fb2d21ea55cdb8a8e69c62f069" category="list-text">（10）Set Onboard Key Manager Recovery secrets（オンボードキーマネージャリカバリシークレットの設定）*を選択します</block>
  <block id="a6b415fe2d6a649b63be379924ad9e5d" category="list-text">入力するコマンド<block ref="415290769594460e2e485922904f345d" prefix=" " category="inline-code"></block> 次のプロンプトが表示されます。</block>
  <block id="c2a77e29b8de9e8562b6fd93a28903df" category="paragraph"><block ref="4a405d8099ad49f7b92a6093775ada1b" prefix="" category="inline-code"></block></block>
  <block id="99a40bbc477cdc17f6e88d32032fbee2" category="list-text">プロンプトで、キー管理ツールのパスフレーズを入力します。</block>
  <block id="97da9a68ce886c4978d84008bc3d4e8b" category="list-text">プロンプトが表示されたら、バックアップデータを入力します。</block>
  <block id="71e3a0c9ae3930c06f28eb84647c689b" category="admonition">でパスフレーズとバックアップデータを入手しておく必要があります <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block> この手順のセクション。</block>
  <block id="df032103f8364ffe0942ab84f5f27f22" category="list-text">システムが再度特別な起動メニューを起動したら、オプション*（1）Normal Boot *を実行します</block>
  <block id="37bcf5964cba22a5e1026e3bfd999926" category="list-text">ノード3から次のコマンドを実行します。</block>
  <block id="9b4b091bf0690393965fb7724be0006b" category="list-text">データアグリゲートを再配置する前に、ノード3のSVM-KEKキーが「true」にリストアされたことを確認します。</block>
  <block id="0a52730597fb4ffa01fc117d9e71e3a9" category="listing-title">例</block>
  <block id="13c13d2352f379924e4032f92cccb33a" category="paragraph">NetApp Volume Encryption（NVE）およびNetApp Aggregate Encryption（NAE）を使用してアップグレードするシステムのボリュームを暗号化する場合は、暗号化設定を新しいノードに同期する必要があります。キー管理ツールを同期しない場合は、ARLを使用してノード2のアグリゲートをノード3からノード4に再配置すると、ノード4に暗号化されたボリュームとアグリゲートをオンラインにするために必要な暗号化キーがないと処理が失敗することがあります。</block>
  <block id="06faea2c1bf225d7dca01142c99c8244" category="list-text">ノード4から次のコマンドを実行します。</block>
  <block id="e6c7a255c2aa3d1c9e8528fdbea53a6b" category="list-text">データアグリゲートを再配置する前に、ノード4でSVMのKEKキーが「true」にリストアされたことを確認します。</block>
  <block id="364217334ff62898c99ab53d1c399fd0" category="paragraph">NetApp Volume Encryption（NVE）およびNetApp Aggregate Encryption（NAE）を使用してアップグレードするシステムのボリュームを暗号化する場合は、暗号化設定を新しいノードに同期する必要があります。キー管理ツールを同期しない場合、ARLを使用してノード1のアグリゲートをノード2からノード3に再配置すると、ノード3に暗号化されたボリュームとアグリゲートをオンラインにするための必要な暗号化キーがないために障害が発生することがあります。</block>
  <block id="367030bfa78ce5edbeac0c34dadc8486" category="paragraph">NetApp Aggregate Encryption（NAE）またはNetApp Volume Encryption（NVE）を使用してアップグレードするシステムのボリュームを暗号化する場合は、暗号化設定を新しいノードに同期する必要があります。キー管理ツールを再同期しない場合、ARLを使用してノード1のアグリゲートをノード2からアップグレードしたノード1に再配置すると、ノード1に暗号化されたボリュームとアグリゲートをオンラインにするための必要な暗号キーがないために障害が発生することがあります。</block>
  <block id="d78fca99557049bfe942bd572aec4d13" category="list-text">node1から次のコマンドを実行します。</block>
  <block id="722a50b23f118fce431bda63821ff8b6" category="list-text">データアグリゲートを再配置する前に、ノード1のSVM-KEKキーが「true」にリストアされたことを確認します。</block>
  <block id="5db260fa0b5fbfacb2534214a3285812" category="paragraph">NetApp Aggregate Encryption（NAE）またはNetApp Volume Encryption（NVE）を使用してアップグレードするシステムのボリュームを暗号化する場合は、暗号化設定を新しいノードに同期する必要があります。キー管理ツールを再同期しない場合は、ARLを使用して、アップグレードしたノード1からアップグレードしたノード2にノード2のアグリゲートを再配置すると、ノード2に暗号化されたボリュームとアグリゲートをオンラインにするために必要な暗号化キーがないためにエラーが発生することがあります。</block>
  <block id="593e2ad3d429d61bda399cdc2971b3d5" category="list-text">node2から次のコマンドを実行します。</block>
  <block id="2c44030cea2ae320e19712bb71a7d594" category="list-text">データアグリゲートを再配置する前に、SVMのKEKキーがnode2で「true」にリストアされていることを確認します。</block>
  <block id="ff8e7d9040b97e4276e06db695236077" category="list-text">node2のLOADER&gt;プロンプトで、デフォルトの環境変数を設定します。</block>
  <block id="00e3434af8f53caecc96a787f100e5fa" category="paragraph">ただし、元のコントローラと同じバージョンの ONTAP 9 がインストールされているコントローラには、ネットブートする必要はありません。その場合は、このセクションをスキップしてに進みます <block ref="6ba5630a5f60662e8fc1f03d17393494" category="inline-link-macro-rx"></block>。</block>
  <block id="ab2126455dabf7b57fb465e0cbe0ec41" category="paragraph">のディレクトリの情報を使用します <block ref="ab6acaf1648b65fe7eff652317a95a17" category="inline-link-macro-rx"></block>。</block>
  <block id="85e374a47bd77502ca7ecd58923ec819" category="paragraph">ただし、元のコントローラと同じバージョンの ONTAP 9 がインストールされているコントローラには、ネットブートする必要はありません。その場合は、このセクションをスキップしてに進みます <block ref="c6531ef0bbbd2a28b8b9b75b1dc2026b" category="inline-link-macro-rx"></block></block>
  <block id="ec8f42afc125efe6d556f20ecc052848" category="inline-link-macro">オンボードキーマネージャを使用して認証キーを管理します</block>
  <block id="905e3cdcc0a66a5627f194c9bef68b48" category="inline-link">ドライブがFIPS認定かどうかを確認する方法</block>
  <block id="9a939769a0a1b5b6c994c5ee6a8c23b2" category="list-text">システムで自己暗号化ドライブを使用している場合は、Knowledge Baseの文書を参照してください<block ref="99bc6507ac71bae6bc6755b2bf68f73a" category="inline-link-rx"></block> アップグレード対象のHAペアで使用されている自己暗号化ドライブのタイプを確認する。ONTAP ソフトウェアは、次の2種類の自己暗号化ドライブをサポートしています。</block>
  <block id="93cbc4495a566db3a58548f326fa221c" category="paragraph">システムをネットブートする前に、すべてのSnapMirror関係が休止されていることを確認する必要があります。休止された SnapMirror 関係は、リブート後およびフェイルオーバー後も休止状態のままです。</block>
  <block id="1cf6b38ccce07c615f777e8d49040349" category="inline-link">ONTAP ブートメニューから外部キー管理サーバの設定をリストアする方法</block>
  <block id="a9021e1b94f8e36032c1a900148d17bf" category="paragraph">詳細については、技術情報アーティクルを参照してください<block ref="d55f681383ef8cdbd5ac64000ea6e309" category="inline-link-rx"></block>。</block>
  <block id="595e785894184e8832420129093393c7" category="summary">オンボードキーマネージャを使用して、ONTAP 9.8以降を実行しているコントローラでARLを手動でアップグレードする際に認証キーを管理します。</block>
  <block id="7de07b30845475194f5305d135dd504b" category="paragraph">オンボードキーマネージャ（OKM）を使用して認証キーを管理できます。OKMをセットアップした場合は、アップグレードを開始する前にパスフレーズとバックアップ資料を記録しておく必要があります。</block>
  <block id="b57235dcd9249f0e9bf6001eecd99ce5" category="list-text">クラスタ全体のパスフレーズを記録します。</block>
  <block id="f97bf876165b297d6e8425acab009019" category="paragraph">これは、CLIまたはREST APIを使用してOKMを設定または更新したときに入力したパスフレーズです。</block>
  <block id="8cada82213a4eb50c1f0cba46389bd44" category="list-text">を実行して、キー管理ツールの情報をバックアップします<block ref="32ba7af89b7557f6e3e6d80a922080ce" prefix=" " category="inline-code"></block> コマンドを実行します</block>
  <block id="219d5a10054a3daaa60cc6dc3881a506" category="paragraph">ノード 1 とノード 2 が別々のシャーシに搭載されている場合は、ノード 3 をノード 1 と同じラックの場所に設置できます。ただし、ノード1がノード2と同じシャーシに搭載されていた場合は、ノード3をノード1の場所に近い独自のラックスペースに配置する必要があります。</block>
  <block id="7abb4d22dfb96ceb2a52ebfc5cef2026" category="admonition">ほとんどのプラットフォームモデルには一意のインターコネクトカードモデルがあるため、インターコネクトカードまたはクラスタインターコネクトケーブルの接続を node1 から node3 に移動する必要はない場合があります。MetroCluster 構成の場合は、FC-VIケーブルの接続をノード1からノード3に移行する必要があります。新しいホストに FC-VI カードがない場合は、 FC-VI カードの移動が必要になることがあります。</block>
  <block id="28fabaf13c83a39f567169d484c2bdb7" category="admonition">手順 でこれまでに行ったことがない場合は、Knowledge Baseの記事を参照してください<block ref="99bc6507ac71bae6bc6755b2bf68f73a" category="inline-link-rx"></block> 使用している自己暗号化ドライブのタイプを確認するため。</block>
  <block id="c31ef72d8e3bd3a09ff6ce8b371d8d63" category="list-text">設定<block ref="e0224203ce4fa326049e3e770300ce8f" prefix=" " category="inline-code"></block> 終了：<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block> または<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>：</block>
  <block id="f0b1dfc1f82eec89fa61235553e2e4d0" category="cell">FIPS 140-2レベル2の自己暗号化要件に準拠したNSEドライブ</block>
  <block id="6187854879f5d4cd0a5fb4b97e2fc7a8" category="list-text">特別なブートメニューに移動してオプションを選択します<block ref="9181412f3c9d818fd261b168a3f00b5d" prefix=" " category="inline-code"></block>。</block>
  <block id="37c1d52cd8ef96c03d235ed6413794e2" category="paragraph">パスフレーズと、前の手順で手順 に記録しておいたバックアップ情報を入力します。を参照してください <block ref="67f80d13cf548292184bc05f4b74227a" category="inline-link-macro-rx"></block>。</block>
  <block id="6250ffa8b605242265415231c2c23025" category="list-text">NetApp Storage Encryption（NSE）ドライブを搭載している場合は、次の手順を実行します。</block>
  <block id="28556bd95def05fed56f5833d7b0b25b" category="inline-link-macro">オンボードキーマネージャを使用してストレージ暗号化を管理します</block>
  <block id="2f3067e385c13bed8c91d99a529e1f6c" category="paragraph">オンボードキーマネージャ（OKM）を使用して暗号化キーを管理できます。OKMをセットアップした場合は、アップグレードを開始する前にパスフレーズとバックアップ資料を記録しておく必要があります。</block>
  <block id="03b784c13f464c141a29ed9b7adc0b70" category="paragraph">FIPSドライブは、同じノードまたはHAペアで他のタイプのドライブと混在させることはできません。SEDと非暗号化ドライブを同じノードまたはHAペアで混在させることができます。</block>
  <block id="bbe12f0052143b9b4fa08d13234931ab" category="paragraph">パスフレーズと、前の手順で手順 に記録しておいたバックアップ情報を入力します。を参照してください <block ref="2b0f9b46416ed6835a9cf4374bf56295" category="inline-link-macro-rx"></block>。</block>
  <block id="eaf73ead47320ec21942b56fd3660eea" category="list-text">オンボードキー管理情報のリストアについては、ネットアップサポートにお問い合わせください。</block>
  <block id="c5915780f057e573017a845938fc8511" category="summary">ノード3を準備し、ノードノード3をノード4に接続してから、ノード4のデータLIFとデータアグリゲートをノード3に移行します。</block>
  <block id="14c081fe52465ec7ccf2f4a54191e82f" category="doc">ノード4のLIFとデータアグリゲートをノード3に移行します</block>
  <block id="05de3b37a54714d747bf2287c86b33a8" category="paragraph">アップグレードを完了するには、ノード3をノード4に接続し、ノード4のデータ論理インターフェイス（LIF）とデータアグリゲートをノード3に移行します。</block>
  <block id="6e33572ac852586911bf2ae34e3f5811" category="list-text">オプションを選択します<block ref="1fbad292f1d0674d5769c555d41b2d77" prefix=" " category="inline-code"></block> をクリックして、/varファイルシステムをノード3にリストアします。</block>
  <block id="c6ea68faeb5eef782dd065f60bd53073" category="paragraph">これにより、オールフラッシュベースの構成がディスクへの最後のバックアップに置き換えられます。</block>
  <block id="3f9a85730e6aa38445beae1ddf78208c" category="list-text">ノードが通常どおりブートするのを待ちます。</block>
  <block id="ed5222dac3009de0d14e22c21c0adf23" category="paragraph">システムIDが一致していないことを示す警告がノードから報告されます。入力するコマンド<block ref="415290769594460e2e485922904f345d" prefix=" " category="inline-code"></block> システムIDを上書きします。</block>
  <block id="de6a33ef3a48198329f4a33ece58f132" category="list-text">ノード3をノード4に接続します。</block>
  <block id="a0b5ad751866a2018195aa595ae090ff" category="list-text">クラスタLIFを移行します。</block>
  <block id="050a7fd0d3c2ede3b69ba2432774511f" category="list-text">クラスタのブロードキャストドメインを変更して、必要なクラスタポートを追加します。</block>
  <block id="adb4b7912344d67d584552b9dd9ddc8f" category="paragraph"><block ref="6dc01498c5cd366c83995c4944d250b8" prefix="" category="inline-code"></block></block>
  <block id="cb1badc055c917ecde01c07124a804ab" category="paragraph"><block ref="194c91f22e898e40c1b6eb5f73b496f6" prefix="" category="inline-code"></block></block>
  <block id="b91d2190033f094261d455058cfe79e9" category="admonition">ONTAP 9.8以降では、クラスタ接続用の既存の物理ポートに新しいIPspaceと1つ以上のブロードキャストドメインを指定できます。</block>
  <block id="f2767cdcca3a202a2753e74e19d9ccc0" category="list-text">必要なクラスタポートが含まれるようにクラスタIPspaceを変更し、最大転送単位がまだ設定されていない場合は9000に設定します。</block>
  <block id="53fd9af6e06882afec866439335e5a77" category="list-text">すべてのクラスタネットワークLIFを表示します。</block>
  <block id="5237cceb9c8a1d87dddfba2c9daa3497" category="list-text">すべてのデータネットワークLIFを表示します。</block>
  <block id="0677a94596edc598cdc9d887ed969f0d" category="paragraph"><block ref="5d34967e2c3400a34ca823eae056de33" prefix="" category="inline-code"></block></block>
  <block id="29a8ddc29c73c85061146bccdbb07ae8" category="list-text">すべてのデータLIFをノード3に移行します。</block>
  <block id="251845cf9ac84826e8f6ab5a27d80c2c" category="list-text">クラスタ管理LIFを移行します。</block>
  <block id="03166631394b38903e8e2387f152ab40" category="paragraph"><block ref="72554b9e32d834ceecd34e642cec85e1" prefix="" category="inline-code"></block></block>
  <block id="22c144e9a19a414b679e74f1116a7d65" category="list-text">クラスタ管理LIFのステータスを表示します。</block>
  <block id="53d6d6664dbcc18fa6459ce07c3dfd46" category="paragraph"><block ref="9082f4c28dcc49c92b9c5242cda0b3e0" prefix="" category="inline-code"></block></block>
  <block id="0166fbf736a8a739c686ade9b320bdc6" category="list-text">クラスタ内のすべてのデータアグリゲートのステータスを表示します。</block>
  <block id="8cd0d40510908161a7cef017a8d217a9" category="paragraph"><block ref="773df797e06568bea1288447c8921502" prefix="" category="inline-code"></block></block>
  <block id="321834a445d9332ea0e000706d48d8e7" category="list-text">HAペア、ストレージフェイルオーバー、および自動ギブバックを有効にします。</block>
  <block id="a663cfbadd708736e91107463028d8bf" category="list-text">ノード4が所有するデータアグリゲートをノード3に移行します。</block>
  <block id="57bdd71ef89114519fe5ffdb9df60c43" category="paragraph"><block ref="2e6f5628cdca6a3006991df598890ed1" prefix="" category="inline-code"></block></block>
  <block id="6670c979456c747b5bc930e3cca42aa2" category="list-text">ノード間でネットワークLIFの自動リバートを有効にします。</block>
  <block id="069fd60c13e82ed3c26d047ad70f3291" category="paragraph"><block ref="fbb88b500cd13c6ec3e679ab922c300f" prefix="" category="inline-code"></block></block>
  <block id="f655e4475be8fb217ea92f77eaae2be3" category="list-text">クラスタのステータスを表示します。</block>
  <block id="cf2abce3b37e30b1078c2bc0cff55517" category="list-text">フェールオーバー適格性を表示します。</block>
  <block id="f0db3cbcece645f85d63ccc02719c4c5" category="admonition">クラスタレポートの出力で、あるノードが別のノードに属するアグリゲートを誤って所有している可能性があります。この場合は、クラスタの両側からテイクオーバーとギブバックを実行して正常に動作します。</block>
  <block id="25eeae4605f08eb0ddb15cbc058a08f4" category="summary">ノード1のデータアグリゲート、イプシロン、およびLIFをノード4に移行します。</block>
  <block id="09fa2e71970bf35d303f7d5117c1ec08" category="doc">ノード1のデータアグリゲート、イプシロン、およびLIFをノード4に移行します</block>
  <block id="1fff09525a7ec19070144a8043bfac52" category="paragraph">AFF A250 node1をドライブシェルフに変換する前に、node1のデータアグリゲート、イプシロン、および論理インターフェイス（LIF）をAFF A400 node4に移行します。</block>
  <block id="4159d43758263f7e4d6f789a480f67ff" category="list-text">オプションを選択します<block ref="1fbad292f1d0674d5769c555d41b2d77" prefix=" " category="inline-code"></block> /varファイルシステムをnode4にリストアします。</block>
  <block id="f6029dd039c2f2751b5b3872ff225887" category="paragraph">ノードからシステムIDの不一致の警告が報告されました。入力するコマンド<block ref="415290769594460e2e485922904f345d" prefix=" " category="inline-code"></block> システムIDを上書きします。</block>
  <block id="8f7942d995bbb58129abd3dace41a7f6" category="paragraph">AFF A250をAFF A400にアップグレードするときにシステムクラスタポートが異なる場合は、ノード4のインターフェイスを一時的にクラスタポートに変更しなければならないことがあります。</block>
  <block id="5d77cc3561d3ec9defe56eb5e1dc8f98" category="list-text"><block ref="986592e869cd7b9d38876b97e1bb0f6c" prefix="" category="inline-code"></block></block>
  <block id="6d0f758c75d189ad9c44e0806e7a707f" category="list-text"><block ref="3c6c132d99d6cbdc59f264b9014fa624" prefix="" category="inline-code"></block></block>
  <block id="3e1a7544fd7c75db0b5f6a5121a87a0d" category="list-text">ノード1のデータアグリゲートをノード4に移行します。</block>
  <block id="aef9222d1f4054aa30ba3e27d3e31db0" category="paragraph"><block ref="e8efde3213094177ae38d2e89dfa8513" prefix="" category="inline-code"></block></block>
  <block id="0f070b1aad2f1845775a0935d200ee5e" category="list-text">イプシロンを移行するには、ノード1からIFを削除し、ノード4に移動します。</block>
  <block id="6e18c14fb79ee607d655fcfd08d2d097" category="list-text">ノード1からイプシロンを削除します。</block>
  <block id="ad9c87b3fd93a445b9b5b9101ac79c9d" category="list-text">イプシロンをノード4に移動します。</block>
  <block id="f090faf8a1364b2c5c3344398469f725" category="list-text">すべてのデータLIFをノード4に移行します。</block>
  <block id="20dd08ce792e55622e246eb216113e38" category="list-text">クラスタ内のすべてのデータLIFのステータスを表示します。</block>
  <block id="8681536b6d1a0653fcb2346458c0f435" category="paragraph"><block ref="2001f06ab7fcd2e18cc3fae82e1bff0a" prefix="" category="inline-code"></block></block>
  <block id="740398333ef8d408c0bd3572ef882173" category="paragraph"><block ref="d55a64a0e92792e3a604c971726b2b6f" prefix="" category="inline-code"></block></block>
  <block id="0be8524e71ee45c014a6ab5b900f7325" category="summary">ノード1からノード3にドライブを再割り当てする前に、ノード1をノード3に物理的に接続します</block>
  <block id="d4bf963ddd5e77655c4f093c8714ffbf" category="doc">node1をドライブシェルフに変換し、node3に接続します</block>
  <block id="2e98ab417836886c8cb56bfb8c5c781a" category="paragraph">AFF A250 node1をNS224ドライブシェルフに変換し、AFF A400 node3に接続してから、node1からnode3にドライブを再割り当てします。</block>
  <block id="47439a1310cb80008abcc0c8dd1be478" category="list-text">ノード1からすべてのネットワークケーブルを外します。</block>
  <block id="35a4234f986b7d0bbe846fb7a5f3accf" category="list-text">ノード1をAFF A250シャーシから取り外します。</block>
  <block id="f312852c2228fc5463b754cc0bc1100c" category="list-text">NVMeシェルフモジュール（NSM）をノード1のベイに挿入します。</block>
  <block id="edc57374a646e1dd11be34ef97db4a60" category="list-text">ノード3の100GbEポートe0cとNSM Aのポートe0aをケーブル接続して、NSMをノード3に接続します。</block>
  <block id="00f53ab497c778aca87b7babb758248e" category="image-alt">AFF A400とNS224シェルフ1台</block>
  <block id="9cfc5bc37e7e5bebc0da26c161922b94" category="doc">ドライブをノード1からノード3に再割り当てします</block>
  <block id="e519ebb23aa7a4b2837b111a1b7f6e37" category="paragraph">AFF A250 node1をNS224ドライブシェルフに変換してAFF A400 node3に接続したら、node1に属していたドライブをnode3に再割り当てする必要があります。</block>
  <block id="703ed6844ecb747111a93208ef26855d" category="list-text">LOADERプロンプトで、ノード3をメンテナンスモードでブートします。</block>
  <block id="07d16ebd6462f876eace264b7f66fd79" category="list-text">100GbEインターフェイスの状態を表示します。</block>
  <block id="d75813e35497e6772c951cd78d3c71cb" category="paragraph"><block ref="90e0991b70398b08e4e3eb0ae46c4163" prefix="" category="inline-code"></block></block>
  <block id="19a506a685abfac4b57c6926e93c07b2" category="list-text">100GbEインターフェイスをストレージポートに設定します。</block>
  <block id="90e7d2f93db74ae914166ad5ea8d77cb" category="paragraph"><block ref="d479d9e0dfdb1ed95a1090dd695167f3" prefix="" category="inline-code"></block></block>
  <block id="8bdd1c70b3e50cc1b55e8a602553049d" category="paragraph"><block ref="78fbedccc73bd636c3e3fe9bd5d914b1" prefix="" category="inline-code"></block></block>
  <block id="9348afc40821f943f039141fbe06827e" category="list-text">100GbEインターフェイスのモードが変更されたことを確認します。</block>
  <block id="b634b70f41f02eed2102392209e4eba2" category="list-text">すべての接続ドライブを表示します。</block>
  <block id="6425e7e0295d5f579c5a7518ecf877e7" category="list-text">すべてのドライブをノード1からノード3に再割り当てします。</block>
  <block id="7cc594bfd85b67196f32c1868f75ba5b" category="list-text">再割り当てしたすべてのドライブが新しいシステムIDで表示されることを確認します。</block>
  <block id="d8e70c9c2ae4a4c0cf7be5cd32cfa6d6" category="admonition">ドライブが表示されない場合は、*停止*し、テクニカルサポートにお問い合わせください。</block>
  <block id="b81d07712272425546299d94028eada1" category="list-text">メンテナンスモードを終了します。</block>
  <block id="6a3104dd603be761e5020da6f96a9944" category="inline-xref-macro">ドライブシェルフに変換して、AFF A250をAFF A400にアップグレードします</block>
  <block id="15cef8c52a9390a0d7fe3fdbd4c153c8" category="summary">ストレージやクラスタスイッチを追加購入することなく、エントリレベルのNetApp AFF およびFAS システムに対してNDUを実行できます。</block>
  <block id="f023a71f63cfb01aeff4e5fe98a66467" category="paragraph">この手順 では、AFF A250ハイアベイラビリティ（HA）ペアコントローラの名前はノード1およびノード2、交換用AFF A400 HAペアコントローラの名前はノード3およびノード4です。</block>
  <block id="b3105979177988818fc1f2f63701e999" category="inline-xref-macro">ノード2のLIFとデータアグリゲートをノード1に移行します</block>
  <block id="ea7226a78f02b3e8ba077638a2e6fb6a" category="inline-xref-macro">node2をドライブシェルフに変換し、node4に接続します</block>
  <block id="3dd43dc6ebaff4c46e6ce0976cbd1a04" category="inline-xref-macro">ドライブをノード2からノード4に再割り当てします</block>
  <block id="a5e24971e7f8bc950fa0e926bf40be01" category="summary">ノード2の論理インターフェイス（LIF）とデータアグリゲートをノード1に移行します。</block>
  <block id="45993060a44a5e6d17ba07cb1a841a66" category="paragraph">AFF A250 node2をドライブシェルフに変換する前に、node2の論理インターフェイス（LIF）とデータアグリゲートをnode1に移行します。</block>
  <block id="e291c5603b49506d01779471f77ce7c8" category="paragraph">次の要件を満たしていることを確認します。</block>
  <block id="0d44c7acdd1367079b91981b80442797" category="list-text">適切なケーブル配線をすべて用意しておきます。</block>
  <block id="8e9e1246932fe59d1bc52f76ee1575a1" category="paragraph">次の手順は、AFF A250 node1で実行します。</block>
  <block id="eac6f02df6a7e3c70219adde0a26c9c1" category="list-text">HAペアの両方のノードでLIFの自動リバートを無効にします。</block>
  <block id="4d71038ff6c6532bb7d82441384470f1" category="paragraph"><block ref="6579825e76cb92aa00ca8ad4f32bae01" prefix="" category="inline-code"></block></block>
  <block id="002e3e6384dcf90dc6e7967cba2ee6c7" category="list-text">すべてのデータネットワークLIFのステータスを表示します。</block>
  <block id="5a9c5410d08d89a8b3f0c46ee069190f" category="list-text">クラスタ管理LIFのステータスを表示します。</block>
  <block id="d88f53684b62f348b22e820dcd51f84a" category="list-text">ノード2でホストされているStorage Virtual MachineからすべてのデータLIFを移行します。</block>
  <block id="ea4e6b7db1a1db6aff6b788a68e8d686" category="paragraph"><block ref="53f8a1d809484f583a730e9671c99c79" prefix="" category="inline-code"></block></block>
  <block id="2aaa62d480b70659ae894820f7b85741" category="admonition">このコマンドは、SAN以外のLIFのみを移行します。iSCSI LIFとFCP LIFの移行には使用できません。</block>
  <block id="4dfbfec0f820963f92c2e9df67d8be28" category="list-text">ノード2のデータアグリゲートをノード1に移行します。</block>
  <block id="6d349268e4e7c7b9b2536713464dff29" category="paragraph"><block ref="3756327a6e2fac3fae23f1b0d6800e53" prefix="" category="inline-code"></block></block>
  <block id="11b7fd852d44d3dc6b952c69e2b2eed2" category="list-text">クラスタ内のすべてのデータボリュームのステータスを表示します。</block>
  <block id="43ff3d66a1ca671f74a51bf0366ca150" category="list-text">を表示します<block ref="925cc8d2953eba624b2bfedf91a91613" prefix=" " category="inline-code"></block> イプシロンのステータスと所有権：</block>
  <block id="8ead6c1d1773ee5fd38d092b46c8aa5a" category="list-text">無効にします<block ref="46811af34041442e658091fcc8396589" prefix=" " category="inline-code"></block>：</block>
  <block id="4778382ed6ece42739c23383b849384c" category="paragraph"><block ref="951878822cbf275543ea1ac00cd5d2fa" prefix="" category="inline-code"></block></block>
  <block id="d3275211c28a655f3239d436c0ad9b3d" category="summary">ノード2（AFF A250）をNS224ドライブシェルフに変換し、ノード4（AFF A400）に接続します。</block>
  <block id="91e54adc7c63948d2bc033094f4f4ee8" category="paragraph">AFF A250 node2をNS224ドライブシェルフに変換し、AFF A400 node4に接続してから、node2からnode4にドライブを再割り当てします。</block>
  <block id="575f123dc232d761917e55473caaad7a" category="list-text">ノード2からすべてのネットワークケーブルを外します。</block>
  <block id="af881ada02a5ff45a792b5132b5dc590" category="list-text">ノード2をAFF A250シャーシから取り外します。</block>
  <block id="52885fceb67c760ddf25c2efb185c778" category="list-text">NVMeシェルフモジュール（NSM）をノード2のベイに挿入します。</block>
  <block id="bdbdd80897c0788773e2926936349dd7" category="list-text">ノード4の100GbEポートe0cとNSM Bのポートe0aをケーブル接続して、NSMをノード4に接続します。</block>
  <block id="530f824f291c9dbf82563102e66eb4ee" category="summary">ノード2からノード4にドライブを再割り当てする前に、ノード2をノード4に物理的に接続します。</block>
  <block id="e90f638890adabd702a0e4a41624e1e7" category="paragraph">AFF A250 node2をNS224ドライブシェルフに変換してAFF A400 node4に接続したら、node2に属していたドライブをnode4に再割り当てする必要があります。</block>
  <block id="f451745de9dc10b2155ba09d2c6a86fa" category="paragraph">ノード4で次の手順を実行します。</block>
  <block id="3ff02d1b5db59825508b26f5c12d7855" category="list-text">LOADERプロンプトで、ノード4をメンテナンスモードでブートします。</block>
  <block id="493f827b1132078fbdd11bc0ceceed47" category="list-text">すべてのドライブをノード2からノード4に再割り当てします。</block>
  <block id="eedfdc7d9365a1f9e29964c35c82e348" category="paragraph"><block ref="8cf81755f02bee986a80060b929f2335" prefix="" category="inline-code"></block></block>
  <block id="c8e281db9c8a31e8da74e7ff6bc12115" category="summary">ONTAP 9.7以前を実行しているコントローラでARLを手動でアップグレードする際に、OKMを使用して認証キーを管理します。</block>
  <block id="20c4be209ec6c65b4221fa6f09f2df42" category="inline-link-macro">オンボードキーマネージャを使用してストレージ暗号化を管理します</block>
  <block id="04f24e11b658105f38ef40a82c24839e" category="paragraph">* 注： AutoSupport は、ストレージ・システムを初めて設定したときに、デフォルトで有効になっています。AutoSupport はいつでも無効にできますが、常に有効にしておく必要があります。AutoSupport を有効にすると、ストレージシステムに問題が発生したときに、その問題や解決策を特定するのに非常に役立ちます。</block>
  <block id="cb6bc72e3e387b19e4fbc2f28ecc2940" category="list-text">設定<block ref="e0224203ce4fa326049e3e770300ce8f" prefix=" " category="inline-code"></block> 終了：<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block> または<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>。</block>
  <block id="e147253c0010bdd5968cb9b4b9ddf7dc" category="cell">外部キー管理ツール</block>
  <block id="acee5931a95d2a864a2cc97bd35f0778" category="list-text">node2のポートe0cおよびe0dの25GbEケーブルを、node4の任意の2つの25GbEオンボードポート（e0e、e0f、e0g、またはe0h）に接続して、一時的なクラスタ接続を作成します。</block>
  <block id="fe6bc0e7261673653a6a606cad425d7a" category="admonition">AFF A400システムでオンボードポートとしてFCポートを使用している場合は、移行中にクラスタ接続用に各ノードに25Gbイーサネットアダプタを取り付けます。</block>
  <block id="6a4be8cf9df45f4c45456ed242281e41" category="list-text">ポートe0aとe0bを使用して、AFF A400ノード間に25GbE HAインターコネクトケーブルを接続します。ポートをクロスコネクトしないでください。</block>
  <block id="ef5c1b93d72b03ecb85a660acc0e158e" category="list-text">ポートe3aとe3bを使用して、AFF A400ノードを100GbEクラスタインターコネクトケーブルで接続します。ポートをクロスコネクトしないでください。</block>
  <block id="58eaebf972358f1cf03d386a4ade1a0f" category="paragraph-title">次の手順</block>
  <block id="3c6ba9b5c38f48cb17c85b592674d539" category="paragraph"><block ref="3c6ba9b5c38f48cb17c85b592674d539" category="inline-link-macro-rx"></block></block>
  <block id="80a4f774da4aad689d87e38d2ee37cec" category="list-text">ノード4のLOADERプロンプトで、ノードをブートメニューでブートします。</block>
  <block id="d831a49d6e9a68e16b03819a4d93d5b3" category="paragraph">ノードが自動的にリブートし、/varファイルシステムの新しいコピーがロードされます。</block>
  <block id="02bee8118e509838b175dc6af02b1656" category="list-text">クラスタがクォーラムに参加するまで待ってから、クラスタノードが正常であることを確認します。</block>
  <block id="997eb7bba8074ae0f85e4289780ffed3" category="paragraph"><block ref="e21dfdb513f3d169faabea3a7c3b4d2e" prefix="" category="inline-code"></block></block>
  <block id="bda4a4c895c8daf31f2f07c2ea75784a" category="admonition">現在の状態では、HAペアとストレージフェイルオーバーは無効のままです。</block>
  <block id="2527cc683b8d8a3f55c18b809cd0d993" category="list-text">クラスタLIFをノード4の一時的な25Gクラスタポートに移動します。</block>
  <block id="453a6890d60e4080c71b10898159e292" category="paragraph"><block ref="141f671a5edc94f5cc9316f953bc9ffb" prefix="" category="inline-code"></block></block>
  <block id="1cc0c4fb70ea4ef3078ace7cb874c670" category="list-text">アップグレードするAFF A250クラスタでインターフェイスグループとデータVLANが使用されている場合は、この手順を実行します。そうでない場合は、に進みます <block ref="4b16e82b249f06e8e1072980655988c8" category="inline-xref-macro-rx"></block>。</block>
  <block id="f775e7a110c3b78dc0235ba28c368c60" category="paragraph">AFF A250システムとAFF A400システムでは、物理ネットワークポート名が異なります。そのため、ノード4でインターフェイスグループが正しく設定されておらず、VLANが削除される可能性があります。正しく設定されていないインターフェイスグループと削除されたVLANを確認し、必要に応じて修正します。</block>
  <block id="33698ba306347fd90f01d626d1abfcca" category="paragraph"><block ref="2b1b294cd9d0ee2bd18dd6c40a96b6a5" prefix="" category="inline-code"></block></block>
  <block id="2b393bdd35aaf14e4786dc05d3d2a2b0" category="paragraph"><block ref="ea2254c44ed515e6bbabb509521b400a" prefix="" category="inline-code"></block></block>
  <block id="373757bd79d829efe6cd3e1b7bdc29b1" category="paragraph"><block ref="b95325036a6ab6591c8c62dc75aa0c07" prefix="" category="inline-code"></block></block>
  <block id="e86b9bc23de1f214996444ef551bacb8" category="paragraph"><block ref="e86b9bc23de1f214996444ef551bacb8" category="inline-link-macro-rx"></block></block>
  <block id="19d2be7671048f96b330174181b1de57" category="list-text">AFF A250コントローラとAFF A400コントローラでは、同じONTAPリリースおよびパッチバージョンが実行されます。</block>
  <block id="683887c2109727babcb5b39c0d61e352" category="list-text">各AFF A400に、AFF A250で実行されているバージョンと同じバージョンのONTAPをネットブートしてインストールする必要があります。</block>
  <block id="f9262bd265958425983bc808f732d39c" category="list-text">各AFF A400のプライマリブートイメージとバックアップブートイメージのONTAPバージョンが同じである必要があります。</block>
  <block id="40b07a60976aa6fcd676d94878f5dad9" category="list-text">AFF A400クラスタが以前に設定されていた場合は、を実行して残りのクラスタ構成をクリアする必要があります<block ref="b433b76417b4f08166eb90cef3aa2a31" prefix=" " category="inline-code"></block> ブートメニューから選択します。</block>
  <block id="97e64cb5ae1558cb0463a2970e98dc26" category="list-text">両方のAFF A400コントローラがLOADERプロンプトでスタンバイになっています。</block>
  <block id="4698a416e17d630db63674e447dbfc5f" category="list-text">ストレージフェイルオーバーの自動ギブバックを無効にします。</block>
  <block id="80095ad672599fa958afdcb8727dacc2" category="paragraph"><block ref="f1c9a22463f8c06461f1da10d7161697" prefix="" category="inline-code"></block></block>
  <block id="60279cc87ea49c11eaa5d74c4e374034" category="paragraph"><block ref="566d3677c793a945309b816b922e48aa" prefix="" category="inline-code"></block></block>
  <block id="82cbf9b2779c49bd3e1a89ee2b5f5469" category="paragraph"><block ref="d40c04d5127ca63517b9339e7b3bbe72" prefix="" category="inline-code"></block></block>
  <block id="89f7cee20d9833c231c0e50fc41ce58d" category="paragraph"><block ref="89f7cee20d9833c231c0e50fc41ce58d" category="inline-link-macro-rx"></block></block>
  <block id="054943dd272f07ebc51955439845e874" category="list-text">ノード1のポートe0cとe0dからノード3の任意の2つの25GbEオンボードポート（e0e、e0f、e0g、またはe0h）に25GbEケーブルを移動して、一時的なクラスタ接続をノード3に移動します。</block>
  <block id="2fbb74e3e06daf149b588471e96a56a4" category="paragraph"><block ref="2fbb74e3e06daf149b588471e96a56a4" category="inline-link-macro-rx"></block></block>
  <block id="a78b7f334ca640e546ff8a35039a2f6d" category="paragraph">次の例のような出力が表示されます。</block>
  <block id="1a8aae2fd970a548f3432fc893e2e2a4" category="list-text">ローカルシステムIDの値を記録します（ノード3のシステムID）。また、「owner」列でノード1とノード2のシステムIDを記録します。</block>
  <block id="5f4acfc7e9721dc380c9f455a2759335" category="paragraph"><block ref="569b55012f0c87971717dcbb7fe0ce6b" prefix="" category="inline-code"></block></block>
  <block id="dac641b24757fdc949ee7247c4113ba1" category="paragraph"><block ref="afbb7843b974a758a0b43c8f36ebfe95" prefix="" category="inline-code"></block></block>
  <block id="bfdfbe3df70ea3584435d9a8c7e7cd9c" category="paragraph"><block ref="bfdfbe3df70ea3584435d9a8c7e7cd9c" category="inline-link-macro-rx"></block></block>
  <block id="d4475b94edb2d33fc8b6ba888ea6646a" category="paragraph">ノード3とノード4の両方でLOADERプロンプトがスタンバイになっていることを確認します。</block>
  <block id="873758a76f1010f1137e7bd76f1cefbd" category="list-text">ローカルシステムIDの値を記録します。これはノード4のシステムIDです。また、「owner」列でノード1とノード2のシステムIDを記録します。</block>
  <block id="c3e43ad38b28cdc94de3fd49e3347b93" category="paragraph"><block ref="991070c54d3d7b822feec6be9693fee8" prefix="" category="inline-code"></block></block>
  <block id="b02db68cec23a51db526132de61ca05e" category="list-text">node2のルートアグリゲートがの出力に報告され、アグリゲートがオンラインになっていることを確認します。</block>
  <block id="e2c52cb2e34e893afee819116adecafb" category="paragraph"><block ref="e2c52cb2e34e893afee819116adecafb" category="inline-link-macro-rx"></block></block>
  <block id="0d852f04ea9e05e14f3341677cfe1ec3" category="list-text">ノード3のLOADERプロンプトで、ノードをブートメニューでブートします。</block>
  <block id="8871153c553f28f590babbf4847f1774" category="list-text">冗長性を確保するために、マルチパスハイアベイラビリティ（MPHA）ケーブルをNS224シェルフに接続します。ノード3の100GbEポートe0dとNSM Bのポートe0bを接続し、ノード4の100GbEポートe0dとNSM Aのポートe0aを接続します。</block>
  <block id="8582a774c20e728e955aa1abe472aef0" category="list-text">HAポートe0aとe0bがノード間で接続されていることを確認します。</block>
  <block id="dba88c9d0ba00806556e1233e41bcf14" category="list-text">クラスタポートe3aとe3bがノード間で接続されていることを確認します。</block>
  <block id="12ebe392929ef1bc96f493b7c71832c1" category="list-text">両方のノードのすべてのクラスタネットワークLIFをホームポートに移行します。</block>
  <block id="8d590ee6ed5dff34f56afdb6a0802e90" category="list-text">クラスタネットワークLIFのホームポートを確認します。</block>
  <block id="ac74cf8a52d92025e28cd87a3aa57fe5" category="paragraph"><block ref="2bbcd71ec298833035e8f3c13150e697" prefix="" category="inline-code"></block></block>
  <block id="11945612fb52dde0264600b02ee87b76" category="list-text">すべてのデータLIFのホームノードとホームポートを設定します。停止しているLIFがある場合は、LIFの管理ステータスをに設定します<block ref="46c48bec0d282018b9d167eef7711b2c" prefix=" " category="inline-code"></block> 次のコマンドをLIFごとに1回入力します。</block>
  <block id="b2e9444b2e3d3f6bcd5b8053418d9f98" category="paragraph"><block ref="b04273b4623b1fb5400a1445280a00fc" prefix="" category="inline-code"></block></block>
  <block id="9eaa084ea5e1fc23b5bd8f4e4b31ae16" category="list-text">ストレージフェイルオーバーの自動ギブバックを有効にします。</block>
  <block id="452b3b4e54b69d07570137489de879c0" category="paragraph"><block ref="06113f79bc639d145a6e40cfdd6b4211" prefix="" category="inline-code"></block></block>
  <block id="a48dffce96c7d2cee50452bbbe3c3149" category="list-text"><block ref="f1c84a71e0779351e0f5be10141fff81" prefix="" category="inline-code"></block></block>
  <block id="1b0afd0b9e1ef791af87236c19a70f16" category="list-text"><block ref="7f5b95324bf0335821a8f979872431c9" prefix="" category="inline-code"></block></block>
  <block id="6dcc62df7a079d79f6374d9c17d2120e" category="list-text"><block ref="169aa9029e0b9363f74914feb183b562" prefix="" category="inline-code"></block></block>
  <block id="7345831b6bc224c8333a4460721cb07f" category="summary">ARLを使用して同じシャーシ内のコントローラモデルをアップグレードする場合に発生する可能性がある問題に関する情報。</block>
  <block id="d66193c9edc97e7077c88870d9d9ad6c" category="summary">ARLを使用して同じシャーシのコントローラモデルをアップグレードする場合は、必要に応じてノード2でキー管理ツールの設定をリストアします。</block>
  <block id="9707fefafa207e02950a3cdf70cdbd1b" category="summary">ARLを使用して同じシャーシ内のコントローラモデルをアップグレードする場合は、交換用コントローラモジュールでノード2をブートします。</block>
  <block id="91ff7bbceee45b872acd93e9fe14cf71" category="doc">交換用システムモジュールでノード2をブートします</block>
  <block id="56c7968a1d140906ab8313162854322d" category="cell">AFF A700の略</block>
  <block id="ec5c696a4bc57321a5a79c91b886d5ff" category="cell">FAS9000</block>
  <block id="a40fd127e913949d077070eebd44a757" category="summary">ARLを使用して同じシャーシ内のコントローラモデルをアップグレードする場合は、ノード2のルート以外のアグリゲートをノード1に再配置します。</block>
  <block id="c9e9875d10f94682a65eb69de80acd4b" category="paragraph">ノード2を交換用システムモジュールと交換する前に、ノード2が所有するルート以外のアグリゲートをノード1に再配置する必要があります。</block>
  <block id="f435d69757080c1b6c8e0081cb4eb218" category="summary">第2段階、第3段階、または第5段階でARLを使用して同じシャーシ内のコントローラモデルをアップグレードすると、移行後にLIFがオンラインにならない。</block>
  <block id="23f6a04a70ae620e179c4bb34a6520dc" category="summary">ARLを使用して同じシャーシ内のコントローラモデルをアップグレードする場合は、ノードを準備し、一連の事前確認を実行します。</block>
  <block id="b42d3a44eaf5edd7cdebe56ca2650ddd" category="paragraph">コントローラの交換プロセスでは、まず一連の事前確認が実行されます。また、手順の後半で使用するために元のノードに関する情報を収集し、必要に応じて使用中の自己暗号化ドライブのタイプを特定します。</block>
  <block id="9b9f86603d6a389b86c0d8c30e0f7250" category="list-text">古いコントローラで実行されているサービスプロセッサ（SP）またはベースボード管理コントローラ（BMC）ファームウェアのバージョンを表示します。</block>
  <block id="b52dffdca17fbd5fb6154cabb622a6ef" category="paragraph">サポートされているSPまたはBMCファームウェアのバージョンがあることを確認します。</block>
  <block id="3906be0ea919168a85bb4ff43aef9790" category="cell">SPまたはBMC</block>
  <block id="0349522c033b4c9e30093a752e19a634" category="cell">最小ファームウェアバージョン</block>
  <block id="8fd3ca5f66dff5be16e79560dd28171e" category="cell">AFF A220の略</block>
  <block id="396262ee936f3d3e26ff0e60bea6cae0" category="cell">BMC の場合</block>
  <block id="b425ceaeb08cb8e20fa627c93092acbc" category="cell">11.9P1</block>
  <block id="4fbc8445e0d6cdbbc8011982cd328f69" category="cell">AFF A200</block>
  <block id="674769e3326f8cf937af4282f2815c02" category="cell">SP</block>
  <block id="7c620d9660096b78e4177d780ca02b6e" category="cell">5.11P1</block>
  <block id="b6000f9eed7f8ea9ee4632bd2f77961a" category="cell">AFF C190の略</block>
  <block id="489c8707e7f92883a9ec4c6edf2f6a9a" category="cell">FAS2620</block>
  <block id="16327cd02ebd080bd4ab1439ff960ddc" category="cell">FAS2720</block>
  <block id="7ddd1afbac1a277de03fa094daad77c5" category="paragraph">クラスタ内の各ノードには、独自のNetAppライセンスファイル（NLF）が必要です。</block>
  <block id="30dd71524a143fcc15ccb8b0a68ac138" category="paragraph">NLFがない場合は、クラスタの現在ライセンスされている機能を新しいコントローラで使用できます。ただし、ライセンスされていない機能をコントローラで使用するとライセンス契約に違反する可能性があるため、アップグレードの完了後に新しいコントローラ用のNLFをインストールする必要があります。</block>
  <block id="eea8e10b14d24c73640832e981f14a14" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> NLFを取得できる_ NetApp Support Site _にリンクします。NLFは、_ソフトウェアライセンス_の_ My Support_セクションで入手できます。必要なNLFがサイトにない場合は、NetAppの営業担当者にお問い合わせください。</block>
  <block id="60d1099ae1e93eaac7e66c4226617560" category="summary">同じシャーシ内のコントローラモデルをアップグレードするARL手順を使用するかどうかを決定します。</block>
  <block id="8a1d06fd27bf0bfc6535b6a49185e591" category="cell">AFF A150</block>
  <block id="cac76ada4fbfca68ed190eb21810e1af" category="cell">FAS2820</block>
  <block id="0ad9e0a8a319618923e172d4571038eb" category="summary">ARLを使用して同じシャーシのコントローラモデルをアップグレードする場合は、必要に応じてアップグレード後のnode1でキー管理ツールの設定をリストアします。</block>
  <block id="f41084761f1192d11c824e139538a13d" category="summary">ARLを使用して同じシャーシ内のコントローラモデルをアップグレードする場合は、必要に応じてストレージ暗号化を設定し、SSL証明書をインストールし、キー管理サーバをセットアップします。</block>
  <block id="82896d30ec8a78dd386c091a8c2121e6" category="inline-link-macro">ノード1のシステムモジュールを交換します</block>
  <block id="644e220a44e1ff19f9d586b2ec3ee2d5" category="summary">アップグレードを開始する前に、同じシャーシ内のコントローラモデルをアップグレードするための正しいハードウェアがあることを確認してください。</block>
  <block id="4e106a6c623eb6811b42be00dbde2ef3" category="cell">コントローラモジュール×2</block>
  <block id="327579b68dffec79f2bcb176142f3d56" category="cell">2台のコントローラと2台のNVRAMモジュール</block>
  <block id="99b9437fef3a8474ef15fe95bfd91b50" category="summary">ARLを使用して同じシャーシ内のコントローラモデルをアップグレードする場合に、必要に応じてNVEまたはNAE用に新しいコントローラモジュールを設定します。」</block>
  <block id="6422bfca9827bfd67034aad22b0eeb27" category="paragraph">オンボードキーマネージャを使用してNVEまたはNAEを設定します。</block>
  <block id="d80988540e7f7055a5ccd5e307e90b01" category="paragraph">外部キー管理を使用してNVEまたはNAEを設定します。</block>
  <block id="dc8ac74e6e135f34ace5625adffc8c72" category="summary">ARLを使用して同じシャーシ内のコントローラモデルをアップグレードする場合は、ルート以外のアグリゲートとNASデータLIFをノード1からノード2に移動し、ノード1のリソースをリストアします。</block>
  <block id="adf6e8c3466e9682231d09f39035c530" category="paragraph">ノード1をシステムのアップグレード用交換モジュールと交換する前に、ルート以外のアグリゲートとNASデータLIFをノード1からノード2に移動してから、ノード1のリソースを交換用システムで実行されているノード1にリストアする必要があります。このプロセスは主に自動化されており、ステータスを確認するために処理が一時停止します。</block>
  <block id="2e0d59b44e3ade50ff039c4f5d42cc34" category="paragraph">アップグレード手順の実行中、リモート LIF は SAN LUN へのトラフィックを処理します。アップグレード時に、クラスタまたはサービスの健常性のために SAN LIF を移動する必要はありません。node1を交換用システムとしてオンラインにしたら、LIFが正常で、適切なポートに配置されていることを確認する必要があります。</block>
  <block id="1716fadb95711489f7c9319ba91c90a1" category="summary">ARLを使用して同じシャーシ内のコントローラモデルをアップグレードする場合は、ストレージ暗号化の設定と管理、認証キーの管理、SnapMirror関係の休止が行われます。</block>
  <block id="658ce0717b565ad383d87651864b67d1" category="summary">HAペアが有効になっていることを確認し、ノード1とノード2のストレージアクセスとLIFを確認し、同じシャーシ内のコントローラモデルをアップグレードしたあとにアグリゲートの所有権を確認します。</block>
  <block id="0af228704da4f749752cb372b85f47ae" category="list-text">[[unset_maxwait]]構成で自己暗号化ドライブを使用している場合は、を設定します<block ref="fd93f52ab7757855a2e3e5cbb717ab40" prefix=" " category="inline-code"></block> 変数をに設定します<block ref="3262d48df5d75e3452f0f16b313b7808" prefix=" " category="inline-code"></block> （例：In_Boot node2と交換用システムモジュール_、 <block ref="30eda0c27e5ac7524ed5f5f264f13489" category="inline-link-macro-rx"></block>）を使用している場合は、次のように変数を設定解除</block>
  <block id="19173d17acb08bb0507350eb203779c8" category="summary">アップグレード構成にARLを使用できるかどうかを確認します。古いシステムシャーシとディスクはそのまま使用できます。</block>
  <block id="95144cfdd742178c38add09e40185465" category="paragraph">アグリゲートの再配置（ARL）を使用して古いシステムシャーシとディスクを維持できるかどうかを理解するには、システムのアップグレード構成とONTAPのバージョンによって異なります。</block>
  <block id="5b29cd0b8848fbfc7c43edd22b16cf04" category="section-title">スイッチ接続のクラスタ</block>
  <block id="38622c9aae2baa5dfb1bdeeb2c31c5a3" category="summary">ARLを使用して同じシャーシ内のコントローラモデルをアップグレードする場合、ノード1のノード2のNASデータLIFがノード1からノード2に再配置されたことを確認します。</block>
  <block id="25c0a64ebb3d4dec1d638d209b3b73a2" category="paragraph">これらのチェックが完了すると、ルート以外のアグリゲートとNASデータLIFが、交換用コントローラで実行中のnode2に再配置されます。</block>
  <block id="038a1f98f287c3e58631ad2264c784b5" category="summary">同じシャーシのコントローラモデルをARLでアップグレードする際に、交換用システムモジュールをノード2に取り付けます。</block>
  <block id="7339c5b8269b308a3bb75b606b220a40" category="doc">交換用システムモジュールをノード2に取り付けます</block>
  <block id="d1cf73ac3312e046217517b06817c8be" category="list-text">取り外すコントローラから、コンソール、管理、SASストレージ、データネットワークのケーブルをすべて外します。</block>
  <block id="0999b94892b1b34eb0ef08c34b267bc1" category="summary">ARLを使用して同じシャーシ内のコントローラモデルをアップグレードする場合は、ノード2のインストールと交換用モジュールを確認します。</block>
  <block id="0774c7bfeafd6a8db85f6f40e93164c5" category="paragraph">ノード2のインストールと交換用システムモジュールを確認する必要があります。物理ポートは変更されないため、古いnode2の物理ポートを交換するnode2にマッピングする必要はありません。</block>
  <block id="16c540fdea11cde8dcdbc04d5a6b8bf4" category="summary">ARLを使用して同じシャーシ内のコントローラモデルをアップグレードするには、特定のツールとドキュメントが必要です。</block>
  <block id="60990f5a7d4c2de72ffce9a721cd665f" category="summary">ARLを使用して同じシャーシ内のコントローラモデルをアップグレードする場合は、ノード1のインストールと交換用モジュールを確認します。</block>
  <block id="b1a65206ecba20bb5f74f28f81b4f20b" category="admonition">アップグレード中、ネットワークポートとその接続は変更されません。すべてのポートを正しいブロードキャストドメインに配置し、ネットワークポートの到達可能性を変更しないでください。ただし、 LIF を node2 から node1 に戻す前に、ネットワークポートの到達可能性と健全性ステータスを確認する必要があります。</block>
  <block id="3a3f289393d9aae4f5403ed3ce658b92" category="paragraph">ステージ3では、アップグレードしたシステムモジュールでnode1をブートし、アップグレードしたnode1のインストールを確認します。NetApp Volume Encryption（NVE）を使用している場合は、キー管理ツールの設定をリストアします。ノード1のルート以外のアグリゲートとNASデータLIFをnode2からアップグレードしたnode1に再配置し、SAN LIFがnode1に存在することを確認します。</block>
  <block id="64a849a8de630f1ea4ad68009f78a51d" category="inline-link-macro">交換用システムモジュールでノード1をブートします</block>
  <block id="1cf4820f0a2cb46c48512331c3f04acd" category="inline-xref">AFF A220、AFF A200、AFF C190、FAS2620、またはFAS2720のコントローラモジュールを交換してください</block>
  <block id="c5c5d4bed82b3aa15921eef0f13a3aa2" category="section-title">AFF A220、AFF A200、AFF C190、FAS2620、またはFAS2720のコントローラモジュールを取り外します</block>
  <block id="359b2f64ed46d9bc640532f2fd8810c0" category="list-text">ケーブルマネジメントデバイスに接続しているケーブルをまとめているフックとループストラップを緩め、システムケーブルと SFP をコントローラモジュールから外し（必要な場合）、どのケーブルが何に接続されていたかを記録します。</block>
  <block id="73ffa1532dd710d7eb1520cb730fb392" category="paragraph">ケーブルはケーブルマネジメントデバイスに収めたままにします。これにより、ケーブルマネジメントデバイスを取り付け直すときに、ケーブルを整理する必要がありません。</block>
  <block id="3e5a02473a086978bae6a6516ad46c5e" category="list-text">ケーブルマネジメントデバイスをコントローラモジュールの右側と左側から取り外し、脇に置きます。</block>
  <block id="1b96f3aa099b152fc864dedb115af912" category="list-text">カムハンドルのラッチをつかんで解除し、カムハンドルを最大限に開いてコントローラモジュールをミッドプレーンから離し、両手でコントローラモジュールをシャーシから外します。</block>
  <block id="5fb9af22ffedd74df1492c91f96b8d7a" category="list-text">コントローラモジュールを裏返し、平らで安定した場所に置きます。</block>
  <block id="0dc0820d363c65f7e12beec6160b793f" category="list-text">コントローラモジュールの端をシャーシの開口部に合わせ、コントローラモジュールをシステムに半分までそっと押し込みます。</block>
  <block id="73c39df93369189180566421495bd86b" category="list-text">カムハンドルを開いた状態で、コントローラモジュールをミッドプレーンまでしっかりと押し込んで完全に装着します。コントローラモジュールが完全に装着されると、ロックラッチが上がります。カムハンドルをロック位置まで閉じます。</block>
  <block id="06fe1e1c3556d47d3a40caee57ba2411" category="section-title">AFF A700またはFAS9000コントローラとNVRAMモジュールを交換してください</block>
  <block id="98b9e41d81ea8470149a461f166a4b92" category="summary">コントローラのアップグレード後に古いシステムが動作しなくなったことをNetAppに通知します。</block>
  <block id="fd03f78134ad299c30781abefe876b6e" category="summary">ARLを使用して同じシャーシ内のコントローラモデルをアップグレードする場合は、SnapMirror転送と関係を再開します。</block>
  <block id="0c266b0ddf80e06776f6545018e3be7b" category="summary">ARLを使用して同じシャーシ内のコントローラモデルをアップグレードする場合は、ノード2をシャットダウンしてラックまたはシャーシから取り外します。</block>
  <block id="a08203ab52ab6d68a5604711cce7c11e" category="summary">ARLを使用して同じシャーシ内のコントローラモデルをアップグレードする場合は、交換用コントローラモジュールでノード1をブートします。</block>
  <block id="d667641e845b5f1c132a905ef22a2ba3" category="summary">ARLを使用して同じシャーシ内のコントローラモデルをアップグレードする場合、さまざまな段階でシステムがクラッシュする（リブート、パニック、または電源再投入）ことがあります。</block>
  <block id="f5ef11ad502e748c59323d68be5d0747" category="summary">コントローラハードウェアをアップグレードするには、古いシステムを交換用システムに変換し、古いシステムのシャーシとディスクを残します。</block>
  <block id="9e87e1dea37ce673e27a23a144a4e0ad" category="cell">交換用システム</block>
  <block id="eae7ed824c301543a7e09d88d74d7b19" category="cell">サポートされるONTAPのバージョン</block>
  <block id="c0aa270d19e4484079bd0c1488dd7e54" category="cell">9.10.1P15、9.11.1P11、9.12.1P5以降</block>
  <block id="fe8a27b3504b515f0bd7508cfd89776a" category="paragraph">9.13.1以降（FAS2820）</block>
  <block id="5abae7190ce598d45fe390e44304cde0" category="cell">9.13.1以降</block>
  <block id="69fd94bb4e9440260d76785fb2e5370b" category="cell">9.10.1P10、9.11.1P6以降</block>
  <block id="9c1e88e5963163799eaba4d977d7d52f" category="paragraph">上記の表のONTAPの最小バージョンは必須です。これらのバージョンのONTAPにはサービスプロセッサまたはベースボード管理コントローラ（BMC）のファームウェアバージョンが適用されています。このファームウェアバージョンは、アップグレード時にシャーシ内に異なるコントローラタイプを混在させるために必要です。</block>
  <block id="1f08ef6e3750d69789334fc412377b8b" category="list-text">ONTAPのバージョンでサポートされていないスイッチおよびアップグレード先の交換用システムがある場合は、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> Hardware Universe にリンクするには、次の手順を実行します。</block>
  <block id="c6d40070c0f6f6a69481f2755cd2ca3d" category="summary">ARLを使用して同じシャーシ内のコントローラモデルをアップグレードするために必要な参照用コンテンツとWebサイト。</block>
  <block id="61ade0ef1111239ef33a751208b321eb" category="inline-link-macro">「system controller replace」コマンドを使用して、同じシャーシ内のコントローラモデルをアップグレードします</block>
  <block id="654c7caa1182ea592a8682474243e9b1" category="summary">ARLを使用して同じシャーシ内のコントローラモデルをアップグレードする場合、ノード2のノード1のNASデータLIFがノード2からノード1に再配置されたことを確認します。</block>
  <block id="1fa11ae5ee8ea18f6cb8353961e9a024" category="paragraph">ステージ5では、アップグレードしたノード2用に受け取った新しいシステムモジュールをインストールし、次にノード2をネットブートします。</block>
  <block id="de5811c666f3438943e03926d9b216fd" category="summary">同じシャーシ内のコントローラモデルをアップグレードするARL手順の仕組みを理解します。</block>
  <block id="24d8d7f98a89f04d7947553a1d35d0d3" category="inline-link-macro">ステージ2：リソースの再配置とnode1の撤去</block>
  <block id="319a21b745009180cde67ee4a1b3a4a9" category="paragraph">ステージ2では、ノード1のルート以外のアグリゲートとNASデータLIFをノード1からノード2に再配置します。このプロセスは主に自動化されており、ステータスを確認するために処理が一時停止します。この処理は手動で再開する必要があります。必要に応じて、障害が発生したアグリゲートまたは拒否されたアグリゲートを再ノード1を撤去する前に、手順 の後半で使用するために情報をメモしておきます。ネットブートの準備は、手順 のあとから行うこともできます。</block>
  <block id="6f3ef0e4028f382323a2ae0f3917bcaf" category="inline-link-macro">ステージ3：交換用システムモジュールでノード1をブートします</block>
  <block id="267d546f79d9773e5dcd8c8c02f5f0dc" category="list-text">アップグレード後のnode1は、node1アグリゲートのホーム所有者で現在の所有者です</block>
  <block id="663c963d479132d6dd08963c3d3fa6bc" category="inline-link-macro">ステージ4：リソースの再配置とノード2の撤去</block>
  <block id="02f2f9641c85a8db356647e8893d98f5" category="inline-link-macro">ステージ5：交換用システムモジュールをノード2に設置します</block>
  <block id="74b38fc0176f87b24ddc1621aaae7baa" category="inline-link-macro">ステージ6：交換用システムモジュールでノード2をブートします</block>
  <block id="826466190f8ccac159cbf60cf120c8fd" category="summary">ARLを使用して同じシャーシ内のコントローラモデルをアップグレードする場合は、対応する交換用ノード2システムモジュールを交換したあとに、それらのモジュールをネットブートする必要があります。</block>
  <block id="4900049201a6af77c5ee289d1d927b7f" category="list-text">交換用コントローラモジュールでnode2がブートし、ブートメニューオプションが表示されるまで待ちます（次の出力を参照）。</block>
  <block id="794cda372e4a8688a690d92ff5d37486" category="list-text">ノード1で、システムの日付、時刻、およびタイムゾーンを確認します。</block>
  <block id="a4bac589c9731b4d185716354e684665" category="paragraph">node2の場合、<block ref="d18fd3db938a26ebbd3f74de41f0b73f" prefix=" " category="inline-code"></block> アップグレードするノード1のノード1である必要があります。</block>
  <block id="b2573e3929d9e0e5f247b35cdab987cd" category="summary">ARLを使用して同じシャーシ内のコントローラモデルをアップグレードする場合は、ノード2のHAペアを無効にしてノード1をシャットダウンします。</block>
  <block id="5d629f141961a74282ed5faad7d9fd6d" category="summary">ARLを使用して同じシャーシ内のコントローラモデルをアップグレードする場合は、対応する交換用システムモジュールの交換後にノード1をネットブートする必要があります。</block>
  <block id="88af1dd7397a85d0d0a5307af0325f9e" category="paragraph">イメージを設定するには、ネットブートのあとにを実行します<block ref="b433b76417b4f08166eb90cef3aa2a31" prefix=" " category="inline-code"></block> コマンドを実行します。コントローラモジュールが以前に別のクラスタで使用されていた場合は、<block ref="b433b76417b4f08166eb90cef3aa2a31" prefix=" " category="inline-code"></block> コマンドは、ブートメディア上の残りの設定を消去します。</block>
  <block id="f4fe41582e347c8727fbdf631e2f1423" category="summary">ARLを使用して同じシャーシ内のコントローラモデルをアップグレードするときに発生する可能性があるアグリゲートの再配置エラーをトラブルシューティングします。</block>
  <block id="c4eeac6e7cbe204225f518d511b60b39" category="list-text">ステージ4のあと、ノード2を新しいシステムモジュールに交換したとき。</block>
  <block id="ba780a1afde1320c3ba0c2aede19709b" category="paragraph">一部の機能にはライセンスが必要ですが、1つ以上の機能を含む_packages_として発行されます。クラスタで使用する各機能のキーは、クラスタ内の各ノードに独自に設定する必要があります。</block>
  <block id="b1b0bb8b99a226159195567a43ecbedc" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ONTAPの新しい28文字のライセンスキーを取得できる_ NetApp Support Site _にリンクします。キーは、 _ ソフトウェアライセンス _ の _ マイサポート _ セクションにあります。必要なライセンスキーがサイトにない場合は、ネットアップの営業担当者にお問い合わせください。</block>
  <block id="ba4ea899de86ff42db0d400d0abb0e05" category="list-text">OKMの認証をリストアします。</block>
  <block id="9eec05f535630470b7cd5789cfe1dfaf" category="paragraph">ステージ1では、事前確認を実行し、必要に応じてアグリゲートの所有権を修正します。オンボードキーマネージャを使用してストレージ暗号化を管理し、SnapMirror関係を休止できる場合は、特定の情報を記録する必要があります。</block>
  <block id="793f40527b8eabb8ea4394a56656fdba" category="admonition">オンボードキーマネージャ（OKM）を使用したNetApp Volume Encryption（NVE）またはNetApp Aggregate Encryption（NAE）を使用している場合は、手順の後半の工程でキー管理ツールの再同期を実行できるように、キー管理ツールのパスフレーズを準備しておいてください。</block>
  <block id="c1aae218bfb2195459b844de9931aaa9" category="paragraph">ステージ1では、事前確認を実行し、必要に応じてアグリゲートの所有権を修正します。OKMを使用してストレージ暗号化を管理し、SnapMirror関係を休止できる場合は、特定の情報を記録する必要があります。</block>
  <block id="0b24a531934791ccba401c74f7b872ae" category="sidebar">ステージ2。リソースを再配置してnode1を撤去します</block>
  <block id="5ceb77f8e2c1e3cdd2daa06e83ac5f9d" category="sidebar">ステージ 3 ：交換用システムモジュールでノード1をブートします</block>
  <block id="e5985dd18c7bc7d6b7d0f8d0b77dc81a" category="sidebar">ステージ4。リソースを再配置してノード2を撤去します</block>
  <block id="5dd6606e32426e4ac475f3467376f846" category="sidebar">ステージ5。交換用システムモジュールをノード2に取り付けます</block>
  <block id="b04ee562ceae44380463be3b60eafa2d" category="sidebar">ステージ6。交換用システムモジュールでノード2をブートします</block>
  <block id="9219c8535d9ace4d574d9ba36c9b71bf" category="cell">古いシステムシャーシとディスクをそのまま使用して、システムを無停止でアップグレードするために必要なアグリゲートの再配置手順について説明します。</block>
  <block id="e6cf1502d2fa79200a1dc7507e20d7e9" category="paragraph">セットアップが正しいことを確認するには、HAペアを有効にします。また、ノード3とノード4が相互にストレージにアクセスできること、およびクラスタの他のノードに属するデータLIFをどちらも所有していないことを確認します。さらに、ノード3がノード1のアグリゲートを所有し、ノード4がノード2のアグリゲートを所有していること、および両方のノードのボリュームがオンラインであることを確認します。</block>
  <block id="961d48b51e00775e9eb17a9748c2f431" category="paragraph">元のノードのアップグレードをサポートするには、特定の情報を収集する必要があります。これには、ノードID、ポートとLIFの詳細、ライセンスキー、IPアドレスが含まれます。</block>
  <block id="931f21021804a7719d75aa6cc7256b0d" category="paragraph">次のワークシートを使用して情報を記録し、あとで手順で使用できます。</block>
  <block id="f0ab0f3ccd59172557357748401a0cb3" category="paragraph">ノード 3 とノード 4 を手順の後半で物理的にラックに設置したあと、ネットブートが必要になることがあります。ネットブートという用語は、リモート・サーバに保存された ONTAP イメージからブートすることを意味します。ネットブートを準備するときは、システムがアクセスできるWebサーバにONTAP 9ブートイメージのコピーを配置します。</block>
  <block id="8017af71edcef2a167a50b03ad9de6f1" category="paragraph">ノード 1 を撤去するには、自動処理を再開して、ノード 2 と HA ペアを無効にし、ノード 1 を正しくシャットダウンします。手順の後半の工程で、ノード1をラックまたはシャーシから取り外します。</block>
  <block id="fea14900850d7c1ff75c44846767e25e" category="paragraph">ノード2をノード4に交換する前に、ノード2が所有するルート以外のアグリゲートとNASデータLIFをノード3に再配置します。</block>
  <block id="e9a5b26de7b20b8cdefb00d91a94616b" category="paragraph"><block ref="7679804b715af0ea0e56302f79c4f9b8" prefix="" category="inline-code"></block></block>
  <block id="fcff81c7528d1100eb58e37ad90535bd" category="admonition">オンボードキーマネージャを使用したNetApp Volume Encryption（NVE）またはNetApp Aggregate Encryption（NAE）を使用している場合は、手順の後半の工程でキー管理ツールの再同期を実行できるように、キー管理ツールのパスフレーズを準備しておいてください。</block>
  <block id="1cb0cfe1b06273ad55b3f7189d138bb6" category="paragraph">この手順には、手順を自動化するための手順が用意されています。この手順では、自動ディスク割り当てとネットワークポートの到達可能性チェックを使用して、コントローラのアップグレードを簡易化します。</block>
  <block id="7903419bce057c444e1bce59010158ec" category="paragraph">対応する交換用システムモジュールを交換したら、node1をネットブートする必要があります。ネットブートという用語は、リモート・サーバに保存された ONTAP イメージからブートすることを意味します。ネットブートの準備では、システムがアクセスできるWebサーバにONTAP 9ブートイメージのコピーを追加します。</block>
  <block id="4524533c84ef78e7e46b023d69fd771f" category="paragraph">ノード2でネットワーク設定を確認し、ノード1からノード2にアグリゲートを再配置する前に、現在ノード1にあるノード2に属するNASデータLIFがノード1からノード2に再配置されていることを確認します。また、SAN LIFがノード2に存在することも確認する必要があります。</block>
  <block id="aeadb581bc234293016c883a2bc49cc9" category="paragraph">ノード1を撤去するには、自動処理を再開して、ノード2でHAペアを無効にし、ノード1を正しくシャットダウンします。</block>
  <block id="374c76f74637c44ca649d6a92a52de14" category="paragraph">ノード1でネットワーク設定を確認し、ノード2からノード1にアグリゲートを再配置する前に、現在ノード2にあるノード1に属するNASデータLIFがノード2からノード1に再配置されていることを確認します。また、 SAN LIF が node1 に存在することも確認する必要があります。</block>
  <block id="656030f2bc1d7ad32243a38c007d0770" category="paragraph">交換用システムモジュールでノード1をブートしたら、正しく取り付けられていることを確認します。node2 がクォーラムに参加するまで待ってから、コントローラの交換処理を再開する必要があります。</block>
  <block id="fc654fff4abe048148189ff6fa5e3c9c" category="paragraph">セットアップが正しいことを確認するには、HAペアが有効になっていることを確認します。また、ノード1とノード2がお互いのストレージにアクセスできること、およびクラスタの他のノードに属するデータLIFをどちらも所有していないことを確認します。さらに、すべてのデータアグリゲートが正しいホームノードにあること、および両方のノードのボリュームがオンラインであることを確認します。新しいノードの 1 つにユニファイドターゲットアダプタがある場合は、ポート設定をすべてリストアする必要があり、場合によってはアダプタの使用方法の変更が必要になることがあります。</block>
  <block id="37e06fbb743ab1c1935f7d96672ee924" category="paragraph">対応する交換用ノード2のシステムモジュールを交換したあと、モジュールのネットブートが必要になる場合があります。ネットブートという用語は、リモート・サーバに保存された ONTAP イメージからブートすることを意味します。ネットブートを準備するときは、システムがアクセスできるWebサーバにONTAP 9ブートイメージのコピーを配置します。</block>
  <block id="c6c7619b1c0744976ce686ab06900424" category="paragraph">ステージ1では、アップグレードに適したハードウェアがあることを確認し、事前確認を実行します。また、必要に応じてアグリゲートの所有権も適切であることを確認します。オンボードキーマネージャを使用してストレージ暗号化を管理し、SnapMirror関係を休止できる場合は、特定の情報を記録しておく必要があります。</block>
  <block id="36596c0816df78df5e957f4a98189433" category="inline-link">バージョンが混在したONTAPクラスタ</block>
  <block id="26e45a92e217288c9847a5d2ced10530" category="admonition">NetAppでは、Storage Virtual Machine（SVM）ごとに、ルートボリュームを移動する前にクラスタ内のルート以外のすべてのボリュームを移動し、この手順を一度に1つのSVMで実行することを推奨しています。</block>
  <block id="1c36e2804cb1ec373c2a554d3b816849" category="paragraph"><block ref="5f689443af4fd8e259550080d375f644" prefix="" category="inline-code"></block></block>
  <block id="d2d22984b72e7ba1d65fc825394c313c" category="list-text">ボリュームの移動元のノードのアグリゲートと同じStorage Virtual Machine（SVM）に新しいアグリゲートを追加します。</block>
  <block id="2c8d2f1858b46af1d060d624e505260e" category="paragraph"><block ref="f29152c00006194501357c829a7f4b86" prefix="" category="inline-code"></block></block>
  <block id="4cef67003a8adca49d8167b358c74cea" category="paragraph"><block ref="91027baa05930eb40461bd19dd18c1f8" prefix="" category="inline-code"></block></block>
  <block id="55624c527767c98cf329affc8ee793ff" category="paragraph"><block ref="ad4a5be27a2f6fb508f264fe36815259" prefix="" category="inline-code"></block></block>
  <block id="bcdf35f312e121b937f30c6b6c19f38a" category="paragraph"><block ref="aae09c6a4a7dbfd246e162a6aceb9c76" prefix="" category="inline-code"></block></block>
  <block id="cc3a467b8580d41426d4329faee0f040" category="paragraph"><block ref="f2384b5c154a2111fb6276b4aca913cf" prefix="" category="inline-code"></block></block>
  <block id="bffd5b081e9a5849648039713909f29e" category="paragraph"><block ref="0b16dbbb7b08013a425b1eda1ac6c38b" prefix="" category="inline-code"></block></block>
  <block id="ce294e2d50479fda57c6fd56279415cc" category="paragraph"><block ref="fb8ac527e5a233ade0c11a4584eca81d" prefix="" category="inline-code"></block></block>
  <block id="c773b38bfd21b7a35d0d8783b04fa05f" category="inline-link">volume move start コマンドを使用して、既存のボリュームの暗号化を有効にします</block>
  <block id="666b05db74464377ceeeff39f469bcde" category="paragraph"><block ref="e31e4085164f9a5d9e1c0ec1ca25fc65" prefix="" category="inline-code"></block></block>
  <block id="214d6a2680fcbe83e2c825740dae5888" category="admonition">ストレージ構成に暗号化が有効なボリュームが含まれている場合は、の手順に従います。<block ref="f72c159bffbf92db3704805be06f351f" category="inline-link-rx"></block> をクリックして移動します。</block>
  <block id="d59048f21fd887ad520398ce677be586" category="inline-link-macro">詳細はこちら。</block>
  <block id="7fbeff1dd4b772a22c3163f4be820b9c" category="cell">AFF A220をASAとして構成</block>
  <block id="ac8778c8e9d09a5fbedc8eed17a252ae" category="cell">AFF A700をASAとして構成</block>
  <block id="0814a528a6e09bdfa454da4598d03b6a" category="cell">ASA A150</block>
  <block id="0e096ce16590ab86950913510752010e" category="cell">ASA A900</block>
  <block id="0d1ed1043a9669e13b81f70da0ae56bb" category="list-text">ASA A150、AFF A150、またはFAS2820コントローラ</block>
  <block id="23025a0dc68c759874f99e85d38e7ede" category="section-title">ASA A150、AFF A150、またはFAS2820コントローラモジュールの設置</block>
  <block id="d7a4c6633fbd09856927cf66880d4940" category="section-title">ASA A900、AFF A900、またはFAS9500 NVRAMとコントローラモジュールの設置</block>
  <block id="70b323769da32749c57798f0d8e782e5" category="list-text">コアダンプデバイスをAFF A700 NVRAMモジュールからASA A900またはAFF A900 NVRAMモジュールに移動しないでください。</block>
  <block id="74cfe385d1c40d7e412430b003bd358b" category="section-title">ASA A900、AFF A900、またはFAS9500 NVRAMモジュールの設置</block>
  <block id="ad6cf4baff2cddaf65f868a474f4ace2" category="section-title">ASA A900、AFF A900、またはFAS9500コントローラモジュールをノード1に取り付けます。</block>
  <block id="1e05d2a5422d862c8080573b0bffa1d7" category="paragraph">次の手順を使用して、ASA A900、AFA A900、またはFAS9500コントローラモジュールをノード1に取り付けます。</block>
  <block id="400a12b5c5627da96b0587ceaacabfa4" category="inline-xref">ASA A150、AFF A150、またはFAS2820コントローラモジュールをノード2に設置します。</block>
  <block id="74cae3e1383e831697d2a89099232c43" category="inline-xref">ASA A900、AFF A900、またはFAS9500のNVRAMとコントローラモジュールをノード2に設置します。</block>
  <block id="78bd224431479d8d5cafd763cca39b7c" category="paragraph">アップグレード用に受け取ったASA A150、AFF A150、またはFAS2820コントローラモジュールをノード2に取り付けます。node2 は、システムの背面からコントローラを見るときにシャーシの右側に配置されたコントローラ B です。</block>
  <block id="a2f2586b0e85eb39267cb5c9d9e043d2" category="paragraph">アップグレード用に受け取ったASA A900、AFF A900、またはFAS9500のNVRAMとコントローラモジュールをノード2に取り付けます。node2 は、システムの背面からコントローラを見るときにシャーシの右側に配置されたコントローラ B です。</block>
  <block id="f457531b113b8b894781ad94a1fa19d3" category="section-title">ASA A900、AFF A900、またはFAS9500コントローラモジュールをノード2に設置します。</block>
  <block id="86e722dcbc94e4ea341e26dd6af9f76a" category="cell">AFF A220をオールSANアレイ（ASA）として構成</block>
  <block id="4fdc3efb53d664a8ab709272358f7966" category="cell">9.13.1P1以降</block>
  <block id="6e43ae996b970f40321b42d34dd0b4b8" category="list-text">ASA A900、AFF A900、およびFAS9500システムは、ハイライン電源（200V~240V）のみをサポートします。AFF A700またはFAS9000システムをローライン電源（100~120V）で実行している場合、この手順 を使用する前に、AFF A700またはFAS9000の入力電源を変換する必要があります。</block>
  <block id="30d965eef5ba25c6b9998ae38270b43e" category="doc">法的通知</block>
  <block id="e9c44bbfd795a5d63d74c6a77afee70d" category="paragraph">著作権に関する声明、商標、特許などにアクセスできます。</block>
  <block id="6016a2b341113bf496b719905398ecd2" category="section-title">著作権</block>
  <block id="52009bb7ee17227f566cd26a02caee56" category="inline-link-macro"><block ref="52009bb7ee17227f566cd26a02caee56" category="inline-link-rx"></block></block>
  <block id="a1a9afcf552a769c282769271829889a" category="paragraph"><block ref="a1a9afcf552a769c282769271829889a" category="inline-link-macro-rx"></block></block>
  <block id="126a02652da6de02962cf1b654fd6376" category="section-title">商標</block>
  <block id="c4ce4761e466527d26b3e3d5ed1006fd" category="paragraph">NetApp 、 NetApp のロゴ、および NetApp の商標ページに記載されているマークは、 NetApp, Inc. の商標です。その他の会社名および製品名は、それぞれの所有者の商標である場合があります。</block>
  <block id="f99aa604031e5049799e73b5c3748a98" category="inline-link-macro"><block ref="f99aa604031e5049799e73b5c3748a98" category="inline-link-rx"></block></block>
  <block id="5d545fe5152641e2ebe654e336e520e5" category="paragraph"><block ref="5d545fe5152641e2ebe654e336e520e5" category="inline-link-macro-rx"></block></block>
  <block id="be89498d2f8a22ce47c02ba9795fe2af" category="section-title">特許</block>
  <block id="d0b19d36be2c5f16e9aef46c8a452d3d" category="paragraph">ネットアップが所有する特許の最新リストは、次のサイトで入手できます。</block>
  <block id="88e5eabd3917048b6927c42496b98f86" category="inline-link-macro"><block ref="88e5eabd3917048b6927c42496b98f86" category="inline-link-rx"></block></block>
  <block id="dd38f906b37d412de7d1c1dcf4cbf31c" category="paragraph"><block ref="dd38f906b37d412de7d1c1dcf4cbf31c" category="inline-link-macro-rx"></block></block>
  <block id="56c34c6410dd45c5cec44149ad0ce037" category="section-title">プライバシーポリシー</block>
  <block id="8acb58cbd50ef1b468a020ee0bd351d3" category="inline-link-macro"><block ref="8acb58cbd50ef1b468a020ee0bd351d3" category="inline-link-rx"></block></block>
  <block id="2352c4e1f4d0024ade0869e00e6243f4" category="paragraph"><block ref="2352c4e1f4d0024ade0869e00e6243f4" category="inline-link-macro-rx"></block></block>
  <block id="35c124f455f44a154eb3b514029ee58a" category="section-title">安全に関する情報と規制に関する通知</block>
  <block id="a6518839a3ee2f900f136494094df3cf" category="paragraph"><block ref="a6518839a3ee2f900f136494094df3cf" category="inline-link-rx"></block></block>
  <block id="ea6cc97cd446c8ab07c46f26be73c50d" category="doc">手順1：新しいiSCSI接続をセットアップする</block>
  <block id="552dfeee4aa45aab21f5db04ebc1f244" category="paragraph">iSCSI接続を移行するには、新しいノードへの新しいiSCSI接続をセットアップします。</block>
  <block id="fc85dbac1706910c76a2b7a6f7638bdb" category="list-text">新しいノードにiSCSIインターフェイスを作成し、iSCSIホストから新しいノードの新しいインターフェイスへのping接続を確認します。</block>
  <block id="7bbfc198d3ba29087c1dd1984313d004" category="inline-link">ネットワークインターフェイスを作成</block>
  <block id="607be49a44f6d2de54aedb24c5821b8b" category="paragraph"><block ref="607be49a44f6d2de54aedb24c5821b8b" category="inline-link-rx"></block></block>
  <block id="87c826df1266871a8db57cee9750cbd0" category="paragraph">SVMのすべてのiSCSIインターフェイスにiSCSIホストから到達できる必要があります。</block>
  <block id="9709761b16b5aefc81534e48c85098d7" category="list-text">iSCSIホストで、ホストから古いノードへの既存のiSCSI接続を特定します。</block>
  <block id="90f2c25e2e05bd11190a9ace67be2df7" category="list-text">新しいノードで、新しいノードからの接続を確認します。</block>
  <block id="840e7124a9aeed666f3cab70b890da0f" category="list-text">新しいノードで、インターフェイスが含まれているSVMのONTAPのiSCSIインターフェイスを一覧表示します。</block>
  <block id="e817bc638b8c95d84d9d468a31b9a9c6" category="list-text">iSCSIホストで、SVMのいずれかのiSCSI IPアドレスで検出を実行して、新しいターゲットを検出します。</block>
  <block id="6d5e653b42496cb611cacbd3f1622d89" category="paragraph">検出は、 iSCSI 以外のインターフェイスを含め、 SVM の任意の IP アドレスで実行できます。</block>
  <block id="4c2900dfa972d4e54c006349317ed61b" category="list-text">iSCSIホストで、検出されたすべてのアドレスにログインします。</block>
  <block id="50f723ce927cda10c297d19c642446b6" category="list-text">iSCSIホストで、ログインと接続を確認します。</block>
  <block id="c833c589f902c8c0ddc3bdb645a85fe9" category="list-text">新しいノードで、ログインとホストとの接続を確認します。</block>
  <block id="8eea62084ca7e541d918e823422bd82e" category="paragraph-title">結果</block>
  <block id="4e7233ab8e56169d5783c1e27cf80e62" category="paragraph">このタスクが完了すると、（古いノードと新しいノードの）すべてのiSCSIインターフェイスが認識され、それらのすべてのインターフェイスにログインします。</block>
  <block id="1ea11cf2a7632efb274bdc8804c13cc8" category="paragraph">LUNとボリュームは、古いノードで物理的にホストされたままです。LUNは古いノードインターフェイスでのみ報告されるため、ホストには古いノード経由のパスのみが表示されます。これを確認するには、<block ref="41dc2c94e82e1c56ba876085acf5a974" prefix=" " category="inline-code"></block> および<block ref="2fbf63deae0938cf669e6ca451f1eb2c" prefix=" " category="inline-code"></block> ホスト上のコマンドとコマンド出力を確認します。</block>
  <block id="85ef9de042295f197ffebdafe8989eba" category="section-title">手順2：新しいノードをレポートノードとして追加する</block>
  <block id="63caeb58f676a0ef9b76df2d7cb19636" category="paragraph">新しいノードへの接続をセットアップしたら、新しいノードをレポートノードとして追加します。</block>
  <block id="491bf790c89cc65e6e44bc71af9a4016" category="list-text">新しいノードで、SVM上のLUNのレポートノードのリストを表示します。</block>
  <block id="b04f1d6b7664813408094e25f316f33e" category="paragraph">次のレポートノードは、LUNが物理的に古いノードnode_A_1-oldとnode_A_2-oldにあるため、ローカルノードです。</block>
  <block id="cc171fdd8df3207be64edefc9b40c9ba" category="list-text">新しいノードで、レポートノードを追加します。</block>
  <block id="d0cc5c260aaa60f4409e8ab9a2fc50be" category="list-text">新しいノードで、新しく追加したノードが存在することを確認します。</block>
  <block id="1e9ecffd328dcde30affda2b4f6c9ece" category="list-text">。<block ref="a78608714add699f555f2a66df0ee249" prefix=" " category="inline-code"></block> パッケージがLinuxホストにインストールされている必要があります。これにより、<block ref="b0c94f1494e22d963244e235719a2582" prefix=" " category="inline-code"></block> 新しくマッピングされたLUNのLinuxホストをを使用して再スキャンするとエラーが発生する<block ref="685ca42026debec2f3691cc5faae67d5" prefix=" " category="inline-code"></block> コマンドを実行します</block>
  <block id="9e684d318658354d8e928df696e09c90" category="paragraph">ホストで、<block ref="a78608714add699f555f2a66df0ee249" prefix=" " category="inline-code"></block> パッケージがインストールされています：</block>
  <block id="bf0c6c5c08f9fbefa42c89aea32af827" category="list-text">Debianベースのディストリビューションの場合:</block>
  <block id="a06dd63aa02d1ca9f0480be58723d68a" category="list-text">Red Hatベースのディストリビューションの場合：</block>
  <block id="716de22554eea42da49644b2b136ecd9" category="paragraph">必要に応じて、<block ref="a78608714add699f555f2a66df0ee249" prefix=" " category="inline-code"></block> Linuxホストのパッケージ：</block>
  <block id="7065b19f91f5ce4da99fc6ed95adb773" category="list-text">ホストで、ホストのSCSIバスを再スキャンし、新しく追加したパスを検出します。</block>
  <block id="a206b7156387b72b6602cf4ab7999c62" category="list-text">iSCSIホストで、新しく追加したパスの一覧を表示します。</block>
  <block id="2a12888d763445436f29b56694f714b2" category="paragraph">LUN ごとに 4 つのパスが表示されます。</block>
  <block id="fba41109e69c86f9eb83af48257072a8" category="list-text">新しいノードで、LUNを含むボリュームを古いノードから新しいノードに移動します。</block>
  <block id="ac9a615f4366cb038c52dc84717f8ac2" category="list-text">新しいノードへのボリュームの移動が完了したら、ボリュームがオンラインになっていることを確認します。</block>
  <block id="a8ccb2f6b92c9e7445e9a052ff3fb3f9" category="list-text">LUNを配置した新しいノードのiSCSIインターフェイスがプライマリパスとして更新されます。ボリューム移動後にプライマリパスが更新されない場合は、次のコマンドを実行します。<block ref="9e65638d5d13acb691c4bec2ede5a483" prefix=" " category="inline-code"></block> および<block ref="4bcfa5223bd4ad05f8dd421976cbc1c1" prefix=" " category="inline-code"></block> またはマルチパスの再スキャンが実行されるまで待ちます。</block>
  <block id="162b2246503837a755b6cd4dddb0c228" category="paragraph">次の例では、新しいノードのLIFがプライマリパスになっています。</block>
  <block id="5fd8a55dd43f013ef906cc65f6986fc3" category="section-title">手順3：レポートノードを削除してパスを再スキャンする</block>
  <block id="907ed284747209370db5d2e6065cf477" category="paragraph">レポートノードを削除し、パスを再スキャンする必要があります。</block>
  <block id="829b0bec40a94531d8e7e7dd5076a8ac" category="list-text">新しいノードで、Linux LUNのリモートのレポートノード（新しいノード）を削除します。</block>
  <block id="2b57c94b011b67d2b972fc549295ffbe" category="paragraph">この場合、リモートノードは古いノードです。</block>
  <block id="1eae5e7b27384996cd8a3ccaee9ed11b" category="list-text">新しいノードで、LUNのレポートノードを確認します。</block>
  <block id="b40a504ccb3da532382333f0ef630e2d" category="list-text">iSCSIホストで、SCSIバスを再スキャンします。</block>
  <block id="3ab536112aae2adb0154a97a03a97995" category="paragraph">削除されるパスは古いノードからのパスです。</block>
  <block id="5eb2f5a07f8114a82bfca62a5f95b81d" category="list-text">iSCSIホストで、新しいノードからのパスだけが認識されることを確認します。</block>
  <block id="a56ce7e82e6bd0d524ca8eadec0f388f" category="summary">新しいiSCSI接続を作成し、新しいノードへのiSCSIパスを再スキャンして、SANボリュームを新しいノードに移動します。</block>
  <block id="74805bd861930fc25abc9a91446a2694" category="doc">Linux iSCSIホストを新しいノードに移動</block>
  <block id="c62a490dc179bcb1d44777cba5eb4845" category="paragraph">iSCSI SANボリュームを新しいノードに移動する前に、新しいiSCSI接続を作成し、新しいノードへのiSCSIパスを再スキャンする必要があります。</block>
  <block id="c19689d06a29f6feeef4510514125400" category="paragraph">ボリュームを移動してアップグレードする際にiSCSI SANボリュームを移動する必要がない場合は、この手順をスキップして <block ref="0187590ed6627836f657d0d4157f4bd9" category="inline-link-macro-rx"></block>。</block>
  <block id="067e2e3846b3b294b518d3f733e2a96b" category="list-text">IPv4インターフェイスは、新しいiSCSI接続のセットアップ時に作成されます。</block>
  <block id="b3b6efa3f6df48fc93b3542c29661f7c" category="inline-xref-macro">Linux iSCSIホストを新しいノードに移動する</block>
  <block id="fef2f3438d6db0111e356d7cf9de46ab" category="paragraph">このコンテンツでは、ストレージまたはボリュームを移動してクラスタ内のAFF、FAS、またはASAシステムのコントローラハードウェアをアップグレードする方法について説明します。</block>
  <block id="b01ff62768b0c0f969479f63cc8a0981" category="list-text">元のノードと新しいノードでONTAP 9.0以降が実行されている。可能な場合は、元のノードと新しいノードで同じバージョンのONTAPを実行することをNetAppで推奨します。</block>
  <block id="7a4addbb19265c78a3cdb3aca2a49536" category="paragraph">コントローラのアップグレードに複数のONTAPバージョンが混在する場合は、を参照してください。<block ref="d823e4718a376dd43333fd0519ed9811" category="inline-link-rx"></block> を参照してください。</block>
  <block id="524f05419622851f7f6289320cc91a6e" category="inline-link">MetroCluster 構成をアップグレード、更新、または拡張します</block>
  <block id="54fbf367f6c88f6a32c90b81e113fdbc" category="paragraph">MetroCluster構成をアップグレードする場合は、を参照してください。<block ref="ce6e655e9cb4a81012dd5871edda628b" category="inline-link-rx"></block>。</block>
  <block id="30f60d67f457bb040dffde52197a54da" category="list-title">関連情報</block>
  <block id="ff13d8bc09b612151174d9b83a1e0634" category="paragraph">node1 、 node2 、 node3 、および node4 という用語は、元のノードと新しいノードを区別するためだけに使用されます。手順を使用する場合は、これらのノードを元のノードと新しいノードの実際の名前に置き換える必要があります。ただし実際には、ノードの名前は変更されません。 node3 には node1 という名前が付けられ、 node4 にはコントローラハードウェアのアップグレード後に node2 という名前が付けられます。</block>
  <block id="608ce5a5400efa8f95d0e8e4878a465d" category="paragraph">たとえば、AFF A200からAFF A220にシステムをアップグレードする際に、古いAFF A200のシャーシとディスクを所定の位置に維持しながら、古いAFF A200コントローラモジュールを新しいAFF A220コントローラモジュールと交換するだけで、 このセクション_新しいノードに接続されているディスクの所有権の削除_で説明したように、新しいAFF A220コントローラモジュールのディスクの所有権は削除しません。</block>
  <block id="f5139354fcc216a1fa89fc75d4acdb39" category="paragraph">内蔵ストレージが搭載されたシステムは次のとおりです。FAS2620、FAS2650、FAS2720、FAS2750、AFF A200、 AFF A220、AFF A700s、AFF A800、AFF A250。</block>
  <block id="3c78f0ccb18b56cf56ef7db01c7967a6" category="paragraph">環境によっては、アップグレードを開始する前に特定の要素を考慮する必要があります。次の表を参照して、考慮する必要がある要件と制限事項を確認してください。</block>
  <block id="33461f62dffc4dbe16dd9531799c90a9" category="admonition">コントローラのアップグレード手順を開始する前に、次の表に記載されているすべての質問を確認しておく必要があります。</block>
  <block id="0fd179ccf52878007441c354396dd56b" category="cell">自分自身に尋ねる ...</block>
  <block id="ac39c3cf2a3ff363d8cdf7004a4e2c5d" category="cell">回答が「はい」の場合は、次の手順を実行します。</block>
  <block id="a6fb9eca9a6a0490cd13e215413591c8" category="cell">クラスタ内で異なるコントローラプラットフォームモデルを組み合わせていますか。</block>
  <block id="08ed978efeefa9a3616b492036283ef9" category="inline-link-macro">ストレージプラットフォームの混在ルールに従っていることの確認</block>
  <block id="f8da82eef6d2e70e8ab5b51e47684d64" category="paragraph"><block ref="8d9eb7b78834373e7ffbd885dfb70505" category="inline-link-macro-rx"></block>。</block>
  <block id="d3471ac1047d684f31d42d7b613c6403" category="cell">元のノードと新しいノードで異なるバージョンのONTAPを実行していますか。</block>
  <block id="ca189dbb46d0896b1743f452fe344293" category="inline-link">元のノードと新しいノードでサポートされているONTAPのバージョンとパッチレベルを確認する</block>
  <block id="8870bf8eb809743305db4031987fa36e" category="list-text"><block ref="b3ab3127149837ef7459a9eb97a04a54" category="inline-link-rx"></block>。</block>
  <block id="7d01893ca79a018810882cd8d3394250" category="inline-link-macro">ONTAPのバージョンをアップグレードする</block>
  <block id="50250e80343bef6bd18b0a749aecd73b" category="inline-link">バージョンが混在したONTAPクラスタに関する詳細情報</block>
  <block id="bb9ba0401316edbefdd465cc73bfbf1c" category="paragraph"><block ref="d732a285dea0d120c69b9115e25ab72f" category="inline-link-rx"></block>。</block>
  <block id="5df011f91a8a4b3c3604963326b854f6" category="cell">システムに内蔵ドライブが搭載されていますか？また、ボリュームを移動していますか？</block>
  <block id="03259c6b8a6d786956d579ff4cc10e80" category="inline-link-macro">新しいノードに元のノードに関連付けられたストレージを格納できるだけの十分なストレージがあることを確認する</block>
  <block id="fe8d23c8f1f89c647b05f88786860e80" category="list-text"><block ref="ea9e5a220a786a0a6080c57d99ea5697" category="inline-link-macro-rx"></block>。</block>
  <block id="7b983afdfff63b1a4e8c9f90c53a5c85" category="list-text">ボリュームを移動することでアップグレードする場合、元のノードを削除する前に新しいノードをクラスタに追加します。クラスタの最大サイズを確認する必要があります。</block>
  <block id="4aeb33a2ebf8478abaffce2450e59b6f" category="inline-link">手順でのクラスタ内のコントローラの総数が、サポートされる最大クラスタサイズを超えていないことを確認する</block>
  <block id="0c40cf8b20b5ebbd88d53401eaa32bd8" category="paragraph"><block ref="444b84c319bcdcd821287e2f046d0860" category="inline-link-rx"></block>。</block>
  <block id="3097ad2af11c180c3e0a96a78dfe1685" category="inline-link">SANストレージ管理</block>
  <block id="259b1238f7182936d8b9a81032dea1c4" category="admonition">FCP、iSCSI、FCoEなどのブロックプロトコルを提供する8ノードクラスタをアップグレードする場合は、新しいノードがLUNを正しくアドバタイズしていることを確認します。詳細については、を参照してください<block ref="cfeb6fd7632aa8a3aff6f995423e20e8" category="inline-link-rx"></block>。</block>
  <block id="e8f22bb9bc721e9d507705c0b5091956" category="list-text"><block ref="7825023d8bc8048cc59c9149895b5f54" category="inline-link-macro-rx"></block> （無停止の手順）。</block>
  <block id="b1c4279027d78fc21fb097c66f6dfeed" category="cell">内蔵ストレージを移動するか、システムをドライブシェルフに変換するか。</block>
  <block id="a896b1815f91ec1823a72e8046b7c9a6" category="list-text"><block ref="8df77a1d078de7fe643ceb436b9ddb19" category="inline-link-macro-rx"></block> （停止を伴う手順）。</block>
  <block id="884c86aad3e51c838018719b57f060f2" category="cell">ONTAP 9.6P11、9.7P8、またはそれ以降のリリースを実行していますか。</block>
  <block id="f525c99954808d7384aff708b8aceacc" category="inline-link">CLAMテイクオーバーのデフォルト設定が変更されました</block>
  <block id="7339d3b360bbf3ce7730b8d316034e9a" category="cell">NetAppでは、特定のノード障害が発生したときにクラスタをクォーラムに戻すために、Connectivity、Liveliness、and Availability Monitor（CLAM）テイクオーバーを有効にすることを推奨しています。。<block ref="597c3b4a934e2258848e227f4aa9daee" prefix=" " category="inline-code"></block> このコマンドには、advanced権限レベルのアクセスが必要です。詳細については、NetAppナレッジベースの記事を参照してください。<block ref="d245d2b1219cc77af195e5bc9b9c1b8a" category="inline-link-rx"></block>。

ONTAP 9.8以降では<block ref="5e9ba5cfa6f3b94ec0f02e2b3ea161d9" prefix=" " category="inline-code"></block> パラメータはデフォルトで有効になっています。</block>
  <block id="37d80afba8033b3bd680fdd98832ffa0" category="admonition">統合システムをアップグレードするには、データを新しいストレージに移動するか（ボリュームを移動する）、既存の統合システムをシェルフに変換してから新しいシステムに移行する（ストレージを移動する）方法があります。たとえば、FAS2650コントローラシャーシをDS224C SASシェルフに変換してFAS8300に接続することで、FAS2650をFAS8300にアップグレードできます。どちらの場合も、データ移行または変換されたシェルフは同じスイッチクラスタに残ります。</block>
  <block id="3d5b6f212a9f9a8f458941f02e1c8242" category="paragraph">次のシステムにはストレージが内蔵されています。</block>
  <block id="4ee7b64a1be0d77f68ed41ed6379a628" category="cell">内蔵ドライブ搭載システム</block>
  <block id="2adfad23574eb23178e0667b817e4762" category="paragraph">FAS2620、FAS2650、FAS2720、およびFAS2750</block>
  <block id="adb7f3e551928f61f9156c1db3d8457e" category="paragraph">AFF A150、AFF A200、AFF A220、AFF A250、AFF A700s、 およびAFF A800</block>
  <block id="92e1b94479feb2f95a478b3c711abc05" category="cell">AFF C190、AFF C250、およびAFF C800</block>
  <block id="f863fbee1252ef77c8e32810d975d03d" category="cell">ASA A150、ASA A250、ASA A800、およびASA AFF A220</block>
  <block id="9ae5a6f4cdea37ce0343ce6fe870ca8d" category="list-text">内蔵ストレージを搭載したシステムの場合は、システムをドライブシェルフに変換して、同じクラスタ内の新しいノードに接続できます。</block>
  <block id="caaabddaf0ae26915d0c67052254e13f" category="admonition">AFF A700s、AFF A800、AFF C800、またはASA A800システムをドライブシェルフに変換することはできません。</block>
  <block id="e83ec3e9b2b468e112627883187c2fd0" category="section-title">追加の手順が必要になる可能性がある状況</block>
  <block id="e6dd5543cbcf668267e622e1c4af270f" category="list-text">新しいシステムのスロット数が元のシステムのスロット数より少ない場合、またはポートのタイプが異なる場合は、新しいシステムにアダプタを追加しなければならないことがあります。を参照してください<block ref="f73c85a53b5d65cc9c35da0b9e0d2f09" category="inline-link-rx"></block>。</block>
  <block id="68792e096612147f50fb8d94652f05d8" category="list-text">クラスタに SAN ホストがある場合は、 LUN シリアル番号の変更に関する問題を解決するための手順が必要になることがあります。サポート技術情報の記事を参照してください<block ref="569d16567e50864529bd25223ae78934" category="inline-link-rx"></block>。</block>
  <block id="553f010b7f82ef72c54ff1aa7c24fbf4" category="inline-link">インバンドACPのセットアップとサポート</block>
  <block id="2b9392a1d0dffc02bd7ad128f6e559e1" category="list-text">システムでアウトオブバンド ACP を使用している場合は、アウトオブバンド ACP からインバンド ACP への移行が必要になることがあります。サポート技術情報の記事を参照してください<block ref="2fbb58c4060c5b42a116b319c000325d" category="inline-link-rx"></block></block>
  <block id="64de845f98c675a9519d741f73b067d9" category="list-text"><block ref="64de845f98c675a9519d741f73b067d9" category="inline-link-macro-rx"></block></block>
  <block id="0c3ddb60effd6213b641983514a7b646" category="summary">一般に、コントローラハードウェアのアップグレード方法は、元のノードのプラットフォームモデルによって異なります。アップグレードするには、アグリゲートまたはボリュームストレージを移動するか（無停止の手順）、またはストレージを移動します（停止を伴う手順）。</block>
  <block id="81cf1b6821a9509701aa3ffa438696e8" category="doc">コントローラハードウェアのアップグレード手順を選択</block>
  <block id="730782d87341664d3c754f5ff1a5e235" category="paragraph">一般に、コントローラハードウェアのアップグレード方法は、元のノードのプラットフォームモデルによって異なります。アップグレードするには、アグリゲートの再配置またはボリュームの移動（どちらも無停止の手順）、またはストレージを移動（停止を伴う手順）します。元のノードと新しいノードでONTAPのバージョンが異なる場合は、ハードウェアのアップグレードを開始する前にソフトウェアのアップグレードを実行しなければならないことがあります。</block>
  <block id="c9996a1b1fe92047dfbcfbef9989c233" category="list-text">AFF C400</block>
  <block id="1f43d36a6bcfed2f5249ca5ba8e671ba" category="inline-link-macro">アグリゲートの再配置を使用したアップグレード</block>
  <block id="ef69680bc1ee7b1fd5e0950d56699d33" category="list-text">この手順環境 MetroCluster の 4 ノード構成と 8 ノード構成では、 ONTAP 9.5 以前が実行されています。ONTAP 9.6 以降を実行する MetroCluster 構成の場合は、に進みます <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> to _using "system controller replace"コマンドを使用して、ONTAP 9.5を実行しているコントローラハードウェアをONTAP 9.7_にアップグレードする。</block>
  <block id="187aa569481ce25a564facc34217dda3" category="list-text">ホストのコマンドと例は、Linuxオペレーティングシステムに固有のものです。</block>
  <block id="fcbf56c541d4d283030e94ff96a44848" category="paragraph">USBブートオプションを使用してネットブートを実行することもできます。サポート技術情報の記事を参照してください <block ref="184f8f7294797efad8be0da4fb907563" category="inline-link-macro-rx"></block>。</block>
  <block id="626a7cbe056796bcb1c158b143866230" category="sidebar">ONTAP リリースノート</block>
  <block id="32d8f219b2e3b24132bd4923c34c4dc6" category="list-text">ポート7700をリスンしていない各クラスタLIFについて、LIFの管理ステータスをに設定します。<block ref="74e8333ad11685ff3bdae589c8f6e34d" prefix=" " category="inline-code"></block> 次に<block ref="46c48bec0d282018b9d167eef7711b2c" prefix=" " category="inline-code"></block>：</block>
  <block id="0f072cf75dad23e085e6786bbfa15ee3" category="list-text">アップグレードするHAペアで実行しているONTAPのバージョンに応じて、次のいずれかの操作を実行します。</block>
  <block id="3b7bc6da810fcf3db2d0ac3faf0d4699" category="cell">ONTAP のバージョン</block>
  <block id="70d79c0ebfb73d5165d2451382cc4332" category="cell">9.8 ~ 9.11.1</block>
  <block id="57d17db025176f211f2601bfb69b294f" category="cell">クラスタ LIF がポート 7700 をリスンしていることを確認します。
<block ref="478f48a10865c64c029e9fd3cec0523d" prefix=" " category="inline-code"></block></block>
  <block id="384264f87c50753f2eb17ca87ee9effa" category="cell">9.12.1以降</block>
  <block id="57e06e6af76d79b8779f5f6d6d293c4b" category="cell">この手順をスキップして、 <block ref="42e2bf4f4ef15f603bcc30bc206d35c3" category="inline-xref-macro-rx"></block>。</block>
  <block id="5b14143915836be17fa2618f3eb7806d" category="cell">この手順をスキップして、 <block ref="908f101af36ad2335dd086df5698bdbf" category="inline-xref-macro-rx"></block>。</block>
  <block id="99b3cab751e6822e482e17b1680dd183" category="cell">この手順をスキップして、 <block ref="50ada5c38dd8312cfb2b5108640c8ce7" category="inline-xref-macro-rx"></block>。</block>
  <block id="931aa0d9454eeac2242bed266d6ccf39" category="list-text">[[Verify_node3_step_5]] advanced権限モードに切り替えます。</block>
  <block id="bb751320dd480e108cbcc56ecb725c59" category="inline-link">NetApp Bugs OnlineのバグID1570339</block>
  <block id="a9881d2bc89c135aee3c1490acc55259" category="inline-link">40GbEから100GbEへの変換後のT6ポートのCRCエラー</block>
  <block id="282e5b40067cab0a2f099fb840c18705" category="admonition">AFF A800またはAFF C800システムでクラスタポートe0aおよびe1aのポート速度を変更すると、速度変換後に不正な形式のパケットを受信することがあります。を参照してください<block ref="6d2ed5cfb453d16c38a7a5c4ec937198" category="inline-link-rx"></block> ナレッジベースの記事<block ref="2a93cc61bbc3892324bc1b6369d71212" category="inline-link-rx"></block> を参照してください。</block>
  <block id="4a38eadfc2a9ece3d72590e6313fbd6e" category="admonition">T6ベースのイーサネットネットワークインターフェイスカードまたはマザーボードポートのポート速度を変更すると、速度変換後に不正な形式のパケットが受信されることがあります。を参照してください<block ref="6d2ed5cfb453d16c38a7a5c4ec937198" category="inline-link-rx"></block> ナレッジベースの記事<block ref="2a93cc61bbc3892324bc1b6369d71212" category="inline-link-rx"></block> を参照してください。</block>
  <block id="403701bd83bf4b3cf916d0207d89b4e6" category="cell">この手順をスキップして、 <block ref="8837566debd0bf055ddeb89904e2fbbc" category="inline-xref-macro-rx"></block>。</block>
  <block id="6fdc0880de0e199aedb20bf62f491976" category="list-text">[[verify_node4_step5]] advanced権限モードに切り替えます。</block>
  <block id="2e23c7e78862e31423e93a8c06fbeebd" category="doc">SAN以外のデータLIFとクラスタ管理LIFを新しいノードに移動する</block>
  <block id="0479b56f75b526758f089a2063e31e6c" category="list-text">クラスタ管理LIFでログインし、元のノードのすべてのLIFをカンマで区切って指定します。</block>
  <block id="47abbe9b564eba6007fe4489d824eb6e" category="list-text">SAN以外のデータLIFのホームポートを元のノードから新しいノードに変更します。</block>
  <block id="d0301a3c428aa6200596747434ea62ce" category="list-text">クラスタ管理LIFのホームノードが元のいずれかのノードにあるかどうかを確認します。</block>
  <block id="f4050efc501652e600f6e7e735cf5616" category="inline-link-macro">新しいiSCSI接続が作成されました</block>
  <block id="527226c39d06e4e2f6eec2dca988d2ba" category="list-text">iSCSI SANボリュームを移動する場合は、 <block ref="6f18756f17709181fa11fd9271f705fc" category="inline-link-macro-rx"></block>。</block>
  <block id="5dac5a25730948f28ff49739852d7be9" category="list-text">可能な場合は、元のノードと新しいノードで同じバージョンのONTAPを実行することをNetAppで推奨します。これができない場合は、 <block ref="9fa2b66114da266713b82d418ec229cf" category="inline-link-macro-rx"></block> 元のノードと新しいノードのバージョンの差が4つ以下になるように、サポートされる最大バージョンに変更します。たとえば、ONTAP 9.8と9.12.1がサポートされますが、ONTAP 9.8と9.13.1はサポートされません。</block>
  <block id="b0da566a6b16767a9a4f6a9815cc8a8c" category="image-alt">ケーブル管理ARMの取り外し</block>
  <block id="df4c49d6d7d92d1a3dd7d374cec6fe02" category="image-alt">カムハンドルを開く</block>
  <block id="401ec6649ed8fe314eef631a190858b3" category="list-text">に記載されているストレージ暗号化のbootargsをチェックしてリセットします <block ref="d1353daad078803f11ba1627582281b9" category="inline-xref-macro-rx"></block>。</block>
  <block id="f21399d0ef733f2bac07631b61733da2" category="list-text">オフラインのボリュームがある場合は、で取得したオフラインボリュームのリストと比較します  <block ref="f8559d826afe76e8a44f3ff6b2b551c5" category="inline-link-macro-rx"></block> で、各ボリュームに対して次のコマンドを 1 回入力して、アップグレードの準備をし、必要に応じてオフラインのボリュームをオンラインにします。</block>
  <block id="3bc4849f9b157d49c1711e6e16889370" category="list-text">[[unset_maxwait_manual]]構成で自己暗号化ドライブを使用している場合は、を設定します<block ref="fd93f52ab7757855a2e3e5cbb717ab40" prefix=" " category="inline-code"></block> 変数をに設定します<block ref="3262d48df5d75e3452f0f16b313b7808" prefix=" " category="inline-code"></block> （例：で） <block ref="90030e72e0588538d4fa2173f000cf21" category="inline-link-macro-rx"></block> of _ Install and boot node3 _）では、変数の設定を解除する必要があります。</block>
  <block id="7f56dbb7f8f9c7edeba6759e22db809d" category="admonition">システムにクラスタ間 LIF がない可能性があります。クラスタ管理 LIF は、ノードペアの一方のノードにしか配置しません。クラスタ管理LIFがの出力例に表示されます。 <block ref="bd32fdbc5854e6c20c0a8915777bab3f" category="inline-link-macro-rx"></block> インレコード node1 のポート情報 _ 。</block>
  <block id="654d75bbbd9ba4437d62775d8c78fd4e" category="paragraph">をクリックします<block ref="4bc6af92800eaece42a512a876786ce9" prefix=" " category="inline-code"></block> で取得した情報を使用します。 <block ref="4bd427aca76f4838cf29941d65834087" category="inline-link-macro-rx"></block> をクリックします。の場合<block ref="3a5307c9225c62c92d2cd1fab07d458d" prefix=" " category="inline-code"></block>で取得した情報を使用します。 <block ref="9c7125eb7b33f2cb03297a560d0660b0" category="inline-xref-macro-rx"></block>。</block>
  <block id="c1ec927231ff7eccaa7988a2e2070107" category="paragraph">の出力にいくつかの変更が表示される場合があります。<block ref="ddf400f1cb6b8b9330ed6c79c508123c" prefix=" " category="inline-code"></block> コマンドですが、これは一般的なコマンドであり、手順には影響しません。トラブルシューティングのセクションを参照してください <block ref="75a39bd28c4eb9db95179fd2fef50fb3" category="inline-link-macro-rx"></block>。</block>
  <block id="4d71aeb459e7fed93e6f01c378ca3c04" category="list-text">node2 に属していた残りのアグリゲートを再配置します <block ref="bd44335b572d50c129363547aa87bcee" category="inline-link-macro-rx"></block> から <block ref="c5be787c4fcfd0f49f014e8618d28c15" category="inline-link-macro-rx"></block> セクションの _Relocate node2 のルート以外のアグリゲートを node3 から node4 に再配置する例を次に示します。</block>
  <block id="06c2cea18679d64399783748fa367bdd" category="inline-image-macro">1つ</block>
  <block id="f63c237677c2c2f5bdf2eaff278a8f15" category="paragraph-title"><block ref="58f667aaf05f87159670e12bd9bc076b" category="inline-image-macro-rx" type="image"></block><block ref="b4da832a26951a011118018d4f3f9a8e" category="inline-link-macro-rx"></block></block>
  <block id="dda3bdc300127980e1b61912d179329b" category="paragraph">ボリュームを移動してコントローラハードウェアをアップグレードする前に、いくつかの準備手順を実行します。</block>
  <block id="aada29daee1d64ed0fe907043855cb7e" category="inline-image-macro">2 つ</block>
  <block id="df6389af4f1c6bb1d9fd56fa4f5bb3ef" category="paragraph-title"><block ref="54f425ce8d89f4ed6b8a546561af5d60" category="inline-image-macro-rx" type="image"></block><block ref="638758de43a31bd2903f659581f78fa7" category="inline-link-macro-rx"></block></block>
  <block id="5d0c14865b7b1cd673dec55e251fe56d" category="paragraph">元のノードからボリュームを移動できるように、新しいノードを設置してクラスタに追加します。</block>
  <block id="ca8a2087e5557e317599344687a57391" category="inline-image-macro">3つ</block>
  <block id="03e3b4a5ff5cc729e695564e153a6bcf" category="paragraph-title"><block ref="05b2444faffd66d76e88602ea7dd353f" category="inline-image-macro-rx" type="image"></block><block ref="f3adcf0fc7960e1a4813e477241cd682" category="inline-link-macro-rx"></block></block>
  <block id="715826e331097ac1c57f9353069e128c" category="paragraph">iSCSI SANボリュームを新しいノードに移動する前に、新しいiSCSI接続を作成し、新しいノードへのiSCSIパスを再スキャンします。</block>
  <block id="981b8fcee42e1e726a67a2b9a98ea6e9" category="inline-image-macro">4.</block>
  <block id="41267730c573da839239ae8e159fd21e" category="paragraph-title"><block ref="beadfa85a2fdca06b91edc1131c603e6" category="inline-image-macro-rx" type="image"></block><block ref="0187590ed6627836f657d0d4157f4bd9" category="inline-link-macro-rx"></block></block>
  <block id="66b94afb6105e6b18a79a4e7e108f4e1" category="paragraph">元のノードから移動するボリュームを格納するために、新しいノードのそれぞれに少なくとも1つのアグリゲートを作成します。ボリュームごとにアグリゲートを指定し、各ボリュームを個別に移動する必要があります。</block>
  <block id="e5d9de39f7ca1ba2637e5640af3ae8aa" category="inline-image-macro">5 つ</block>
  <block id="b8ad3730009624b3c7d392b9ca5f9bec" category="paragraph-title"><block ref="99e8b2f00e172bfcff96afdce69907bc" category="inline-image-macro-rx" type="image"></block><block ref="e4238bcb27c7bdac2a633b9164d00cec" category="inline-link-macro-rx"></block></block>
  <block id="7a1bd66a00a8c26f108e81431b33481d" category="paragraph">元のノードからボリュームを移動したら、SAN以外のデータLIFとクラスタ管理LIFを元のノードから新しいノードに移行します。</block>
  <block id="e6fbc0b9673f8c86726688d7607fc8f5" category="inline-image-macro">6</block>
  <block id="66686106038dcdf0e7037a2679e6be2b" category="paragraph-title"><block ref="ef78558f80439832e0f51cc22cee8b8c" category="inline-image-macro-rx" type="image"></block><block ref="a931a68d44bca92701e3cc2575cb8e58" category="inline-link-macro-rx"></block></block>
  <block id="2431d8b533362d8472db79a8849836be" category="paragraph">クラスタの内容とクラスタ環境に応じて、SAN LIFを移動、削除、作成するか、削除したSAN LIFを再作成します。</block>
  <block id="12e67aac3e7f9227cc35f8f047d7dc74" category="inline-image-macro">7</block>
  <block id="baca0ca6729684fd54206793ae4b5bd5" category="inline-image-macro">8</block>
  <block id="266c2a634fcfab43713325017c0d1fc1" category="paragraph-title"><block ref="430057c670c01688e904ed2ba129a0b5" category="inline-image-macro-rx" type="image"></block><block ref="25f018c3ca0d5083cf0a96e5a5daf8b3" category="inline-link-macro-rx"></block></block>
  <block id="55388932978c50267bc31e99b8d1d4d9" category="paragraph">ボリュームを移動することでアップグレードの手順を完了するには、サービスプロセッサ（SP）を設定し、新しいライセンスをインストールし、AutoSupportをセットアップします。また、ストレージまたはボリュームの暗号化を設定し、FCポートまたはNCAポートを設定する必要がある場合もあります。</block>
  <block id="65f4a18389014fc2ed789c3ceb554cb6" category="paragraph">ディレクトリ内の情報をに使用します <block ref="0a727bbbc25c95678f69d03f75493928" category="inline-link-macro-rx"></block>。</block>
  <block id="fc27315074573c8a9ba25a2c6cd31532" category="paragraph">以下の手順は、 ONTAP 9.7 以前を実行するシステムに該当します。ONTAP 9.8以降を実行している場合は、の手順 を使用する必要があります <block ref="910c99c10b2b8f326ca77c1b3e34eb83" category="inline-link-macro-rx"></block>。</block>
  <block id="030ccf72b042f5c207c87680b8cda90b" category="list-text">ONTAP 9.8以降を実行しているシステムの場合は、* STOP *をクリックします。の手順を使用する必要があります <block ref="910c99c10b2b8f326ca77c1b3e34eb83" category="inline-link-macro-rx"></block>。</block>
  <block id="e1d9300a5e6bf8e78b0757b6849a8ce6" category="paragraph">これで物理ポートのマッピングが完了しました。アップグレードを完了するには、に進みます <block ref="00ba9232a950e876c165749336dea823" category="inline-link-macro-rx"></block>。</block>
  <block id="c3241c585c0680bacd1308d6f2c7f051" category="paragraph">以下の手順は、 ONTAP 9.7 以前を実行するシステムに該当します。ONTAP 9.8以降を実行している場合は、の手順 を使用する必要があります <block ref="2a32a1887b2d01dbc6f66ce7f3bde379" category="inline-link-macro-rx"></block>。</block>
  <block id="14c8c7cd715ed376698ba17d9b3263a3" category="list-text">ONTAP 9.8以降を実行しているシステムの場合は、* STOP *をクリックします。の手順を使用する必要があります <block ref="479694184a7596b8d654b4519a939fb4" category="inline-link-macro-rx"></block>。</block>
  <block id="019e462408d5236cafe9463f4045db3d" category="paragraph">NetApp AFF A250システムからNetApp AFF A400システムへの無停止アップグレードを実行するには、各AFF A250ノードをNS224ドライブシェルフに変換し、AFF A400の交換用ノードに接続します。</block>
  <block id="ee1607b96090f48bac4dd25134093834" category="paragraph-title"><block ref="58f667aaf05f87159670e12bd9bc076b" category="inline-image-macro-rx" type="image"></block><block ref="f5b56c210a0d4c20980ddfe8b334c676" category="inline-link-macro-rx"></block></block>
  <block id="316fbda1f1480f59ea91e4245a06ca9b" category="paragraph-title"><block ref="54f425ce8d89f4ed6b8a546561af5d60" category="inline-image-macro-rx" type="image"></block><block ref="89f7cee20d9833c231c0e50fc41ce58d" category="inline-link-macro-rx"></block></block>
  <block id="bbadb0866103c09529bf7f6484a7d090" category="paragraph">AFF A250 node2をNS224ドライブシェルフに変換し、AFF A400 node4に接続してから、node2からnode4にドライブを再割り当てします。</block>
  <block id="2fce8a2d690ba83af5432e4cae17de6f" category="paragraph-title"><block ref="05b2444faffd66d76e88602ea7dd353f" category="inline-image-macro-rx" type="image"></block><block ref="3c6ba9b5c38f48cb17c85b592674d539" category="inline-link-macro-rx"></block></block>
  <block id="e718380a27225cee9937552d63279ec4" category="paragraph">AFF A250 node2をNS224ドライブシェルフに変換してAFF A400 node4に接続したら、node2に属していたドライブをnode4に再割り当てします。</block>
  <block id="f82507a2b9b5f8c5aefa824395d9718d" category="paragraph-title"><block ref="beadfa85a2fdca06b91edc1131c603e6" category="inline-image-macro-rx" type="image"></block><block ref="e2c52cb2e34e893afee819116adecafb" category="inline-link-macro-rx"></block></block>
  <block id="d05c49cd0e63bffcd5674e232b1afbb9" category="paragraph">AFF A250 node1をドライブシェルフに変換する前に、node1のデータアグリゲート、イプシロン、およびLIFをAFF A400 node4に移行します。</block>
  <block id="81dc3cbf2118e8579a9b2450f7a12e5d" category="paragraph-title"><block ref="99e8b2f00e172bfcff96afdce69907bc" category="inline-image-macro-rx" type="image"></block><block ref="e86b9bc23de1f214996444ef551bacb8" category="inline-link-macro-rx"></block></block>
  <block id="58cb6081dfeeba17660c15ea6ea91ba5" category="paragraph-title"><block ref="ef78558f80439832e0f51cc22cee8b8c" category="inline-image-macro-rx" type="image"></block><block ref="2fbb74e3e06daf149b588471e96a56a4" category="inline-link-macro-rx"></block></block>
  <block id="00c1c8079c802e3e24aa7784bdfb9fbf" category="paragraph">AFF A250 node1をNS224ドライブシェルフに変換してAFF A400 node3に接続したら、node1に属していたドライブをnode3に再割り当てします。</block>
  <block id="fe2f8aac9baa1b8fcda89bf672f09bc8" category="paragraph-title"><block ref="36915574c413876eaa75cbd48f69fd00" category="inline-image-macro-rx" type="image"></block><block ref="bfdfbe3df70ea3584435d9a8c7e7cd9c" category="inline-link-macro-rx"></block></block>
  <block id="663e41c83a5c4afbfe905c75bda6d9cd" category="paragraph">アップグレードを完了するには、ノード3をノード4に接続し、ノード4のデータLIFとデータアグリゲートをノード3に移行します。</block>
  <block id="18101d4aba30800c4dc0822c723a1de6" category="paragraph">これらの手順は、ONTAP 9.8以降を実行しているシステムに適用されます。ONTAP 9.7 以前を実行している場合は、の手順を使用する必要があります <block ref="df92ac10eb53320f3aee49e68f1573a2" category="inline-link-macro-rx"></block>。</block>
  <block id="2408bbc2877d469c8a828dd2f71d5815" category="list-text">ONTAP 9.7 以前を実行しているシステムの場合は、 * stop * と入力します。の手順を使用する必要があります <block ref="df92ac10eb53320f3aee49e68f1573a2" category="inline-link-macro-rx"></block>。</block>
  <block id="323f7a087e92b0783382d6a319113ac8" category="cell">この手順をスキップして、 <block ref="84a764803e273063ea87749716b7c654" category="inline-xref-macro-rx"></block>。</block>
  <block id="24c234c0d0c43e69b12af6b120695505" category="list-text">[[map_98_5] データ LIF をホストする物理ポートのブロードキャストドメインメンバーシップを変更します。これは、に示すように、手動で実行できます <block ref="2d50e52fa53ee066c1e23dfcd4b5dae8" category="inline-link-macro-rx"></block>。NetAppでは、次の手順5の手順（a）から（g）までに示すように、ONTAP 9.8で導入された拡張ネットワーク到達可能性スキャンおよび修復手順を使用することを推奨しています。</block>
  <block id="3a2b68bdec4a67d63868881c41adfd33" category="paragraph">これで物理ポートのマッピングが完了しました。アップグレードを完了するには、に進みます <block ref="479694184a7596b8d654b4519a939fb4" category="inline-link-macro-rx"></block>。</block>
  <block id="3548781d8fe3c65e8421c7698ed973f9" category="list-text"><block ref="3548781d8fe3c65e8421c7698ed973f9" category="inline-link-macro-rx"></block></block>
  <block id="50ae6167d8a0516c8e8cb720a6888cf9" category="list-text"><block ref="50ae6167d8a0516c8e8cb720a6888cf9" category="inline-link-macro-rx"></block></block>
  <block id="54e45682922af9929fbc5d361d7c0b49" category="list-text"><block ref="54e45682922af9929fbc5d361d7c0b49" category="inline-link-macro-rx"></block></block>
  <block id="3ca57071250bef466a089a9c6c848bd5" category="paragraph-title"><block ref="58f667aaf05f87159670e12bd9bc076b" category="inline-image-macro-rx" type="image"></block><block ref="964fb2d7d8e53060676c08185881a5ae" category="inline-link-macro-rx"></block></block>
  <block id="413dcaed8881bfe244a4fc03bcf787a2" category="paragraph">ストレージを移動してアップグレードする前に、元のノードからライセンス情報を収集し、ネットワーク設定を計画し、システムIDを記録し、ネットブートに必要なファイルを準備します。</block>
  <block id="d108a972a08fb1ea74a0d36841ffcc4e" category="paragraph-title"><block ref="54f425ce8d89f4ed6b8a546561af5d60" category="inline-image-macro-rx" type="image"></block><block ref="6fb98438a67f401b75e7e2b4323d24af" category="inline-link-macro-rx"></block></block>
  <block id="0252af049a4de8ed0fac44e42832448b" category="paragraph">元のノードをシャットダウンして削除する場合は、アップグレードに関するAutoSupportメッセージを送信し、メールボックスを削除し、ノードの電源をオフにして、シャーシを取り外します。</block>
  <block id="f7819171f0f863156d82723147616295" category="paragraph-title"><block ref="05b2444faffd66d76e88602ea7dd353f" category="inline-image-macro-rx" type="image"></block><block ref="827547d777444e882f8e6b39e3049760" category="inline-link-macro-rx"></block></block>
  <block id="a03a72ab3f48fd14717cf02650d9c540" category="paragraph">新しいノードに内蔵ディスクまたはアドオンシェルフがシステムに接続されている場合は、コントローラのアップグレードが妨げられる可能性があります。  ノード3 /ノード4に付属の新しいディスクの所有権を削除する必要があります。</block>
  <block id="59fc537444ccc8a7c0aeae28ca1ea722" category="paragraph-title"><block ref="beadfa85a2fdca06b91edc1131c603e6" category="inline-image-macro-rx" type="image"></block><block ref="d83a3a54810d80228b064355e0fe27d5" category="inline-link-macro-rx"></block></block>
  <block id="c48f41c12a7b6e0f8781b1bbf5999271" category="paragraph">ブートメディア上の設定情報がコントローラのアップグレードに影響しないことを確認するには、ノード3とノード4の設定をデフォルトの設定にリセットします。</block>
  <block id="5c1c2f78e722e472ee36736ebc6c1689" category="paragraph-title"><block ref="99e8b2f00e172bfcff96afdce69907bc" category="inline-image-macro-rx" type="image"></block><block ref="fbf829b8cea6df1e80a138062bd9f467" category="inline-link-macro-rx"></block></block>
  <block id="75b807a9d56afedce5682f51dd4c50ce" category="paragraph-title"><block ref="ef78558f80439832e0f51cc22cee8b8c" category="inline-image-macro-rx" type="image"></block><block ref="f26706f607ba852d4faf88f9bc700778" category="inline-link-macro-rx"></block></block>
  <block id="5c040b5ed035ab70a7450123a684a8fa" category="paragraph-title"><block ref="36915574c413876eaa75cbd48f69fd00" category="inline-image-macro-rx" type="image"></block><block ref="8077a74f1c626282122155497a5c996a" category="inline-link-macro-rx"></block></block>
  <block id="ab9d4e156dbc1c230427f44fb6437a32" category="paragraph">必要に応じて、元のノードがサポート対象のモデルである場合、ストレージを移動してアップグレードする処理中に、ノードの内蔵SATAドライブ、SSD、またはSASドライブを、新しいノードに接続されているドライブシェルフに移動できます。また、システムをドライブシェルフに変換して、新しいノードに接続することもできます。</block>
  <block id="2c75fbd01a1262b1abfbec5cf8dbff7a" category="paragraph-title"><block ref="430057c670c01688e904ed2ba129a0b5" category="inline-image-macro-rx" type="image"></block><block ref="036c48d3559729ec3a9c415e3b3d1afc" category="inline-link-macro-rx"></block></block>
  <block id="d05468fe6542160f0bdb1ff547dfe7fd" category="paragraph">ノード1とノード2に属していたディスクを、それぞれノード3とノード4に再割り当てします。</block>
  <block id="24db11216549ee55172c33cf3def2f3f" category="inline-image-macro">9つ</block>
  <block id="2e374b477618cba10e827120623746d3" category="paragraph-title"><block ref="b37b448eff4f65237cf47b29bdd2817c" category="inline-image-macro-rx" type="image"></block><block ref="6d97c340d71b4863e0d24d9de3d7740e" category="inline-link-macro-rx"></block></block>
  <block id="d1d6580288f1472dbd1db17b372d51d7" category="paragraph">構成情報をルートボリュームからブートデバイスにリストアします。</block>
  <block id="a185c3c138dca5ef46afc33288a67d1f" category="inline-image-macro">テン</block>
  <block id="7cdc9e64dfc551099556d0123c5bb981" category="paragraph-title"><block ref="6097494f0af631df68e3dcb7a6da8d2a" category="inline-image-macro-rx" type="image"></block><block ref="d38ccbe9c555caadedf9e9523ed99b16" category="inline-link-macro-rx"></block></block>
  <block id="d0820066ba6f14dca2420f2960ea8c42" category="paragraph">これらの手順は、ONTAP 9.8以降を実行しているシステムに適用されます。ONTAP 9.7 以前を実行している場合は、の手順を使用する必要があります <block ref="05d6674d1c6e0d48e8203d8e927e45b4" category="inline-link-macro-rx"></block>。</block>
  <block id="5e79c247ab4077723eed9dcb39fcfe47" category="list-text">ONTAP 9.7 以前を実行しているシステムの場合は、 * stop * と入力します。の手順を使用する必要があります <block ref="05d6674d1c6e0d48e8203d8e927e45b4" category="inline-link-macro-rx"></block>。</block>
  <block id="31f3762a2a2ed806ac8dc72ae0dc1eb5" category="admonition">FAS8300、AFF A400、FAS8700のように、ポート「e0a」と「e0b」をハイアベイラビリティ（HA）インターコネクトポートとして使用するシステムにコントローラをインプレースアップグレードする場合、 を確認します <block ref="7c3698c6a5737cb69d525ebacf49b908" category="inline-link-macro-rx"></block> アップグレード手順 を開始する前に、元のシステムのポート「e0a」と「e0b」で設定します。</block>
  <block id="e517f479718742d7735088b63cb4b0a6" category="list-text">[[step5] 次のいずれかの操作を実行します。</block>
  <block id="ce334042acf5cdb00aa6b0cacc91188d" category="list-text">必要に応じて、古いシステムでBaseboard Management Controller（BMC；ベースボード管理コントローラ）用に使用していたデフォルト以外のユーザアカウントを再作成します。</block>
  <block id="7cd124c3569d4b8de1ffd3a55e5a0f72" category="list-text">BMC管理者ユーザアカウントのパスワードを変更またはリセットします。</block>
  <block id="f9c20a87fa881cd6931b55ff9caab40b" category="paragraph">BMC管理者ユーザアカウントのパスワードが空白（パスワードなし）であるか、システム管理者ユーザアカウントのパスワードと同じです。</block>
  <block id="98295c6ad28170a1a290ca42442cdb79" category="list-text">デフォルト以外のBMCユーザアカウントを再作成するには、<block ref="5d6b067bb8a979d6b47c787077dfae6f" prefix=" " category="inline-code"></block> コマンドにを指定します<block ref="3676d55f84497cbeadfc614c1b1b62fc" prefix=" " category="inline-code"></block> 次の例に示すように、「service-processor」に設定します。</block>
  <block id="715d318a746fe248ce78ec5e2626f09e" category="paragraph"><block ref="95c8ee682558c9e9a0683d5d70ee2be7" prefix="" category="inline-code"></block></block>
  <block id="b6025c8f8309b4b8106567e8e60f52ac" category="admonition">BMCでユーザアカウントを作成するには、管理者権限が必要です。</block>
  <block id="a64a5798382cc068c2d777ff826bccb5" category="doc">ONTAPハードウェアのアップグレードに関するドキュメント</block>
  <block id="646d7d5f93b4a6d7bbbc65acf5ac1077" category="inline-link">ONTAPハードウェアシステムのドキュメント</block>
  <block id="dec452d8e293e5516524ae8a86713211" category="sidebar">このサイトでは、AFF、FAS、およびASAストレージシステムのアップグレード手順について説明します。ストレージシステムに適したアップグレード手順を選択します。</block>
  <block id="ec6e72d1c4bb7dccdc62b6caf35c95f7" category="sidebar">ONTAPハードウェアシステムのドキュメント</block>
  <block id="1320db1e300a995e122ea5d434b23e9b" category="list-text">ノード1 /ノード2に接続していたシェルフのストレージシェルフケーブルをノード3 /ノード4に接続します。</block>
  <block id="4e14960b0c5923b866b1398172c14f69" category="admonition">このアップグレード手順の実行中は、新しいシェルフをノード3 /ノード4に接続しないでください。コントローラのアップグレードが完了したら、新しいシェルフをシステムに無停止で接続できます。</block>
  <block id="c1f694580637b3e597cbb094a01e4f0b" category="list-text">電源装置とシェルフの物理的な接続を確認します。</block>
  <block id="e6ade1c19be2f8809c4d245c0dd36ffb" category="inline-link">現在のルートアグリゲートサイズとルートアグリゲート内のディスク数が、新しいシステムの仕様を満たしているか、超えていることを確認する</block>
  <block id="ffcd2799f602c109648b4c27aba568da" category="list-text"><block ref="47a924df16a51eabe41998989d3e0fba" category="inline-link-rx"></block>。</block>
  <block id="1be12058e46f267981f165919be9807c" category="inline-link">新しいシステムでサポートされるストレージディスクの数が、元のシステムでサポートされている数以上であることを確認します。</block>
  <block id="d754882e684dd040085cc74dc3abd6e4" category="list-text"><block ref="40d68d018a02788fd741d99e7433a2dc" category="inline-link-rx"></block>。</block>
  <block id="07538505561069fd5bcb91c73862236d" category="list-text">LOADERプロンプトからシステムをブートします。</block>
  <block id="11aad7411698d9a2a766f840bc4edcc3" category="paragraph">ブート環境のプロンプトでCtrl+Cキーを押して、AUTOBOOTを中断します。</block>
  <block id="7ed92f84948f4fe94d9e740b0e479a4e" category="paragraph-title">MetroCluster FC 構成</block>
  <block id="5ffd3baa415444f7f3227edef43b10d9" category="paragraph">MetroCluster FC構成では、できるだけ早くディザスタリカバリ/フェイルオーバーサイトのノードを交換する必要があります。コントローラモデルの不一致が原因で原因ディザスタリカバリのミラーリングがオフラインになる可能性があるため、 MetroCluster 内のコントローラモデルの不一致はサポートされません。2つ目のサイトでノードを交換する場合は、コマンドを使用し<block ref="bf0b9d28548e0e53fb793faa9566bdc3" prefix=" " category="inline-code"></block> てMetroClusterチェックをバイパスします。</block>
  <block id="df3d0238913361ab2420c20a053ba0d8" category="list-text">[[man_install4_step6]]ノード4の電源をオンにし、Ctrl+Cキーを押してブートを中断してブート環境プロンプトにアクセスします。</block>
  <block id="2c4564f93114738d1a23cefcb9f1a209" category="paragraph">ストレージの移動によるコントローラハードウェアのアップグレードは、システムの停止を伴う手順です。アップグレードを開始する前に、一般的なアップグレードシナリオとアップグレードに関する考慮事項を確認してください。</block>
  <block id="7679a865afb03bdbcc1cbd8757f79d09" category="list-text"><block ref="7679a865afb03bdbcc1cbd8757f79d09" category="inline-link-macro-rx"></block></block>
  <block id="70df8f2f5459940187f1edf7420f9c6b" category="paragraph">ストレージを移動してアップグレードするには、元のノードを準備し、新しいノードをセットアップします。一部のプラットフォームモデルでは、新しいノードへの内蔵ストレージの移行がサポートされています。新しいノードにディスクを再割り当てし、ルートボリュームの設定をリストアし、ネットワークポートを設定します。</block>
  <block id="ffaf71c89815c9497697e87f8d77a27d" category="paragraph">ボリュームの移動によるコントローラハードウェアのアップグレードは無停止で実行できます。アップグレードを開始する前に、一般的なアップグレードシナリオとアップグレードに関する考慮事項を確認してください。</block>
  <block id="4b5907b5b5c704438991bdf09784779a" category="list-text">ブートメニューで、「8」と入力してノードをリブートし、自動ブート中にCtrl+Cキーを押してノードをLOADERプロンプトで停止します。</block>
  <block id="ee537959cbe6c4957342c94d3801abf7" category="doc">ARLのアップグレード手順を選択</block>
  <block id="e2de59a5a77b66213e7d85b56f1eb224" category="list-text">LOADERプロンプトで、メンテナンスモードに切り替えます。</block>
  <block id="a6cb6b55dcfc4f7ab4204a180701bf3a" category="paragraph">交換するクラスタノードがルートボリューム暗号化を使用している場合、ONTAPはディスクからボリューム情報を読み取ることができません。ルートボリュームのキーをリストアします。</block>
  <block id="eac6b735741ae2d06ec685407e7f5a0d" category="list-text">特別なブートメニューに戻ります。</block>
  <block id="a0c89c7f9eddb57bbf77129aeb1df2d7" category="paragraph"><block ref="16c75f7ad51c79b1cf539c94cd168367" prefix="" category="inline-code"></block></block>
  <block id="d22b7f0c9d1f5dfcf90bd4605f1ab859" category="list-text">[[step18]] LOADERプロンプトでメンテナンスモードに切り替えます。</block>
  <block id="53270fbfda62583949b287e08ae3d063" category="cell">AFF A800用</block>
  <block id="f0cb39a4312675573e21f25b336e9dbd" category="list-text">確認プロンプトに応答し<block ref="a6105c0a611b41b08f1209506350279e" prefix=" " category="inline-code"></block> ます。</block>
  <block id="f45139b90206dbbff89f2b0840357906" category="paragraph"><block ref="90e0991b70398b08e4e3eb0ae46c4163" prefix="" category="inline-code"></block>です。</block>
  <block id="d7591586f5c58a0e1b99cc533ea31ad7" category="paragraph">次の出力例に示すように、NS224シェルフまたはストレージスイッチに接続されたすべての100GbEポートがポートとして報告されます<block ref="ddecebdea58b5f264d27f1f7909bab74" prefix=" " category="inline-code"></block> 。</block>
  <block id="8bb737d8073126f53335b15e29fca66e" category="list-text">に記載されているストレージ暗号化のbootargを確認してリセットします <block ref="14be0e4972f39cec1df5e6dd8eddf776" category="inline-xref-macro-rx"></block>。</block>
  <block id="1eff79a166c04d815203556b3432c819" category="list-text">LOADERプロンプトでブートします。</block>
  <block id="1a68d75a6401790bda4f04fcd5250d89" category="cell">AFF A90またはAFF A70</block>
  <block id="60aaf44d4b562252c04db7f98497e9aa" category="cell">ポート</block>
  <block id="249694a485fc5d3289c38986b4f8e887" category="cell">クラスタ</block>
  <block id="922c556baf6272bffc4fa28b2e9a0bbc" category="cell">e0a</block>
  <block id="9cb7b36b3f2bccc776862e6f2f494077" category="cell">e1a</block>
  <block id="e0fed059ac14c8082f4d3e79dfb3795c" category="cell">e7a（e7aがない場合はe1bを使用）</block>
  <block id="e737b5ac24a63afc00e81377a906728d" category="cell">e1b</block>
  <block id="594c16ca0695f6665d7cf4971707adf6" category="cell">はあ</block>
  <block id="22fe67c2e87caff18249cf1804bbeaad" category="cell">e0b</block>
  <block id="87a16f3e2cd128ff96898d9ebca2a173" category="cell">SASストレージポート（存在し、使用している場合）</block>
  <block id="c6d464573f83b68eae557ca5213c2dbe" category="cell">使用可能な任意のポート</block>
  <block id="1106a2319bc9e3e60b2eb082fdf3e891" category="cell">NS224シェルフのイーサネットストレージポート</block>
  <block id="bf88a79b7721bdcefd6f46ff3e6e823a" category="cell">イーサネットストレージ接続のマッピングを参照</block>
  <block id="d00efbc2d49af21156c8dcb9b8cb3a29" category="cell">既存のシステム</block>
  <block id="ef0d9aeefdd01090b7d838fdbc756532" category="cell">AFF A800^1^</block>
  <block id="120ae360daecd24b580b71f9f2766bbc" category="cell">9.15.1</block>
  <block id="f60554150b9183af4229445611dee7e7" category="paragraph">9.10.1P15、9.11.1P11以降^2^</block>
  <block id="1445b140af84df0e7f83e7c1a538e1ae" category="cell">AFF A220、AFF A200、AFF C190、FAS2620、またはFAS2720</block>
  <block id="86c15a425269c6a2503b9871021e6df8" category="cell">AFF A700またはFAS9000</block>
  <block id="7f42c48311ba942f81d7a07c44c47d3b" category="admonition">このドキュメントでは、ノード名の参照としてのみ * node1 * と * node2 * という用語が使用されています。この手順を実行する場合は、ノードの実際の名前に置き換える必要があります。</block>
  <block id="a06d68e350c79a17b1b36fae9ee9106c" category="doc">AFF A90またはAFF A70モジュールをノード2に取り付けます。</block>
  <block id="011359cc38c137752e931fd997e519a7" category="image-alt">AFF A90またはAFF A70の取り付け</block>
  <block id="b360374fb1c72b27ec9072588d678096" category="admonition">シャーシの電源がすでにオンになっているため、ノード1はBIOSの初期化を開始し、完全に装着されるとすぐに自動ブートを実行します。ノード 1 のブートを中断するには、コントローラモジュールをスロットに完全に挿入する前に、シリアルコンソールケーブルと管理ケーブルをノード 1 のコントローラモジュールに接続することを推奨します。</block>
  <block id="da7cf8ace467e07feef604bd9a07fa23" category="list-text">自動ブートを中断すると、ノード1はLOADERプロンプトで停止します。時間内に自動ブートを中断せずにnode1がブートを開始した場合は、プロンプトが表示されるまで待ち、Ctrl+Cキーを押してブートメニューに移動します。ノードがブートメニューで停止したら、オプションを使用し<block ref="c9f0f895fb98ab9159f51fd0297e236d" prefix=" " category="inline-code"></block> てノードをリブートし、リブート時に自動ブートを中断します。</block>
  <block id="611a9754cc853d659f10d0a1aabd961b" category="list-text">自動ブートを中断すると、ノード2はLOADERプロンプトで停止します。時間内に自動ブートを中断せずにnode2がブートを開始した場合は、プロンプトが表示されてからCtrl+Cキーを押してブートメニューに移動します。ノードがブートメニューで停止したら、オプションを使用し<block ref="c9f0f895fb98ab9159f51fd0297e236d" prefix=" " category="inline-code"></block> てノードをリブートし、リブート時に自動ブートを中断します。</block>
  <block id="1541d30bc97104d196a4b30a48265600" category="paragraph">ASA A900、AFF A900、またはFAS9500 NVRAMモジュールをノード2のスロット6に取り付けます。</block>
  <block id="ede80ab611f3725304fd9e964c65b970" category="paragraph">ノード2のASA A900、AFF A900、またはFAS9500コントローラモジュールを設置、ケーブル接続します。</block>
  <block id="b9b8de16ec06ff60ede24d2818e0abab" category="list-text">FCPまたはFC-NVMeデータアクセスに使用するFCP SAN LIFを正しいホームポートに再割り当てします。</block>
  <block id="a1e8ba06d77acad7fa970ba8e0f0e467" category="paragraph"><block ref="16135bd5b92713cfb36ebe367a4ca458" prefix="" category="inline-code"></block></block>
  <block id="2de38c1e5aa6aa649940e819b4ebf8dd" category="list-text">現在のノードがアップグレード後のノード1であり、現在のポートが「status oper」になっているLIFについては（ポートはAFF A800ノードに存在していたがAFF A90ノードには存在しないため）、現在のポートをオンラインにする前に変更します。</block>
  <block id="dc7986d888f3be0cb2a2215b9580886d" category="paragraph">FC LIFを移動する必要があるFCターゲットポートへの物理的な接続が確立されていることを確認します。</block>
  <block id="20aae0c682908a321c4cb1ad3ed45571" category="paragraph"><block ref="6c2cad085a4937044f2937a01cb285f3" prefix="" category="inline-code"></block></block>
  <block id="b6257f5e9d4beab0291d2ae4dcfcbbd8" category="list-text">LIFのホームポートを変更します。</block>
  <block id="d354b1900f4972b1b49a933cfce61941" category="paragraph"><block ref="867b8ae03fe5d96f67794b8aa4dc8589" prefix="" category="inline-code"></block></block>
  <block id="4dbb86eefaa0a209d0215f725cf0c953" category="list-text">LIFのステータスを「up」に設定します。</block>
  <block id="461987576b6bc9795673a818ccac3663" category="paragraph"><block ref="c69d259c6c2cd4b5fceaec835bc7e8b1" prefix="" category="inline-code"></block></block>
  <block id="5ed9b0adde6f557c682b59271b680376" category="paragraph">node1のホームにあるFC SAN LIFごとに手順aとbを繰り返します。</block>
  <block id="9948b60bcf24c5a577ac51ca46681211" category="list-text">[[resume_relocation_step4]]再配置操作を再開します</block>
  <block id="c8d0afb25c26087738c4c8847b04be0f" category="list-text">交換用コントローラモジュールで実行されているnode1がブートし、ブートメニューオプションが次のように表示されるまで待ちます。</block>
  <block id="604b621863a9a67dada3210a46ac0585" category="cell">10.9</block>
  <block id="e958fa4ebf6cfd080461a2ab27108030" category="paragraph">次の例のような出力が表示されます。出力には、クラスタで実行されているONTAPのバージョンが表示されます。</block>
  <block id="3907a30ce94bbdb9a45c1eb9ed6f9c2f" category="paragraph">各ノードに接続されているシリアルポートからコマンドを実行し、コマンドの出力を個別に保存します。</block>
  <block id="b47faa02412cc89f2b0f103844279e9f" category="list-text"><block ref="2a0ee6f2d3fcee518356895f7e962392" prefix="" category="inline-code"></block></block>
  <block id="c42b01075c29ecf2009d164958ca98f5" category="list-text"><block ref="35b6841ae0a9776250da7cef0c9b1713" prefix="" category="inline-code"></block></block>
  <block id="eb7ead4ebc1b8fb1973480e7ff4df23a" category="list-text"><block ref="dcb54aa5c6e1195dc43cf43c7130da89" prefix="" category="inline-code"></block></block>
  <block id="9d5362e3cd7fb6dab4963fa3402a8946" category="list-text"><block ref="8a376dcd15839d79f652ba0bc6e1b6ce" prefix="" category="inline-code"></block></block>
  <block id="21abd3e611a550d5b10a01fcf5ca52e4" category="list-text"><block ref="d0e63dc99f0f9ab0cd3804cc52f2f14d" prefix="" category="inline-code"></block></block>
  <block id="0366a42f2fc03b6171f842157c923ac3" category="summary">ARLを使用して同じシャーシ内のコントローラモデルをアップグレードする場合は、AFF A700またはFAS9000のnode1システムモジュールを交換します。</block>
  <block id="e61a8da38f14e94b700a22cac8ae4393" category="paragraph">AFF A700またはFAS9000コントローラモジュールをノード1から取り外します。</block>
  <block id="a9d2e9a8e51c956ec73ca97b2f59618d" category="list-text">コンソールケーブルと管理ケーブル（ある場合）をノード1のコントローラモジュールから外します。</block>
  <block id="b7f982c550f1b3edd9e8d8d5b9eb50cd" category="paragraph">AFF A700またはFAS9000 NVRAMモジュールのロックを解除してノード1から取り外します。</block>
  <block id="ea1e71ef4fce4fbc966397450b8ecf3b" category="paragraph">ノード1のASA A900、AFF A900、またはFAS9500 NVRAMとコントローラモジュールを設置し、ケーブル接続します。</block>
  <block id="b79aee15f2c133859a90a1a37bf3949a" category="paragraph">ASA A900、AFF A900、またはFAS9500 NVRAMモジュールをノード1のスロット6に取り付けます。</block>
  <block id="9e0a1039504ca0408797903c8f8ca02d" category="summary">ARLを使用して同じシャーシ内のコントローラモデルをアップグレードする場合は、ノード1をAFF A220、AFF A200、AFF C190、FAS2620、またはFAS2720のシステムモジュールを交換します。</block>
  <block id="1bea5ea0e73e228055c8e231e1075879" category="paragraph">コントローラ内部のコンポーネントにアクセスするには、コントローラモジュールをシステムから取り外し、コントローラモジュールのカバーを取り外します。</block>
  <block id="3b59a6e4feb61a49bd8e07d1dc5ed44d" category="paragraph">ノード1のASA A150、AFF A150、またはFAS2820コントローラモジュールを設置、ケーブル接続します。</block>
  <block id="73ee2bd7f33c26664f94c379c6ab36d2" category="image-alt">ドライブを押してシャーシのミッドプレーンにしっかりと装着します。</block>
  <block id="9bedcc9650ba1fe86ed7720eb975429e" category="list-text">シャーシの背面に移動します。</block>
  <block id="f138b6c2f3e77b4a7b2b9693f7102662" category="list-text">ノード1のコントローラモジュールの電源装置をソースから取り外します。</block>
  <block id="e73f79c9112f5779897d8c0a650b3b99" category="list-text">電源ケーブル固定クリップを外し、電源装置からケーブルを抜きます。</block>
  <block id="9bcb203190e45fed6ef1d56a224cc2de" category="list-text">ケーブルマネジメントデバイスに接続しているケーブルをまとめているフックとループストラップを緩め、システムケーブルと SFP / QSFP モジュールをコントローラモジュールから外し（必要な場合）、どのケーブルが何に接続されていたかを記録します。</block>
  <block id="5501530668ccd4a98e422eaa9f70f55a" category="list-text">ケーブルマネジメントデバイスをコントローラモジュールから取り外し、脇に置きます。</block>
  <block id="36d204b1be645d0aebb6ca849fa255f4" category="list-text">両方のロックラッチを押し下げ、両方のラッチを同時に下向きに回転させます。</block>
  <block id="ac24bf2266610a02dbe8c4e0abac3b09" category="paragraph">コントローラモジュールがシャーシから少し引き出されます。</block>
  <block id="28f415f726deccd1fbd194cf6d26050d" category="cell">固定ラッチ</block>
  <block id="0f0a79780676cf6ae8f3282e89437c68" category="cell">ロックピン</block>
  <block id="3daf51d905ef8cf65eaf1306fdb7fc15" category="admonition">シャーシの電源がすでにオンになっているため、新しいコントローラモジュールを挿入するとすぐにノード1でBIOSの初期化が開始され、その後自動ブートが実行されます。この自動ブートを回避するために、NetAppでは、コントローラモジュールを挿入する前にシリアルケーブルとコンソールケーブルを接続することを推奨しています。</block>
  <block id="7d2ab27c4c0e5b47aef3114f5e958f70" category="list-text">自動ブートを中断すると、ノード1はLOADERプロンプトで停止します。</block>
  <block id="8ee4b1e10410e2b66e0bf9d74a323ab7" category="paragraph">時間内に自動ブートを中断せずにnode1がブートを開始した場合は、プロンプトが表示されるまで待ち、Ctrl+Cキーを押してブートメニューに移動します。ノードがブートメニューで停止したら、オプションを使用し<block ref="c9f0f895fb98ab9159f51fd0297e236d" prefix=" " category="inline-code"></block> てノードをリブートし、リブート時に自動ブートを中断します。</block>
  <block id="8ff82dc56b5a1d525adf2a33f9b0ef1e" category="paragraph">AFF A800をAFF A90またはAFF A70にアップグレードする場合は、100GbEケーブルの長さが1メートル以上であることを確認します。</block>
  <block id="2372d3e97a3ad6b559d0a6d0c020e688" category="paragraph">交換用コントローラモジュールでノード1をブートしたら、正しく取り付けられていることを確認します。</block>
  <block id="54688fc83f84e29fdf50e22c9b7c7ff5" category="paragraph">ノード 1 がクォーラムに参加するのを待ってから、コントローラの交換処理を再開する必要があります。</block>
  <block id="a9eb8ec1eda4c66975807357228a54c0" category="paragraph">ブート後にノード1がクォーラムに参加していない場合は、5分待ってからもう一度確認します。クラスタ接続によっては、ポート到達可能性スキャンが完了してLIFがそれぞれのホームポートに移動するまでに時間がかかることがあります。</block>
  <block id="8be47a94049f932693bd5bb0d1c55118" category="paragraph">node1が5分経ってもクォーラムに参加しない場合は、diagnostic権限コマンドを使用して「Cluster ipspace」にノードを配置し、新しいノードのクラスタポートを変更することを検討して<block ref="0b8753823d9749bc3abd4a74891bf12d" prefix=" " category="inline-code"></block>ください。</block>
  <block id="0fc8a34e3e62223851b8d7dd538994fc" category="paragraph">上記の例では、コントローラの交換後にノード1がブートしています。「no-reachability」と表示されたポートは物理的に接続されていません。到達可能性ステータスが以外のポートは修復する必要があります<block ref="444bcb3a3fcf8389296c49467f27e1d6" prefix=" " category="inline-code"></block>。</block>
  <block id="65f3496663601d293a0c2345f3b86b3d" category="cell">交換用システムの要件</block>
  <block id="74e674d644580e69dff298a1089f2ae8" category="cell">コントローラモジュール×2、NVRAM×2、新しいIOモジュール</block>
  <block id="b8499c64cd399582a56bd38ef2f0b689" category="paragraph">交換するクラスタノードがルートボリューム暗号化を使用している場合、ONTAPはディスクからボリューム情報を読み取ることができません。ルートボリュームのキーをリストアします。</block>
  <block id="4671cfb012ae240f7ddc8f7aaa369dbf" category="admonition">これは、ルートボリュームでNetAppボリューム暗号化を使用している場合にのみ該当します。</block>
  <block id="1868f9f2297be03938f9d37234c57a9d" category="summary">ONTAP 9.15.1以降を実行しているコントローラをコマンドを使用してアップグレードするときに発生する可能性があるアグリゲートの再配置が失敗する問題をトラブルシューティングします<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block> 。</block>
  <block id="a275532e7dc5da455e7d0af51e44e26d" category="summary">部分的に自動化されたARL手順を使用して、ONTAP 9.15.1以降を実行しているコントローラをアップグレードします。</block>
  <block id="03b84140205de4279d7e7c6144f8a93a" category="paragraph">コントローラのアップグレード時に、コントローラは、より新しい、またはより強力なプラットフォームを実行する別のコントローラに交換されます。ここでは一部自動化された手順について説明します。この手順では、ネットワークポートの到達可能性チェックが自動で行われるため、コントローラのアップグレードがさらに簡単になります。</block>
  <block id="274d42025e97a78743f8d189528d662b" category="summary">コマンドを使用して、ONTAP 9.15.1以降を実行するコントローラをARLでアップグレードするかどうかを決定します<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block> 。</block>
  <block id="82a01e528bf5bf2b1b7172eddc250977" category="cell">既存のコントローラ</block>
  <block id="4de11ced25f5990c0cc8fa95f739e66c" category="summary">コマンドを使用してONTAP 9.15.1以降を実行するコントローラをアップグレードしたあと、NetAppに古いシステムが動作しなくなったことを通知します。<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block></block>
  <block id="05182f39754b99e12a705e61572b4051" category="summary">コマンドを使用してONTAP 9.15.1以降を実行しているコントローラをアップグレードしたあとに、HAペアを有効にし、ノード3とノード4のストレージアクセスを確認し、アグリゲートの所有権を確認します<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block> 。</block>
  <block id="570743d2305de7bd0a4e44c426b2db21" category="paragraph"><block ref="49166cc15e848fc049881c3de5e1d1f8" prefix="" category="inline-code"></block></block>
  <block id="75cf0b763a8b4981f23b004d1b96a715" category="paragraph"><block ref="6d203e2c19155492a108b65377909131" prefix="" category="inline-code"></block></block>
  <block id="498a7d30e002a0545e05d9bfce9c6fd7" category="paragraph"><block ref="365695b1d723adf070447422d9e8d907" prefix="" category="inline-code"></block></block>
  <block id="26391f3798784439b28190a843ccb233" category="paragraph"><block ref="5db9f9801ff1015f8f0ec287f1a37e08" prefix="" category="inline-code"></block></block>
  <block id="28f38d2621df64a3408634ed62310686" category="paragraph"><block ref="c1415a35d798d0e1bc89dfc239e96300" prefix="" category="inline-code"></block></block>
  <block id="6d28d7f8af7f8c67023cf4d6764bc483" category="paragraph"><block ref="6433dd2d6e1d61b45476efecfcf7d13d" prefix="" category="inline-code"></block></block>
  <block id="10c0851b91ac12edf49186d6d3d1f9e8" category="paragraph"><block ref="cad104e67eebc6460f05ee5386343340" prefix="" category="inline-code"></block></block>
  <block id="fe067063882aa7bb9087ace330c94951" category="paragraph"><block ref="c1691ae4960273f7d983ed570ccc250a" prefix="" category="inline-code"></block></block>
  <block id="ae1fd14d266df956140018dd0a7d3aee" category="paragraph"><block ref="66730ced80aced888a1e584b32aac885" prefix="" category="inline-code"></block></block>
  <block id="4b228c28081e37b40f01923e3b61a64d" category="inline-link-macro">Node4 をインストールしてブートします（手順 24 ）</block>
  <block id="371bc655ee75c24461bd0840658f6e81" category="list-text">[[unset_maxwait_system_commands]]構成で自己暗号化ドライブを使用している場合は、変数をに設定して<block ref="fd93f52ab7757855a2e3e5cbb717ab40" prefix=" " category="inline-code"></block><block ref="3262d48df5d75e3452f0f16b313b7808" prefix=" " category="inline-code"></block> （のように） <block ref="bf7b37b3882ceac8551e83dc1b0a8a55" category="inline-link-macro-rx"></block>、変数の設定を解除する必要があります。</block>
  <block id="7ae7b85041346021fa869537081fa931" category="paragraph"><block ref="56c408bf8e8c75b155f67bfe9777b54e" prefix="" category="inline-code"></block></block>
  <block id="dde01ffa3dbac07014347a80fbf42f2f" category="paragraph"><block ref="8560f41cfd3e5e6f662c16e0b3e08550" prefix="" category="inline-code"></block></block>
  <block id="cf6dcc5bb2ee8722c621b409153f09e6" category="summary">ONTAP 9.15.1以降を実行するコントローラをコマンドを使用してアップグレードできるかどうかを確認します。<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block></block>
  <block id="87e1a0313bed9d5fc988072dbc391f72" category="paragraph">ONTAP 9.15.1以降を実行するコントローラのペアをARLを使用してアップグレードできるかどうかを理解するには、プラットフォームと元のコントローラと交換用コントローラの両方の構成によって異なります。</block>
  <block id="e24cdbe8900a873d4a4ae11498411dbb" category="paragraph">このARLの手順を使用してノードのペアをアップグレードする前に、次の要件を確認して、構成がサポートされていることを確認してください。</block>
  <block id="118741e5081d0dbbcf22bf7a4070d75d" category="list-text">元のコントローラと交換用コントローラでARLを実行できることを確認します。</block>
  <block id="8f74efa09ac6cceb3303dcfa2174ecad" category="list-text">定義済みのすべてのアグリゲートのサイズと、元のシステムでサポートされているディスク数を確認します。次に、サポートされるアグリゲートのサイズとディスク数を、新しいシステムでサポートされるアグリゲートのサイズとディスク数と比較します。この情報が利用可能な_ Hardware Universe _へのリンクについては、を参照して <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ください。新しいシステムでサポートされるアグリゲートサイズとディスク数は、元のシステムでサポートされるアグリゲートサイズとディスク数以上であることが必要です。</block>
  <block id="5bfa896489ac5d834de13d49255cae5e" category="list-text">元のコントローラを交換したときに、クラスタに新しいノードが既存のノードと一緒にクラスタに追加できるかどうかを混在ルールで検証します。クラスタ混在ルールの詳細については、_ Hardware Universe _へのリンクを参照して <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ください。</block>
  <block id="b4d0ae6a1b586d1c02619f3e890563dc" category="list-text">次の構成のAFF 700などのシステムを使用している場合は、ノードごとに2つのクラスタポートにクラスタLIFを移行し、ホームポートを変更します。</block>
  <block id="1b8a2a13165b2dd5a7f0f06a140b11fa" category="list-text">ノードごとに2つ以上のクラスタポート</block>
  <block id="b5a605f27acc8aaffa6429fb0bfc9200" category="list-text">ポートe4a、e4b、e4c、e4dを作成するためのブレークアウトモードのslot4のクラスタインターコネクトカードと、ポートe4e、 e4f、e4g、およびe4h</block>
  <block id="0dea230a78c283d95722337281001b83" category="admonition">ノードごとにクラスタポートが2つ以上あるコントローラのアップグレードを実行すると、アップグレード後に新しいコントローラのクラスタLIFが失われる可能性があります。</block>
  <block id="c2ee3e82d7653ec03d78864af94f8525" category="inline-link-macro">不要なクラスタLIFや不要なクラスタLIFを削除する方法</block>
  <block id="4e3a9eec0a039a8cea74f9155c4b5235" category="paragraph">詳細については、ナレッジベースの記事を参照して <block ref="5f0dbd2b6c240cd9a16eeaba0b0fa49d" category="inline-link-macro-rx"></block>ください。</block>
  <block id="e560338db69e68960d211b11b39e2476" category="paragraph">元のコントローラに接続されているディスクシェルフがサポートされない交換用コントローラはアップグレードできません。</block>
  <block id="6977967d2257e2fdd1ba4bd5cf27e2a1" category="paragraph">内蔵ドライブを搭載したエントリレベルのコントローラをアップグレードする場合は、_ボリュームまたはストレージの移動によるアップグレード_へのリンクを参照し、「_ボリュームの移動によるclustered Data ONTAPを実行するノードのペアのアップグレード_」の手順を参照して <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ください。</block>
  <block id="c536cd195fbfb37bdf2674bf1ac1d143" category="summary">ONTAP 9.15.1以降を実行しているコントローラハードウェアをアップグレードするには、コマンドを使用してルート以外のアグリゲートの所有権を切り替えます<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block> 。</block>
  <block id="72bd776359ea368944b39895a73c96e1" category="admonition">この手順を使用して、MetroClusterのFCまたはIP構成をアップグレードすることはできません。MetroCluster構成をアップグレードするには、MetroClusterのアップグレードおよび拡張に関するドキュメント_へのリンクを参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> 。</block>
  <block id="b9bdcf5de1c3f4a6551456e5f23faeca" category="paragraph">この情報では、元のノードの名前は「 node1 」と「 node2 」になり、新しいノードの名前は「 node3 」と「 node4 」になります。この手順では、ノード1をノード3に、ノード2をノード4に置き換えます。</block>
  <block id="eb107f95b8d7a04b228970d7c1bb0280" category="paragraph">「 node1 」、「 node2 」、「 node3 」、および「 node4 」は、元のノードと新しいノードを区別するためだけに使用されます。手順を実行するときは、元のノードと新しいノードの実際の名前に置き換える必要があります。ただし実際には、コントローラハードウェアのアップグレード後もノードの名前は変わりません。ノード3の名前はnode1になり、ノード4の名前はnode2になります。</block>
  <block id="33f171f425d31134499dbdc4558c3dc5" category="list-text">この手順は、交換用コントローラハードウェアが新しく購入され、使用されていないことを前提としています。この手順には、コマンドを使用して使用済みコントローラを準備するために必要な手順<block ref="b433b76417b4f08166eb90cef3aa2a31" prefix=" " category="inline-code"></block> は含まれていません。交換用コントローラハードウェアを以前に使用した場合は、テクニカルサポートにお問い合わせください。</block>
  <block id="a59ed9adc69cdbf7878c995b225e9ba9" category="summary">コマンドを使用してONTAP 9.15.1以降を実行しているコントローラをアップグレードする場合、ノード3をインストールしてブートし、ONTAPソフトウェアをインストールし<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block> ます。</block>
  <block id="55ca78d77b2ed8c2abb447723f0a84f5" category="paragraph">ノード3をラックに取り付け、ノード1の接続をノード3に転送し、ノード3をブートして、ONTAPを取り付けます。次に、このセクションで説明するように、ノード1のスペアディスク、ルートボリュームに属するディスク、および以前にノード2に再配置されていなかったルート以外のアグリゲートを再割り当てします。</block>
  <block id="d06063b7ad97f050e53bf25e873e27a1" category="paragraph">再配置処理はこのフェーズの開始時に一時停止されます。このプロセスは主に自動化されており、ステータスを確認するために処理が一時停止します。この処理は手動で再開する必要があります。また、SAN LIFが正常にオンラインになり、ノード3の正しいFC物理ポートに割り当てられていることを確認する必要があります。</block>
  <block id="2e19dadb770c8039f72729d7610ae70b" category="paragraph">新しいノードのスペースと高さの要件は、既存のノードと異なる場合があります。アップグレードシナリオのスペース要件を計画します。</block>
  <block id="943732349380142aa38abab6bb1ac65a" category="paragraph">ONTAP 9.15.1以降では、新しいコントローラモデルにベースボード管理コントローラ（BMC）および管理接続用の「レンチ」ポートが1つだけ搭載されています。それに応じてケーブル配線の変更を計画します。</block>
  <block id="f9b42d279ca03438a53158ce12e9931b" category="list-text">クラスタポートとHAポート</block>
  <block id="fe7fd8b6122e59d0a31f6aba277adfec" category="list-text">Serial-Attached SCSI（SAS）およびEthernetストレージポート</block>
  <block id="32fdf2132eba643d668d9366c39d0ed6" category="list-text">SAN構成：iSCSIイーサネット、FC、NVMe/FCスイッチポート</block>
  <block id="53f62bab15508ca4f42cb7ea3efabdb7" category="inline-link-macro">システムのインストール手順</block>
  <block id="030d0caaa6e28b6ea7a558c982620923" category="paragraph">異なるコントローラモデルやカードモデル間で相互運用性を確保するために、新旧のコントローラ間のインターコネクトケーブルの変更が必要になる場合があります。ご使用のシステムのイーサネットストレージシェルフのケーブル接続マップについては、を参照して <block ref="3fd6c72f5e479fd672ff34faa10ab45c" category="inline-link-macro-rx"></block> ください。</block>
  <block id="c3b0f1837ddeacaf4f76674c0b4c1247" category="paragraph">ONTAP 9.15.1以降で導入されたコントローラでは、クラスタインターコネクトとHAインターコネクトで同じポートが使用されます。スイッチ接続構成では、同様のポートを同じクラスタスイッチに接続する必要があります。たとえば、既存のコントローラからAFF A1Kにアップグレードする場合は、両方のノードのe1aポートを一方のスイッチに接続し、両方のノードのe7aポートをもう一方のスイッチに接続する必要があります。</block>
  <block id="f2b6a24d2c745dda8d43b567bca2c023" category="list-text">コントローラとシャーシがHAとして構成されていない場合は、次のコマンドを使用して構成を修正します。</block>
  <block id="9055b0dbc4492797312a9bb5cf273d2b" category="list-text">イーサネットシェルフへの接続に使用するすべてのイーサネットポートがストレージとして構成されていることを確認します。</block>
  <block id="8db5927c4a82bef57c464915c6908a34" category="paragraph">表示される出力は、システム構成によって異なります。次の出力例は、スロット11にストレージカードが1つ搭載されたノードに対するものです。システムの出力は異なる場合があります。</block>
  <block id="7085af5b9d6e34e858539e987b93343b" category="list-text">ストレージに設定されていないポートを変更します。</block>
  <block id="c09a10e8c8eb7df75bc1e7c71c068ce1" category="paragraph"><block ref="879197ca203f9b35caec5106d7e15b58" prefix="" category="inline-code"></block></block>
  <block id="177a90784547d8e8a71e2f739ed9bbff" category="paragraph">ストレージシェルフに接続されたすべてのイーサネットポートは、ディスクとシェルフにアクセスできるようにストレージとして構成する必要があります。</block>
  <block id="2ae60eb6d8ada692bd9d065da52c1af9" category="list-text">node3 で、ブート環境プロンプトで次のコマンドを使用して日付を確認します。</block>
  <block id="1fd9a800ae465d82e925057915beba4c" category="list-text">必要に応じて、 node3 で日付を設定します。</block>
  <block id="833ce90830a0406f310191c0da1f76da" category="paragraph"><block ref="ce2b665b5815a9c7e13cdb6fc96a5a98" prefix="" category="inline-code"></block></block>
  <block id="be6fd219b542001acebc6d5c38cf7f50" category="list-text">node3 で、ブート環境のプロンプトで次のコマンドを使用して時刻を確認します。</block>
  <block id="796917d7c6ba599c40819437b7c2e43c" category="list-text">必要に応じて、 node3 で時刻を設定します。</block>
  <block id="25a249a3cdba620e6eba67639be13589" category="paragraph"><block ref="aa979bf34f52b205295408bd829f28b6" prefix="" category="inline-code"></block></block>
  <block id="3ede614b2861dd7a0548afd0b4e21bcf" category="list-text">ブートローダーのnode3にあるパートナーシステムIDを設定します。</block>
  <block id="9b0061842e9b4b978c7b1f439fbd5125" category="paragraph"><block ref="0a94bdecbd83c3f6cbe41c7cf35976fd" prefix="" category="inline-code"></block></block>
  <block id="1ef946adab62927bb74aa3d563d853b7" category="list-text">自動ブート中にを押して、プロンプトで<block ref="76be6883bcf9e8a6aed3a347ac20e41f" prefix=" " category="inline-code"></block> ノードを停止し<block ref="b4e58ddfd75fec23180551a08c0e87c6" prefix=" " category="inline-code"></block> ます。</block>
  <block id="65675a0cf14d62660f665d2417a5428e" category="list-text">ディスクの接続、コントローラのモデル文字列、HA構成、およびその他のハードウェアの接続に関する詳細を確認します。</block>
  <block id="3f5fca71654403bc4eb39336d9167c1b" category="list-text">[[auto_check3_step32]] LOADERプロンプトでブートします。</block>
  <block id="01f408e94bd0887ce8a9faec6429d20d" category="inline-xref">ステップ32</block>
  <block id="1b99f4c2deddbc39013ffcf98d84cc42" category="admonition">この段階でエラーが発生する場合があります。エラーが発生した場合は、システムが正常にブートするまでの手順を繰り返し <block ref="971923e94dc2d6df8020555aa8d21366" category="inline-xref-macro-rx"></block> ます。</block>
  <block id="81ebb40678602d118beb4dc72537bcac" category="summary">コマンドを使用してONTAP 9.15.1以降を実行しているコントローラをアップグレードする場合、ノード4をインストールしてブートし、ONTAPソフトウェアをインストールし<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block> ます。</block>
  <block id="9f3b5fde6efe97f3316b9fdf630f5307" category="paragraph">ノード4をラックに取り付け、ノード2の接続をノード4に転送し、ノード4をブートして、ONTAPをインストールします。次に、このセクションで説明するように、ノード2の任意のスペアディスク、ルートボリュームに属するディスク、および以前にノード3に再配置されていなかったルート以外のアグリゲートを再割り当てします。</block>
  <block id="eb91daa92a7cd6e3d0f28a92df381e46" category="paragraph"><block ref="0771d944db92b398d28d841edda85128" prefix="" category="inline-code"></block></block>
  <block id="b7b6eb575f44421125712f552d3c6514" category="list-text">[[auto_install4_step24]] NetAppストレージ暗号化（NSE）ドライブが取り付けられている場合は、次の手順を実行します。</block>
  <block id="f16197d10b85eccdd96c289850f6f9a4" category="list-text">[[auto_check_4_step27]] LOADERプロンプトでブートします。</block>
  <block id="9fd0ed44498deb7ffb633dc1298bafef" category="paragraph">ルートボリュームが暗号化されている場合は、システムがルートボリュームを検出できるように、オンボードキー管理シークレットをリカバリします。</block>
  <block id="0df0b8c9a45c8c96a58c4a6a9c14d3ab" category="inline-xref">ステップ27</block>
  <block id="a48904f34036044cc49f6c59e8c6e89d" category="admonition">この段階でエラーが発生する場合があります。エラーが発生した場合は、システムが正常にブートするまでの手順を繰り返し <block ref="0bc751c788418356c58952313677a63b" category="inline-xref-macro-rx"></block> ます。</block>
  <block id="c23b8b78e98fecb522ab190805d122ac" category="summary">コマンドを使用してONTAP 9.15.1以降を実行するコントローラをアップグレードするときに発生する可能性がある問題に関する情報。<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block></block>
  <block id="b315405a73e9a516e55db0bae4a2f30d" category="summary">コマンドを使用してONTAP 9.15.1以降を実行するコントローラをアップグレードする場合、ステージ2、ステージ3、またはステージ5で移行後にLIFがオンラインにならない<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block> 。</block>
  <block id="3a883fa93ec857e5f51025a9f02707b2" category="summary">コマンドを使用して、ONTAP 9.15.1以降を実行するコントローラをアップグレードする場合、ストレージ暗号化の設定と管理、認証キーの管理、およびSnapMirror関係の休止を<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block> 行います。</block>
  <block id="78da491495094c46d3b88b817558b72f" category="paragraph">Key Management Interoperability Protocol （ KMIP ）サーバを使用して、認証キーを管理できます。</block>
  <block id="b8e0013cf4290f6c61761b7136a77620" category="summary">コマンドを使用して、ONTAP 9.15.1以降を実行するコントローラをアップグレードする際に、ノード2のノード1のNASデータLIFがノード2からノード3に再配置されたことを確認します<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block> 。</block>
  <block id="5f6dcf2dc8c9275db98fa671806a2df2" category="list-text">到達可能性スキャンを使用して、iSCSI LIFが正しいホームポートを自動的に検出します。FCおよびNVMe/FC SAN LIFは自動的には移動しません。アップグレード前のホームポートは引き続き表示されます。</block>
  <block id="896fb328ef1870ab0c1426f849038173" category="paragraph">ノード3のSAN LIFを確認します。</block>
  <block id="986b69e60fa399c84378e8d8fdc4169e" category="list-text">「停止」処理ステータスを報告しているiSCSI SAN LIFを新しいデータポートに変更します。</block>
  <block id="d9969d4bf831f15759b98f7f207624b0" category="paragraph"><block ref="10a9afb32a3e32e2f6c74223ba2ea3bf" prefix="" category="inline-code"></block></block>
  <block id="6f1ad881dbf1eabf2024524fef9e1724" category="paragraph"><block ref="ef02172e95be012def2cc33ea87abf3b" prefix="" category="inline-code"></block></block>
  <block id="4f79deb8615933038d14dd5ea648ed45" category="paragraph"><block ref="e880cca787f2bb3d426379f39b8412bb" prefix="" category="inline-code"></block></block>
  <block id="d2106fca8a6ec5ee92267756d2ba5ed8" category="list-text">新しいコントローラのホームにあるFCおよびNVMe/FC SAN LIFを変更し、新しいコントローラのFCPポートに「停止」の動作ステータスを報告します。</block>
  <block id="374a3532b059f787794fea3a4eceed27" category="paragraph"><block ref="fd39e72aaaaed002f894920981daeb07" prefix="" category="inline-code"></block></block>
  <block id="09d339146e9f1aea7c732982453d56de" category="paragraph"><block ref="b60b5b228661943ca32fb9e03105246b" prefix="" category="inline-code"></block></block>
  <block id="844aa209b69b21c6b4ac8b353001bf6c" category="paragraph"><block ref="340db2fa4901e2bebbaa48beb251cc09" prefix="" category="inline-code"></block></block>
  <block id="5041f3d5ede13a9dd794a52168aacdb3" category="summary">コマンドを使用して、ONTAP 9.15.1以降を実行するコントローラをアップグレードする際に、ノード3にあるノード2のNASデータLIFがノード3からノード4に再配置されたことを確認します<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block> 。</block>
  <block id="37795240818b6015e8cc10cd9fdd35e1" category="paragraph">ノード4のSAN LIFを確認します。</block>
  <block id="b13a176ba8c67756fe909d3d869f8300" category="summary">コマンドを使用して、ONTAP 9.15.1以降を実行するコントローラのアップグレードに必要な参照用コンテンツとWebサイト<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block> 。</block>
  <block id="3c20dd08fd85a0df1a15ca4f18373b0f" category="inline-link-macro">ONTAP 9.13.1 コマンド：マニュアルページリファレンス</block>
  <block id="2b8c930369e367a3b3052f1cf2983b12" category="cell"><block ref="2b8c930369e367a3b3052f1cf2983b12" category="inline-link-macro-rx"></block></block>
  <block id="28a36bac19a105a6c55917402b89e8de" category="cell">サポートされる ONTAP 9.13.1 コマンドの構文と使用法について説明します。</block>
  <block id="23eb0945f4d46d3f4d51a348a10dd82f" category="inline-link-macro">ONTAP 9.14.1 コマンド：マニュアルページリファレンス</block>
  <block id="88da6307f7bc93b816e681a7c65f4e44" category="cell"><block ref="88da6307f7bc93b816e681a7c65f4e44" category="inline-link-macro-rx"></block></block>
  <block id="dee12845d94d6609f9426b120ddb5c22" category="cell">サポートされる ONTAP 9.14.1 コマンドの構文と使用法について説明します。</block>
  <block id="5c46a6f63b33b151855d1f9e68a36a49" category="inline-link-macro">ONTAP 9.15.1 コマンド：マニュアルページリファレンス</block>
  <block id="c9a8466d75c7ff0d183b3bad5f2e0b16" category="cell"><block ref="c9a8466d75c7ff0d183b3bad5f2e0b16" category="inline-link-macro-rx"></block></block>
  <block id="9b30e04c2a3bf26ad6970f9de62054da" category="cell">サポートされる ONTAP 9.15.1 コマンドの構文と使用法について説明します。</block>
  <block id="5d1d09cdf9fe1ec2d0f41b2ba3b70572" category="summary">コマンドを使用してONTAP 9.15.1以降を実行するコントローラをアップグレードする手順を理解する<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block> 。</block>
  <block id="1af790a1d1ba950a7e1da8d38c51c5be" category="paragraph">ステージ 3 で、ノード 3 をインストールしてブートし、ノード 1 のクラスタポートとノード管理ポートがノード 3 でオンラインになったことを確認し、ノード 3 のインストールを確認します。NetApp Volume Encryption（NVE）を使用している場合は、キー管理ツールの設定をリストアします。さらに、node1のNASデータLIFとルート以外のアグリゲートをnode2からnode3に再配置し、SAN LIFがnode3にあることを確認します。</block>
  <block id="49eaab9bcc3c0260e65bdd90701c7a34" category="paragraph">ステージ 5 で、 node4 をインストールしてブートした場合、 node2 のクラスタポートとノード管理ポートがオンラインになっていることを確認し、 node4 のインストールがあることを確認します。NVEを使用している場合は、key-manager configurationをリストアします。node2のNASデータLIFとルート以外のアグリゲートもnode3からnode4に再配置し、SAN LIFがnode4にあることを確認します。</block>
  <block id="7f442cbfd762c75e0b1d1cfb8504c338" category="summary">コマンドを使用して、ONTAP 9.15.1以降を実行するコントローラをアップグレードする際にノードを準備し、一連の事前確認を実行します<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block> 。</block>
  <block id="f65104a2552945130cb62829d56eac5e" category="paragraph"><block ref="42b6de3b1be21fa350d49af2e7daebb3" prefix="" category="inline-code"></block></block>
  <block id="a782445fd2b20e4f7d28893401b7d2c1" category="admonition">system controller replace startコマンドは、advanced権限レベルでのみ実行できます。<block ref="0581d0d071ad835f74bf419081ce5d75" prefix=" " category="inline-code"></block></block>
  <block id="9c0690c534d875fea406da924eb5155b" category="paragraph">次の構成のAFF 700などのシステムを使用している場合は、アップグレードを開始する前に、クラスタLIFをノードごとに2つのクラスタポートに移行してホームポートに戻します。</block>
  <block id="6475503c68c31e1b289728d5569f2154" category="list-text"><block ref="11626abfda40f40ee6d3e1b442aa8511" prefix="" category="inline-code"></block></block>
  <block id="2ced80bebf7ea6acfc08de4ca669ad2c" category="list-text"><block ref="40b1530b36a13c1a14a32a23fe0ab5ea" prefix="" category="inline-code"></block></block>
  <block id="2ca00583a1a36030737f63a3db12dc87" category="list-text"><block ref="e69f23b34f9bbe2a8339bac8fbc82cfc" prefix="" category="inline-code"></block></block>
  <block id="aefd98482c53fa515e9d81991d72db96" category="list-text"><block ref="c51247ee7029a949bd1ee0b4eeb47115" prefix="" category="inline-code"></block></block>
  <block id="bf0c52d65d5a9ce3a08a397b60f1ddfd" category="list-text"><block ref="18ec280866dbd6dea641c63869c4c1a2" prefix="" category="inline-code"></block></block>
  <block id="483dba34417e9c3560c820a1c0ee5bda" category="list-text"><block ref="0eed0f4f603153cbeb3b1aba17179b0c" prefix="" category="inline-code"></block></block>
  <block id="5d4d44b5f8928f1ead7d43fe2fab5feb" category="list-text"><block ref="80d0e28fb8e87cfdd0776bb5c325ff76" prefix="" category="inline-code"></block></block>
  <block id="2f88d1e1249a0a016ccd79e3fd132c7a" category="list-text"><block ref="fc6bc78b4358040ec8297961bbde4459" prefix="" category="inline-code"></block></block>
  <block id="cf2dd36e190836a4292a3ec01e91082d" category="list-text"><block ref="f6aa46ffe6facdfe93a6a2092c83252c" prefix="" category="inline-code"></block></block>
  <block id="eced7fae9400585a99160d012aa1dc1d" category="list-text"><block ref="a3e9c82d2513815e45d4cfafb2baf4b5" prefix="" category="inline-code"></block></block>
  <block id="e9fb1ccbd68c25a664d6da30131d2b39" category="list-text"><block ref="98d3eee791202c85ed8b5ed0f7b3e0b1" prefix="" category="inline-code"></block></block>
  <block id="051a5ac106e7a944f99af2c8da45b42b" category="list-text"><block ref="52f89fbf0b3eec3638d853b4f3001f3d" prefix="" category="inline-code"></block></block>
  <block id="a708619095926aab755444a042471757" category="inline-link">ライセンス管理</block>
  <block id="a00358ba81263d0981cb0be275b2de59" category="paragraph">ONTAPライセンスの詳細については、を参照してください<block ref="c4c2447b404ea8605b7733ab11ccf24b" category="inline-link-rx"></block>。</block>
  <block id="301cf3a06efdb459dfe6498f9ad64dfa" category="admonition">ライセンスされていない機能をコントローラで使用すると、ライセンス契約に違反する可能性があります。</block>
  <block id="e2d09f92ab6c7ffd6073273d5ac9f24e" category="summary">ONTAP 9.15.1以降を実行しているコントローラをコマンドを使用してアップグレードすると、さまざまな段階でシステムがクラッシュする（リブート、パニック、または電源再投入）ことがあります<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block> 。</block>
  <block id="4a3168a934fbe49f2401eb2cd5d5d214" category="summary">コマンドを使用してONTAP 9.15.1以降を実行しているコントローラをアップグレードする場合は、ルート以外のアグリゲートとNASデータLIFをノード1からノード2に移動し、ノード1のリソースをノード3に移動し<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block> ます。</block>
  <block id="b3d6aec1ce754e8455c1b6b3cc346008" category="summary">コマンドを使用してONTAP 9.15.1以降を実行するコントローラをアップグレードする場合は、ノード2のルート以外のアグリゲートをノード3に再配置し<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block> ます。</block>
  <block id="41d784112ab245c3a5a3845c5d0ddf06" category="summary">ONTAP 9.15.1以降を実行するコントローラをコマンドを使用してアップグレードするには、特定のツールとドキュメントが必要です<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block> 。</block>
  <block id="c46a03cfad2adbb52f35934a739008ad" category="summary">必要に応じて、コマンドを使用してONTAP 9.15.1以降を実行するコントローラをアップグレードする際にノード4のキー管理ツールの設定をリストアします<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block> 。</block>
  <block id="ef1be506d6bbac4510402025ceb5fae4" category="summary">必要に応じて、コマンドを使用してONTAP 9.15.1以降を実行するコントローラをアップグレードする際にノード3のキー管理ツールの設定をリストアします<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block> 。</block>
  <block id="82d5f28230d6cee1c8a5d3efc636c2c5" category="summary">ONTAP 9.15.1以降を実行するコントローラのアップグレード時に、コマンドを使用してSnapMirror転送と関係を再開し<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block> ます。</block>
  <block id="e7cda9fa69f0a09140a07fdb502443e8" category="summary">コマンドを使用してONTAP 9.15.1以降を実行しているコントローラをアップグレードする場合は、ノード2のHAペアを無効にし、ノード1をシャットダウンし<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block> ます。</block>
  <block id="ec0cce33fff0705777a61817d3c04c51" category="summary">コマンドを使用してONTAP 9.15.1以降を実行しているコントローラをアップグレードする場合は、ノード2をシャットダウンしてラックまたはシャーシから取り外し<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block> ます。</block>
  <block id="0cac54c28fe0956468e2dcfaf1cbf3df" category="summary">必要に応じて、コマンドを使用してONTAP 9.15.1以降を実行するコントローラをアップグレードする際に、NVEまたはNAE用に新しいコントローラモジュールを設定し<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block> ます。</block>
  <block id="67501e10cb3fb2e8cf9b91e3c64f24e8" category="summary">必要に応じて、コマンドを使用してONTAP 9.15.1以降を実行するコントローラをアップグレードする際に、ストレージ暗号化を設定し、SSL証明書をインストールし、キー管理サーバをセットアップし<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block> ます。</block>
  <block id="9281ac90e9eaac4071b2c4565de73862" category="summary">コマンドを使用して、ONTAP 9.15.1以降を実行するコントローラをアップグレードする場合は、ノード1の物理ポートがノード3に正しくマッピングされていることを確認し、ノード3のネットワーク設定をリストアします<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block> 。</block>
  <block id="629c0519c8cad55ffc8d1dd07eed1872" category="list-text">アップグレードされた node1 （ node3 ）にある物理ポートをすべて一覧表示します。</block>
  <block id="0fbd6a074ce1ade089d8430823937324" category="list-text">node3 にあるすべてのポートの到達可能性をリストします。</block>
  <block id="d8c7ef2c85a7a25537cac9242cffa1bd" category="paragraph"><block ref="db449c984bbf1e9facfe9fd1a8343fe9" prefix="" category="inline-code"></block></block>
  <block id="a7f60658094ae5cd0040096989b61fd4" category="paragraph"><block ref="ab9fd7da881d0d25eaf16ef10e091a77" prefix="" category="inline-code"></block></block>
  <block id="a3379da48ea49ab540d3d1280e1befdb" category="paragraph"><block ref="14b0d746fa69da837f599848e1cd79e4" prefix="" category="inline-code"></block></block>
  <block id="d8f93cb99c84b71cefbdf673772842c8" category="paragraph"><block ref="31741a699f3d862562cd6c5b873e911d" prefix="" category="inline-code"></block></block>
  <block id="39f16ed05d559ba39f10f8313fdbdbf7" category="paragraph"><block ref="c66634590325609b6b8009a565f11446" prefix="" category="inline-code"></block></block>
  <block id="a1f794c27a81b33245cd8b0a81b4c628" category="list-text">次の手順に従って、ブロードキャストドメインに適切な物理ポートを割り当て<block ref="249694a485fc5d3289c38986b4f8e887" prefix=" " category="inline-code"></block> ます。</block>
  <block id="9c0ec98274edaf49b54f8a682182e736" category="paragraph"><block ref="42648bb8b6a1d26009b7b744d239e064" prefix="" category="inline-code"></block></block>
  <block id="2599561b277274943f3683cd23e2e672" category="paragraph">次に、ポート「e9a」で削除されたVLANを「e9d」にリストアする例を示します。</block>
  <block id="e200840cce3d89cb39fd811ba82a77d5" category="paragraph"><block ref="2a5af291ef24386c853e6cf746e464c3" prefix="" category="inline-code"></block></block>
  <block id="dbab01f6e6b7bb76410506a5096b105b" category="paragraph"><block ref="48a6c73f1a549e44599ad131ac8a7586" prefix="" category="inline-code"></block></block>
  <block id="d93f66fe51534a40f0833d1677d324bf" category="summary">コマンドを使用してONTAP 9.15.1以降を実行するコントローラをアップグレードする場合は、ノード2の物理ポートがノード4に正しくマッピングされていることを確認し、ノード4のネットワーク設定をリストアします<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block> 。</block>
  <block id="d8f20787d5ec4fcacf599bd56be2bbd1" category="paragraph"><block ref="c322534c44813d5ec8b7bde6b1e135b5" prefix="" category="inline-code"></block></block>
  <block id="e047fa40e589357c94de5b0e63b1c469" category="paragraph">次に、ポート「e10a」で削除されたVLANを「e10b」にリストアする例を示します。</block>
  <block id="d652f04b0c47ec3200904bc82c8d5ff7" category="paragraph"><block ref="0f64f457d55e8e27ee821e9df0561d32" prefix="" category="inline-code"></block></block>
  <block id="b0d52e5491c54658a39bbef8e5dd30a6" category="sidebar">アグリゲートの再配置、ボリュームの移動、またはストレージの移動を実行して、コントローラハードウェアをアップグレードします。</block>
  <block id="0aa489897873ed4f6cacbbccf44589ea" category="sidebar">ARLを使用したアップグレード</block>
  <block id="ef62a5865ef10a9f98eab6ed7130657e" category="sidebar">AFF A220、AFF A200、AFF C190、FAS2620、FAS2720の交換</block>
  <block id="e7a797d163f1786c84029862d653fdb1" category="sidebar">AFF A700またはFAS9000の交換</block>
  <block id="fe6c048ac188825e939c35497493825e" category="sidebar">AFF A90またはAFF A70のインストール</block>
  <block id="b2428a0f40b1f13f030d6799860c7cca" category="sidebar">ASA A150、AFF A150、またはFAS2820の設置</block>
  <block id="1571b9a3c2c5be276f508055478b60cb" category="sidebar">ASA A900、AFF A900、またはFAS9500の設置</block>
  <block id="2a80893b493b7ab0f3c726473a1b8a3e" category="sidebar">ステージ1。アップグレードの準備（ONTAP 9.15.1以降では「system controller replace」を使用したアップグレード）</block>
  <block id="fd9953035d2e427fff5d261c7c0e28af" category="sidebar">ステージ2。ノード1を再配置して撤去する（ONTAP 9.15.1以降では「system controller replace」を使用してアップグレード）</block>
  <block id="e08f30fc0052987b4d3dd4b36c42592a" category="sidebar">ステージ3。ノード3を設置してブート（ONTAP 9.15.1以降では「system controller replace」を使用してアップグレード）</block>
  <block id="78f93e58bfbcd8d8cfd8ede8a4455f0c" category="sidebar">ステージ4。ノード2を再配置して撤去する（ONTAP 9.15.1以降では「system controller replace」を使用してアップグレード）</block>
  <block id="e53c96ea4b74db1471d45fc6c84eef75" category="sidebar">ステージ5。ノード4を設置してブート（ONTAP 9.15.1以降では「system controller replace」を使用してアップグレード）</block>
  <block id="fe9158ff831e80fc9361c4a06ba512f1" category="sidebar">ステージ6。アップグレードの完了（ONTAP 9.15.1以降では「system controller replace」を使用したアップグレード）</block>
  <block id="1d2cec084b14c2bb8b27b81dee7eff45" category="sidebar">トラブルシューティング（ONTAP 9.15.1以降では「System controller replace」を使用したアップグレード）</block>
  <block id="d7548e4333d6055e4cfe02fb476e8bb3" category="summary">AFF A800 node1に接続していたクラスタ接続、HA接続、ストレージ接続、およびデータ接続を、新しく設置したAFF A90またはAFF A70 node1に接続します。</block>
  <block id="e41a57de6846f0486a2837efec0a7735" category="section-title">e0MポートとBMCポートを接続</block>
  <block id="71f7c95fc9a5b8a1a847fc0baf3f04a0" category="cell">状況</block>
  <block id="31a1d0c3f4eee8e89c1e85f3c2f53402" category="cell">e0MとBMCのIPアドレスが同じIPサブネット上にある</block>
  <block id="6d317071220219966d4e9dcc83f3c48f" category="cell">e0MとBMCのIPアドレスが別 々 のサブネットにあります</block>
  <block id="06ae0bb86db3eff96d5e95f8377d0658" category="list-text">e0MとBMCのIPアドレスを1つのIPサブネットにマージします。</block>
  <block id="444178cd590abb095281389d276396fb" category="section-title">2ノードスイッチレスクラスタに接続</block>
  <block id="17ff48b429522b181dd38c99ad361c90" category="section-title">スイッチ接続クラスタへの接続</block>
  <block id="ac431d04c49bd36c09bfbc24a8f894f9" category="inline-link-macro">NetApp Bugs OnlineのバグIDCONTAP-166978</block>
  <block id="f24d3bbf01666420670f76d88d0728aa" category="paragraph">既存のノードのクラスタポートe0aまたはe0bを新しいノードのクラスタポートにリンクできない場合は、を参照してください <block ref="7be812dd65bbd3f39bbb06fd50caac76" category="inline-link-macro-rx"></block>。</block>
  <block id="33bb7bcaf48f0fdda36a26455a40a230" category="inline-link-macro">Storage Efficiencyの詳細</block>
  <block id="6d6b534c9b53f9b5663ea4448a9c5c5a" category="paragraph"><block ref="7e7ac2ea54718abbfde88230c884c797" category="inline-link-macro-rx"></block>です。</block>
  <block id="2b05a3de35946226b44f265788b807c9" category="cell">ONTAP以降でサポート</block>
  <block id="8643f1ec20c68bd9122a5e9c431fe6fe" category="cell">FAS70、FAS90</block>
  <block id="1a6c927dff2b4164c21b2d570f87ed5c" category="cell">9.15.1P3</block>
  <block id="649e9f4912bcf4af7efe489c6866eb1d" category="cell">FAS90</block>
  <block id="f43de3716b79c8e43965aeacd1411a48" category="cell">AFF A300、AFF A400、AFF A700</block>
  <block id="5fa70989a3e04b27c407da750f3d94fe" category="cell">AFF A70、AFF A90、AFF A1K</block>
  <block id="ccf78fb30997636f483e58875cad308b" category="cell">AFF A90、AFF A1K</block>
  <block id="6a171bc0a83fdc8cf2cad914f26e60f7" category="inline-image-macro">ノード1とノード2をノード3とノード4に交換</block>
  <block id="3aaf8e09b00062e6ef2a6306db035456" category="paragraph"><block ref="3aaf8e09b00062e6ef2a6306db035456" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ab209cb8d12b2f480578b4949df8aaa0" category="paragraph"><block ref="ab209cb8d12b2f480578b4949df8aaa0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="75b20a9dfdabc84f9f91512eb8cfbda8" category="list-text">FAS70およびFAS90システムの場合、ONTAPで変換されるのは、シンプロビジョニングされている既存のボリュームで、アップグレード前にStorage Efficiencyが有効になっていたボリュームのストレージ効率のみです。</block>
  <block id="062789e6044bfae1e66a58c85ebf5281" category="paragraph"><block ref="062789e6044bfae1e66a58c85ebf5281" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f52cbea23351114ee0b3b28c1c53db00" category="paragraph"><block ref="f52cbea23351114ee0b3b28c1c53db00" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fb53938953a64ed1298a3856f8bb8679" category="doc">ARLのアップグレード手順を選択</block>
  <block id="d42c7018dcc284c2db31a4a24d2b3b3c" category="paragraph">アグリゲートの再配置（ARL）を使用すると、システムを停止することなくコントローラハードウェアをアップグレードできます。コントローラハードウェアをアップグレードするその他の方法については、を参照してください<block ref="9f3bef3f6be14e6a346fc21a2929c802" category="inline-link-macro-rx"></block>。</block>
  <block id="52c65abc1d4cdef95969c778420220da" category="paragraph">ARLを使用すると、ルート以外のアグリゲートを元のノードから同じクラスタ内の新しいノードに移行して、ONTAPを実行しているノードのペアのコントローラハードウェアを無停止でアップグレードできます。アップグレード中は、アップグレード対象のノードでホストされているデータにアクセスできます。</block>
  <block id="dc32b0faeda54116d50282dbfa24dda7" category="paragraph">ARLでは、HA構成を利用して、ルート以外のアグリゲートが同じクラスタ内のストレージを共有している場合に、それらのアグリゲートの所有権を別のノードに移動できます。</block>
  <block id="72e1bba43ca452b38bc94d7f96d04f68" category="paragraph">ARLを使用してコントローラハードウェアをアップグレードする方法はいくつかあります。適切な手順を選択するには、各ARLアップグレードオプションでサポートされるシステムとONTAPのバージョンに関する次の情報を確認してください。</block>
  <block id="cd9547b52fda0ee4b09ec2df334b7b51" category="section-title">ONTAP 9 .15.1以降では、「system controller replace」コマンドを使用します。</block>
  <block id="83606cabd222d0d058cfae8874f35382" category="example-title">サポートされるシステムの表示</block>
  <block id="37b7186b6ae7b3227f80bbe1da693be7" category="section-title">同じシャーシでコントローラモデルをアップグレード</block>
  <block id="3fe507461c708cfe67db6ed39b069266" category="cell">古いシステム</block>
  <block id="7a3b05b130c9ce12ac95ac076b53bfcf" category="cell">AFF A70またはAFF A90</block>
  <block id="3e44bbb802d299056c9839f8bdfc777a" category="cell">9.15.1以降</block>
  <block id="184f38916b6639f5bdbf7619d90cebc3" category="paragraph">9.10.1P15、9.11.1P11以降</block>
  <block id="45b09eba6fe8095ae38635150e57152a" category="paragraph">*注*：AFF A200では、9.11.1以降のONTAPバージョンはサポートされません。</block>
  <block id="26ed1ff6e78b37e572170171b4fabc0f" category="paragraph">*注*：FAS2620では、9.11.1以降のONTAPバージョンはサポートされません。</block>
  <block id="074a728bac13ce0b2d079bed92780d8d" category="section-title">ONTAP 9 .8以降で「system controller replace」コマンドを使用する</block>
  <block id="bf2f20b69fe364bf3a76fbb262d9c675" category="paragraph">アップグレードシナリオが次のサポート対象システムマトリックスに記載されている場合は、に進み、<block ref="f597d5199c2cdfe3f660f286188248d5" category="inline-link-macro-rx"></block>アップグレード手順を開始します。</block>
  <block id="1694aa2f0754e25d2950e8f0248979e6" category="cell">FAS8060、FAS8080</block>
  <block id="36b18d9d2f8a0181d8d87c7486c8a653" category="cell">AFF A300、AFF A400、AFF A700、AFF A800</block>
  <block id="a8391478850ce78247234468f8498486" category="cell">AFF8060、AFF8080</block>
  <block id="0ee1a7b779294c0ac023c9c91408c895" category="cell">FAS8300、FAS8700、FAS9000、FAS9500</block>
  <block id="acacda5e23fb3293e9c45233209f315e" category="cell">AFF A400、AFF A700、AFF A800、AFF A900</block>
  <block id="03b6470644df0355779fa63281baa419" category="section-title">ONTAP 9 .5 ~ 9.7で「system controller replace」コマンドを使用</block>
  <block id="c1d3524ca04e13df3d78b13f4fa1729f" category="paragraph">アップグレードシナリオが次のサポート対象システムマトリックスに記載されている場合は、に進み、<block ref="7c59c4699adc4b75b7233df7fb60de9b" category="inline-link-macro-rx"></block>アップグレード手順を開始します。</block>
  <block id="33f30bea35826525ddc350a931a3e60e" category="cell">FAS8700、FAS9000、FAS8300</block>
  <block id="b412f16da28f14611d953df7ec9b215a" category="cell">AFF A700、AFF A800、AFF A400</block>
  <block id="c57c038bdb2b903ef67865f743dfc52e" category="section-title">手動のARLコマンドを使用</block>
  <block id="114c547b8e01b5b1d0aff42924c30c8c" category="paragraph">アップグレードシナリオが「system commands」でサポートされていない場合は、手動コマンドを使用してARLアップグレードを実行できます。</block>
  <block id="a58e3cec27f318019d650117009a9a1c" category="list-text"><block ref="a58e3cec27f318019d650117009a9a1c" category="inline-link-macro-rx"></block></block>
  <block id="4928666bac61f347373a03116de25bb3" category="list-text"><block ref="4928666bac61f347373a03116de25bb3" category="inline-link-macro-rx"></block></block>
  <block id="261856aec998b0985aebf71d4d5b7db7" category="paragraph"><block ref="261856aec998b0985aebf71d4d5b7db7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cbc19247d1bcf806abfae9b8ac144851" category="paragraph"><block ref="cbc19247d1bcf806abfae9b8ac144851" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6589bb9996d43753910401a792dad35f" category="paragraph"><block ref="6589bb9996d43753910401a792dad35f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="105e1829dde2a37d92ad8310c27aeb64" category="paragraph"><block ref="105e1829dde2a37d92ad8310c27aeb64" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fc1e19fb7bebdbd1fe84af4aa27b74b7" category="paragraph"><block ref="fc1e19fb7bebdbd1fe84af4aa27b74b7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6f066e6d94e620ac8fd90616927ffe5a" category="paragraph"><block ref="6f066e6d94e620ac8fd90616927ffe5a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d921f56d2d436f5a0c085db02c0735ab" category="paragraph"><block ref="d921f56d2d436f5a0c085db02c0735ab" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d183b68f24aed33d51e0d78492187ce4" category="paragraph"><block ref="d183b68f24aed33d51e0d78492187ce4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="be14b840c0e67a106966f6782397b832" category="paragraph"><block ref="be14b840c0e67a106966f6782397b832" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2981e1a4efec06a6c78b3734024a96a1" category="paragraph"><block ref="2981e1a4efec06a6c78b3734024a96a1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a8146cc42b0ac83dacd0c674c2e19baa" category="paragraph"><block ref="a8146cc42b0ac83dacd0c674c2e19baa" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fd4a2232b0a4fad7f2f7a5207ee94001" category="sidebar">ONTAPシステムとソフトウェアの詳細</block>
  <block id="743b2bde29eae11996923323c6b89672" category="sidebar">ONTAP スイッチのドキュメント</block>
  <block id="664f9c52f93e2fbf6e801148b0f573ad" category="inline-link-macro">HAペアの管理</block>
  <block id="fc0b22bb38f11521c03de86c56643d5d" category="cell"><block ref="fc0b22bb38f11521c03de86c56643d5d" category="inline-link-macro-rx"></block></block>
  <block id="62e8c46614cda642480e223b008f5dfc" category="list-text">HAペア管理のドキュメント</block>
  <block id="147e1330d5f2538de36e6ee787c5446d" category="paragraph">HAペア管理_へのリンクを参照し<block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block>、HAペアの_ベストプラクティス_セクションに従ってください。元のノードのどちらも 50% 以上の利用率で実行しないでください。あるノードの利用率が 50% 未満の場合は、コントローラのアップグレード中に両方のノードの負荷を処理できます。</block>
  <block id="270b6acdba0a7f34d4c1dd4dd05525ab" category="paragraph">いずれかのノードが部分的なギブバック状態の場合は、<block ref="b27ff28f78c71d3027cc2fb76f6fe30c" prefix=" " category="inline-code"></block>コマンドを使用してギブバックを実行し、コマンドを使用してギブバック<block ref="852ce55a153bc728405ba8a2c95bcdf1" prefix=" " category="inline-code"></block>が必要なアグリゲートがないことを確認します。コマンドの詳細については、「_HA pair management_」へのリンクを参照して<block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block>ください。</block>
  <block id="395d4fd7f065a92548b412c96dbe1faa" category="paragraph">見つからないディスクがある場合は、CLI_を使用したディスクへのリンクとアグリゲートの管理、CLI_を使用した論理ストレージの管理、および_HAペアのMANAGEMENT_を参照して<block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block>、HAペアのストレージを設定してください。</block>
  <block id="7c67b8b9f7d3533c33fb6cecf037204c" category="inline-link-macro">SANホストからASA R2ストレージシステムへのデータアクセスを有効にする</block>
  <block id="c8d7e0b6f3e69fd12ca1cfc90687f6a8" category="paragraph">9.11.1P7以降のパッチリリース（FAS2620）</block>
  <block id="8499179dca2bc3203741083d0d24160c" category="cell">交換するノードに不足しているディスクまたは障害が発生しているディスクがある場合、タスクは失敗します。見つからないディスクがある場合は、CLI_を使用したディスクへのリンクとアグリゲートの管理、CLI_を使用した論理ストレージの管理、および_HAペアのMANAGEMENT_を参照して<block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block>、HAペアのストレージを設定してください。</block>
  <block id="96921c9c55ac5491d93180278bb4bc78" category="paragraph">9.11.1P7以降のパッチリリース（FAS2620）^2^</block>
  <block id="8ac418c9132657ca13947b8d7087efa1" category="cell">交換するノードに不足しているディスクまたは障害が発生しているディスクがある場合、タスクは失敗します。見つからないディスクがある場合は、CLI_を使用したディスクへのリンクとアグリゲートの管理、CLI_を使用した論理ストレージの管理、および_HAペアのMANAGEMENT_を参照して<block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block>、HAペアのストレージを設定してください。</block>
  <block id="66691da5eb04d0eba08bba016646849a" category="paragraph">アップグレードできるのは、同じシリーズの交換用システムのみです。</block>
  <block id="e882986702fe0f326c1fa2d4698be2cd" category="list-text">AFF AシリーズシステムからAFF Aシリーズシステム</block>
  <block id="737115f91c530c4e8ddec392681db510" category="list-text">AFF CシリーズシステムからAFF Cシリーズシステムへ</block>
  <block id="04a7d3ed17290dfa8c947b7265180931" category="list-text">ASA システムから ASA システムへの移動</block>
  <block id="6cc3f2b4a05b456b1f754eaf8cb03200" category="list-text">ASA AシリーズシステムからASA Aシリーズシステム</block>
  <block id="af2a1a7e91ed894338bb4bd32c3e13d0" category="list-text">ASA CシリーズシステムからASA Cシリーズシステムへ</block>
  <block id="bd78dcbf9a0f6c9dff2586a02d89b664" category="list-text">システムでONTAP 9.15.1以降が実行されており、イーサネットスイッチを使用してイーサネット接続ストレージに接続している。</block>
  <block id="68b23d3f7da36f1f08be0727f515bcb1" category="cell">AFF A250用</block>
  <block id="69d98e4969e686ae5d812406b2ac5b64" category="cell">AFF A30、AFF A50</block>
  <block id="5c4d47ba596f06f53b9aa793345127dd" category="cell">AFF C250用</block>
  <block id="b1a7d02f89c62c97fedf60bb09caa4bc" category="cell">AFF C30、AFF C60</block>
  <block id="10f8efd0828a892abca9a0a32fd5ed17" category="cell">AFF A70、AFF A90</block>
  <block id="e0d8a184e851ebead0da8ef2d160d077" category="cell">AFF C800用</block>
  <block id="1f402faca892747a0f6cddf437d1f59d" category="admonition">ASA R2交換システムへのASAアップグレードはサポートされていません。ASAからASA R2システムへのデータの移行については、を参照してください<block ref="1aa51bb167bf6182c65d56fb25d15ddf" category="inline-link-macro-rx"></block>。</block>
  <block id="730be9363075afaad4bc7b65f4d050bf" category="admonition">ASA R2交換システムへのASAアップグレードはサポートされていません。ASAからASA R2へのデータの移行については、を参照してください<block ref="1aa51bb167bf6182c65d56fb25d15ddf" category="inline-link-macro-rx"></block>。</block>
  <block id="9903e8198da89233d9c0b5d62c39d3f4" category="list-text">ONTAP 9.15.1以降で導入されたシステムにアップグレードすると、ONTAPは既存ボリュームのStorage Efficiencyを変換し、ハードウェアオフロード機能を使用する新しいStorage Efficiency機能を適用します。これは自動バックグラウンドプロセスであり、システムのパフォーマンスへの明らかな影響はありません。</block>
  <block id="8563635251febb88efccfa4dc597ac2c" category="list-text">AFF A20、AFF A30、AFF A50、AFF A70、AFF A90、AFF A1K、AFF C30、AFF C60、およびAFF C80については、ONTAPによって、シンプロビジョニングされた既存のすべてのボリューム（Storage Efficiencyを使用しないボリュームも含む）のストレージ効率が変換されます。</block>
  <block id="18d67a42853f70b2875eaf5e8cb56d86" category="inline-link-macro">ONTAP 9.15.1以降で導入されたコントローラハードウェアをアップグレードするには、「system controller replace」コマンドを使用します。</block>
  <block id="39f06ee87f2f74931caba4810a649a87" category="paragraph">アップグレードシナリオが次のサポート対象システムマトリックスに記載されている場合は、に進み、<block ref="a5b8bd3c7ebe976730c3700b6361239f" category="inline-link-macro-rx"></block>アップグレード手順を開始します。</block>
  <block id="cc6089132b9a5e4af29a76834480cc1a" category="cell">AFF A50用</block>
  <block id="0bd0e673df4c14cae45a11fac30c530b" category="cell">9.16.1</block>
  <block id="dfd7c6c39ae43772af17ea2f340d12f1" category="cell">AFF A220、AFF A150</block>
  <block id="9d9de1698f7e401c78687204de906ee5" category="cell">AFF A20用</block>
  <block id="95392acbc8522bf81166b3d44b333fca" category="cell">9.16.1以降</block>
  <block id="a413d295f5d536c0e6c64fa5cd9479fb" category="cell">AFF A50、AFF A30</block>
  <block id="724bf3ae18d86521a5b9d77a13fcfddb" category="cell">AFF C80用</block>
  <block id="b9234e77b4a8b2f78eab4a2947850612" category="inline-link-macro">サポートされるシステムマトリックス</block>
  <block id="cd021900ed941327c8cbaab423602fea" category="paragraph">コントローラモジュールを交換する場合は、すべての接続を古いコントローラモジュールから交換用コントローラモジュールに移動します。</block>
  <block id="ca76cff03dc67711aed20c19584f555a" category="paragraph">コントローラモジュールとNVRAMモジュールを交換する場合は、コンソール接続と管理接続のみを移動します。</block>
  <block id="32fc669b4855ba474461c53a3b65197d" category="list-text">（AFF A250、AFF C250、AFF A800、またはAFF C800アップグレードのみ）Loaderプロンプトでメンテナンスモードに切り替えます。</block>
  <block id="ece7ccdab4b9cd808ab8bec964f41023" category="admonition">コンソール接続と管理接続の移動は、システムモジュールを交換してアップグレードする場合にのみ行います。</block>
  <block id="0f4936acdcce8b5de52c6526de01d25c" category="doc">共有クラスタHAとストレージのノード1をケーブル接続します。</block>
  <block id="8bb57e3374049ebdebba3212782683e5" category="paragraph">次のいずれかのアップグレードを実行する場合は、以前に既存のシステムのnode1に接続していたクラスタ、HA、ストレージ、データ、および管理の接続を、交換用システムの新しくインストールしたnode1に接続する必要があります。</block>
  <block id="e7ce52a30e7433f39e30c116e52301e0" category="cell">既存システムのe0MポートまたはBMCポートを、交換用システムの「レンチ」ポートに接続します。</block>
  <block id="6969dcd136606aa6e90d53d2c4679e06" category="paragraph">次の表に、2ノードスイッチレスクラスタ構成でのスイッチポートの用途を示します。</block>
  <block id="4aa636d0c8e798111a1395c5cf44abef" category="cell">AFF A800、AFF C800</block>
  <block id="50c089c00eacadfe94238545067e1673" category="cell">AFF A90用</block>
  <block id="5550daaa14d688eff5dec2550faa2310" category="cell">AFF A70、AFF C80</block>
  <block id="7aa0e0e616d3fc05f7dffaa202340f4a" category="cell">AFF A250、AFF C250</block>
  <block id="1cb4f6c34cb1af85680c6d9e63b2a86d" category="cell">AFF A30、AFF C30、AFF C60</block>
  <block id="96640993dd2592a16c29226daf83b860" category="cell">e0c</block>
  <block id="5191792b1ad05675fea3bbf015036b3b" category="cell">e0d</block>
  <block id="d6fddf37569e938ca8c8951e895024de" category="cell">イーサネットストレージポート</block>
  <block id="112ed9eca68e97857fba4d0db6ce268d" category="cell">e3a、e3b</block>
  <block id="68229a009d1cdc33ce1bdc45aacdc760" category="cell">SASストレージポート</block>
  <block id="cdce5e983821273e4c7e3414b8097d4e" category="cell">3a、3b</block>
  <block id="a789c48b3b7fe1b603ce142ae362e5ae" category="paragraph">スイッチ接続クラスタの場合は、AFF A30、AFF A50、AFF A70、AFF A90、AFF C30、AFF C60、またはAFF C80（交換用）ノードの次の要件を満たしていることを確認します。</block>
  <block id="403ccec6840b96b7b18ce39b52e40ae4" category="list-text">交換用ノードの同一のクラスタポートが同じスイッチ上にあります。たとえば、アップグレードが完了したら、node1のe1aとnode2のe1aを1つのクラスタスイッチに接続する必要があります。同様に、両方のノードの2番目のクラスタポートを2番目のクラスタスイッチに接続する必要があります。共有クラスタHAポート（ノード1のe1aがスイッチAに接続され、ノード2のe1aがスイッチBに接続されている）をクロス接続すると、HA通信に障害が発生します。</block>
  <block id="4e793111a4193c7c02d75b240754c4f7" category="list-text">NetAppの営業担当者に、コントローラのアップグレードに必要なハードウェアが揃っていることを確認しておきます。</block>
  <block id="7207607ea77567d4712946c334eafd47" category="paragraph">MetroCluster IP構成をアップグレードするには、MetroCluster Upgrade and Expansion_contentへのリンクを参照してください<block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block>。</block>
  <block id="4bad7c056d5c6e34cee7056db82cb367" category="paragraph">ARLは、HA構成とクラスタインターコネクト通信を利用します。これにより、ルート以外のアグリゲートが同じクラスタ内のストレージを共有している場合に、その所有権を別のノードに移動できます。</block>
  <block id="272a450c6ea3defcd086653ca258b1fa" category="cell">AFF C250^1^</block>
  <block id="97e088aeca6a3e2a2bc17350f34b7218" category="cell">AFF A250^1^</block>
  <block id="b2814657dfac1dabde77f882a020a961" category="cell">AFF C800^1^</block>
  <block id="7a18c9d9684dbe0ff71dd38b402919ff" category="paragraph">^1^ ONTAP 9.15.1以降で導入されたシステムにアップグレードすると、ONTAPは、既存のシンプロビジョニングされたすべてのボリューム（Storage Efficiencyを使用していないボリュームも含む）のストレージ効率を変換し、ハードウェアオフロード機能を使用する新しいStorage Efficiency機能を適用します。これは自動バックグラウンドプロセスであり、システムのパフォーマンスへの明らかな影響はありません。<block ref="7746afbac27a580f36b90211e9daf7d0" category="inline-link-rx"></block>です。</block>
  <block id="8779820ede180142ea9a886915bf8d48" category="paragraph">NetAppでは、可能であれば、古いシステムと交換用システムで同じバージョンのONTAPを使用することを強く推奨しています。</block>
  <block id="adc0572a61ebaa9af4ad0a72888c0550" category="paragraph">手順の実行中に、交換用コントローラハードウェアを使用して元のコントローラハードウェアをアップグレードし、ルート以外のアグリゲートの所有権を切り替えます。ルート以外のアグリゲートを古いコントローラノード間で移行します。交換用ノードを設置したら、ルート以外のアグリゲートを古いコントローラノードから交換用コントローラノードに移行します。アップグレードするノードでホストされているデータには、アップグレード手順の実行中にアクセスできます。処理を続行する前に、クラスタ内のノード間でデータ LIF を移行することもできます。</block>
  <block id="609e41181c8aa12d98f7504b88c82f1b" category="paragraph">交換するコントローラハードウェアは、既存のシステムモデルタイプによって異なります。</block>
  <block id="d8fd5ba62f388790fb97982bb85a043b" category="cell">既存のシステム</block>
  <block id="e66f12f06949cd192730b8331efe6ab3" category="cell">2台のAFF A250またはAFF C250コントローラを新しいコントローラおよびI/Oモジュールと交換します。</block>
  <block id="82b13c0e71f107eb6397178e54be355d" category="cell">2台のAFF A800またはAFF C800コントローラを新しいコントローラおよびI/Oモジュールと交換します。</block>
  <block id="28b77473f12e589523a161e5e0f003ec" category="cell">古いコントローラの各ノードのコントローラモジュールを新しいモジュールと交換します。</block>
  <block id="bbfb6f23ad67b8404ce492f83073f098" category="list-text">AFF A30、AFF A50、AFF A70、AFF A90、AFF A1K、AFF C30、AFF C60、AFF C80、FAS70、およびFAS90システムは、クラスタ接続とHA接続の両方で100GbEネットワークポートを共有します。これらのシステムでは、従来のクラスタスイッチとの10GbEまたは25GbEクラスタ接続をサポートできますが、NetApp 10GbEおよび25GbEスイッチが不要になった場合は、100GbEクラスタ速度に更新することを推奨します。詳細については、次のナレッジベースの記事を参照してください。</block>
  <block id="819e946ca0f77ece0fff2d25778c1dc0" category="paragraph">既存のノードのクラスタポートe0aまたはe0bを新しいノードのクラスタポートにリンクできない場合は、次の詳細を参照してください。</block>
  <block id="7be812dd65bbd3f39bbb06fd50caac76" category="list-text"><block ref="7be812dd65bbd3f39bbb06fd50caac76" category="inline-link-macro-rx"></block></block>
  <block id="3a7170fc4a84869f969e046621bc8c18" category="inline-link">NetApp Bugs OnlineのバグID1127315</block>
  <block id="7e3f4ab9cf33dd84dd92d4491c7263da" category="list-text"><block ref="7e3f4ab9cf33dd84dd92d4491c7263da" category="inline-link-rx"></block></block>
  <block id="316abd6cd53d12f8bf03ae8388826d10" category="doc">AFF A30、AFF A50、AFF C30、またはAFF C60モジュールをノード2に取り付けます。</block>
  <block id="bdb39b5926a304a8f387b036b6fd9445" category="list-text">キャビネットまたはTelcoラックの中央にあるレールにストレージシステムを配置し、ストレージシステムを下から支えて所定の位置にスライドさせます。</block>
  <block id="b9772390f34f13ee0716466b74abfc71" category="admonition">手順の後半で指示されるまで、コントローラモジュールをシャーシに完全に挿入しないでください。</block>
  <block id="933b2ea0dc8285d8ab95430d9aa0b8bb" category="admonition">コネクタの破損を防ぐため、コントローラモジュールをシャーシに挿入する際に力を入れすぎないように注意してください。</block>
  <block id="e25849e5932768f4a8b1b0c21f2be1d8" category="admonition">指示があるまでコントローラモジュールをシャーシに完全に挿入しないでください。</block>
  <block id="c56412eac7d334669336f82f2c84ca6d" category="list-text">次のアップグレードでは、FCP SAN LIFを再割り当てする必要があります。</block>
  <block id="4956a46ef6d1b165fac88b0d154c16ed" category="paragraph">その他のすべてのシステムのアップグレードについては、に進みます<block ref="e18730a2be2b2c535fc1747e24865aa5" category="inline-xref-macro-rx"></block>。</block>
  <block id="3899ab552d14e256c9ae8bd440cc25b5" category="paragraph">答えろ<block ref="415290769594460e2e485922904f345d" prefix=" " category="inline-code"></block></block>
  <block id="6d25c71e79b9f8280c5a17b473c08b82" category="paragraph">この段階で、 node1 は停止し、すべてのデータが node2 によって提供されます。node1 コントローラモジュールと node1 NVRAM モジュールのみを削除するように注意する必要があります。通常、 node1 はコントローラ A で、システム背面からコントローラを見るときにシャーシの左側に配置されます。コントローララベルは、シャーシのコントローラモジュールのすぐ上にあります。</block>
  <block id="accf85406d8f852aec80eff93db683c2" category="paragraph">この段階で、 node1 は停止し、すべてのデータが node2 によって提供されます。ノード1のコントローラモジュールだけを取り外すように注意する必要があります。通常、 node1 はコントローラ A で、システム背面からコントローラを見るときにシャーシの左側に配置されます。コントローララベルは、シャーシのコントローラモジュールのすぐ上にあります。</block>
  <block id="1519b2b4ff3e01880d93809dab9f313f" category="summary">ARLを使用して同じシャーシ内のコントローラモデルをアップグレードする場合は、AFF A250またはAFF C250のnode1システムモジュールを交換します。</block>
  <block id="eab9dfa8a69e88f238fb25a87fa387df" category="doc">AFF A250またはAFF C250コントローラモジュールを交換</block>
  <block id="d92bacce0a7f4e74afb2b72f85dfbb19" category="section-title">AFF A250またはAFF C250コントローラモジュールの取り外し</block>
  <block id="a680c497ac8bfdb387a08dc6d8235544" category="paragraph">ノード1のコントローラモジュールを取り外すには、まずケーブル管理デバイスを取り外し、ロックラッチを解除してから、コントローラモジュールをシャーシから取り外します。</block>
  <block id="1f9529736c8bd4ae7629be26ea8da34d" category="list-text">コントローラモジュールの両側にあるラッチに人差し指を差し込み、親指でレバーを押し、コントローラをシャーシから数インチそっと引き出します。</block>
  <block id="edfea1a2881be4e7bcc10dfa9c8b3fc6" category="admonition">コントローラモジュールを取り外しにくい場合は、（腕を交差させて）内側から穴に人さし指を入れます。</block>
  <block id="ae1f698aa370a20f4923c53be3433bb9" category="paragraph"><block ref="ae1f698aa370a20f4923c53be3433bb9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e045615354060a83511b41ee31db4ae9" category="cell">レバー</block>
  <block id="a76de2660bc401a58fcb77534d4a42e0" category="cell">ラッチ</block>
  <block id="e8c3dc2845e4d2acf936f428fd6dfb0b" category="list-text">ノード1のコントローラモジュールの電源装置をソースから取り外します。</block>
  <block id="ea2918106723a166b86e62ee2153c2e0" category="list-text">電源ケーブルの固定クリップを外し、ノード1の電源装置からケーブルを抜きます。</block>
  <block id="dc892aee96b29d3a55989d5b4bf5bf99" category="admonition">ノード1とノード2の電源接続が相互に接続されています。ノード1のケーブルだけを抜くように注意してください。ノード1とノード2のケーブルを外すと、HAペアの両方のノードで停電が発生する可能性があります。</block>
  <block id="b73bf21f79f3c289f366daee581bf764" category="list-text">コントローラモジュールの側面を両手で持ち、シャーシからゆっくりと引き出し、平らで安定した場所に置きます。</block>
  <block id="4a3384bd24285dffe1c47e552595c810" category="paragraph">このとき、スライドしてシャーシから引き出すときは、必ずコントローラモジュールの重量を支えてください。</block>
  <block id="9fe1782e885d97109753fb3c6010b557" category="section-title">AFF A30、AFF A50、AFF C30、またはAFF C60コントローラモジュールの取り付け</block>
  <block id="9e602ed6376aabcfeb78f35f1ed4b314" category="paragraph">交換用モジュールをノード1に取り付け、ケーブル接続します。</block>
  <block id="5577eee5ab487d69261df7fcdd77d00e" category="summary">ARLを使用して同じシャーシ内のコントローラモデルをアップグレードする場合は、AFF A800またはAFF C800のnode1システムモジュールを交換します。</block>
  <block id="e0646aaa208b06f2b9c991f8d1d06277" category="doc">AFF A800またはAFF C800コントローラモジュールを交換</block>
  <block id="b9f8db0a3b83103e79c00296ab293002" category="section-title">AFF A800またはAFF C800コントローラモジュールの取り外し</block>
  <block id="84a1bd056cdf96c5313ffeb160884063" category="paragraph">ケーブルマネジメントデバイスを既存のモジュールから取り外し、コントローラをシャーシから少し引き出します。</block>
  <block id="9377ce9760d2e42c9e31f172d37994a5" category="section-title">AFF A90、AFF A70、またはAFF C80コントローラモジュールの設置</block>
  <block id="1c11a10891fa20f98660572f553b2716" category="paragraph">ノード1のAFF A90、AFF A70、またはAFF C80コントローラモジュールを取り付け、ケーブル接続します。</block>
  <block id="95699993f4e4282e1516a59b8f8b3a24" category="paragraph">アップグレードを開始する前に、交換用システムに適したモジュールがあることを確認してください。不足しているパーツがある場合は、テクニカルサポートまたはNetAppの営業担当者にお問い合わせください。</block>
  <block id="fbe8d8aaa2d545f1170258a5901312fe" category="cell">コントローラモジュール×2と新しいIOモジュール</block>
  <block id="ce648a37807e4da2fbd09030fea537d2" category="list-text">AFF A220、AFF A200、AFF C190</block>
  <block id="d1f22cb8be0e35eaa5bd981b3ed3aff1" category="list-text">FAS2620、FAS2720</block>
  <block id="07b9e93852420845af85b9ed0748ad7d" category="cell">AFF A50^2^</block>
  <block id="346f76cc112ce09c4367b3884ceb7400" category="cell">AFF A20^2^</block>
  <block id="79e394f6503c99847dd0f8dfe31184a5" category="cell">9.16.1^1^</block>
  <block id="c96b3d78951818d7c9d8510aed15e897" category="cell">AFF A70 ^2^、AFF A90 ^2^、AFF A1K</block>
  <block id="d095e2073d2e2c221b7b6c3f39407169" category="cell">AFF A90 ^2^、AFF A1K</block>
  <block id="2102d82fe428d3bed4a9ceb68e9e0f82" category="paragraph">^1^ AFF A20にアップグレードするには、まずコントローラモジュールをIOM12モジュールと交換して、AFF A150またはAFF A220をDS224Cシェルフに変換する必要があります。を参照して <block ref="171f0c02e855777efc31bfbf778d3eb2" category="inline-link-macro-rx"></block></block>
  <block id="db5b0d637083aecc613ebcf8c6de30c8" category="paragraph">^2^ AFF A20、AFF A50、AFF A70、およびAFF A90は、HA構成で2台のコントローラを搭載し、1台のシャーシにオンボードディスクを搭載した統合システムです。</block>
  <block id="378260d1609d9b96d53d9fcd976221f0" category="list-text">次のいずれかのアップグレードを実行しています。</block>
  <block id="73d4d3fa3405d52da3ec862673be2659" category="paragraph">上記の表に記載されているアップグレードを実行するには、「to _use "system controller replace"コマンドを使用して、同じシャーシ内のコントローラモデルをアップグレードする」を参照してください<block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block>。</block>
  <block id="967121583f4d2a0229d569d3b7b97f41" category="list-text">AFF A20、AFF A30、AFF A50、AFF A70、AFF A90、AFF A1K、AFF C30、AFF C60、およびAFF C80システムについては、ONTAPによって、シンプロビジョニングされた既存のすべてのボリューム（Storage Efficiencyを使用しないボリュームも含む）のストレージ効率が変換されます。</block>
  <block id="fcc98da30f9fe94aaa635e6381b72554" category="list-text">AFF A20、AFF A50、AFF A70、AFF A90、AFF A1K、FAS70、およびFAS90システムは、クラスタ接続とHA接続の両方で100GbEネットワークポートを共有します。これらのシステムでは、従来のクラスタスイッチとの10GbEまたは25GbEクラスタ接続をサポートできますが、NetApp 10GbEおよび25GbEスイッチが不要になった場合は、100GbEクラスタ速度に更新することを推奨します。詳細については、次のナレッジベースの記事を参照してください。</block>
  <block id="d403eb5d1a3dd37e397850942a0e2aa1" category="paragraph">AFF A20システムは、クラスタ接続とHA接続の両方で10GbEおよび25GbEネットワークポートを共有します。これらは、AFF A20システムでサポートされる唯一のネットワークポートクラスタ接続です。</block>
  <block id="1e08e52a85eb1ffb2284468e3498db1d" category="sidebar">AFF A250またはAFF C250の交換</block>
  <block id="5b69734effb16f16b86998a01f8978c5" category="sidebar">共有クラスタHAストレージのノード1をケーブル接続します。</block>
  <block id="a6b8e7f67087d00695547f0599a662d0" category="sidebar">AFF A30、AFF A50、AFF C30、またはAFF C60の取り付け</block>
  <block id="ec31fc0bcc9399c68ce1eaa960489026" category="cell"><block ref="ec31fc0bcc9399c68ce1eaa960489026" category="inline-link-macro-rx"></block></block>
  <block id="b107ac189af2e98fbe02dd9c5a1028e3" category="cell">ONTAP 9.15.1以降で「system controller replace」コマンドを使用してコントローラを無停止でアップグレードするために必要なアグリゲートの再配置手順について説明します。</block>
  <block id="f95e2ee7384d545a3847f594109d4a3a" category="paragraph">既存のシステムに管理ポート（e0M）とBMCポートがある場合は、e0MポートとBMCポートが組み合わされ、交換用システムの「レンチ」ポートからアクセスされます。交換用システムに接続する前に、e0MポートとBMCポートが既存システムの同じスイッチとサブネットに接続されていることを確認する必要があります。</block>
  <block id="dcf5631a58d49795e852d9f64f9e3b18" category="list-text">AFF A90、AFF A70、またはAFF C80コントローラ×2、およびすべてのI/Oモジュール。100GbEケーブルに必要な長さ。</block>
  <block id="cf0d162b5d3ef31459631a2f0f0e0c2b" category="list-text">AFF A50、AFF A30、AFF C30、またはAFF C60コントローラとI/Oモジュール×2、および必要なケーブル</block>
  <block id="f14c29a2d4657e0d20bb6c436555ab0a" category="list-text">ASA A900、AFF A900、またはFAS9500コントローラとNVRAMモジュールおよびパーツ</block>
  <block id="7f3a77f47a750d11ea0b8dcef1b075f0" category="list-text">ONTAPの管理に関する経験があり、診断権限モードで作業する場合のリスクを十分に理解していること。</block>
  <block id="edc69b05de587e21933630d809693320" category="list-text">新しいコントローラを新しいHAペアとしてクラスタに追加し、ボリューム移動を使用してデータを移行する。</block>
  <block id="448247c62e342441af5c3c7e3b49c977" category="list-text">MetroCluster IP設定をアップグレードしています。</block>
  <block id="8884732b6a8d41b619d86cb386681073" category="paragraph">新しいシャーシを含む完全なシステムとして新しいAFF A30、AFF A150 A50、AFF A70、AFF、AFF、AFF A900、AFF A90 C30、AFF C60、AFF C80、FAS2820、またはFAS9500を受け取った場合は、「system controller replace」コマンドを参照して、<block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block>ONTAP 9.8以降を実行しているコントローラハードウェアをアップグレードしてください_。</block>
  <block id="9d6b5ac201fed9ad7c34e292b0ad5101" category="admonition">この手順は、以下のアップグレード構成を厳密に環境します。他のシステムの組み合わせ間でアップグレードを実行する場合は、この手順を使用しないでください。他のすべてのコントローラモデルについては、link to _use「system controller replace」コマンドを参照し<block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block>て、ONTAP 9.8以降を実行しているコントローラハードウェアをアップグレードしてください。また、アグリゲートの再配置を使用して、ONTAP 9.8以降を実行しているコントローラハードウェアを手動でアップグレードしてください。</block>
  <block id="36017c45cd868cfcb521c14c63e32456" category="cell">古いコントローラの各ノードのコントローラモジュールとNVRAMモジュールを新しいモジュールと交換します。*注*：I/Oカード、データケーブル、ディスクシェルフ、およびディスクを移動、切断、再接続する必要はありません。</block>
  <block id="2cb43a11f690e5acbdeaa147eab95913" category="inline-link-macro">新しいクラスタセットアップで10Gまたは25Gのクラスタポートを設定する方法</block>
  <block id="49e716d1b1ba5e51779e50fa0e3e3b0d" category="list-text"><block ref="49e716d1b1ba5e51779e50fa0e3e3b0d" category="inline-link-macro-rx"></block></block>
  <block id="dcf16a92ec6e20773f185de9fcb7077b" category="inline-link-macro">既存の10Gまたは25Gのクラスタポートを40Gまたは100Gのクラスタポートに変換する方法</block>
  <block id="f85d56c0a23e4e6d4e8044a5a359c05e" category="list-text"><block ref="f85d56c0a23e4e6d4e8044a5a359c05e" category="inline-link-macro-rx"></block></block>
  <block id="0658e6d0ad9373aea2588eb13988105e" category="doc">ノード1のルート以外のアグリゲートとNASデータLIFをノード2からアップグレード後のノード1に移動します。</block>
  <block id="692e04ae1166a86924090f14f4f93566" category="list-text">（AFF A250およびAFF C250のアップグレードのみ）交換用コントローラモジュールのnode1がブートしているときに、構成に既存のコントローラのnode2が含まれているため、次の警告が表示されます。</block>
  <block id="152549dbd6808b54153763cfb3171438" category="paragraph">この警告は、node2をアップグレードするまでシステムがブートするたびに表示されます。これは想定される動作です。</block>
  <block id="a7ab3451afab886103e41daa71b744af" category="admonition">ノード1とノード2は同じシャーシに搭載され、同じ電源装置に接続されているため、シャーシの電源をオフにしないでください。</block>
  <block id="4d4099b1bdb89d3aa1931527e516237a" category="list-text">コントローラモジュールを取り外す準備をします。</block>
  <block id="2c0bd9fe8fca68ffe959dec538d18418" category="paragraph">AFF A250、AFF C250、AFF A800、またはAFF C800のアップグレードの場合のみ、既存のノード1の物理ポートを交換用のノード1にマッピングします。これは、既存のコントローラと交換用コントローラの間で物理ポートが変更されるためです。このアップグレード手順でサポートされている他のシステムの物理ポートは変更されません。</block>
  <block id="d0c49c66359eda6530916c4391cb9ccc" category="cell">アップグレード前のバージョン</block>
  <block id="cba6e2dc3c149c3c6f2e38d8209942ad" category="paragraph">既存のシステムを別のシステムに接続できるようにストレージシェルフに変換する場合は、交換用システムにも2つのIOモジュールが必要です。</block>
  <block id="285d50b51b9979a21c3f8ad931e7d4e7" category="list-text">ONTAP 9.8以降を実行している。</block>
  <block id="183b0d119d3900a12aa43813123f6c77" category="list-text">新しいコントローラを新しいHAペアとしてクラスタに追加したり、ボリューム移動を使用してデータを移行したりすることはありません。</block>
  <block id="787ceb738298fbf0c0d9177615135a74" category="list-text">ONTAPの管理経験があり、diagnostic権限モードで作業する場合のリスクを十分に理解していること。</block>
  <block id="95957bddc80fdaf9d354b8fa848e4541" category="list-text">MetroCluster構成をアップグレードする場合は、4ノード以上のFC構成で、すべてのノードでONTAP 9.8以降が実行されています。</block>
  <block id="335f21471f36b48762884d7fd0ca198d" category="paragraph">MetroCluster IP構成のアップグレードについては、MetroCluster Upgrade and Expansion_へのリンクを参照してください<block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block>。</block>
  <block id="5f108ece5c84070567bbccd585dc8760" category="admonition">コントローラのアップグレードモデルの組み合わせが上記の表にない場合は、テクニカルサポートにお問い合わせください。</block>
  <block id="d8c654ee0e2ed22491ccbbe62125fe3b" category="paragraph">^2^2ノードスイッチレスクラスタ構成でAFF A300からAFF A400、またはFAS8200からFAS8300システムにアップグレードする場合は、コントローラのアップグレード用に一時的なクラスタポートを選択する必要があります。AFF A400 および FAS8300 システムは、イーサネットバンドルとして、メザニンカードポートはイーサネットタイプ、 FC タイプの FC バンドルとして、 2 種類の構成で提供されます。</block>
  <block id="b7ad07bde4916842d48a351371021c38" category="list-text">既存のコントローラと交換用コントローラで同じバージョンのONTAPを使用する必要はありません。ONTAP ソフトウェアのアップグレードは、コントローラのアップグレード時に実行されます。</block>
  <block id="3ce524daf7c7a462720f07ffe80b1e82" category="list-text">手順を開始して最初のノードをアップグレードすると、コントローラのアップグレードをキャンセルしたり元に戻したりすることはできません。</block>
  <block id="ce8932055faee80499a682eed0006014" category="list-text">ONTAP 9.15.1以降を実行している。</block>
  <block id="6c95aebccb5899bde2beeb8d5d4de872" category="list-text">新しいコントローラを新しいHAペアとしてクラスタに追加したり、ボリューム移動手順を使用してデータを移行したりすることはありません。</block>
  <block id="3f0336dfa0e5a25ff8e8c549a2b18cef" category="list-text">MetroCluster FCまたはIP構成をアップグレードしています。MetroCluster構成をアップグレードするには、MetroClusterのアップグレードおよび拡張に関するドキュメント_へのリンクを参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> 。</block>
  <block id="ebf1d57729bed03eb5fd256caca2fe3f" category="sidebar">AFF A800またはAFF C800の交換</block>
  <block id="761e2863e356e8bb23f79549fde56e25" category="cell">FAS8200、FAS8300、FAS9000</block>
  <block id="5631dfc64a5dfd9535518e48f79b6c93" category="cell">FAS70、FAS90、FAS50</block>
  <block id="179f979e0b97fa0abce7d9de4a3dcf35" category="cell">FAS70では9.15.1P3、FAS50ではFAS90 9.16.1P2</block>
  <block id="0588c4f1b58eac9f5062dc1da6e8435a" category="cell">FAS8700</block>
  <block id="5ea464078a881a86e75acbaa27ab0f3f" category="inline-link-macro">ノード1のディスクをノード3に再割り当て（手順9）</block>
  <block id="c66431825370525b71d1cf42669b4ad1" category="paragraph"><block ref="03d492bafa8bfc48b6d8087b415cb7c8" prefix="" category="inline-code"></block></block>
  <block id="cbf9a76a9a31fb5d20cbab55c42d6eb4" category="paragraph">ノード2をノード4に交換する前に、ノード2に関するAutoSupportメッセージを送信し、ノード2で所有されているルート以外のアグリゲートをノード3に再配置する必要があります。</block>
  <block id="a2f8774c7412a03482b475c596da177f" category="list-text">ノード2のAutoSupportメッセージをNetAppに送信します。</block>
  <block id="4b183b97df2f1d6ce9c112a7ed3e980c" category="paragraph">再配置はバックグラウンドで実行されます。アグリゲートの再配置には数秒から数分かかる場合があります。この時間には、クライアントの停止部分と停止部分の両方が含まれます。コマンドでは、オフラインまたは制限されたアグリゲートは再配置されません。</block>
  <block id="ce3a9a61e80721a6fb4afa31a98b6267" category="paragraph">再配置後のアグリゲートについては、出力に「done」と表示されます。</block>
  <block id="d8a4c81968f4b397fdbe83d1475d852c" category="list-text">node2がルート以外のオンラインのアグリゲートを所有していないことを確認します。</block>
  <block id="6eb24316934652e1e079aaa905d2761d" category="inline-link-macro">ノード1のディスクをノード3に再割り当て（手順1）</block>
  <block id="395e67264cbfd126e7e619c2e945ea24" category="inline-link-macro">ノード2のディスクをノード4の手順1に再割り当てします。</block>
  <block id="1b32b5e4ec6b1b018326446e0609b810" category="paragraph">ステージ3では、ノード3をインストールしてブートし、クラスタポートとノード管理ポートをノード1からノード3にマッピングし、ノード1のディスクをノード3に再割り当てして、ノード3のインストールを確認します。必要に応じて、ノード3でFCまたはUTA / UTA2設定を設定し、ノード3がクォーラムに参加していることを確認します。さらに、node1のNASデータLIFとルート以外のアグリゲートをnode2からnode3に再配置し、SAN LIFがnode3にあることを確認します。</block>
  <block id="712f0ba3d50de0cb380baae0e79744aa" category="paragraph">ステージ5では、ノード4をインストールしてブートし、ノード2のクラスタポートとノード管理ポートをノード4にマッピングし、ノード2のディスクをノード4に再割り当てして、ノード4のインストールを確認します。必要に応じて、ノード4でFCまたはUTA / UTA2設定を設定し、ノード4がクォーラムに参加していることを確認します。node2のNASデータLIFとルート以外のアグリゲートもnode3からnode4に再配置し、SAN LIFがnode4にあることを確認します。</block>
  <block id="9ca791f14c256e2e8b46018369acf7a1" category="admonition">このコマンドは、advanced権限レベルでのみ実行できます。<block ref="0581d0d071ad835f74bf419081ce5d75" prefix=" " category="inline-code"></block></block>
  <block id="0c4d3b58ff2e613100823069268c0d16" category="doc">ノード1のディスクをノード3に再割り当て</block>
  <block id="e03dae441cceacc5aeefb788c4310182" category="paragraph">ノード3のインストールを検証する前に、ノード1に属していたディスクをノード3に再割り当てする必要があります。</block>
  <block id="bbc6b5765d60422b3f276543c9a46e50" category="list-text">[[auto_check3_step3]]自動ブート中にCtrl+Cキーを押して、LOADER&gt;プロンプトでノードを停止します。</block>
  <block id="d1c18cc75345f4458e86cf6fe5d073d8" category="paragraph">外付けディスクをサポートするシステムから外付けディスクもサポートするシステムにアップグレードする場合は、に進みます<block ref="c9ad15d95077080d869d1e4c8360803a" category="inline-xref-macro-rx"></block>。</block>
  <block id="9951e04650f5035e01daa69eb92bcbbe" category="paragraph">外付けディスクをサポートするシステムから、内蔵ディスクと外付けディスクの両方をサポートするシステム（AFF A800システムなど）にアップグレードする場合は、に進みます。<block ref="507f599b2e258f18809a90b59e54fc15" category="inline-xref-macro-rx"></block></block>
  <block id="41d30ffd3871f13ee39a0236a521005a" category="list-text">[[auto_check3_step8]] LOADERプロンプトでブートします。</block>
  <block id="2d3d40a3970ab0b35029c7b7dc1b15df" category="admonition">この段階でエラーが発生する場合があります。エラーが発生した場合は、システムが正常にブートするまでの手順を繰り返し <block ref="c9ad15d95077080d869d1e4c8360803a" category="inline-xref-macro-rx"></block> ます。</block>
  <block id="9f39d1bc4fe5004213872658dec3c1c2" category="doc">ノード2のディスクをノード4に再割り当てします。</block>
  <block id="fd06c7e8210acdd89557164ac47f5808" category="paragraph">ノード2に属していたディスクをノード4に再割り当てしてから、ノード4のインストールを確認する必要があります。</block>
  <block id="4ef6870c2e23f8f1d078e31a842f2c02" category="list-text">[[auto_check_4_step3]]自動ブート中にCtrl+Cキーを押して、LOADER&gt;プロンプトでノードを停止します。</block>
  <block id="047c56454996d2aa154d1f6ca4d87eb0" category="paragraph">外付けディスクをサポートするシステムから外付けディスクもサポートするシステムにアップグレードする場合は、に進みます<block ref="3d86a68aa8fb2ef1661a4814f02f3b64" category="inline-xref-macro-rx"></block>。</block>
  <block id="d4e6d4af7a18f0230aee51bbefe6a070" category="paragraph">外付けディスクを使用するシステムから、内蔵ディスクと外付けディスクの両方をサポートするシステム（AFF A800システムなど）にアップグレードする場合は、に進みます。<block ref="8c0d0b39d1dbad6b09344e6b9dfb08e2" category="inline-xref-macro-rx"></block></block>
  <block id="63b1972a97912f5fcb68bfc394d5e9c3" category="list-text">[[auto_check_4_step8]] LOADERプロンプトでブートします。</block>
  <block id="31f48890b5f492311b0370002ee80c45" category="paragraph">ストレージディスクを搭載したシステムをアップグレードする場合、ノード4にオンボードFCポート、オンボードUTA / UTA2ポート、またはUTA / UTA2カードがない場合は、に進みます。<block ref="eaad59cad2124997123e3f040ef5cb96" category="inline-link-macro-rx"></block></block>
  <block id="0557ba2404e82e19ae1f9975c3ce6b5f" category="paragraph">ノード 4 に十分なラックスペースがあることを確認してください。node4 と node2 が別々のシャーシにある場合は、 node4 を node3 と同じ場所に配置できます。node2 と node4 が同じシャーシにある場合は、 node4 が適切なラックの場所にすでに存在しているとします。</block>
  <block id="328a7a0648a6342a4e5d9762596df977" category="inline-link-macro">ノード2のディスクをノード4に再割り当て（手順9）</block>
  <block id="b08503fa695caa40c403fd4b0a68ee5a" category="list-text">ストレージディスクを搭載したシステムをアップグレードする場合、ノード3にオンボードのFCポート、オンボードUTA / UTA2ポート、またはUTA / UTA2カードがない場合は、に進みます。<block ref="ac081fdc0801ea4a4f23475143090cfa" category="inline-link-macro-rx"></block></block>
  <block id="fc1748891fee59e7ee68e749f479c431" category="list-text">ノード3にUTA / UTA2カードまたはUTA / UTA2オンボードポートがない場合は、この手順をスキップし<block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block>てに進みます<block ref="ac081fdc0801ea4a4f23475143090cfa" category="inline-link-macro-rx"></block>。</block>
  <block id="7578581e3a33edeb6b72193b779ff242" category="paragraph">^1^ AFF A800システムに必要なその他の手順については、セクション<block ref="c6817bbcae6fe5893644f9e570310aab" category="inline-link-macro-rx"></block>、またはのA800に関する説明に記載されている手順に進みます<block ref="a9b70e5969497a28f737eb804f3061d5" category="inline-link-macro-rx"></block>。</block>
  <block id="ca05d8f8894d6ff273a92135000e282c" category="admonition">ネットブート接続として管理ポートおよび IP を使用する必要があります。データLIF IPは使用しないでください。使用しないと、アップグレードの実行中にデータが停止する可能性があります。</block>
  <block id="6ce2823803aa2f6a15c6368e9054699b" category="paragraph">ステージ3では、ノード3をインストールしてブートし、ノード1のクラスタポートとノード管理ポートがノード3でオンラインになったことを確認し、ノード1のディスクをノード3に再割り当てして、ノード3のインストールを確認します。NetApp Volume Encryption（NVE）を使用している場合は、キー管理ツールの設定をリストアします。必要に応じて、ノード3にFCまたはUTA / UTA2設定を設定します。さらに、node1のNASデータLIFとルート以外のアグリゲートをnode2からnode3に再配置し、SAN LIFがnode3にあることを確認します。</block>
  <block id="9603a3cc81e2986384f6025c38748416" category="paragraph">ステージ5では、ノード4をインストールしてブートし、ノード2のクラスタポートとノード管理ポートがノード4でオンラインになったことを確認し、ノード2のディスクをノード4に再割り当てして、ノード4のインストールを確認します。NVEを使用している場合は、key-manager configurationをリストアします。必要に応じて、ノード4でFCまたはUTA / UTA2設定を設定します。node2のNASデータLIFとルート以外のアグリゲートもnode3からnode4に再配置し、SAN LIFがnode4にあることを確認します。</block>
  <block id="11f7f4fd840cd198a2f280c91b7faacb" category="list-text">このコマンドは、advanced権限レベルでのみ実行でき<block ref="2b4e2bfd3f993678e0b6870d28304a76" prefix=" " category="inline-code"></block>ます。</block>
  <block id="b3936429fa1be4b517a86a16e2b7e505" category="summary">ONTAP 9.8以降を実行するコントローラをアップグレードする場合、コマンドを使用してノード1に属していたディスクをノード3に再割り当てする必要があり<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block>ます。</block>
  <block id="bb109c63fb1855fdc41065496c4b5cbc" category="list-text">[reassign-node1-node3-app-step3]]自動ブート中にCtrl+Cキーを押して、Loader &gt;プロンプトでノードを停止します。</block>
  <block id="54e3eea9d71b7c4f02d2688c4e6f949e" category="paragraph">外付けディスクをサポートするシステムから外付けディスクもサポートするシステムにアップグレードする場合は、に進みます<block ref="0faed76141a6cb4a723aa66a5d852e5d" category="inline-xref-macro-rx"></block>。</block>
  <block id="ffb7f11c97f67f457a6ac3a320d8d397" category="paragraph">外付けディスクをサポートするシステムから、内蔵ディスクと外付けディスクの両方をサポートするシステム（AFF A800システムなど）にアップグレードする場合は、に進みます。<block ref="061f59b77452fcc2cd32a9dbbcd9197b" category="inline-xref-macro-rx"></block></block>
  <block id="3aa4ab2b12da4e819e7bf7d20476cdd2" category="list-text">[[reassign-node1-node3-app-step8]] Loaderプロンプトでブートします。</block>
  <block id="442faffcad9799fb9833e7d0844ed1bb" category="admonition">この段階でエラーが発生する場合があります。エラーが発生した場合は、システムが正常にブートするまでの手順を繰り返し <block ref="0faed76141a6cb4a723aa66a5d852e5d" category="inline-xref-macro-rx"></block> ます。</block>
  <block id="a746be669cb081077101eacb5ad71bf2" category="list-text">[reassign-node1-node3-app-step9]]外付けディスクを搭載したシステムから、内蔵ディスクと外付けディスクをサポートするシステム（AFF A800システムなど）にアップグレードする場合は、node1のアグリゲートをルートアグリゲートとして設定し、node3がnode1のルートアグリゲートからブートすることを確認します。ルートアグリゲートを設定するには、ブートメニューに移動し、メンテナンスモードに切り替えるオプションを選択します<block ref="e4da3b7fbbce2345d7772b0674a318d5" prefix=" " category="inline-code"></block>。</block>
  <block id="2ae5863ef4ffdec773dd25b804653f23" category="list-text">[reassign-node2-node4-app-step3]]自動ブート中にCtrl+Cキーを押して、Loader &gt;プロンプトでノードを停止します。</block>
  <block id="c4f86938454b613cef939abb47991037" category="paragraph">外付けディスクをサポートするシステムから外付けディスクもサポートするシステムにアップグレードする場合は、に進みます<block ref="79bd087280897d4f7e3333262b04aa6c" category="inline-xref-macro-rx"></block>。</block>
  <block id="21dfc0371365c18907d7dbc160a0c2c4" category="paragraph">外付けディスクを使用するシステムから、内蔵ディスクと外付けディスクの両方をサポートするシステム（AFF A800システムなど）にアップグレードする場合は、に進みます。<block ref="ba3fb5e9a0164ee5baf520c4c38cd787" category="inline-xref-macro-rx"></block></block>
  <block id="b76881a9f4b6f1230f9720635fa52f19" category="list-text">[[reassign-node2-node4-app-step8]] Loaderプロンプトでブートします。</block>
  <block id="dc6402eb152631527f95b84d9f3ce723" category="admonition">この段階でエラーが発生する場合があります。エラーが発生した場合は、システムが正常にブートするまでの手順を繰り返し <block ref="79bd087280897d4f7e3333262b04aa6c" category="inline-xref-macro-rx"></block> ます。</block>
  <block id="09fd616bd129dbb6b064a8d755638ea6" category="inline-link-macro">ノード2のディスクをノード4に再割り当て（手順9）</block>
  <block id="efbbd979af9db0d702ab6a5273480e16" category="paragraph">アップグレードを続行する前に、ノード3のソフトウェア設定がノード3の物理接続と一致している必要があり、ネットワーク接続がリストアされている必要があります。</block>
  <block id="0750b6fd70b5c02e0dc63a82e8430e4a" category="admonition">この手順では、アグリゲートをノード3からノード2に再配置しないでください。その結果、アグリゲートがオフラインになり、再配置されたアグリゲートのデータが利用できなくなります。</block>
  <block id="fb0111f9cd842757d08889f0a7863a8b" category="list-text">ノード3のパートナーシステムIDを表示します。</block>
  <block id="5a17539dbeea2e1642b36b86ee06822c" category="paragraph"><block ref="089ce08d08dd1b75c3f614830a776a5d" prefix="" category="inline-code"></block></block>
  <block id="6015ee0c3c4dbc37f534783a65239e72" category="example-title">例を示します</block>
  <block id="48ceab9868a32c98e5a4a3c1c644f968" category="list-text">ノード3の「パートナーシステムID」が正しくない場合は、次の手順を実行します。</block>
  <block id="881c5e320a45f042e678d4b161772fce" category="list-text">ノード3を停止します。</block>
  <block id="7800007d1254bb704e4ae7dfd07804b7" category="list-text">Loaderプロンプトで、正しい「partner-sysid」の値を設定します。</block>
  <block id="a9de4ba6ab2c96c6e675e4aa27ae5f99" category="paragraph">ノード3の「partner-sysid」はノード2のシステムIDで、の出力で確認できます<block ref="02dc63281e3f95993aa2bd3cbf6cbaaa" prefix=" " category="inline-code"></block><block ref="bf7db627e57d537d277701b30eb920fb" category="inline-xref-macro-rx"></block>。</block>
  <block id="dd3d0d406209c2954b2e2784db94b97b" category="list-text">Loaderプロンプトで、ノード3をブートメニューでブートします。</block>
  <block id="d3ddde6e7673239ed55bc11b0d0eb088" category="list-text">ノード3にログインします。</block>
  <block id="088fc05a96b10d26c3f25411385117f2" category="paragraph"><block ref="25337ccb7c73e802f2aa2e84f9657883" prefix="" category="inline-code"></block></block>
  <block id="2e7bb8e758be89869c95ab23b96089a8" category="paragraph"><block ref="e8bddc5e75bda9e006a7808627e02c60" prefix="" category="inline-code"></block></block>
  <block id="ceb3b4f875043e902ad0c2c7df540ac4" category="paragraph"><block ref="5f763a2ed6c527c7a7c8cdb44b2ef9a1" prefix="" category="inline-code"></block></block>
  <block id="2a2be3ec611dd374f220ea53bd3e0758" category="paragraph"><block ref="17cc86d87f4cf199b09f90bd5a6c15dc" prefix="" category="inline-code"></block></block>
  <block id="a6f10385b3e5082eca317137f25e29be" category="paragraph"><block ref="5b8fa3cd936d1ea49819298759fb9f1b" prefix="" category="inline-code"></block></block>
  <block id="38044567d84e20ec724f63db53b11f1e" category="cell">にアクセスします。</block>
  <block id="3f8dbc42a73ae9a6487e0757b393d2fb" category="paragraph"><block ref="9156be96f14f90b77022cc089e705729" prefix="" category="inline-code"></block></block>
  <block id="6c434ec98af520797c570f40db8c4a28" category="list-text">[man_relocate_2_3_step8] ルート以外のアグリゲートがすべてノード 3 でオンラインになっていることを確認します。</block>
  <block id="ef54d8b76027ced4d5a36092399b0849" category="paragraph"><block ref="3084412280b7ab74d58fde7f7ea5dcb7" prefix="" category="inline-code"></block></block>
  <block id="8e3deaabd41a6198e56a6285ff5c48bc" category="paragraph"><block ref="6081a3855c6bc35b60d38be817747a5c" prefix="" category="inline-code"></block></block>
  <block id="7adac7d8af549857f31077a908e21bf4" category="paragraph"><block ref="9d8096e1c24df88a36631f9f43c1b889" prefix="" category="inline-code"></block></block>
  <block id="dcc422920951416bc8ad4e66178b7556" category="paragraph"><block ref="5262be8683d7b15cd5f469e52a116209" prefix="" category="inline-code"></block></block>
  <block id="71b6de83a4e8abd455d17a4d6af4374a" category="list-text">ノードをブートメニューでブートします。</block>
  <block id="2177cbe7b3a717ce6d53713b3fc10bd9" category="list-text">[[step14]]ノードをブートメニューでブートします。</block>
  <block id="a4767f09ed98441b185563427dd0a442" category="paragraph">AFF A800システムにアップグレードする場合は、に進みます<block ref="e81929257c1b77de68576a8a37b1e464" category="inline-link-macro-rx"></block>。</block>
  <block id="4ac432efd1d6ca8f4e73f5783d4f90e6" category="paragraph">AFF A800システムにアップグレードする場合は、に進みます<block ref="4f039e99f80cf2a7b8236bb5590e739b" category="inline-link-macro-rx"></block>。</block>
  <block id="007afae70e6899ccd5a02bd1b8e30413" category="list-text">交換用ノードは、共有のクラスタHAイーサネットポートを使用します。</block>
  <block id="96a4f5b30dbe8d55de9aa12c4b2e6602" category="list-text">クラスタスイッチに、共有クラスタHAポートをサポートするリファレンス構成ファイル（RCF）がインストールされていることを確認します。</block>
  <block id="1ef8dca5df94c49347909211a3845f3f" category="list-text">スイッチの既存の設定を削除します。</block>
  <block id="ec959032169391b64e7918c7b1c9a04b" category="cell">スイッチのモデル</block>
  <block id="ec434af0a2786fa23b468584c5622fe1" category="cell">手順</block>
  <block id="48def1be7a1b40b720ff1892a761e8c8" category="cell">Cisco Nexus</block>
  <block id="ce8d24a452c1c94c4680d7ce098325a9" category="inline-link-macro">リモート接続を維持したままCiscoインターコネクトスイッチの設定をクリアする方法</block>
  <block id="f79602808677d4d116b317e4c44a8ee5" category="cell">ナレッジベースの記事<block ref="862bab57a4acfb616afcae48c16f2cfe" category="inline-link-macro-rx"></block></block>
  <block id="4dd13a124f96d89e0fd6c36f6d82e131" category="cell">Broadcom BES-53248</block>
  <block id="3a6a9877fc8c73a9267914b786517ca9" category="inline-link-macro">リモート接続を維持したままBroadcomインターコネクトスイッチの設定をクリアする方法</block>
  <block id="363e3bb9e22f2f2472a215233919dbf7" category="cell">ナレッジベースの記事<block ref="4eb512d9e9a489effcea6ab616ebb791" category="inline-link-macro-rx"></block></block>
  <block id="b0a38d8703521c30e6e97aed4cde98e8" category="list-text">スイッチのセットアップを設定して確認します。</block>
  <block id="5aec304982416461faa5bf9b3a0b2cf3" category="cell">Cisco Nexus 9336C-FX2</block>
  <block id="b0411eb90c7d5ca211940fcb5d8f219a" category="inline-link-macro">リファレンス構成ファイル（RCF）のアップグレード</block>
  <block id="0b62f732d6ce50a66f369a7af44d4f34" category="cell"><block ref="0b62f732d6ce50a66f369a7af44d4f34" category="inline-link-macro-rx"></block></block>
  <block id="f14d39745f2925af01d4497aa53d6677" category="inline-link-macro">リファレンス構成ファイル（RCF）のアップグレード</block>
  <block id="1223d69b197fdd4739792e2757e36426" category="cell"><block ref="1223d69b197fdd4739792e2757e36426" category="inline-link-macro-rx"></block></block>
  <block id="94f92369bb57ec3cd50af356ac87615d" category="cell">NVIDIA SN2100</block>
  <block id="ec65012ad6ac37ed9d5b425acfa4cdea" category="inline-link-macro">リファレンス構成ファイル（RCF）スクリプトのインストールまたはアップグレード</block>
  <block id="c18748e2481d76fb9941a180443193c9" category="cell"><block ref="c18748e2481d76fb9941a180443193c9" category="inline-link-macro-rx"></block></block>
  <block id="4cd0d55ba9459c2dab2de91b9c03814c" category="paragraph">2 ノードスイッチレスクラスタのノードをアップグレードする場合は、アップグレードの実行中もスイッチレスクラスタのノードをそのまま使用できます。スイッチクラスタに変換する必要はありません。</block>
  <block id="8582dce1fa70b49f5e69ba957a35fc82" category="paragraph">クラスタスイッチに接続されたクラスタ内のノードをアップグレードする場合は、スイッチで実行されているmake、model、ファームウェアバージョン、RCF、およびONTAPのバージョンが、アップグレード後に交換用コントローラで実行されているバージョンと同じになることを確認する必要があります。必要に応じて、ARLを使用してコントローラをアップグレードする前にスイッチのアップグレードを実行する必要があります。</block>
  <block id="2f89251c5a06d3bb8bdca830855eca15" category="paragraph">詳細については、を参照してください <block ref="e5c6d05601e4c63290544337ac7eb325" category="inline-link-macro-rx"></block>。</block>
  <block id="8bb38dc1d7700b6a074ec367f4dc7c3c" category="list-text">内蔵ドライブを搭載したAFF A20、AFF A50、AFF A70、またはAFF A90にアップグレードする場合は、アップグレード前にこれらの内蔵ドライブの所有権を削除する必要があります。アップグレードが完了したら、AFF A20、AFF A50、AFF A70、またはAFF A90の各ノードに内蔵ドライブを割り当て、データアグリゲートの作成に使用できます。ルートアグリゲートやデータアグリゲートを内蔵ドライブに移行する必要はありません。</block>
  <block id="04c6529852defdb9c41c0abd42af4189" category="list-text">内蔵ドライブのないAFF A20、AFF A50、AFF A70、またはAFF A90にアップグレードする場合は、アップグレード完了後に内蔵ドライブを割り当てる必要はありません。</block>
  <block id="182aeb116dd563a6020ec9b2d5b6595e" category="cell">ポートタイプ</block>
  <block id="aa6c6f574f7b2ec6236fc2c78e667754" category="cell">接続しないでください</block>
  <block id="902d9cd1025aec2b9d536224052b73da" category="admonition">クラスタ スイッチが 10/25 GbE の速度のみをサポートしている場合は、クラスタ相互接続の交換システムのスロット 1 またはスロット 2 で X60130A、4 ポート 10/25GbE カードを使用する必要があります。</block>
  <block id="a9904037ece6033a2ab35f06c4e2ce44" category="doc">別のハードウェアアップグレード手順を選択する</block>
  <block id="dde2acdfbdb2dfacc273b5e47e81dc83" category="inline-link-macro">コントローラハードウェアのアップグレードに使用できる代替ARL方法を確認します</block>
  <block id="e891c1eb94e2ca8bb3b7b8dadb898400" category="list-text"><block ref="6bdc44b5c51cc632715ca157799c6ae3" category="inline-link-macro-rx"></block>です。</block>
  <block id="4ae096e0267d8683306cc7a7a6a39a64" category="paragraph">参照<block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> _ONTAP 9 ドキュメント_にリンクします。</block>
  <block id="e9b64afb92831f1198d95f80d156d793" category="list-text">ストレージディスクを備えたシステムをアップグレードする場合は、このセクション全体を完了してから、 <block ref="a6d322e902b744ff3a11f02b5c6d9496" category="inline-link-macro-rx"></block>クラスタープロンプトでコマンドを入力します。</block>
  <block id="5bd058344f8aec8219e043cff27b0f39" category="admonition">両方のノードを同じシャーシに搭載したシステムにアップグレードする場合は、 node4 と node3 をシャーシに設置します。そうしないと、ノード 3 を起動すると、ノードはデュアル シャーシ構成であるかのように動作し、ノード 4 を起動すると、ノード間の相互接続が確立されません。</block>
  <block id="dce5ed79f31a7baa48db39721ab1ead2" category="inline-link-macro">ARLを使用してコントローラモデルをアップグレードし、既存のシステムシャーシとディスクを維持します。</block>
  <block id="744c8ae51567237f1e51aca67e4478ec" category="inline-link-macro">既存のシステムシャーシとディスクを維持しながら、ARLを使用してサポートされているシステムアップグレードの組み合わせについて学習します。</block>
  <block id="8b53acd1242404623585fa614cf7d039" category="paragraph">ノード 1 にインストールされている ONTAP 9 と同じバージョンがノード 3 にインストールされていない場合は、ノード 3 をネットブートする必要があります。node3 のインストールが完了したら、 Web サーバに保存されている ONTAP 9 イメージからブートします。その後、以降のシステムブートで使用するブートメディアデバイスに正しいファイルをダウンロードできます。を参照して <block ref="4815c2d091d790c1d3bab94177b38eaf" category="inline-link-macro-rx"></block></block>
  <block id="756d35654041df32f1be206cb5d73d40" category="paragraph">ただし、node3 に node1 にインストールされている ONTAP 9 と同じバージョンまたはそれ以降のバージョンがインストールされている場合は、node3 をネットブートする必要はありません。</block>
  <block id="e9e731a9f4962a1d8b683234f1b71e92" category="list-text">ストレージディスクを備えたシステムをアップグレードする場合は、このセクション全体を完了してから、 <block ref="b874d68563e926f19d0f15015f15f190" category="inline-link-macro-rx"></block>そして<block ref="65c0a9634aad86b4a452ae0da56bfb85" category="inline-link-macro-rx"></block>クラスタープロンプトでコマンドを入力します。</block>
  <block id="077a3792f816c368d84f9a714136be02" category="paragraph">ノード4にノード2にインストールされているONTAP 9と同じバージョンがインストールされていない場合は、ノード4をネットブートする必要があります。node4 のインストールが完了したら、 Web サーバに保存されている ONTAP 9 イメージからブートします。その後、以下の手順に従って、以降のシステムブートに必要なファイルをブートメディアデバイスにダウンロードしてください。 <block ref="4815c2d091d790c1d3bab94177b38eaf" category="inline-link-macro-rx"></block> 。</block>
  <block id="b4f090990739dcde90138932f4f42a92" category="paragraph">ただし、node2 にインストールされている ONTAP 9 と同じバージョンまたはそれ以降のバージョンが node4 にインストールされている場合は、node4 をネットブートする必要はありません。</block>
  <block id="92909e480346a929ed3538f8fb727042" category="list-text">ストレージディスクを備えたシステムをアップグレードする場合は、このセクション全体を完了してから、セクションに進む必要があります。 <block ref="488c6e462745f03d8c1dfb3ba61f7258" category="inline-link-macro-rx"></block>クラスタープロンプトでコマンドを入力します。</block>
  <block id="13f6606372b0497bd7d8f495e2c93873" category="paragraph">ディレクトリ内の情報を使用するには、 <block ref="ab6acaf1648b65fe7eff652317a95a17" category="inline-link-macro-rx"></block> 。</block>
  <block id="ab58313074490a46c5f45119c9303e60" category="paragraph">「 * Status Admin/Oper * 」列を参照して、停止している LIF がないかどうかを確認します。LIFがダウンしている場合は、 <block ref="103588ef7fbd849a8c4b92e24d1fe01e" category="inline-link-macro-rx"></block>セクション。</block>
  <block id="c665472e15aa2402f7cbfe0e9d6fe796" category="paragraph">複数の HA ペアがあるクラスター内の HA ペアをアップグレードする場合は、コントローラーのアップグレードが行われていない HA ペアのノードにイプシロンを移動する必要があります。たとえば、 HA ペア構成の nodeA / nodeB および nodeC / ノードを含むクラスタで nodeA / nodeB をアップグレードする場合は、イプシロンを nodeC またはノードに移動する必要があります。</block>
  <block id="58749854a99eb9f0921d80fd60ef91e5" category="inline-link-macro">ARLアップグレードシーケンス</block>
  <block id="5e5ea622fae7536bc86af7f458b72c82" category="paragraph">コントローラのアップグレード中に問題が発生した場合は、 <block ref="d170dd544fa530f9129069c7fbfdc956" category="inline-link-macro-rx"></block>セクション。発生する可能性のある障害に関する情報は、手順のフェーズごとに記載されています。 <block ref="8d67bce17772a82227e57f45fab19967" category="inline-link-macro-rx"></block> 。</block>
  <block id="20d941e77026ae8ce1f7960037569d8a" category="inline-link-macro">ARLを使用したコントローラのアップグレードに関するガイドライン</block>
  <block id="ad37cb22fa2be28796074eb07740fcc0" category="list-text">この手順は複雑で、 ONTAP の高度な管理スキルがあることを前提としています。また、以下の内容を読んで理解する必要があります。 <block ref="29a777f478b575f6de532dbc614acf56" category="inline-link-macro-rx"></block>そして<block ref="25c64b56e1634b7195570b2ce4c1228b" category="inline-link-macro-rx"></block>アップグレードを開始する前に。</block>
  <block id="dbc1fd5a23bc6b740244f75d960b1e10" category="doc">ストレージワークフローを移行してアップグレード</block>
  <block id="b0015c54c1bbb0e310d3dcd2ae34c8df" category="doc">ボリュームの移動によるアップグレードワークフロー</block>
  <block id="892ec2dad40436ef5448c89d8134c110" category="doc">ボリューム移動のアップグレードを完了する</block>
  <block id="366ec5c2ea3e32c0cc46917d38a1da18" category="list-text">新しいノードに FC ポート (オンボードまたは FC アダプタ上)、オンボード CNA ポート、または CNA カードがある場合は、ストレージ システム プロンプトから次のコマンドを入力して FC ポートまたは CNA ポートを構成します。</block>
  <block id="73ae66defa729fd9f93ef92db6f80630" category="summary">ONTAP 9.8 以降、または ONTAP 9.7 以前で移動ストレージ アップグレードを完了します。</block>
  <block id="2f9ebf38869b173bdc2ad072af9cba1d" category="doc">ストレージ移行アップグレードワークフローを完了する</block>
  <block id="d1f6dfd6e0cfb92d95e1dc3ef6235ba1" category="list-text"><block ref="d1f6dfd6e0cfb92d95e1dc3ef6235ba1" category="inline-link-macro-rx"></block></block>
  <block id="66d727fe2a6fac03abb67f6fb4d8a3cb" category="list-text"><block ref="66d727fe2a6fac03abb67f6fb4d8a3cb" category="inline-link-macro-rx"></block></block>
  <block id="45255d2c553316bb43ce757f6dd3b4f4" category="doc">ボリュームまたはストレージを移動してコントローラハードウェアをアップグレードする場合の考慮事項</block>
  <block id="a3d82e12120339d5d7ab552fc350174a" category="paragraph">HA ペアのコントローラは、2 つの AFF、FAS、または ASA モデルである必要があります。</block>
  <block id="0fa5b377e652d9fd7219ba4c9332f879" category="cell">複数の HA ペアがあるクラスター内の HA ペアをアップグレードしていますか?</block>
  <block id="af98d00269d2160d7696cb546b9b9b2d" category="cell">コントローラのアップグレードを実行していない HA ペアのノードにイプシロンを移動します。たとえば、 HA ペア構成の nodeA / nodeB および nodeC / ノードを含むクラスタで nodeA / nodeB をアップグレードする場合は、イプシロンを nodeC またはノードに移動する必要があります。</block>
  <block id="9da032e449930481024c0aae6c372442" category="inline-link-macro">元のノードから内部ドライブを移動することもできます</block>
  <block id="d2b3ca539f40de73bdec8ec5fa27aad6" category="admonition"><block ref="22e993d85a307190d8e2f79f9bac1a4e" category="inline-link-macro-rx"></block>です。</block>
  <block id="b6de487c1b0c827f14c4892f2a38115e" category="paragraph">ドライブ シェルフは同じクラスター内でのみ移動できます。</block>
  <block id="8babcf5a4f3ceb219fe532ed80e3feb0" category="inline-link-macro">システムをドライブシェルフに変換して新しいノードに接続することもできます。</block>
  <block id="e41a07bd97897d75f6b22fcde3750258" category="admonition"><block ref="eb314f9c9756831ec72feb5f63dc05b9" category="inline-link-macro-rx"></block>です。</block>
  <block id="158d9483f2a61460306dea524e285d17" category="paragraph">ドライブは同じクラスター内でのみ移動できます。</block>
  <block id="2f8d5ddddff80d2511453ce886eee1eb" category="doc">SAN LIFの移動、削除、または作成</block>
  <block id="ff4f01f0da7a9c33d69bb129757afc29" category="section-title">不要になったSAN LIFを削除する</block>
  <block id="58b02b1a4790c291e537964eb5ec39dd" category="doc">この集約再配置手順を使用するかどうかを決定します</block>
  <block id="c63c8dfb63575869b680fde46eac9758" category="paragraph">コントローラハードウェアをアップグレードするには、アグリゲート再配置（ARL）の方法が複数あります。この手順では、ONTAP 9.7、9.6、または9.5を実行しているシステムで、「システムコントローラ置換コマンド」を使用してARLを使用してコントローラハードウェアをアップグレードする方法について説明します。この複雑な手順は、経験豊富なONTAP管理者のみが使用してください。</block>
  <block id="4725ef774b70d82064d7c046f7ee55cc" category="paragraph">この ARL 手順がコントローラ ハードウェアのアップグレードに適しているかどうかを判断するには、サポートされているアップグレードについて次の状況をすべて確認する必要があります。</block>
  <block id="cb1b0b572f4422d5775c11e2805a9a72" category="inline-xref">サポートされているモデルマトリックス</block>
  <block id="8dde2f8e3831241d3e5160b07e12be47" category="list-text">ハードウェアアップグレードの組み合わせは、 <block ref="77fc057b80fa6f66939164fa2f49d4aa" category="inline-xref-macro-rx"></block> 。</block>
  <block id="af501c5627834d82eb879e69953bbaa4" category="section-title">サポートされているシステムアップグレードの組み合わせ</block>
  <block id="fc3b6319b336cfa6307e3477e876ed61" category="paragraph">次の表は、この ARL 手順を使用したコントローラのアップグレードでサポートされるモデル マトリックスを示しています。</block>
  <block id="234763e013c56e40aad12ba1568df630" category="paragraph">MetroCluster FC構成では、できるだけ早くディザスタリカバリ/フェイルオーバーサイトのノードを交換する必要があります。MetroCluster構成内のコントローラモデルの不一致はサポートされません。コントローラモデルの不一致により、災害復旧ミラーリングがオフラインになる可能性があるためです。 <block ref="bf0b9d28548e0e53fb793faa9566bdc3" prefix=" " category="inline-code"></block> 2 番目のサイトでノードを交換するときに MetroCluster チェックをバイパスするコマンド。</block>
  <block id="cd318323d1df512bb3603de61a2b3b83" category="paragraph">ARL アップグレードの概要のセクションで、手順のさまざまなフェーズを説明している表を参照してください。発生する可能性のある障害の情報は、手順のフェーズ別に表示されます。</block>
  <block id="a9995e4791e2b1d34380e8970266f54e" category="doc">ARLアップグレード手順について学ぶ</block>
  <block id="de382d175e4b8921579ddb63371c07fa" category="paragraph">コントローラハードウェアをアップグレードするには、アグリゲート再配置（ARL）の方法が複数あります。この手順では、ONTAP 9.7、9.6、または9.5を実行しているシステムで、「システムコントローラ置換コマンド」とARLを使用してコントローラハードウェアをアップグレードする方法について説明します。</block>
  <block id="c195d7ae801cc3ba97ceaf9f33ed9964" category="list-text">この手順は複雑で、 ONTAP の高度な管理スキルがあることを前提としています。また、以下の内容を読んで理解する必要があります。 <block ref="07bd1ba3b368537f0ce8ec59dd45af10" category="inline-link-macro-rx"></block>そして<block ref="1e7f97890c56f8e84d1c3bfb7b3e84a7" category="inline-link-macro-rx"></block>アップグレードを開始する前に。</block>
  <block id="91cf60ddbe46fdf3e32dd4a3e4f8829c" category="doc">ARLアップグレードシーケンスについて学ぶ</block>
  <block id="9b35d5649ce0dc74585ef78ffb7ebf94" category="cell"><block ref="9b35d5649ce0dc74585ef78ffb7ebf94" category="inline-link-macro-rx"></block></block>
  <block id="5be324dff06c2e2a770a4bcf972d6923" category="cell"><block ref="5be324dff06c2e2a770a4bcf972d6923" category="inline-link-macro-rx"></block></block>
  <block id="0cd9d51a5ad82f4979b7ef55c0ac5647" category="cell"><block ref="0cd9d51a5ad82f4979b7ef55c0ac5647" category="inline-link-macro-rx"></block></block>
  <block id="9c936df3ea153c74d872576b972cfc63" category="cell"><block ref="9c936df3ea153c74d872576b972cfc63" category="inline-link-macro-rx"></block></block>
  <block id="8cb1597db65a7387842cef341e165e21" category="cell"><block ref="8cb1597db65a7387842cef341e165e21" category="inline-link-macro-rx"></block></block>
  <block id="0f82d37b39d321fc9b25cdd372b37e32" category="cell"><block ref="0f82d37b39d321fc9b25cdd372b37e32" category="inline-link-macro-rx"></block></block>
  <block id="3803a496b59603445ff8102b5b762db9" category="cell">e1a (一時的なクラスタ相互接続には e1a を使用)</block>
  <block id="05078edefd215e2eb6ebd175b2f619a9" category="cell">e1b (一時的なクラスタ相互接続には e1b を使用)</block>
  <block id="6fd5e95dc0bce8329da87e1152677b48" category="cell">不要</block>
  <block id="d3ab066fd6dc766600e9c7be61f26156" category="cell">ノード1のアップグレードにはHAポートは必要ありません</block>
  <block id="fea7d5b64eaa4336e0720fa830fc0ce8" category="summary">以前AFF A800ノード2に接続されていたクラスタ、HA、ストレージ、およびデータ接続を、新しくインストールしたAFF A90またはAFF A70ノード1に接続します。</block>
  <block id="fc28977213fbec1681078ec6c11f3bfc" category="doc">共有クラスタHAとストレージ用のノード2をケーブル接続する</block>
  <block id="67a013279b092cbafa1aec1f973529bd" category="paragraph">次のいずれかのアップグレードを実行する場合は、既存のシステム上のノード 2 に以前接続されていたクラスタ、HA、ストレージ、データ、および管理接続を、交換用システム上の新しくインストールされたノード 2 に接続する必要があります。</block>
  <block id="294af22433d3e8d53b01a6e239ede148" category="cell">AFF A30、AFF C60</block>
  <block id="d584a997870fde3d44785e42c546ae48" category="cell">e0c HAポートはクラスタポートと共有されます</block>
  <block id="7c814f2f0c1070c7b13bbcb280736ffe" category="cell">ノード1のe4aは100 GbEケーブルを使用してノード2のe4aに直接接続されています。</block>
  <block id="d7ffd1a6e0074e5200a48e39010cf8b6" category="cell">e0d HAポートはクラスタポートと共有されます</block>
  <block id="a0c565269a133339475c50b1d28acc6c" category="cell">ノード 1 の e2a は、100 GbE ケーブルを使用してノード 2 の e2a に直接接続されます。e2a が存在しないか、100 GbE をサポートしていない場合は、100 GbE ケーブルを使用してノード 1 の e4b をノード 2 の e4b に直接接続します。</block>
  <block id="f859b8a85ea4a1245c83ad3d66881ed0" category="cell">ノード 1 の e2a は、100 GbE ケーブルを使用してノード 2 の e2a に直接接続されます。e2a が存在しないか、100 GbE をサポートしていない場合は、100 GbE ケーブルを使用してノード 1 の e4b をノード 2 の e4b に直接接続します。</block>
  <block id="2043a419cf79fdc0b6afedbe7e533563" category="cell">イーサネットストレージポート</block>
  <block id="a5724e5363039338aa167a6a20c3d258" category="cell">SASストレージポート</block>
  <block id="b85fa6dbc4b8cb7277b6ec50cb42ce1d" category="paragraph">コントローラハードウェアのアップグレードには、アグリゲート再配置（ARL）の方法が複数あります。このコンテンツでは、既存のシステムシャーシとディスクを維持しながら、既存のシステムを交換用システムに変換することで、HAペアのストレージコントローラをアップグレードする方法について説明します。この複雑な手順は、経験豊富なONTAP管理者のみが実行してください。</block>
  <block id="55b3b05db9055606671b051fe4236544" category="paragraph">この ARL 手順がコントローラ ハードウェアのアップグレードに適しているかどうかを判断するには、サポートされているアップグレードとサポートされていないアップグレードについて、次のすべての状況を確認する必要があります。</block>
  <block id="871454d4d8b52d5705122acba094ed53" category="section-title">このARLアップグレードでサポートされています</block>
  <block id="5abc8df60e8d415ff015e9e2e3973831" category="paragraph">この ARL 手順は、次の状況で使用できます。</block>
  <block id="483ef02f534eaf4cc9e87a907124962b" category="list-text">コントローラーのアップグレードは、 <block ref="3e009a4a61593544c3f702feddaa82cf" category="inline-xref-macro-rx"></block> 。</block>
  <block id="1c628a66684e1c2f98b8b74b92fca476" category="inline-xref">サポートされているシステムアップグレードの組み合わせ</block>
  <block id="3e60f35ad38278776a582bf610bffc73" category="list-text">アップグレードに必要な最小ONTAPバージョンを実行しています。詳細については、を参照して<block ref="e5691ac2da280c045e4d1368089517a3" category="inline-xref-macro-rx"></block>ください。</block>
  <block id="91e93ca207dc42fbee7f177284d507e7" category="section-title">この ARL アップグレードではサポートされていません</block>
  <block id="c424df23c6758d8896c397de148f1596" category="paragraph">次の状況では、この ARL 手順は使用できません。</block>
  <block id="f49f4d87d3956047a1927e32214f4938" category="paragraph">次の表は、既存のシステム シャーシとディスクを維持しながら、既存のシステムを交換用システムに変換してコントローラーのアップグレードを実行する場合にサポートされるシステム マトリックスを示しています。</block>
  <block id="5d77c551fcc52ba39339152542fd8be8" category="paragraph">^2^ AFF A200 および FAS2620 システムは、9.11.1 以降の ONTAP バージョンをサポートしていません。</block>
  <block id="6737079a71b9087ba88f738e86f76246" category="paragraph">特定のシステム構成では、コントローラのアップグレードがサポートされます。参照<block ref="3a60505e6c6bc1b5faa8db6223b2dcf2" category="inline-link-macro-rx"></block>サポートされているシステムと最小 ONTAP バージョンのリストについては、こちらをご覧ください。</block>
  <block id="b8af03edd79592588bbec4688d5b70ee" category="paragraph">問題が発生した場合は、 <block ref="d170dd544fa530f9129069c7fbfdc956" category="inline-link-macro-rx"></block>詳細情報と可能な解決策については、手順の最後にあるセクションをご覧ください。発生する可能性のある障害に関する情報は、手順のフェーズごとに記載されています。 <block ref="1e7f97890c56f8e84d1c3bfb7b3e84a7" category="inline-link-macro-rx"></block> 。</block>
  <block id="8bfe558f0142a4614ccf00a267ed0e88" category="paragraph">発生した問題の解決策が見つからない場合は、テクニカル サポートにお問い合わせください。</block>
  <block id="41982c3ee615c1b7a13ffd1bd6c67351" category="paragraph">コントローラハードウェアをアップグレードするには、アグリゲート再配置（ARL）の方法がいくつか存在します。この手順では、既存のシステムシャーシとディスクを維持しながら、既存のシステムを交換用システムに変換することで、HAペアのストレージコントローラをアップグレードする方法について説明します。</block>
  <block id="46c60382e39145c44dd560eaa1c9e59f" category="paragraph">アップグレード手順を開始する前に、重要な要素を考慮する必要があります。</block>
  <block id="76e2f4028c44efb6c34f689d1ebe6592" category="admonition">アップグレード手順を開始する前に、以下の重要な情報をすべて確認する必要があります。</block>
  <block id="7a33c380da7173854208ef2ecf3ad83b" category="inline-link-macro">コントローラーのアップグレードに関するガイドライン</block>
  <block id="92a3358213b0f43d57f561169e8f875b" category="list-text">この手順は複雑で、 ONTAP の高度な管理スキルがあることを前提としています。また、以下の内容を読んで理解する必要があります。 <block ref="6b6f97d32522c6f76cca4a6bb67fbbb2" category="inline-link-macro-rx"></block>そして<block ref="1e7f97890c56f8e84d1c3bfb7b3e84a7" category="inline-link-macro-rx"></block>アップグレードを開始する前に。</block>
  <block id="f4e202b16d4110d20d433ad7438f5314" category="list-text">AFF A250およびAFF C250システムは、クラスタインターコネクトに10/25GbEオンボードポートを使用します。AFFA250またはAFF C250システムの2ノードスイッチレスクラスタをAFF A50、AFF A30、AFF C60、またはAFF C30システムにアップグレードするには、両ノードのスロット1にX60132A 4ポート10/25GbEカードを使用する必要があります。これにより、クラスタLIF用のクラスタインターコネクトが、ターゲットプラットフォーム上の一時ポートに提供されます。</block>
  <block id="78c398b9af8fd88a6f91bb80a4953770" category="paragraph">アップグレード用に受け取った交換用コントローラモジュールをノード2に取り付けます。Node2 は、システムの背面からコントローラを見たときにシャーシの下半分に配置されているコントローラ B です。</block>
  <block id="9b44a31a05d8aaba8e74ed9fbe14e789" category="list-text">2ノードのスイッチレス構成の場合、ノード2のスロット1にX60132A（4ポート10/25GbEカード）が装着されていることを確認してください。X60132Aカードは、アップグレード中のクラスタ相互接続に必要です。</block>
  <block id="a7632bc525df3f119a06420f80bce02b" category="list-text">ブート メディア上の以前の構成をすべてクリアします。</block>
  <block id="85c959b092ae248c6236b1f442d3cbeb" category="list-text">次のプロンプトで、 <block ref="b433b76417b4f08166eb90cef3aa2a31" prefix=" " category="inline-code"></block>コマンドを入力し、Enter キーを押します。</block>
  <block id="b658f4f5938289ac1a7001b05fddd0b2" category="admonition">ノードがブートメニューで停止するまで待ちます。 <block ref="b433b76417b4f08166eb90cef3aa2a31" prefix=" " category="inline-code"></block>手術。</block>
  <block id="24c944e4e18d5101d5a8069e4aed82b7" category="paragraph">交換用コントローラモジュールのブートメディアにインストールされているONTAPのバージョンは、シャーシにインストールされ電源が投入されていない限り確認できません。交換用システムのブートメディアにあるONTAPのバージョンは、アップグレードする古いシステムで実行されているONTAPのバージョンと同じであり、プライマリブートイメージとバックアップブートイメージの両方が一致している必要があります。イメージを設定するには、ネットブートを実行してから<block ref="b433b76417b4f08166eb90cef3aa2a31" prefix=" " category="inline-code"></block>ブートメニューからコマンドを実行します。コントローラモジュールが以前に別のクラスタで使用されていた場合、 <block ref="b433b76417b4f08166eb90cef3aa2a31" prefix=" " category="inline-code"></block>コマンドはブート メディア上の残りの構成をすべてクリアします。</block>
  <block id="d8de800fa3a05daf5beef95c17053614" category="cell"><block ref="d8de800fa3a05daf5beef95c17053614" category="inline-link-macro-rx"></block></block>
  <block id="9bfe80f67bd69b715a526b04b856dce8" category="cell"><block ref="9bfe80f67bd69b715a526b04b856dce8" category="inline-link-macro-rx"></block></block>
  <block id="5cc98758108e5696a18521fc09fdcec0" category="cell"><block ref="5cc98758108e5696a18521fc09fdcec0" category="inline-link-macro-rx"></block></block>
  <block id="642b6bc12faead67d7d148ebdbdfd471" category="cell"><block ref="642b6bc12faead67d7d148ebdbdfd471" category="inline-link-macro-rx"></block></block>
  <block id="011854dc700dfa96d9898f3c4c13f97c" category="cell"><block ref="011854dc700dfa96d9898f3c4c13f97c" category="inline-link-macro-rx"></block></block>
  <block id="afdeccad7e31c7ff3a545aea9b5cd585" category="cell"><block ref="afdeccad7e31c7ff3a545aea9b5cd585" category="inline-link-macro-rx"></block></block>
  <block id="c6ebca9a3afaa3cddaedcad592c58fb5" category="cell"><block ref="c6ebca9a3afaa3cddaedcad592c58fb5" category="inline-link-macro-rx"></block></block>
  <block id="981b474bcebe95928c5044d4d826b06a" category="paragraph">ノード1のスロット1に、X60132A 4ポート 10/25 GbE カードが装着されていることを確認してください。X60132Aカードは、アップグレード中の2ノード スイッチレス クラスタ構成におけるクラスタ相互接続に必要です。</block>
  <block id="aec594503e4cd85b89390b92e19c6336" category="list-text">この手順は以下のアップグレード構成に適用されます。その他のシステムアップグレードの場合は、この手順をスキップして<block ref="35cd4c3f74cf1f31540dfdaaae84abf5" category="inline-xref-macro-rx"></block> ：</block>
  <block id="9ba9fc17d25add4ac88b7024499346f7" category="list-text">2ノードのスイッチレスクラスタ</block>
  <block id="52d148b751b072a5e6cbab835ff50cf9" category="list-text">スイッチ接続されたAFF A250またはAFF C250システムをAFF A50、AFF A30、AFF C30、またはAFF C60システムにアップグレードする</block>
  <block id="ad9425984a7bc421520e577ca8fa6ddc" category="paragraph">node1 が自動的にクォーラムに参加しない場合:</block>
  <block id="2231f07924ae996a2e0335ca51ba8392" category="list-text">ポート e1a と e1b の IPspace を確認します。</block>
  <block id="0d93c01fb211fce895dfa56e9352568e" category="list-text">IPspace が「Cluster」でない場合は、e1a と e1b の IPspace を「Cluster」に変更します。</block>
  <block id="a1f7471b255af2ce2f4e24b7a18b4a16" category="paragraph"><block ref="cad49231dc9ae0f7b5b6641644cb0645" prefix="" category="inline-code"></block></block>
  <block id="ae96d089b3070a0b74bbf4c5f24a60cf" category="list-text">ポート e1a と e1b の IPspace が「Cluster」であることを確認します。</block>
  <block id="fb988694e04918b3f444ccf586100c68" category="list-text">ノード1のクラスタLIFをe1aとe1bに移行します。</block>
  <block id="61c7967406d3bbed687be2a2fc12fcf4" category="paragraph"><block ref="77201bdbdb5e1ca6ded21c787e6a1867" prefix="" category="inline-code"></block></block>
  <block id="15a6776356964e218cf6e75d5da438bd" category="list-text">[[verify-node1-step3]]node1 と node2 が同じクラスターの一部であり、クラスターが正常であることを確認します。</block>
  <block id="c304740fab96c115c91a4885305cfe13" category="list-text">この手順は以下のアップグレード構成に適用されます。その他のシステムアップグレードの場合は、この手順をスキップして<block ref="951e745f9f2e3bc74db45f10f0613198" category="inline-xref-macro-rx"></block> ：</block>
  <block id="fcea2edfedf4023a086d1314bc04b894" category="list-text">スイッチ接続された AFF A250 または AFF C250 システムを AFF A50、AFF A30、AFF C30、または AFF C60 システムにアップグレードします。</block>
  <block id="c4f73b57af257708b4f825fe0c01f8ee" category="paragraph">node2 が自動的にクォーラムに参加しない場合:</block>
  <block id="e8623263345db747257101b539fb116a" category="list-text">ノード2のクラスタLIFをe1aとe1bに移行します。</block>
  <block id="d36a262908ec596b885d26e7d3c6d090" category="paragraph"><block ref="6cc1893d0214df3ba1a4423c8b22edce" prefix="" category="inline-code"></block></block>
  <block id="41a1ac985b3da653ac747735364a61fb" category="list-text">[[verify-node2-step3]]node2 と node1 が同じクラスターの一部であり、クラスターが正常であることを確認します。</block>
  <block id="ffaf5c38853aa6ef5e68631e0c4a1fef" category="list-text">この手順は、AFF A250またはAFF C250からAFF A50、AFF A30、AFF C60、またはAFF C30への2ノードスイッチレス構成のアップグレードにのみ適用されます。その他のシステムアップグレードの場合は、この手順をスキップして、 <block ref="9c9730c4fd859d78bd3d35e76120bbfc" category="inline-xref-macro-rx"></block> ：</block>
  <block id="41d1809ae493139fc48f336155c6154c" category="paragraph">e4a、e2a、e1a、e1b ポートまたは e4a、e4b、e1a、e1b ポートが「クラスター」ブロードキャスト ドメイン内のクラスター ポートであることを確認します。</block>
  <block id="c582d5e71dc716c49310d7a9465e3fc7" category="paragraph">AFF A50、AFF A30、AFF C30、およびAFF C60システムは、クラスタポートとHAポートを共有します。ノード1とノード2のすべてのクラスタLIFをe4a、e4b、またはe4a、e2aに安全に移行できます</block>
  <block id="39731cd7e7c7bd409ab51837af78b65f" category="list-text">すべてのクラスタ LIF のホーム ポートと現在のポートを一覧表示します。</block>
  <block id="34532982d3fd43da15283f77481827f0" category="paragraph"><block ref="e60c6e8e952c2634f7a930f56d70a275" prefix="" category="inline-code"></block></block>
  <block id="4944aaf7b534fa6a0f29720e4959db2f" category="list-text">[[migrate-cluster-lif-step-4b]]ノード1とノード2で、e1aをホームポートとして使用しているクラスタLIFをe4aに移行します。</block>
  <block id="97f5c5e903e9f48e2e3b4a147fb4957a" category="paragraph"><block ref="49fed2a81b15799569c9a3650e42556e" prefix="" category="inline-code"></block></block>
  <block id="210c7e1cbe9d83a94499ac23fed51157" category="inline-xref">サブステップb</block>
  <block id="a13b3f51533576fd2765952f60bf54da" category="list-text">ノード1とノード2で、移行したクラスタLIFを変更します。 <block ref="acd0e9d1d1f97200c0f34c34c62f5120" category="inline-xref-macro-rx"></block> e4a をホームポートとして使用するには:</block>
  <block id="994fb77e8ae643ade9a0cc0ee0857d5a" category="paragraph"><block ref="5a9256025704e30dc83f98580bd7dfe4" prefix="" category="inline-code"></block></block>
  <block id="ea95a06789035d8df692ab05475f0e2f" category="list-text">クラスターがクォーラム内にあることを確認します。</block>
  <block id="a80d840372427c5d15e0b9db834b63be" category="inline-xref">サブステップbとサブステップc</block>
  <block id="ee894daf8fe7b4a5b7da155681d8a964" category="list-text">繰り返す<block ref="3e49654df136b5f35354488624f5ad4f" category="inline-xref-macro-rx"></block>各ノードの 2 番目のクラスタ LIF を e2a または e4b に移行して変更するには、次のようにします。</block>
  <block id="a77c0981b485fb9c6cc606756e414227" category="paragraph">e2aが存在し、100GbEネットワークポートである場合、これがデフォルトの2番目のクラスタポートになります。e2aが100GbEネットワークポートでない場合、ONTAPはe4bを2番目のクラスタポートおよびHAポートとして使用します。</block>
  <block id="9f5509ea50f3262c2f159d77123f8919" category="list-text">「クラスター」ブロードキャスト ドメインから e1a と e1b を削除します。</block>
  <block id="f910ea599d5c2c8323c69531d555ec1b" category="paragraph"><block ref="ab4601f65b55ba79472e7008227a23e9" prefix="" category="inline-code"></block></block>
  <block id="66f26ee54c8814e8b94c065e49d16560" category="list-text">クラスタポートe4a、e2a、またはe4a、e4bのみが「クラスタ」ブロードキャストドメインにあることを確認します。</block>
  <block id="b69f8307541b180c301c75852eeaeab7" category="paragraph"><block ref="4362cc8f3c40a5a0a0d9d77b951e1b94" prefix="" category="inline-code"></block></block>
  <block id="536d47e1ce71a4699256360221b299eb" category="list-text">有効なクラスター HA 接続のみが使用され、冗長接続がないことを確認するために、e1a ノード 1 と e1a ノード 2、および e1b ノード 1 と e1b ノード 2 間のケーブル接続を削除します。</block>
  <block id="f538030e7f546e5024b1bb99775e742a" category="list-text">[[verify-node2-step6]]コントローラー交換操作のステータスを確認し、一時停止状態であり、新しいコントローラーのインストールとケーブルの移動という物理的なタスクを実行するためにノード2が停止される前と同じ状態であることを確認します。</block>
  <block id="3fae990073be4bfc21bbdb3956f8c532" category="list-text">2ノードのスイッチレスアップグレード構成用のX60132A、4ポート10/25GbEカード</block>
  <block id="434ab5e5372960ceae119d760103a77e" category="paragraph">コントローラハードウェアをアップグレードするには、アグリゲート再配置（ARL）の方法が複数あります。この手順では、ONTAP 9.8以降を実行しているシステムで、「システムコントローラ置換コマンド」を使用してアグリゲート再配置（ARL）を行い、コントローラハードウェアをアップグレードする方法について説明します。この複雑な手順は、経験豊富なONTAP管理者のみが実行できます。</block>
  <block id="6a8496e97f1a2e4ab18a857eb20343b6" category="paragraph">次の表は、この ARL 手順を使用してコントローラのアップグレードを実行する場合にサポートされるシステム マトリックスを示しています。</block>
  <block id="76f80cf48421dced5b6ed01629219e35" category="paragraph">コントローラハードウェアをアップグレードするには、アグリゲート再配置（ARL）の方法が複数あります。この手順では、ONTAP 9.8以降を実行しているシステムで、「システムコントローラ置換コマンド」を使用してアグリゲート再配置（ARL）を行い、コントローラハードウェアをアップグレードする方法について説明します。</block>
  <block id="5a675c0359307c3756f5ce8ecbdf0426" category="cell"><block ref="5a675c0359307c3756f5ce8ecbdf0426" category="inline-link-macro-rx"></block></block>
  <block id="2c6036afe51f4d90caf7924a4ae63865" category="cell"><block ref="2c6036afe51f4d90caf7924a4ae63865" category="inline-link-macro-rx"></block></block>
  <block id="67fd1cd00615f9776e741301ee938715" category="paragraph">コントローラハードウェアのアップグレードには、アグリゲート再配置（ARL）の方法が複数あります。このARL手順では、ONTAP 9.15.1以降で導入されたAFFおよびFASストレージシステムのHAコントローラペアを、既存のデータとディスクを維持しながら新しいコントローラにアップグレードする方法について説明します。これは複雑な手順であるため、経験豊富なONTAP管理者のみが使用してください。</block>
  <block id="5daf883910faf2d5eadea06713284457" category="section-title">このARL手順でサポートされているアップグレード</block>
  <block id="1469d2028ec2228d8d36d8cf07b28901" category="paragraph">次の状況では、この ARL 手順を使用してノードのペアをアップグレードできます。</block>
  <block id="576138a7562c7f1ec2b14775dc28dbd2" category="list-text">ハードウェアアップグレードの組み合わせは、 <block ref="f4d2643a6e6be5d2fbb4418143d26e27" category="inline-xref-macro-rx"></block> 。</block>
  <block id="064ec30fe59f186a96ff3a7e79b1e783" category="section-title">このARL手順ではアップグレードはサポートされていません</block>
  <block id="66cdfd07ff0fbee9893a68a3166c5bfc" category="paragraph">次の状況では、この ARL 手順を使用してノードのペアをアップグレードすることはできません。</block>
  <block id="be9f82c7235ff72f6fd3d42c68cd413e" category="paragraph">以下の表は、ONTAP 9.15.1以降で導入されたAFFおよびFASシステムにおいて、ARLを使用したサポートされているコントローラアップグレードの組み合わせを示しています。コントローラアップグレードの組み合わせがリストにない場合は、テクニカルサポートにお問い合わせください。</block>
  <block id="c1003b834b455285971eb1c777fc1ebb" category="paragraph">コントローラハードウェアをアップグレードするためのアグリゲート再配置（ARL）方法はいくつかあります。このARL手順では、ONTAP 9.15.1以降で導入されたAFFおよびFASストレージシステムのHAコントローラペアを、既存のデータとディスクを維持しながら新しいコントローラにアップグレードする方法について説明します。</block>
  <block id="06727a9cd6d12b6c8838b9bb7623731f" category="list-text">というメッセージが表示されてシステムのリブートループが発生した場合は<block ref="bc1d3ad68c46835686e44d5c5c600a71" prefix=" " category="inline-code"></block>、ディスクの再割り当てで問題が発生したことを示しています。問題を解決するには、を参照してください <block ref="d170dd544fa530f9129069c7fbfdc956" category="inline-link-macro-rx"></block> 。</block>
  <block id="dbc81fa6dbd491d7e15e2010ef2df8eb" category="cell"><block ref="dbc81fa6dbd491d7e15e2010ef2df8eb" category="inline-link-macro-rx"></block></block>
  <block id="9c08ad3dbc04fc900358990ae96d6d48" category="cell"><block ref="9c08ad3dbc04fc900358990ae96d6d48" category="inline-link-macro-rx"></block></block>
  <block id="6ba5630a5f60662e8fc1f03d17393494" category="cell"><block ref="6ba5630a5f60662e8fc1f03d17393494" category="inline-link-macro-rx"></block></block>
  <block id="2869db391c780ba6e9b4de7b092b058b" category="cell"><block ref="2869db391c780ba6e9b4de7b092b058b" category="inline-link-macro-rx"></block></block>
  <block id="5695383e7c30a696aae86f603985c3d3" category="cell"><block ref="5695383e7c30a696aae86f603985c3d3" category="inline-link-macro-rx"></block></block>
  <block id="9f8db38161a7ff2300fd9636e1660767" category="cell"><block ref="9f8db38161a7ff2300fd9636e1660767" category="inline-link-macro-rx"></block></block>
  <block id="08486e1690d069740d8ab82bb7bb855c" category="summary">ONTAP 9.7 以前を実行している新しいコントローラを使用して HA ペアのストレージ コントローラをアップグレードするために、手動 ARL 手順を使用するかどうかを決定します。</block>
  <block id="bbe37f54888d251fface0039c477a3d4" category="paragraph">この手順では、ONTAP 9.7以前を実行しているシステムで、手動アグリゲート再配置（ARL）を使用してコントローラハードウェアをアップグレードする方法について説明します。この複雑な手順は、経験豊富なONTAP管理者のみが実行してください。</block>
  <block id="18a13cc78fd31d977c702f05604d2be7" category="list-text">コントローラは ONTAP 9.7 以前を実行しています。</block>
  <block id="d98bc80885ce2dd01249e5af9573ab5d" category="paragraph">この手順では、ONTAP 9.7 以前を実行しているシステムで手動アグリゲート再配置 (ARL) を使用してコントローラ ハードウェアをアップグレードする方法について説明します。</block>
  <block id="c11e8b882a2fb3519d1e2c978479cfb7" category="paragraph">次のいずれかのアップグレードを実行する場合は、この ARL 手順を使用できます。</block>
  <block id="70c8306a3a463f95fabb934c324987ea" category="summary">ONTAP 9.8 以降を実行する新しいコントローラを使用して HA ペアのストレージ コントローラをアップグレードするために、手動 ARL 手順を使用するかどうかを決定します。</block>
  <block id="2054e6231c92ada05288517dca13bfcc" category="paragraph">この手順では、ONTAP 9.8以降を実行しているシステムで、手動アグリゲート再配置（ARL）を使用してコントローラハードウェアをアップグレードする方法について説明します。この複雑な手順は、経験豊富なONTAP管理者のみが実行してください。</block>
  <block id="224941a93fb2d92decdb8e296cad76b4" category="list-text">コントローラは ONTAP 9.8 以降を実行しています。</block>
  <block id="7a6d4742dcd324a8f046691db65cb610" category="paragraph">この手順では、ONTAP 9.8 以降を実行しているシステムで手動アグリゲート再配置 (ARL) を使用してコントローラ ハードウェアをアップグレードする方法について説明します。</block>
  <block id="3a707188c7538a8d5787874eaf2a89c7" category="sidebar">ボリュームまたはストレージを移動してアップグレードすることを決定する</block>
  <block id="aaffcd309683d027dafeb4e2b3e5d40a" category="sidebar">ARL手順について学ぶ</block>
  <block id="8f7d8cd660c3a1288b48778ea72e58a5" category="sidebar">このARL手順を使用するかどうかを決定する</block>
  <block id="8f921903953b3b6717329ab7de1391c1" category="sidebar">共有クラスタHAストレージ用のノード2をケーブル接続する</block>
  <block id="76751896989d28875a4eeddf2995da8d" category="sidebar">スイッチレイアウトの再構成の準備</block>
  <block id="9c328071e0321bfbe1d164cac2c22ebd" category="paragraph"><block ref="e6b811afaa94951aac008a53e383ff23" prefix="" category="inline-code"></block></block>
  <block id="b3b5d42abc670ac795f4b90cfc221655" category="paragraph"><block ref="cb38fc2887221a0ca6581f1d73b29ec5" prefix="" category="inline-code"></block></block>
  <block id="028c6aaad70991eeba5c4bb66ea88329" category="paragraph">その<block ref="d6d2e75e827fff3babc66bc7cd4d2c4b" prefix=" " category="inline-code"></block>このコマンドで使用する方法は、前の出力で確認できます。 <block ref="0c5606ed319753bb2d86a485f23c8f6d" prefix=" " category="inline-code"></block>指示。</block>
  <block id="7edece7677f8bef06093b6be08879c67" category="paragraph"><block ref="b79a4da2e325c3015ed2f7afe206a96b" prefix="" category="inline-code"></block></block>
  <block id="316bb78c78d8c5d743c44432528cc2c4" category="paragraph"><block ref="4221e144bb878e9d4c97a49eaf2eb814" prefix="" category="inline-code"></block></block>
  <block id="4d090b6b4178c6d326829a98b05a4cd7" category="paragraph"><block ref="534a01a4ca515955efe8376e84615e84" prefix="" category="inline-code"></block></block>
  <block id="b7836a7a1972d5f8803e2f44bd3cb658" category="paragraph"><block ref="49166cc15e848fc049881c3de5e1d1f8" prefix="" category="inline-code"></block><block ref="6d203e2c19155492a108b65377909131" prefix=" " category="inline-code"></block></block>
  <block id="4655a1857691d25ac0c12a710dad5454" category="paragraph"><block ref="365695b1d723adf070447422d9e8d907" prefix="" category="inline-code"></block><block ref="5db9f9801ff1015f8f0ec287f1a37e08" prefix=" " category="inline-code"></block></block>
  <block id="8502756d136a7fbd63f0576ce096751b" category="paragraph"><block ref="e0dd455af4d681c74ccfc9dc72ac81da" prefix="" category="inline-code"></block></block>
  <block id="a0cc12382dcdc36e42046d83b6c7e109" category="paragraph"><block ref="2599180db5e07a38b13f33bacd678ed0" prefix="" category="inline-code"></block><block ref="cad104e67eebc6460f05ee5386343340" prefix=" " category="inline-code"></block></block>
  <block id="29d22afc321b012279dd6e65d63787dd" category="paragraph"><block ref="c1691ae4960273f7d983ed570ccc250a" prefix="" category="inline-code"></block><block ref="66730ced80aced888a1e584b32aac885" prefix=" " category="inline-code"></block></block>
  <block id="dce88c7c89a608000baa31d7f41aafe5" category="cell">外部キー管理サーバーのIPアドレス</block>
  <block id="f861760a9e4b91d9c15f4ed6899c8a67" category="list-text">オンボード キー管理または外部キー管理のどちらを使用しているかに応じて、次のいずれかの手順を使用して、ストレージまたはボリューム暗号化機能を復元します。</block>
  <block id="7b5b637cc082477a9dd4c129c225152e" category="inline-link-macro">オンボードキー管理暗号化キーを復元する</block>
  <block id="43a39f2ab9e3339214d6fda05936d597" category="list-text"><block ref="43a39f2ab9e3339214d6fda05936d597" category="inline-link-macro-rx"></block></block>
  <block id="1ee623098df2f7856a034824be882999" category="inline-link-macro">外部キー管理の暗号化キーのリストア</block>
  <block id="116698f9b98f4e456ff27e95e38fccf3" category="list-text"><block ref="116698f9b98f4e456ff27e95e38fccf3" category="inline-link-macro-rx"></block></block>
  <block id="bdac4e49f25f09fd22688c1a0aaf704a" category="paragraph">認証キーを使用できなかったか、外部キー管理サーバにアクセスできなかったためにボリュームがオフラインになっていないかを確認します。これらのボリュームをオンラインに戻すには、 <block ref="fcc46ad208d53e4021ecddc4ee333dc3" prefix=" " category="inline-code"></block>指示。</block>
  <block id="0095109d5b66e24afe910457a637e763" category="list-text">[[A900_boot_node1]]NetApp Storage Encryption (NSE) ドライブがインストールされている場合は、次の手順を実行します。</block>
  <block id="c79e58170822a59a6dd931336ca868ed" category="list-text">[[boot_node2_step1]]NetApp Storage Encryption (NSE) ドライブがインストールされている場合は、次の手順を実行します。</block>
  <block id="78afe52f3d782a64e711de589b4df3d3" category="paragraph"><block ref="346db28706192c9274da330f004e695a" prefix="" category="inline-code"></block></block>
  <block id="ee003f27b169d76d97322f42ff3b1684" category="paragraph"><block ref="fa9973ef8cb7c81f6e65cb1c4e0c12f2" prefix="" category="inline-code"></block></block>
  <block id="4dfbd3112f049daa92b3b9620a0a23b4" category="list-text">NetApp Storage Encryption (NSE) ドライブがインストールされている場合は、次の手順を実行します。</block>
  <block id="780d3ce82c06a7096f3d7b6381f35cf4" category="list-text">[[man_install3_step16]]NetApp Storage Encryption (NSE) ドライブがインストールされている場合は、次の手順を実行します。</block>
  <block id="4a1df957cbcb3df9aa2205d817cf2109" category="paragraph">node2 を廃止するには、node2 を適切にシャットダウンし、ラックまたはシャーシから取り外します。</block>
  <block id="10cace0e3d344387153f687e87f1b288" category="summary">スイッチ接続クラスタのアップグレード用に、クラスタ スイッチ RCF が新しいコントローラの共有クラスタ/HA ポートをサポートしていることを確認します。</block>
  <block id="2b1a7f7ae64997f151dc4070b5a3339f" category="doc">クラスタスイッチのRCF構成を確認する</block>
  <block id="4288bdefdf72b476458de2ae320fd290" category="paragraph">アップグレード手順のこの段階では、すべてのデータ集約がノード 1 上にある必要があります。スイッチ接続クラスタを含む構成をアップグレードする場合は、クラスタ スイッチ参照構成ファイル (RCF) が新しいコントローラの共有クラスタ/HA ポートをサポートしていることを検証する必要があります。</block>
  <block id="7afaed380dc70cadd383153cb0df172c" category="paragraph">2ノードのスイッチレスクラスタ構成にアップグレードする場合は、このセクションをスキップして、<block ref="0d500821bdc96d479f52180017fd421c" category="inline-link-macro-rx"></block> 。</block>
  <block id="752f235818174972b18e5041fa403146" category="list-text">「IC RDMA」のステータスを確認します。</block>
  <block id="bc74de8a7baa3f875dd8466d0ec80380" category="paragraph"><block ref="ca4c8649efc0f8c4ac08dd65a4755aae" prefix="" category="inline-code"></block></block>
  <block id="0e71712a7a686f1ca50aeb1713ddb27d" category="paragraph">出力では、「IC RDMA接続」のステータスが<block ref="258f49887ef8d14ac268c92b02503aaa" prefix=" " category="inline-code"></block>。</block>
  <block id="9fc1e13723b1860e3d608f537f403108" category="cell">「IC RDMA 接続」ステータスが ...</block>
  <block id="f7950b792336917e5134073bda363898" category="cell"><block ref="258f49887ef8d14ac268c92b02503aaa" prefix="" category="inline-code"></block></block>
  <block id="61decb38566b6125e910fda107613c86" category="cell">こちらへ<block ref="0d500821bdc96d479f52180017fd421c" category="inline-link-macro-rx"></block>.</block>
  <block id="2b23c6643a7989ea797dcc7318e69941" category="cell"><block ref="08a38277b0309070706f6652eeae9a53" prefix="" category="inline-code"></block></block>
  <block id="42eed74bc7449c06a58949763bc19a72" category="cell">こちらへ<block ref="5b8028286d92c73a97e17186fd614dd6" category="inline-xref-macro-rx"></block>.</block>
  <block id="e2ee618006d829a530b146576cce509a" category="list-text">「IC RDMA接続」のステータスが次のように変更されていることを確認します。<block ref="258f49887ef8d14ac268c92b02503aaa" prefix=" " category="inline-code"></block> ：</block>
  <block id="01e12de62fa77fda2815719aed8ff892" category="paragraph-title">次の手順</block>
  <block id="0d500821bdc96d479f52180017fd421c" category="paragraph"><block ref="0d500821bdc96d479f52180017fd421c" category="inline-link-macro-rx"></block></block>
  <block id="48b45c4448ac737e7cd5110c5c5ab986" category="paragraph">ノード 1 を廃止するには、自動操作を再開してノード 2 との HA ペアを無効にし、ノード 1 を適切にシャットダウンします。手順の後半で、ラックまたはシャーシから node1 を取り外します。</block>
  <block id="fdece49a53b4d22867330bbf853edcbb" category="paragraph">ノード 1 を廃止した後、ノード 1 の電源がオフになっており、ネットワークに接続されていないことを確認します。 node1 と node2 の両方のアップグレードが完了するまで、node1 の古いハードウェアをこの状態のままにしておきます。その後、ノード1を廃止することができます。<block ref="0f82d37b39d321fc9b25cdd372b37e32" category="inline-link-macro-rx"></block> 。</block>
  <block id="9385d14007f76e744745739d94bc306a" category="paragraph">ノード2を廃止した後、電源がオフになっており、ネットワークに接続されていないことを確認します。 node1 と node2 の両方のアップグレードが完了するまで、node2 の古いハードウェアをこの状態のままにしておきます。その後、ノード2を廃止することができます。<block ref="0f82d37b39d321fc9b25cdd372b37e32" category="inline-link-macro-rx"></block> 。</block>
  <block id="3df2e25dd62a653c7cb81686296e66ad" category="admonition">シャーシの電源はすでにオンになっているため、node2 は完全に装着されるとすぐに BIOS 初期化を開始し、続いて AUTOBOOT を開始します。ノード 2 のブートを中断するには、コントローラ モジュールをスロットに完全に挿入する前に、シリアル コンソールと管理ケーブルをノード 2 コントローラ モジュールに接続することをお勧めします。</block>
  <block id="0c1a4b73743825276f6a94f00753ae1c" category="list-text">モジュールが装着されたらすぐにシリアル コンソールを接続し、ノード 2 の AUTOBOOT を中断する準備をします。</block>
  <block id="b83800b3bdc2a5eef7a8fe97664b1121" category="paragraph">アップグレード用に受け取ったAFF A90またはAFF A70コントローラ モジュールをノード 2 にインストールします。  Node2 は、システムの背面からコントローラを見たときにシャーシの下側のベイにあるコントローラ B です。</block>
  <block id="4e0d7c1abfb8de7fd56ae6e56c1b7b4b" category="list-text">シャーシの前面で、親指を使って各ドライブを上部と下部のディスク ベイに、確実に止まるまでしっかりと押し込みます。これにより、ドライブがシャーシのミッドプレーンにしっかりと固定されます。</block>
  <block id="a3fa441608c8038d19e72ef43c8108bc" category="section-title">システムコントローラの交換操作を再開します</block>
  <block id="20d8255eb490088576c2cdeea2fb6e2a" category="list-text">ノード 2 コントローラー モジュールの電源をソースから取り外します。</block>
  <block id="db799964060c84b9e9d008dc6cc8932c" category="paragraph">集約の再配置に失敗したり、拒否されたりした場合は、集約を手動でノード 3 に再配置するか、必要に応じて拒否または宛先チェックのいずれかをオーバーライドする必要があります。</block>
  <block id="06319e499e839b6b47d478534e06e04d" category="paragraph">エラーのため、システムは再配置操作を一時停止します。</block>
  <block id="a714a70d76bf440021da99c44775bfa1" category="paragraph"><block ref="a923abe052d004a085e2eb84b92a105b" prefix="" category="inline-code"></block></block>
  <block id="c6a56a02692a522600801db238a7506a" category="cell">次のコマンドを使用します。<block ref="a7a60d858b053f311f5ee30c3d684eb6" prefix=" " category="inline-code"></block></block>
  <block id="8d3072fe7ea0dbdca9d33b84c62569b8" category="cell">次のコマンドを使用します。<block ref="687244c84fcc33f57d32e491908871ed" prefix=" " category="inline-code"></block></block>
  <block id="0e967750f4d977e25c400b1d5a47dcec" category="paragraph">集約の再配置に失敗したり、拒否されたりした場合は、集約を手動でノード 2 に再配置するか、必要に応じて拒否または宛先チェックのいずれかをオーバーライドする必要があります。</block>
  <block id="fad33e6e3139be661155899e75925025" category="paragraph"><block ref="556e03894e424730dfb0dcf9dca97389" prefix="" category="inline-code"></block></block>
  <block id="cbe1d8b8b7f4209d91ce341d93923d12" category="cell">次のコマンドを使用します。<block ref="eee95ab9f20f57d6a401c786895c4b0a" prefix=" " category="inline-code"></block></block>
  <block id="c2df8054edfb63248d8062dc88450726" category="cell">次のコマンドを使用します。<block ref="9c49d0bcfd4ed485f0a5572381fe5f1c" prefix=" " category="inline-code"></block></block>
  <block id="c3ce6809be6bdc67ae978395484d0585" category="open-title">ONTAP 9.8 以降</block>
  <block id="e56eaa49d9510fbdda2abdf778602edf" category="paragraph">手動 ARL アップグレードは、 ONTAP 9.8 以降を実行している次のシステムでサポートされています。</block>
  <block id="d750887602e48c1bc1778029d3d6f08c" category="open-title">ONTAP 9.7以前</block>
  <block id="102a8cb20c44f114b165f8482298538c" category="paragraph">手動 ARL アップグレードは、 ONTAP 9.7 以前を実行している次のシステムでサポートされています。</block>
  <block id="31263e6149bd28b019471accf69bf287" category="list-text">[[reassign-node1-node3-step1]]ノード1がブートメニューで停止していることを確認し、ノード1のディスクをノード3に再割り当てします。</block>
  <block id="7396ec479d029f0444ae3b381b68cb1c" category="paragraph"><block ref="b4ab52f7185d092e3aa56aaa9905e7e1" prefix="" category="inline-code"></block></block>
  <block id="02ec5be95fd5339f0ef7b4ff71f76408" category="list-text">システムが再起動ループに入り、メッセージが表示された場合は<block ref="bc1d3ad68c46835686e44d5c5c600a71" prefix=" " category="inline-code"></block>これは、ポートがターゲット モードにリセットされ、ディスクが認識されなくなるためです。実行する<block ref="af3afcd2ec5c54edc4e5ed75b4a39733" category="inline-xref-macro-rx"></block>に<block ref="c9ad15d95077080d869d1e4c8360803a" category="inline-xref-macro-rx"></block>この問題を解決するには、ノード 3 で実行します。</block>
  <block id="fae2ed26c8f6134724935097b57380f2" category="list-text">[[auto_check3_step9]]外部ディスクを備えたシステムから内部ディスクと外部ディスクをサポートするシステム（AFF A800システムなど）にアップグレードする場合は、node1 アグリゲートをルート アグリゲートとして設定し、node3 が node1 のルート アグリゲートから起動することを確認します。ルートアグリゲートを設定するには、ノード3のブートメニューに移動し、オプションを選択します。<block ref="e4da3b7fbbce2345d7772b0674a318d5" prefix=" " category="inline-code"></block>メンテナンスモードに入ります。</block>
  <block id="e726a0a84a80e2f3e8d43a808363f626" category="list-text">[[reassign-node2-node4-step1]]ブート メニューで node2 が停止していることを確認し、node2 のディスクを node4 に再割り当てします。</block>
  <block id="e8d3a2ab558d4d58409a8816cc44f371" category="list-text">システムが再起動ループに入り、メッセージが表示された場合は<block ref="bc1d3ad68c46835686e44d5c5c600a71" prefix=" " category="inline-code"></block>これは、ポートがターゲット モードにリセットされ、ディスクが認識されなくなるためです。実行する<block ref="ec97abb56cfbce2d136fcc09be065a07" category="inline-xref-macro-rx"></block>を通して<block ref="3d86a68aa8fb2ef1661a4814f02f3b64" category="inline-xref-macro-rx"></block>この問題を解決するには、ノード 4 で実行します。</block>
  <block id="28c9c114032aec362da7cc95e208f89c" category="list-text">[[auto_check_4_step9]]外部ディスクを備えたシステムから内部ディスクと外部ディスクをサポートするシステム（AFF A800システムなど）にアップグレードする場合は、node2 アグリゲートをルート アグリゲートとして設定し、node4 が node2 のルート アグリゲートから起動することを確認します。ルートアグリゲートを設定するには、ノード4のブートメニューに移動し、オプションを選択します。<block ref="e4da3b7fbbce2345d7772b0674a318d5" prefix=" " category="inline-code"></block>メンテナンスモードに入ります。</block>
  <block id="5e16852c6347cc7821c73fac4fe85423" category="list-text">答え<block ref="415290769594460e2e485922904f345d" prefix=" " category="inline-code"></block>混合プラットフォームの確認プロンプトが表示されます。</block>
  <block id="925fdd27e6c272d3e20a76ac000b55e6" category="list-text">ノードがブート メニューで停止した場合は、node1 で次のコマンドを実行して、古い node1 ディスクを交換用の node1 に再割り当てします。</block>
  <block id="3e116b6b6becaa5d613ea62aac34daa1" category="list-text">ノードがブート メニューで停止した場合は、node2 で次のコマンドを実行して、古い node2 ディスクを交換用の node2 に再割り当てします。</block>
  <block id="4b918c9d048f1e7cccba5045af08906f" category="paragraph">ステージ 6 では、アップグレードされたシステム モジュールを使用してノード 2 を起動し、アップグレードされたノード 2 のインストールを確認します。NVE を使用している場合は、キー マネージャーの構成を復元します。スイッチ接続クラスタのアップグレードでは、クラスタ スイッチ参照構成ファイル (RCF) が共有クラスタ/HA ポートをサポートしていることを検証する必要があります。また、ノード 1 の非ルート アグリゲートと NAS データ LIF をノード 1 からアップグレードされたノード 2 に再配置し、SAN LIF がノード 2 に存在することを確認します。</block>
  <block id="c0bcc09c60945f6339a1913adf9e706f" category="summary">ONTAP 9.15.1以降を実行しているコントローラをアップグレードするときに、障害が発生したアグリゲートまたは拒否されたアグリゲートを手動でノード1に再配置します。<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block>コマンド。</block>
  <block id="abf895e50524754359302c9598336b90" category="doc">障害が発生した、または拒否されたアグリゲートをノード1に再配置します。</block>
  <block id="25badd8e4c783995863fb7fe9b690c73" category="paragraph">アグリゲートの再配置に失敗した場合、または拒否された場合は、アグリゲートを手動でノード 1 に再配置するか、必要に応じて拒否または宛先チェックのいずれかをオーバーライドする必要があります。</block>
  <block id="55fc253f57e13795f000be8434340bcc" category="paragraph"><block ref="f0b8ecf91bc7772176817aae0a0e4ebf" prefix="" category="inline-code"></block></block>
  <block id="cea57067baab669fd34980bc0ce682b7" category="cell">次のコマンドを使用します。<block ref="d07352fc16fc07770c0b5027b84f5002" prefix=" " category="inline-code"></block></block>
  <block id="b1fc68c2ec4e2a62b5d43e002273f1cc" category="cell">次のコマンドを使用します。<block ref="b10c3e4b908f6d6ad18a3073c3ada943" prefix=" " category="inline-code"></block></block>
  <block id="62e63a4fa6321f1da2670df26249655f" category="summary">ARL を使用して同じシャーシ内のコントローラ モデルをアップグレードする場合は、障害が発生したアグリゲートまたは拒否されたアグリゲートをノード 2 に再配置します。</block>
  <block id="174d731b1608e463d92ed4bd05c2494a" category="doc">障害が発生した、または拒否されたアグリゲートをノード2に再配置します。</block>
  <block id="b8a4db3aa3a0b5269b2d3b23174abda1" category="list-text">[[reassign-node1-node3-app-step1]]ノード1がブートメニューで停止していることを確認します。ノード1のディスクをノード3に再割り当てします。</block>
  <block id="b4f314eeddcfde8f1ee2e9a2d8642f3e" category="list-text">システムが再起動ループに入り、メッセージが表示された場合は<block ref="bc1d3ad68c46835686e44d5c5c600a71" prefix=" " category="inline-code"></block>これは、システムが FC または UTA/UTA2 ポートをターゲット モードにリセットしたため、ディスクが認識されないことを示します。この問題を解決するには、次のいずれかのタスクを選択してください。</block>
  <block id="a5c761e5bafe5ee1b3582d84531a0e0a" category="list-text">実行する<block ref="8266acaa2ec393b5b0120a81f114e7db" category="inline-xref-macro-rx"></block>に<block ref="0faed76141a6cb4a723aa66a5d852e5d" category="inline-xref-macro-rx"></block>ノード3上</block>
  <block id="c5c04ed501bd4b102375bcf493db0279" category="list-text">セクションへ移動<block ref="35ed01fca1dde6c35ca197b89d2bbfc7" category="inline-link-macro-rx"></block></block>
  <block id="7eb5b843027ba85fc0d1c5a23a40eefe" category="list-text">[[reassign-node2-node4-app-step1]]ノード2がブートメニューで停止していることを確認し、ノード2のディスクをノード4に再割り当てします。</block>
  <block id="e1854caaca3d758431b5e09931748497" category="list-text">実行する<block ref="580e238d2ca8d0bd3f71a9c3eb7b6616" category="inline-xref-macro-rx"></block>に<block ref="79bd087280897d4f7e3333262b04aa6c" category="inline-xref-macro-rx"></block>ノード4上</block>
  <block id="851fe1371a4738d913b537926e76da6f" category="list-text">セクションへ移動<block ref="3a339ed5bdc85366b677c546716fabfa" category="inline-link-macro-rx"></block></block>
  <block id="a701cad6dff89a3f059496ff3d04e63d" category="list-text">[[reassign-node2-node4-app-step9]] 外部ディスクを備えたシステムから内部ディスクと外部ディスクをサポートするシステム（AFF A800システムなど）にアップグレードする場合は、node2 アグリゲートをルート アグリゲートとして設定し、node4 が node2 のルート アグリゲートから起動するようにします。ルートアグリゲートを設定するには、ノード4のブートメニューに移動し、オプションを選択します。<block ref="e4da3b7fbbce2345d7772b0674a318d5" prefix=" " category="inline-code"></block>メンテナンスモードに入ります。</block>
  <block id="992f0c14586c62ecc00b3a344a5839c1" category="summary">ONTAP 9.8以降を実行しているコントローラをアップグレードするときに、障害が発生したアグリゲートまたは拒否されたアグリゲートをノード2に手動で再配置します。<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block>コマンド。</block>
  <block id="6d31ec7f9207b8dd1eac3d42d25dd52b" category="summary">ONTAP 9.8以降を実行しているコントローラをアップグレードするときに、障害が発生したアグリゲートまたは拒否されたアグリゲートを手動でノード3に再配置します。<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block>コマンド。</block>
  <block id="e4a34fcd3be9d1c97af701d3702dc629" category="doc">障害が発生した、または拒否されたアグリゲートをノード3に再配置します。</block>
  <block id="ede36164b17cdfd91404d9be823e00b6" category="list-text">node3 がブート メニューで停止したら、node3 で次のコマンドを実行して、node1 のディスクを node3 に再割り当てします。</block>
  <block id="41982d264a2a2a5af9a67f777e02916a" category="list-text">[[auto_check_4_step11]]ノード 4 がブート メニューで停止したら、ノード 4 で次のコマンドを実行して、ノード 2 のディスクをノード 4 に再割り当てします。</block>
  <block id="1e1ddf24bfeddc76d571c4800f2d82ad" category="summary">ONTAP 9.15.1以降を実行しているコントローラをアップグレードするときに、障害が発生したアグリゲートまたは拒否されたアグリゲートを手動でノード2に再配置します。<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block>コマンド。</block>
  <block id="3129d56ef5cc88b17f6e15c1da3476f1" category="summary">ONTAP 9.15.1以降を実行しているコントローラをアップグレードするときに、障害が発生したアグリゲートまたは拒否されたアグリゲートを手動でノード3に再配置します。<block ref="616743bfa4fd61d558c556fe614cb2e9" prefix=" " category="inline-code"></block>コマンド。</block>
  <block id="39bb0497bdbb1e04586599bcfb4c0318" category="summary">FAS2820ノード 1 を DS212C ドライブ シェルフに変換し、ノード 3 に接続してから、ノード 1 からノード 3 にドライブを再割り当てします。</block>
  <block id="6d8572f1d7fdac9c27f62e363921947c" category="doc">FAS2820ノード1をドライブシェルフに変換し、ノード3に接続します。</block>
  <block id="663fdf50ecba63371090c62811c866ac" category="paragraph">FAS2820ノード 1 を DS212C ドライブ シェルフに変換します。ノード 1 からノード 3 にドライブを再割り当てする前に、ノード 3 に接続します。</block>
  <block id="8fe56965007c8482ebfb12c197c02d7e" category="list-text">FAS2820シャーシからノード 1 を削除します。</block>
  <block id="a315276c33006971edc828b2d5f48c91" category="list-text">IOM12 または IOM12B モジュールをノード 1 のベイに挿入します。</block>
  <block id="fcef638e0d5cb441f69abe1851a71025" category="list-text">ノード 3 SAS ポートを IOM12 または IOM12B モジュールの使用可能なポートにケーブル接続します。参照<block ref="9c839fcdfb8699a63c787254d7b1ae03" category="inline-link-macro-rx"></block>システムの SAS ポートを確認します。参照<block ref="9c839fcdfb8699a63c787254d7b1ae03" category="inline-link-macro-rx"></block>システムの SAS ポートを確認します。</block>
  <block id="9aa378ddd116d4c0628d0af695d9cc17" category="list-text">ノード 4 のクラスター ポートをノード 3 の任意のクラスター ポートに接続して、一時的なクラスター接続を作成します。</block>
  <block id="3936d65ca4d32956127070b6e56b2e64" category="admonition">node3 が 10GbE クラスター接続のみをサポートしている場合は、一時的なクラスター接続を作成するには 10GbE ケーブルが必要です。</block>
  <block id="a369db1a615acf5202411aa57b6b0a3d" category="paragraph"><block ref="a369db1a615acf5202411aa57b6b0a3d" category="inline-link-macro-rx"></block></block>
  <block id="2ad020d481d0a25e01559a9e966da553" category="summary">ノード 2 (FAS2820) を DS212C ドライブ シェルフに変換し、ノード 4 に接続します。</block>
  <block id="d1257ec65502e0686c1e2a24a928f8f4" category="doc">FAS2820ノード2をドライブシェルフに変換し、ノード4に接続します。</block>
  <block id="e5478c453b4e355829aeee75f0775944" category="paragraph">FAS2820ノード2 を DS212C ドライブ シェルフに変換します。ノード 2 からノード 4 にドライブを再割り当てする前に、ノード 4 に接続します。  Node1 と node2 は、DS212C シェルフ内のコントローラーです。</block>
  <block id="64f46bf8cb3f756ca2a4b5e8380b0b81" category="list-text">FAS2820シャーシからノード2 を取り外します。</block>
  <block id="ea390a7342e757edb35e4cfe75d8ecdb" category="list-text">IOM12 または IOM12B モジュールをノード 2 のベイに挿入します。</block>
  <block id="1a7776196607803ade98b6e8e9df8344" category="list-text">ノード 4 のシリアル接続 SCSI (SAS) ポートを IOM12 または IOM12B モジュールの使用可能なポートにケーブル接続します。参照<block ref="9c839fcdfb8699a63c787254d7b1ae03" category="inline-link-macro-rx"></block>システムの SAS ポートを確認します。</block>
  <block id="725e2ebaa93fe8f09185c00e43898f5f" category="list-text">ノード 1 のポート e0a と e0b をノード 4 の任意の 2 つの 25GbE ポートに接続して、一時的なクラスター接続を作成します。</block>
  <block id="86f6785d45d16c2b0ff31a1179934c9f" category="admonition">node4 が 10GbE クラスター接続のみをサポートしている場合は、一時的なクラスター接続を作成するには 10GbE ケーブルが必要です。</block>
  <block id="bb7601ffb9123f9786cdac8af94211f0" category="paragraph"><block ref="bb7601ffb9123f9786cdac8af94211f0" category="inline-link-macro-rx"></block></block>
  <block id="1e74494f5772c735812d575a898596c1" category="summary">各ノードを DS212C ドライブ シェルフに変換し、交換用ノードに接続することで、 FAS2820への無停止アップグレードを実行します。</block>
  <block id="ab73d8c2e94481a6ff48a7c91868d2c2" category="doc">DS212Cドライブシェルフへの変換によるFAS2820からのアップグレード</block>
  <block id="b013bc2ad201f8e021040fd0a4c8d714" category="paragraph">各ノードを DS212C ドライブ シェルフに変換し、それを交換ノードに接続することで、 NetApp FAS2820の無停止アップグレードを実行できます。</block>
  <block id="9b4eafb4e3bcfaad97fc5e7af7aa1955" category="paragraph">この手順では、 FAS2820高可用性 (HA) ペア コントローラは node1 および node2 と呼ばれ、交換用 HA ペア コントローラは node3 および node4 と呼ばれます。</block>
  <block id="d1d868e382ab4b08e3be5f07e03e038d" category="paragraph-title"><block ref="58f667aaf05f87159670e12bd9bc076b" category="inline-image-macro-rx" type="image"></block><block ref="91744e9af34171046ee51e4df1cdf2ab" category="inline-xref-macro-rx"></block></block>
  <block id="8313cf9b12eae77b602124631070e7c4" category="paragraph">FAS2820ノード 2 をドライブ シェルフに変換する前に、ノード 2 の論理インターフェイス (LIF) とデータ アグリゲートをノード 1 に移行します。</block>
  <block id="58169b6641f5811fe5a42525bb985f58" category="paragraph-title"><block ref="54f425ce8d89f4ed6b8a546561af5d60" category="inline-image-macro-rx" type="image"></block><block ref="9ad99f16aefbb0da0c8192358055567b" category="inline-xref-macro-rx"></block></block>
  <block id="34e12f96079e8f2641f0bc5f76a14f3b" category="paragraph">FAS8280 ノード 2 を DS212C ドライブ シェルフに変換し、ノード 4 に接続してから、ノード 2 からノード 4 にドライブを再割り当てします。</block>
  <block id="0054cc808f512bbb3f118ca4abd076c2" category="paragraph-title"><block ref="05b2444faffd66d76e88602ea7dd353f" category="inline-image-macro-rx" type="image"></block><block ref="d3f3d357ab78b548fc1601824fb28e41" category="inline-xref-macro-rx"></block></block>
  <block id="5a6af6abdd490940dc1f9df9cde04966" category="paragraph">FAS2820ノード 2 を DS212C ドライブ シェルフに変換し、ノード 4 に接続した後、以前ノード 2 に属していたドライブをノード 4 に再割り当てします。</block>
  <block id="48f978643e148ed2cc94db905b383041" category="paragraph-title"><block ref="beadfa85a2fdca06b91edc1131c603e6" category="inline-image-macro-rx" type="image"></block><block ref="02b623c9dbb2d160132ae446a4c7a0c7" category="inline-xref-macro-rx"></block></block>
  <block id="009ec9a2eb4000ba1aeab38e275d3dd4" category="paragraph">FAS2820ノード 1 をドライブ シェルフに変換する前に、ノード 1 のデータ アグリゲート、イプシロン、および LIF をノード 4 に移行します。</block>
  <block id="26def2138cc961c62254cd174c55a771" category="paragraph-title"><block ref="99e8b2f00e172bfcff96afdce69907bc" category="inline-image-macro-rx" type="image"></block><block ref="9c43bd8b004df1da7b21ce814f6eafc2" category="inline-xref-macro-rx"></block></block>
  <block id="fc0b4fd01b008060b7a81ca3f154ea4b" category="paragraph">FAS2820ノード 1 を DS212C ドライブ シェルフに変換し、ノード 3 に接続してから、ノード 1 からノード 3 にドライブを再割り当てします。</block>
  <block id="a382921dc03bfcb77c9d970e45fe1495" category="paragraph-title"><block ref="ef78558f80439832e0f51cc22cee8b8c" category="inline-image-macro-rx" type="image"></block><block ref="9773b7b5ae1a3a9b51916da2f5695c60" category="inline-xref-macro-rx"></block></block>
  <block id="d794a00a08edf3e003b5895b03494ddf" category="paragraph">FAS2820ノード 1 を DS212C ドライブに変換し、ノード 3 に接続した後、以前ノード 1 に属していたドライブをノード 3 に再割り当てします。</block>
  <block id="850e71b118b51db23f5fa234e21d6eef" category="paragraph-title"><block ref="36915574c413876eaa75cbd48f69fd00" category="inline-image-macro-rx" type="image"></block><block ref="c1ca954fc21d09fcd7cbc3b5808e040e" category="inline-xref-macro-rx"></block></block>
  <block id="3ac3cdc91bfaa2a43c0fca9946253b03" category="summary">ノード 1 のデータ アグリゲート、イプシロン、および論理インターフェイス (LIF) をノード 4 に移行します。</block>
  <block id="39e528beab0388f2308ca06481682fe6" category="doc">FAS2820ノード1上のデータアグリゲート、イプシロン、LIFをノード4に移行する</block>
  <block id="ec407094615b8064b7141eebdc4faf0a" category="paragraph">FAS2820ノード 1 上のデータ アグリゲート、イプシロン、および論理インターフェイス (LIF) をノード 4 に移行します。</block>
  <block id="70431d2a3b3171dc183ad62c2cdf164e" category="paragraph">ノード4 で次の手順を実行します。</block>
  <block id="29ef9d409bfc5bf6a0af1a52e7e295a9" category="list-text">node4 の LOADER プロンプトで、パートナー システム ID を設定します。</block>
  <block id="9732d4a7f425483bed6ea088b429c321" category="list-text">パートナーのシステム ID を確認します。</block>
  <block id="48aa8461c43c6d434c042a1f7cd26163" category="list-text">変更を保存します。</block>
  <block id="58ce42757edc7d65f7aa335facfe4c55" category="list-text">ブートメニューでオプションを選択<block ref="1fbad292f1d0674d5769c555d41b2d77" prefix=" " category="inline-code"></block>/var ファイル システムを node4 に復元します。</block>
  <block id="877e27c2d322a599ffdd08c891c17100" category="paragraph">FAS2820 を交換用コントローラにアップグレードするときにシステム クラスタ ポートが類似していない場合は、ノード 4 のインターフェイスを一時的にクラスタ ポートに変更する必要がある場合があります。</block>
  <block id="5d7325b4306827947502da22033698f9" category="list-text">クラスターがクォーラムに達するまで待機し、クラスター ノードが正常であることを確認します。</block>
  <block id="fce12fccf3a26cbb691acedd9868fc28" category="list-text">アップグレードするFAS2820クラスタでインターフェイス グループとデータ VLAN が使用されている場合にのみ、この手順を完了してください。それ以外の場合は、<block ref="5a1eec99d6beb6e9faa992f0e22335e5" category="inline-xref-macro-rx"></block> 。</block>
  <block id="16a9d0a644dc77426403978271fa8238" category="paragraph">交換用コントローラーの物理ネットワーク ポート名は、 FAS2820のものとは異なります。これにより、VLAN が置き換えられ、ノード 4 上のインターフェース グループが誤って構成される可能性があります。</block>
  <block id="c3e7a5e32bd2e11679ed6235b2adbd21" category="list-text">置き換えられた VLAN を表示します。</block>
  <block id="577eb353d2dda6749c18595dad185a0e" category="list-text">置き換えられた VLAN を復元します。</block>
  <block id="04b8389fdd361eb809430c42f4624631" category="list-text">誤って構成されたインターフェース グループを修正します。 FAS2820とアップグレードするコントローラー間のポート名は異なる場合があります。正しいメンバー ポートを使用してインターフェイス グループを更新します。</block>
  <block id="5c884dd6b97d69df3e1af4a24ee863bc" category="list-text">データ集計ステータスを表示します:</block>
  <block id="01392697d52d1d375332f041d834fead" category="list-text">イプシロンを node1 から削除し、node4 に移動して移行します。</block>
  <block id="118cd161d4f37abbb3a8c4baec04ed48" category="list-text">クラスターのステータスを表示して、イプシロンの変更を確認します。</block>
  <block id="9ad3f03c93e9dcbdf6be7194a18902d9" category="list-text">LIFがダウンしている場合は、その管理ステータスを<block ref="46c48bec0d282018b9d167eef7711b2c" prefix=" " category="inline-code"></block>各 LIF に対して次のコマンドを 1 回入力します。</block>
  <block id="df891edbd6b0f00d98d3d2376a067122" category="paragraph"><block ref="df891edbd6b0f00d98d3d2376a067122" category="inline-link-macro-rx"></block></block>
  <block id="e0a957b08ecb5a9fd1e825f68f0e64dc" category="summary">ノード 2 をドライブ シェルフに変換する前に、 FAS2820ノード 2 上の論理インターフェイス (LIF) とデータ アグリゲートをノード 1 に移行します。</block>
  <block id="601722b4c9c69820b9d720c8c940f724" category="doc">FAS2820ノード2のLIFとデータアグリゲートをノード1に移行する</block>
  <block id="7d37ff2d3a9b0f3b21eda882f20eaae5" category="list-text">FAS2820と交換用コントローラには、可能な場合は同じONTAPリリースとパッチ バージョンがあります。参照<block ref="f73c85a53b5d65cc9c35da0b9e0d2f09" category="inline-link-rx"></block>サポートされているONTAPリリースの場合。</block>
  <block id="80cd304d38e2aed4d842aa1630bc0dad" category="list-text">FAS2820システムのONTAPバージョンと一致させるには、ノード 3 とノード 4 にONTAPバージョンをネットブートしてインストールする必要があります。  Node3 と node4 は交換用コントローラーです。</block>
  <block id="80c7e88957d9462b8f6fac12ec261b8d" category="list-text">node3 コントローラと node4 コントローラのプライマリ ブート イメージとバックアップ ブート イメージの両方に同じONTAPバージョンが必要です。</block>
  <block id="adc2a6d6f08e30b20353435634048f79" category="list-text">ノード3とノード4の残りのクラスタ構成をクリアするには、<block ref="b433b76417b4f08166eb90cef3aa2a31" prefix=" " category="inline-code"></block>ブートメニューから。</block>
  <block id="da1ea0ee367c83a05341c10eb92921b5" category="list-text">両方の交換用コントローラは、LOADER プロンプトでスタンバイ状態になります。</block>
  <block id="9cdda3ac4f8a5af7408c9611f78f7bf9" category="list-text">必要なケーブルはすべて揃っています。</block>
  <block id="4465c00fc828473105f269a899d79c21" category="paragraph">次の手順は、 FAS2820ノード 1 で実行されます。</block>
  <block id="5965c3c2057d5bfeb9e7cd6aa1da843d" category="list-text">クラスターhaを無効にする:</block>
  <block id="2e82d870a2b26cff3089793672f0342d" category="paragraph"><block ref="2e82d870a2b26cff3089793672f0342d" category="inline-link-macro-rx"></block></block>
  <block id="70213ce8df6f326c8c858906eda1740c" category="summary">アップグレードを完了するには、FAS2820node3 を node4 に接続し、node4 のデータ論理インターフェイス (LIF) とデータ アグリゲートを node3 に移行します。</block>
  <block id="ac03f0a9aed6d7cc8cc2f9aa06ab5c2f" category="doc">FAS2820ノード4のLIFとデータアグリゲートをノード3に移行する</block>
  <block id="798b92db311a432e12d579940612d93b" category="paragraph">アップグレードを完了するには、 FAS2820ノード 3 をノード 4 に接続し、ノード 4 のデータ論理インターフェイス (LIF) とデータ アグリゲートをノード 3 に移行します。</block>
  <block id="546ad9f8a047416e6263ed28b1b6a61c" category="paragraph">node3 で次の手順を実行します。</block>
  <block id="a76e7f8c364a7e27930ee7ff49df6e37" category="list-text">クラスターと HA ポートがノード 3 とノード 4 の間で接続されていることを確認します。</block>
  <block id="6052d7b32607b02e8d7092b4374824ed" category="list-text">ノード3とノード4のクラスターとHAポートを表示します。</block>
  <block id="32710cda7c5dad348e2b2e03cf81d971" category="list-text">両方のノード上のすべてのクラスタ ネットワーク LIF を計画したホーム ポートに移行します。</block>
  <block id="6ac170d19dd75b39a772cfb2159effe2" category="list-text">クラスタ ネットワーク LIF のホーム ポートを構成します。</block>
  <block id="8bd5f2b46faa7afe1f8b5fde87fe58a7" category="list-text">ノード 3 用のすべてのデータ LIF をノード 3 に移行します。</block>
  <block id="d4ea258ab4e2dcf20e7e9f102a6ce502" category="list-text">すべてのデータ LIF のホーム ノードとホーム ポートを構成します。  LIFがダウンしている場合は、その管理ステータスを<block ref="46c48bec0d282018b9d167eef7711b2c" prefix=" " category="inline-code"></block>各 LIF に対して次のコマンドを 1 回入力します。</block>
  <block id="ab72b255e3349ae141f76089ccc6a9bd" category="list-text">2 ノード クラスターでクラスターの高可用性を有効にします。</block>
  <block id="98ec39406efb767f83dc79971d983c15" category="list-text">ノード3とノード4のストレージフェイルオーバーを有効にして検証します。</block>
  <block id="a04136bb695577e89cb64bd8d566305d" category="list-text">node3 が所有する必要がある node4 が所有するデータ集約を移行します。</block>
  <block id="7ff9c5727fd29deb9cd8032b2551cd2b" category="admonition">クラスター レポート出力では、ノードが別のノードに属するアグリゲートを誤って所有している可能性があります。この問題が発生した場合は、クラスターの両側からテイクオーバーとギブバックを実行します。</block>
  <block id="b7ed6d2578c289a342dff3870c0458e4" category="doc">FAS2820ノード1からノード3にドライブを再割り当てします</block>
  <block id="67242858a5a960ad59c4112deff89a57" category="paragraph">以前FAS2820ノード 1 に割り当てられていたドライブをノード 3 に再割り当てします。</block>
  <block id="2cc2671439ba3e907dc353e6fa9e2f82" category="paragraph">メンテナンス モードのプロンプトが表示されます。</block>
  <block id="50ef837b20ef82f8d6c3ad3818c7e3b9" category="list-text">ローカル システム ID 値を記録します。これは、ノード 3 のシステム ID です。また、「OWNER」列から node1 と node4 のシステム ID を記録します。</block>
  <block id="fc626981b1ece2c6c05c047f46bbfcbf" category="open-title">ディスク全体を使用する場合</block>
  <block id="337d79852891a37d41285c9101c3fff4" category="paragraph">次のコマンドを実行します。</block>
  <block id="17c26bafe75c18b3bcd768f9147f1213" category="open-title">パーティション化されたディスクを使用している場合</block>
  <block id="7a276578eb1d5f5ba51a40f9a3c06c94" category="admonition">ドライブが表示されない場合は、*停止*してテクニカル サポートに連絡して支援を受けてください。</block>
  <block id="f2301c41e07cf933742b943a7d3ecb4e" category="paragraph"><block ref="f2301c41e07cf933742b943a7d3ecb4e" category="inline-link-macro-rx"></block></block>
  <block id="c76f454b1b8b44e22cf7a34d06691591" category="doc">FAS2820ノード2からノード4にドライブを再割り当てする</block>
  <block id="52ce99ed56c027ff91b3e909018de81d" category="paragraph">以前FAS2820ノード 2 に属していたドライブをノード 4 に再割り当てします。</block>
  <block id="e5549cfce8a8e0264f304166398e83fb" category="list-text">すべてのドライブをノード 2 からノード 4 に再割り当てします。</block>
  <block id="08ca03a8874a1a38c5541456cb7a250f" category="paragraph"><block ref="08ca03a8874a1a38c5541456cb7a250f" category="inline-link-macro-rx"></block></block>
  <block id="c2dd662463f4b0b3f6efeb80332e50d6" category="list-text"><block ref="1aa042908822fc17e30db57dc8f3c350" category="inline-link-macro-rx"></block>（非破壊的手順）</block>
  <block id="d81919377c1c1774d8ca7b45cc02103c" category="inline-link-macro">ドライブシェルフへの変換によるFAS2820からのアップグレード</block>
  <block id="8b2e9677889c0f0b26cd5e5a2e524532" category="list-text"><block ref="f9bfe9dff8f74d561bd9015eaa95aca7" category="inline-link-macro-rx"></block>（非破壊的手順）</block>
  <block id="ed58851cec153c1db74f982f7968d38c" category="inline-link-macro">AFF A250をドライブシェルフに変換し、 AFF A400にアップグレードします</block>
  <block id="a0d4e0637e12b87691937ec2f86fe18e" category="list-text"><block ref="182a6b47297b5fcc5de9721f7f6d6e2c" category="inline-link-macro-rx"></block>（非破壊的手順）</block>
  <block id="af72e67cdd4847ff8df836082e1ecd28" category="sidebar">AFF A250をAFF A400にアップグレード</block>
  <block id="6a6bad6107988979a4c7bb4f9b6e3f47" category="sidebar">AFF A250からAFF A400へのアップグレードについて</block>
  <block id="1c89ca7629177ffaec440b31de61e887" category="sidebar">FAS2820からのアップグレード</block>
  <block id="10952bb20745dcf0f30d5dd264d03924" category="sidebar">FAS2820からのアップグレードについて</block>
  <block id="220b7076a9e851bf1e13056c1e583d05" category="paragraph">使用することができます<block ref="773b5d44fd1b5ae080ff3a379be13169" prefix=" " category="inline-code"></block>次の出力例に示すように、現在のポート構成を表示または確認するには、コマンドを使用します。</block>
  <block id="c594ac60ecfaa8945df018f2ca32a141" category="admonition">UTA/UTA2 ポートを構成するには、メンテナンス モードになっている必要があります。このセクションのコマンドをメンテナンス モードのシェル プロンプトで入力します。</block>
  <block id="d5f0cabb5a163f2af827009890866160" category="list-text">UTA/UTA2 ポート設定を確認します。</block>
  <block id="beaeb1b2c5fc204b2484aafd9e9f6f0d" category="paragraph">出力を調べて、UTA/UTA2 ポートに必要な特性があるかどうかを判断します。</block>
  <block id="5962a796ca572c6b0011450c60d621d4" category="paragraph">次の例の出力は、アダプタ「1b」のタイプがイニシエーターに変更され、アダプタ「2a」と「2b」のモードが「cna」に変更されていることを示しています。  CNA モードでは、カードをネットワーク アダプタとして使用できます。</block>
  <block id="053506df2d6bd471d3a1f3825e80a99b" category="cell">行きます <block ref="a777e0610e99ffeb84340abf2e20d6b9" category="inline-xref-macro-rx"></block>。</block>
  <block id="9101e07b7198a3b70bd0f52befdab323" category="cell">ステップ4からステップ8をスキップして、<block ref="507f599b2e258f18809a90b59e54fc15" category="inline-xref-macro-rx"></block> 。</block>
  <block id="cb67be816cb33ec83c5f54600baa76d7" category="list-text">[[auto_check3_step4]]次のいずれかのアクションを実行します。</block>
  <block id="e212342c243be552531d1bb84b0017d2" category="cell">へ移動<block ref="e33bb2c935af60d67309f774bd9b33e2" category="inline-xref-macro-rx"></block></block>
  <block id="57a2cdf3b3dc9766dd15cf3fc167ebba" category="cell">ステップ5をスキップして<block ref="56fda18004a1ae4a50f11b5c9c8283e3" category="inline-xref-macro-rx"></block>。</block>
  <block id="3c9564edf2bf79805b158e68dcccf2de" category="list-text">[[auto_check3_step5]]アダプタがイニシエーターモードであり、UTA/UTA2 ポートがオンラインの場合は、UTA/UTA2 ポートをオフラインにします。</block>
  <block id="b3c0d59f1fa098e490810b0e947e6307" category="paragraph"><block ref="1bc3d7ab80a4d1e7b06ad3035b0dad16" prefix="" category="inline-code"></block></block>
  <block id="419db2f6cae0f1c733c2fedf632cbe6b" category="list-text">[[auto_check3_step6]]現在の構成が目的の用途と一致しない場合は、必要に応じて構成を変更します。</block>
  <block id="749cabc3295eb5c2617db20882147797" category="paragraph"><block ref="b519f271b77c8d1348414ff37a36f0bb" prefix="" category="inline-code"></block></block>
  <block id="39931503dd9a7b610d4d262d2c2b6e27" category="admonition">テープ ドライブおよびMetroCluster構成には FC イニシエーターを使用する必要があります。  SAN クライアントには FC ターゲットを使用する必要があります。</block>
  <block id="a8becce9de15555e0f918cf4cf2a3586" category="list-text">各ポートに対して次のコマンドを 1 回ずつ入力して、ターゲット ポートをオンラインにします。</block>
  <block id="3b9ed7a46b0f268f34eda95a2e6e7155" category="paragraph"><block ref="568cfe4bc2866fbf3035079380589631" prefix="" category="inline-code"></block></block>
  <block id="a9fa10cd960a90339e9537639288e8d5" category="admonition">このセクションのコマンドをメンテナンス モードのシェル プロンプトで入力します。</block>
  <block id="e903689bf069822cbaebac637c25da42" category="list-text">ノード 4 でポートが現在どのように構成されているかを確認します。</block>
  <block id="e0da692c52eefbb9374f562f5c4d1167" category="cell">ステップ5からステップ9をスキップして、<block ref="3dac065a0ae79c18e762b88c6c0915e9" category="inline-xref-macro-rx"></block> 。</block>
  <block id="ffa1a4006ff690c1fe619664539ec2cf" category="cell">へ移動<block ref="e3d5822abe2a01f4d8a1736b1307364c" category="inline-xref-macro-rx"></block></block>
  <block id="f7ca9c3e3c996fb164af633649679b6b" category="cell">ステップ6をスキップして<block ref="8fa9bd2d3aca152bc08859144a7af8fa" category="inline-xref-macro-rx"></block>。</block>
  <block id="a76b2c102215e9321521e6154e1cd5ee" category="list-text">[[auto_check_4_step6]]アダプタがイニシエーターモードであり、UTA/UTA2 ポートがオンラインの場合は、UTA/UTA2 ポートをオフラインにします。</block>
  <block id="81ca7960b6cf21700302678cb2053a77" category="list-text">次のコマンドを各ポートごとに 1 回入力して、ターゲット ポートをオンラインにします。</block>
  <block id="9c90dd8c87a40e63c84acec5736c1290" category="paragraph">node3 にオンボードまたはアドオン FC アダプタ上の FC ポートがある場合、システムの出荷時にポートが事前構成されていないため、ノードをサービスに投入する前にノード上でポート構成を設定する必要があります。ポートを設定しないと、サービスが中断される可能性があります。</block>
  <block id="5cb12b259721a136cc774cadc7c074c9" category="list-text">ノード 3 の FC 設定を、先ほどノード 1 からキャプチャした設定と比較します。</block>
  <block id="44d823d11b37a4e72218ebe9865f38b4" category="list-text">必要に応じて、次のいずれかのアクションを実行して、ノード 3 の FC ポートを変更します。</block>
  <block id="026a4424da277a7d743c4bc846f17290" category="paragraph">メンテナンス モードの場合 (ブート メニューのオプション 5):</block>
  <block id="28076ede4cc9f21832c85190c6641187" category="list-text">ターゲット ポートとしてプログラムするには:</block>
  <block id="0782d8d4c61a7cd89e1abafbe5ea5255" category="paragraph"><block ref="2f3fb83fbfeaa6dcc145c9439a60e023" prefix="" category="inline-code"></block></block>
  <block id="9ffe34631932030e10674c15e5213255" category="paragraph">例えば：<block ref="4e577f3e00b1b52e4b863618794a0722" prefix=" " category="inline-code"></block></block>
  <block id="713274c6cee4384b9c2c819d3adb4dd8" category="paragraph"><block ref="723b7d909caa5ed8fb8b4fb5ddc6bf17" prefix="" category="inline-code"></block></block>
  <block id="0dda9a087e4138dae07efa04e54ed27b" category="paragraph">例えば：<block ref="9965a7cb08ecefbc1f4975409538e128" prefix=" " category="inline-code"></block></block>
  <block id="81c599f2e39a1b5800a3e53397bc8f88" category="list-text">次のコマンドを使用して出力を調べ、新しい設定を確認します。</block>
  <block id="0968f508b9ca398ddaefa4b831996c2c" category="paragraph">node4 にオンボードまたはアドオン FC アダプタ上の FC ポートがある場合、システムの出荷時にポートが事前構成されていないため、ノードをサービスに投入する前にノード上でポート構成を設定する必要があります。必要に応じてポートを構成しないと、サービスが中断される可能性があります。</block>
  <block id="9e2ce1b17e529e39148b31409085100b" category="list-text">システム上のすべての FC および統合ネットワーク アダプタに関する情報を表示します。</block>
  <block id="a9e60974603befa4a60deaa890cc9cb2" category="paragraph">node4 プラットフォームの「インストールおよびセットアップ手順」、適切なディスク シェルフ ドキュメント、および「HA ペア管理」ドキュメントを使用して、次の接続をケーブル接続します。</block>
  <block id="dd6436446d7d688a029171fa10354c40" category="paragraph">参照<block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block>_HAペア管理_にリンクします。</block>
  <block id="8762049cc66fa921ae6bcffe8755d4e6" category="admonition">*遅延を無視しないでください。バッテリーの充電が不十分だと、データが失われる可能性があります。*</block>
  <block id="3b4a6d51e129532942e72a2637a3248a" category="paragraph">node3 プラットフォームの「インストールおよびセットアップ手順」、適切なディスク シェルフ ドキュメント、および「HA ペア管理」ドキュメントを使用して、次の接続をケーブル接続します。</block>
  <block id="621db0217765431b65fd2df9431bc8c1" category="paragraph">完了する必要があるかもしれません<block ref="b22a2e603d310a795a7b59d2bdda39ee" category="inline-xref-macro-rx"></block>または<block ref="5752cac0a470e06ffceef40fba1931c1" category="inline-xref-macro-rx"></block>、または両方のセクション。</block>
  <block id="4bd95100dfdd41a46154bae000c5b050" category="admonition">NVRAM の内容を消去しないでください。  NVRAMの内容をクリアする必要がある場合は、 NetAppテクニカル サポートにお問い合わせください。</block>
  <block id="dbe7ddc508cb8ca92b05d2610724662c" category="admonition">メンテナンス モードに入るように指示されない限り、このセクションのコマンドをクラスター プロンプトに入力します。  MetroCluster FC システムを使用している場合は、UTA/UTA2 ポートを構成するにはメンテナンス モードにする必要があります。</block>
  <block id="0e98bb417c519b40ee1d3347c345b891" category="list-text">[[man_check_4_Step5]]システムにストレージディスクがあり、 Data ONTAP 8.3 を実行している場合は、ノード 4 を起動してメンテナンス モードに入ります。</block>
  <block id="e86a9012a5d4ad0636d87c7796bb7d1b" category="cell">行きます <block ref="d63e67436ac7351debc07c052c32757d" category="inline-xref-macro-rx"></block>。</block>
  <block id="fb702fd1f687697c34ccfb84155cb694" category="cell">ステップ8をスキップして<block ref="a1e1d631f88d089f1ee9acd195dec0d6" category="inline-xref-macro-rx"></block>。</block>
  <block id="c3149530803c8516fe41237a78a3dd5b" category="list-text">[[man_check_4_Step8]]アダプタがイニシエーターモードであり、UTA/UTA2 ポートがオンラインの場合は、UTA/UTA2 ポートをオフラインにします。</block>
  <block id="4bf18c040a9afd064df8863c218a3eec" category="list-text">[[man_check_4_Step9]]現在の構成が目的の用途と一致しない場合は、次のコマンドを入力して、必要に応じて構成を変更します。</block>
  <block id="97af051b1347b43f64a2dd75db18e91a" category="admonition">テープ ドライブには FC イニシエーターを使用し、SAN クライアントには FC ターゲットを使用する必要があります。</block>
  <block id="856a11ba995fa1cbf53c4a85a43d0980" category="list-text">システムにストレージ ディスクがある場合は、次のコマンドを入力します。</block>
  <block id="a35f563649b182d8977f02ecb7f20b3a" category="admonition">メンテナンス モードに入るように指示されない限り、このセクションのコマンドをクラスター プロンプトに入力します。</block>
  <block id="4040bda75e60fc0b567141a275aad366" category="list-text">node3 で次のコマンドを入力して、現在のポート構成を確認します。</block>
  <block id="4ecde66f03240143dac0d90d096f6780" category="cell">ステップ5からステップ13をスキップして、<block ref="4428c1fc0f08dec3d9acadc30523cad8" category="inline-xref-macro-rx"></block> 。</block>
  <block id="4233f37c2cb0b60e70d554b36bb33363" category="list-text">[[man_check_3_step5]]システムにストレージディスクがあり、clustered Data ONTAP 8.3 を実行している場合は、ノード 3 を起動してメンテナンス モードに入ります。</block>
  <block id="8244a2cadfeaafc752ee234621d096f6" category="cell">行きます <block ref="21867c7d0c2b8bc3921bf40e9edec561" category="inline-xref-macro-rx"></block>。</block>
  <block id="362c8977dd18b22b881396c98e231639" category="cell">ステップ8をスキップして<block ref="7673ca413989375816bebedf63a95837" category="inline-xref-macro-rx"></block>。</block>
  <block id="ff01dd932491a7d15acd63376b61eb99" category="list-text">[[man_check_3_step8]]アダプタがイニシエーターモードであり、UTA/UTA2 ポートがオンラインの場合は、UTA/UTA2 ポートをオフラインにします。</block>
  <block id="b132fdfbd29d789bf36881e164c565c2" category="list-text">[[man_check_3_step9]]現在の構成が目的の用途と一致しない場合は、必要に応じて構成を変更します。</block>
  <block id="60a6a8d5e976d6384be5d506c66c6141" category="admonition">テープ ドライブおよびMetroCluster構成には FC イニシエーターを使用する必要があります。  SAN クライアントには FC ターゲットを使用する必要があります。</block>
  <block id="791c7a5bc5fb0f4369c531ce796c42ae" category="list-text">[[step12a]]各ポートごとに次のコマンドを入力して、ターゲット ポートをオンラインにします。</block>
  <block id="2cfd520b3625da2bfe9f292ecfb505bb" category="list-text">[[man_check_3_step14]]ポートにケーブルを接続します。</block>
  <block id="4525bdcac0945de44b388c01b79ae542" category="admonition">このセクションのコマンドをクラスタープロンプトに入力します。</block>
  <block id="40006608fc0851f42cd30b2d3e226efa" category="list-text">システム上のすべての FC および統合ネットワーク アダプタに関する情報を表示します。</block>
  <block id="13ca7c6b28be117550eab0e903fe7042" category="list-text">ノード 3 の FC 設定を、先ほどノード 1 からキャプチャした設定と比較します。</block>
  <block id="46c1d2d2ab0409405da04b960b56f8de" category="list-text">[[man_config_3_step3]]次のいずれかのアクションを実行します。</block>
  <block id="860b5f3398c4c1ac377f75a86c1e4600" category="cell">行きます <block ref="0a519386d36c411c6e59b5652ee1904f" category="inline-xref-macro-rx"></block>。</block>
  <block id="ffd972a1e4dacd5cdc292817e7c737c1" category="cell">行きます <block ref="a8e030c5a102b1fbda5775e36f0a3aae" category="inline-xref-macro-rx"></block>。</block>
  <block id="9bf0ee2cd9be64a7f34f45028aa43cd2" category="list-text">[[man_config_3_step4]]必要に応じて、次のいずれかのコマンドを入力して、ノード3 の FC ポートを変更します。</block>
  <block id="ae7f13b8bbb7c9fd51dda562a16b36c8" category="paragraph"><block ref="8857bb6c0bb9926ea77bdcc5d45b1108" prefix="" category="inline-code"></block></block>
  <block id="9ad3055e0dfd10e8b8535d0eb1ec2c52" category="paragraph"><block ref="cbe131c5c17c1fd0759ff1501f01be67" prefix="" category="inline-code"></block></block>
  <block id="c004940bc59ffe780370727ce9c08711" category="list-text">次のコマンドを入力して出力を調べ、新しい設定を確認します。</block>
  <block id="0a49b83d5ed667f66c92da05a2d65f2c" category="list-text">ブート環境プロンプトで node3 をブートします。</block>
  <block id="194cac65f4711838b5222d0a41b5b28b" category="list-text">[[man_config_3_step9]]次のいずれかのアクションを実行します。</block>
  <block id="0ae92264480b0c931bbdea5d1d57a92c" category="paragraph"><block ref="4b631d03a77b2a6d951be9d9a540756e" prefix="" category="inline-code"></block></block>
  <block id="431202ecef1ca91c6f3605e2e81d51ff" category="paragraph"><block ref="a11184dcc096f5133e1c0f8ac45f1c93" prefix="" category="inline-code"></block></block>
  <block id="ae855446dba335efeaa8a4d44a6480e2" category="cell">行きます <block ref="a919aec136b010962e2696a7b07f4e92" category="inline-xref-macro-rx"></block>。</block>
  <block id="0ad004d090a4ba2bc694d75d245c3231" category="inline-xref">ステップ6</block>
  <block id="d7513ce41e00d6137be0cf8419a5ad77" category="cell">行きます <block ref="35d93f5d48cef40ae4085e0163170098" category="inline-xref-macro-rx"></block>。</block>
  <block id="257ce8d832995e33306fc7bb744f1ebe" category="list-text">[[man_config_4_Step6]]メンテナンスモードを終了します。</block>
  <block id="7573f254272d2c6220e77b150551b633" category="list-text">ブート環境プロンプトで次のコマンドを入力して、node4 をブートします。</block>
  <block id="e30b112573a3cee86acf023252d05a4b" category="list-text">[[man_config_4_Step9]]次のいずれかのアクションを実行します。</block>
  <block id="3b9ace6b56c3470111592188ef786b68" category="list-text">node3 プラットフォームのインストールとセットアップ手順</block>
  <block id="49e85d2cb5dc17786beece61ce67579b" category="list-text">メンテナンス モード プロンプトで、次のコマンドを入力します。</block>
  <block id="defaf387837a5ac57c453e436af7ffe6" category="cell">行きます <block ref="57e0c5137c5e4ee9559e4abc3701552f" category="inline-xref-macro-rx"></block>。</block>
  <block id="b543203df1cba169912b116fd99674ff" category="list-text">[[man_install3_step8]] ONTAP用にノード3を設定します。</block>
  <block id="b6894d5bdf50a826cb6b87d0ca6a44d3" category="list-text">CTRL-C を押してブート メニューを表示します。</block>
  <block id="28e28932e1038b7cc2979611172e5f48" category="cell">行きます <block ref="85131af613f0169831e213f11ca11041" category="inline-xref-macro-rx"></block>。</block>
  <block id="b9da98e99c8057fc3b9a54d9d19ff501" category="inline-xref">ステップ18</block>
  <block id="7c524e8842cf8de298e4c6e1291bb583" category="cell">行きます <block ref="f5b2f21e8ce0ab7d4e5603147e143520" category="inline-xref-macro-rx"></block>。</block>
  <block id="9956c97018b98e6a80cd00a916ddd524" category="list-text">[[man_install3_step13]]次のいずれかのアクションを選択して、ネットブート接続を構成します。</block>
  <block id="0ba73a93969c15a375ed35ee1a41b1a9" category="list-text">ノード3でネットブートを実行します。</block>
  <block id="6c04fe5c456662eaf6717c6408fbf87e" category="list-text">ブートメニューから、まずオプション*(7) 新しいソフトウェアをインストールする*を選択します。</block>
  <block id="39ee6091b18246476c0e6651a7fd4f12" category="list-text">手順を続行するように求められた場合は、<block ref="415290769594460e2e485922904f345d" prefix=" " category="inline-code"></block>パッケージの入力を求められた場合は、次の URL を入力します。</block>
  <block id="f01be43ac6c987e6640f5f08edb5f11b" category="list-text">[[man_install3_step18]]*(5)メンテナンスモードブート*を選択して、<block ref="e4da3b7fbbce2345d7772b0674a318d5" prefix=" " category="inline-code"></block>を入力し、<block ref="415290769594460e2e485922904f345d" prefix=" " category="inline-code"></block>起動を続行するかどうかを尋ねるプロンプトが表示されたら。</block>
  <block id="d31abf3785333c7ae6bdd20bb76938b0" category="list-text">node3 のシステム ID を見つけます。</block>
  <block id="b198ad033208091ab84e492d02bfce14" category="list-text">[[man_install3_step21]]ノード1のスペアディスク、ルートに属するディスク、および以前にノード2に再配置されなかったルート以外のアグリゲートを再割り当てします。<block ref="b90d8347ded957c31748eee44116abad" category="inline-link-macro-rx"></block> 。</block>
  <block id="ba96a003ae21abcf0849770cd88fb7e8" category="list-text">[[man_install3_step42]]パートナーシステムIDが、<block ref="aa83c5880412a41ab5941be2fb5cf080" category="inline-xref-macro-rx"></block> -p スイッチの場合:</block>
  <block id="491969df085a332f2dc58e6126ce8248" category="list-text">node4プラットフォームのインストールとセットアップ手順</block>
  <block id="41a45c7516e3accdf36922b3be4f91a5" category="admonition">*遅延を無効にしないでください。バッテリーを充電しないと、データが失われる可能性があります。*</block>
  <block id="718011d4445365a925a4826e5010d02d" category="list-text">[[man_install4_Step8]]メンテナンス モード プロンプトで、次のコマンドを入力します。</block>
  <block id="555274cce9ccea93856f2174d70c44ff" category="cell">行きます <block ref="d6a59fffa5883ae870f11e0e2cadcd2d" category="inline-xref-macro-rx"></block>。</block>
  <block id="4d613f78d648e0daee8012c631b3bbdd" category="cell">行きます <block ref="d121c2002749495f5b774cb63902ead8" category="inline-xref-macro-rx"></block>。</block>
  <block id="34ef85ee99bf02077fc9c9aa28a2c37c" category="list-text">[[man_install4_Step13]]次のいずれかのアクションを選択して、ネットブート接続を構成します。</block>
  <block id="e5f32c16ba5e3145cb5ae201de5c31a6" category="list-text">[[man_install4_Step18]]メンテナンスモードを選択<block ref="e4da3b7fbbce2345d7772b0674a318d5" prefix=" " category="inline-code"></block>ブートメニューから入力<block ref="415290769594460e2e485922904f345d" prefix=" " category="inline-code"></block>起動を続行するかどうかを尋ねるプロンプトが表示されたら。</block>
  <block id="d6a004498c167875d1bd15d43aaf2600" category="list-text">[[man_install4_Step19]]続行する前に、<block ref="488c6e462745f03d8c1dfb3ba61f7258" category="inline-link-macro-rx"></block>ノード上の FC または UTA/UTA2 ポートに必要な変更を加えます。これらのセクションで推奨されている変更を行い、ノードを再起動して、メンテナンス モードに切り替えます。</block>
  <block id="287bc804244a679c73d0cac4cb0c0b2c" category="inline-xref">ステップ19</block>
  <block id="0886208fefc0d1222bb49b4f36ef5c2a" category="list-text">パートナーシステムIDが、以下のとおり正しく設定されていることを確認してください。<block ref="ce69cce3220d739038c7a73754bd5bab" category="inline-xref-macro-rx"></block>オプションの下。</block>
  <block id="05b5d63be92fcd8a68e0fda7b3a1f065" category="admonition">NVRAM の内容を消去しないでください。  NVRAMの内容をクリアする必要がある場合は、 NetAppテクニカル サポートにお問い合わせください。</block>
  <block id="2cf91c502117e7873efab1893f5a510c" category="admonition">この情報を使用して、ノード 3 またはノード 4 に転送する可能性のある部品またはアクセサリを識別できます。</block>
  <block id="6d30bf3ea0165e7000975bb05a8c4504" category="list-text">[[man_prepare_nodes_step28]]次のサブステップを完了します。</block>
  <block id="79c5ad6ed190de6f4df05537c544794f" category="list-text">[[man_prepare_nodes_step29]]新しいノードに元のノードと同じライセンス機能を持たせたい場合は、次のコマンドを入力して元のシステムのクラスター ライセンスを確認します。</block>
  <block id="f8e6361ef8eb617e90fcace7cda2e6e5" category="admonition">ノード 1 がノード 2 と同じシャーシ内にある場合は、電源スイッチを使用したり、電源ケーブルを引いたりしてシャーシの電源をオフにしないでください。そうすると、データを提供しているノード2がダウンしてしまいます。</block>
  <block id="d6e4db81e9067d45ffa53a5fa5494e1a" category="admonition">このドキュメントでは、元のノードは _node1_ と _node2_ と呼ばれ、新しいノードは _node3_ と _node4_ と呼ばれます。ガイド内の手順では、ノード1をノード3に、ノード2をノード4に置き換えます。 _node1_、_node2_、_node3_、_node4_ という用語は、元のノードと新しいノードを区別するためにのみ使用されます。手順を実行する際には、元のノードと新しいノードの実際の名前に置き換えてください。ただし、コントローラのハードウェアをアップグレードしてもノードの名前は変わりません。ノード3の名前はノード1のまま、ノード4はノード2のままです。</block>
  <block id="86365511dddf1ee8bef313eb726711e8" category="list-text">この手順は、 FASシステムとAFFシステムに適用されます。</block>
  <block id="3b8041789e9cd5e417af3d65ef7a2e1b" category="inline-link-macro">ノード3でFCまたはUTA/UTA2構成を設定する</block>
  <block id="e2b66b348c7594fa3e3649551d2d03bb" category="list-text">FCまたはUTA/UTA2構成のシステムをお持ちの場合は、<block ref="0f65c4eac03b5c41bcd2baef6caa94a0" category="inline-link-macro-rx"></block> 。</block>
  <block id="26e2328a3e5846745002b5222faffd73" category="inline-link-macro">ノード1のディスクをノード3に再割り当てする</block>
  <block id="9ea71500e3c5fa7d1f03e9c76e619439" category="list-text">FCまたはUTA/UTA2構成がない場合は、<block ref="731ce5d7564b7c32e4081aed35d74ddf" category="inline-link-macro-rx"></block>ノード3がノード1のディスクを認識できるようにする。</block>
  <block id="9c6cfb181f34c77d766f4b64b947b0be" category="list-text">MetroCluster構成の場合、<block ref="731ce5d7564b7c32e4081aed35d74ddf" category="inline-link-macro-rx"></block> 。</block>
  <block id="5850374394963dcf609f49933e6ae097" category="list-text">[[auto_install4_step22]] NetApp Storage Encryption (NSE) ドライブがインストールされている場合は、次の手順を実行します。</block>
  <block id="f95c3d6692e56fe33212589fc58ee4ae" category="inline-link-macro">ノード4でFCまたはUTA/UTA2構成を設定する</block>
  <block id="b03f4dc28a467dbdb927171247a0b5b9" category="list-text">FCまたはUTA/UTA2構成のシステムをお持ちの場合は、<block ref="a5fd50e267aa742edfb254af48aa31df" category="inline-link-macro-rx"></block> 。</block>
  <block id="84778c2e84fe5df40eb6e09940c8e6da" category="inline-link-macro">ノード2のディスクをノード4に再割り当てする、ステップ1</block>
  <block id="cb0e98223d1b689567ca884a4ed62d2f" category="list-text">FCまたはUTA/UTA2構成がない場合は、<block ref="77bda7bfb356817385991b20570adf55" category="inline-link-macro-rx"></block>ノード4がノード2のディスクを認識できるようにする。</block>
  <block id="187112eef07fb14778dfdc513543ea21" category="list-text">[[auto_check_4_step10]]メンテナンスモードを終了:</block>
  <block id="5407697632a0e9289cbc1571bb74a606" category="list-text">その他のシステムアップグレードについては、<block ref="344c6df46b49421d4efd3ea3dc243233" category="inline-link-macro-rx"></block> 。</block>
  <block id="532277e802a820c7b240fc524a2dec1d" category="list-text">実行してノードをブートメニューで起動します。<block ref="d20d8416248acf69156e4b7875cc4868" prefix=" " category="inline-code"></block> 。</block>
  <block id="9e5cb50e1c577a8bbe485a517d02859d" category="list-text">AFF A800システムにアップグレードする場合は、<block ref="13193a83e6d1d3a0ad7f7d39140ab8c7" category="inline-link-macro-rx"></block> 。</block>
  <block id="90d15882071659f5c278c3188642dcdd" category="list-text">その他のシステムアップグレードについては、<block ref="85de4eaf81abb5e5b335f49a296af5f4" category="inline-link-macro-rx"></block> 。</block>
  <block id="1f3fcdf9022a6aa0f67562f35de18fd5" category="admonition">この段階では、 MetroCluster構成は正常な状態ではなく、解決すべきエラーが発生する可能性があります。見る<block ref="14c0e32a98a31f9fd4a16b635b2f7ebd" category="inline-link-macro-rx"></block>。</block>
  <block id="eae0d196e9a099a5039af7d8b6c1eb85" category="admonition">ベイ B はシャーシの右側にあります。</block>
  <block id="851d3d8a0258ed7660584e68159aae4e" category="inline-link-macro">ノード3のFCまたはUTA/UTA2ポートを設定および構成する</block>
  <block id="9066510c72210c33ee0037190ab1e1ff" category="list-text">FCまたはUTA/UTA2構成のシステムをお持ちの場合は、<block ref="a2860b8490ec5aaef9fa8fc42929bb0a" category="inline-link-macro-rx"></block> 。</block>
  <block id="f6195d58e46fb7461b72fc0f7cfb9d9e" category="inline-link-macro">ノード1のディスクをノード3に再割り当てする、ステップ1</block>
  <block id="058639902ce677f10cb736388c7e4acb" category="list-text">FCまたはUTA/UTA2構成がない場合は、<block ref="e90905ab01074cf314222ce3c67aed26" category="inline-link-macro-rx"></block>ノード3がノード1のディスクを認識できるようにする。</block>
  <block id="b145ed74f423471704ac13c05f313b4d" category="list-text">MetroCluster構成の場合、<block ref="a2860b8490ec5aaef9fa8fc42929bb0a" category="inline-link-macro-rx"></block>ノードに接続されているディスクを検出します。</block>
  <block id="4a38f566dc08a2281060f30394eff9f6" category="inline-link-macro">ノード4のFCまたはUTA/UTA2ポートを設定および構成する</block>
  <block id="bacbfc77fc4e2d757322081c15c52a00" category="list-text">FCまたはUTA/UTA2構成の場合、<block ref="ad45ffc801f32cf9fa6b670aff5c067c" category="inline-link-macro-rx"></block> 。</block>
  <block id="c52fd43175a81b4010edafc888294155" category="list-text">FCまたはUTA/UTA2構成がない場合は、<block ref="e4d2a56d6aa2b01471a43eefb927dea7" category="inline-link-macro-rx"></block>ノード4がノード2のディスクを認識できるようにする。</block>
  <block id="625f5185360b3cd291dbecb432926ddf" category="list-text">MetroCluster構成の場合、<block ref="ad45ffc801f32cf9fa6b670aff5c067c" category="inline-link-macro-rx"></block>ノードに接続されているディスクを検出します。</block>
  <block id="e82b74d07826c2bc6650aa170acd2745" category="paragraph">ノード4にオンボードFCポート、オンボードUTA/UTA2ポート、またはUTA/UTA2カード（たとえば、 ONTAP 9.15.1以降に導入されたAFFおよびFASシステム）がなく、ストレージディスクを備えたシステムをアップグレードする場合は、<block ref="eaad59cad2124997123e3f040ef5cb96" category="inline-link-macro-rx"></block> 。</block>
  <block id="20f32956fc865957eac4865ba888e9ba" category="list-text">ノード4にUTA/UTA2カードまたはUTA/UTA2オンボードポートがない場合は、「ノード4のUTA/UTA2ポートの確認と設定」をスキップして、<block ref="eaad59cad2124997123e3f040ef5cb96" category="inline-link-macro-rx"></block> 。</block>
  <block id="e5330a3f067b20c0bc653c95754f0003" category="paragraph">ノード3にオンボードFCポート、オンボードUTA/UTA2ポート、またはUTA/UTA2カード（たとえば、 ONTAP 9.15.1以降に導入されたAFFおよびFASシステム）がなく、ストレージディスクを備えたシステムをアップグレードする場合は、<block ref="ac081fdc0801ea4a4f23475143090cfa" category="inline-link-macro-rx"></block> 。</block>
  <block id="5ec3ea1c092d9baccac3f18b114cbb19" category="cell">ノード 3 の場合...</block>
  <block id="43b887bce260431997df1d009b1f86d3" category="cell">UTA/UTA2 カードまたは UTA/UTA2 オンボード ポートを搭載</block>
  <block id="b218cf02d86731be6eb24c55f95238d6" category="cell">へ移動<block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block></block>
  <block id="c1d0c27818786bcecaad04b77cee8c31" category="cell">UTA/UTA2 カードまたは UTA/UTA2 オンボード ポートがありません</block>
  <block id="cb46a1722edd0d184e8f5160da79aef5" category="cell">_ノード3のUTA/UTA2ポートの確認と設定_をスキップして、<block ref="ac081fdc0801ea4a4f23475143090cfa" category="inline-link-macro-rx"></block> 。</block>
  <block id="2466a7dc80883b138ff2ff9dd6381cb2" category="list-text">AFF A800システムにアップグレードする場合は、<block ref="c6817bbcae6fe5893644f9e570310aab" category="inline-link-macro-rx"></block> 。</block>
  <block id="72bb382f624988c585ab0960bd64853a" category="paragraph">node4 プラットフォームの「インストールおよびセットアップ手順」、適切なディスク シェルフ ドキュメント、および「HA ペア管理」の手順に従って、次の接続をケーブル接続します。</block>
  <block id="8ea9f47b485e9358783b1f1f3bd0f67e" category="paragraph">完了する必要があるかもしれません<block ref="750d6dbe3bf1312d0d97a8f03a0d2304" category="inline-xref-macro-rx"></block>または<block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block>、または両方のセクション。</block>
  <block id="138a022be246afc5755a650cb07e42bf" category="list-text">ノード3にオンボードFCポート、オンボードUTA/UTA2ポート、またはUTA/UTA2カードがなく、ストレージディスクを備えたシステムをアップグレードする場合は、<block ref="3b6c063a8efbc88c969c7838f0611434" category="inline-link-macro-rx"></block> 。</block>
  <block id="ed601239c6d656a1963ef5d273a4656e" category="list-text">ノード3にオンボードFCポート、オンボードUTA/UTA2ポート、またはUTA/UTA2カード（たとえば、 ONTAP 9.15.1以降に導入されたAFFおよびFASシステム）がなく、ストレージディスクを備えたシステムをアップグレードする場合は、<block ref="3b6c063a8efbc88c969c7838f0611434" category="inline-link-macro-rx"></block> 。</block>
  <block id="e2711d5d01384ccd88b7e7edd60ba51f" category="paragraph">ノード4にオンボードFCポート、オンボードUTA/UTA2ポート、またはUTA/UTA2カード（たとえば、 ONTAP 9.15.1以降に導入されたAFFおよびFASシステム）がなく、ストレージディスクを備えたシステムをアップグレードする場合は、<block ref="fface1ac702bde6d72ceb6e55eb8b2b6" category="inline-link-macro-rx"></block> 。</block>
  <block id="5995503f0157016dc9126220426976d1" category="cell"><block ref="5995503f0157016dc9126220426976d1" category="inline-link-macro-rx"></block></block>
  <block id="bfe40fd278079f510bcfb6a7a10f9369" category="list-text">AFF A800またはAFF C800コントローラのアップグレードの場合、ノード 2 を取り外す前に、シャーシ内のすべてのドライブがミッドプレーンにしっかりと固定されていることを確認する必要があります。詳細については、 <block ref="ba47371cb3a59dcddfa160e31dda2034" category="inline-link-macro-rx"></block>。</block>
  <block id="56bfe01fd4ea060925fdb4a5681a751e" category="list-text">AFF A800またはAFF C800コントローラのアップグレードの場合、ノード 1 を取り外す前に、シャーシ内のすべてのドライブがミッドプレーンにしっかりと固定されていることを確認する必要があります。詳細については、 <block ref="ba47371cb3a59dcddfa160e31dda2034" category="inline-link-macro-rx"></block>。</block>
  <block id="b73b0ab9c4b2187dc386ae1c43da7a8d" category="list-text">AFF A800やAFF C800など、同じシャーシ内のコントローラモジュールを交換してシステムをアップグレードする場合、 NetApp、<block ref="51f73d2815dfaf31a7f9c6af800582d7" category="inline-link-macro-rx"></block> 。この ARL 手順には、アップグレード手順中にコントローラを取り外したり取り付けたりするときに、内部ディスクがシャーシ内で安全な状態を保つための手順が含まれています。</block>
  <block id="04f0b7701d1f9864fc94b5ec9ec68b2d" category="paragraph"><block ref="50932ac5c7bb93210d274e46c6eba169" category="inline-link-macro-rx"></block>。</block>
  <block id="fcf09bf7ec3b71c764141820f1fc8020" category="paragraph">パーマリンク: upgrade-arl-auto-affa900/retire_node1.html リダイレクト: ontap-systems-upgrade/upgrade-arl-auto-in-chassis/retire-node1.html</block>
  <block id="21033397b04c40cfe5bfedb2ddbd85d7" category="paragraph">アップグレードシナリオが以下のサポート対象システムマトリックスに記載されている場合は、<block ref="19860560e89446d8ca0f4e7091d110a0" category="inline-link-macro-rx"></block>アップグレード手順を開始します。</block>
  <block id="066b4e06813cb4484b4d19373d95d0b8" category="paragraph">アドオン アダプタまたはコントローラ マザーボード上に UTA/UTA2 ポートがあり、次の構成になっている場合がありますが、ノード 3 の UTA/UTA2 ポートの構成を確認し、必要に応じて変更する必要があります。</block>
  <block id="78475a8af5a97db71bf76492940ae509" category="inline-link-macro">ノード4のインストールと起動、ステップ22</block>
  <block id="1559ddd5d383480aa8545cb986dfd8ed" category="list-text">[[unset_maxwait_system_commands]]自己暗号化ドライブが構成で使用されており、<block ref="fd93f52ab7757855a2e3e5cbb717ab40" prefix=" " category="inline-code"></block>変数に<block ref="3262d48df5d75e3452f0f16b313b7808" prefix=" " category="inline-code"></block>（例えば、<block ref="84eec0795d86d5ec7c8468425b9e48d8" category="inline-link-macro-rx"></block> ）の場合は、変数を設定解除する必要があります。</block>
  <block id="b8ef9e4414711297f1f6127d87d8e422" category="admonition">中古コントローラーを準備するために必要な手順は、<block ref="b433b76417b4f08166eb90cef3aa2a31" prefix=" " category="inline-code"></block>この手順では、交換用コントローラ ハードウェアが新品であり、使用されていないことを前提としているため、これらのコマンドはこの手順には含まれていません。交換用コントローラ ハードウェアが以前に使用されていた場合、特にコントローラが 7-Mode でData ONTAPを実行していた場合には、テクニカル サポートに連絡する必要があります。</block>
  <block id="4e36bc200e35ce76e1def1c9847c6f6c" category="paragraph">出力をキャプチャした出力と比較することができます<block ref="cec31d5141a762ae7d38f72febf6b8d9" category="inline-link-macro-rx"></block>_アップグレード用にノードを準備する_。</block>
  <block id="c88514cf6aa90bbe248ea107fd638b94" category="list-text">完了<block ref="76543dc4b088af7954881ae9114056a2" category="inline-link-macro-rx"></block>_非ルート アグリゲートをノード 1 からノード 2 に再配置_ のセクションで再度実行します。</block>
  <block id="2bd7251adb6cb85d06594cef2e46f762" category="list-text">残りの骨材を再配置するには、<block ref="c897e2b1fa0d7ad13f886cf1538be3eb" category="inline-link-macro-rx"></block>を通して<block ref="5adaf2d8e29100eb9027e3120c811323" category="inline-link-macro-rx"></block>「_非ルート アグリゲートをノード 2 からノード 3 に再配置する_」セクション。</block>
  <block id="92755986e66b1c1b799f94e506b0e78b" category="list-text">完了<block ref="5adaf2d8e29100eb9027e3120c811323" category="inline-link-macro-rx"></block>_非ルート アグリゲートをノード 2 からノード 3 に再配置する_ セクションで再度実行します。</block>
  <block id="0b20a5d3b7dcba1ce2ef1c3a32c62b57" category="list-text">ノード2に属していた残りのアグリゲートを再度実行して再配置します。<block ref="bd44335b572d50c129363547aa87bcee" category="inline-link-macro-rx"></block>を通して<block ref="c5be787c4fcfd0f49f014e8618d28c15" category="inline-link-macro-rx"></block>_node2 の非ルート アグリゲートを node3 から node4 に再配置_。</block>
  <block id="7c83d808889f08051a5ca591ce7c8e27" category="list-text">[[relocate-step1]]次のサブステップを実行して、ルート以外のアグリゲートを再配置します。</block>
  <block id="fc0d545a8e3aca29e30f066934728447" category="list-text">ノード 3 でパートナー システム ID が正しく設定されていることを確認します。</block>
  <block id="dfcbf33b107ee8cbdb248e3973591ecd" category="list-text">[[relocate-step5]]ルート以外のアグリゲートを再配置します。</block>
  <block id="ed787946b7250668aadee490b38bc4a4" category="section-title">どのアップグレード手順を使用すればよいですか?</block>
  <block id="dd04b613766be00015be37c27c9287a8" category="paragraph">適切なアップグレード手順を選択するには、下の表に記載されているすべての質問を確認してください。</block>
  <block id="40c8ff48fe09ea0079684fdd1a250ec0" category="cell">自分自身に問いかけてみましょう…</block>
  <block id="3b67351e5cad04409e6a96d3746ac449" category="cell">答えが「はい」であれば、これを行うことができます...</block>
  <block id="7276d228ae5909a1600376ea04afcc20" category="cell">元のノードと新しいノードで異なるソフトウェア バージョンを実行していますか?</block>
  <block id="d36d3c0e8d8d1ae2b69767c2d21f4de1" category="cell">元のノード上のONTAPバージョンを、サポートされている最高バージョンにアップグレードします。可能であれば、新しいノードは元のノードで実行されているONTAPバージョンをサポートする必要があります。これが不可能な場合は、<block ref="9fa2b66114da266713b82d418ec229cf" category="inline-link-macro-rx"></block>元のノードをサポートされている最高バージョンにアップグレードします。元のノードと新しいノード間のバージョンの差は 4 を超えることはできません。たとえば、 ONTAP 9.8 および 9.12.1 はサポートされていますが、 ONTAP 9.8 および 9.13.1 はサポートされていません。<block ref="e34181b97f6f4b1fe67c330fb826ba03" category="inline-link-macro-rx"></block>。</block>
  <block id="218b292436939056129ace4ef7a755ab" category="cell">中断を伴うアップグレードを実行しますか?</block>
  <block id="7556c42574b8863b01a23cb64beb17f6" category="cell"><block ref="8b9b2634fd898f04166a765851aba8f2" category="inline-link-macro-rx"></block>。これには、元のシステムのデータを保存するための独自のストレージと棚を備えた新しいシステムが必要です。特定のアップグレードでは、コントローラ シェルフからの変換が可能です。</block>
  <block id="8988c8c891d1b170244fa2801c8f7823" category="cell">中断のないアップグレードを実行しますか?</block>
  <block id="2f5546c2bb23945783cbdb6d6e128cdf" category="paragraph">次のいずれかの方法でアップグレードします。</block>
  <block id="0678555704a75d8c6ba937ca89e44347" category="inline-link-macro">ボリュームを移動する</block>
  <block id="7a5d9d481746c5a733396a92b9fa9ad9" category="list-text"><block ref="7a5d9d481746c5a733396a92b9fa9ad9" category="inline-link-macro-rx"></block></block>
  <block id="6de3b933715f67f0e1503dadf7be11b5" category="inline-link-macro">集約再配置を使用する</block>
  <block id="1326c781e22221bcfee09723f0a2bfc2" category="list-text"><block ref="1326c781e22221bcfee09723f0a2bfc2" category="inline-link-macro-rx"></block></block>
  <block id="af07e0611bc43f9c7f0e394b682e76a9" category="paragraph">ARL は交換手順です。新しいノードを使用してクラスターを拡張および縮小する必要がないため、2 ノードのスイッチレス クラスターには有利です。ボリュームを移動するときに、アグリゲートを再配置してデータを移動すると、アグリゲート間でデータをコピーするよりも高速になります。</block>
  <block id="999f41e22973138ebb057a2c18787f5b" category="cell">モジュラーシステムはありますか?  *注*: モジュラー システムでは、コントローラには内部ディスクがなく、すべてのストレージは外部接続されたシェルフ内にあります。</block>
  <block id="48dea881883b05a136108fac6e95bcae" category="cell"><block ref="8f9fb90f68730e000102778c18115044" category="inline-link-macro-rx"></block>。</block>
  <block id="87f099da08cbe3849d9395ec1b7d8604" category="cell">統合システムがあり、ボリュームを移動してアップグレードしたいですか? *注*: 統合システムでは、コントローラには内部ディスクがあり、ストレージはコントローラ シャーシ内と外部接続されたシェルフに収容されています。外部シェルフはストレージ拡張用であり、すべてのシステム構成に含まれているとは限りません。</block>
  <block id="03478f7299af730e1a78b0850b26043c" category="inline-link-macro">システムがサポートされていることを確認する</block>
  <block id="d66f8add2b0ea52e5e5255f9e37c4dfd" category="list-text"><block ref="a057e8af1198737f32477ae9faf7d879" category="inline-link-macro-rx"></block>。</block>
  <block id="8362baab856f8e12516f78c5f4908211" category="list-text"><block ref="73d856629c7408ec32b9b5ffa5af9ed6" category="inline-link-macro-rx"></block>。</block>
  <block id="bb9da06465d483320cbe6e41cf99dc3f" category="cell">統合システムがあり、既存のシャーシとディスクを維持しながら、コントローラー モジュールのみを交換してアップグレードしたいと考えていますか?</block>
  <block id="6087f2f30b2a32c0234e7e376519a44e" category="inline-link-macro">同じシャーシとディスクを維持しながら、ARL を使用してアップグレードします。</block>
  <block id="dfd865f2d8a7847deea386561d57d6ab" category="cell"><block ref="d5dab9ae669d9433d7055784bb29c8c7" category="inline-link-macro-rx"></block>。</block>
  <block id="c016f2ad87c195aba089a085eb1654e7" category="cell">SVM を再配置していますか?</block>
  <block id="4fb2cb21dc3e75dde8f863702755da43" category="inline-link-macro">SVMのデータ移動 - 概要</block>
  <block id="1c42ed2b59214b87d822dd5017bc2e77" category="cell">参照<block ref="f5ec7b921dd29fa0a34c4b5d1f4565b8" category="inline-link-macro-rx"></block>。</block>
  <block id="9ec7090eb33407e101e04bf9b69e3589" category="cell">MetroCluster構成をアップグレードしていますか?</block>
  <block id="52e927fa9ff9982893744a27582c6c25" category="cell">参照<block ref="64af35d559b5326923c0d917526da292" category="inline-link-macro-rx"></block>。</block>
  <block id="ee02ff06a678b4f0bf35d84ad8172be2" category="cell">個々のコンポーネントを交換するのですか?</block>
  <block id="d65572507ebaf55db388e34a847557ea" category="cell">参照<block ref="bcf4c677eadf935a910ed0b1e7ac432c" category="inline-link-macro-rx"></block>そのコンポーネントのフィールド交換可能ユニット (FRU) のチラシを見つけます。</block>
  <block id="4c57db980fd04065c39ac4dffcef854a" category="section-title">例: FAS9500からFAS90へのアップグレード</block>
  <block id="18f154e130f3704e87f40b22af08eb89" category="paragraph">この例では、 FAS9500から FAS90 コントローラーへのアップグレードの可能な回答を示します。</block>
  <block id="a97ea56b0e00b2379736ae60869ff66a" category="cell">質問</block>
  <block id="67ca848a550c561e54a81891f0d6d223" category="cell">回答例</block>
  <block id="be3ad2de4d2b8e3ba0b5c1aa4b8cb05b" category="cell">いいえFAS9500と FAS90 はどちらもONTAP 9.15.1 を実行します。</block>
  <block id="d3334963d764fa4e8de5f77317d6ec86" category="cell">中断を伴うアップグレードを実行しますか?</block>
  <block id="5eeadbc38fb7c86d39e9b4b88587473b" category="cell">いいえ。アップグレード中も実稼働環境をオンラインのままにしておきたいのです。</block>
  <block id="980384b8326ad5f69899ae62e2ab1ecb" category="cell">○システムがモジュラー式か統合式かに応じて、ボリュームを移動するか、アグリゲート再配置 (ARL) を使用することでアップグレードできます。</block>
  <block id="639cdefe077091e96c8787665fcbb7ca" category="cell">モジュラーシステムはありますか?</block>
  <block id="1a4026ddffb82b6b9ac717175bed5832" category="cell">○FAS9500は、外部ストレージ シェルフを備えたモジュラー システムです。  ARL を使ってアップグレードできます。</block>
  <block id="6b5453e8fcd8e2749847ab38c45261c3" category="cell">統合システムがあり、ボリュームを移動してアップグレードしたいですか?</block>
  <block id="9af392aee692c2ff21ce87eb631be389" category="cell">いいえFAS9500はモジュラー システムなので、これは適用されません。</block>
  <block id="575a6b1f82c7a41dfcc1260ff9935fcc" category="cell">いいえ。同じ SVM を維持しながらハードウェアをアップグレードしています。</block>
  <block id="5d32d7e49401b6906ebfeb106c811c06" category="cell">いいえ。これは標準の HA ペア クラスタです。</block>
  <block id="01f86cedd6c4c38a70b4de409ea5b9cd" category="cell">いいえ。コントローラーシステム全体をアップグレードしています。</block>
  <block id="c608ae28350f6ab483c6756e71344bef" category="paragraph">*この例の推奨アップグレード パス:*<block ref="a1631b4a67814fc247ed3125116eb66b" category="inline-link-macro-rx"></block> FAS9500はモジュラー システムであり、ARL は中断のないアップグレード方法を提供するためです。</block>
  <block id="8ae064b1f26a14a321bdd37f8e7c147b" category="cell">AFF C60、AFF C80</block>
  <block id="a01ca45740c62abf88d40d7c6b75626c" category="paragraph">^2^ AFF A800または内部ディスクと外部ディスクをサポートするシステムにアップデートする場合は、内部 NVMe ディスク上のルート アグリゲートに関する特定の手順に従う必要があります。参照<block ref="13193a83e6d1d3a0ad7f7d39140ab8c7" category="inline-link-macro-rx"></block>そして<block ref="e81929257c1b77de68576a8a37b1e464" category="inline-link-macro-rx"></block>。</block>
  <block id="8ea4792550e67c99e46356bbdb3b5adc" category="paragraph">コントローラのアップグレード中に問題が発生した場合は、<block ref="d170dd544fa530f9129069c7fbfdc956" category="inline-link-macro-rx"></block>セクション。発生する可能性のある障害に関する情報は、手順のフェーズごとにリストされています。<block ref="1e7f97890c56f8e84d1c3bfb7b3e84a7" category="inline-link-macro-rx"></block> 。</block>
  <block id="9461d51010fac8414124b0927dca8e3d" category="list-text">MetroCluster構成の場合、<block ref="a5fd50e267aa742edfb254af48aa31df" category="inline-link-macro-rx"></block>ノードに接続されているディスクを検出します。</block>
  <block id="576aba72a7a92b2c78395c8632ac2b4a" category="admonition">この段階でエラーが発生する可能性があります。エラーが発生した場合は、以下のサブステップを繰り返します。<block ref="3d86a68aa8fb2ef1661a4814f02f3b64" category="inline-xref-macro-rx"></block>システムが正常に起動するまで。</block>
  <block id="1b251a6545aaa60cfce829c062bad4c6" category="paragraph">コントローラのアップグレード中に問題が発生した場合は、<block ref="d170dd544fa530f9129069c7fbfdc956" category="inline-link-macro-rx"></block>詳細情報および可能な解決策については、こちらをご覧ください。</block>
  <block id="7595b5b2f33e67aef80e7fb106f5d9c7" category="paragraph">交換用モジュールを搭載した Node1 の起動準備が完了しました。サポートされている交換モジュールは、<block ref="f48bb6f7501a6484670164b41fb968ae" category="inline-link-macro-rx"></block> 。</block>
  <block id="814388f801b80ae9095417204e6c9db9" category="paragraph">交換用モジュールを搭載した Node2 の起動準備が完了しました。サポートされている交換モジュールは、<block ref="f48bb6f7501a6484670164b41fb968ae" category="inline-link-macro-rx"></block> 。</block>
  <block id="03abda8c19912cead385e464a7c36590" category="list-text">ダウンタイムを含む既存のシステムからアップグレードする場合は、<block ref="f48bb6f7501a6484670164b41fb968ae" category="inline-link-macro-rx"></block>ストレージを移動してコントローラ ハードウェアをアップグレードするか、テクニカル サポートにお問い合わせください。参照<block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block>_ボリュームまたはストレージの移動によるアップグレード_にリンクします。</block>
  <block id="b2cf47c2f8de48c91a2658d1bae42ab8" category="admonition">シャーシの電源はすでにオンになっているため、node2 は完全に装着されるとすぐに起動を開始します。ノード2 が起動しないようにするには、コントローラー モジュールを完全に挿入する前に、コンソール ケーブルと管理ケーブルを接続します。</block>
  <block id="914a76ca2b7f6ddaae8d7322d8dfd459" category="paragraph">交換用コントローラ モジュールがシャーシにインストールされ、電源がオンになっていない限り、交換用コントローラ モジュールのブート メディアにインストールされているONTAPのバージョンを確認することはできません。交換システムのブート メディア上のONTAPバージョンは、アップグレードする古いシステムで実行されているONTAPバージョンと同じである必要があり、ブート メディア上のプライマリ ブート イメージとバックアップ ブート イメージの両方が一致している必要があります。アップグレードでサポートされる最小のONTAPバージョンを確認するには、<block ref="f48bb6f7501a6484670164b41fb968ae" category="inline-link-macro-rx"></block> 。</block>
  <block id="fa25f8cd417cf37165c34fcb9720ffe3" category="list-text">[[verify-rcf-step3]]クラスタ ポートとスイッチ RCF を確認します。</block>
  <block id="2138fe46f5a4636fa20671bcd5e370b9" category="paragraph">これには、新しいノードを結合し、ボリュームと LIF を新しいノードに移動し、クラスターから削除するノードを結合解除する必要があります。2 ノードのスイッチレス クラスターをアップグレードする場合は、新しいノードを追加する前に、クラスター スイッチのペアを使用してスイッチ接続クラスターに変換します。</block>
  <block id="1e7b20b34e3e14bc87b5019115ef6319" category="paragraph">ボリュームを移動してアップグレードするには、元のノードを準備し、新しいノードをクラスターに参加させます。ボリュームを新しいノードに移動し、LIF を構成して、元のノードをクラスターから削除します。</block>
  <block id="febd744aeea49809fb1302b73fa6bd8c" category="inline-link-macro">元のノードをクラスターから削除する</block>
  <block id="5f9dcd9884f9526b20b37705a8075dc7" category="paragraph-title"><block ref="36915574c413876eaa75cbd48f69fd00" category="inline-image-macro-rx" type="image"></block><block ref="de2c8f88da32b208ab4a1bf0c1405c32" category="inline-link-macro-rx"></block></block>
  <block id="04c0dc0ac08f266118ef312b94f34222" category="paragraph">ボリュームが新しいノードに移動されたら、元のノードをクラスターから削除します。ノードを削除すると、ノードの構成が消去され、すべてのディスクが初期化されます。</block>
  <block id="1411918bbf69ad4104cdc56864b603a3" category="paragraph"><block ref="1411918bbf69ad4104cdc56864b603a3" category="inline-link-macro-rx"></block></block>
  <block id="cbbd4da8364a1dcf2593c3eec92abe27" category="paragraph"><block ref="cbbd4da8364a1dcf2593c3eec92abe27" category="inline-link-macro-rx"></block></block>
  <block id="cf954e9acfd74a54fe766c2c130222c6" category="paragraph"><block ref="cf954e9acfd74a54fe766c2c130222c6" category="inline-link-macro-rx"></block></block>
  <block id="638758de43a31bd2903f659581f78fa7" category="paragraph"><block ref="638758de43a31bd2903f659581f78fa7" category="inline-link-macro-rx"></block></block>
  <block id="d350fa659f98e0153758612c202e6a04" category="summary">ボリュームが新しいノードに移動されたら、元のノードをクラスターから削除します。ノードを削除すると、ノードの構成が消去され、すべてのディスクが初期化されます。</block>
  <block id="174d5560f210e4b4b5a29f385b2c8035" category="paragraph">ボリュームを元のノードから新しいノードに移動し、データ LIF を移動または削除した後、元のノードをクラスターから削除します。ノードを削除すると、ノードの構成が消去され、すべてのディスクが初期化されます。</block>
  <block id="fcd2352296590a0e2accae2dd13e31d6" category="list-text">[[disable-ha]]元のノードの高可用性（HA）構成を無効にします。</block>
  <block id="2c1e3c1177e032883dd8cedb7237369c" category="paragraph"><block ref="cfb56c7a6f1b3b0505ee17fb92209fba" prefix="" category="inline-code"></block></block>
  <block id="bf80321073982fe86a71c1af9fac0650" category="list-text">[[epsilon-true]]元のノードの 1 つが epsilon を保持している場合は、クラスターから削除しないノードに epsilon を移動します。</block>
  <block id="4b839279170b4ba0703853fb5c2cb9da" category="list-text">元のノードからイプシロンを削除します。</block>
  <block id="222406298d9a2f2c033dca8a74afd55c" category="paragraph"><block ref="de7321e59bd990ec3ef09ca78116a7b0" prefix="" category="inline-code"></block></block>
  <block id="7a788eb6946d9ba1aaad7df7bfb5f5b2" category="list-text">イプシロンを別のノードに割り当てます。</block>
  <block id="b0c1e0271345231f93266b65411815c2" category="paragraph"><block ref="45f47d97caec3e0967eb10311176b1bb" prefix="" category="inline-code"></block></block>
  <block id="14f47a56746d8dd06d7152a27fa22219" category="list-text">現在のマスター ノードを特定します。</block>
  <block id="e477c0774c6014b5173ffa6810d512ab" category="paragraph"><block ref="484f24f8e4da80a1185aa63fa1d5fc08" prefix="" category="inline-code"></block></block>
  <block id="f56d76980d50ef81b1a4f2246dbcf0da" category="paragraph">マスターノードは、次のようなプロセスを保持するノードです。<block ref="d724f231a9a7b89757c4394d6622bc47" prefix=" " category="inline-code"></block>、<block ref="7b588256fbdc51b849239cf8988219ff" prefix=" " category="inline-code"></block>、<block ref="4855d47f82dd3929173aadd191f2a0ee" prefix=" " category="inline-code"></block>、<block ref="1ed70af3fcff64fcd6c818d86b6e6150" prefix=" " category="inline-code"></block>、 そして<block ref="29fa19e764c47fa898f697bf7bb940db" prefix=" " category="inline-code"></block>。</block>
  <block id="b799370e99c40124bdcc44e4ed7a5704" category="list-text">削除するノードが現在のマスター ノードである場合は、クラスター内に残っているノードをマスター ノードとして選択できるようにします。</block>
  <block id="ac13fc86d8d30a4abbb50425385fe453" category="list-text">現在のマスター ノードをクラスターに参加できないようにします。</block>
  <block id="7021c105080628669b133405100efc63" category="paragraph"><block ref="f2b8f9d3d7fb27d37deaaf84ee69a072" prefix="" category="inline-code"></block></block>
  <block id="84023f697c3d7f175eb48d9e7f81fe97" category="paragraph">適格性が回復されるまで、ノードは異常としてマークされます。マスター ノードが参加できなくなると、クラスタ クォーラムによって残りのノードの1つが新しいマスターとして選出されます。</block>
  <block id="834ca6428bef51142e4d70a6c409829e" category="paragraph">HA ペアの最初のノードでこの手順を実行する場合は、そのノードのみを不適格としてマークする必要があります。HA パートナーのステータスを変更しないでください。</block>
  <block id="c45a4c98c59ca383859dc9ca2d7b3243" category="paragraph">パートナー ノードが新しいマスターとして選択された場合は、イプシロンを保持しているかどうかを確認する必要があります。パートナー ノードがイプシロンを保持している場合は、イプシロンを無効にする前に、クラスター内に残っている別のノードにイプシロンを移動する必要があります。これらの手順を繰り返してパートナー ノードを削除するときにこれを実行します。</block>
  <block id="fa46d2d3d8cfe760c5a42ee99c2bb479" category="list-text">以前のマスター ノードを再びクラスタに参加できるようにします。</block>
  <block id="c1f0c4bf4b8a0d924276f97311b2b56c" category="paragraph"><block ref="14dcae85a302a6e4089a3c2a5636ff04" prefix="" category="inline-code"></block></block>
  <block id="342dbc3880ef101e1ed2b5b78347d7d3" category="list-text">クラスタ内に残っているノードのリモート ノード管理 LIF またはクラスタ管理 LIF にログインし、元の各ノードをクラスタから削除します (高度な権限レベル)。</block>
  <block id="eb1f2131641f5195e8a8d9b93f797562" category="paragraph">ノード名付き:</block>
  <block id="9900c92f7c4f327f3d129fcdb88c5a95" category="paragraph">ノード IP の場合:</block>
  <block id="e1b2dd8ee5d4a8767f514f7140d3b5b7" category="paragraph">混合バージョンのクラスタがあり、最後の下位バージョンのノードを削除する場合は、<block ref="980f71817e3a06bee87bd061faeb423d" prefix=" " category="inline-code"></block> これらのコマンドにパラメータを指定します。</block>
  <block id="76732b147c5a72422d23da150a4c5434" category="paragraph">次の内容のメッセージが表示されます。</block>
  <block id="f80f10147ba45bd1fef6e3c0af2ad9b6" category="list-text">ノードのフェイルオーバー パートナーをクラスタから削除する必要があること。</block>
  <block id="f8794e0f00d445cfe92a1a1eeb5fdb7d" category="list-text">ノードを削除した後、クラスターに再度参加させる前に、ブート メニュー オプション *(4) 構成を消去してすべてのディスクを初期化する* またはオプション *(9) 高度なドライブ パーティションの構成* を使用して、ノードの構成を消去し、すべてのディスクを初期化する必要があります。</block>
  <block id="4fcbf7b91c2fe0247f60ee2199672575" category="paragraph">ノードを削除する前に対処が必要な条件がある場合は、エラー メッセージが表示されます。メッセージの内容は、たとえば、ノードに削除が必要な共有リソースがある、あるいはノードのクラスタHA構成またはストレージ フェイルオーバー構成を無効にする必要があるなどの場合があります。</block>
  <block id="39e6f8500af6b07f2903990336145751" category="paragraph">ノードがクォーラム マスターの場合、クラスタのクォーラムがいったん失われて、すぐに戻ります。クォーラムが失われるのは一時的であり、データの操作には影響しません。</block>
  <block id="5b04742f17c701ff3b58fe32667cc471" category="list-text">失敗メッセージがエラー状態を示している場合は、それらの状態に対処して再度実行してください。<block ref="b592ef8b0e17ac31ab55e93e7c1d10e1" prefix=" " category="inline-code"></block> または<block ref="5d16191a3b7abaee7967de5fd82cd336" prefix=" " category="inline-code"></block> 指示。</block>
  <block id="bb73c71d58dba4f68bd9a8e3fa5709b6" category="paragraph">ノードがクラスターから正常に削除されると、自動的に再起動します。</block>
  <block id="b16b992bede9cd61adafd05ccfa8b5db" category="list-text">ノードを転用する場合は、ノードの設定を消去し、すべてのディスクを初期化します。</block>
  <block id="f68297d08c23f1c81caf07d193fce59a" category="list-text">ブート プロセス時に、プロンプトに応じてCtrl+Cキーを押してブート メニューを表示します。</block>
  <block id="5b43d3aa91abf75fd24c44f1341b2f06" category="list-text">ブートメニューオプション*(4) 構成をクリーンアップし、すべてのディスクを初期化する*を選択します。</block>
  <block id="82049266f76a1c9f2f0a3be4c999f4d2" category="list-text">[[return-admin]]クラスター内の新しいノードの 1 つで管理者権限レベルに戻ります。</block>
  <block id="c4ca4238a0b923820dcc509a6f75849b" category="inline-xref">1</block>
  <block id="d3d9446802a44259755d38e6d163e820" category="inline-xref">10</block>
  <block id="d189cecc16115f8a1464438558157df4" category="list-text">手順を繰り返す <block ref="ad03471bc3c3d3a60bb07d8e505cecf8" category="inline-xref-macro-rx"></block> に <block ref="0b50026eb51fd5abcc3f6c551ad9a731" category="inline-xref-macro-rx"></block> クラスターからフェールオーバー パートナーを削除します。</block>
  <block id="168c92437cbc3465963cce1942e62338" category="paragraph"><block ref="168c92437cbc3465963cce1942e62338" category="inline-link-macro-rx"></block></block>
  <block id="b442cda004fcb2b77f9a06066859253e" category="paragraph">クラスタが SAN 環境にある場合は、元のノードをクラスタから削除する前に、不要になった SAN LIF を元のノードから削除する必要があります。</block>
  <block id="de2c8f88da32b208ab4a1bf0c1405c32" category="paragraph"><block ref="de2c8f88da32b208ab4a1bf0c1405c32" category="inline-link-macro-rx"></block></block>
  <block id="0187590ed6627836f657d0d4157f4bd9" category="paragraph"><block ref="0187590ed6627836f657d0d4157f4bd9" category="inline-link-macro-rx"></block></block>
  <block id="9cab58d086b1e90a5b2f49ae6b194edb" category="sidebar">元のノードを削除する</block>
</blocks>