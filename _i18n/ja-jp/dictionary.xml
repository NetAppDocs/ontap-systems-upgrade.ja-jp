<?xml version="1.0" encoding="UTF-8"?>
<blocks>
  <block id="6a537092418b1517855bd9bd8a6c8418" category="summary">ノード 4 をラックに設置し、ノード 2 の接続をノード 4 に転送し、ブートノード 4 をブートして、 ONTAP をインストールする必要があります。</block>
  <block id="1a02fe8fc6a186319dd3345573fc3717" category="doc">ノード 4 をインストールしてブートします</block>
  <block id="75586863c552442d574a9bbfc3a0d408" category="paragraph">ノード 4 をラックに設置し、ノード 2 の接続をノード 4 に転送し、ノード 4 をブートして、 ONTAP をインストールする必要があります。次に、このセクションで説明するように、ノード 2 のスペアディスク、ルートボリュームに属するディスク、およびプロセスの前にノード 3 に再配置されなかったルート以外のアグリゲートを再割り当てする必要があります。</block>
  <block id="5f190baddba85177825d174bc2428bc9" category="paragraph">再配置処理はこのフェーズの開始時に一時停止されます。このプロセスはほとんどが自動化されており、処理は一時停止してステータスを確認できます。この処理は手動で再開する必要があります。</block>
  <block id="550ffaa7219faf74146770514db0d8e8" category="inline-link-macro">ネットブートを準備</block>
  <block id="cdb3662e6ecd47991de3008672ab3eb8" category="paragraph">node2 に同じバージョンの ONTAP 9 がインストールされていない場合は、 node4 をネットブートする必要があります。node4 のインストールが完了したら、 Web サーバに格納されている ONTAP 9 イメージからブートします。その後、の手順に従って、後続のシステムのブートに使用する正しいファイルをブートメディアデバイスにダウンロードできます <block ref="4815c2d091d790c1d3bab94177b38eaf" category="inline-link-macro-rx"></block>。</block>
  <block id="7a262cb0d3d917313c8ba12f996fe83c" category="list-title">重要</block>
  <block id="89023b09a8e04215547178052eb90222" category="inline-link-macro">ノード 4 の FC ポートを設定します</block>
  <block id="113dd8c6d49d13f5871e1cbe53350eb2" category="inline-link-macro">ノード 4 の UTA / UTA2 ポートを確認して設定してください</block>
  <block id="6f4a225b29c0975663d0e4b9e1f4547f" category="inline-xref">手順 1.</block>
  <block id="2f5ad93b7f0dd7bdcdf63542c05e8ebe" category="inline-xref">手順 21</block>
  <block id="f775037aa1f7a8a52b5159236f7449e7" category="inline-xref">手順 23</block>
  <block id="09702fca7923997e0da2187b92badbd9" category="list-text">ストレージアレイに接続されている V シリーズシステム、またはストレージアレイに接続されている FlexArray 仮想化ソフトウェアを使用するシステムをアップグレードする場合は、これで完了です <block ref="72a284a0ab19d0d6976ab9f3aa1bfc65" category="inline-xref-macro-rx"></block> から <block ref="e953da376eb12d20ff3d04f195189ba7" category="inline-xref-macro-rx"></block>をクリックしてから、このセクションの指示に従ってください <block ref="1d789633b45165b05bf13f9838060fe6" category="inline-link-macro-rx"></block> およびへ <block ref="15e1611f6cc2b64b7163cc152446c8c0" category="inline-link-macro-rx"></block>、保守モードでコマンドを入力します。その後、このセクションに戻ってからを使用して再開する必要があります <block ref="7d33d698028361a6b46f35be2a3ff5a2" category="inline-xref-macro-rx"></block>。</block>
  <block id="df5267f8e4bbfa9add1dd732e6b68e41" category="inline-link-macro">ノード 4 で FC または UTA / UTA2 設定を設定します</block>
  <block id="ed722a5ba6799c1f65d4b9716575b170" category="list-text">ただし、ストレージディスクが搭載されたシステムをアップグレードする場合は、このセクション全体を完了してから、に進む必要があります <block ref="a6d322e902b744ff3a11f02b5c6d9496" category="inline-link-macro-rx"></block>クラスタ・プロンプトでコマンドを入力します。</block>
  <block id="f3a29486bed19a90f2da6d007818b427" category="list-title">手順</block>
  <block id="c7009662ac7e20dc02b0e7d7e2ed8804" category="list-text">[[auto_install4_stp1] ノード 4 に十分なラックスペースがあることを確認します。</block>
  <block id="82952c70726b36a56f0651368cd2be05" category="paragraph">node4 が node2 とは別のシャーシにある場合は、 node3 と同じ場所に node4 を配置できます。node2 と node4 が同じシャーシにある場合は、 node4 が適切なラックの場所にすでに存在しているとします。</block>
  <block id="9ef9fab932162728d06bbfd2862c33d9" category="list-text">ノードモデルの _Installation and Setup Instructions _ の手順に従って、ノード 4 をラックに設置します。</block>
  <block id="179ba8fe173567627d42a1a9fc1e6948" category="list-text">ノード 4 をケーブル接続します。 node2 から node4 に接続を移動します。</block>
  <block id="d95867deadfe690e40f42068d6b59df8" category="inline-link-macro">参考資料</block>
  <block id="7c37472309a8c54b0891c8e95190096e" category="list-text">コンソール（リモート管理ポート）</block>
  <block id="f0012d7dc9fbefbb11bb69cd6932aef8" category="list-text">クラスタポート</block>
  <block id="b2d2606b76cd5df666c2b6a0f4bfc496" category="list-text">データポート</block>
  <block id="f35c347c4cb65015138a4d291827b1a1" category="list-text">クラスタポートとノード管理ポート</block>
  <block id="8c4aa541ee911e8d80451ef8cc304806" category="list-text">ストレージ</block>
  <block id="e6627a49532995a915815645abe1e3bc" category="list-text">SAN 構成： iSCSI イーサネットおよび FC スイッチポート</block>
  <block id="0046d599de2c63ac6aee024be099994d" category="admonition">ほとんどのプラットフォームモデルには一意のインターコネクトカードモデルがあるため、インターコネクトカード / FC-VI カードまたはインターコネクト / FC-VI ケーブルの接続を node2 から node4 に移動する必要はありません。MetroCluster 構成の場合は、 FC-VI ケーブルの接続を node2 から node4 に移動する必要があります。新しいホストに FC-VI カードがない場合は、 FC-VI カードの移動が必要になることがあります。</block>
  <block id="8c346c2672eda514d4b912cb897c6c54" category="list-text">node4 への電源を入れてから、コンソール端末で Ctrl+C キーを押してブートプロセスを中断し、ブート環境プロンプトにアクセスします。</block>
  <block id="994bdd0bc026ec99be435de25a9ecc3d" category="admonition">node4 をブートすると、次の警告メッセージが表示される場合があります。</block>
  <block id="d728df788701a4dbee2b7991f0468dad" category="list-text">手順 4 で警告メッセージが表示された場合は、次の操作を実行します。</block>
  <block id="3e1ef1763b3680d2c8fbf0a8ea19db9b" category="list-text">NVRAM バッテリ低下以外の問題を示すコンソールメッセージがないか確認し、必要に応じて対処します。</block>
  <block id="d73910b693432e337843357586f3e39f" category="list-text">バッテリの充電と起動プロセスが完了するまで待ちます。</block>
  <block id="5d043d33743f66f7467bf67aa5653705" category="admonition">* 注意：遅延は無視しないでください。バッテリーの充電に失敗すると、データが失われるおそれがあります。 *</block>
  <block id="b1e6d70b6a993d323936c87bff29461b" category="admonition">を参照してください <block ref="4815c2d091d790c1d3bab94177b38eaf" category="inline-link-macro-rx"></block>。</block>
  <block id="d583a56b378186283bc180e8dfcdad82" category="list-text">[[step6] 次のいずれかの操作を選択して、ネットブート接続を設定します。</block>
  <block id="d1adb867eac5534b9fe3de6b0b271291" category="admonition">ネットブート接続として管理ポートおよび IP を使用する必要があります。アップグレードの実行中にデータ LIF IP を使用しないでください。データ LIF が停止する可能性があります。</block>
  <block id="3a325cd28eedfb6e2a8828a9cc5043a2" category="cell">動的ホスト構成プロトコル（ DHCP ）の状態</block>
  <block id="c1325f6903ebb5ebb2bb519a73ddb1b0" category="cell">作業</block>
  <block id="5bda814c4aedb126839228f1a3d92f09" category="cell">実行中です</block>
  <block id="aee2adde97afad89c105aeb72e6320b3" category="cell">ブート環境プロンプトで次のコマンドを使用して、自動的に接続を設定します。 ifconfig e0M -auto</block>
  <block id="84435c8fed125c1f06699e20bdcee63d" category="cell">実行されていません</block>
  <block id="de9354e54a4c11f4eec6e3f3a44be9a1" category="cell">ブート環境プロンプトで次のコマンドを入力して、接続を手動で設定します。 ifconfig e0M -addr= &lt;filer_addr&gt; -mask= &lt;netmask&gt; -gw= &lt;gateway&gt; -dns= &lt;dns_addr&gt; domain= &lt;dns_domain&gt; `&lt;filer_addr&gt;`&lt;netmask&gt;` はストレージシステムのネットワークマスクです。「 &lt;gateway&gt;` 」は、ストレージシステムのゲートウェイです。「 &lt;dns_addr&gt; 」は、ネットワーク上のネームサーバの IP アドレスです。このパラメータはオプションです。「 &lt;dns_domain&gt; 」は DNS ドメイン名です。このパラメータはオプションです。* 注 * ：インターフェイスによっては、他のパラメータが必要になる場合があります。ファームウェア・プロンプトで「 help ifconfig 」と入力すると、詳細が表示されます。</block>
  <block id="15fe98426987c07cba715dffbfb96c7e" category="list-text">ノード 4 でネットブートを実行します。</block>
  <block id="0ba2b3e0a887666765eb2d690768c576" category="cell">用途</block>
  <block id="383b9c142d0ac9c95fc6323618a87c9b" category="cell">FAS/AFF8000 シリーズシステム</block>
  <block id="8385f026f91d6fc14fd02b225112bac8" category="cell">netboot\http://&lt;web_server_ip/path_to_web-accessible_directory&gt;/netboot/kernel`</block>
  <block id="edc91455dc5116cbd53031ff17548c91" category="cell">その他すべてのシステム</block>
  <block id="1e3f57d872237ce4621e377ee8ff6896" category="cell">netboot\http://&lt;web_server_ip/path_to_web-accessible_directory&gt;/&lt;ontap_version&gt;_image.tgz`</block>
  <block id="17e387f327c3866b0d0ae33451a79635" category="paragraph">「 &lt;path_the_web-accessible_directory&gt; 」は、手順 1 の「 &lt;ONTAP_version&gt;_image.tgz 」をダウンロードした場所に配置する必要があります <block ref="4815c2d091d790c1d3bab94177b38eaf" category="inline-link-macro-rx"></block>。</block>
  <block id="85bd8aebb41cb27f7bc364e977313958" category="admonition">トランクを中断しないでください。</block>
  <block id="45b788b600b6973bddaa17d7d85de037" category="list-text">起動メニューからオプション（ 7 ） Install new software first （新しいソフトウェアを最初にインストール）を選択します。</block>
  <block id="adcfa58e9fef1d45cc4bd403ac68eb9f" category="paragraph">このメニューオプションを選択すると、新しい ONTAP イメージがブートデバイスにダウンロードおよびインストールされます。</block>
  <block id="161347e221ff82d9edced01f7b383668" category="admonition">次のメッセージは無視してください： This 手順 is not supported for Non-Disruptive Upgrade on an HA pair' The note 環境 nondisruptive upgrade of ONTAP and not upgrades of controllers新しいノードを希望するイメージに更新する場合は、必ずネットブートを使用してください。別の方法で新しいコントローラにイメージをインストールすると、正しいイメージがインストールされない場合があります。この問題環境 All ONTAP リリース</block>
  <block id="0b22fb8d0feec85055f45c8c4a298766" category="list-text">手順を続行するかどうかを確認するメッセージが表示されたら、「 y 」と入力し、パッケージの入力を求められたら URL を入力します。</block>
  <block id="84ea00dba7c6a1cf0426e58385307e4f" category="paragraph">http://&lt;web_server_ip/path_to_web-accessible_directory&gt;/&lt;ontap_version&gt;_image.tgz` にアクセスします</block>
  <block id="7b3f6c26774d36cd594edf297f0f8f57" category="list-text">次の手順を実行してコントローラモジュールをリブートします。</block>
  <block id="7043cc5b7b924f62a8af6f3d2e706c77" category="list-text">次のプロンプトが表示されたら 'n' を入力してバックアップ・リカバリをスキップします</block>
  <block id="330edabea721cfdb93e4a4aed8cd1730" category="list-text">次のプロンプトが表示されたら 'y' と入力して再起動します</block>
  <block id="504d065328326a8677a260e4447bea63" category="paragraph">コントローラモジュールはリブートしますが、ブートメニューで停止します。これは、ブートデバイスが再フォーマットされたことにより、構成データのリストアが必要なためです。</block>
  <block id="ca95d6295c1b1cab041926d491fa54ba" category="list-text">ブート・メニューからメンテナンス・モード「 5 」を選択し、ブートを続行するように求めるプロンプトが表示されたら「 y 」と入力します。</block>
  <block id="bea7673b9c3eda34bfe449c80f92539f" category="list-text">コントローラとシャーシが HA 構成になっていることを確認します。</block>
  <block id="70cfb57c22486ea2d08d331675532dce" category="paragraph">「 ha-config show 」</block>
  <block id="d66825c57ef1d03f12142772b5cb7bae" category="paragraph">次に 'ha-config show コマンドの出力例を示します</block>
  <block id="8d88ee8626e30313013b223ba409abaa" category="admonition">システムは、 HA ペア構成かスタンドアロン構成かを PROM に記録します。状態は、スタンドアロンシステムまたは HA ペア内のすべてのコンポーネントで同じである必要があります。</block>
  <block id="55c802ca03b1fc5b58c1d59d28131125" category="list-text">コントローラとシャーシが HA として構成されていない場合は、次のコマンドを使用して構成を修正します。</block>
  <block id="dd974151ca8e1528e09f3e46a090f617" category="paragraph">「 ha-config modify controller ha 」を参照してください</block>
  <block id="898e93ac193351b4a5f895216aad0508" category="paragraph">「 ha-config modify chassis ha 」を参照してください</block>
  <block id="236df8dd892b4bd6bb01e86747337e6f" category="paragraph">MetroCluster 構成の場合は、次のコマンドを使用してコントローラとシャーシを変更します。</block>
  <block id="911c90c39145c3c3c0d524809f4a16c8" category="paragraph">「 ha-config modify controller mcc 」</block>
  <block id="1d3bd99dc4d12eba418aa32c0e69ed77" category="paragraph">「 ha-config modify chassis mcc 」</block>
  <block id="d09b053bad809215bd1c4350481aba44" category="list-text">メンテナンスモードを終了します。</block>
  <block id="819817945fea31f0c3596c841e685904" category="paragraph">「 halt 」</block>
  <block id="106cd92eb2d2b994c9a8675214fd438c" category="paragraph">ブート環境のプロンプトで Ctrl+C を押し、 AUTOBOOT を中断します。</block>
  <block id="088efa1f2f879b1cccaa5b548a064885" category="list-text">[auto_install4_step15]] ノード 3 で、システムの日付、時刻、およびタイムゾーンを確認します。</block>
  <block id="0dbad5b96349237116f63f0f389bd7f4" category="paragraph">「食事」</block>
  <block id="68dd867f743672fe385fd727b406983a" category="list-text">node4 で、ブート環境のプロンプトで次のコマンドを使用して日付を確認します。</block>
  <block id="3e72511c09e554faf49052f79d627689" category="paragraph">「日付」</block>
  <block id="10615484104523967682784d6824a536" category="list-text">必要に応じて、 node4 に日付を設定します。</block>
  <block id="833ce90830a0406f310191c0da1f76da" category="paragraph">'Set date &lt;mm/dd/yyyy&gt;`</block>
  <block id="aa03f64841cdad6f19ac1550e1ad8c29" category="list-text">node4 で、ブート環境のプロンプトで次のコマンドを使用して時間を確認します。</block>
  <block id="667f3a6a11750e110d0c1442d2aa20e7" category="paragraph">「時間」</block>
  <block id="7651eb09fbac7d811bab7ed026019b25" category="list-text">必要に応じて、 node4 に時間を設定します。</block>
  <block id="25a249a3cdba620e6eba67639be13589" category="paragraph">時刻を設定します</block>
  <block id="55f472f17ae9bd54337956b780332fff" category="list-text">必要に応じて、 node4 にパートナーシステム ID を設定します。</block>
  <block id="50e811b2a9396215b344a15d01fc1fea" category="paragraph">'setenv partner-sysid &lt;node2 _sysid&gt;`</block>
  <block id="e02ed2f754f906507b04045b6d64c6a8" category="list-text">設定を保存します。</block>
  <block id="4efce637d6ec3bc2a69f403fd39b9b41" category="paragraph">'aveenv</block>
  <block id="a41540a4727489355ce1dd1fcda58843" category="list-text">[auto_install4_step21] 新しいノードのブートローダで '-partner-sysid' パラメータを設定する必要がありますnode4 の場合、「 partner-sysid 」は node3 のものでなければなりません。node3 の「 partner-sysid 」を確認します。</block>
  <block id="fbe3b6f75f2d8164c601fbd0fdb2d3cd" category="paragraph">printenv partner-sysid</block>
  <block id="62ac7cf3796c3e4bbe3285d1976b1c2c" category="list-text">[[step22]] 次のいずれかの操作を実行します。</block>
  <block id="a566a7773caad8e1452ad7591dace303" category="cell">システムの状態</block>
  <block id="b0d05d370a8e827d5c1d1e92258a25b2" category="cell">ディスクがあり、バックエンドストレージがない</block>
  <block id="7f3ec1ffd93dbf53956485464c8f29a2" category="cell">に進みます <block ref="7d33d698028361a6b46f35be2a3ff5a2" category="inline-xref-macro-rx"></block>。</block>
  <block id="c9d3e45a02f36166b1f2d250fefe0e40" category="cell">は、 V シリーズシステム、または FlexArray 仮想化ソフトウェアがストレージアレイに接続されたシステムです</block>
  <block id="d41d8cd98f00b204e9800998ecf8427e" category="doc"></block>
  <block id="6c87f26ede26b8a4600cd3be3a5c4a39" category="list-text">セクションに移動します <block ref="a6d322e902b744ff3a11f02b5c6d9496" category="inline-link-macro-rx"></block> をクリックし、このセクションのサブセクションを完了します。</block>
  <block id="d4bf40b038a0294c5a0c9cfeacb6b991" category="list-text">このセクションに戻って、から始めて残りの手順を実行します <block ref="7d33d698028361a6b46f35be2a3ff5a2" category="inline-xref-macro-rx"></block>。</block>
  <block id="340156df6d6753b1e8aa84113b4a83e9" category="paragraph">* 重要 * ： V シリーズまたは FlexArray 仮想化ソフトウェアで ONTAP をブートする前に、オンボード FC ポート、 CNA オンボードポート、 CNA カードを再設定する必要があります。</block>
  <block id="f1f401fda84803d54fb9ed083d0ebefa" category="list-text">[[auto_install4_step23]] 新しいノードの FC イニシエータポートをスイッチゾーンに追加します。</block>
  <block id="2a1ffcfd9b3fe851dbeca2f509c1f7a3" category="paragraph">システムにテープ SAN がある場合は、イニシエータをゾーニングする必要があります。必要に応じて、を参照してオンボードポートをイニシエータに変更します <block ref="1d789633b45165b05bf13f9838060fe6" category="inline-link-macro-rx"></block>。ゾーニングの詳細な手順については、ストレージアレイとゾーニングに関するドキュメントを参照してください。</block>
  <block id="626097c557d64952b56d6d6e63d3ad8e" category="list-text">FC イニシエータポートをストレージアレイに新しいホストとして追加し、アレイ LUN を新しいホストにマッピングします。</block>
  <block id="c90869b8dd8fd41fd210932364a2caf7" category="paragraph">手順については、ストレージアレイおよびゾーニングに関するドキュメントを参照してください。</block>
  <block id="20285adb42be1ddc0c2df8f7a2de7595" category="list-text">ストレージアレイ上のアレイ LUN に関連付けられたホストまたはボリュームグループの World Wide Port Name （ WWPN ；ワールドワイドポート名）値を変更する。</block>
  <block id="a2b95adba38da1a033c4cae3447040cc" category="paragraph">新しいコントローラモジュールを設置すると、各オンボード FC ポートに関連付けられている WWPN の値が変更されます。</block>
  <block id="23eacbaf200afc53fbaaaaa3d6705308" category="list-text">スイッチベースのゾーニングを使用している場合は、新しい WWPN 値が反映されるようにゾーニングを調整します。</block>
  <block id="561611b8a20e2e0f3f7213992d997278" category="list-text">[[step27]] NetApp Storage Encryption （ NSE ）がこの構成で使用されている場合、「 setenvarg.storageencryption.support 」コマンドは「 true 」に設定する必要があります。「 kmip.init.maxwait` 」変数は、 node2 構成のロード後にブートループが発生しないように「 off 」に設定する必要があります。</block>
  <block id="0ab3dc62b58693ac60ff9111f9d60a74" category="paragraph">'etenv bootarg.storageencryption.support true</block>
  <block id="461db791196d5961d2d12d83cd09d8ef" category="paragraph">'etenv kmip.init.maxwait off</block>
  <block id="d1cffd7fada9f21315c30db304bb2ca9" category="list-text">ノードをブートメニューに追加します。</block>
  <block id="a94e69437db24dee798bbd90bce4ee0a" category="paragraph">「 boot_ontap menu</block>
  <block id="64782ddcc78f95845d4571abdc1d5f5a" category="inline-link-macro">ノード 4 の UTA / UTA2 ポートの確認と設定、手順 15</block>
  <block id="f5de4d1593689e91265cc76abd91be3e" category="paragraph">FC または UTA / UTA2 設定がない場合は、を実行します <block ref="65c4c751ac1fc661b74f2a8dfa84d816" category="inline-link-macro-rx"></block> ノード 4 が node2 のディスクを認識できるようにします。</block>
  <block id="9f6c1c59e595c7b6b493f92b24930c14" category="inline-link-macro">ノード 4 で FC または UTA / ut2 の設定を行います</block>
  <block id="cbe290335ddc7c966d9c148980b1ddd5" category="list-text">[[step29]] ストレージアレイに接続された FlexArray 仮想化ソフトウェアを使用する MetroCluster 構成、 V シリーズシステム、およびシステムについては、ノードに接続されているディスクを検出するために、 FC または UTA / UTA2 ポートを設定する必要があります。このタスクを完了するには、セクションに進んでください <block ref="39202fc611c1fcac2f1575fc00cb55d3" category="inline-link-macro-rx"></block>。</block>
  <block id="b9afc0f55ceae0ffd6b6f1e1c9a8f62e" category="summary">ノード 4 のネットワーク設定を確認したあと、ノード 3 からノード 4 にアグリゲートを再配置します。</block>
  <block id="32d978cffec9875e4d92dc55b84df69b" category="doc">node2 によって所有されているルート以外のアグリゲートと NAS データ LIF を、 node3 から node4 に移動します</block>
  <block id="33b455f1b5d98f0ba5db998a78bbbbe3" category="paragraph">ノード 4 のネットワーク設定を確認し、ノード 3 からノード 4 にアグリゲートを再配置する前に、ノード 2 に現在ノード 3 に属する NAS データ LIF が、ノード 3 からノード 4 に再配置されていることを確認する必要があります。また、ノード 4 に SAN LIF が存在することも確認する必要があります。</block>
  <block id="d2f28697e2bc23acb2a0a646043ffac0" category="paragraph">アップグレード手順の実行中、リモート LIF は SAN LUN へのトラフィックを処理します。アップグレード時にクラスタやサービスの健全性を維持するために、 SAN LIF を移動する必要はありません。SAN LIF は、新しいポートにマッピングする必要がないかぎり移動されません。ノード 4 をオンラインにしたあと、 LIF が正常に機能しており、適切なポートに配置されていることを確認します。</block>
  <block id="761fe912511daeb08557e2215d0085e3" category="list-text">再配置処理を再開します。</block>
  <block id="d6fd449bc639f92f27b747fd5b40361d" category="paragraph">「システムコントローラの交換が再開」</block>
  <block id="0088774945c7d5ae5289c2de3632524f" category="paragraph">システムは次のタスクを実行します。</block>
  <block id="8f1335854a57fa62ce5fd7596399825b" category="list-text">クラスタクォーラムチェック</block>
  <block id="9ebfbaf3d8306da9bc975b709c5ec632" category="list-text">システム ID の確認</block>
  <block id="02d365a95e78a8c9b434a9c521f379c8" category="list-text">イメージのバージョンチェック</block>
  <block id="2540df2535b5361f67db0cb18a3f91a5" category="list-text">ターゲットプラットフォームのチェック</block>
  <block id="c8740509193885a8e40f7a7fb84ebff6" category="list-text">ネットワーク到達可能性チェック</block>
  <block id="93328d3894b0eabbdee40ef873079464" category="paragraph">ネットワーク到達可能性チェックのこの段階で処理が一時停止します。</block>
  <block id="ba825b8ec370a1f6fa3b0b9ac48b0036" category="paragraph">システムは次のチェックを実行します。</block>
  <block id="e31fb2dedfef9337a9708f375d220030" category="list-text">クラスタの健全性チェック</block>
  <block id="8ea7886b35c3e44ad6fcf3a1535ab9e7" category="list-text">クラスタ LIF のステータスを確認します</block>
  <block id="545969fcc9e42f8cf5ca0598e1ec25f6" category="paragraph">これらのチェックの実行後、システムによって、 node2 によって所有されているルート以外のアグリゲートと NAS データ LIF が新しいコントローラ node4 に再配置されます。リソースの再配置が完了すると、コントローラの交換処理が一時停止します。</block>
  <block id="9b1668278d2d17d21775af5a0c8c14b3" category="list-text">アグリゲートの再配置処理と NAS データ LIF の移動処理のステータスを確認します。</block>
  <block id="f1e1b94ce2ba7179506b74127da77af2" category="paragraph">「 system controller replace show-sdetails 」というエラーが表示されます</block>
  <block id="ff23473696232fd91c1e2dcb460109e4" category="paragraph">コントローラ交換用手順が一時停止している場合は、エラーがある場合はチェックして修正し、次に「問題 re sume 」をクリックして操作を続行します。</block>
  <block id="b5cd09b90221c700e1c2cf9d6253d6a1" category="list-text">必要に応じて、取り外した LIF をリストアしてリバートします。取り外した LIF を表示します。</block>
  <block id="0b66eef739f727e3f877d8fd0e6b8862" category="paragraph">cluster controller -replacement network ヒエラー（クラスタコントローラ交換ネットワークが取り外されました） -interface show</block>
  <block id="e288d72d848472060faab52648a13f10" category="paragraph">LIF が取り外された場合は、ホームノードをノード 4 にリストアします。</block>
  <block id="26490175c6a9bb3f68c33041e7c3bd2e" category="paragraph">クラスタ・コントローラ交換ネットワークが取り外されましたインタフェース・リストア -home-node</block>
  <block id="6def760ec3a422405912b1de335c67db" category="list-text">この処理を再開すると、必要なポストチェックの実行をシステムに求めるプロンプトが表示されます。</block>
  <block id="f3bf2563f63e5f2af4793dec3cbb4411" category="paragraph">次のポストチェックが実行されます。</block>
  <block id="9e9f6a103b5a748cadf8dfd54b8e29ac" category="list-text">アグリゲートの再構築チェック</block>
  <block id="ea017e018f3e760c65f3b02f928b8e43" category="list-text">アグリゲートのステータスを確認します</block>
  <block id="08f0db77633fd9c7f12fcd8827332b9d" category="list-text">ディスクのステータスを確認します</block>
  <block id="3c1799bbeb29b748f57f26ac2c4fc6f9" category="list-text">ボリュームチェック</block>
  <block id="14c464f3076760dd0c7480550e4464d7" category="summary">ノード 2 を撤去するには、ノード 2 を適切にシャットダウンし、ラックまたはシャーシから取り外す必要があります。</block>
  <block id="befd434b83717d2b7bd83967d66e9157" category="doc">ノード 2 を撤去</block>
  <block id="3b70100fce1839004dba40191f90a2c9" category="list-text">処理を再開します。</block>
  <block id="21d67404cbc8811a82f375c6eb59ce82" category="paragraph">ノードは自動的に停止します。</block>
  <block id="ac616410952c35e808a3c7ce4ea5b4a7" category="inline-link-macro">古いシステムの運用を停止</block>
  <block id="975ea661f5a70916862dd59a8818ebf7" category="paragraph">アップグレードの完了後に、 node2 の運用を停止できます。を参照してください <block ref="6e48b929ca0767f00c15eeb6d7e78755" category="inline-link-macro-rx"></block></block>
  <block id="b39850fa882a12596e03ef7779fcfebc" category="list-text"><block ref="5e1bb6d16e6bc7a1d750ae669f510747" category="inline-xref-macro-rx"></block></block>
  <block id="0945359809dad1fbf3dea1c95a0da951" category="cell">文書化</block>
  <block id="c1df1da7a1ce305a3b60af9d5733ac1d" category="cell">内容</block>
  <block id="a2539e65a13fda0a8ce497ac0baa63a7" category="inline-link-macro">『 Controller Hardware Upgrade Express Guide 』を参照してください</block>
  <block id="2061ab494eae73f1e7251b76a58b27d3" category="cell">ストレージまたはボリュームを移動してクラスタ内のコントローラハードウェアを簡単にアップグレードする方法について説明します。サポートされるモデルをディスクシェルフに変換する方法についても説明します。</block>
  <block id="5d1afe326f483a14ce8cd69456db1384" category="cell">ファブリック構成で MetroCluster のハードウェアコンポーネントとソフトウェアコンポーネントをインストールおよび設定する方法について説明します。</block>
  <block id="e5c39acdb0f682a22a7b242d48ac3ce5" category="inline-link-macro">FlexArray 仮想化インストール要件およびリファレンスガイド</block>
  <block id="d1d13e1cdd7f75473f7902868b6ba3d7" category="cell">FlexArray 仮想化システムのケーブル接続手順とその他の情報について説明します</block>
  <block id="1025c690847593de32961ac3c15bacbd" category="inline-link-macro">『 MetroCluster 管理およびディザスタリカバリガイド』</block>
  <block id="34e4a4d5395b895e2a8897ebef238c1a" category="cell">計画的なメンテナンス時または災害発生時の両方のケースにおける、 MetroCluster のスイッチオーバーとスイッチバック処理の実行方法について説明します。</block>
  <block id="595e15ec8af10c3d959522d0d1eab769" category="cell">MetroCluster 構成でコントローラとストレージモデルをアップグレードし、 MetroCluster FC 構成から MetroCluster IP 構成に移行し、ノードを追加して MetroCluster 構成を拡張する手順について説明します。</block>
  <block id="b42a2144e64bfdf4eecf966f7bb495c5" category="inline-link-macro">ONTAP 9.0 コマンド：マニュアルページリファレンス</block>
  <block id="a4117daa2ff8204dba8b79ed1da09e5b" category="cell"><block ref="a4117daa2ff8204dba8b79ed1da09e5b" category="inline-link-macro-rx"></block></block>
  <block id="81f65dde1fe71b470218b0fbe6dafc23" category="cell">サポートされる ONTAP 9.0 コマンドの構文と使用法について説明します。</block>
  <block id="1447526d9bfec11c73a566b23b4f87ab" category="inline-link-macro">ONTAP 9.1 コマンド：マニュアルページリファレンス</block>
  <block id="3f651f32c2efae31cb0b4da82294b37b" category="cell"><block ref="3f651f32c2efae31cb0b4da82294b37b" category="inline-link-macro-rx"></block></block>
  <block id="d7e58a36d2ecf34ed950099c1e30e349" category="cell">ONTAP 9.1 でサポートされるコマンドの構文と使用法について説明します。</block>
  <block id="25d709d9429cb9179fe81f4343515fa1" category="inline-link-macro">ONTAP 9.2 コマンド：マニュアルページリファレンス</block>
  <block id="89065c0795a681c066df18ebe55464d3" category="cell"><block ref="89065c0795a681c066df18ebe55464d3" category="inline-link-macro-rx"></block></block>
  <block id="be948fce3cd6e191738619444b30062e" category="cell">ONTAP 9.2 でサポートされるコマンドの構文と使用法について説明します。</block>
  <block id="46490acdb4b495cbc81468a4840d2c5d" category="inline-link-macro">ONTAP 9.3 コマンド：マニュアルページリファレンス</block>
  <block id="9d087aa4c3e3015b8ac013580c0f90d4" category="cell"><block ref="9d087aa4c3e3015b8ac013580c0f90d4" category="inline-link-macro-rx"></block></block>
  <block id="119362933ed4ef8c2dbccecbb68cc43b" category="cell">ONTAP 9.3 でサポートされるコマンドの構文と使用法について説明します。</block>
  <block id="1aeb70ab3e33d74db4928037aa88a7eb" category="inline-link-macro">ONTAP 9.4 コマンド：マニュアルページリファレンス</block>
  <block id="8a14044dc26b4cb3bb6448492e70e961" category="cell"><block ref="8a14044dc26b4cb3bb6448492e70e961" category="inline-link-macro-rx"></block></block>
  <block id="929d0856b69565e71fefd5bef5533d93" category="cell">ONTAP 9.4 でサポートされるコマンドの構文と使用法について説明します。</block>
  <block id="6ea3af7ae81e05b625440926c8fcc6ea" category="inline-link-macro">ONTAP 9.5 コマンド：マニュアルページリファレンス</block>
  <block id="78610e5d700899a0dc146918529c56af" category="cell"><block ref="78610e5d700899a0dc146918529c56af" category="inline-link-macro-rx"></block></block>
  <block id="db0052a2214aa0ca3e4d7e0a79e8d79a" category="cell">ONTAP 9.5 でサポートされるコマンドの構文と使用法について説明します。</block>
  <block id="384be8d232a0ab0b84a145e4bf59bbed" category="inline-link-macro">ONTAP 9.6 コマンド：マニュアルページリファレンス</block>
  <block id="84d45c7d2db474ca3af465732948fd8d" category="cell"><block ref="84d45c7d2db474ca3af465732948fd8d" category="inline-link-macro-rx"></block></block>
  <block id="7478969542b0a3320dd1f9c09d30231a" category="cell">ONTAP 9.6 でサポートされるコマンドの構文と使用法について説明します。</block>
  <block id="c9aa14f76f0f0a25762ef86776113011" category="inline-link-macro">ONTAP 9.7 コマンド：マニュアルページリファレンス</block>
  <block id="edcc14f99b45ac8b5b29319da6793eea" category="cell"><block ref="edcc14f99b45ac8b5b29319da6793eea" category="inline-link-macro-rx"></block></block>
  <block id="849578c3a682cf124d61ab2b562aa1fa" category="cell">ONTAP 9.7 でサポートされるコマンドの構文と使用法について説明します。</block>
  <block id="112d3c239cd86d18383aedfae5ed632b" category="inline-link-macro">ONTAP 9.8 コマンド：マニュアルページリファレンス</block>
  <block id="a206ae5c7f29407f29397485796cc31c" category="cell"><block ref="a206ae5c7f29407f29397485796cc31c" category="inline-link-macro-rx"></block></block>
  <block id="c85c87a5f255edc538c88661bb863907" category="cell">サポートされている ONTAP 9.8 コマンドの構文と使用法について説明します。</block>
  <block id="604e3b21e20d2e3d15be71c643b54e69" category="inline-link-macro">ONTAP 9 ディスクとアグリゲートパワーガイド</block>
  <block id="3804b132271e47a4db7521e977b43625" category="inline-link-macro">ONTAP 9 ハイアベイラビリティ構成ガイド</block>
  <block id="8514bd0cded8da51b71a7aba8599153c" category="cell">ストレージフェイルオーバー、テイクオーバー / ギブバックなどのハイアベイラビリティクラスタ構成をインストールおよび管理する方法について説明します。</block>
  <block id="0fa0071d4364b9114c15a5d2758f2577" category="inline-link-macro">ONTAP 9 論理ストレージ管理ガイド</block>
  <block id="5e4a89e01c551e30f3b547a226c6e59d" category="cell">ボリューム、 FlexClone ボリューム、ファイルと LUN 、 FlexCache ボリュームを使用して論理ストレージリソースを効率的に管理する方法について説明します。 重複排除、圧縮、 qtree 、およびクォータ</block>
  <block id="ed99eca5665640e9b0e3fced8264b368" category="cell">クラスタで物理 / 仮想ネットワークポート（ VLAN およびインターフェイスグループ）、 LIF 、ルーティング、およびホスト解決サービスを設定および管理する方法、ロードバランシングでネットワークトラフィックを最適化する方法、および SNMP を使用してクラスタを監視する方法について説明します。</block>
  <block id="1988e9c8cf124cb346a67d52ea613567" category="inline-link-macro">『 ONTAP 9 SAN アドミニストレーションガイド』</block>
  <block id="9660abd0b48a5f9635c3e498547f1163" category="inline-link-macro">ONTAP 9 SAN 構成ガイド</block>
  <block id="684c05de33c5ed574435c18094046bde" category="cell">FC と iSCSI のトポロジと配線方式について説明します</block>
  <block id="2a4f547c7b73b569b09f737f8754554f" category="inline-link-macro">ONTAP 9 ソフトウェアセットアップガイド</block>
  <block id="ec8a498c0ff432b735ba28247dbb239f" category="cell">ONTAP をセットアップおよび設定する方法について説明します。</block>
  <block id="dec0306e681fc720cf31bc4851ebcee4" category="inline-link-macro">ONTAP 9 システムアドミニストレーションリファレンス</block>
  <block id="38f19900a80b03ef2e62f2105ab6323a" category="cell">ONTAP システムの管理方法、 CLI インターフェイスの使用方法、クラスタへのアクセス方法、ノードの管理方法などについて説明します</block>
  <block id="ed46df6261cf79571fbaa1f60a71ddce" category="inline-link-macro">ONTAP 9 アップグレードおよびリバート / ダウングレードガイド</block>
  <block id="25c1844876df2afa3616f32befb014b3" category="cell">ONTAP のダウンロードとアップグレードの手順については、を参照してください</block>
  <block id="9bd1a11fb0d175da8194074a575cbf3a" category="inline-link-macro">「 system controller replace 」コマンドを使用して、 ONTAP 9.5 を実行するコントローラハードウェアを ONTAP 9.7 にアップグレードします</block>
  <block id="f576635c194a19e5910126ab234152d9" category="cell"><block ref="f576635c194a19e5910126ab234152d9" category="inline-link-macro-rx"></block></block>
  <block id="76131ba473c7ab8f940b1defa73cba87" category="cell">ONTAP 9.5 を実行するコントローラを ONTAP 9.7 に無停止でアップグレードする場合に、「 system controller replace 」コマンドを使用してアグリゲートの再配置手順を説明します。</block>
  <block id="0e490704226a6f678e043e59eee46210" category="inline-link-macro">ONTAP 9.8 以降を実行しているコントローラハードウェアをアップグレードするには、「 system controller replace 」コマンドを使用します</block>
  <block id="c6f3014369a1f06fe73f7a2cba39dfb1" category="cell"><block ref="c6f3014369a1f06fe73f7a2cba39dfb1" category="inline-link-macro-rx"></block></block>
  <block id="62a92c3d7ea27667983fb6842f0835ec" category="cell">ONTAP 9.8 を実行するコントローラを、 system controller replace コマンドを使用して無停止でアップグレードする場合に必要なアグリゲートの再配置手順について説明します。</block>
  <block id="743707e39dafe5109cbff1b061b5b76d" category="inline-link-macro">ONTAP 9.7 以前を実行しているコントローラハードウェアは、アグリゲートの再配置を使用して手動でアップグレードします</block>
  <block id="5cb60fbe51b20b5c36b7dee05c9cf1f7" category="cell"><block ref="5cb60fbe51b20b5c36b7dee05c9cf1f7" category="inline-link-macro-rx"></block></block>
  <block id="55b831f07f1b45c03df3d93cd827ad94" category="cell">ONTAP 9.7 以前を実行しているコントローラの手動による無停止アップグレードを実行するために必要なアグリゲートの再配置手順について説明します。</block>
  <block id="0fcc55966131a059d63ed79deda9a495" category="inline-link-macro">ONTAP 9.8 以降を実行しているコントローラハードウェアは、アグリゲートの再配置を使用して手動でアップグレードします</block>
  <block id="48d4ce3e31086711d3ee342fa8447083" category="cell"><block ref="48d4ce3e31086711d3ee342fa8447083" category="inline-link-macro-rx"></block></block>
  <block id="f39fe3ae91660449bc81c96d4bc3f3a6" category="cell">ONTAP 9.8 以降を実行するコントローラの手動無停止アップグレードを実行するために必要なアグリゲートの再配置手順について説明します。</block>
  <block id="f7e23c11beeca2c17c91f38177574a83" category="section-title">参照サイト</block>
  <block id="9d2169c1c2855b78a7aeaa4f42d27dc7" category="inline-link-macro">ネットアップサポートサイト</block>
  <block id="da160308e3b4b4a80bf1b72b5bdbedb8" category="inline-link-macro">Hardware Universe</block>
  <block id="774a065cb3548cc61fb0ec3bc1494fbe" category="inline-link-macro">ONTAP 9 ドキュメンテーション・センター</block>
  <block id="865e9b4ef52f3b0d3050c8b3c14eb660" category="inline-link-macro">Active IQ Config Advisor</block>
  <block id="37ca8b383b926ae9880b1b535c90290a" category="summary">ONTAP コマンドラインで次のコマンドを入力して、コントローラの交換プロセスを開始します。</block>
  <block id="83b27b00949218cb0d9ec7e1eb1c92ad" category="doc">ノードをアップグレードする準備をします</block>
  <block id="f163cd0bda37780c7a24303611dc0185" category="paragraph">ノードをアップグレードする準備として、次の手順を実行する必要があります。</block>
  <block id="6510eaf8fd7e9800a5b7d62b06dc6e9c" category="list-text">ONTAP コマンドラインで次のコマンドを入力して、コントローラの交換プロセスを開始します。</block>
  <block id="f65104a2552945130cb62829d56eac5e" category="paragraph">「 system controller replace start-nodes &lt;Node_name&gt; 」のように入力します</block>
  <block id="883d9d0a0453675233da0c78e0c1caac" category="admonition">このコマンドは、 advanced 権限レベルの「 set -privilege advanced 」でのみ実行できます</block>
  <block id="53d5140b9db74b84bdd8037a6063ec88" category="paragraph">次の出力が表示されます。</block>
  <block id="9843edc4af038cb41e5ce95e9aad1e03" category="list-text">「 y 」キーを押すと、次の出力が表示されます。</block>
  <block id="ffc467f3c2a85173d4529548d72d41b9" category="paragraph">システムでは次の事前確認が実行され、あとで手順で使用するために各事前確認の出力が記録されます。</block>
  <block id="495aa5c508241f1eca40fd503bc73196" category="cell">事前チェック</block>
  <block id="b5a7adde1af5c87d7fd797b6245c2a39" category="cell">説明</block>
  <block id="688df3b12b34ef0608e319ff169390d4" category="cell">クラスタの健常性チェック</block>
  <block id="2ebe98702ab3694ec3ccfe3e623a124e" category="cell">クラスタ内のすべてのノードが正常であることを確認します。</block>
  <block id="56beb58e6d547196c5aa44214e93ccaa" category="cell">MCC クラスタチェック</block>
  <block id="f8c3b8dcbd883dc2841679a94feb852a" category="cell">システムが MetroCluster 構成かどうかを確認します。MetroCluster 構成かどうかが自動的に検出され、特定の事前確認と検証チェックが実行されます。4 ノードの MetroCluster FC 構成のみがサポートされます。2 ノード MetroCluster 構成と 4 ノード MetroCluster の IP 構成では、チェックが失敗します。MetroCluster 構成がスイッチオーバーされている場合、チェックは失敗します。</block>
  <block id="b14360b478956e0213006307a2213b01" category="cell">アグリゲートの再配置ステータスチェック</block>
  <block id="23ecfd4d5c38f058d2a5b47f3a17a9b2" category="cell">アグリゲートの再配置がすでに実行中であるかどうかを確認します。別のアグリゲートの再配置を実行中の場合、チェックは失敗します。</block>
  <block id="2fb16648e5e222f12729fb8c953149b5" category="cell">モデル名のチェック（ Model Name Check</block>
  <block id="84599dff045e3f86049bc2022bf4b930" category="cell">この手順でコントローラモデルがサポートされているかどうかを確認します。モデルがサポートされていない場合、タスクは失敗します。</block>
  <block id="67c4a102a7629dddfcaf5472ead63dd6" category="cell">クラスタクォーラムチェック</block>
  <block id="b26031d08c55750f9480d081320ddcbe" category="cell">交換するノードがクォーラムにあることを確認します。ノードがクォーラムを構成していない場合は、タスクが失敗します。</block>
  <block id="833b60ce00de23efdd84aaf2257b1cd3" category="cell">イメージのバージョンチェック</block>
  <block id="4f324d87f2095ea7b3cb652dd2dc4b10" category="cell">HA ステータスチェック</block>
  <block id="0ec2a475eb3cc7052a2df9d912b429a5" category="cell">交換する両方のノードがハイアベイラビリティ（ HA ）ペア構成になっているかどうかを確認します。コントローラでストレージフェイルオーバーが有効になっていない場合、タスクは失敗します。</block>
  <block id="13953a740d52280d2268524a1a4a3535" category="cell">アグリゲートステータスチェック</block>
  <block id="d2be5a07810282eec1226ecdcabc0e8d" category="cell">ホーム所有者でないアグリゲートを交換するノードが所有している場合、そのタスクは失敗します。ローカル以外のアグリゲートを所有するノードは使用しないでください。</block>
  <block id="6244df7e25591403b0d5255577576eb4" category="cell">ディスクステータスチェック</block>
  <block id="320bc2c593ebed7e970715ea3832bc2e" category="cell">データ LIF ステータスチェック</block>
  <block id="9433521f789681a1a8fd76815674c438" category="cell">交換するノードにローカル以外のデータ LIF があるかどうかを確認します。ホーム所有者でないデータ LIF がノードに含まれないようにしてください。ローカル以外のデータ LIF がいずれかのノードに含まれている場合、タスクは失敗します。</block>
  <block id="eb694fc97d0bfef2c84584a29b318d85" category="cell">クラスタ LIF ステータス</block>
  <block id="ce7612b7485886dbb77994528256ffe5" category="cell">両方のノードでクラスタ LIF が動作しているかどうかを確認します。クラスタ LIF が停止している場合は、タスクは失敗します。</block>
  <block id="35a80eab14772418cca0ff3317910419" category="cell">ASUP ステータスチェック</block>
  <block id="166dc880ac0c6c0bb26663235da7e471" category="cell">ASUP 通知が設定されていないと、タスクは失敗します。コントローラの交換用手順を開始する前に ASUP を有効にする必要があります。</block>
  <block id="d39a17fff59bba71c24822f913f16591" category="cell">CPU 利用率チェック</block>
  <block id="3478400e352864eaa33992de6e976ca8" category="cell">交換するノードの CPU 利用率が 50% を超えていないかどうかを確認します。CPU 使用率がかなりの時間にわたって 50% を超えると、タスクは失敗します。</block>
  <block id="1a0a7ab1ebbc5d1d73b48be5c234810d" category="cell">アグリゲートの再構築チェック</block>
  <block id="7830789d964e8c8cf3a370b1d0299a28" category="cell">いずれかのデータアグリゲートで再構築が実行されているかどうかを確認しますアグリゲートの再構築を実行中の場合、タスクは失敗します。</block>
  <block id="c17c89f5ba46492be395e9f071e013ae" category="cell">ノードアフィニティジョブチェック</block>
  <block id="83aecfe9d4bf515a2ec45766e28a4ce0" category="cell">ノードアフィニティジョブが実行されているかどうかを確認します。ノードアフィニティジョブが実行中の場合、チェックは失敗します。</block>
  <block id="3ae0a94222b6d6378899ff73d1aad6e3" category="list-text">コントローラの交換処理が開始されて事前確認が完了すると、処理が一時停止するため、ノード 3 の設定時に必要になる可能性がある出力情報を収集できます。</block>
  <block id="6c7905cfbf20ac44387cca492e010687" category="paragraph">次のコマンドの出力を個別に実行して保存する必要があります。</block>
  <block id="2a29db167c3a03336a9b63367df61117" category="list-text">vserver services name-service dns show</block>
  <block id="adb6c9273650502325bd84641dded06a" category="list-text">network interface show -curr-node &lt;nodename&gt; -role &lt;cluster 、 intercluster 、 node-mgmt 、 cluster-mgmt 、 data &gt;</block>
  <block id="8ba3dc8f2e507a70633697dc60de2269" category="list-text">network port show -node &lt;node_name &gt; -type physical</block>
  <block id="4b6d2742fe44e19ae334198040aa33ef" category="list-text">service-processor show -node * -instance の各コマンドを実行します</block>
  <block id="54435116abb139647e98feb1031829db" category="list-text">network fcp adapter show -node &lt;node_name &gt;</block>
  <block id="21ae3cd30d3faa7f1f8d97766b196a1a" category="list-text">network port ifgrp show の設定</block>
  <block id="cbd335576ebae1caff82003d00697c97" category="list-text">system node show -instance -node &lt;node_name &gt;</block>
  <block id="a0ce199a837f76798ed0619d2ef94065" category="list-text">run -node &lt;node_name &gt;sysconfig</block>
  <block id="fac031b53ff277f8625f50e090a47475" category="list-text">storage aggregate show -node &lt;node_name &gt;</block>
  <block id="fbbf7d037bc226399100b8f4ea551e3a" category="list-text">volume show -node &lt;node_name &gt;</block>
  <block id="9a58231354c6d959f08b17d7fdb9350f" category="list-text">storage array config show -switch &lt;switch_name&gt; のように表示されます</block>
  <block id="760bdf3d6f89d3bd7422272872fc8ec1" category="list-text">system license show -owner &lt;node_name &gt;</block>
  <block id="46353f4e0bb2c136591c37c9eeedcf40" category="list-text">storage encryption disk show のコマンド</block>
  <block id="6b6f6c1a8bc1fede794cda92ed140953" category="list-text">security key-manager backup show のコマンドは</block>
  <block id="001642cb897a8bebce3210207b7e81af" category="list-text">security key-manager external show のコマンド</block>
  <block id="6afea099b023b1bd5f51935ccb31ce0a" category="list-text">security key-manager external show-status のこと</block>
  <block id="27c32000aa45c9243e8b444a27636832" category="list-text">reachability show-detailability</block>
  <block id="9cad135052afca91f1dd4b9f0372c825" category="admonition">オンボードキーマネージャ（ OKM ）を使用する NetApp Volume Encryption を使用している場合、キー管理ツールのパスフレーズを使用して、あとで手順でキー管理ツールの再同期を完了してください。</block>
  <block id="22afa574ce25ee7b49bc951eecd7f0ac" category="section-title">ARL の事前確認に失敗した場合は、アグリゲートの所有権を修正</block>
  <block id="7a29204c210eec42f3d01bebd9b483ba" category="paragraph">アグリゲートステータスチェックに失敗した場合は、パートナーノードが所有するアグリゲートをホーム所有者ノードに戻し、事前確認プロセスを再度開始する必要があります。</block>
  <block id="f38dad169237355428118b60b1896828" category="list-text">パートナーノードが現在所有しているアグリゲートをホーム所有者ノードに戻します。</block>
  <block id="0620f85959e7122e0e62c6193df806f8" category="paragraph">「 storage aggregate relocation start -node &lt;source_node&gt; -destination &lt;destination-node&gt; -aggregate -list * 」のように表示されます</block>
  <block id="17ef288fc5accadf7f08a6841d89c986" category="list-text">node1 と node2 のどちらも現在の所有者（ホーム所有者ではない）アグリゲートを所有していないことを確認します。</block>
  <block id="bb496edf1f029fe3c96dcfaddbc60ab0" category="paragraph">「 storage aggregate show -nodes &lt;node_name &gt; -is-home false -fields owner-name 、 home-name 、 state</block>
  <block id="74aa132d7caa1904dc30e16328313124" category="paragraph">次の例は、アグリゲートの現在の所有者とホーム所有者の両方がノードにある場合のコマンドの出力例を示しています。</block>
  <block id="bd965e38a0c9cf27aa1bde099308e23f" category="section-title">完了後</block>
  <block id="b034884667760545b9597461a985e372" category="paragraph">コントローラの交換プロセスを再開する必要があります。</block>
  <block id="794df3791a8c800841516007427a2aa3" category="section-title">使用許諾</block>
  <block id="edfd39240931c89b8ad19f9eea422658" category="paragraph">クラスタをセットアップする際、セットアップウィザードでクラスタベースのライセンスキーを入力するように求められます。ただし、一部の機能には追加のライセンスが必要です。このライセンスは、 1 つ以上の機能を含む _ パッケージ _ として発行されます。クラスタで使用する各機能のキーは、クラスタ内の各ノードに独自に設定する必要があります。</block>
  <block id="0716a66a70e59256281f4030c078ce04" category="paragraph">新しいライセンスキーがない場合は、クラスタで現在ライセンスされている機能を新しいコントローラで使用できます。ただし、ライセンスされていない機能をコントローラで使用するとライセンス契約に違反する可能性があるため、アップグレードの完了後に新しいコントローラのライセンスキーをインストールする必要があります。</block>
  <block id="eb40310be53032e7e599a9070cfaf20f" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> からネットアップサポートサイトにリンクして、 ONTAP 用の新しい 2 文字のライセンスキーを取得できます。キーは、 _ ソフトウェアライセンス _ の _ マイサポート _ セクションにあります。必要なライセンスキーがサイトにない場合は、ネットアップの営業担当者にお問い合わせください。</block>
  <block id="556a407c4a4faf57fc56c1b7137d5f36" category="paragraph">ライセンスの詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、 _System Administration Reference_( システム管理リファレンス ) にリンクします。</block>
  <block id="ea6471fa3c0b778358a74a483b65908e" category="summary">ノード 4 でオンボードの FC ポート、 UTA / UTA2 ポート、または UTA / UTA2 カードが使用されている場合は、残りの手順を実行する前に設定を行う必要があります。</block>
  <block id="291e8826d2b19041a0543b448060f314" category="paragraph">ノード 4 でオンボードの FC ポート、オンボードのユニファイドターゲットアダプタ（ UTA / UTA2 ）ポート、または UTA / UTA2 カードが使用されている場合は、残りの手順を完了する前に設定する必要があります。</block>
  <block id="85f1449ea514e1be4b11527eb6fbce31" category="paragraph">の実行が必要な場合があります <block ref="b22a2e603d310a795a7b59d2bdda39ee" category="inline-xref-macro-rx"></block> セクション、 <block ref="5752cac0a470e06ffceef40fba1931c1" category="inline-xref-macro-rx"></block>、または両方のセクション。</block>
  <block id="405ab80b96586360ea83735c37305935" category="inline-link-macro">ノード 4 のインストールを確認します</block>
  <block id="e5d8ce1e4e0f9c50b3cbdf452d60972e" category="inline-link-macro">手順 22</block>
  <block id="3dc7a36efda97abdf7240a1ca32de490" category="admonition">ノード 4 にオンボードの FC ポート、オンボード UTA / UTA2 ポート、または UTA / UTA2 カードがなく、ストレージディスクが搭載されたシステムをアップグレードする場合は、に進みます <block ref="3a339ed5bdc85366b677c546716fabfa" category="inline-link-macro-rx"></block>。ただし、 V シリーズシステムまたは FlexArray 仮想化ソフトウェアがインストールされていて、ストレージアレイに接続されている場合に、ノード 4 にオンボードの FC ポート、オンボード UTA / UTA2 ポート、 UTA / UTA2 カードがないときは、 section_Install and boot node4 セクションに戻って再開する必要があります <block ref="1a99f6ce933cd745b2b02e54c9272506" category="inline-link-macro-rx"></block>。ノード 4 に十分なラックスペースがあることを確認してください。node4 が node2 とは別のシャーシにある場合は、 node3 と同じ場所に node4 を配置できます。node2 と node4 が同じシャーシにある場合は、 node4 が適切なラックの場所にすでに存在しているとします。</block>
  <block id="6ef697f11922be2e4de0971f7d70997f" category="list-title">選択肢</block>
  <block id="32681c366792ff09536e44772a3bddf2" category="list-text"><block ref="b22a2e603d310a795a7b59d2bdda39ee" category="inline-xref-macro-rx"></block></block>
  <block id="17889f6fb09adc44188f6076a9e7852a" category="list-text"><block ref="5752cac0a470e06ffceef40fba1931c1" category="inline-xref-macro-rx"></block></block>
  <block id="cd7dd5075be56af4a3298feff04bb98a" category="paragraph">ノード 4 にオンボードまたは FC アダプタのいずれかの FC ポートがある場合は、ポートが事前に構成されていないため、ノードを稼働状態にする前にポートの設定を行う必要があります。ポートが設定されていないと、サービスが停止する可能性があります。</block>
  <block id="3bb2def349bd01a4e09f553241c547bb" category="paragraph">セクションに保存した node2 の FC ポート設定の値を確認しておく必要があります <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block>。</block>
  <block id="8651f71cd1a76b7df1a83cae390627a8" category="paragraph">システムに FC 構成がない場合は、このセクションをスキップしてかまいません。システムにオンボード UTA / UTA2 ポートまたは UTA / UTA2 アダプタが搭載されている場合は、で設定します <block ref="5752cac0a470e06ffceef40fba1931c1" category="inline-xref-macro-rx"></block>。</block>
  <block id="b075444cf1672de101272f1c40d6530b" category="paragraph">* 重要 * ：ご使用のシステムにストレージ・ディスクがある場合は、クラスタ・プロンプトでこのセクションにコマンドを入力する必要があります。V シリーズシステムまたは FlexArray 仮想化ソフトウェアがストレージアレイに接続されたシステムの場合は、このセクションのメンテナンスモードでコマンドを入力します。</block>
  <block id="4d65ef8cf84d37cbb99560183afc8431" category="list-text">次のいずれかを実行します。</block>
  <block id="78f6ac180c7bb87b8aee79da36246598" category="cell">アップグレードするシステム</block>
  <block id="a7a589b8e6e6d3aac1d1459d66a748a0" category="cell">次に、</block>
  <block id="61bc24f9f2f24029ba7b04d76f768598" category="cell">ストレージディスクがあります</block>
  <block id="e1a8971092776bc2e25be6babad152ab" category="cell">「 system node hardware unified-connect show 」を参照してください</block>
  <block id="58b0fc39873b9fe983d6b57e06585d6f" category="cell">は、 V シリーズシステムまたは FlexArray 仮想化ソフトウェアを搭載し、ストレージアレイに接続されています</block>
  <block id="5344ecb990fb0b0e60a7b979eeca26cd" category="cell">ucadmin show</block>
  <block id="c5c0e497c3f1186f3d1cfecfc658c546" category="paragraph">システムには、システム上のすべての FC アダプタと統合ネットワークアダプタに関する情報が表示されます。</block>
  <block id="ede48791c6a4d48413c294cc39314600" category="list-text">ノード 4 の FC 設定とノード 1 から前に取得した設定を比較します。</block>
  <block id="bf5ce713a37cfb1c7cddb2ef1662c419" category="paragraph">必要に応じて、ノード 4 の FC ポートを変更します。</block>
  <block id="2c28eea077fe0201e484901f94587d87" category="list-text">ターゲットポートをプログラムする場合：</block>
  <block id="0782d8d4c61a7cd89e1abafbe5ea5255" category="paragraph">ucadmin modify -m fc -t target &lt;adapter&gt;`</block>
  <block id="c5fb075990e07d49af83b424fc450275" category="list-text">イニシエータポートをプログラミングする場合：</block>
  <block id="713274c6cee4384b9c2c819d3adb4dd8" category="paragraph">ucadmin modify -m fc -t initiator &lt;adapter&gt;`</block>
  <block id="2b82f33f2fca28990565d495f9d55cd3" category="paragraph">`-t` は FC4 のタイプで ' ターゲットまたはイニシエータです</block>
  <block id="b32a6dfe19242cc4ae1651a9716c3d86" category="cell">必要に応じて、 node4 の FC ポートを変更します。 ucadmin modify -m fc -t initiator -f &lt;adapter_port_name&gt; `-t` は、 FC4 タイプ、ターゲット、イニシエータです。* 注： FC ポートはイニシエータとしてプログラムする必要があります。</block>
  <block id="97c16f2bd68041ac79ef06049407d0c7" category="list-text">メンテナンスモードを終了します。</block>
  <block id="cfd64d6f476de1f0b6218d6edce64ba3" category="list-text">LOADER プロンプトからシステムをブートします。</block>
  <block id="6fbd819a7ffcfac7237456907e32238d" category="list-text">コマンドを入力したら、ブート環境のプロンプトでシステムが停止するまで待ちます。</block>
  <block id="4e0dd5a6524aabaa8ad8173947fbf52a" category="list-text">保守モードのブート・メニューからオプション「 5 」を選択します。</block>
  <block id="59df83a3d8dd25ad19619fe75cc32a49" category="list-text">[[step8]] 次のいずれかの操作を実行します。</block>
  <block id="f57ce051c0dd7274751c09db8a0e40b1" category="list-text">このセクションをスキップして、に進みます <block ref="3a339ed5bdc85366b677c546716fabfa" category="inline-link-macro-rx"></block> ノード 4 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがない場合</block>
  <block id="403ef226990b83673617ca3be4865d06" category="list-text">に進みます <block ref="5752cac0a470e06ffceef40fba1931c1" category="inline-xref-macro-rx"></block> ノード 4 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがある場合</block>
  <block id="be1e23bb281357a07ce5db58c0e3ed83" category="list-text">node4 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがない場合は、 section_Check をスキップして UTA / UTA2 ポートを設定し、 node4 に戻ってブートノードを再開します <block ref="ec6d4cacddb01e88226b9b376590bcc5" category="inline-link-macro-rx"></block>。</block>
  <block id="69e973a9aba58ba3c0012cb107497fbd" category="paragraph">ノード 4 でオンボード UTA / UTA2 ポートまたは UTA / UTA2A カードが使用されている場合は、アップグレードしたシステムの使用方法に応じて、ポートの設定を確認して設定する必要があります。</block>
  <block id="cb462dbb35ebe0e4c6fef592bf7fd143" category="paragraph">UTA / UTA2 ポートに対応する正しい SFP+ モジュールが必要です。</block>
  <block id="c0caef2dbd4158cab9473c4f3805c920" category="paragraph">UTA / UTA2 ポートは、ネイティブの FC モードまたは UTA / UT2A モードに設定できます。FC モードは FC イニシエータと FC ターゲットをサポートします。 UTA / UTA2 モードを使用すると、 NIC と FCoE の同時トラフィックで同じ 10GbE SFP+ インターフェイスを共有し、 FC ターゲットをサポートすることができます。</block>
  <block id="d99657bf946aa6dc77b75f8f378cf072" category="admonition">ネットアップのマーケティング資料では、 UTA2 という用語を CNA アダプタとポートという意味で使用している場合があります。ただし、 CLI では CNA という用語が使用されます。</block>
  <block id="8076deb73ec5b74885a5b14258d5df96" category="paragraph">UTA / UTA2 ポートはアダプタまたはコントローラ上に次の構成で配置されます。</block>
  <block id="da3b32a8a5f86ee9c63b2d0328f453e3" category="list-text">UTA / UTA2 カードは、コントローラと同時に注文しても、希望するパーソナリティを持つ未設定の状態で出荷されます。</block>
  <block id="494d18d03e7c6fb4b46866273ca75c34" category="list-text">コントローラとは別に発注した UTA / UTA2 カードは、デフォルトの FC ターゲットパーソナリティとして出荷されます。</block>
  <block id="9fca14a117603ee6762ebe968e8cedec" category="list-text">新しいコントローラのオンボード UTA / UTA2 ポートは、要求したパーソナリティを持つように（出荷前に）設定されています。</block>
  <block id="898667c4cb95b7e44aafe17e4edf0567" category="paragraph">ただし、ノード 4 の UTA / UTA2 ポートの設定を確認し、必要に応じて変更してください。</block>
  <block id="504b32f9515b15fa8407335de4be00e7" category="admonition">* 注意 * ：ストレージディスクがある場合は、メンテナンスモードに指示されていないかぎり、クラスタプロンプトでこのセクションのコマンドを入力します。ストレージアレイに接続された MetroCluster FC システム、 V シリーズシステム、または FlexArray 仮想化ソフトウェアを搭載したシステムがある場合、 UTA / UTA2 ポートを設定するにはメンテナンスモードにする必要があります。</block>
  <block id="5113998ac3c679e0d1220f045f54831f" category="list-text">ノード 4 で次のいずれかのコマンドを使用して、ポートが現在どのように設定されているかを確認します。</block>
  <block id="8eae44e92f7155cef20bea12cd5a16c8" category="cell">システムの状態</block>
  <block id="fd894a783c8c8400a3021bd2ad147cba" category="paragraph">次の例のような出力が表示されます。</block>
  <block id="64da799aef6205bb6034c61f1f25c391" category="list-text">現在の SFP+ モジュールが目的の用途と一致しない場合は、正しい SFP+ モジュールに交換します。</block>
  <block id="d72066c585919f0b5faa9807de695bf8" category="paragraph">ネットアップの担当者に連絡して、正しい SFP+ モジュールを入手します。</block>
  <block id="89d66b059cd78c250aa205de02793541" category="list-text">ucadmin show コマンドの出力結果を調べ、 UTA / UTA2 ポートが希望するパーソナリティに対応しているかどうかを確認します。</block>
  <block id="d4a3eb778a9003e6551eb488099a389d" category="cell">CNA ポートの状況</block>
  <block id="2a6b2595426d2565bc2823be04753585" category="cell">希望するパーソナリティがない</block>
  <block id="0011237e8dc98411a0794ba6dddb9989" category="inline-xref">手順 5</block>
  <block id="feb4c7d35f5c6972a78c24ac4caebf00" category="cell">に進みます <block ref="7ffb05d2232c9c60f695127651bcf871" category="inline-xref-macro-rx"></block>。</block>
  <block id="3fa4c0ba2b210d02bdf49ea3e2812989" category="cell">あなたがほしい人格を持っている</block>
  <block id="c0f1d3db2a584ee59498c0abaa47adf7" category="inline-xref">手順 13</block>
  <block id="a06e3550b827dbbc3fa903ada41f165b" category="cell">手順 5 から 12 を省略して、に進みます <block ref="8c1d75fc2023dc4e109b4251bd0229b1" category="inline-xref-macro-rx"></block>。</block>
  <block id="1228ef3c4a262a3a23b05009801f9d74" category="list-text">[[auto_check_4_step5] 次のいずれかの操作を実行します。</block>
  <block id="bb8715eb9d3c8fc0a643a55fc3e9ed29" category="cell">を設定する場合</block>
  <block id="c4c1b40245719a0e56eb453401560e8e" category="cell">UTA / UTA2 カードのポート</block>
  <block id="805e47ec7b4ef2165b02c8ff12688343" category="inline-xref">手順 7</block>
  <block id="5ab10acc3f713db2883e41aeefc0a947" category="cell">に進みます <block ref="8fa9bd2d3aca152bc08859144a7af8fa" category="inline-xref-macro-rx"></block></block>
  <block id="a7f2071dd0b7eee34d97c156132a3210" category="cell">オンボードの UTA/UTA2 ポート</block>
  <block id="d60d761a93da31e724112577c571c923" category="inline-xref">手順 8</block>
  <block id="5014f056b226c4802b8e30f5800a2ea3" category="cell">手順 7 を省略して、に進みます <block ref="3d86a68aa8fb2ef1661a4814f02f3b64" category="inline-xref-macro-rx"></block>。</block>
  <block id="ef0770e5329716a78bdc700afc4541c1" category="list-text">アダプタがイニシエータモードで、 UTA / UTA2 ポートがオンラインの場合は、 UTA / UTA2 ポートをオフラインにします。</block>
  <block id="b3c0d59f1fa098e490810b0e947e6307" category="paragraph">「 storage disable adapter &lt;adapter_name&gt; 」</block>
  <block id="fff4e24de6543fad49dbe48a7b01e1d1" category="paragraph">ターゲットモードのアダプタは、メンテナンスモードで自動的にオフラインになります。</block>
  <block id="d8f98bdc807ae3903ae80ea0b78fbd6e" category="list-text">[[auto_check_4_step7] 現在の構成が目的の用途に一致しない場合は、必要に応じて構成を変更します。</block>
  <block id="749cabc3295eb5c2617db20882147797" category="paragraph">ucadmin modify -m fc | cna-t initiator | target &lt;adapter_name&gt; `</block>
  <block id="d014763bc3b52aee3850e01f8065200f" category="list-text">「 -m' 」はパーソナリティ・モードである FC または 10 GbE UTA です。</block>
  <block id="2e23b3b6b4b04a1d678f35eda127d4d6" category="list-text">`-t` は FC4 のタイプ、「 target 」または「 initiator 」です。</block>
  <block id="3f0869d2c33ab7caf7185458236590fe" category="admonition">テープドライブ、 FlexArray 仮想化システム、および MetroCluster 構成には、 FC イニシエータを使用する必要があります。SAN クライアントには FC ターゲットを使用する必要があります。</block>
  <block id="7e0be6e2a6d4c241d66e582ce0ecbcea" category="list-text">[[auto_check_4_step8] 次のコマンドを使用して設定を確認し、出力を調べます。</block>
  <block id="fe040552b4fc83efe2ba593498969954" category="list-text">設定を確認します。</block>
  <block id="38827adabf48650b74e5fe794b8f2413" category="paragraph">次の例の出力は ' アダプタ「 1b 」の FC4 タイプがイニシエータに変更され ' アダプタ「 2a 」および「 2b 」のモードが「 cna' 」に変更されていることを示しています</block>
  <block id="4cf4d3bfbda859f7fbe3247599afeba5" category="list-text">次のいずれかのコマンドをポートごとに 1 回入力して、ターゲットポートをオンラインにします。</block>
  <block id="efdbd48524f71c2dd98be1f586e183b7" category="cell">「 network fcp adapter modify -node &lt;node_name &gt; -adapter &lt;adapter_name&gt; -state up 」の形式で指定します</block>
  <block id="4d6e26003e754a745cf62eed31431aad" category="cell">'fcp config &lt;adapter_name&gt; up'</block>
  <block id="b50635aa317c4f94943cbad3bf2ffdf2" category="list-text">ポートをケーブル接続します。</block>
  <block id="8eeb6ccf00d6f27741c5b734b3130459" category="list-text">[[step12]] 次のいずれかの操作を実行します。</block>
  <block id="803497e06fb63becf479290f3ae30e01" category="cell">に進みます <block ref="3a339ed5bdc85366b677c546716fabfa" category="inline-link-macro-rx"></block>。</block>
  <block id="00538e299fb2786306fe6cdcd6e9fd03" category="cell">section_Install および boot node4 に戻り、で再開します <block ref="ec6d4cacddb01e88226b9b376590bcc5" category="inline-link-macro-rx"></block>。</block>
  <block id="4a137bad34f46785824a8100e1c6cba6" category="list-text">[[auto_check_4_step13]] メンテナンスモードを終了します。</block>
  <block id="479951d6e509fddf053f700071fd43a4" category="list-text">[[step14]] ブートメニューからのノードのブート :</block>
  <block id="204783b1ca658239a7b205df8e2d83dd" category="paragraph">「 boot_ontap menu</block>
  <block id="d27b8c8cfb6e88cecd06bd564e90cd36" category="paragraph">A800 にアップグレードする場合は、に進みます <block ref="1917bbf2d6d289423b4a495f5ba4fcca" category="inline-xref-macro-rx"></block></block>
  <block id="cd642c3a70cf520cbc7cc74da7b6cf70" category="list-text">[[auto_check_4_step15]] ノード 4 で、ブートメニューに移動し、 22/7 を使用して、非表示オプション「 boot_after_controller_replacement 」を選択します。プロンプトで node2 と入力し、次の例のように node2 のディスクを node4 に再割り当てします。</block>
  <block id="f91809c39c7c5ad59f2475c5ee644448" category="admonition">上記のコンソールの出力例では、アドバンストディスクパーティショニング（ ADP ）ディスクを使用するシステムの場合は ONTAP からパートナーノード名の入力を求められます。</block>
  <block id="9c709df0d0930ada3ab147bf9abe8f06" category="inline-xref">手順 17</block>
  <block id="5dbdf6da1c2d885026bcf4a6be74a4b0" category="list-text">「 no disks found 」というメッセージが表示されてシステムがリブートループに入ると、システムが FC ポートまたは UTA/UTA2 ポートをターゲットモードにリセットしたため、ディスクが認識されないことを示します。これを解決するには、に進みます <block ref="d55e3a0f9758a99c055e4411cec66cde" category="inline-xref-macro-rx"></block> 終了： <block ref="1abe7aef97cf6f4670adea7171f10403" category="inline-xref-macro-rx"></block> または、セクションに移動します <block ref="3a339ed5bdc85366b677c546716fabfa" category="inline-link-macro-rx"></block>。</block>
  <block id="00454a3a0a181cf262da410213cfcb17" category="list-text">[[auto_check_4_step17]] autoboot 中に Ctrl キーを押しながら C キーを押して 'loader&gt;` プロンプトでノードを停止します</block>
  <block id="8923acb8081affcd156ba6d58720db9b" category="list-text">LOADER プロンプトで、メンテナンスモードに切り替えます。</block>
  <block id="24655647ccabfd614d439a15f52407aa" category="paragraph">「 boot_ontap maint 」を使用してください</block>
  <block id="82b61383829ad9f7c791ca9adcbe4b1f" category="list-text">保守モードで、以前に設定したすべてのイニシエータポートをターゲットモードで表示します。</block>
  <block id="0237455b5c9b0d306e2c96ee6c599c24" category="paragraph">ポートをイニシエータモードに戻します。</block>
  <block id="cf3e9bc0a901473a585931eab06fd36e" category="paragraph">ucadmin modify -m fc -t initiator -f &lt;adapter name&gt; `</block>
  <block id="7dca1ec13f028b73f4170b0124cf9d45" category="list-text">ポートがイニシエータモードに変更されたことを確認します。</block>
  <block id="a04a9fc20b8a671e539314c55bde8973" category="list-text">[[auto_check_4_step22]] LOADER プロンプトのブートアップ：</block>
  <block id="bf1d9c5801bc3674bc765551ff2f2964" category="paragraph">「 boot_ontap 」</block>
  <block id="eedc84ab2e1ed2d5f77ae259bcc2e53d" category="paragraph">これで、ブート時に以前に割り当てられていたすべてのディスクをノードで検出できるようになり、想定どおりにブートできるようになります。</block>
  <block id="a615e77be7318a1511c3e98bbe302ca7" category="list-text">[[auto_check_4_step23]] 外付けディスクがあるシステムから、内蔵ディスクと外付けディスクをサポートするシステム（ AFF A800 システムなど）にアップグレードする場合は、 node2 のアグリゲートをルートアグリゲートとして設定し、 node4 が node2 のルートアグリゲートからブートするようにします。ルート・アグリゲートを設定するには ' ブート・メニューからオプション 5 を選択して ' 保守モードに切り替えます</block>
  <block id="60429a189ace5d1ba3d34868ab11d685" category="admonition">* ここに示す順序で以下の手順を実行する必要があります。正しく実行しないと、原因が停止したり、データが失われたりする可能性があります。 *</block>
  <block id="534c28a3529827f81e0580e98c2c91b5" category="paragraph">次の手順では、 node4 に node2 のルートアグリゲートからブートするよう設定しています。</block>
  <block id="c9029dad52ad7bd50890b949161a37e6" category="list-text">メンテナンスモードに切り替えます。</block>
  <block id="a1dd60e47fece6bf56643327d78025eb" category="list-text">node2 アグリゲートの RAID 、プレックス、およびチェックサムの情報を確認します。</block>
  <block id="d54681223c9aa263c12e4a2a2a99ab44" category="paragraph">「 aggr status -r 」</block>
  <block id="cf43f30b70f96333f3d873e68b6170ad" category="list-text">node2 アグリゲートのステータスを確認します。</block>
  <block id="39cff9999d84ec4289e4ab2ff2e81c67" category="paragraph">「 aggr status 」を入力します</block>
  <block id="4c7213f8f3213d4809b8212b52bfc23a" category="list-text">必要に応じて、 node2 アグリゲートをオンラインにします。</block>
  <block id="b64fc01bc73df9f024483d0ebe029c8f" category="paragraph">'aggr_online root_aggr_from_&lt;node2&gt;] を選択します</block>
  <block id="40418d7b25faced12b99f33b2265e3b3" category="list-text">ノード 4 が元のルートアグリゲートからブートしないようにします。</block>
  <block id="99748e6869c558cd84e1f7cd78209e7e" category="paragraph">'aggr offline &lt;root_aggr_on_node4 &gt;`</block>
  <block id="2f71ad2b913b1589756e19c235187106" category="list-text">node2 のルートアグリゲートを node4 の新しいルートアグリゲートとして設定します。</block>
  <block id="fb7c6c0ffab0377659471575f7daad3e" category="paragraph">「 aggr options aggr_from_&lt;node2&gt; root 」のように指定します</block>
  <block id="cb891bf7e336200833c9e240c76a0cc6" category="list-text">ノード 4 のルートアグリゲートがオフラインになっていること、および node2 から提供されたディスクのルートアグリゲートがオンラインになっていて root に設定されていることを確認します。</block>
  <block id="6bab8b4510fec23b1120be927a0bfea7" category="admonition">前の手順を実行しない場合は、原因 node4 から内部ルートアグリゲートをブートするか、原因システムが新しいクラスタ構成が存在すると想定するか、あるいはクラスタ構成を特定するように求められる可能性があります。</block>
  <block id="c06377da744f281f74d745bd6cf53c71" category="paragraph">次の例は、コマンドの出力を示しています。</block>
  <block id="a7dd277c916b5584ac7bfa0e2a0e1091" category="summary">NetApp Volume Encryption （ NVE ）を使用してアップグレードするシステム上のボリュームを暗号化する場合。</block>
  <block id="7ce57c4ce051863fc414ccd402a178f5" category="doc">ノード 3 でキー管理ツールの設定をリストアします</block>
  <block id="510e98cf2edb71945018bbd3f1de261d" category="paragraph">NetApp Volume Encryption （ NVE ）を使用してアップグレードするシステムのボリュームを暗号化する場合は、暗号化設定を新しいノードに同期する必要があります。ノード 1 のアグリゲートの ARL がノード 2 からノード 3 に完了すると、暗号化されたボリュームがオフラインになります。</block>
  <block id="594ac9e04c14065852f0e508c7b91ccb" category="paragraph">次の手順を実行して、暗号化設定を新しいノードに同期します。</block>
  <block id="b58a207eb69ca3cec4fba13daf9dd85a" category="list-text">クラスタプロンプトで次のコマンドを使用して、 OKM の暗号化構成を同期します。</block>
  <block id="0a83ed732b07426c840d56d0ee6e648b" category="paragraph">「セキュリティキーマネージャオンボード同期」</block>
  <block id="9fe909e2cd822e396eda1b615c821ed1" category="list-text">OKM のクラスタ全体のパスフレーズを入力します。</block>
  <block id="8bd97ccee6af0cbb00432913fef95f69" category="summary">をクリックしてノードペアをアップグレードします。</block>
  <block id="15577d2c813239ab53fdc6f35d8a1dc5" category="doc">ノードペアをアップグレードします</block>
  <block id="5634325c9c7a1ed8bb239cc0f0ecea96" category="paragraph">ノードペアをアップグレードするには、元のノードを準備し、元のノードと新しいノードの両方で一連の手順を実行する必要があります。その後、元のノードの運用を停止できます。</block>
  <block id="a1bf01274d938e19b1e43eb57fc3c557" category="summary">MetroCluster 構成のスイッチオーバー、修復、スイッチバックの処理を検証する必要があります。</block>
  <block id="9759ad3dfabdb9631ec5fba47d71c313" category="doc">スイッチオーバー、修復、スイッチバックを検証</block>
  <block id="c9c93a19732545b8a8812f3665050df3" category="summary">アップグレード後は、すぐにストレージ暗号化を設定する必要があります。</block>
  <block id="26678fb639f40f31f518f926dd61b9ab" category="doc">ストレージ暗号化用の外部キー管理サーバの IP アドレスを取得します</block>
  <block id="7acef9ce6b481d82dc187cf0cd0ba769" category="paragraph">アップグレード後は、すぐにストレージ暗号化を設定し、クラスタ全体の認証キーを確立して、以前のノードレベルの認証キーを置き換える必要があります。</block>
  <block id="bc528557a58db2778646f31143323c9a" category="list-text">キー管理サーバとの通信に必要なクライアントおよびサーバの Secure Sockets Layer （ SSL ）証明書をインストールします。</block>
  <block id="6b3a21077187795e57ca156a1f7425b1" category="paragraph">「セキュリティ証明書のインストール」</block>
  <block id="cbb3eece6687c0e5f34c4dd9eec3d644" category="list-text">各ノードで次のコマンドを使用して、すべてのノードでストレージ暗号化を設定します。</block>
  <block id="36b59c92319c91ef4b062f7a5735609c" category="paragraph">「セキュリティキーマネージャの設定」</block>
  <block id="c3da263b79224793b774d0b2cb2d9fe1" category="list-text">各キー管理サーバの IP アドレスを追加します。</block>
  <block id="4ddacc4fe876ce1520a863683e858a54" category="paragraph">「セキュリティキーマネージャの追加」</block>
  <block id="126ba987a97e09c07ace066db3597dbe" category="list-text">クラスタ内のすべてのノードで同じキー管理サーバが設定され使用可能になっていることを確認します。</block>
  <block id="a57b36ea9f75076c6744f1f269e29bd8" category="paragraph">「 securitykey-manager show -status 」</block>
  <block id="463cf5d698fac90be015c82e1bfb13fd" category="list-text">クラスタ全体の新しい認証キーを作成します。</block>
  <block id="16ad807911a8c9b345c579c4bcb340cb" category="paragraph">「 securitykey-manager create-key 」を選択します</block>
  <block id="cf838fadddca3730f4efc72c1c3c093c" category="list-text">新しい認証キー ID をメモします。</block>
  <block id="470fc1401dbcb8983abb71c0870d4258" category="list-text">すべての自己暗号化ドライブのキーを新しい認証キーに変更します。</block>
  <block id="6228599495561d44995cb3ef3f353e9b" category="paragraph">「 storage encryption disk modify -disk * -data-key-id &lt;authentication_key_id&gt;` 」</block>
  <block id="d3632885c406f1fdf833bfa7e1f0af27" category="section-title">KMIP サーバを使用して認証を管理します</block>
  <block id="eef7c3c189b38852fa6fd7ff22f1836c" category="paragraph">ONTAP 9.8 以降では、 Key Management Interoperability Protocol （ KMIP ）サーバを使用して認証キーを管理できます。</block>
  <block id="761ac244160bc99600210b11c30dc464" category="list-text">新しいコントローラを追加します。</block>
  <block id="0d51f1cd2b3f0ee725fef68026226c50" category="paragraph">「 securitykey-manager setup -node &lt;new_controller_name&gt;` 」のように指定します</block>
  <block id="5b84aee6aa26cfb08d3ab766a49e026d" category="list-text">キー管理ツールを追加します。</block>
  <block id="d972edad5fb5c103c1c6f1ac23a3cdf1" category="paragraph">「 securitykey-manager-add &lt;key_manager_server_ip_address &gt;` 」</block>
  <block id="321aa19fc0cdb52498a74f6673729f5e" category="list-text">キー管理サーバが設定され、クラスタ内のすべてのノードで使用できることを確認します。</block>
  <block id="a1b7f6ea0d485d5a6890d4047d37884c" category="list-text">リンクされたすべてのキー管理サーバの認証キーを新しいノードにリストアします。</block>
  <block id="441e1cbf2c222517b5366ca827ed309d" category="paragraph">「 securitykey-manager restore -node &lt;new_controller_name&gt;` 」のように指定します</block>
  <block id="a4ad027ddee7647712bbf971c8d839c4" category="list-text">すべての自己暗号化ディスクのキーを新しい認証キーに変更します。</block>
  <block id="bf0679d0cb7aea4f9f1e7253a96643cf" category="paragraph">'storage encryption disk modify -disk * [-data-key-id nonMSID AK</block>
  <block id="42cbbc611cf1111ca13ce179f80d2257" category="list-text">連邦情報処理標準（ FIPS ）を使用する場合は、すべての自己暗号化ディスクのキーを新しい認証キーに変更してください。</block>
  <block id="5beb4b8523f6870e231ec55cdf442a39" category="paragraph">「 storage encryption disk * modify -disk * [-fips-key-id nonAK 」」</block>
  <block id="666d41f92db6a2191af16e999d035f4f" category="section-title">オンボードキーマネージャを使用してストレージ暗号化を管理します</block>
  <block id="54279af53279de10320508d0526f332e" category="paragraph">OKM は暗号キーを管理できます。OKM を使用する場合は、アップグレードを開始する前にパスフレーズとバックアップ資料を記録しておく必要があります。</block>
  <block id="259c8a53b900b4102babb5d05e113f67" category="list-text">パスフレーズを安全な場所に保存します。</block>
  <block id="19077cc2690337623f542cbef7fae627" category="list-text">リカバリ用のバックアップを作成します。次のコマンドを実行して出力を保存します。</block>
  <block id="d1599347e2c1e8206cd8017da7de3ee0" category="paragraph">「 key-manager onboard show-backup 」を選択します</block>
  <block id="63ce5117a618b44a9a730ed25c154d96" category="section-title">SnapMrerror 関係の休止（オプション）</block>
  <block id="af22da96a57928d4a3255e13f3b56341" category="paragraph">手順を続行する前に、すべての SnapMirror 関係が休止状態になっていることを確認する必要があります。休止された SnapMirror 関係は、リブート後およびフェイルオーバー後も休止状態のままです。</block>
  <block id="bad82f8550ff52390ef854218320ca8e" category="list-text">デスティネーションクラスタの SnapMirror 関係のステータスを確認します。</block>
  <block id="5bab70a374b8d81dfb1cf1f910800c2a" category="paragraph">「 Snapmirror show 」のように表示されます</block>
  <block id="bb0f616d7346128ce4ee650292e9344d" category="paragraph">このステータスが「 Transferring 」の場合は、転送を中止する必要があります。「 snapmirror abort -destination-path vserver &lt;vserver name&gt; 」</block>
  <block id="4240e52a9ba444973cab2a23381467d2" category="paragraph">SnapMirror 関係の状態が「 Transferring 」でない場合は、中止は失敗します。</block>
  <block id="39ab24c8bbd04eb5a8927ffbecfe915d" category="list-text">クラスタ間のすべての関係を休止します。</block>
  <block id="cd1afeeaf26405e1dd681ef1da5dddf6" category="paragraph">'snapmirror quiesce -destination-path vserver &lt;vserver name&gt; 」を指定します</block>
  <block id="969f0a2571a7738a949482044a778723" category="summary">いずれかのアグリゲートに再配置の失敗や再配置が拒否された場合は、アグリゲートを手動で再配置する必要があります。</block>
  <block id="97075c537f59de355c8d44c57697ef74" category="doc">障害が発生したアグリゲートを再配置するか</block>
  <block id="1a246f70242ad6a20257f6b2816e32b7" category="paragraph">いずれかのアグリゲートに再配置が失敗した場合、または拒否されている場合は、アグリゲートを手動で再配置するか、必要に応じて拒否またはデスティネーションのチェックを無視する必要があります。</block>
  <block id="d5b52813fd23e774f0e560e7d8ecc452" category="paragraph">エラーが原因で再配置処理が一時停止します。</block>
  <block id="b10c9e2a07f0bd22d85f72c5fb19d122" category="list-text">イベント管理システム（ EMS ）のログで、アグリゲートの再配置に失敗した理由や拒否された理由を確認します。</block>
  <block id="f5bf9910c32ce3468dc3a0f80ee2e47a" category="list-text">障害が発生したアグリゲートまたは拒否されたアグリゲートを</block>
  <block id="f31ceb40ff7b8a0764fb7750bb94fd7b" category="paragraph">「 storage aggregate relocation start -node &lt;node1&gt; -destination &lt;node2&gt; aggregate-list &lt;aggr_name&gt; -nd-controller-upgrade true 」の形式で指定します</block>
  <block id="4f6da995dc4a823a0d6529c9d724b695" category="list-text">プロンプトが表示されたら、「 y 」と入力します。</block>
  <block id="d5f8db2e1eae8ada3af51a497dead90d" category="list-text">再配置は、次のいずれかの方法で強制的に実行できます。</block>
  <block id="054b4f3ea543c990f6b125f41af6ebf7" category="cell">オプション</block>
  <block id="bca8a20f71b5dee00fa30d0570b83068" category="cell">拒否チェックの無視</block>
  <block id="63e95f3a5b822c0e1e5f710174695047" category="cell">次のコマンドを使用します。「 storage aggregate relocation start -node node1 -destination node2 -aggregate-list &lt;aggr_list&gt; -nd-controller-upgrade true -override-vetoes true 」</block>
  <block id="1b27217f602bc4090b93bc2c72ec2c38" category="cell">デスティネーションチェックの無効化</block>
  <block id="2b0aaee5d2bb595c0dd13e304bb34c55" category="cell">次のコマンドを使用します。「 storage aggregate relocation start -node node1 -destination node2 -aggregate-list &lt;aggr_list&gt; -nd-controller-upgrade true -override-vetoes true -override-destination-checks true 」</block>
  <block id="3656662210f47dcbe034b998e90c0643" category="summary">ARL を使用して ONTAP 9.8 を実行しているコントローラのペアをアップグレードできるかどうかを確認します。</block>
  <block id="da289ccf0fe9b7b8a0a8c3f55c76c877" category="doc">ARL を使用したコントローラのアップグレードに関するガイドライン</block>
  <block id="1b41541e73f4542502d0cb8be4fcb926" category="paragraph">ARL を使用して ONTAP 9.8 以降を実行するコントローラのペアをアップグレードできるかどうかは、プラットフォームおよび元のコントローラと交換用コントローラの両方の構成によって異なります。</block>
  <block id="da9431cc35c8bdde2930587bdcf661c2" category="section-title">ARL のアップグレードがサポートされます</block>
  <block id="bd405ef9149168a4cb18dfb9e68d4d1e" category="paragraph">ARL 手順 for ONTAP 9.8 以降を使用してノードのペアをアップグレードする場合は、 ARL が元のコントローラおよび交換用コントローラで実行されていることを確認する必要があります。</block>
  <block id="40f65e1794d8ec4dad51ff791dc15d0b" category="paragraph">元のシステムでサポートされるすべての定義済みアグリゲートのサイズとディスク数を確認する必要があります。次に、サポートされるアグリゲートサイズとディスク数を、新しいシステムでサポートされるアグリゲートサイズとディスク数と比較する必要があります。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> この情報がある Hardware Universe にリンクするには、次の手順を実行します。新しいシステムでサポートされるアグリゲートサイズとディスク数は、元のシステムでサポートされるアグリゲートサイズとディスク数以上であることが必要です。</block>
  <block id="9946e270e76872acf9a74362eac1a32a" category="paragraph">元のコントローラを交換したときに、新しいノードが既存のノードとクラスタの一部になることができるかどうかは、クラスタ混在ルールで検証する必要があります。クラスタ混在ルールの詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> Hardware Universe にリンクするには、次の手順を実行します。</block>
  <block id="5dab68a78b9466ced5074675f91c7438" category="paragraph">ARL を使用したコントローラのアップグレードは、 SnapLock Enterprise ボリュームおよび SnapLock Compliance ボリュームが設定されたシステムでサポートされます。</block>
  <block id="cb0385d0286af5544c83edeb7702b741" category="section-title">2 ノードスイッチレスクラスタ</block>
  <block id="69ceb2d36918ef5eab686101ab353f0d" category="paragraph">2 ノードスイッチレスクラスタのノードをアップグレードする場合は、アップグレードの実行中もスイッチレスクラスタのノードをそのまま使用できます。スイッチクラスタに変換する必要はありません。</block>
  <block id="bea87fe3e38e1c2fba92c7b4ca690a9d" category="section-title">ARL のアップグレードはサポートされていません</block>
  <block id="d061d57f2d82b85a7aa74e13aaec4c96" category="paragraph">次のアップグレードは実行できません。</block>
  <block id="70a3b031f6a4e388e4285d647440ec82" category="list-text">元のコントローラに接続されたディスクシェルフをサポートしない交換用コントローラへの接続</block>
  <block id="23498de552873202eefb3139773f663c" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ディスクサポート情報の Hardware Universe にリンクするには、次の手順を実行します。</block>
  <block id="d5457a285ea7fce244bde8387644b062" category="list-text">内蔵ドライブを搭載したエントリレベルのコントローラ。たとえば、 FAS 2500 などです。</block>
  <block id="231cf4c70d866b616c21baddaeed0696" category="section-title">トラブルシューティング</block>
  <block id="d60c463bb4096f3ed4bd1618626dfe10" category="inline-link-macro">トラブルシューティングを行う</block>
  <block id="bc11cb73d84dd1ca35d5b999ca9afb54" category="paragraph">コントローラのアップグレード中に問題が発生した場合は、を参照してください <block ref="5b03d19ea0e9e656b77e7538c0164f96" category="inline-link-macro-rx"></block> 詳細および解決策については、手順の末尾にあるセクションを参照してください。</block>
  <block id="aaa66a015fd5899ae88e1fe7fce7257c" category="paragraph">発生した問題に対する解決策が見つからない場合は、テクニカルサポートにお問い合わせください。</block>
  <block id="d5dcbeb79cc6a2aa334dc821840400c2" category="summary">アグリゲートの再配置（ ARL ）がアップグレード中に別のポイントで失敗することがあります。</block>
  <block id="b02aac451baf6d7b36d981f898537961" category="doc">アグリゲートの再配置に失敗しまし</block>
  <block id="bdbf296139657929f989f110dccebbd3" category="section-title">アグリゲートの再配置に失敗していないかどうか</block>
  <block id="12f0aff6b7931a4b46dc6629c132816a" category="paragraph">手順の処理中に、ステージ 2 、ステージ 3 、またはステージ 5 で ARL が失敗することがあります。</block>
  <block id="a5c607fe9749b0c2b2f2e3b910604ce4" category="list-text">次のコマンドを入力し、出力を確認します。</block>
  <block id="535fb4b2db5d261fd8e82fde21d267f2" category="paragraph">「 storage aggregate relocation show 」を参照してください</block>
  <block id="e0fafb56752a62a2c5a8a941a4fa2864" category="paragraph">「 storage aggregate relocation show 」コマンドを実行すると、正常に再配置されたアグリゲートと再配置されなかったアグリゲート、および障害の原因が表示されます。</block>
  <block id="85dae5feb66033271bbd3fea4eca5f7e" category="list-text">コンソールで EMS メッセージを確認します。</block>
  <block id="fe96c3f5ae23f058575d629b1b1befa1" category="list-text">「 storage aggregate relocation show 」コマンドの出力と EMS メッセージの出力に応じて、適切な方法を実行します。</block>
  <block id="b3663b253690ee49735db122d80571d6" category="list-text">「 storage aggregate relocation start 」コマンドの「 override-vetoes 」オプションまたは「 override-vetoes destination-checks 」オプションを使用して、アグリゲートまたはアグリゲートの強制的な再配置を実行します。</block>
  <block id="4a2f4a10945c2742a986196d1a41e0c8" category="paragraph">「 storage aggregate relocation start 」、「 override-vetoes 」、および「 override-vetoes destination-checks 」オプションの詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ONTAP 9.8 コマンド：マニュアルページリファレンスにリンクするには、次の手順を実行します。</block>
  <block id="64f7904c016a035f1928a2cbeea82ab1" category="section-title">アグリゲートは、アップグレードの完了後、ノード 1 にもともと存在していたものとノード 4 によって所有されます</block>
  <block id="2e352bfe9deb78b924bf0f5e67164c3c" category="paragraph">アップグレード手順の最後に、 node3 は、元々ホームノードとしてノード 1 を使用していたアグリゲートの新しいホームノードである必要があります。このパスはアップグレード後に再配置できます。</block>
  <block id="5d59517a984e405c3da4037ff1d7d898" category="paragraph">次の状況で、アグリゲートが適切に再配置されず、ノード 1 がノード 3 ではなくホームノードになっている可能性があります。</block>
  <block id="0aedbbe9928008ef20e9f0f31cd1ec93" category="list-text">ステージ 3 で、アグリゲートが node2 から node3 に再配置されている場合。再配置する一部のアグリゲートのホームノードが node1 に含まれている。たとえば、このようなアグリゲートのことを aggr_node_A_1 と呼びます。ステージ 3 で aggr_node_A_1 の再配置が失敗し、強制的に再配置を実行できない場合、アグリゲートは node2 で残ります。</block>
  <block id="94db9769a66bbb4255b02f44f30a1506" category="list-text">ステージ 4 のあとで、 node2 を node4 に置き換える場合。node2 を交換すると、 aggr_node_A_1 が、 node3 ではなく node4 にあるホームノードとしてオンラインになります。</block>
  <block id="ba508067c72d91e8f63afe491acaa462" category="paragraph">ストレージフェイルオーバーを有効にしたあとに、ステージ 6 に続けて誤った所有権の問題を修正するには、次の手順を実行します。</block>
  <block id="c76bc65b459278a8c28b143bd2794d8c" category="list-text">次のコマンドを入力して、アグリゲートのリストを表示します。</block>
  <block id="482c91d6a5bf35c82ea857455c024d88" category="paragraph">「 storage aggregate show -nodes &lt;node4 &gt; -is-home true 」という 2 つの意味があります</block>
  <block id="d088dd9060f2818253fb3709d9939a18" category="paragraph">正しく再配置されていないアグリゲートを特定するには、セクションで取得した node1 のホーム所有者を含むアグリゲートのリストを参照してください <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block> コマンドの出力と比較してください。</block>
  <block id="a3249f2582556adc14fc6268c4136b8c" category="list-text">手順 1 の出力と、セクションで確認した node1 用の出力を比較します <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block> 再配置されていないアグリゲートがあることを確認します。</block>
  <block id="6351a4102dcb6a482f6002fe35685d71" category="list-text">[[auto_aggr_relocate_fail_Step3] ノード 4 の背後にあるアグリゲートの再配置：</block>
  <block id="d104a5e5375beeea24cb6ac3c7c3d89f" category="paragraph">「 storage aggregate relocation start -node &lt;node4 &gt; -aggr &lt;aggr_node_A_1 &gt; -destination &lt;node3 &gt;"</block>
  <block id="19289925f6f4d12d2796b14d773968dd" category="paragraph">この再配置中は '-nd-controller-upgrade パラメータを使用しないでください</block>
  <block id="0bc9088bdd248bcc7cf35ab01ea701a4" category="list-text">node3 がアグリゲートのホームの所有者になったことを確認します。</block>
  <block id="efe0e1623e3de58285e110eadbfa034a" category="paragraph">「 storage aggregate show -aggregate &lt;aggr1 、 aggr2 、 aggr3...&gt; -fields home-name 」のように指定します</block>
  <block id="3b6b92b0cbab52f7f27f444cda7f83aa" category="paragraph">「 &lt;aggr1 、 aggr2 、 aggr3_&gt; 」は、 node1 が元のホーム所有者であるアグリゲートのリストです。</block>
  <block id="2d5ce426423eeeead4f35769cd8b1b27" category="inline-xref">手順 3</block>
  <block id="65f247827acd19f6f7debcc6880344b0" category="paragraph">ノード 3 をホーム所有者としないアグリゲートは、の同じ再配置コマンドを使用してノード 3 に再配置できます <block ref="b826fa5e08f60e3e6100c14200617b18" category="inline-xref-macro-rx"></block>。</block>
  <block id="5889ed673e50bf5bb2f31df8c0d66478" category="summary">Fabric MetroCluster 構成でアップグレードを開始する前に、</block>
  <block id="e7323a54c9f53a295a2c4d707c7b3fce" category="doc">MetroCluster 構成の健全性を確認</block>
  <block id="57b41b4e6b26c5d81b64f649f73c20f8" category="paragraph">Fabric MetroCluster 構成でアップグレードを開始する前に、 MetroCluster 構成の健全性をチェックして、正常に動作することを確認する必要があります。</block>
  <block id="ce1ec3b6f165be8cdde0654c531487e5" category="list-text">MetroCluster コンポーネントが正常であることを確認します。</block>
  <block id="b39709ac0ef947bdc090084f89c2ad94" category="paragraph">「 MetroCluster check run 」のようになります</block>
  <block id="f005234d35c44406394bfc86ede22866" category="paragraph">この処理はバックグラウンドで実行されます。</block>
  <block id="8600ca2371816e2374e80e982b51e056" category="list-text">MetroCluster チェックの実行操作が完了したら ' 結果を表示します</block>
  <block id="e3ccf677e56366a417a172944cdd9599" category="paragraph">MetroCluster チェックショー</block>
  <block id="070a4bbedae89743ad2f6646a3f23205" category="paragraph">約 5 分後に、次の結果が表示されます。</block>
  <block id="1a9778326fd00d0e011a777089b2bc6a" category="list-text">実行中の MetroCluster チェック処理のステータスを確認します。</block>
  <block id="fbd55aa6c7d3ee9ec90836dfa01b62d2" category="paragraph">MetroCluster オペレーション履歴 show -job-id 38`</block>
  <block id="74553544aa9c0c94d16a5a5ed85d6720" category="list-text">ヘルスアラートがないことを確認します。</block>
  <block id="838f9a3aa0c54c620c1dab5cccc98ca5" category="paragraph">「 system health alert show 」というメッセージが表示されます</block>
  <block id="b180c3a6690338cc8cfaeb6b4c37008c" category="summary">ノード 3 をラックに設置し、ノード 1 の接続をノード 3 に転送し、ノード 3 をブートして、 ONTAP をインストールする必要があります。</block>
  <block id="5ff20c188ceb23808ed9b47d8e5637ff" category="doc">node3 をインストールしてブートします</block>
  <block id="80f347da1888e440d3f1755d2e9ca001" category="paragraph">ノード 3 をラックに設置し、ノード 1 の接続をノード 3 に転送し、ノード 3 をブートして、 ONTAP をインストールする必要があります。そのあと、このセクションで説明するように、ノード 1 のスペアディスク、ルートボリュームに属するディスク、およびその前の手順でノード 2 に再配置されなかったルート以外のアグリゲートを再割り当てする必要があります。</block>
  <block id="cabcb5ad3a57db50c098cbabe3b6d8c5" category="paragraph">再配置処理はこのフェーズの開始時に一時停止されます。このプロセスはほとんど自動化されており、処理は一時停止してステータスを確認できます。この処理は手動で再開する必要があります。また、 SAN LIF がノード 3 に正常に移動したことを確認する必要があります。</block>
  <block id="31ccaad020ad8995655b8785712ac7b9" category="paragraph">ノード 1 にインストールされている ONTAP 9 のバージョンが異なる場合は、ノード 3 をネットブートする必要があります。node3 のインストールが完了したら、 Web サーバに保存されている ONTAP 9 イメージからブートします。その後、の手順に従って、後続のシステムのブートに使用する正しいファイルをブートメディアデバイスにダウンロードできます <block ref="4815c2d091d790c1d3bab94177b38eaf" category="inline-link-macro-rx"></block>。</block>
  <block id="2ad1e670b60bb257ae5313d5009813a5" category="inline-link-macro">ノード 3 の FC ポートを設定</block>
  <block id="b6f436f6398306a921de09279a6a8256" category="inline-link-macro">ノード 3 の UTA / UTA2 ポートを確認して設定してください</block>
  <block id="9a1df33637b4fc5aa325b169d3a7aa84" category="list-text">ストレージアレイに接続されている V シリーズシステム、またはストレージアレイに接続された FlexArray 仮想化ソフトウェアを使用するシステムをアップグレードする場合は、を完了する必要があります <block ref="7c8db700ba9d62850f8b66020ea3d4b9" category="inline-xref-macro-rx"></block> から <block ref="d133a54ce8997c6b3c1ffdd4bfb32c84" category="inline-xref-macro-rx"></block>をクリックしてから、このセクションの指示に従います <block ref="b8be2332e6727dc6b48478780a30df1b" category="inline-link-macro-rx"></block> および <block ref="e1881302722b07e924682c0aeef752a5" category="inline-link-macro-rx"></block> 必要に応じて、メンテナンスモードでコマンドを入力します。その後、このセクションに戻ってからを使用して再開する必要があります <block ref="d602dbbaca50060142dad0af29921558" category="inline-xref-macro-rx"></block>。</block>
  <block id="80f025cc78499a80da49bd37c9bde220" category="list-text">ストレージディスクが搭載されたシステムをアップグレードする場合は、このセクション全体を完了して、にアクセスする必要があります <block ref="b8be2332e6727dc6b48478780a30df1b" category="inline-link-macro-rx"></block> および <block ref="e1881302722b07e924682c0aeef752a5" category="inline-link-macro-rx"></block> セクションで、クラスタ・プロンプトでコマンドを入力します。</block>
  <block id="56fd5e5051297f55fa1e22d93c8d71b8" category="list-text">[[auto_install3_step1] ノード 3 のラックスペースがあることを確認します。</block>
  <block id="2c6541bc32b15b7aae8bab68f0ca5874" category="paragraph">ノード 1 とノード 2 が別々のシャーシに搭載されている場合は、ノード 3 をノード 1 と同じラックの場所に設置できます。ただし、 node1 が node2 の同じシャーシに設置されている場合は、 node3 を専用のラックスペースに配置する必要があります。その場合は、 node1 の場所に近い場所に配置することを推奨します。</block>
  <block id="b76de3994341c25067b438fe161926b7" category="list-text">[[auto_install3_step2] ノードモデルの _Installation and Setup Instructions_ に従って、ラックにノード 3 をインストールします。</block>
  <block id="e642674ff2b68ba9c6309b786d87c4f9" category="admonition">両方のノードを同じシャーシに搭載したシステムにアップグレードする場合は、 node4 と node3 をシャーシに設置します。そうしないと、ノードをブートしたときにノードがデュアルシャーシ構成と同じように動作し、 node4 をブートした場合、ノード間のインターコネクトは稼働しません。</block>
  <block id="c558275e7d3a61c5ffa4c89d17138a8e" category="list-text">[[auto_install3_step3]] ケーブルノード 3 を接続し、ノード 1 からノード 3 に接続を移動します。</block>
  <block id="a237c9d74ab3870e45b318a1071c10f4" category="admonition">ほとんどのプラットフォームモデルには一意のインターコネクトカードモデルがあるため、インターコネクトカードまたはクラスタインターコネクトケーブルの接続を node1 から node3 に移動する必要はない場合があります。MetroCluster 構成の場合、 FC-VI ケーブルの接続を node1 から node3 に移動する必要があります。新しいホストに FC-VI カードがない場合は、 FC-VI カードの移動が必要になることがあります。</block>
  <block id="a5492c1c64c93543c424918fe38a847e" category="list-text">[[auto_install3_step4]] ノード 3 の電源をオンにしてから、コンソール端末で Ctrl+C を押してブートプロセスを中断し、ブート環境プロンプトにアクセスします。</block>
  <block id="db32660dfabf573a3553146b10c4b358" category="paragraph">両方のノードを同じシャーシに搭載したシステムにアップグレードする場合は、 node4 もリブートします。ただし、 node4 のブートはあとで破棄することができます。</block>
  <block id="93bd68c37b47b8665f3fe8bb9add087f" category="admonition">node3 をブートすると、次の警告メッセージが表示される場合があります。</block>
  <block id="7882a4b556b6996eaf604413a9e602d9" category="inline-xref">手順 4</block>
  <block id="b64113c5a70901151e544500a7cb6e41" category="list-text">[[auto_install3_step5]] で警告メッセージが表示される場合 <block ref="07e6330d4bc574888011bcb486743c88" category="inline-xref-macro-rx"></block>を使用して、次の操作を実行します。</block>
  <block id="c05c7a2303ef34ab95234ebadd79fc8f" category="cell">ブート環境プロンプトで次のコマンドを使用して、自動的に接続を設定します。 ifconfig e0M -auto</block>
  <block id="96e59e91cef900d59b3ce93f663391f3" category="cell">ブート環境プロンプトで次のコマンドを使用して、接続を手動で設定します。 ifconfig e0M -addr= &lt;filer_addr&gt; -mask= &lt;netmask&gt; -gw= &lt;gateway&gt; -dns= &lt;dns_addr&gt; domain= &lt;dns_domain&gt; `&lt;filer_addr&gt;`&lt;netmask&gt;` はストレージシステムのネットワークマスクです。「 &lt;gateway&gt;` 」は、ストレージシステムのゲートウェイです。「 &lt;dns_addr&gt; 」は、ネットワーク上のネームサーバの IP アドレスです。このパラメータはオプションです。「 &lt;dns_domain&gt; 」は、 Domain Name Service （ DNS ；ドメインネームサービス）ドメイン名です。このパラメータはオプションです。* 注 * ：インターフェイスによっては、他のパラメータが必要になる場合があります。ファームウェア・プロンプトで「 help ifconfig 」と入力すると、詳細が表示されます。</block>
  <block id="48060f068bd1fae855e05859f04c5e3f" category="list-text">[[step7] node3 でネットブートを実行します。</block>
  <block id="526c6586cac2a5ca719ec72a9f077f53" category="paragraph">「 &lt;path_the_web-accessible_directory&gt; 」は、「 &lt;ONTAP_version&gt;_image.tgz 」をダウンロードした場所を指します <block ref="4815c2d091d790c1d3bab94177b38eaf" category="inline-link-macro-rx"></block>。</block>
  <block id="00a7cfe4f4da76897b759c2fe0aa87e4" category="list-text">[[step8]] ブートメニューからオプション [(7) 新しいソフトウェアを最初にインストールする ] を選択します</block>
  <block id="734f579e8fa44e795a2d8f03940b3b8e" category="admonition">次のメッセージは無視してください 'This 手順 is not supported for Non-Disruptive Upgrade on an HA pair'コントローラのアップグレードではなく、 ONTAP による環境の無停止アップグレードも記録されています。新しいノードを希望するイメージに更新する場合は、必ずネットブートを使用してください。別の方法で新しいコントローラにイメージをインストールすると、正しいイメージがインストールされない場合があります。この問題環境 All ONTAP リリース</block>
  <block id="f0546cfa67e11944c3c115c55c0d74c6" category="list-text">[[step9]] 手順を続行するかどうかを確認するメッセージが表示された場合は、「 y 」と入力し、パッケージのプロンプトが表示されたら URL を入力します。</block>
  <block id="b420e8eb0083114b740da33989940785" category="list-text">[[step10] コントローラモジュールをリブートするには、次の手順を実行します。</block>
  <block id="dab98833427c3d8aa8eeb5d6db41328b" category="paragraph">バックアップ設定を今すぐ復元しますか ? {y|n}`</block>
  <block id="78531eca4abf30d4c07d610d913a17b4" category="list-text">次のプロンプトが表示されたら 'y' と入力して再起動します</block>
  <block id="3cab3f136b2c476f859a364c003079c3" category="paragraph">' 新しくインストールしたソフトウェアの使用を開始するには ' ノードを再起動する必要があります今すぐリブートしますか？{y|n}`</block>
  <block id="665b6d787a8576ee10e9c9cee3583341" category="list-text">[[step11]] ブートメニューからメンテナンスモード「 5 」を選択し、起動を続行するように求めるプロンプトが表示されたら「 y 」と入力します。</block>
  <block id="d268c4054cbf23abb6afc6dec45039b4" category="list-text">[[step12]] コントローラとシャーシが HA として構成されていることを確認します。</block>
  <block id="51c448ec2d072d0227e5d83964636a54" category="list-text">[[step13]] コントローラとシャーシが HA として設定されていない場合は、次のコマンドを使用して構成を修正します。</block>
  <block id="a73d1d9d7a9d36edb67531c5cdd004f4" category="list-text">[[step14]] メンテナンスモードを終了します。</block>
  <block id="c3f299c216a4d01822966fa31545bf67" category="paragraph">ブート環境プロンプトで Ctrl+C キーを押して ' 自動ブートを中断します</block>
  <block id="46b4ada45ce5a9b580d12f2837589006" category="list-text">[[step15]] node2 で、システムの日付、時刻、およびタイムゾーンを確認します。</block>
  <block id="f68146a357d007c5719e57f0df2f6cea" category="list-text">[step16]] on node3 で、ブート環境のプロンプトで次のコマンドを使用して日付を確認します。</block>
  <block id="92b09953e03c695a41d0eca9cc7a70b3" category="list-text">[[step17]] 必要に応じて、 node3 の日付を設定します。</block>
  <block id="a35c7561d833fab42eb0820cd7256987" category="list-text">[step18]] on node3 で、ブート環境のプロンプトで次のコマンドを使用して時間を確認します。</block>
  <block id="8fa05814ac535bc4cac5dc313de56abe" category="list-text">[[step19]] 必要に応じて、ノード 3 の時刻を設定します。</block>
  <block id="671e8c839701c582dc6d924cc3f17c82" category="list-text">[[step20]] 必要に応じて、 node3 にパートナーシステム ID を設定します。</block>
  <block id="9b0061842e9b4b978c7b1f439fbd5125" category="paragraph">'setenv partner-sysid &lt;node2 _sysid&gt;`</block>
  <block id="adf02be63922314f36e41d4ce1193e79" category="list-text">[auto_install3_step21] 新しいノードのブートローダで '-partner-sysid' パラメータを設定する必要がありますnode3 の場合、「 partner-sysid 」は node2 のものである必要があります。node3 の「 partner-sysid 」を確認します。</block>
  <block id="b7b77c4a8d173f38e98b19b6fa156359" category="paragraph">printenv partner-sysid</block>
  <block id="1bf7d37df6710b2cae5f87ffc87ac7ca" category="cell">に進みます <block ref="d602dbbaca50060142dad0af29921558" category="inline-xref-macro-rx"></block></block>
  <block id="74c497c4741babe01069b2689c6f6d96" category="inline-link-macro">ノード 3 で FC または UTA / UTA2 設定を設定します</block>
  <block id="2987901eef48d33908a5fe3bc58101db" category="list-text">セクションに移動します <block ref="9cb2fecd70723749806307bb1e7fc101" category="inline-link-macro-rx"></block> をクリックし、このセクションのサブセクションを完了します。</block>
  <block id="824a922c708e37c4e38da69123f1f712" category="list-text">このセクションに戻って、から始めて残りの手順を実行します <block ref="d602dbbaca50060142dad0af29921558" category="inline-xref-macro-rx"></block>。</block>
  <block id="d2382bf853b3c31a2584de4ebbcb20f5" category="list-text">[[auto_install3_step23]] 新しいノードの FC イニシエータポートをスイッチゾーンに追加します。</block>
  <block id="72797da0a6dd02827100892ec56ff0f7" category="inline-link-macro">ノード 3 で FC ポートを設定しています</block>
  <block id="33b34c9b4b9fcbf19dc61172941a60f7" category="paragraph">システムにテープ SAN がある場合は、イニシエータをゾーニングする必要があります。必要に応じて、を参照してオンボードポートをイニシエータに変更します <block ref="587d3c60b98ebe686bf65e1387fc811f" category="inline-link-macro-rx"></block>。ゾーニングの詳細な手順については、ストレージアレイとゾーニングに関するドキュメントを参照してください。</block>
  <block id="c72fdddc98e37cd5e62f25b9974065fc" category="list-text">[[step24]] ストレージアレイに FC イニシエータポートを新しいホストとして追加し、アレイ LUN を新しいホストにマッピングします。</block>
  <block id="3ba1b014c973048d41b40e37b1cfeb69" category="list-text">[[step25]] ストレージアレイ上のアレイ LUN に関連付けられたホストまたはボリュームグループで、 World Wide Port Name （ WWPN ）値を変更します。</block>
  <block id="be6df649a349785ed8ec2a552e7c8903" category="list-text">[[step26]] スイッチベースのゾーニングを使用する構成の場合は、ゾーニングを調整して新しい WWPN 値を反映します。</block>
  <block id="76e2b1ef0b0a726203126fcf7ef71a45" category="list-text">[[step27]] NetApp Storage Encryption （ NSE ）がこの構成で使用されている場合、「 setenvarg.storageencryption.support 」コマンドは「 true 」に設定する必要があります。「 kmip.init.maxwait` 」変数は、 node1 構成のロード後にブートループが発生しないように「 off 」に設定する必要があります。</block>
  <block id="dc19b23ad13df9e69f052ca959f75ad8" category="list-text">[[step28]] ブートメニューからノードを起動します。</block>
  <block id="d5a2736750f555e1b93002d11e192b77" category="inline-link-macro">ノード 3 の手順 15 で UTA / UTA2 ポートを確認して設定します</block>
  <block id="8105e4198590e4ba2b52ef420719d8f6" category="paragraph">FC または UTA / UTA2 設定がない場合は、を実行します <block ref="197bcdf5306898ec17e6022b26568f43" category="inline-link-macro-rx"></block> ノード 3 がノード 1 のディスクを認識できるようにします。</block>
  <block id="bc26b5e5559721e19875fb91dce22cec" category="inline-link-macro">ノード 3 で FC または UTA / UTA2 設定を設定します</block>
  <block id="8ba547e72776f098f3b70a6614639f73" category="list-text">[step29] FlexArray 仮想化ソフトウェアがストレージアレイに接続されている MetroCluster 構成、 V シリーズシステム、およびシステムについて、ノードに接続されているディスクを検出するために、ノード 3 の FC ポートまたは UTA / UTA2 ポートを設定する必要があります。このタスクを完了するには、セクションに進んでください <block ref="c73225f56714e22dffa9ff7369895ce1" category="inline-link-macro-rx"></block>。</block>
  <block id="de73c7940eaf280bb4c1867652fc7e01" category="summary">正しく設定されるようにするには、 HA ペアを有効にする必要があります。</block>
  <block id="1a4d3feb333aa03c1008e54bae47d8e9" category="doc">新しいコントローラが正しくセットアップされていることを確認します</block>
  <block id="bf029ec4ec6e853d0d08bafbb1c50927" category="paragraph">正しく設定されるようにするには、 HA ペアを有効にする必要があります。さらに、 node3 と node4 が相互のストレージにアクセスできること、およびクラスタ内の他のノードに属するデータ LIF を所有していないことを確認する必要があります。また、 node3 が node1 のアグリゲートを所有しており、 node4 が node2 のアグリゲートを所有していること、および両方のノードのボリュームがオンラインであることを確認する必要があります。</block>
  <block id="ca710412a883d1570696f0510733c7a0" category="list-text">node2 のチェック後、 node2 クラスタのストレージフェイルオーバーとクラスタ HA ペアが有効になります。処理が完了すると、両方のノードに「 Completed 」と表示され、クリーンアップ処理が実行されます。</block>
  <block id="9d070d121ee26abdb5d314d6fff4c15c" category="list-text">ストレージフェイルオーバーが有効になっていることを確認します。</block>
  <block id="751035e5db88d172e881299c202d9b13" category="paragraph">「 storage failover show 」をクリックします</block>
  <block id="715940e961cf53af2ba53d695b5bdb37" category="paragraph">次の例は、ストレージフェイルオーバーが有効になっている場合のコマンドの出力例を示しています。</block>
  <block id="9e6e3ee8077a0815c415187bf7e78b19" category="list-text">次のコマンドを使用して、 node3 と node4 が同じクラスタに属していることを確認します。出力を確認します。</block>
  <block id="494cb4f7976c64f111b74e9089d5bbd5" category="paragraph">「 cluster show 」を参照してください</block>
  <block id="fd3a247231846521133c845ae4c424c0" category="list-text">次のコマンドを使用して、 node3 と node4 が相互のストレージにアクセスできることを確認します。出力を確認します。</block>
  <block id="ca4a5bf327945cfdd4e55b64a87076b5" category="paragraph">「 storage failover show -fields local-missing-disks 、 partner-missing-disks 」というメッセージが表示されます</block>
  <block id="ed63866964a059112ba504e1f09aa077" category="list-text">次のコマンドを使用して、 node3 と node4 がクラスタ内の他のノードによってホーム所有されているデータ LIF を所有していないことを確認します。</block>
  <block id="6485b14c0e329aebda0c4dcd7d09dbd0" category="paragraph">「 network interface show 」を参照してください</block>
  <block id="dc85e26538718b459bdf2a353367f497" category="paragraph">node3 と node4 がクラスタ内の他のノードによってホーム所有されているデータ LIF を所有していない場合は、データ LIF をホーム所有者にリバートします。</block>
  <block id="98ab56275ed98fed50530abdb3a97ee7" category="paragraph">「 network interface revert 」の略</block>
  <block id="f67d0a54b752ca4f669625b9f2eba648" category="list-text">ノード 3 がノード 1 のアグリゲートを所有していること、およびノード 4 がノード 2 のアグリゲートを所有していることを確認します。</block>
  <block id="570743d2305de7bd0a4e44c426b2db21" category="paragraph">'storage aggregate show-owner-name&lt;node3 &gt;`</block>
  <block id="75cf0b763a8b4981f23b004d1b96a715" category="paragraph">「 storage aggregate show-owner-name &lt;node4 &gt; 」という形式で指定します</block>
  <block id="862da4c0b3b19ba62c050373943cd909" category="list-text">オフラインになっているボリュームがないかを確認します。</block>
  <block id="498a7d30e002a0545e05d9bfce9c6fd7" category="paragraph">volume show -node &lt;node3 &gt; -state offline`</block>
  <block id="26391f3798784439b28190a843ccb233" category="paragraph">volume show -node &lt;node4 &gt; -state offline`</block>
  <block id="b2ec89d698c3bc26ab79d7bad283a953" category="list-text">オフラインになっているボリュームがある場合は、セクションで取得したオフラインボリュームのリストと比較します <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block>必要に応じて、次のコマンドを使用して、ボリュームごとに 1 回、オフラインボリュームをオンラインにします。</block>
  <block id="f7d167d02c4419aa4a6731264ec3b0f2" category="paragraph">'volume online -vserver &lt;vserver-name&gt; -volume &lt;volume_name&gt;`</block>
  <block id="8b2ba35c1767c4b484add2236c0ffa6c" category="list-text">ノードごとに次のコマンドを使用して、新しいノードの新しいライセンスをインストールします。</block>
  <block id="d68dddaa399afd62872ccc142420c8e8" category="paragraph">'system license add - license-code &lt;license_code, license_code, license_code...&gt;`</block>
  <block id="539b1b58f1be38076506f35eb15e4340" category="paragraph">license-code パラメータには、アルファベットの文字キーをアルファベットの大文字 28 個まで入力できます。ライセンスは一度に 1 つずつ追加することも、複数追加することもできます。各ライセンスキーをカンマで区切って指定することもできます。</block>
  <block id="8fb49e1f692fe82fa4072e7f3b3adc5d" category="list-text">次のいずれかのコマンドを使用して、元のノードから古いライセンスをすべて削除します。</block>
  <block id="3ce96f90e07aec61f73d0c41634c6aa1" category="paragraph">「システムライセンスのクリーンアップ - 未使用 - 期限切れ」</block>
  <block id="10c0851b91ac12edf49186d6d3d1f9e8" category="paragraph">「 system license delete -serial -number &lt;node-serial_number&gt; -package &lt;license_package&gt; 」という 2 つのライセンスがあります</block>
  <block id="b71fdf79c90ac84b34d2470620eeaa18" category="list-text">期限切れのライセンスをすべて削除します。</block>
  <block id="df1e7bcee84d26ba3ee0e0f129bf90c0" category="paragraph">「システムライセンスのクリーンアップ - 期限切れ」</block>
  <block id="b162df50db538c8339d7ad30f407e32f" category="list-text">未使用のライセンスをすべて削除します。</block>
  <block id="32be9f537283877b6e62fd279a4f5513" category="paragraph">'System license clean-up-unused （システムライセンスのクリーンアップ - 未使用） '</block>
  <block id="9501cf64d3b2dae298a8bc24331bd5f4" category="list-text">クラスタから特定のライセンスを削除するには、ノードで次のコマンドを使用します。</block>
  <block id="799bede4cdc5081180edecafa5450710" category="paragraph">「 system license delete -serial-number &lt;node1 serial number&gt; -package * 」という名前になります</block>
  <block id="951f07bea4d8173fd07579bfd41784d7" category="paragraph">「 system license delete -serial-number &lt;node2 serial number&gt; -package * 」のように表示されます</block>
  <block id="9a940b51cdd2b2d508cffc6eecff9e32" category="paragraph">次の出力が表示されます。</block>
  <block id="0b0ab53ca7ce0880a8c5c074d260f0ab" category="paragraph">すべてのパッケージを削除するには 'y' を入力します</block>
  <block id="583284b695f33c141c3b00d7dbad074f" category="list-text">次のコマンドを使用して出力を調べ、ライセンスが正しくインストールされていることを確認します。</block>
  <block id="f52d44aaa981f34fa588225f9d4cc820" category="paragraph">「 system license show 」を参照してください</block>
  <block id="465b7cedf5deb460a2aa173308f5656a" category="paragraph">出力を、セクションでキャプチャした出力と比較することもできます <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block>。</block>
  <block id="9dabc4c6addd92ab1be1dd1cd49038f7" category="inline-link-macro">Node4 をインストールしてブートします（手順 27 ）</block>
  <block id="772f7f66af9503bd28ba599cf5b8a6ea" category="list-text">構成に NetApp Storage Encryption （ NSE ）を使用していた場合は、「 setenvbootarg .bootarg.storageencryption.support 」コマンドを「 true 」に設定し、「 &lt;kmip.init.maxwait&gt;` variable 」を「 off 」に設定します（を参照） <block ref="8eec167848fab5c118476094c3efd320" category="inline-link-macro-rx"></block>）を使用している場合は、変数をリセットする必要があります。</block>
  <block id="7595b7bfda3a3ae80ea41390c836acf4" category="paragraph">「 diag 」のコマンドは、 systemshell -node &lt;nodename&gt; command sudo kenv -u -p kmip.init.maxwait` です</block>
  <block id="1534946b2dbb4d79955a0d451c913c4c" category="list-text">[[Step13]] 両方のノードで次のコマンドを使用して、 SP を設定します。</block>
  <block id="dde01ffa3dbac07014347a80fbf42f2f" category="paragraph">「 system service-processor network modify -node &lt;node_name &gt; 」のように指定します</block>
  <block id="e4c074cd0d17a1426d4153413c21f2b8" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> SP および _SP ONTAP 9.8 コマンドの詳細については ' システム管理リファレンスにリンクするには ' マニュアルページリファレンスを参照してください system の service-processor network modify コマンドの詳細については ' を参照してください</block>
  <block id="c3e44bb7c41d54ab04ed9048fc5b39f1" category="list-text">新しいノードの 1 つで次の操作を実行します。</block>
  <block id="102261de999f6bca12acc79b316dfb42" category="list-text">advanced 権限レベルに切り替えます。</block>
  <block id="5fd1bcc8472b38442961eb87ca3f844a" category="paragraph">「 advanced 」の権限が必要です</block>
  <block id="6dcd1ebf4390170868ab9bcdfd967581" category="list-text">次のコマンドを入力します。</block>
  <block id="1b4358359b751ff53e2d497527507190" category="paragraph">「 storage failover modify -node &lt;node_name &gt; -CIFS-NDO -duration default | medium | low 」</block>
  <block id="bdaf872fbb56ca73fe6e9dd9a980aba6" category="list-text">システムのワークロードが 50% ～ 75% の場合は、「 m edium 」と入力します。</block>
  <block id="c347ef9cd4bc7e044fc3d1aa22c41ed4" category="list-text">システムのワークロードが 75% ～ 100% の場合は 'low' と入力します</block>
  <block id="0ac9d40efe1470ec53257470c91f7314" category="list-text">admin レベルに戻ります。</block>
  <block id="d260c71f1d73fe6dce24fae82cd28aca" category="paragraph">「特権管理者」</block>
  <block id="0fbda10a905dbd102127a7a65daf7abd" category="list-text">システムをリブートして、変更が有効になっていることを確認します。</block>
  <block id="01e6682dee79033af96ab718c5ec6c11" category="list-text">新しいノードにスイッチレスクラスタをセットアップする場合は、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ネットアップサポートサイトへのリンクを設定するには、 _ 2 ノードスイッチレスクラスタへの移行の手順に従ってください。</block>
  <block id="27af4227ca8acc558df96e2723ec9b37" category="inline-link-macro">新しいコントローラモジュールで Storage Encryption をセットアップします</block>
  <block id="a1e79be82a0d3f4b4c3568d0f3e32af4" category="paragraph">ノード 3 とノード 4 でストレージ暗号化が有効になっている場合は、セクションを完了します <block ref="18c90c300c0b71334b8b427eaf4f38a3" category="inline-link-macro-rx"></block>。それ以外の場合は、の項を実行します <block ref="6e48b929ca0767f00c15eeb6d7e78755" category="inline-link-macro-rx"></block>。</block>
  <block id="6af295d62e510174dc8b78d80e744fc4" category="summary">ONTAP 9.8 を実行しているノードのペアでは、コントローラハードウェアを無停止でアップグレードできます。</block>
  <block id="8fb4b518ce39a0704f920c9d4f2f7b77" category="doc">アグリゲートの再配置を使用してコントローラハードウェアをアップグレードする</block>
  <block id="88eee2e6d438ad3ba132fc6cdf4398d7" category="paragraph">手順の実行中に、交換用コントローラハードウェアを使用して元のコントローラハードウェアをアップグレードし、ルート以外のアグリゲートの所有権を切り替えます。アグリゲートをノードからノードに複数回移行して、アップグレード手順全体を通じて少なくとも 1 つのノードがアグリゲートからデータを提供していることを確認します。また、処理を続行する前に、データ論理インターフェイス（ LIF ）を移行し、新しいコントローラのネットワークポートをインターフェイスグループに割り当てます。</block>
  <block id="2b8ce2a5a31645114136f0f0bb138e41" category="paragraph">この情報では、元のノードの名前は「 node1 」と「 node2 」になり、新しいノードの名前は「 node3 」と「 node4 」になります。説明されている手順では、 node1 は node3 に置き換えられ、 node2 は node4 に置き換えられます。「 node1 」、「 node2 」、「 node3 」、および「 node4 」は、元のノードと新しいノードを区別するためだけに使用されます。手順を使用するときは、元のノードと新しいノードの実際の名前を置き換える必要があります。ただし実際には、ノードの名前は変更されません。 node3 には node1 という名前が付けられ、 node4 にはコントローラハードウェアのアップグレード後に node2 という名前が付けられます。</block>
  <block id="997df92b20e351845274e553840f1763" category="paragraph">この情報の中で、「 FlexArray 仮想化ソフトウェアを搭載したシステム」とは、これらの新しいプラットフォームに属するシステムを指します。「 V シリーズシステム」という用語は、ストレージアレイに接続可能な独立したハードウェアシステムを指します。</block>
  <block id="b6ba15c100cec3519d48bc58279da3c3" category="list-title">注意すべき重要な情報</block>
  <block id="32de3fe80cc3182e6d21291decbf392a" category="inline-link-macro">ARL アップグレードの概要</block>
  <block id="2b5992c45bfbea896711ff945a4844aa" category="list-text">この手順は複雑で、 ONTAP の高度な管理スキルがあることを前提としています。また、を読んで理解する必要があります <block ref="4839d43871fe29773e86f5cefcab0e32" category="inline-link-macro-rx"></block> および <block ref="57e14e08755134bb6fef9ad899bb58ee" category="inline-link-macro-rx"></block> アップグレード開始前のセクション。</block>
  <block id="bc0c3600d83329affdb0d85df2aeac56" category="list-text">この手順は、交換用コントローラハードウェアが新しく購入され、使用されていないことを前提としています。使用済みのコントローラを「 wipeconfig 」コマンドで準備するために必要な手順は、この手順には含まれていません。交換用コントローラハードウェアを以前に使用していた場合は、テクニカルサポートに問い合わせる必要があります。特に、コントローラが Data ONTAP 7-Mode を実行していた場合は、テクニカルサポートにお問い合わせください。</block>
  <block id="8d7b68591c9cb3f00554e8b1dd0cc34a" category="list-text">ARL を使用すると、システムを停止することなく、アップグレードするクラスタよりも新しいバージョンの ONTAP を実行する新しいコントローラへのアップグレードを実行できます。古いコントローラと新しいコントローラの ONTAP バージョンの組み合わせは、 ONTAP ソフトウェアリリースの NDU モデルによって決まります。たとえば、 ONTAP 9.8 を実行しているコントローラがあり、そのコントローラで最後にサポートされていたバージョンである場合は、 ONTAP 9.8 より後のバージョンの ONTAP を実行している新しいコントローラにアップグレードできます。</block>
  <block id="12e5dea4b29b66ec41d8307d3502847c" category="summary">ステージ 3 では、 node3 をインストールしてブートします。</block>
  <block id="3f765691a1037f4fcf966c679a3f3a4a" category="doc">ステージ 3 ：node3 をインストールしてブートします</block>
  <block id="aed0650ed977ce1ee331d98fdf3fb87b" category="paragraph">ステージ 3 で、ノード 3 をインストールしてブートし、ノード 1 のクラスタポートとノード管理ポートがノード 3 でオンラインになったことを確認し、ノード 3 のインストールを確認します。SAN 以外のデータ LIF と、ノード 1 に属するルート以外のアグリゲートは、ノード 2 からノード 3 に移動されます。</block>
  <block id="b27daeccf5fbd8a2e88a3636ee615b74" category="list-text"><block ref="b27daeccf5fbd8a2e88a3636ee615b74" category="inline-link-macro-rx"></block></block>
  <block id="c73225f56714e22dffa9ff7369895ce1" category="list-text"><block ref="c73225f56714e22dffa9ff7369895ce1" category="inline-link-macro-rx"></block></block>
  <block id="63ad3c4d36a1a9f413872ac57af754a7" category="inline-link-macro">ノード 3 のインストールを確認します</block>
  <block id="35ed01fca1dde6c35ca197b89d2bbfc7" category="list-text"><block ref="35ed01fca1dde6c35ca197b89d2bbfc7" category="inline-link-macro-rx"></block></block>
  <block id="f6eafe551d29e5e1c533099843028759" category="list-text"><block ref="f6eafe551d29e5e1c533099843028759" category="inline-link-macro-rx"></block></block>
  <block id="840820d31f6c078aeb1567ce302bdd05" category="inline-link-macro">ノード 1 で所有されているルート以外のアグリゲートと NAS データ LIF を、ノード 2 からノード 3 に移動します</block>
  <block id="6acca98fea84a4d59c293fb72d8b9155" category="list-text"><block ref="6acca98fea84a4d59c293fb72d8b9155" category="inline-link-macro-rx"></block></block>
  <block id="1ccbd6f617ebfa1f7b6d1b6f16222909" category="summary">ノード 1 の移転および撤去</block>
  <block id="bbbe961bb71cae13cea3f5b878f4dbb9" category="doc">ステージ 2 ：移行してノード 1 を撤去</block>
  <block id="a87bccd109d187061a4e62dfad783508" category="paragraph">ステージ 2 で、ノード 1 のアグリゲートと LIF をノード 2 に再配置し、ノード 1 の情報を記録してから、ノード 1 を廃棄します。このプロセスはほとんど自動化されており、処理は一時停止してステータスを確認できます。この処理は手動で再開する必要があります。</block>
  <block id="7de24b16e7313de118da7559fecd8fd4" category="inline-link-macro">ノード 1 が所有するルート以外のアグリゲートと NAS データ LIF をノード 2 に再配置します</block>
  <block id="22e9bda17d40c1dbdb534fd455e19fcd" category="list-text"><block ref="22e9bda17d40c1dbdb534fd455e19fcd" category="inline-link-macro-rx"></block></block>
  <block id="650a4c1ea41a0f666ee188ff323d26b9" category="list-text"><block ref="650a4c1ea41a0f666ee188ff323d26b9" category="inline-link-macro-rx"></block></block>
  <block id="93d6a78ca650a17d67b6a45ca81b7f3f" category="inline-link-macro">ノード 1 を撤去</block>
  <block id="830cfeba72054433fc0dcccc19f6d055" category="list-text"><block ref="830cfeba72054433fc0dcccc19f6d055" category="inline-link-macro-rx"></block></block>
  <block id="4815c2d091d790c1d3bab94177b38eaf" category="list-text"><block ref="4815c2d091d790c1d3bab94177b38eaf" category="inline-link-macro-rx"></block></block>
  <block id="53bf10d232214698fea58c12013ebb0b" category="summary">ステージ 1 では、アップグレードのためのノードを準備し、一連の事前確認を実行する必要があります。</block>
  <block id="81605039a97ca73a232818034b412a87" category="doc">ステージ 1 ：アップグレードを準備</block>
  <block id="6c0e9c6d05c6f91d2edf95d8ad8f212d" category="paragraph">ステージ 1 では、アップグレードのためのノードを準備し、一連の事前確認を実行する必要があります。ストレージ暗号化のためにディスクのキー変更が必要になる場合があります。また、新しいコントローラをネットブートする準備を行う必要があります。</block>
  <block id="cd8ad1809865824065fe011b80800cd6" category="list-text"><block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block></block>
  <block id="0ae607be61578c5416aa071902ff0f19" category="list-text"><block ref="0ae607be61578c5416aa071902ff0f19" category="inline-link-macro-rx"></block></block>
  <block id="26f21c512ab4d5d4b123c5b8a953bb85" category="paragraph">node2 の物理ポートが node4 の物理ポートに正しくマッピングされていることを確認する必要があります。これにより、 node4 はアップグレード後にクラスタ内の他のノードおよびネットワークと通信できるようになります。</block>
  <block id="4ded4d845e551767daf131f3a1827b13" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> Hardware Universe にリンクして新しいノードのポートに関する情報を取得するには、次の手順を実行します。このセクションの後半の情報を使用します。</block>
  <block id="3e1a89708cfe8d08896ed24a0d0be5e8" category="paragraph">物理ポートのレイアウトは、ノードのモデルによって異なる場合があります。新しいノードがブートすると、 ONTAP は、自動的にクォーラムに参加するためにクラスタ LIF をホストするポートを判別しようとします。</block>
  <block id="98ba93dd4de23479aa574bba16f17db7" category="paragraph">node2 の物理ポートが node4 の物理ポートに直接マッピングされない場合は、次のセクションに続きます <block ref="364d871b05cd34ae9893fc6fc54b8984" category="inline-xref-macro-rx"></block> ネットワーク接続を修復するために使用する必要があります。</block>
  <block id="e39c239523fa2335eed92e50ae0e2208" category="paragraph">ノード 4 のインストールとブートが完了したら、ノード 4 が正しくインストールされていることを確認する必要があります。ノード 4 がクォーラムに参加するのを待ってから、再配置処理を再開する必要があります。</block>
  <block id="ed944478e87ce6285850bdd8efb0399a" category="paragraph">手順のこの時点で、ノード 4 がクォーラムに参加する間、処理が一時停止します。</block>
  <block id="6a8e851d9f61a3ae03d77096370ca9c6" category="list-text">ノード 4 がクォーラムに参加していることを確認し</block>
  <block id="4395613c979349d83b9f7a1fd64ad821" category="paragraph">cluster show -node node4 -fields health`</block>
  <block id="a5c25ebe0ba44233d498c66cb77e22f2" category="paragraph">「 health 」フィールドの出力は「 true 」でなければなりません。</block>
  <block id="f9bb6290635aecbf1e553e1d48da4966" category="list-text">ノード 4 がノード 3 と同じクラスタに含まれていること、およびノード 4 が正常であることを確認します。</block>
  <block id="1b294cfbc51db8a82a21bedd0caea1b7" category="list-text">advanced 権限モードに切り替えます。</block>
  <block id="248f892426f89c07bc5999439096f3e0" category="paragraph">「高度」</block>
  <block id="b1ce2a2b9289e0bdc7f0dcbfb19de9c2" category="list-text">コントローラ交換処理のステータスを確認し、 node2 を停止する前と同じ状態で一時停止状態になっていることを確認して、新しいコントローラの取り付けやケーブルの移動の物理タスクを実行します。</block>
  <block id="8005ab9a73c38cc367636a0ec9e8fa35" category="paragraph">「 system controller replace show 」と表示されます</block>
  <block id="cf24b4fbdd5de5d1db8e8fd45a8826f7" category="list-text">MetroCluster システムを使用している場合は、交換したコントローラが MetroCluster 構成に対して正しく設定されていることを確認します。 MetroCluster 構成が正常な状態である必要があります。を参照してください <block ref="14c0e32a98a31f9fd4a16b635b2f7ebd" category="inline-link-macro-rx"></block>。</block>
  <block id="f5ce4d426c8852e0090ab32842d1cd09" category="inline-xref">手順 6</block>
  <block id="459235ad323edd7deeae2dc5ded37b95" category="paragraph">MetroCluster ノード node4 にあるクラスタ間 LIF を再設定し、 MetroCluster ノード間の通信をリストアするクラスタピアリングをチェックします <block ref="ee95d9bf63146ca7fe271f7654fa2f7c" category="inline-xref-macro-rx"></block>。</block>
  <block id="45b045cb31b53300f077fd700437de5a" category="paragraph">MetroCluster ノードのステータスを確認します。</block>
  <block id="ecada3140a47012aab89f14c63ba9190" category="paragraph">MetroCluster node show</block>
  <block id="973e4031ed35bf66df5741d51fd988da" category="list-text">[[auto_verify_4_Step6]] コントローラ交換操作を再開します。</block>
  <block id="2a2c4f4e7fd268d1d4c0dda8807d69e2" category="list-text">コントローラの交換は一時停止し、次のメッセージが表示されます。</block>
  <block id="6f399bf4f62f96a02d91e295630626e7" category="list-text">コントローラの交換を一時停止状態にした状態で次のセクションに進んで、ノードのネットワーク設定をリストアします。</block>
  <block id="ad642c9296b70fbec2ff690ecca7088a" category="section-title">ノード 4 のネットワーク設定をリストアします</block>
  <block id="51c7cb1cccc939f5c24359054f6e087c" category="paragraph">node4 がクォーラムにあり、 node3 と通信できることを確認したら、 node2 の VLAN 、インターフェイスグループ、およびブロードキャストドメインが node4 にあることを確認します。また、ノード 4 のすべてのネットワークポートが正しいブロードキャストドメインに設定されていることを確認します。</block>
  <block id="c4d5be310a7b3c7d734bbcc91e576fc5" category="list-text">アップグレードされた node2 （ node4 ）にある物理ポートをすべて一覧表示します。</block>
  <block id="932f91b355fe820e44bf7015a07fe9d1" category="paragraph">「 network port show -node node4 」</block>
  <block id="7201bec4fa4ce45284b39257c7ebc9bd" category="paragraph">ノードのすべての物理ネットワークポート、 VLAN ポート、およびインターフェイスグループポートが表示されます。この出力から、 ONTAP によって「 Cluster 」ブロードキャストドメインに移動された物理ポートを確認できます。この出力を使用して、インターフェイスグループメンバーポート、 VLAN ベースポート、または LIF をホストするスタンドアロンの物理ポートとして使用するポートを決定できます。</block>
  <block id="f12a8cebc5d18fa1d15cbfd16990a033" category="list-text">クラスタのブロードキャストドメインの一覧を表示します。</block>
  <block id="3723e98cfe679a4d7a6a396b19de8982" category="paragraph">「 broadcast-domain show 」</block>
  <block id="dc75ce5cfa835d411e33ad4e6d65531e" category="list-text">node4 にあるすべてのポートの到達可能性をリストします。</block>
  <block id="5e805181dd219e5299df90fe82dbae5d" category="paragraph">「 network port reachability show 」のように表示されます</block>
  <block id="b60798a4e8624ef10969a61bd2f1a5a7" category="paragraph">コマンドの出力例を次に示します。</block>
  <block id="84bdf9c97b15a3e6ea78416bdc99e1ee" category="paragraph">上記の例では、 node2 _node4 がコントローラの交換後にブートされたとします。到達可能性のない複数のポートがあり、到達可能性スキャンを保留しています。</block>
  <block id="7e4772f5da93344d8ada20b9c581e1f9" category="list-text">[[auto_restore_4_Step4]] ノード 4 の各ポートの到達可能性を 'OK' 以外の到達可能性ステータスで修復します次のコマンドを最初に任意の物理ポートで実行し、次に任意の VLAN ポートで一度に 1 つずつ実行します。</block>
  <block id="d8c7ef2c85a7a25537cac9242cffa1bd" category="paragraph">'network port reachability repair-node &lt;node_name &gt; -port &lt;port_name&gt; ’</block>
  <block id="b784d8e9f422428eac76c9239f75fe91" category="paragraph">次のような出力が表示されます。</block>
  <block id="6da5520b869a50ed547a761fe1f0e10e" category="paragraph">上記の警告メッセージは、到達可能性ステータスのポートで、現在配置されているブロードキャストドメインの到達可能性ステータスとは異なる可能性がある場合に表示されます。</block>
  <block id="2b17ef3c860c2adf63f0265d9181acce" category="paragraph">ポートと回答 'y' または 'n' の接続を適宜確認します</block>
  <block id="88e1ec169a4d9b4d08505d76c6e1eb13" category="paragraph">すべての物理ポートに想定される到達可能性があることを確認します。</block>
  <block id="763c4b6560b672163a09cf2e67ba8d89" category="paragraph">到達可能性の修復が実行されると、 ONTAP は正しいブロードキャストドメインにポートを配置しようとします。ただし、ポートの到達可能性を判別できず、既存のどのブロードキャストドメインにも属していない場合、 ONTAP はこれらのポート用に新しいブロードキャストドメインを作成します。</block>
  <block id="6c2174965c1dafdd591752b78b10faa9" category="list-text">インターフェイスグループの設定が新しいコントローラの物理ポートレイアウトと一致しない場合は、次の手順に従って設定を変更します。</block>
  <block id="a0c9e092b3640057dbbb2fad95c8d7be" category="list-text">最初に、インターフェイスグループのメンバーポートにする物理ポートを、それぞれのブロードキャストドメインメンバーシップから削除する必要があります。これを行うには、次のコマンドを使用します。</block>
  <block id="d8f20787d5ec4fcacf599bd56be2bbd1" category="paragraph">「 network port broadcast-domain remove-ports -broadcast-domain &lt;broadcast_domain_name&gt; -ports &lt;node_name ： port_name&gt; 」の形式で指定します</block>
  <block id="62c1275f11de1967a743be3b315a5af6" category="list-text">インターフェイスグループにメンバーポートを追加します。</block>
  <block id="a53c80be8dbadd4ecfb18eacac1d405c" category="paragraph">「 network port ifgrp add -port &lt;node_name &gt; -ifgrp &lt;ifgrp&gt; -port &lt;port_name&gt; 」の形式で指定します</block>
  <block id="0abff6a62b49a7204a8ea4607845ec05" category="list-text">インターフェイスグループは、最初のメンバーポートが追加されてから約 1 分後にブロードキャストドメインに自動的に追加されます。</block>
  <block id="8f16f590f8016a4aad84ad6c5a34e114" category="list-text">インターフェイスグループが適切なブロードキャストドメインに追加されたことを確認します。</block>
  <block id="d8f93cb99c84b71cefbdf673772842c8" category="paragraph">「 network port reachability show -node &lt;node_name &gt; -port &lt;ifgrp&gt; 」の形式で指定します</block>
  <block id="607ae99fdc4c8f52e04ea11d57ca8694" category="paragraph">インターフェイスグループの到達可能性ステータスが「 OK 」でない場合は、適切なブロードキャストドメインに割り当てます。</block>
  <block id="39f16ed05d559ba39f10f8313fdbdbf7" category="paragraph">「 network port broadcast-domain add-ports -broadcast-domain &lt;broadcast_domain_name&gt; -ports &lt;node:port&gt;` 」の形式で指定します</block>
  <block id="1650d35c8daaa79601fdd8158052591c" category="list-text">適切な物理ポートを Cluster ブロードキャスト・ドメインに割り当てます</block>
  <block id="4c2584946af77fb7d60cf4ae472d405c" category="list-text">'Cluster' ブロードキャスト・ドメインに到達可能なポートを判別します</block>
  <block id="a2904a68bb127cf5751716be508a8cd4" category="paragraph">「 network port reachability show-reachable-broadcast-domain Cluster ： Cluster 」</block>
  <block id="9f99edf6858da9da7242d6b213567d8c" category="list-text">到達可能性ステータスが「 OK 」でない場合は、「 Cluster 」ブロードキャストドメインに到達可能なすべてのポートを修復します。</block>
  <block id="9c0ec98274edaf49b54f8a682182e736" category="paragraph">'network port reachability repair-node &lt;node_name &gt; -port &lt;port_name&gt; ’</block>
  <block id="094336d39f674644064e82381591f883" category="list-text">次のいずれかのコマンドを使用して、残りの物理ポートを正しいブロードキャストドメインに移動します。</block>
  <block id="fc794a16843cc25cbaf14628270ab5d2" category="paragraph">「 network port broadcast-domain remove-port 」のようになります</block>
  <block id="db5edb9657d0577afb5f42b19b5b760f" category="paragraph">「 network port broadcast-domain add-port 」と入力します</block>
  <block id="ce885b3d303810e3d85ace1f89c4a065" category="paragraph">到達不能または予期しないポートが存在しないことを確認します。次のコマンドを使用し、出力を調べて、すべての物理ポートの到達可能性ステータスを確認し、ステータスが「 OK 」であることを確認します。</block>
  <block id="add7de11dea94372ab92280144dd2eae" category="paragraph">「 network port reachability show-detail` 」と表示されます</block>
  <block id="67d13fe1d5e641d73d6e558118a0902a" category="list-text">次の手順を実行して、取り外された可能性のある VLAN を復元します。</block>
  <block id="cb91f704c28ecf5de2f29274ef6bf62e" category="list-text">取り外された VLAN のリスト：</block>
  <block id="81a71f7b68d86411acd35a0832051632" category="paragraph">「 displaced-vlans show 」を参照してください</block>
  <block id="551f04031696758c1c256f1c90e57b39" category="paragraph">次のような出力が表示されます。</block>
  <block id="a806d4909353769619f495a130cabdbd" category="list-text">以前のベースポートから取り外された VLAN を復元します。</block>
  <block id="7e13cce614ffd7f318255684f22d3da9" category="paragraph">「 dispaced-vlans restore 」を参照してください</block>
  <block id="e08a0549a69b4bf0d4b807833ac0b586" category="paragraph">次に、インターフェイスグループ a0a から削除された VLAN を同じインターフェイスグループにリストアする例を示します。</block>
  <block id="5382f5bbbe74b198aaaf36efb0dd9ef3" category="paragraph">次に、ポート「 e0e 」上の取り外された VLAN を「 E0h 」にリストアする例を示します。</block>
  <block id="2a31dfadfe9a33da55e9d278be8596a4" category="paragraph">VLAN の復元が成功すると、指定された宛先ポートに、取り外された VLAN が作成されます。デスティネーションポートがインターフェイスグループのメンバーである場合、またはデスティネーションポートがダウンしている場合、 VLAN のリストアは失敗します。</block>
  <block id="aad2ee0340b449143fc7eaa87d78ba8b" category="paragraph">新しくリストアした VLAN が適切なブロードキャストドメインに配置されるまで約 1 分待ちます。</block>
  <block id="3dd496dea37dae38c9dc7eb802d64409" category="list-text">必要に応じて、「 dispaced-vlans show 」出力に含まれていないが、他の物理ポートに設定する必要がある VLAN ポート用に、新しい VLAN ポートを作成します。</block>
  <block id="9ba5961a2332be610ae3121c25c32aeb" category="list-text">ポートの修復がすべて完了したら、空のブロードキャストドメインを削除します。</block>
  <block id="8cb8d05546274856c8c2cb56b7cd62ac" category="paragraph">'broadcast-domain delete -broadcast-domain &lt;broadcast_domain_name&gt;`</block>
  <block id="6fbbdf7318a95fb2400613497f103b75" category="list-text">ポートの到達可能性を確認します</block>
  <block id="e3d6faf783eff413421d5abeaf1dad48" category="paragraph">すべてのポートが正しく設定され、正しいブロードキャストドメインに追加されている場合、「 network port reachability show 」コマンドは、接続されているすべてのポートの到達可能性ステータスを「 ok 」、物理的に接続されていないポートのステータスを「 no-reachability 」と報告する必要があります。この 2 つ以外のステータスが報告されるポートがある場合は、到達可能性修復を実行し、の手順に従ってブロードキャストドメインにポートを追加または削除します <block ref="4f595e600f8320b4ad2d574fa1a9fe37" category="inline-xref-macro-rx"></block>。</block>
  <block id="fb3f4ac6019d983118e241d6e496f536" category="list-text">すべてのポートがブロードキャストドメインに配置されたことを確認します。</block>
  <block id="47cd03a2fa721b9f4f83dca38829afea" category="paragraph">「 network port show 」のように表示されます</block>
  <block id="7b92b1d8c427dbd2b8e236ab8d9bb5f7" category="list-text">ブロードキャストドメインのすべてのポートで、正しい Maximum Transmission Unit （ MTU ；最大伝送ユニット）が設定されていることを確認します。</block>
  <block id="3ef90a77774be1f83d79d3a57d347bee" category="paragraph">「 network port broadcast-domain show 」</block>
  <block id="e2eec117ad4a813e49145093e5613f00" category="list-text">SVM のホームポートと LIF のホームポート（ある場合）をリストアする必要がある場合は、それらを指定して LIF のホームポートをリストアします。</block>
  <block id="12c772fdba51a1a482d3e3843bdaf6c4" category="list-text">移動された LIF を表示します。</block>
  <block id="b24b42eec37d4f62111bc66268ece07c" category="paragraph">「 dispaced-interface show 」</block>
  <block id="ca89b5ef1fbf8f5385df4158740fe931" category="list-text">LIF のホームポートをリストアします。</block>
  <block id="d9c337595df87d0501bee08179c49004" category="paragraph">「配置されたインターフェイス restore -home-node &lt;node_name &gt; -vserver &lt;vserver_name&gt; -lif -name &lt;lif_name&gt;` 」のようになりました</block>
  <block id="4615226c3fd7af8f5c2beb65404cb667" category="list-text">すべての LIF にホームポートがあり、意図的に稼働状態になっていることを確認します。</block>
  <block id="d5a3621c2468f29ad4fa0ab73f4bd80a" category="paragraph">network interface show -fields home-port 、 status-admin</block>
  <block id="cdd3eef7b8578a295d456f9eaf566e58" category="summary">ノード 3 でネットワーク構成を確認したら、ノード 2 からノード 3 にアグリゲートを再配置します。</block>
  <block id="338e1133e592584bd1dc26b643cbe02f" category="paragraph">ノード 3 のネットワーク設定を確認し、ノード 2 からノード 3 にアグリゲートを再配置する前に、ノード 2 に現在あるノード 1 に属する NAS データ LIF が node2 からノード 3 に再配置されたことを確認する必要があります。また、ノード 3 に SAN LIF が存在することも確認する必要があります。</block>
  <block id="f329a7087048b2fb128acd99205356e2" category="paragraph">アップグレード手順の実行中、リモート LIF は SAN LUN へのトラフィックを処理します。アップグレード時にクラスタやサービスの健全性を維持するために、 SAN LIF を移動する必要はありません。SAN LIF は、新しいポートにマッピングする必要がないかぎり移動されません。ノード 3 をオンラインにしたあと、 LIF が正常に機能しており、適切なポートに配置されていることを確認します。</block>
  <block id="a29257abbaad84467babad354360d285" category="paragraph">これらのチェックの実行後、 node1 で所有されているルート以外のアグリゲートと NAS データ LIF が新しいコントローラ node3 に再配置されます。リソースの再配置が完了すると、コントローラの交換処理が一時停止します。</block>
  <block id="61d1def7733487d4ddcc1c11e4c26d34" category="paragraph">LIF が表示されなくなった場合は、ホームノードをノード 3 にリストアします。</block>
  <block id="7e0e78e75be372751ec10514d50e55b5" category="summary">交換用コントローラハードウェアを使用して元のコントローラハードウェアをアップグレードし、ルート以外のアグリゲートの所有権を切り替えます。</block>
  <block id="32cbc0f35ce50a85e5c8c6b2f7b35d1f" category="paragraph">このアップグレード手順では、交換するコントローラモデルで ONTAP の新しいバージョンがサポートされておらず、新しいコントローラで以前のバージョンの ONTAP がサポートされていない主な環境アップグレードシナリオを使用します。</block>
  <block id="3f95c69711726ab20c6ad2092e62e13d" category="list-text">この手順を使用して、ノードが 3 つ以上あるクラスタでコントローラハードウェアをアップグレードできます。ただし、クラスタ内のハイアベイラビリティ（ HA ）ペアごとに手順を個別に実行する必要があります。</block>
  <block id="b63bac0d0a2ee7a43a0c82d9d71a631a" category="list-text">この FlexArray システム、 V シリーズシステム、 AFF システム、および手順環境 FAS 仮想化ソフトウェアを搭載したシステムです。必要なライセンスがインストールされていれば、 ONTAP 9.5 以降にリリースされた FAS システムをストレージアレイに接続できます。ストレージアレイと V シリーズのモデルの詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> Hardware Universe にリンクして、 V シリーズサポートマトリックスにアクセスしてください。</block>
  <block id="9ac92b97b9314fe7c9c80b03c2f61746" category="list-text">この手順環境システムは、 4 ノードの NetApp MetroCluster 構成以上を実行しています。MetroCluster 構成サイトは物理的に異なる場所に設置できるため、 HA ペアの場合は各 MetroCluster サイトでコントローラの自動アップグレードを個別に実行する必要があります。</block>
  <block id="62a59e60f8dc64071df571bef45b97de" category="summary">交換したコントローラまたは新しいコントローラの HA パートナーで Storage Encryption が使用されている場合。</block>
  <block id="71dd89b192a133f8ccfd6e18f0397ebc" category="paragraph">交換したコントローラまたは新しいコントローラの HA パートナーで Storage Encryption が使用されている場合は、 SSL 証明書のインストールやキー管理サーバのセットアップなど、新しいコントローラモジュールを Storage Encryption 用に設定する必要があります。</block>
  <block id="1bf6f98fb62d5ca413d6cce101954a5f" category="paragraph">この手順には、新しいコントローラモジュールで実行する手順が含まれています。コマンドは正しいノードで入力する必要があります。</block>
  <block id="d38fed7bb4bf7b2cd414582a337f388f" category="list-text">キー管理サーバがまだ使用可能であり、ステータスと認証キー情報が正しいことを確認します。</block>
  <block id="eeb811dde1344fabc569b67ecd8b95f6" category="paragraph">「セキュリティキーマネージャクエリー」</block>
  <block id="32ce57c242557f5657864f2684cf9a96" category="list-text">前の手順で確認したキー管理サーバを、新しいコントローラのキー管理サーバのリストに追加します。</block>
  <block id="39971f39aded85b4e8e1fe2d3e1acc6d" category="list-text">キー管理サーバを追加します。</block>
  <block id="74bdef17191283e61278bf225ca4520d" category="list-text">リストされている各キー管理サーバについて、同じ手順を繰り返します。最大 4 台のキー管理サーバをリンクできます。</block>
  <block id="8b2208f5ccda57697f72181172533640" category="list-text">キー管理サーバが正常に追加されたことを確認します。</block>
  <block id="0e79decb13af5d2dc1cdba7d4607d34c" category="paragraph">「 securitykey -manager show 」を参照してください</block>
  <block id="613e5831fca345289928a52de72937a1" category="list-text">新しいコントローラモジュールで、キー管理セットアップウィザードを実行して、キー管理サーバをセットアップしてインストールします。</block>
  <block id="bbdb53ee65b9a0c8fdb6fdf3661d0fb6" category="paragraph">既存のコントローラモジュールと同じキー管理サーバをインストールする必要があります。</block>
  <block id="dd0630a1638f6964504eefd155f3f818" category="list-text">新しいノードでキー管理サーバセットアップウィザードを起動します。</block>
  <block id="5560b948b9e6ef0348c58a90d5656939" category="list-text">ウィザードの手順に従って、キー管理サーバを設定します。</block>
  <block id="b0b1f7cd7ad16c151d90a8783f1752db" category="list-text">リンクされたすべてのキー管理サーバから新しいノードに認証キーをリストアします。</block>
  <block id="26a8fc3a58ee2e1f4b9b0219f3203837" category="summary">ステージ 5 で、 node4 をインストールしてブートし、 node2 のクラスタポートとノード管理ポートを node4 にマッピングします。</block>
  <block id="5eb59651a7213cf4ae352b4c3ee57a36" category="doc">ステージ 5 ：ノード 4 をインストールしてブートします</block>
  <block id="e6cd3f4f7e85ced0a9a0f950fd761aa0" category="paragraph">ステージ 5 で、 node4 をインストールしてブートし、 node2 のクラスタポートとノード管理ポートを node4 にマッピングし、 node4 のインストールを確認します。node2 によって所有されている NAS データ LIF を node3 から node4 に移動し、 node2 のアグリゲートを node3 から node4 に再配置します。</block>
  <block id="f326c815b47f4f2909494bae5cd735d5" category="list-text"><block ref="f326c815b47f4f2909494bae5cd735d5" category="inline-link-macro-rx"></block></block>
  <block id="a6d322e902b744ff3a11f02b5c6d9496" category="list-text"><block ref="a6d322e902b744ff3a11f02b5c6d9496" category="inline-link-macro-rx"></block></block>
  <block id="3a339ed5bdc85366b677c546716fabfa" category="list-text"><block ref="3a339ed5bdc85366b677c546716fabfa" category="inline-link-macro-rx"></block></block>
  <block id="6d23265c57ba430c404cc6f3a940e117" category="inline-link-macro">ノード 4 でキー管理ツールの設定をリストアします</block>
  <block id="c00899c784d90d8f2d9b3b0d15b36cc3" category="list-text"><block ref="c00899c784d90d8f2d9b3b0d15b36cc3" category="inline-link-macro-rx"></block></block>
  <block id="80f5c472ebe8ade631db1dde97db6a0e" category="list-text"><block ref="80f5c472ebe8ade631db1dde97db6a0e" category="inline-link-macro-rx"></block></block>
  <block id="eeb639c3d3a71ea32a9414c5e5e05d42" category="summary">ノード 1 をノード 3 に交換する前に、ルート以外のアグリゲートを移動する必要があります。</block>
  <block id="dd019fbf939676387b29c50185dd26bb" category="paragraph">ノード 1 をノード 3 に交換する前に、ルート以外のアグリゲートと NAS データ LIF をノード 1 からノード 2 に移動してから、ノード 1 のリソースをノード 3 に移動する必要があります。</block>
  <block id="231d6537090582d94372987139e9087b" category="paragraph">この処理は、タスクの開始時にすでに一時停止されている必要があります。手動で再開する必要があります。</block>
  <block id="93847b1108029ddbe22a512a569d1038" category="paragraph">アグリゲートと LIF の移行が完了すると、検証のために処理が一時停止されます。この段階で、ルート以外のアグリゲートと SAN 以外のデータ LIF がすべて node3 に移行されているかどうかを確認する必要があります。</block>
  <block id="356fd2e8c1c464dccb700641317d2900" category="admonition">アグリゲートおよび LIF のホーム所有者は変更されず、現在の所有者のみが変更されます。</block>
  <block id="bcc15f05fe7b911a3de9d9528ece7fc7" category="list-text">アグリゲートの再配置処理と NAS データ LIF の移動処理を再開します。</block>
  <block id="44d6ab00bef397f6537d95a47a570251" category="paragraph">ルート以外のアグリゲートと NAS データ LIF はすべて、 node1 から node2 に移行されます。</block>
  <block id="1a5ea8528c363200c81b97bf8f1cbdc7" category="paragraph">処理が一時停止することで、ノード 1 のルート以外のアグリゲートと SAN 以外のデータ LIF がすべて node2 に移行されているかどうかを確認できます。</block>
  <block id="af443ed1e514e063894af87e3e0e83a6" category="list-text">処理が一時停止したまま、ルート以外のすべてのアグリゲートが node2 でそれぞれの状態でオンラインになっていることを確認します。</block>
  <block id="9c328071e0321bfbe1d164cac2c22ebd" category="paragraph">「 storage aggregate show -node &lt;node2&gt; -state online -root false 」のように表示されます</block>
  <block id="e3f90b559d39f13fadeb0be05f3d5fff" category="paragraph">次の例は、 node2 のルート以外のアグリゲートがオンラインになっていることを示しています。</block>
  <block id="761df4f887d66569090abb51e2ec705f" category="paragraph">アグリゲートがオフラインになった場合、または node2 で外部になった場合は、各アグリゲートに対して 1 回、 node2 で次のコマンドを使用してアグリゲートをオンラインにします。</block>
  <block id="a4a2e92e7d5cb408d0448b6d08752d5a" category="paragraph">「 storage aggregate online -aggregate &lt;aggr_name&gt;` 」という名前になります</block>
  <block id="f999b6b276f2c64e10bfb3630f92f94c" category="list-text">node2 で次のコマンドを使用し、出力を調べて、すべてのボリュームがオンラインであることを確認します。</block>
  <block id="b3b5d42abc670ac795f4b90cfc221655" category="paragraph">volume show -node &lt;node2&gt; -state offline`</block>
  <block id="074f2db71729d7f84803e85e33520125" category="paragraph">node2 上にオフラインのボリュームがある場合は、各ボリュームに対して 1 回、 node2 で次のコマンドを使用してオンラインにします。</block>
  <block id="6dcd6bf9703c1093c3bd05dbdcd04551" category="paragraph">'volume online -vserver &lt;vserver-name&gt; -volume &lt;volume-name&gt;`</block>
  <block id="a3b6690b513bd53e12723fa3f48d8134" category="paragraph">このコマンドで使用する '&lt;vserver-name&gt; は ' 前の volume show コマンドの出力にあります</block>
  <block id="fa39e98dea804607ace91ae82c9543d7" category="list-text">[[step5] いずれかの LIF が停止している場合は、次のコマンドを使用して、各 LIF に対して 1 回ずつ LIF の管理ステータスを「 up 」に設定します。</block>
  <block id="a6177fa5aafac8280f0868d4d136dd02" category="paragraph">「 network interface modify -vserver &lt;vserver_name&gt; -lif &lt;lif_name&gt; -home-node &lt;nodename&gt; -status-admin up 」という形式で指定します</block>
  <block id="afced07d58498bf37f5ac5e4787fe0e9" category="paragraph">このマニュアルでは、 HA ペアのストレージコントローラを新しいコントローラにアップグレードし、既存のデータとディスクはすべて維持する方法について説明します。これは複雑な手順であり、経験豊富な管理者のみが使用する必要があります。</block>
  <block id="8a5876fc5aff9d4ba29b01b35732f36b" category="paragraph">このマニュアルは、次のような状況で使用することを想定しています。</block>
  <block id="fdf5cd6af4cb356df1504c2897e0d9f2" category="list-text">ONTAP 9.8 以降を実行している。</block>
  <block id="5d07aebfbe36ac522f2e416e3efcad81" category="list-text">新しいコントローラを新しい HA ペアとしてクラスタに追加し、ボリューム移動を使用してデータを移行する必要はありません。</block>
  <block id="0218d5b45eb7cfed65f2674d40f1e479" category="list-text">ONTAP の管理経験があり、 diagnostic 権限モードで作業する場合のリスクが十分にあります。</block>
  <block id="f25ecc85a7d953e00ca5f626eeed2a96" category="admonition">この手順では、 NetApp Storage Encryption （ NSE ）および NetApp Volume Encryption （ NVE ）を使用できます。</block>
  <block id="2b378caa5145e2c7adf8d8e9a477ac03" category="paragraph">次の表に、コントローラのアップグレードでサポートされるモデルマトリックスを示します。</block>
  <block id="f37bbd4cc778d5861294352bef9c1c7f" category="cell">古いコントローラ</block>
  <block id="cfdade9e474e805958704ec0836f18ac" category="cell">交換用コントローラ</block>
  <block id="8c06a9afcd20cc8675f878a8e07e16ab" category="cell">FAS8020 、 FAS8040 、 FAS8060 、 FAS8080</block>
  <block id="c86ccf041137a3e913e3e89ed65dbff5" category="cell">FAS8200 、 FAS8300 、 FAS8700 、 FAS9000</block>
  <block id="96e7c50f9e1d1f9b66d5ab1dbe5d047a" category="cell">AFF8020 、 AFF8040 、 AFF8060 、 AFF8080</block>
  <block id="c1a19380507e7e6ae4f9e86f2f492cf1" category="cell">AFF A300 、 AFF A400 、 AFF A700 、 AFF A800^1</block>
  <block id="c37feb3492d999b3f216448183986be2" category="cell">FAS8200</block>
  <block id="7f627dd33a5bf840f270330c41badb8d" category="cell">FAS8700 、 FAS9000 、 FAS8300 ^3^</block>
  <block id="c78a423f3132ee2ac4f4f4c1fa5d4859" category="cell">AFF A300</block>
  <block id="09c446ae2255191f73eeab607258baaa" category="cell">AFF A700 、 AFF A800^1 ^ 、 AFF A400 ^3^</block>
  <block id="73ab298c8e00d66d28156892903a39ce" category="cell">AFF A320</block>
  <block id="ce519c4631a5597216245426b360453b" category="cell">AFF A400 ^2^</block>
  <block id="4852954d031f57b417813707e91dd5bd" category="admonition">コントローラのアップグレードモデルの組み合わせが上記の表にない場合は、テクニカルサポートにお問い合わせください。</block>
  <block id="f02eccb3076760465f52e896d2649983" category="inline-link-macro">ノード 3 の UTA / UTA2 ポートを確認して設定し、手順 23 を実行します</block>
  <block id="51de0f52809b4037608dba4b84c411b1" category="inline-link-macro">ノード 4 の UTA / UTA2 ポートの確認と設定、手順 23</block>
  <block id="ca55b79799a0b9b65f63ca826870856e" category="paragraph">^1 A800 システムに必要な追加手順については、セクションの「 A800 」を参照する手順に進んでください <block ref="46e0d635bf9a753e435b3e56ea555b72" category="inline-link-macro-rx"></block>または <block ref="916a396aec2ea8c5191dac1b7e554adf" category="inline-link-macro-rx"></block>。</block>
  <block id="55b7ad7b49f6385bd9a88c160fc047a1" category="paragraph">^2^ARL AFF A320 から AFF A400 システムへの自動アップグレードは、 ONTAP 9.9..1 からサポートされています。</block>
  <block id="d94152152b104cd141cb46a6decafc34" category="paragraph">^3^ AFF A300 から AFF A400 または FAS8200 を 2 ノードスイッチレスクラスタ構成で FAS8300 システムにアップグレードする場合は、コントローラのアップグレード用の一時的なクラスタポートを選択する必要があります。AFF A400 および FAS8300 システムは、イーサネットバンドルとして、メザニンカードポートはイーサネットタイプ、 FC タイプの FC バンドルとして、 2 種類の構成で提供されます。</block>
  <block id="3ea026f4657fa31414c8a7e80af567b7" category="list-text">AFF A400 または FAS8300 では、イーサネットタイプの構成の場合、 2 つのメザニンポートのいずれかを一時的なクラスタポートとして使用できます。</block>
  <block id="1568a3e43a98a64aa4ad8791465c2028" category="list-text">AFF A400 または FC タイプの構成で FAS8300 を使用する場合は、 4 ポートの 10GbE ネットワークインターフェイスカード（パーツ番号 X1147A ）を追加して一時的なクラスタポートを提供する必要があります。</block>
  <block id="9e2cad624340fb33cab830594b4e89ee" category="list-text">一時的なクラスタポートを使用したコントローラのアップグレードが完了したら、クラスタ LIF を AFF A400 システムの e3a および e3b 、 100GbE ポート、 FAS8300 システムの e0c および e0d 、 100GbE ポートに無停止で移行できます。</block>
  <block id="68f44553add308b567f9f6bbfc94913d" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> から ONTAP 9 ドキュメントセンターにリンクして、 ONTAP 9 製品ドキュメントにアクセスできます。</block>
  <block id="fac54699f861d36d543f619170eba56f" category="summary">アップグレード後は、ネットアップサポートサイトから古いシステムの運用を停止できます。</block>
  <block id="12a1856797218081c363d4151a746a51" category="paragraph">アップグレード後は、ネットアップサポートサイトから古いシステムの運用を停止できます。システムの運用を停止すると、そのシステムは動作していないことがネットアップに通知され、サポートデータベースから削除されます。</block>
  <block id="822b26e0edfc2eec63c38c61151af684" category="list-text">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> からネットアップサポートサイトにリンクしてログインします。</block>
  <block id="eb020d21f20b70e49bbe4ebed52b9e29" category="list-text">メニューから [ 製品 ]&gt;[ マイ製品 ] を選択します。</block>
  <block id="4d0016e281d3a86d70ae083a04a5da95" category="list-text">[ インストール済みシステムの表示 *] ページで、システムに関する情報の表示に使用する *Selection Criteria* を選択します。</block>
  <block id="700d67d065f1bd740439eef879e00b77" category="paragraph">次のいずれかを選択してシステムを検索できます。</block>
  <block id="9738c15508e7d3e2fce3396706fc65c8" category="list-text">シリアル番号（ユニットの背面に記載）</block>
  <block id="fce1b48d1133d34e0a4d5fdc15e8638b" category="list-text">所在地のシリアル番号</block>
  <block id="fd719eec8decd496851f7b087029e913" category="list-text">[* 出発 ] をクリックします</block>
  <block id="a35129a35ab8aae79ad1750a3753888c" category="paragraph">シリアル番号を含むクラスタ情報が表に表示されます。</block>
  <block id="b5554c834fafdd1adbf8f16933521491" category="list-text">テーブルでクラスタを見つけ、 Product Tool Set （製品ツールセット）ドロップダウンメニューから * Decommission this system * （このシステムのデコミッション）を選択します。</block>
  <block id="1153d5d087ce8e64810354b376fd67cd" category="summary">ノード 1 を撤去するには、自動処理を再開して、ノード 2 で HA ペアを無効にし、 Lonode1 を適切にシャットダウンします。</block>
  <block id="15ae34c4770749f2042d550a9e6558a0" category="paragraph">ノード 1 を撤去するには、自動処理を再開して、ノード 2 と HA ペアを無効にし、ノード 1 を適切にシャットダウンします。あとでノード 1 をラックまたはシャーシから取り外す必要があります。</block>
  <block id="44d5329782b4f4acb8947c6cc4601de1" category="list-text">ノード 1 が停止されたことを確認します。</block>
  <block id="d1e63174073b4ec3e4d49ef0ca235c5b" category="paragraph">アップグレードが完了したら、 node1 の運用を停止できます。を参照してください <block ref="6e48b929ca0767f00c15eeb6d7e78755" category="inline-link-macro-rx"></block>。</block>
  <block id="8c0489611df3c9267665a7d99d204fa2" category="summary">LIF の移行後、ステージ 2 、ステージ 3 、またはステージ 5 で移行後にオンラインにならない場合があります。</block>
  <block id="06d473a91334306e0ea337d0cf403b02" category="doc">LIF の移行が失敗しました</block>
  <block id="8fc5e587b615f796c0e6e519e500f09c" category="list-text">ポートの MTU サイズがソースノードと同じであることを確認します。</block>
  <block id="f1dc53f85f175f3393f82fdfda459a06" category="paragraph">たとえば、ソースノードのクラスタポートの MTU サイズが 9000 の場合、デスティネーションノードは 9000 にする必要があります。</block>
  <block id="0be497933ebed90434432b1367f6ac50" category="list-text">ポートの物理的な状態が「所有」である場合は、ネットワークケーブルの物理的な接続を確認します。</block>
  <block id="685f08a5b99430f3e9a6b908131fd4c3" category="summary">交換したコントローラまたは新しいコントローラの HA パートナーが NetApp Volume Encryption を使用している場合。</block>
  <block id="da7d6f53a5e074768e000aca830b3bfa" category="doc">新しいコントローラモジュールで NetApp Volume Encryption をセットアップします</block>
  <block id="0f36176e72d67a1afa95c79c3e1a12de" category="paragraph">交換したコントローラまたは新しいコントローラの HA パートナーが NetApp Volume Encryption （ NVE ）を使用している場合は、新しいコントローラモジュールを NVE 用に設定する必要があります。</block>
  <block id="1a59e73da663791d8cc1a4162cc79daa" category="cell">ONTAP バージョン</block>
  <block id="394247ac369fff4729d586172906244e" category="cell">使用するコマンド</block>
  <block id="127cae73d2b4d7758b4c0a0e3f49ba5f" category="cell">ONTAP 9.6 以降</block>
  <block id="97d64be0988671e53d352ae4aa93eaf6" category="cell">「 securitykey manager key query -node node 」を参照してください</block>
  <block id="85b2cc925922ee961d8156414096bb8d" category="cell">ONTAP 9.5 以前</block>
  <block id="afa9cce4f8e9d7e0dc9a3f8278517e40" category="cell">「 securitykey -manager key show 」を参照してください</block>
  <block id="01a72c63e79e1fcc9b3e0cac4fb2bf75" category="list-text">前の手順で確認したキー管理サーバを新しいコントローラのキー管理サーバリストに追加します。</block>
  <block id="e147253c0010bdd5968cb9b4b9ddf7dc" category="cell">外部キー管理ツール</block>
  <block id="3cdf420c4abece4e0eba648610592dde" category="cell">「 securitykey-manager external restore 」このコマンドには、 OKM のパスフレーズが必要です</block>
  <block id="a9849e92b148965a7bbb6c14d0afbcd0" category="cell">オンボードキーマネージャ（ OKM ）</block>
  <block id="f52de228b93a6f965c1879aa97b007d6" category="paragraph">認証キーを使用できなかったか、外部キー管理サーバにアクセスできなかったためにボリュームがオフラインになっていないかを確認します。volume online コマンドを使用して ' これらのボリュームをオンラインに戻します</block>
  <block id="017b5062ed4e1498b1fe073b7b8cc546" category="summary">ノード 3 にオンボードの FC ポート、オンボードのユニファイドターゲットアダプタ（ UTA / UTA2 ）ポート、または UTA / UTA2 カードがある場合</block>
  <block id="7bd5452d2f3a1c07fc54d3a08cc82d64" category="paragraph">ノード 3 にオンボードの FC ポート、オンボードのユニファイドターゲットアダプタ（ UTA / UTA2 ）ポート、または UTA / UTA2 カードがある場合は、残りの手順を完了する前に設定を行う必要があります。</block>
  <block id="d897564a1ca4a58b7f422ba34b232ab7" category="paragraph">セクションの完了が必要な場合があります <block ref="750d6dbe3bf1312d0d97a8f03a0d2304" category="inline-xref-macro-rx"></block>、を参照してください <block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block>、または両方のセクション。</block>
  <block id="61a70f63b15f41db325598863adb0177" category="inline-link-macro">ノード 3 のインストールを確認</block>
  <block id="9ddd1c356c6ec43f630dd03fa71725d5" category="list-text">ノード 3 にオンボードの FC ポート、オンボードの UTA / UTA2 ポート、または UTA / UTA2 カードがなく、ストレージディスクを搭載したシステムをアップグレードする場合は、に進みます <block ref="d402045f7964b6e0cf4fcac8fa4d9846" category="inline-link-macro-rx"></block> セクション。</block>
  <block id="be6b715addf3303698d174b13e915620" category="list-text">ただし、 V シリーズシステムまたは FlexArray 仮想化ソフトウェアを搭載したストレージアレイを使用するシステムがある場合に、ノード 3 にオンボードの FC ポート、オンボードの UTA / UTA ポート、または UTA / UTA2 カードがない場合は、の項に戻って node3 を起動し、の項を再開します <block ref="279060155dcadaa13689560d46e381cb" category="inline-link-macro-rx"></block>。</block>
  <block id="a1a2d377f686ce4835b9ee342fd6089b" category="list-text"><block ref="750d6dbe3bf1312d0d97a8f03a0d2304" category="inline-xref-macro-rx"></block></block>
  <block id="3088a544c36eafa56a0950901fa93b6a" category="list-text"><block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block></block>
  <block id="8992459eb47b3dc5036bd8be4d821db3" category="paragraph">node3 にオンボードまたは FC アダプタの FC ポートがある場合は、ポートが事前に設定されていないため、ノードを稼働状態にする前にポート設定を設定する必要があります。ポートが設定されていないと、サービスが停止する可能性があります。</block>
  <block id="7551ace690fab9fce9d0a9cad21a0ae7" category="paragraph">セクションに保存した FC ポート設定の値を node1 で確認しておく必要があります <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block>。</block>
  <block id="dfec8ed00cbb51821de82d335a0ba98b" category="paragraph">システムに FC 構成がない場合は、このセクションをスキップしてかまいません。システムにオンボード UTA / UTA2 ポートまたは UTA / UTA2 カードがある場合は、で設定します <block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block>。</block>
  <block id="4499075b12fda8ae40c8f6475349240b" category="paragraph">* 重要 * ：ご使用のシステムにストレージ・ディスクがある場合は、クラスタ・プロンプトでこのセクションにコマンドを入力してください。「 V シリーズシステム」または FlexArray 仮想化ソフトウェアを使用していて、ストレージアレイに接続している場合は、このセクションにメンテナンスモードでコマンドを入力します。</block>
  <block id="bc56374912cd801964f37da82292340c" category="list-text">[[step1] ノード 3 の FC 設定を、ノード 1 から前に取得した設定と比較します。</block>
  <block id="831368d2ac042989f939504faf6cdf51" category="list-text">[[step2]] 次のいずれかの操作を実行します。</block>
  <block id="9e7870f5e5208d6877c9cc3acc6453c0" category="paragraph">メンテナンスモード（ブートメニューのオプション 5 ）で、必要に応じてノード 3 の FC ポートを変更します。</block>
  <block id="ae6864bc5bb9104379f5a07233847acd" category="cell">保守モード（ブートメニューのオプション 5 ）で、必要に応じて node3 の FC ポートを変更します。 ucadmin modify -m fc -t initiator -f &lt;adapter_port_name&gt; `-t` は、 fc4 タイプ、ターゲット、またはイニシエータです。* 注： FC ポートはイニシエータとしてプログラムする必要があります。</block>
  <block id="7e6f8de582e2388fb39a5c5c26caa64f" category="list-text">[[step3]] 次のいずれかの操作を実行します。</block>
  <block id="6ee9ff94b07628e8d936112db18664d2" category="cell">次のコマンドを使用して、新しい設定を確認します。 ucadmin show</block>
  <block id="bc53092d23cdf154996298ad69f4e7f0" category="list-text">[[step4]] メンテナンスモードを終了します。</block>
  <block id="25c2f630f05e1a3933f0c056165ae65b" category="list-text">[[step6] コマンドを入力したら、ブート環境のプロンプトでシステムが停止するまで待ちます。</block>
  <block id="d2dce3cff13fd2c8259fdef7c637226e" category="list-text">[[auto_check3_step8] 次のいずれかの操作を実行します</block>
  <block id="dc1d267429f36a93fe45402105c83a9b" category="list-text">ノード 3 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがある場合は、セクションに進みます <block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block>。</block>
  <block id="09a561f3362ed88514963066e3d7b720" category="list-text">ノード 3 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがない場合は、このセクションを省略してください <block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block> をクリックして、セクションに移動します <block ref="35ed01fca1dde6c35ca197b89d2bbfc7" category="inline-link-macro-rx"></block>。</block>
  <block id="70d6bd3154ab38128a772f6268fea926" category="list-text">ノード 3 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがない場合は、このセクションを省略してください <block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block> セクション「 _ インストール」に戻り、 node3 をブートしてから再開します <block ref="279060155dcadaa13689560d46e381cb" category="inline-link-macro-rx"></block>。</block>
  <block id="d190fd34bae28aff670090c55eb7e24b" category="paragraph">ノード 3 にオンボード UTA / UTA2 ポートまたは UTA / UTA2 カードが搭載されている場合は、アップグレードしたシステムの使用方法によって、ポートの設定を確認し、場合によっては再設定する必要があります。</block>
  <block id="7cda71007d207ef48448dffed511abb8" category="paragraph">FC にユニファイドターゲットアダプタ（ UTA / UTA2 ）ポートを使用する場合は、まずポートの設定を確認する必要があります。</block>
  <block id="55e55fd6d28dec627ac074963cbf9279" category="paragraph">現在のポート設定を確認するには、「 ucadmin show 」コマンドを使用します。</block>
  <block id="b91d8d8d49f32c190d000475eaaf1a99" category="paragraph">UTA / UTA2 ポートは、ネイティブの FC モードまたは UTA / UTA2 モードに設定できます。FC モードでは FC イニシエータと FC ターゲットがサポートされます。 UTA / UTA2 モードを使用すると、同じ 10GbE SFP+ インターフェイスを共有する NIC と FCoE のトラフィックを同時に処理でき、 FC ターゲットをサポートできます。</block>
  <block id="7561dbd16073c82eda6418543cdd93ec" category="paragraph">UTA / UTA2 ポートはアダプタまたはコントローラに搭載されている場合がありますが、次の構成になっています。ノード 3 の UTA / UTA2 ポートの設定を確認し、必要に応じて変更してください。</block>
  <block id="7107b4a109094877db55716e76bb317a" category="list-text">コントローラを注文した UTA / UTA2 カードは、注文したパーソナリティを指定するために出荷前に設定されます。</block>
  <block id="ac077d6a8af47d3f6459bdc75d20144c" category="list-text">新しいコントローラのオンボード UTA / UTA2 ポートは、希望するパーソナリティを持つように出荷する前に設定されます。</block>
  <block id="1acb31a5b3534092750f6ee560e0995c" category="admonition">* 注意 * ：ストレージディスクがある場合は、メンテナンスモードに指示されていないかぎり、クラスタプロンプトでこのセクションのコマンドを入力します。V シリーズシステムまたは FlexArray 仮想化ソフトウェアがインストールされていて、ストレージアレイに接続されている場合は、このセクションのメンテナンスモードプロンプトでコマンドを入力します。UTA / UTA2 ポートを設定する場合は、メンテナンスモードにする必要があります。</block>
  <block id="acb716cb88324392697eb22eddc7c3a3" category="list-text">[[step1] node3 で次のコマンドを入力して、ポートが現在どのように設定されているかを確認します。</block>
  <block id="e8eedad0c370be864050462beebc8141" category="cell">対処は不要です。</block>
  <block id="b9372fe4eb2e1f51dc5ecc63ef944026" category="list-text">[[step2] 現在の SFP+ モジュールが目的の用途と一致しない場合は、正しい SFP+ モジュールと交換します。</block>
  <block id="cf64c78b7d463ed3f7aa4e4a9d43ca20" category="list-text">[[step3]] 「 ucadmin show 」コマンドの出力を調べ、 UTA / UTA2 ポートに希望するパーソナリティがあるかどうかを確認します。</block>
  <block id="37ba28d857fa9f472bd54799a71b4d1f" category="list-text">[[step4]] 次のいずれかの操作を実行します。</block>
  <block id="2c59ff8f0f110684a1947a7be9c33989" category="cell">UTA / UTA2 ポート</block>
  <block id="a74e65d44694577cd6490a79583dff8a" category="cell">に進みます <block ref="e33bb2c935af60d67309f774bd9b33e2" category="inline-xref-macro-rx"></block>。</block>
  <block id="eb97cddf7fc62845fc1e4eea9c2d99cd" category="cell">手順 5 から 12 を省略して、に進みます <block ref="1b9dfae277e309ab4a6eabe371e415ad" category="inline-xref-macro-rx"></block>。</block>
  <block id="c38c7f4981b1e1041fde50ff14eac24d" category="list-text">[[auto_check3_step5] 次のいずれかの操作を実行します。</block>
  <block id="19971734faa0d5692ce82090e92c08e4" category="cell">に進みます <block ref="8636550629e708c32b80412fc9a4bd9f" category="inline-xref-macro-rx"></block></block>
  <block id="23cdc9078cbdc89882a254d05d67d976" category="cell">手順 7 を省略して、に進みます <block ref="c9ad15d95077080d869d1e4c8360803a" category="inline-xref-macro-rx"></block>。</block>
  <block id="da0cddf6f2fcc9355331e1d32bd6c782" category="list-text">[[step6] アダプタがイニシエータモードの場合、および UTA / UTA2 ポートがオンラインの場合は、 UTA / UTA2 ポートをオフラインにします。</block>
  <block id="8538924568e2fc8f0f2a3823de803c1a" category="list-text">[[auto_check3_step7] 現在の構成が目的の用途に一致しない場合は、必要に応じて構成を変更します。</block>
  <block id="68393ca2b7b9884fdd9f7eea661220e1" category="list-text">「 -m 」はパーソナリティ・モードで、「 fc 」または「 cna 」です。</block>
  <block id="47677c5f320a3d7c211f1c3bf5ad457b" category="list-text">[[auto_check3_step8] 設定を確認します。</block>
  <block id="315e31e9f839439e107a11b7ff7facb6" category="list-text">[[step9] 設定を確認します。</block>
  <block id="b72b45050e36429103ef8a4d16d411be" category="list-text">[[step10]] 次のいずれかのコマンドを入力して、各ポートに 1 回ずつターゲットポートをオンラインにします。</block>
  <block id="b479e4a9e97e157251ef3d2064ea4380" category="list-text">[[step11]] ポートをケーブル接続します。</block>
  <block id="3f9068a407bdbb378e93f4d5d6b9abe6" category="list-text">[[auto_check3_step12]] 次のいずれかの操作を実行します。</block>
  <block id="66610f6c17cdd2f74ae18935d0791243" category="cell">に進みます <block ref="35ed01fca1dde6c35ca197b89d2bbfc7" category="inline-link-macro-rx"></block>。</block>
  <block id="f0d8df7e74601e48e696d4b303665234" category="cell">section_Install および node3 のブートに戻り、で再開します <block ref="279060155dcadaa13689560d46e381cb" category="inline-link-macro-rx"></block>。</block>
  <block id="56b97cceb683f15e6179871d3991edcc" category="list-text">[[auto_check3_step13]] メンテナンスモードを終了します。</block>
  <block id="0e0a51d5d131ec116dbea50118d432b6" category="list-text">[[step14]] ブートメニューへのノードのブート時に 'boot_ontap menu' を実行しますA800 にアップグレードする場合は、に進みます <block ref="8de8415e5ddf050c51dc9df1ad54385b" category="inline-xref-macro-rx"></block>。</block>
  <block id="8818e56033c79a7d315b502b9d66c4b0" category="list-text">[auto9597_check_node3 _step15]] ノード 3 で、ブートメニューに移動し、 22-7 を使用して、非表示オプション「 boot_after_controller_replacement 」を選択します。プロンプトで、 node1 のディスクを node3 に再割り当てするには、次の例のように入力します。</block>
  <block id="78c17ca9081fa3b223c0d18eaf556df4" category="list-text">[[step16]] システムが「 no disks found 」というメッセージでリブートループに入ると、システムが FC または UTA/UTA2 ポートをターゲットモードにリセットしたためにディスクを認識できないことを示します。この問題を解決するには、に進みます <block ref="cc511b4dbeed99af4a19f83ac3e97f04" category="inline-xref-macro-rx"></block> 終了： <block ref="8dac798a0974640f6cae187a1dbe2d57" category="inline-xref-macro-rx"></block>をクリックするか、セクションに移動します <block ref="35ed01fca1dde6c35ca197b89d2bbfc7" category="inline-link-macro-rx"></block>。</block>
  <block id="014925696b96cf52282301c416016c05" category="list-text">[[auto_check3_step17]] autoboot 中に Ctrl + C を押して 'loader&gt;` プロンプトでノードを停止します</block>
  <block id="46f0d1accd1916f786a903c85ad13b0f" category="list-text">[[step18]] LOADER プロンプトで、メンテナンスモードに切り替えます。</block>
  <block id="8e26679b9fca64c8419387ed5ddbd066" category="list-text">[[step19]] メンテナンスモードで、現在ターゲットモードになっている以前に設定されたすべてのイニシエータポートを表示します。</block>
  <block id="4306b082c2e67956b1918aaea01dbeec" category="list-text">[[step20]] ポートがイニシエータモードに変更されていることを確認します。</block>
  <block id="4c830d7f040ff17fe7d01c1e6f446b3f" category="list-text">[[step2]] メンテナンスモードを終了します。</block>
  <block id="9ac7575b190440f1f2d6fa8d83610ea2" category="list-text">[auto_check3_step22]] LOADER プロンプトのブートアップ：</block>
  <block id="eed6529f7dcdfb878ddd910a0f3cb526" category="list-text">[[auto_check3_step23]] 外付けディスクがあるシステムから、内蔵ディスクと外付けディスクをサポートするシステム（ AFF A800 システムなど）にアップグレードする場合は、 node1 アグリゲートをルートアグリゲートとして設定し、 node1 のルートアグリゲートからブートするようにします。ルート・アグリゲートを設定するには ' ブート・メニューからオプション 5 を選択して ' 保守モードに切り替えます</block>
  <block id="2d74e383435cfe64554575d0ab7faf2a" category="paragraph">次の手順は、 node3 を node1 のルートアグリゲートからブートするように設定します。</block>
  <block id="d354d3c68fd2aba01b58a01642bf6c97" category="list-text">node1 アグリゲートの RAID 、プレックス、およびチェックサムの情報を確認します。</block>
  <block id="5447152461820ee4fbd4988f18add272" category="list-text">node1 アグリゲートのステータスを確認します。</block>
  <block id="beee7076b2d8936ef1f0677a931d72f4" category="list-text">必要に応じて、 node1 アグリゲートをオンラインにします。</block>
  <block id="83b7dae21419642dd5e031d6fa6f2690" category="paragraph">'aggr_online root_aggr_from_&lt;node1&gt;</block>
  <block id="59bfd9205852a4f57899d2ed024d5fcf" category="list-text">node3 を元のルートアグリゲートからブートできないようにします。</block>
  <block id="1d9aa029b391cb266140104de06a9144" category="paragraph">aggr offline &lt;root_aggr_on_node3&gt;`</block>
  <block id="7dd49fac37eb0c12415d30414f193060" category="list-text">node1 ルートアグリゲートを、 node3 の新しいルートアグリゲートとして設定します。</block>
  <block id="f447db02ef1a999852a59545c4a25c75" category="paragraph">「 aggr options aggr_from_&lt;node1&gt; root 」のように指定します</block>
  <block id="d788db47fa7ed7d234dcdfbb86c17a57" category="list-text">ノード 3 のルートアグリゲートがオフラインになっていること、およびノード 1 からテイクオーバーされたディスクのルートアグリゲートがオンラインになっていて root に設定されていることを確認します。</block>
  <block id="3d7f94ab24ae28ffe95b85995cdb0a28" category="admonition">前の手順を実行しないと、原因 node3 を内部ルートアグリゲートからブートするか、原因システムで新しいクラスタ構成が存在すると想定するか、あるいはクラスタ構成を特定するように求められる可能性があります。</block>
  <block id="91536c39913bd45a62884969813bb360" category="summary">node2 を node4 に置き換える前に、 node2 によって所有されているルート以外のアグリゲートを node3 に再配置する必要があります。</block>
  <block id="43ccb3503988f16a767b1af1e29d2384" category="doc">ルート以外のアグリゲートと NAS データ LIF を node2 から node3 に再配置します</block>
  <block id="022b6cf9ec195b2e8cda97b2b9718dc0" category="paragraph">前のフェーズでチェックが完了すると、 node2 のリソースリリースが自動的に開始されます。ルート以外のアグリゲートと SAN 以外のデータ LIF が node2 から node3 に移行されます。</block>
  <block id="b3fb9233a2435df292df205ef05e46db" category="paragraph">アップグレード手順の実行中、リモート LIF は SAN LUN へのトラフィックを処理します。アップグレード時にクラスタやサービスの健全性を維持するために、 SAN LIF を移動する必要はありません。</block>
  <block id="0569dcac35411678d2e9cbd8034fea69" category="admonition">アグリゲートおよび LIF のホーム所有者は変更されません。現在の所有者のみが変更されます。</block>
  <block id="03c6c2c179dec70c786bc644e02b16df" category="list-text">ルート以外のすべてのアグリゲートがオンラインで、ノード 3 でそれらの状態になっていることを確認します。</block>
  <block id="7edece7677f8bef06093b6be08879c67" category="paragraph">「 storage aggregate show -node node3 -state online -root false 」という 2 つのコマンドを実行します</block>
  <block id="6702bf0268c295c6d30a4dc2db82d427" category="paragraph">アグリゲートがオフラインになった場合、または node3 で外部になった場合は、各アグリゲートに対して次のコマンドを実行してそれらのアグリゲートをオンラインにします。</block>
  <block id="809bea68dee4e68249aea4396bafacd3" category="list-text">node3 で次のコマンドを実行し、出力を調べて、すべてのボリュームがノード 3 でオンラインになっていることを確認します。</block>
  <block id="b830851aa263bbc0b84c68604beef993" category="paragraph">node3 にオフラインのボリュームがある場合は、各ボリュームに対して次のコマンドを実行してそれらのボリュームをオンラインにします。</block>
  <block id="b8520ff69f6b8ffe5e588c1f7ce8e9be" category="list-text">LIF が正しいポートに移動され、ステータスが「 up 」になっていることを確認します。LIF が 1 つでも停止している場合は、次のコマンドを LIF ごとに 1 回入力して、 LIF の管理ステータスを「 up 」に設定します。</block>
  <block id="84b1ceedff80bb769606c95da23925bc" category="paragraph">「 network interface modify -vserver &lt;vserver_name&gt; -lif &lt;lif_name&gt; -home-node &lt;nodename&gt; -status-admin up 」という形式で指定します</block>
  <block id="e2172c82191a506ba37c37e48f854d2a" category="list-text">データ LIF を現在ホストしているポートが新しいハードウェアに存在しない場合は、ブロードキャストドメインから削除します。</block>
  <block id="ee210a0730802d9c055ca601e95c499c" category="paragraph">「 network port broadcast-domain remove-ports 」と入力します</block>
  <block id="99988efb9efcf982f67af1157e609379" category="list-text">[[Step5] ] 次のコマンドを入力し、出力を調べて、 node2 にデータ LIF が残っていないことを確認します。</block>
  <block id="39711e914bc528c59b5d5e3ec8e9bee0" category="paragraph">network interface show -curr-node &lt;node2&gt; -role data</block>
  <block id="48ce4ace02a7e66e4a302eb34827e7ee" category="paragraph">NetApp Volume Encryption （ NVE ）を使用してアップグレードするシステムのボリュームを暗号化する場合は、暗号化設定を新しいノードに同期する必要があります。ノード 1 のアグリゲートの ARL がノード 2 からノード 4 に完了すると、暗号化されたボリュームがオフラインになります。</block>
  <block id="73df6067ad433973d674881dda3dc967" category="summary">ステージ 6 で、新しいノードが正しくセットアップされていることを確認します。</block>
  <block id="d48dfd29ad21ccd1c5cfa50ed99cd89e" category="doc">ステージ 6 ：アップグレードを完了します</block>
  <block id="1a477554c550b034a245bf89c3141577" category="paragraph">ステージ 6 で、新しいノードが正しくセットアップされていることを確認します。新しいノードの 1 つにユニファイドターゲットアダプタがある場合は、ポート設定をすべてリストアする必要があります。また、アダプタのパーソナリティの変更が必要になる場合もあります。また、新しいノードで暗号化が有効になっている場合はストレージ暗号化もセットアップする必要があります。また、古いノードの運用を停止する必要があります。</block>
  <block id="35fac5692bb8027b74e3ca19683197b2" category="list-text"><block ref="35fac5692bb8027b74e3ca19683197b2" category="inline-link-macro-rx"></block></block>
  <block id="18c90c300c0b71334b8b427eaf4f38a3" category="list-text"><block ref="18c90c300c0b71334b8b427eaf4f38a3" category="inline-link-macro-rx"></block></block>
  <block id="6b08bad770533079b309e535c68e1cad" category="inline-link-macro">新しいコントローラモジュールで NetApp Encryption をセットアップします</block>
  <block id="bb524fabb33a00fa255aa2c87d91271e" category="list-text"><block ref="bb524fabb33a00fa255aa2c87d91271e" category="inline-link-macro-rx"></block></block>
  <block id="6e48b929ca0767f00c15eeb6d7e78755" category="list-text"><block ref="6e48b929ca0767f00c15eeb6d7e78755" category="inline-link-macro-rx"></block></block>
  <block id="140c4ad72e426b76f7e15699ae078635" category="inline-link-macro">SnapMirror 処理を再開します</block>
  <block id="4486de9c48a88e42de77cb0ec9f11818" category="list-text"><block ref="4486de9c48a88e42de77cb0ec9f11818" category="inline-link-macro-rx"></block></block>
  <block id="6458e4ec3f015720c168a55e444bc050" category="paragraph">MetroCluster FC 構成の場合は、できるだけ早くディザスタリカバリ / フェイルオーバーサイトのノードを交換する必要があります。コントローラモデルの不一致が原因で原因ディザスタリカバリのミラーリングがオフラインになる可能性があるため、 MetroCluster 内のコントローラモデルの不一致はサポートされません。2 番目のサイトでノードを交換するときに MetroCluster チェックを省略するには、コマンドの -'kip-metrocluster-check true' オプションを使用します。</block>
  <block id="ec91f2dd66cb691d783fba58df9e214d" category="summary">ノードペアのアップグレード中に障害が発生する可能性があります。</block>
  <block id="9fd68cc494a9f57cae67ac737ab1370f" category="paragraph">ノードペアのアップグレード中に障害が発生する可能性があります。ノードがクラッシュする、アグリゲートが再配置されない、または LIF が移行されない可能性があります。障害の原因とその解決策は、アップグレード手順の実行中に障害が発生したタイミングによって異なります。</block>
  <block id="148cb01915f73b429fb4402cc046fed1" category="paragraph">手順の各フェーズについては、セクションの表を参照してください <block ref="57e14e08755134bb6fef9ad899bb58ee" category="inline-link-macro-rx"></block>。発生する可能性のある障害の情報は、手順のフェーズ別に表示されます。</block>
  <block id="29b9e15ece46f3444e3509682e2aee9f" category="summary">ノード 3 とノード 4 を手順の後半で物理的にラックに設置したあと、ネットブートが必要になることがあります。</block>
  <block id="8e79407ae69e201e60bebb326433371d" category="paragraph">ノード 3 とノード 4 を手順の後半で物理的にラックに設置したあと、ネットブートが必要になることがあります。ネットブートという用語は、リモート・サーバに保存された ONTAP イメージからブートすることを意味します。ネットブートの準備を行うときは、システムがアクセスできる Web サーバに、 ONTAP 9 ブート・イメージのコピーを配置する必要があります。</block>
  <block id="135b308ed83c53f1516b7c754566d1c4" category="list-title">作業を開始する前に</block>
  <block id="1d32dacc20fe1feb077659fd0bebdc03" category="list-text">システムから HTTP サーバにアクセスできることを確認します。</block>
  <block id="3f8c328bf258e454068314be8aac5d75" category="list-text">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> からネットアップサポートサイトにリンクして、使用しているプラットフォームに必要なシステムファイルと、適切なバージョンの ONTAP をダウンロードします。</block>
  <block id="48ab14af4b0090253431ed38e4cc2440" category="paragraph">元のコントローラと同じバージョンの ONTAP 9 がインストールされていない場合は、新しいコントローラをネットブートする必要があります。新しいコントローラをそれぞれ取り付けたら、 Web サーバに保存されている ONTAP 9 イメージからシステムをブートします。その後、以降のシステムブートで使用するブートメディアデバイスに正しいファイルをダウンロードできます。</block>
  <block id="302937ad7234fe283f1f179989cd1fe0" category="list-text">ネットアップサポートサイトにアクセスして、システムのネットブートの実行に使用するファイルをダウンロードします。</block>
  <block id="103ec41a89beb368e3357fad5f451a92" category="list-text">ネットアップサポートサイトのソフトウェアダウンロードセクションから適切な ONTAP ソフトウェアをダウンロードし、「 &lt;ONTAP_version&gt;_image.tgz 」ファイルを Web にアクセスできるディレクトリに保存します。</block>
  <block id="5b1b8c3f072422a936e63f0d977e41e0" category="list-text">Web にアクセスできるディレクトリに移動し、必要なファイルが利用可能であることを確認します。</block>
  <block id="5b1c9d774c9bf09143fc1c27a13dd88a" category="cell">「 &lt;ONTAP_version&gt;_image.tgz 」ファイルの内容をターゲットディレクトリに展開します。 tar -zxvf &lt;ONTAP_version&gt;_image.tgz * Note * ： Windows で内容を展開する場合は、 7-Zip または WinRAR を使用してネットブートイメージを展開します。ディレクトリの一覧には、カーネル・ファイル「 netboot/ kernel 」を含むネットブート・フォルダが含まれている必要があります</block>
  <block id="a33229dc61132501eadfb2966e5b2d9f" category="cell">ディレクトリの一覧に次のファイルが含まれている必要があります。 `&lt;ONTAP_version&gt;_image.tgz *Note*: 「 &lt;ONTAP_version&gt;_image.tgz 」ファイルの内容を抽出する必要はありません。</block>
  <block id="843ab277685630f82095416c5b9ae5a1" category="inline-link-macro">ステージ 3</block>
  <block id="c7b2f3e7dacd4ee5eb9b0618c5079d8f" category="paragraph">のディレクトリの情報を使用します <block ref="1f9dd4a8865e8664f884ec11b5f13dfc" category="inline-link-macro-rx"></block>。</block>
  <block id="8e698b8d4467a7a6309118b19a3aa168" category="summary">新しいハードウェアを設置するための特別なツールが必要です。また、アップグレードプロセス中に他のドキュメントを参照する必要があります。</block>
  <block id="0e635d7a91ccc4eccdfb03e35353c899" category="doc">必要な工具とドキュメント</block>
  <block id="f987ca44be5e66313a3fedb59305367d" category="paragraph">アップグレードを実行するには、次の工具が必要です。</block>
  <block id="5fa8c0eb2f030795135e9d47077f239b" category="list-text">アースストラップ</block>
  <block id="230a7914d7f06a8506c29d7466cb12cd" category="list-text">No.2 プラスドライバ</block>
  <block id="9bd7aca153821e782b62a5a9a23f4744" category="paragraph">にアクセスします <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> セクションをクリックして、このアップグレードに必要な参照ドキュメントのリストにアクセスします。</block>
  <block id="c39ea8ae7ab96639c1566b21005a53e1" category="summary">ネットアップサポートサイトから入手できる Config Advisor ツールを使用できます。</block>
  <block id="f1b92e8f33cf66355b4b9762bf95256b" category="doc">MetroCluster 構成エラーがないかどうかを確認します</block>
  <block id="fcae50d4511c2dbf452f0a9593984560" category="paragraph">ネットアップサポートサイトで入手できる Active IQ Config Advisor ツールを使用して、代表的な構成エラーがないかどうかを確認できます。</block>
  <block id="fa6c1be97ff8496ff36915e5e9a95f33" category="paragraph">Active IQ Config Advisor は、構成の検証や健常性のチェックに使用できるツールです。データ収集とシステム分析のために、セキュアなサイトにもセキュアでないサイトにも導入できます。</block>
  <block id="0109999bfef624f78c3dcf4fb94f11ba" category="admonition">Config Advisor のサポートには制限があり、オンラインでしか使用できません。</block>
  <block id="32a404f0f31163f59d88f2d052711ecf" category="list-text">をダウンロードします <block ref="02685666481d8fcfc63d60bb8f2d7352" category="inline-link-macro-rx"></block> ツール。</block>
  <block id="6afe954858ef53a16278f4735833c1a5" category="list-text">Active IQ Config Advisor を実行し、出力を確認して推奨された方法で問題に対処します。</block>
  <block id="7cb7e7951b479387ad32001aab9f53b2" category="summary">システムがクラッシュする場合–リブート、パニック状態、または電源の再投入が行われます。</block>
  <block id="d75bd21e9af20a5036c0fbf461bc4e2d" category="doc">リブート、パニック、電源再投入</block>
  <block id="446d36fba2e507d61203c02578774ece" category="paragraph">アップグレードの各段階で、システムがクラッシュする（リブート、パニック状態、または電源の再投入）場合があります。</block>
  <block id="dec0e91cad029c9d2b55e8bd32c88e76" category="paragraph">これらの問題の解決策は、状況によって異なります。</block>
  <block id="343eae749a23fb17ef6cdd38fd2da8f5" category="section-title">事前チェックフェーズでのリブート、パニック、電源再投入</block>
  <block id="8bea04524c5e6dcfb6d21a849345ee30" category="section-title">HA ペアを有効にして事前チェックフェーズの前にノード 1 またはノード 2 がクラッシュした場合</block>
  <block id="738ee8bcfd939a32f3de7df5814c6eba" category="paragraph">事前チェックフェーズの前にノード 1 またはノード 2 がクラッシュした場合は、再配置されたアグリゲートがなく、 HA ペア構成が有効なままになります。</block>
  <block id="0dd6e0ba50acfc16218ced7b92e813f1" category="paragraph">テイクオーバーとギブバックは正常に実行されます。</block>
  <block id="809ecf0f76cd48f719608b879e540f19" category="list-text">コンソールで、システムで発行された EMS メッセージを確認し、推奨される対処方法を実行します。</block>
  <block id="0accdb9af8ee9902e6e12e8ad3c69dd6" category="list-text">ノードペアのアップグレード用手順に進みます。</block>
  <block id="32042e1cae255d52d27eb7e6f102079f" category="section-title">最初のリソースリリースフェーズでリブート、パニック、電源再投入が発生した場合</block>
  <block id="a929dc8c44e0a4c66070b18005fcda69" category="section-title">HA ペアを有効にすると、リソースの最初のリリースフェーズでノード 1 がクラッシュします</block>
  <block id="17b207ac883ad6c7c60e4c67b540500b" category="paragraph">一部またはすべてのアグリゲートがノード 1 からノード 2 に再配置されており、 HA ペアが有効なままです。node2 は、ノード 1 のルートボリュームと再配置されていないルート以外のアグリゲートをテイクオーバーします。</block>
  <block id="658aff35f1b2ef5bf804a6eaa8bd8834" category="paragraph">再配置されたアグリゲートの所有権は、ホーム所有者が変更されていないためにテイクオーバーされたルート以外のアグリゲートの所有権と同じになります。</block>
  <block id="6ccd7f2e78c66d169bbf302fa0cd170e" category="paragraph">node1 の状態が「 waiting for giveback 」になると、 node2 はノード 1 のルート以外のすべてのアグリゲートをギブバックします。</block>
  <block id="207f28a21e318ac4aaec8c44877876fa" category="list-text">ノード 1 がブートすると、ノード 1 のルート以外のすべてのアグリゲートがノード 1 に戻されます。アグリゲートの手動での再配置を node1 から node2 に実行する必要があります。「 storage aggregate relocation start -node node1 -destination node2 -aggregate-list * -ndocontroller -upgrade true</block>
  <block id="db2e31afa00c26dc29029e29d8ff4e9f" category="section-title">HA ペアを無効にすると、リソースの最初のリリースフェーズでノード 1 がクラッシュします</block>
  <block id="a3ab092ff29c94a2c1dce4e8e58fbab8" category="paragraph">node2 はテイクオーバーしませんが、ルート以外のすべてのアグリゲートから引き続きデータを提供しています。</block>
  <block id="84604a4d07dcc33bcf3def32522ced97" category="list-text">ノード 1 を起動します。</block>
  <block id="07fcb95304f9b9b6a7b8e09bf3a43b90" category="section-title">リソースの最初のリリースフェーズで HA ペアを有効にした状態で node2 に障害が発生する</block>
  <block id="ea41d430c1801092eb658fc92447fa77" category="paragraph">ノード 1 の一部またはすべてのアグリゲートが node2 に再配置されています。HA ペアが有効になります。</block>
  <block id="4ef90a16749941dcc42841a4d350f4e3" category="paragraph">ノード 1 で、ノード 2 のすべてのアグリゲートと、ノード 2 に再配置された独自のアグリゲートがテイクオーバーされます。ノード 2 がブートすると、アグリゲートの再配置が自動的に完了します。</block>
  <block id="f377056f049a875748f0f1fb62e593b9" category="list-text">node2 を起動します。</block>
  <block id="a84419db35cfbd1052a6e3367b3e6550" category="section-title">リソースの最初のリリースフェーズと HA ペアの無効化後に、ノード 2 がクラッシュします</block>
  <block id="3902e7586591847461eb93ec52677583" category="paragraph">ノード 1 ではテイクオーバーが実行されません。</block>
  <block id="209379c90008402bff9e43e926d726f5" category="paragraph">node2 のブート中に、すべてのアグリゲートでクライアントが停止します。</block>
  <block id="fb4e509950818b78317fa6b0f32c946e" category="list-text">残りのノードペアのアップグレード用手順に進みます。</block>
  <block id="c69c252a29e4c40de646b133d6b89286" category="section-title">最初の検証フェーズでリブート、パニック、または電源の再投入が発生した場合</block>
  <block id="eee0c63ddb8a9ee96da6fcbaee95750f" category="section-title">HA ペアを無効にして最初の検証フェーズで node2 がクラッシュします</block>
  <block id="3acacc48f49902e35f2acd0532846558" category="paragraph">HA ペアがすでに無効になっているため、ノード 2 のクラッシュ後にノード 3 はテイクオーバーしません。</block>
  <block id="4d671d2255fc765ecb0c9754a61e9e19" category="section-title">HA ペアを無効にして初回の検証フェーズでノード 3 がクラッシュした場合</block>
  <block id="26bf9df43caced35a52d77376336d969" category="list-text">ノード 3 を起動します。</block>
  <block id="b37a13b468d5049d51c1794bdee782ea" category="section-title">最初のリソース再取得フェーズでのリブート、パニック、電源再投入</block>
  <block id="cdf0fa097138599db352e67f83f4d60e" category="section-title">アグリゲートの再配置中にリソースを再取得する最初のフェーズでノード 2 がクラッシュする</block>
  <block id="e15376fba96131cecfad3a743435774e" category="paragraph">node2 の一部またはすべてのアグリゲートがノード 1 からノード 3 に再配置されています。node3 は、再配置されたアグリゲートからデータを提供します。HA ペアが無効になっているため、テイクオーバーはありません。</block>
  <block id="27685d530ae8434b4b7c343805519a62" category="paragraph">再配置されなかったアグリゲートのクライアントが停止しています。ノード 2 のブート時に、ノード 1 のアグリゲートがノード 3 に再配置されます。</block>
  <block id="afac1d41da19c91d8c537c0dd081b509" category="section-title">アグリゲートの再配置中に、最初のリソースのリ回復フェーズでノード 3 がクラッシュする</block>
  <block id="4309a6885186e1d672df942c1ef7364c" category="paragraph">node2 によるアグリゲートのノード 3 への再配置中にノード 3 がクラッシュした場合、ノード 3 のブート後も処理が続行されます。</block>
  <block id="c5689b790d4c37b77d1d9d0b5eb653e8" category="paragraph">node2 では残りのアグリゲートの処理が続行されますが、 node3 の起動中にすでに node3 に再配置されたアグリゲートでクライアントが停止する可能性があります。</block>
  <block id="c3ed2d002fa1511e957ac4f0f379ab64" category="list-text">コントローラのアップグレードに進みます。</block>
  <block id="c99650cbb2e9705200e0c65ef8112d66" category="section-title">チェック後のフェーズでリブート、パニック、電源再投入が発生した場合</block>
  <block id="cd64011aa9e337fac4267ca724c07c1a" category="section-title">チェック後のフェーズで node2 または node3 がクラッシュする</block>
  <block id="6cc3572daebdd8b0893f33d359db3778" category="paragraph">HA ペアが無効になっているため、テイクオーバーは行われません。リブートしたノードに属するアグリゲートでクライアントが停止しています。</block>
  <block id="79671f1c69add8723a6562ea9207f36a" category="list-text">ノードを起動します。</block>
  <block id="453e1c1e18302a590c41d9e178962389" category="section-title">リソースの 2 つ目のリリースフェーズでリブート、パニック、電源の再投入が発生した場合</block>
  <block id="48824f490a3d91487cefde6c844f77c8" category="section-title">リソースの 2 つ目のリリースフェーズでノード 3 がクラッシュする</block>
  <block id="6fdf83c70d5ac6354046a77aed7edf87" category="paragraph">node2 によるアグリゲートの再配置中にノード 3 がクラッシュした場合、ノード 3 のブート後もタスクは続行されます。</block>
  <block id="5731c7830057407975be490c2494fb1f" category="paragraph">node2 で残りのアグリゲートの処理は続行されますが、 node3 と node3 の独自のアグリゲートにすでに再配置されたアグリゲートでは、 node3 のブート中にクライアントが停止することがあります。</block>
  <block id="c025602fb85c6101c2c2b73f3aee8c22" category="list-text">コントローラのアップグレード手順に進みます。</block>
  <block id="98b7194c3f7e4d897e4fd26d695e1854" category="section-title">2 番目のリソースリリースフェーズで node2 がクラッシュします</block>
  <block id="5824934e067c33bb3114baa4a8cf9ec5" category="paragraph">アグリゲートの再配置時にノード 2 がクラッシュした場合、ノード 2 はテイクオーバーされません。</block>
  <block id="8e080faf36569e4b034dc52f5a78a0c9" category="paragraph">ノード 3 は再配置されたアグリゲートを引き続き提供しますが、ノード 2 が所有するアグリゲートではクライアントの停止が発生します。</block>
  <block id="7ece8f4248b2db8509ecfad31259ec79" category="section-title">2 回目の検証フェーズで、リブート、パニック、または電源の再投入が発生した場合</block>
  <block id="844787e278f2aed416a608ecf8da2f42" category="section-title">2 回目の検証フェーズでノード 3 がクラッシュした場合</block>
  <block id="78d45d4102c6b7fa82c29a7ee6d3feac" category="paragraph">このフェーズで node3 がクラッシュした場合は、 HA ペアがすでに無効になっているため、テイクオーバーは実行されません。</block>
  <block id="9776e59ce7d904cfd8633f152b0e9840" category="paragraph">node3 がリブートするまでは、すべてのアグリゲートのクライアントが停止します。</block>
  <block id="0e9646babd06b1afc68db209c8b7e8cc" category="section-title">2 番目の検証フェーズ中にノード 4 がクラッシュした場合</block>
  <block id="06581dc290bb90ebdc3bff784e74c05b" category="paragraph">このフェーズでノード 4 がクラッシュした場合は、テイクオーバーは実行されません。node3 は、アグリゲートからデータを提供します。</block>
  <block id="320ac33a3a3ed82ed96ef3dd7d173ed9" category="paragraph">ノード 4 のリブートまでルート以外のアグリゲートがすでに再配置されています。</block>
  <block id="d2dec120c917320cae7461e84d91f23c" category="list-text">ノード 4 を起動します。</block>
  <block id="1997edef0e8dc4dfe6a4e9bb54326b4c" category="summary">コントローラのアップグレード中に、コントローラは別のコントローラに交換されます。</block>
  <block id="d345c906575e21a898123708bebd7b5c" category="doc">コントローラのアップグレードプロセスの自動化</block>
  <block id="d88ce1078b12ccecbaaa871291ee2c05" category="paragraph">手動での作業は時間がかかり複雑でしたが、この簡易化された手順では、アグリゲートの再配置を使用してコントローラの更新を実装できるため、 HA ペアの無停止アップグレードをより効率的に実行できます。特に、検証、情報収集、および事後チェックに関連する手動手順は大幅に少なくなります。</block>
  <block id="2d5a70198b86012f50adf28d146a05be" category="summary">ステージ 4 で、ルート以外のすべてのアグリゲートが node2 から node3 に再配置されます。</block>
  <block id="7bc7e56fe8ddd27289de0794179c5451" category="doc">ステージ 4 ：ノード 2 の移動と撤去</block>
  <block id="d4d422ac28594b1bddb2c593ae821f17" category="paragraph">ステージ 4 では、ルート以外のすべてのアグリゲートが node2 から node3 に再配置され、 node2 で所有されている SAN 以外のデータ LIF が node3 に移動されます。ノード 2 の必要な情報を記録してから、 node2 を撤去する必要があります。</block>
  <block id="f7f70c2c98be066b2a9d668ac7d63467" category="list-text"><block ref="f7f70c2c98be066b2a9d668ac7d63467" category="inline-link-macro-rx"></block></block>
  <block id="610cb2d6e87c5e838ceef8f48f57b082" category="list-text"><block ref="610cb2d6e87c5e838ceef8f48f57b082" category="inline-link-macro-rx"></block></block>
  <block id="0dcbb9ad75076c111ef077218e8532c1" category="summary">ARL を使用してノードをアップグレードする前に、手順の動作について理解しておく必要があります。</block>
  <block id="ddfd90d1a40dc38efcde3d45c070506d" category="paragraph">ARL を使用してノードをアップグレードする前に、手順の動作について理解しておく必要があります。このドキュメントでは、手順をいくつかの段階に分けて説明します。</block>
  <block id="7526cf9eecac88850b8e7b400f897378" category="paragraph">手順では、交換用コントローラハードウェアを使用して元のコントローラハードウェアを一度に 1 台ずつアップグレードし、 HA ペア構成を利用してルート以外のアグリゲートの所有権を切り替えます。すべてのルート以外のアグリゲートで、アップグレード後の正しいノードである最終デスティネーションに到達するために、 2 つの再配置を実行する必要があります。</block>
  <block id="dbbdd31aeee0756ad9d276a1eca618f8" category="paragraph">各アグリゲートにはホーム所有者と現在の所有者があります。ホーム所有者はアグリゲートの実際の所有者であり、現在の所有者は一時的な所有者です。</block>
  <block id="6a8b18850ca6073a1c6456cd619cdba6" category="paragraph">次の表に、各フェーズで実行するタスクの概要と、そのフェーズの最後で実行したアグリゲートの所有権の状態を示します。詳細な手順については、手順の後半で説明します。</block>
  <block id="64c6da2436465d11573858d46056b95d" category="cell">段階</block>
  <block id="707253335c75396f2f03f01d02cd611a" category="list-text">事前確認を実行して、処理が実行可能であることを確認します。</block>
  <block id="f03174f8fd409d7574b9f2016f96604d" category="list-text">事前確認が失敗した場合にアグリゲートの所有権を修正</block>
  <block id="0edc7061270b8cba6c4b291d98e9b404" category="list-text">クラスタベースライセンスキーを入力します。</block>
  <block id="dfeec1b537b43dc0ea5606e832f48af2" category="list-text">ストレージ暗号化の IP アドレスを取得します。</block>
  <block id="58119f526d64656dd48685b7def3abf2" category="list-text">KMIP サーバを使用して認証を管理します。</block>
  <block id="5c43723af4fc43b85ff273259b771bc0" category="list-text">オンボードキーマネージャ（ OKM ）を使用してストレージ暗号化を管理します。</block>
  <block id="c8e64b81bcc97d8861a9f55fcb0ae9e6" category="list-text">SnapMirror 関係を休止します（オプション）。</block>
  <block id="9b7c5fc0588fe7d63e81b1258a1b7a71" category="paragraph">ステージ 1 終了時のアグリゲートの所有権：</block>
  <block id="b309c38149cc0e7b5e0bdcbbb02d7372" category="list-text">node1 は、 node1 アグリゲートのホーム所有者と現在の所有者です。</block>
  <block id="c9441f483586640407720ae97b71e4aa" category="list-text">node2 には、 node2 アグリゲートのホーム所有者と現在の所有者を指定します。</block>
  <block id="248ca24967f7bb9be3cc045e68b6dabe" category="list-text">ルート以外のアグリゲートを node1 から node2 に再配置します。</block>
  <block id="fe43f44a817b4a8a1c1b0fbab66f1668" category="list-text">ノード 1 が所有する SAN 以外のデータ LIF を node2 に再配置します。</block>
  <block id="f6eec92be77ff6719e538b7c51a97f55" category="list-text">障害が発生したアグリゲートを再配置するか、</block>
  <block id="faaafe46b0a9b962f0146097c9e28518" category="list-text">ノード 1 を撤去</block>
  <block id="023ab2fff87c666eab071e675efdacaf" category="list-text">netbooting を準備します（オプション）。</block>
  <block id="7544a9f5c9c9ff572c11f753aae7dedf" category="paragraph">ステージ 2 終了時のアグリゲートの所有権：</block>
  <block id="80056829ceb7237c21b4536a01885e13" category="list-text">node2 には、 node1 アグリゲートの現在の所有者を指定します。</block>
  <block id="f6e6ad572d16caa52deed3eeb7ca0ff5" category="list-text">node2 には、 node2 アグリゲートのホーム所有者と現在の所有者を指定します。</block>
  <block id="2ecf50ce071750046e33889f76b4ddf1" category="list-text">node3 をインストールしてブートします。</block>
  <block id="19fa01b5e1d74520ad0be1fb6bf1fc09" category="list-text">FC または（統合ネットワークアダプタ）の CNA 構成を設定します。</block>
  <block id="95b4c137787b29e51c74b71475d203dd" category="list-text">FC ポートを設定</block>
  <block id="b9dd5a9a2b21507e0342ef620ec6824d" category="list-text">UTA / UTA2 ポートを確認して設定してください。</block>
  <block id="8de9e3207ca31bee139241ad4fc0650f" category="list-text">ノード 3 が正常にインストールされていることを確認</block>
  <block id="e60e41c512cd3f2ad332e91763d4d2a5" category="list-text">ノード 3 のネットワーク設定をリストアします。</block>
  <block id="6b01c45aa39022f8fcfff3f90434c89c" category="list-text">ノード 1 で所有している SAN 以外のデータ LIF をノード 2 からノード 3 に移動します。</block>
  <block id="fd37436f77e7bb0f803c1afad985d422" category="list-text">node1 で所有されているルート以外のアグリゲートを node2 から node3 に再配置します。</block>
  <block id="ff8f4c5aae9f0216fa1c088e4c636ab0" category="paragraph">ステージ 3 終了時のアグリゲートの所有権：</block>
  <block id="d58c33bf48643b15350ce1c80bb474d8" category="list-text">node3 は、 node1 アグリゲートのホームの所有者であること、および現在の所有者であること。</block>
  <block id="04bf2293479cb8cadbf0c59e985f585e" category="list-text">ルート以外のアグリゲートを node2 から node3 に再配置します。</block>
  <block id="6ab2fb4ca5571833687af9b24c03405b" category="list-text">node2 に所有されている SAN 以外のデータ LIF をノード 3 に再配置します。</block>
  <block id="8f4919c4d65b1afa5ab9c7d7757a53af" category="list-text">ノード 2 を撤去</block>
  <block id="d517ee6c427837d3874a695e344df510" category="paragraph">ステージ 4 終了時のアグリゲートの所有権：</block>
  <block id="312d1c4e0e8f2ca55c86dd955ac42bff" category="list-text">node3 は、 node1 に属していたアグリゲートのホーム所有者および現在の所有者です。</block>
  <block id="6ccf9360cf25c371211dcaee52075b0c" category="list-text">node2 には、 node2 アグリゲートのホーム所有者を指定します。</block>
  <block id="7c9dc4aa3c862a50866dfa4bf1cad537" category="list-text">node3 は、 node2 アグリゲートの現在の所有者です。</block>
  <block id="f709cec4fcbf35e8bd7dc6e974d17d00" category="list-text">ノード 4 をインストールしてブートします。</block>
  <block id="c62822fe3e3275534a8fb949d6c66e6c" category="list-text">ノード 4 で FC または CNA の設定を行います。</block>
  <block id="57bf5699914e63878247f19a25930b05" category="list-text">ノード 4 が正常にインストールされていることを確認</block>
  <block id="1ed5ba60b18e0aad565c48c7e13368fc" category="list-text">ノード 4 のネットワーク構成をリストアします</block>
  <block id="2c9672ea46aeb54c5860dc07332bc88b" category="list-text">node2 によって所有されている SAN 以外のデータ LIF を node3 から node4 に再配置し、 node4 にある SAN LIF を確認します。</block>
  <block id="ae88ee721c31093785205944b85aa4ee" category="paragraph">ステージ 5 終了時のアグリゲートの所有権：</block>
  <block id="478c619523c38faa7066d2d25b446a3d" category="list-text">node3 は、 node1 に属していたアグリゲートのホーム所有者および現在の所有者です。</block>
  <block id="c2583ec3499fda8ccfebbd517d0af4e6" category="list-text">node4 は、 node2 に属していたアグリゲートのホーム所有者および現在の所有者です。</block>
  <block id="b112f13cf4b353be9d52a7a0591716fd" category="list-text">システムが正しく設定されていることを確認します。</block>
  <block id="6849ebd666f25feda5374c9954336e52" category="list-text">新しいコントローラモジュールで Storage Encryption をセットアップします。</block>
  <block id="ab04d447601d753d6450dcae75a3b355" category="list-text">新しいコントロールモジュールで NetApp Volume Encryption をセットアップします。</block>
  <block id="f6575cd6c144b0fafc0a4706e44b7184" category="list-text">古いシステムの運用を停止</block>
  <block id="01f95e082b71c8b8f530696c5c1e79f6" category="list-text">必要に応じて NetApp SnapMirror の処理を再開</block>
  <block id="964b0454175f6a1894f796b6a8fc4f59" category="summary">手順のさまざまな段階で問題が発生する可能性があります。</block>
  <block id="e33c48b52ab7d302b4af41aca3bbe858" category="doc">手順の複数の段階で発生する可能性のある問題</block>
  <block id="84508423fbb2d015c45d8207837aede4" category="section-title">予期しない「 storage failover show 」コマンドの出力が表示されます</block>
  <block id="9fae6006c452841a1b4104d26127eccf" category="paragraph">手順の実行中に、すべてのデータアグリゲートをホストするノードがパニック状態になったり、誤ってリブートされたりした場合は、リブート、パニック状態、電源再投入の前後に「 storage failover show 」コマンドの出力が想定外に表示されることがあります。</block>
  <block id="8a503ef07edf673987e764eff646e0d0" category="paragraph">ステージ 2 、ステージ 3 、ステージ 4 、またはステージ 5 の「 storage failover show 」コマンドの出力結果に予期しないものが表示されることがあります。</block>
  <block id="4e873fccdf7f54c0486cf43e1300ab3f" category="paragraph">次の例は、すべてのデータアグリゲートをホストするノードでリブートやパニックが発生していない場合の「 storage failover show 」コマンドの出力を示しています。</block>
  <block id="b19cffa247e3fb2147fa3eb145c4247f" category="paragraph">次の例は、リブートまたはパニック後の「 storage failover show 」コマンドの出力例を示しています。</block>
  <block id="399a9894ac45311024aba0a4f4cd1197" category="paragraph">ノードが部分的なギブバック状態にあること、およびストレージフェイルオーバーが無効になっていることを示す出力が表示されますが、このメッセージは無視してもかまいません。</block>
  <block id="3794e9e48df4b7a93a3321f2477f7880" category="paragraph">対処は不要です。ノードペアのアップグレード手順に進みます。</block>
  <block id="f4b0e9bc470ad2b8ac6c955fe361607e" category="summary">アップグレード前に休止していた SnapMirror 転送を再開し、 SnapMirror 関係を再開できます。</block>
  <block id="5f561bedca26d8d072e51e5a351d1918" category="paragraph">アップグレード前に休止していた SnapMirror 転送を再開し、 SnapMirror 関係を再開できます。更新はアップグレードの完了後にスケジュールどおりに実行されます。</block>
  <block id="9d65950930bb25ed46073bd7f01c7392" category="list-text">デスティネーションで SnapMirror のステータスを確認します。</block>
  <block id="6e29c61f3d7ca15884f613bf76f4ad83" category="list-text">SnapMirror 関係を再開します。</block>
  <block id="52167f27ac641afda13c59903c8be219" category="paragraph">「 snapmirror resume -destination – vserver &lt;vserver_name&gt;` 」のように指定します</block>
  <block id="eb04decd1d026d2a659ebfb3bc27a9e2" category="summary">ノード 3 のインストールの確認</block>
  <block id="853a38843b4d12d75ba15c53177a9637" category="paragraph">node1 の物理ポートが、 node3 の物理ポートに正しくマッピングされていることを確認する必要があります。これにより、 node3 は、アップグレード後にクラスタ内の他のノードおよびネットワークと通信できるようになります。</block>
  <block id="e81669be921c5bd20d872e337c5b204d" category="paragraph">node1 の物理ポートが node3 の物理ポートに直接マッピングされていない場合は、次のセクションを参照してください <block ref="871101a3a410248482eefafa62332b63" category="inline-xref-macro-rx"></block> ネットワーク接続を修復するために使用する必要があります。</block>
  <block id="3e0da2be1046cdf5d552f8adaa98c3ae" category="paragraph">node3 のインストールとブートが完了したら、正しくインストールされていることを確認する必要があります。node3 がクォーラムに参加するのを待ってから、再配置処理を再開する必要があります。</block>
  <block id="60d0d1447a22e8eb1a7dd321b2eec56f" category="paragraph">手順のこの時点で、 node3 がクォーラムに参加する間、処理が一時停止します。</block>
  <block id="264f45c2e8ee62b2a09c06df8f3dea0f" category="list-text">ノード 3 がクォーラムに参加していることを確認し</block>
  <block id="0f452669c01e49cb27b82dac8c6f9656" category="paragraph">cluster show -node node3 -fields health`</block>
  <block id="1c39607d3048b34130b8a3c0d2959603" category="list-text">ノード 3 が node2 と同じクラスタに含まれており、ノード 3 が正常であることを確認します。</block>
  <block id="65e2b77d04e539a041041cfc7b7c4d8f" category="list-text">コントローラ交換処理のステータスを確認し、ノード 1 を停止する前と同じ状態で一時停止状態になっていることを確認して、新しいコントローラの設置とケーブルの移動の物理的なタスクを実行します。</block>
  <block id="7d6da636a56e3278933335b21cca97bc" category="list-text">MetroCluster システムを使用している場合は、交換したコントローラが MetroCluster 構成に対して正しく設定されていることを確認します。 MetroCluster 構成が正常な状態である必要があります。を参照してください <block ref="14c0e32a98a31f9fd4a16b635b2f7ebd" category="inline-link-macro-rx"></block>。</block>
  <block id="cc3fae395501f043309fdf0319483db7" category="paragraph">手順 6 に進む前に、 MetroCluster ノード node3 でクラスタ間 LIF を再設定し、クラスタピアリングを調べて MetroCluster ノード間の通信をリストアすることを確認します。</block>
  <block id="ab20c270d222c6ce93913a4b4444628f" category="list-text">コントローラの交換処理を再開します。</block>
  <block id="4ab15a5901ac29ba8b22502370d01f1b" category="section-title">ノード 3 でネットワーク設定をリストア</block>
  <block id="50aa547709666157235d709c3c40d254" category="paragraph">node3 がクォーラムにあり、 node2 と通信できることを確認したら、 node1 の VLAN 、インターフェイスグループ、およびブロードキャストドメインが node3 にあることを確認します。また、 node3 のすべてのネットワークポートが正しいブロードキャストドメインに設定されていることを確認します。</block>
  <block id="503c8b965e105d62de14a258e8389adc" category="list-text">[[step1] アップグレードした node1 （ node3 ）上のすべての物理ポートを表示します。</block>
  <block id="8e80c0200aab07655785cb1bec3cc1b7" category="paragraph">network port show -node node3</block>
  <block id="7d18d6d6569ac51a685a80b4877c4f98" category="paragraph">ノードのすべての物理ネットワークポート、 VLAN ポート、およびインターフェイスグループポートが表示されます。この出力から、 ONTAP によって「 Cluster 」ブロードキャストドメインに移動された物理ポートを確認できます。この出力を使用して、インターフェイスグループメンバーポート、 VLAN ベースポート、または LIF をホストするスタンドアロンの物理ポートとして使用するポートを決定できます。</block>
  <block id="49b3d94638f7775922691a946dbeed08" category="list-text">[step2] クラスタ上のブロードキャストドメインの一覧を表示します。</block>
  <block id="317e2a958cf177c13de16be3728fc34a" category="list-text">[step3] ノード 3 のすべてのポートのネットワークポートの到達可能性の一覧を表示します。</block>
  <block id="a4780c06a89c299119583f29f32ac093" category="paragraph">次の例のような出力が表示されます。</block>
  <block id="e940af53f7d36aaa1ead918494c5c508" category="paragraph">上記の例では、 node1 _ node3 はコントローラの交換後にブートしたばかりです。一部のポートは想定されるブロードキャストドメインに到達できないため、修復が必要です。</block>
  <block id="d640102c0f1d010e832d7ab6c998976d" category="list-text">[[auto_verify_3_step4]] 'node3 の各ポートの到達可能性を 'OK' 以外の到達可能性ステータスで修復します次のコマンドを最初に任意の物理ポートで実行し、次に任意の VLAN ポートで一度に 1 つずつ実行します。</block>
  <block id="5b3590915b0de4e44a7e6eecff6a5a24" category="paragraph">次のような出力が表示されます。</block>
  <block id="926bbd76240f31054ef4744babd679da" category="paragraph">上記の警告メッセージは、到達可能性ステータスのポートで、現在配置されているブロードキャストドメインの到達可能性ステータスとは異なる可能性がある場合に表示されます。ポートと回答 'y' または 'n' の接続を適宜確認します</block>
  <block id="475bdd7eeca873ac007d2e8d1ed1d0d7" category="list-text">[[step5] インターフェイスグループの設定が新しいコントローラの物理ポートレイアウトと一致しない場合は、次の手順に従って変更します。</block>
  <block id="a7f60658094ae5cd0040096989b61fd4" category="paragraph">「 network port broadcast-domain remove-ports -broadcast-domain &lt;broadcast-domain_name&gt; -ports &lt;node_name ： port_name&gt; 」という形式で指定します</block>
  <block id="cb5bf72c08bc8139f3d3b440a9e7819b" category="list-text">[step6] 適切な物理ポートを 'Cluster' ブロードキャストドメインに割り当てるには ' 次の手順に従います</block>
  <block id="c1c14675eda4b09d8745d772c971a760" category="list-text">'Cluster' ブロードキャスト・ドメインに到達可能なポートを判別します</block>
  <block id="1a385242d9fb60423161c8ec41af6b34" category="list-text">[[step7] 次のいずれかのコマンドを使用して、残りの物理ポートを正しいブロードキャストドメインに移動します。</block>
  <block id="652d99b8bb896eacc70cc28d4cea6df9" category="list-text">[[step8] 次の手順を使用して、取り外された可能性のある VLAN を復元します。</block>
  <block id="25b072f1ccd78f519330142d52dcdabc" category="paragraph">「 displaced-vlans show 」を参照してください</block>
  <block id="525a1c0d24b5d4c8e9116b07730aee42" category="paragraph">「 dispaced-vlans restore 」を参照してください</block>
  <block id="40ce515ca09862da0a063e257c689c4b" category="paragraph">次に、インターフェイスグループ a0a から削除された VLAN を同じインターフェイスグループにリストアする例を示します。</block>
  <block id="4f9ba38af17871a0e83fa239a6bccc71" category="paragraph">次に、ポート「 e0e 」上の取り外された VLAN を「 E0h 」にリストアする例を示します。</block>
  <block id="0d659399d58c646652e9fc4a4b40b32f" category="list-text">必要に応じて、「 dispaced-vlans show 」出力に含まれていないが、他の物理ポートに設定する必要がある VLAN ポート用に、新しい VLAN ポートを作成します。</block>
  <block id="a14b1937d7549cfe6656638825e7aa1a" category="list-text">[[step9] すべてのポート修復が完了したら、空のブロードキャストドメインを削除します。</block>
  <block id="5831ae6a2541ef3e48c73d2d25573b1f" category="list-text">[[step10] ] ポートの到達可能性を確認します。</block>
  <block id="94e75d181c02739e78c94503deab7a67" category="paragraph">すべてのポートが正しく設定され、正しいブロードキャストドメインに追加されている場合、「 network port reachability show 」コマンドは、接続されているすべてのポートの到達可能性ステータスを「 ok 」、物理的に接続されていないポートのステータスを「 no-reachability 」と報告する必要があります。この 2 つ以外のステータスが報告されたポートがある場合は、到達可能性修復を実行し、の手順に従ってブロードキャストドメインにポートを追加または削除します <block ref="647eca8a7ea8d4d8434879df3c364180" category="inline-xref-macro-rx"></block>。</block>
  <block id="bf3f92b1cc4c69581f2185ebf4603ed4" category="list-text">次の手順に従って、リストアが必要な SVM および LIF のホームポートがある場合は、それらを指定して LIF のホームポートをリストアします。</block>
  <block id="5103bf442db985e287322952e9087bad" category="list-text">LIF のホームノードとホームポートをリストアします。</block>
  <block id="942a2e20bfd5086873f5ad24de65d688" category="paragraph">「配置されたインターフェイス restore -home-node &lt;node_name &gt; -vserver &lt;vserver_name&gt; -lif -name &lt;lif_name&gt;` 」のようになりました</block>
  <block id="46834fba6defd2be4821b9da772dd301" category="summary">ノード 4 をラックに設置し、ノード 2 の接続をノード 4 に転送し、ノード 4 をブートして、 ONTAP をインストールする必要があります。</block>
  <block id="5e026294e07b11e29fcf1170b1f74470" category="paragraph">再配置処理はこのフェーズの開始時に一時停止されます。このプロセスはほとんどが自動化されており、処理は一時停止してステータスを確認できます。この処理は手動で再開する必要があります。また、 NAS データ LIF が node4 に正常に移動したことを確認する必要があります。</block>
  <block id="4a8c92edcf5608186b4e424977f98a73" category="cell">ブート環境プロンプトで「 ifconfig e0M -auto 」コマンドを入力すると、接続が自動的に設定されます</block>
  <block id="518ef7aea7bc08d1f210a055e236783e" category="cell">ブート環境プロンプトで次のコマンドを入力して、接続を手動で設定します。 ifconfig e0M -addr= &lt;filer_addr&gt; -mask= &lt;netmask&gt; -gw= &lt;gateway&gt; -dns= &lt;dns_addr&gt; domain= &lt;dns_domain&gt; `&lt;filer_addr&gt;`&lt;netmask&gt;` はストレージシステムのネットワークマスクです。「 &lt;gateway&gt;` 」は、ストレージシステムのゲートウェイです。「 &lt;dns_addr&gt; 」は、ネットワーク上のネームサーバの IP アドレスです。「 &lt;dns_domain&gt; 」は、 Domain Name Service （ DNS ；ドメインネームサービス）ドメイン名です。このオプションパラメータを使用する場合は、ネットブートサーバの URL に完全修飾ドメイン名を指定する必要はなく、サーバのホスト名だけを指定します。* 注： * インターフェイスによっては、その他のパラメータが必要になる場合があります。ファームウェア・プロンプトで「 help ifconfig 」と入力すると、詳細が表示されます。</block>
  <block id="732b920f8c31e81584bfe00d62cf46b6" category="paragraph">必要に応じて、を参照してオンボードポートをイニシエータに変更します <block ref="1d789633b45165b05bf13f9838060fe6" category="inline-link-macro-rx"></block>。ゾーニングの詳細な手順については、ストレージアレイとゾーニングに関するドキュメントを参照してください。</block>
  <block id="d3feb03e5c47d69a9cd8b610c3e8e8ce" category="list-text">[[step29]] ストレージアレイに接続された FlexArray 仮想化ソフトウェアを使用する MetroCluster 構成、 V シリーズシステムおよびシステムの場合は、に進みます <block ref="65c4c751ac1fc661b74f2a8dfa84d816" category="inline-link-macro-rx"></block>。</block>
  <block id="c6b27d17660b728cdd893a08876f2da9" category="summary">ノード 4 のインストールの確認が完了し、ノード 3 からノード 4 にアグリゲートを再配置する前に、 node2 に属する NAS データ LIF を移動します。</block>
  <block id="a3e75c2a01a7c61a023e487467fd7a4a" category="paragraph">ノード 4 のインストールの確認が完了し、ノード 3 からノード 4 にアグリゲートを再配置する前に、現在ノード 3 にある NAS データ LIF をノード 2 からノード 4 に移動する必要があります。また、ノード 4 に SAN LIF が存在することを確認する必要があります。</block>
  <block id="b24179e00e90966dedcd7ebbac3c3c96" category="list-text">ネットワークとすべての VLAN 、インターフェイスグループ、およびブロードキャストドメインが正しく設定されていることを手動で確認してください。</block>
  <block id="35c143d9885250e0128441d72be169dd" category="list-text">「 y 」と入力して続行します。</block>
  <block id="0fe1ab232beb36c111a482c1e5418bbf" category="paragraph">これらのチェックの実行後、システムによって、 node2 によって所有されているルート以外のアグリゲートと NAS データ LIF が新しいコントローラ node4 に再配置されます。リソースの再配置が完了すると、システムは一時停止します。</block>
  <block id="ec0abf2d5a391631e61dd4509cb00ed5" category="list-text">ルート以外のアグリゲートと NAS データ LIF がノード 4 に正常に再配置されたことを手動で確認します。</block>
  <block id="947b05812612f9bdff090f2792520d01" category="paragraph">いずれかのアグリゲートに再配置が失敗した場合、または拒否された場合は、アグリゲートを手動で再配置するか、必要に応じて拒否またはデスティネーションのチェックを無視する必要があります。を参照してください <block ref="f9a42009c629603217595f3693c67911" category="inline-link-macro-rx"></block> を参照してください。</block>
  <block id="cce8a84ff4a03ab6c70c73692fd3aebb" category="list-text">次の手順を実行して、ノード 4 の正しいポートに SAN LIF があることを確認します。</block>
  <block id="5f1a63352c537579794f3a3c507ca8fb" category="list-text">次のコマンドを入力し、出力を確認します。</block>
  <block id="8d0b6c4adc8652a4d393f803e2e37cff" category="paragraph">'network interface show -data-protocol iscsi|fcp-home-node &lt;node4 &gt;`</block>
  <block id="fd9ca0bcb22fd53f185265e5000e6dfc" category="paragraph">次の例のような出力が返されます。</block>
  <block id="700025ddacc1b1f21775237f69db717d" category="list-text">ノード 4 に、ノード 2 に存在しないポート上にある SAN LIF または SAN LIF のグループがある場合、または別のポートにマッピングする必要がある場合は、次の手順を実行して、ノード 4 の該当するポートにそれらの SAN LIF またはグループを移動します。</block>
  <block id="628e610b0dbac7c06fd03cc48e401fac" category="list-text">次のコマンドを入力して、 LIF のステータスを down に設定します。</block>
  <block id="faa2ac3f77b838a1d072635dac66a426" category="paragraph">「 network interface modify -vserver &lt;vserver_name&gt; -lif &lt;LIF_NAME&gt; -status-admin down 」という形式で指定します</block>
  <block id="c9ac8fe8e0b43e6046de0567dc54775e" category="list-text">ポートセットから LIF を削除します。</block>
  <block id="d69d2bd9d3262a8ab5d370d315213f33" category="paragraph">`portset remove -vserver &lt;vserver_name&gt; -portset &lt;portset_name&gt; -port-name &lt;port_name&gt; の形式で指定します</block>
  <block id="d21772becf211f27205d2c80c2749c12" category="list-text">次のいずれかのコマンドを入力します。</block>
  <block id="912ec22b1107a17c22a0c63f0644a0d3" category="list-text">次のコマンドを入力して、 1 つの LIF を移動します。</block>
  <block id="07763b6c5df84704dcdc1db91c615af1" category="paragraph">「 network interface modify -vserver &lt;vserver_name&gt; -lif &lt;lif_name&gt; -home-port &lt;new_home_port&gt;` 」の形式で指定します</block>
  <block id="f037b701218bf1cc451615cabf0cca09" category="list-text">次のコマンドを入力して、単一のポートまたは間違ったポートのすべての LIF を新しいポートに移動します。</block>
  <block id="7066be16c0309959c4b2035bead5b139" category="paragraph">network interface modify ｛ -home-node &lt;port_on_node1&gt; -role data ｝ -home-node &lt;node1&gt; -role data ｝ -home-port &lt;new_home_port_on_node1&gt; ’ 3 を参照してください</block>
  <block id="0a3646df26d19fcc6a0ee6929a6ea7be" category="list-text">LIF をポートセットに再度追加します。</block>
  <block id="6427a184f2e8fa2884ff0d3eebe006ce" category="paragraph">`portset add -vserver &lt;vserver_name&gt; -portset &lt;portset_name&gt; -port-name &lt;port_name&gt; の形式で指定します</block>
  <block id="d78bc2532b76c692bc747f0206ce2369" category="admonition">SAN LIF は、元のポートとリンク速度が同じポートに移動する必要があります。</block>
  <block id="2e3c23cf91c21a249f56ef996f27a61a" category="list-text">次のコマンドを入力して、すべての LIF のステータスを「 up 」に変更し、ノード上のトラフィックを LIF が受け入れて送信できるようにします。</block>
  <block id="e2f0d11e53277157c5556e3648b425c0" category="paragraph">「 network interface modify -home-node &lt;port_name&gt; -home-port &lt;port_name&gt; -home-port &lt;node4 &gt; -lif data -statusadmin up 」の形式で指定します</block>
  <block id="970d4e34765aa0832a9175b5e001ed85" category="list-text">次のコマンドを入力し、出力を調べて、 LIF が正しいポートに移動されていること、およびどちらかのノードで次のコマンドを入力して LIF のステータスが「 up 」になっていることを確認します。</block>
  <block id="8c094e66fbad29785444d71fd6c0dcac" category="paragraph">'network interface show -home-node &lt;node4 &gt; -role data</block>
  <block id="9b18a03ff7c916731423d488104e8994" category="list-text">LIF が 1 つでも停止している場合は、次のコマンドを LIF ごとに 1 回入力して、 LIF の管理ステータスを up に設定します。</block>
  <block id="ebb0dbe9b70bf46780fd67ec02dcb63a" category="paragraph">「 network interface modify -vserver &lt;vserver_name&gt; -lif &lt;lif_name&gt; -status-admin up 」の形式で指定します</block>
  <block id="b0fb437b1b12d53611752705f75b4488" category="summary">ノード 3 のインストールを確認し、 node2 から node3 にアグリゲートを再配置する前に、 NAS データ LIF を移動する必要があります。</block>
  <block id="f3fe3982bfd6155c0411e1975be731c8" category="paragraph">ノード 3 のインストールを確認し、 node2 から node3 にアグリゲートを再配置する前に、 node2 に現在あるノード 2 に属する NAS データ LIF を node2 から node3 に移動する必要があります。また、ノード 3 に SAN LIF が存在することも確認する必要があります。</block>
  <block id="086b8cee848b6ff9a25adc1f6ed791c8" category="paragraph">これらのチェックの実行後、 node1 で所有されているルート以外のアグリゲートと NAS データ LIF が新しいコントローラ node3 に再配置されます。リソースの再配置が完了すると、システムは一時停止します。</block>
  <block id="ad7a81d24d4defe671e7bcfbac5dce2c" category="list-text">ルート以外のアグリゲートと NAS データ LIF がノード 3 に正常に再配置されたことを確認します。</block>
  <block id="efd16d4be5b2e2f326b572d6729c7b2c" category="paragraph">いずれかのアグリゲートに再配置が失敗した場合、または拒否された場合は、アグリゲートを手動で再配置するか、必要に応じて拒否またはデスティネーションのチェックを無視する必要があります。を参照してください <block ref="f9a42009c629603217595f3693c67911" category="inline-link-macro-rx"></block> を参照してください。</block>
  <block id="d8c338ec7a5289c51f0e3bb79890e813" category="list-text">次の手順を実行して、ノード 3 の正しいポートに SAN LIF があることを確認します。</block>
  <block id="1d80da3c4e116b5ab208f9a0645788c1" category="paragraph">network interface show -data-protocol iscsi|fcp-home-node &lt;node3 &gt;`</block>
  <block id="c54266e61fa0c81baa92579805dc7963" category="list-text">ノード 3 に、ノード 1 に存在しないポート上にある SAN LIF または SAN LIF のグループがある場合、または別のポートにマッピングする必要がある場合は、次の手順を実行して、ノード 3 の該当するポートにそれらの SAN LIF またはグループを移動します。</block>
  <block id="2fbcca46574c079f4fb5aa457abc282e" category="list-text">LIF のステータスを down に設定します。</block>
  <block id="8257e4bb3f26fa12d44dc5d212e8d86e" category="paragraph">「 network interface modify -vserver &lt;vserver_name&gt; -lif &lt;LIF_NAME&gt; -status-admin down 」という形式で指定します</block>
  <block id="88b5416dcfc37572857d79e1fc361d66" category="paragraph">`portset remove -vserver &lt;vserver_name&gt; -portset &lt;portset_name&gt; -port-name &lt;port_name&gt; の形式で指定します</block>
  <block id="fd8145a34775436c1a5fe969965d449f" category="list-text">1 つの LIF を移動します。</block>
  <block id="4cfef2e0c0a444f2377573428305479e" category="paragraph">「 network interface modify -vserver &lt;vserver_name&gt; -lif &lt;lif_name&gt; -home-port &lt;new_home_port&gt;` 」の形式で指定します</block>
  <block id="30f710fc2b8d913378fc91684f0863fd" category="list-text">存在しない、または間違ったポート上のすべての LIF を新しいポートに移動します。</block>
  <block id="e6bab71051b8b426353c26c5eece5fda" category="paragraph">`portset add -vserver &lt;vserver_name&gt; -portset &lt;portset_name&gt; -port-name &lt;port_name&gt; の形式で指定します</block>
  <block id="3920c87ab45883a20b7f4aff2eb8f6f9" category="list-text">ノードでトラフィックを許可して送信できるように、すべての LIF のステータスを「 up 」に変更します。</block>
  <block id="72d3a397738e225f08e034078d433645" category="paragraph">「 network interface modify -home-node &lt;port_name&gt; -home-port &lt;port_name&gt; -home-port data -status-admin up 」を参照してください</block>
  <block id="b5fdeb64f12933be51c64181c2145b75" category="list-text">いずれかのノードで次のコマンドを入力し、その出力を調べて、 LIF が正しいポートに移動されていること、および LIF のステータスが「 up 」になっていることを確認します。</block>
  <block id="fb56fd816b904059bf738c97552e7950" category="paragraph">network interface show -home-node &lt;node3 &gt; -role data</block>
  <block id="f70b18bc9d56cbb566a64828fa672913" category="list-text">LIF が 1 つでも停止している場合は、次のコマンドを LIF ごとに 1 回入力して、 LIF の管理ステータスを「 up 」に設定します。</block>
  <block id="3e03a1050e8880cab61b7eac81bb41e6" category="summary">node3 がクォーラムにあり、 node2 と通信できることを確認したら、ノード 3 にある node1 の VLAN 、インターフェイスグループ、およびブロードキャストドメインを再作成する必要があります。</block>
  <block id="a9ed443016f95a1edf1f75d02a400ef4" category="doc">ノード 3 に、 VLAN 、インターフェイスグループ、およびブロードキャストドメインを再作成します</block>
  <block id="38f0774e23dfcfc33d0c71a95a9ec915" category="paragraph">node3 がクォーラムにあり、 node2 と通信できることを確認したら、ノード 3 にある node1 の VLAN 、インターフェイスグループ、およびブロードキャストドメインを再作成する必要があります。node3 のポートは、新しく作成したブロードキャストドメインにも追加する必要があります。</block>
  <block id="75500a9c555091ca84661935a854fadd" category="list-text">に記録された node1 情報を使用して、 node3 に VLAN を再作成します <block ref="9fd31f02e13c9f75db388cfb74e0acc1" category="inline-link-macro-rx"></block> セクション。</block>
  <block id="9ce19aa6c138af6345ba1f5dfeeff679" category="paragraph">「 network port vlan create -node &lt;node_name &gt; -vlan &lt;vlan-names&gt; 」のように指定します</block>
  <block id="f45acda1c521e41b3ce8a3679b6215ab" category="list-text">に記録されている node1 の情報を使用して、ノード 3 にインターフェイスグループを再作成します <block ref="9fd31f02e13c9f75db388cfb74e0acc1" category="inline-link-macro-rx"></block> セクション。</block>
  <block id="30f6694fbccf53f98ec474104aa8001d" category="paragraph">network port ifgrp create -node &lt;node_name &gt; -ifgrp &lt;port_ifgrp_names&gt; -distr-func</block>
  <block id="f66463ad689a1b6a786f9d835f140a4a" category="list-text">に記録されている node1 の情報を使用して、ノード 3 にブロードキャストドメインを再作成します <block ref="9fd31f02e13c9f75db388cfb74e0acc1" category="inline-link-macro-rx"></block> セクション。</block>
  <block id="0693f087526b2a5629e587e3d4eaabe6" category="paragraph">「 network port broadcast-domain create -ipspace Default -broadcast-domain &lt;broadcast_domain_names&gt; -mtu &lt;mtu_size&gt; -ports &lt;node_name ： port_name 、 node_name ： port_name ： port_name 」</block>
  <block id="64c5cc9b78a53e4aac350b1dbb4401d0" category="list-text">node3 のポートを、新しく作成したブロードキャストドメインに追加します。</block>
  <block id="66443904f877ffe72fecceb90e2f3887" category="paragraph">「 network port broadcast-domain add-ports -broadcast-domain &lt;broadcast_domain_names&gt; -ports &lt;node_name ： port_name 、 node_name ： port_name ： port_name 」</block>
  <block id="e76c8362140cc7ad8308b1fc046a1979" category="summary">node1 の物理ポートが、 node3 の物理ポートに正しくマッピングされていることを確認します</block>
  <block id="9bced622fe4463826e54e9d72ffb3105" category="doc">ポートを node1 から node3 にマッピングします</block>
  <block id="35fa788a2c1b033fc9d672031d207c8f" category="paragraph">node1 の物理ポートが node3 の物理ポートに正しくマッピングされていることを確認する必要があります。これにより、 node3 はクラスタ内の他のノードおよびアップグレード後にネットワークと通信できるようになります。</block>
  <block id="44471d5aafdc0c157c500d2d6a23a19e" category="paragraph">ポート設定は、ノードのモデルによって異なる場合があります。元のノードのポートと LIF の設定を、新しいノードの計画的な使用と設定に対応させる必要があります。これは、新しいノードがブート時に同じ設定を再生するためです。つまり、ノード 3 をブートすると、 ONTAP は、ノード 1 で使用されていたポートで LIF をホストしようとします。</block>
  <block id="0e17cd2a380c7aee928d55a629e1247a" category="paragraph">そのため、 node1 の物理ポートが node3 の物理ポートに直接マッピングされていない場合は、ブート後にクラスタ、管理、およびネットワーク接続をリストアするためにソフトウェア設定の変更が必要になります。また、ノード 1 のクラスタポートがノード 3 のクラスタポートに直接マッピングされていない場合、ノード 3 は、正しい物理ポートでクラスタ LIF をホストするソフトウェア設定を変更するまで、リブート時にクォーラムに自動的に再参加しないことがあります。</block>
  <block id="8ecfd3d07d0b566573970e006b263355" category="list-text">node1 、ポート、ブロードキャストドメイン、および IPspace のすべての node1 ケーブル接続情報を表に記録します。</block>
  <block id="95416f2c916dabe21f738406546ebc53" category="cell">LIF</block>
  <block id="7c58d4376f3e9edee5dddea0cb60174b" category="cell">Node1 ポート</block>
  <block id="c9545236c254e502f1fd332fd827bb30" category="cell">ノード 1 の IPspace</block>
  <block id="d097d9fa6c24ef764e863334502d7e44" category="cell">ノード 1 のブロードキャストドメインです</block>
  <block id="a3af08ec17eafe7fd9b8af3ac85cd551" category="cell">Node3 ポート</block>
  <block id="d7dbdebdabf907055e9f9b1ad790cd2f" category="cell">ノード 3 の IPspace</block>
  <block id="da3249c2580cf367f00b7be2fbbbe3fa" category="cell">ノード 3 のブロードキャストドメイン</block>
  <block id="ad6dcf374ab3aa82295dfd9f05c5321a" category="cell">クラスタ 1</block>
  <block id="1254eb728cd3888ab12378466d7acf61" category="cell">クラスタ 2</block>
  <block id="ab9ecc9d421fd8c94654e9f43686ba1a" category="cell">クラスタ 3</block>
  <block id="bf1b6535047986fddc090d91db2256c5" category="cell">クラスタ 4</block>
  <block id="3c8ea2e650fa77bf321eab55f3572403" category="cell">ノード管理</block>
  <block id="1eb5ae63609e68a11106494d272615bf" category="cell">クラスタ管理</block>
  <block id="1fffe5dec3e7cf3665b3f3d7f9f46a13" category="cell">データ 1</block>
  <block id="1ae886c83bb2b57062f09c9ab93869df" category="cell">データ 2.</block>
  <block id="49995b31307a5ab11f30d0cfc964294f" category="cell">データ 3</block>
  <block id="4006ebc8b1e151da2d8e1860f1657adc" category="cell">データ 4.</block>
  <block id="62a0282d39568be094470486eaf70c4f" category="cell">SAN</block>
  <block id="9e825d496d7663757ece1259e7a96304" category="cell">クラスタ間ポート</block>
  <block id="a954ed2f319ed904377b750e964bbd3b" category="list-text">ノード 3 、ポート、ブロードキャストドメイン、および IPspace のすべてのケーブル接続情報を表に記録します。</block>
  <block id="15395d832f02a01663100fa8cdcdbe72" category="list-text">セットアップが 2 ノードスイッチレスクラスタかどうかを確認するには、次の手順を実行します。</block>
  <block id="b5c6fde8816eb583a49b6c0314b82928" category="list-text">権限レベルを advanced に設定します。</block>
  <block id="07d5ca0790a321e18a18d766e2a4dc46" category="paragraph">'cluster::&gt; set -privilege advanced</block>
  <block id="02447279c68e4d1b8321c16d451e2f25" category="list-text">セットアップが 2 ノードスイッチレスクラスタかどうかを確認します。</block>
  <block id="1754e82bbc644d474d95cae66bc6dae3" category="paragraph">'cluster::&gt; network options switchless-cluster show</block>
  <block id="5fc571537471df3ed57f747d12b1f82f" category="paragraph">このコマンド出力の値は、システムの物理状態と一致する必要があります。</block>
  <block id="0a33c5a38d244a756240abb6427cac6d" category="list-text">管理者権限レベルに戻ります。</block>
  <block id="ca9ef37ccec1afc84a708333d3584ceb" category="list-text">ノード 3 をクォーラムに配置するには、次の手順を実行します</block>
  <block id="1d15788f6c2c92d9fd9ae80b762e2b98" category="list-text">ノード 3 をブートします。を参照してください <block ref="b27daeccf5fbd8a2e88a3636ee615b74" category="inline-link-macro-rx"></block> ノードをブートします（まだブートしていない場合）。</block>
  <block id="e250afe1d6acb2cedbe5164cfe15e160" category="list-text">新しいクラスタポートが Cluster ブロードキャストドメインにあることを確認します。</block>
  <block id="45bdedd97f645f88d9bfa1f19569d6fb" category="paragraph">「 network port show -node &lt;node&gt; -port &lt;port&gt; -fields broadcast-domain 」</block>
  <block id="d5a848f4f51e9593f468d025887aa790" category="paragraph">次の例は、ポート「 e0a 」が node3 のクラスタドメインにあることを示しています。</block>
  <block id="3b95836e337e89d8b015f844a70e27c5" category="list-text">クラスタポートが Cluster broadcast-domain にない場合は、次のコマンドを使用して追加します。</block>
  <block id="014374cd732266cf6e691494322909cd" category="paragraph">'broadcast-domain add-ports -ipspace Cluster-broadcast-domain Cluster -ports &lt;node:port&gt;`</block>
  <block id="0d5ac86deac51d611e624857bd351157" category="paragraph">次の例は、ノード 3 にクラスタポート「 e1b 」を追加します。</block>
  <block id="f82bb6762cd68512cb29bd2a7f8ae49b" category="list-text">クラスタブロードキャストドメインに適切なポートを追加します。</block>
  <block id="a45073b4c9b4451293184e2e132d0416" category="paragraph">network port modify -node -port -ipspace Cluster -mtu 9000`</block>
  <block id="6a5060000cc7ede4725a843f1b406b97" category="paragraph">次の例では、 node4 にクラスタポート「 e1b 」を追加します。</block>
  <block id="79498ed93931f11551ee000416c681ad" category="list-text">LIF を 1 つずつ新しいポートに移行します。</block>
  <block id="92c809f55a598a0ca7fb03d213160bb8" category="paragraph">` network interface migrate -vserver Cluster -lif &lt;lif_name&gt; -source-node &lt;node3 &gt; -destination-node &lt;node3 &gt; -destination-port &lt;port_name&gt; 」の形式で指定します</block>
  <block id="19822d45a3cb02a6f584bb24bcaa5b08" category="list-text">クラスタ LIF のホームポートを変更します。</block>
  <block id="1b6d049a657d9e689d309f1a122a3da4" category="paragraph">「 network interface modify -vserver Cluster -lif &lt;lif_name&gt; – home-port &lt;port_name&gt; 」という形式になります</block>
  <block id="85530f2f9f1c84469942b904bd0afd80" category="list-text">クラスタブロードキャストドメインから古いポートを削除します。</block>
  <block id="02a331c3e689130522f148a92e794698" category="paragraph">次のコマンドは、ノード 3 のポート「 e0d 」を削除します。</block>
  <block id="453a5afbc81eb04f9be87066e772f47c" category="paragraph">「 network port broadcast-domain remove-ports -ipspace Cluster -broadcast-domain Cluster ‑ ports node3 ： e0d</block>
  <block id="73a476e3954651a03a873f15c78fb2cf" category="list-text">ノード 3 が再びクォーラムに参加したことを確認します。</block>
  <block id="95cab25438aec857407b017a973e5c22" category="list-text">[[auto_map_3_step5] クラスタ LIF とノード管理 / クラスタ管理 LIF をホストするブロードキャストドメインを調整します。各ブロードキャストドメインに正しいポートが含まれていることを確認してください。ポートをホストしているブロードキャストドメイン間や LIF のホームになっているブロードキャストドメイン間で移動することはできないため、 LIF を移行して変更する必要がある場合があります。</block>
  <block id="4076f0d6df989532aff6382687e9888e" category="list-text">LIF のホームポートを表示します。</block>
  <block id="b2dc601f3d617280e54bd9153ba2aa9a" category="paragraph">network interface show -fields home-node 、 home-port</block>
  <block id="151015f4cf01b0b6b0ba1839b9b1bd6a" category="list-text">このポートを含むブロードキャストドメインを表示します。</block>
  <block id="14d0632dc405425758df978f31e10665" category="paragraph">「 network port broadcast-domain show -port &lt;node_name ： port_name&gt; 」の形式で指定します</block>
  <block id="c65a432daff80bb22606190592ba03a1" category="list-text">ブロードキャストドメインのポートを追加または削除します。</block>
  <block id="8f822f2d07295ece2b3ed7d8bc0255ff" category="paragraph">「 network port broadcast-domain add-ports 」と入力します</block>
  <block id="f6f7703e9fef5152575d8f4d7f724839" category="list-text">LIF のホームポートを変更します。</block>
  <block id="697b823c909ba4b90b7cc8afe77b46d3" category="paragraph">「 network interface modify -vserver vserver -lif &lt;lif_name&gt; – home-port &lt;port_name&gt; 」という形式になります</block>
  <block id="721f2cf56861c6620ae10af678a11201" category="list-text">に示すコマンドを使用して、クラスタ間 LIF に使用されるネットワークポートのブロードキャストドメインメンバーシップを調整します <block ref="fea3b13a0d2ee88cc51adec05dc6a35c" category="inline-xref-macro-rx"></block>。</block>
  <block id="ef347e13fc7ddb5d862f419e62a1814c" category="list-text">必要に応じて、のコマンドと同じコマンドを使用して、他のブロードキャストドメインを調整してデータ LIF を移行します <block ref="fea3b13a0d2ee88cc51adec05dc6a35c" category="inline-xref-macro-rx"></block>。</block>
  <block id="ebde3c7ee6d00f9081b9e50638aee5c0" category="list-text">ノード 1 にノード 3 に存在しないポートがある場合は、次の手順に従って削除します。</block>
  <block id="f2797e57746a2e92ae2db208aa4ca684" category="list-text">どちらかのノードで advanced 権限レベルにアクセスします。</block>
  <block id="848d81ec28722b1c7b9863d586ec791b" category="list-text">ポートを削除します。</block>
  <block id="5175d0f510ad3fc3bfd43ed48a78795e" category="paragraph">'network port delete -node &lt;node_name &gt; -port &lt;port_name&gt; ’</block>
  <block id="e292843f0f8aa27c8a0485033bbc83a8" category="list-text">すべての LIF フェイルオーバーグループを調整します。</block>
  <block id="dbd4d3f45762468dfc2874dcea08634e" category="paragraph">'network interface modify -failover-group &lt;failover_group&gt; -failover-policy &lt;failover_policy&gt;</block>
  <block id="7a0381687cdc9de622bbd1da886f7a53" category="paragraph">次のコマンドは、フェイルオーバーポリシーを「 broadcast-domain-wide 」に設定し、ノード 3 の LIF 「 data1 」のフェイルオーバーターゲットとして、フェイルオーバーグループ「 fg1 」のポートを使用します。</block>
  <block id="cb78b2e3deaeee9f6221f0adf18ae798" category="paragraph">network interface modify -vserver node3 -lif data1 failover-policy broadcast-domain-domainwide -failover-group fg1</block>
  <block id="b5c60a344329e79b3bc3ea4e338dec46" category="list-text">ノード 3 で変更内容を確認します。</block>
  <block id="ba52c8419c9419dca65682ae8a86c813" category="summary">ノードをアップグレードする準備を行う必要があります。</block>
  <block id="28ec7b443f6b601682eab0dfce57d80c" category="list-text">network interface show -curr-node &lt;nodename&gt; -role cluster 、 intercluster 、 node-mgmt 、 clustermgmt 、 data</block>
  <block id="b5f4513909cb412a69e57db23895130f" category="list-text">network port show -node &lt;nodename&gt; -type physical です</block>
  <block id="7e487668bc88674f5d71e47878b4625d" category="list-text">network port vlan show の略</block>
  <block id="14f16046a1210e91f4f20f76ac09d53a" category="list-text">system node show -instance -node &lt;nodename&gt;</block>
  <block id="3b2a92c3256f8b90003a7b94b0dad7ff" category="list-text">storage aggregate show -node &lt;nodename&gt;</block>
  <block id="85c304b273ca65bcc95857b6ca27151b" category="list-text">network interface failover-groups show</block>
  <block id="e6d3edc8d8c0e062d80c969f5da151ed" category="admonition">オンボードキーマネージャを使用した NetApp Volume Encryption を使用している場合は、キー管理ツールのパスフレーズを準備しておき、あとで手順でキー管理ツールの再同期を完了します。</block>
  <block id="db8f22918d14ae383a626495295e95e8" category="summary">ノード 4 がクォーラムにあり、ノード 3 と通信できることを確認したら、ノード 2 の VLAN 、インターフェイスグループ、およびブロードキャストドメインをノード 4 に再作成する必要があります。</block>
  <block id="ca6c97b959d192578a21a39e5daa0dcb" category="doc">ノード 4 で VLAN 、インターフェイスグループ、およびブロードキャストドメインを再作成します</block>
  <block id="06531598d2f1f8cb4d0e1748bdd53cb1" category="paragraph">ノード 4 がクォーラムにあり、ノード 3 と通信できることを確認したら、ノード 2 の VLAN 、インターフェイスグループ、およびブロードキャストドメインをノード 4 に再作成する必要があります。node3 のポートは、新しく作成したブロードキャストドメインにも追加する必要があります。</block>
  <block id="f510fd869131d6e75b451f4d5143753d" category="list-text">で記録した node2 の情報を使用して、 node4 に VLAN を再作成します <block ref="f7f70c2c98be066b2a9d668ac7d63467" category="inline-link-macro-rx"></block> セクション。</block>
  <block id="f94cc72e2545c321248727577ec6f136" category="paragraph">「 network port vlan create -node &lt;node4 &gt; -vlan &lt;vlan-names&gt; 」のように指定します</block>
  <block id="90f14f8b8c696d6b840bbeaafeef318b" category="list-text">で記録した node2 の情報を使用して、 node4 にインターフェイスグループを再作成します <block ref="f7f70c2c98be066b2a9d668ac7d63467" category="inline-link-macro-rx"></block> セクション。</block>
  <block id="801e3eaaad9c1e7e56360a0d5a4eba35" category="paragraph">「 network port ifgrp create -node &lt;node4 &gt; -ifgrp &lt;port_ifgrp_names&gt; -distr-func 」のように指定します</block>
  <block id="080ec370c2d913fcb5020dced626cc50" category="list-text">で記録した node2 の情報を使用して、 node4 にブロードキャストドメインを再作成します <block ref="f7f70c2c98be066b2a9d668ac7d63467" category="inline-link-macro-rx"></block> セクション。</block>
  <block id="f10d0345f9a30980e7c9be821215c028" category="list-text">新たに作成したブロードキャストドメインにノード 4 のポートを追加します。</block>
  <block id="bd7c8ec5f0f0b7d2149b61fcaa1ebe7d" category="summary">NetApp Volume Encryption （ NVE ）でアップグレードするシステムのボリュームを暗号化するには、暗号化設定を新しいノードに同期する必要があります。</block>
  <block id="28ee1efc4e85d8c498824b6d179e810b" category="list-text">オンボードキーマネージャの暗号化設定を同期するには、クラスタプロンプトで次のコマンドを実行します。</block>
  <block id="261226346341bab3c9b8e706c0ad80c1" category="cell">この ONTAP バージョンの場合 ...</block>
  <block id="6307f29fb047a8637ca6f025a1dec02d" category="cell">ONTAP 9.6 または 9.7</block>
  <block id="1fd11ad9c6fc9e17e9729cd939a2b47b" category="cell">セキュリティキー管理ツールのオンボード同期</block>
  <block id="0fcf2ee62acd9eae83b609a0e7ecaa72" category="cell">ONTAP 9.5</block>
  <block id="732cd8784d263d714e9f6a4a76be6c6c" category="cell">security key-manager setup -node &lt;node_name &gt;</block>
  <block id="3554bd6dca965e0e8bcb314a54ef655c" category="list-text">オンボードキーマネージャのクラスタ全体のパスフレーズを入力します。</block>
  <block id="04e69ed9c039a8d1bc156ec97e69f0d2" category="inline-link-macro">node2 のポートを node4 にマッピングします</block>
  <block id="77a9ad04a0d2efb7c2993685c68b4955" category="admonition">ノード 4 にオンボードの FC ポート、オンボードの UTA / UTA2 ポート、または UTA / UTA2 カードがなく、ストレージディスクを搭載したシステムをアップグレードする場合は、に進みます <block ref="fface1ac702bde6d72ceb6e55eb8b2b6" category="inline-link-macro-rx"></block> セクション。ただし、 V シリーズシステムまたは FlexArray 仮想化ソフトウェアがインストールされていて、ストレージアレイに接続されているノードがあり、オンボードの FC ポート、オンボード UTA / UTA2 ポート、または UTA / UTA2 カードがノード 4 に搭載されていない場合は、 section_Install and boot node4 _ に戻って再開する必要があります <block ref="1a99f6ce933cd745b2b02e54c9272506" category="inline-link-macro-rx"></block>。ノード 4 に十分なラックスペースがあることを確認してください。node4 が node2 とは別のシャーシにある場合は、 node3 と同じ場所に node4 を配置できます。node2 と node4 が同じシャーシにある場合は、 node4 が適切なラックの場所にすでに存在しているとします。</block>
  <block id="8c212e8d716365fe78b3dc05e538816b" category="list-text">このセクションをスキップして、に進みます <block ref="fface1ac702bde6d72ceb6e55eb8b2b6" category="inline-link-macro-rx"></block> ノード 4 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがない場合</block>
  <block id="8791ac28601fdc37abff08e6c499f508" category="list-text">に進みます <block ref="15e1611f6cc2b64b7163cc152446c8c0" category="inline-link-macro-rx"></block> ノード 4 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがある場合</block>
  <block id="d99c8ba9d658d3212fddc2b03d46d17d" category="cell">セクションに移動します <block ref="fface1ac702bde6d72ceb6e55eb8b2b6" category="inline-link-macro-rx"></block>。</block>
  <block id="9cf4d14086ce4d21dc41a4190205b5f9" category="paragraph">A800 にアップグレードする場合は、に進みます <block ref="1917bbf2d6d289423b4a495f5ba4fcca" category="inline-xref-macro-rx"></block>。</block>
  <block id="2df4aaf5859b7013b08c777b75de1736" category="list-text">[[auto_check_4_step15]] ノード 4 で、ブートメニューに移動し、 22/7 を使用して、非表示オプション「 boot_after_controller_replacement 」を選択します。プロンプトで node2 と入力し、次の例のように node2 のディスクを node4 に再割り当てします。</block>
  <block id="ad5f4bb6f9161068112afc76d5e212f4" category="list-text">システムが再起動ループに入って「ディスクが見つかりません」というメッセージが表示された場合は、ポートがターゲットモードにリセットされ、ディスクを認識できないためです。に進みます <block ref="d55e3a0f9758a99c055e4411cec66cde" category="inline-xref-macro-rx"></block> から <block ref="1abe7aef97cf6f4670adea7171f10403" category="inline-xref-macro-rx"></block> これを解決します。</block>
  <block id="c96220c50aab2a4ab570c1cab76c079a" category="paragraph">ステージ 5 で、 node4 をインストールしてブートし、 node2 のクラスタポートとノード管理ポートを node4 にマッピングし、 node4 のインストールを確認します。node2 によって所有されている NAS データ LIF を node3 から node4 に移動し、 node2 のアグリゲートを node3 から node4 に再配置します。</block>
  <block id="fface1ac702bde6d72ceb6e55eb8b2b6" category="list-text"><block ref="fface1ac702bde6d72ceb6e55eb8b2b6" category="inline-link-macro-rx"></block></block>
  <block id="38c5d8cbf396fa8049b864a52905989e" category="inline-link-macro">ノードのネットワークポートセットが異なる場合は、クォーラムを追加します</block>
  <block id="f0b0c29d9be806c3fb8f84d804659749" category="list-text"><block ref="f0b0c29d9be806c3fb8f84d804659749" category="inline-link-macro-rx"></block></block>
  <block id="ce760f3f52d1d023d6d316ce6636d981" category="summary">ノードペアをアップグレードする必要があります。</block>
  <block id="67e9019cd579cec7a9dc84892184061b" category="summary">MetroCluster 構成のスイッチオーバー、修復、スイッチバックの処理を検証します。</block>
  <block id="ac84c36cb19187c1b40f86ec36101a01" category="summary">ストレージ暗号化を設定し、以前のノードレベルの認証キーを置き換えるためのクラスタ全体の認証キーを確立します</block>
  <block id="9645dac7a86b8b52dafb1d2bce8d2cbc" category="paragraph">ONTAP 9.5 から 9.7 では、 Key Management Interoperability Protocol （ KMIP ）サーバを使用して認証キーを管理できます。</block>
  <block id="474e079e3a7a9eaeb2bb65154064db9e" category="summary">ONTAP 9.5 を実行しているコントローラペアを ONTAP 9.7 にアップグレードするには、プラットフォームと、元のコントローラと交換用コントローラの両方の構成が必要です。</block>
  <block id="40f491be1da04740c193fe7b8e4df207" category="paragraph">アグリゲートの再配置（ ARL ）を使用して ONTAP 9.5 を実行するコントローラのペアを ONTAP 9.7 にアップグレードできるかどうかは、プラットフォームと、元のコントローラと交換用コントローラの両方の構成によって異なります。</block>
  <block id="58753da369714fb951c22c96476b373b" category="paragraph">この ARL 手順 for ONTAP 9.5 を使用して ONTAP 9.7 にノードのペアをアップグレードする場合は、 ARL が元のコントローラと交換用コントローラで実行可能であることを確認する必要があります。</block>
  <block id="92d7a6cff22927442a55701963967daa" category="paragraph">元のシステムでサポートされるすべての定義済みアグリゲートのサイズとディスク数を確認する必要があります。次に、サポートされるアグリゲートサイズとディスク数を、新しいシステムでサポートされるアグリゲートサイズとディスク数と比較する必要があります。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> この情報がある Hardware Universe にリンクするには、次の手順を実行します。新しいシステムでサポートされるアグリゲートサイズとディスク数は、元のシステムでサポートされるアグリゲートサイズとディスク数以上であることが必要です。</block>
  <block id="49b8e12e4922dd11255eee6c82462eae" category="paragraph">元のコントローラを交換したときに、新しいノードが既存のノードとクラスタの一部になることができるかどうかは、クラスタ混在ルールで検証する必要があります。クラスタ混在ルールの詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> Hardware Universe にリンクするには、次の手順を実行します。</block>
  <block id="e20e9ea1f6702a02cf275f42f38fd063" category="admonition">AFF システムのアップグレードを実行する前に、 ONTAP をリリースバージョン 9.5P1 以降にアップグレードする必要があります。これらのリリースレベルは、アップグレードを成功させるために必要です。</block>
  <block id="e13ef1734f457a6634d02e817f76fb23" category="paragraph">ARL を使用したコントローラのアップグレードは、 SnapLock Enterprise ボリュームおよび SnapLock Compliance ボリュームが設定されたシステムでサポートされます。</block>
  <block id="bab80fb4460dcd700341b404b35095c5" category="summary">アップグレードの実行時に別のポイントでアグリゲートの再配置が失敗することがあります。</block>
  <block id="7e4c3807e46f1f800d0e720965a7fe3a" category="paragraph">「 storage aggregate relocation start 」、「 override-vetoes 」、および「 override-vetoes destination-checks 」オプションの詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ONTAP 9 コマンド：マニュアルページリファレンスにリンクするには、次の手順を実行します。</block>
  <block id="d3b61d7be5bcbe73888c2e4f54185ed6" category="summary">MetroCluster 構成の健全性をチェックして、正常に動作することを確認します。</block>
  <block id="a7dda6b844f93c6f7aaba278089fae33" category="summary">ノード 3 をラックに設置し、ノード 1 の接続をノード 3 に転送し、ノード 3 をブートして、 ONTAP をインストールします。</block>
  <block id="38cf27caef6776abd0225a54be1e9972" category="list-text">[[auto9597_istall3_step6] 次のいずれかの操作を選択して、ネットブート接続を設定します。</block>
  <block id="1e1bab3dc1010e23c8cb467fc3006ae4" category="list-text">[[auto9597_istall3_step29]] FlexArray 仮想化ソフトウェアがストレージアレイに接続されている MetroCluster 構成、 V シリーズシステム、およびシステムの場合は、に進みます <block ref="197bcdf5306898ec17e6022b26568f43" category="inline-link-macro-rx"></block>。</block>
  <block id="2dc628959227b30796539097566ced4e" category="list-text">[[Step13]] 両方のノードで次のコマンドを使用して、 SP を設定します。</block>
  <block id="cffe1635d7e645065b5457e425a54cdd" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> SP および _SP ONTAP 9 コマンドの詳細については ' システム管理リファレンスにリンクするには ' マニュアルページリファレンスを参照してください system の service-processor network modify コマンドの詳細については ' を参照してください</block>
  <block id="17acc08dd9b9cc179eb2c71ee42f1438" category="paragraph">この情報では、元のノードの名前は「 node1 」と「 node2 」になり、新しいノードの名前は「 node3 」と「 node4 」になります。説明されている手順では、「 node1 」は「 node3 」に置き換えられ、「 node2 」は「 node4 」に置き換えられます。</block>
  <block id="87955a4e69dc9556a2a78cd5f057d2f3" category="paragraph">「 node1 」、「 node2 」、「 node3 」、および「 node4 」は、元のノードと新しいノードを区別するためだけに使用されます。手順を使用するときは、元のノードと新しいノードの実際の名前を置き換える必要があります。ただし実際には、ノードの名前は変更されません。「 node3 」の名前は「 node1 」と同じで、「 node4 」の名前はコントローラハードウェアのアップグレード後に「 node2 」と同じです。</block>
  <block id="9ee11f9a38856219378f2fad2bbd65c5" category="list-text">この手順は複雑で、 ONTAP の高度な管理スキルがあることを前提としています。また、内容を読んで理解しておく必要があります <block ref="4839d43871fe29773e86f5cefcab0e32" category="inline-link-macro-rx"></block> および <block ref="57e14e08755134bb6fef9ad899bb58ee" category="inline-link-macro-rx"></block> アップグレードを開始する前に、</block>
  <block id="48d957729e77cbd1ec1cf772f951270a" category="list-text">この手順は、交換用コントローラハードウェアが新しく購入され、使用されていないことを前提としています。使用済みのコントローラを「 wipeconfig 」コマンドで準備するために必要な手順は、この手順には含まれていません。交換用コントローラハードウェアを以前に使用していた場合は、テクニカルサポートに問い合わせる必要があります。特に、コントローラが Data ONTAP 7-Mode を実行していた場合は、テクニカルサポートにお問い合わせください。</block>
  <block id="e5e0e33438e3e93b68faec10a86b2f1c" category="list-text">この手順を使用して、ノードが 3 つ以上あるクラスタのコントローラハードウェアをアップグレードできますが、クラスタ内の HA ペアごとに手順を個別に実行する必要があります。</block>
  <block id="8aa258d7d2576cff89b65debb971736d" category="list-text">この FlexArray システム、 V シリーズシステム、 AFF システム、および手順環境 FAS 仮想化ソフトウェアを搭載したシステムです。必要なライセンスがインストールされていれば、 ONTAP 9.5 以降にリリースされた FAS システムをストレージアレイに接続できます。既存の V シリーズシステムは、 ONTAP 9.5 でサポートされます。ストレージアレイと V シリーズのモデルの詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> Hardware Universe にリンクして、 V シリーズサポートマトリックスにアクセスしてください。</block>
  <block id="01cc348d995c86d2845e5e78e5e9c63a" category="list-text">ONTAP 9.6 以降では、この手順環境システムで 4 ノード MetroCluster 構成以上を実行しています。MetroCluster 構成サイトは物理的に異なる場所に設置できるため、 HA ペアの場合は各 MetroCluster サイトでコントローラの自動アップグレードを個別に実行する必要があります。</block>
  <block id="1a446ed6f6f5d451622f381088c9d634" category="summary">ステージ 6 で、新しいノードが正しくセットアップされていることを確認します。</block>
  <block id="aeeef62c5133714906c67f69ce2b1ace" category="paragraph">ステージ 3 で、ノード 3 をインストールしてブートし、クラスタポートとノード管理ポートを node1 から node3 にマッピングし、ノード 3 のインストールを確認します。SAN 以外のデータ LIF と、ノード 1 に属するルート以外のアグリゲートは、ノード 2 からノード 3 に移動されます。</block>
  <block id="3b6c063a8efbc88c969c7838f0611434" category="list-text"><block ref="3b6c063a8efbc88c969c7838f0611434" category="inline-link-macro-rx"></block></block>
  <block id="2bef9a25a25f8408b93c008177e86cf5" category="inline-link-macro">ノードのネットワークポートのセットが異なる場合のクォーラムの追加</block>
  <block id="881027673002730ac21d11ed07a40569" category="list-text"><block ref="881027673002730ac21d11ed07a40569" category="inline-link-macro-rx"></block></block>
  <block id="307639a03c0baad18a78770a19967fb8" category="list-text"><block ref="307639a03c0baad18a78770a19967fb8" category="inline-link-macro-rx"></block></block>
  <block id="9fd31f02e13c9f75db388cfb74e0acc1" category="list-text"><block ref="9fd31f02e13c9f75db388cfb74e0acc1" category="inline-link-macro-rx"></block></block>
  <block id="f9a42009c629603217595f3693c67911" category="list-text"><block ref="f9a42009c629603217595f3693c67911" category="inline-link-macro-rx"></block></block>
  <block id="d96315657b83074fe065878add3854f9" category="summary">Config Advisor ツールを使用して、一般的な構成エラーがないかどうかを確認します。</block>
  <block id="59a8f1e3a6265ee89ea88dc90c416d7d" category="summary">ノード 4 が正しくインストールされていることを確認します。</block>
  <block id="cd1408e068b531b7382c4e61b1fb334a" category="paragraph">node4 のインストールとブートの完了後、正しくインストールされていること、クラスタの一部であること、および node3 と通信できることを確認する必要があります。</block>
  <block id="5606085c29237d873046f0814d8b70b0" category="list-text">次のコマンドを入力して、 node4 が node3 と同じクラスタに含まれていること、および正常であることを確認します。</block>
  <block id="7f1799dcf19180943a8e7e660bf6a3dd" category="list-text">処理のステータスを確認し、 node4 の設定情報が node2 と同じであることを確認します。</block>
  <block id="a10c88f3a400c8c2aa654ddd4a616518" category="paragraph">ノード 4 の設定が異なる場合は、あとで手順でシステムが停止する可能性があります。</block>
  <block id="838d8de52d85e0b64e9643b598ef2b7e" category="list-text">交換したコントローラが MetroCluster 構成に対して正しく設定されており、スイッチオーバーモードでないことを確認します。</block>
  <block id="c7bfe1826ae50dfa18e857462ed5be48" category="admonition">* 注意：この段階では、 MetroCluster 構成は正常な状態ではなく、エラーが発生していて解決できます。を参照してください <block ref="14c0e32a98a31f9fd4a16b635b2f7ebd" category="inline-link-macro-rx"></block>。</block>
  <block id="bb197bcd8b7816b74ae21bd6c2906919" category="summary">交換したコントローラまたは新しいコントローラの HA パートナーで Storage Encryption が使用されている場合は、新しいコントローラモジュールを設定する必要があります</block>
  <block id="166eaaeaf7115a8ef8bd93d89dc98893" category="summary">node2 を node4 に置き換える前に、 node2 によって所有されているルート以外のアグリゲートを node3 に再配置する必要があります。</block>
  <block id="5b64f041f55ca32411dcf1520bfc1cda" category="doc">ノード 1 が所有するルート以外のアグリゲートと NAS データ LIF をノード 2 に再配置します</block>
  <block id="d214189b511a4dddc29ca037a9c05cc4" category="paragraph">アップグレード手順の実行中、リモート LIF は SAN LUN へのトラフィックを処理します。アップグレード時にクラスタやサービスの健全性を維持するために、 SAN LIF を移動する必要はありません。ノード 3 をオンラインにしたあと、 LIF が正常に機能しており、適切なポートに配置されていることを確認する必要があります。</block>
  <block id="b003ff957beed57b873253f1e4cd0441" category="list-text">[[step5] - データ LIF をホストしているポートが新しいハードウェアに存在しない場合は、ブロードキャストドメインから削除します。</block>
  <block id="87766a1a73ec698f3b4753312d4d3b4f" category="paragraph">「 network interface modify -vserver &lt;vserver_name&gt; -lif &lt;lif_name&gt; -home-node &lt;nodename&gt; -status-admin up 」という形式で指定します</block>
  <block id="45560e4a070877091866d34d12016154" category="list-text">インターフェイスグループまたは VLAN が設定されている場合は、次の手順を実行します。</block>
  <block id="8e2087071d353c6f56da3d27b7a84dfc" category="list-text">インターフェイスグループから VLAN を削除します。</block>
  <block id="973a9f75fd7ee6700a6f9b372ce8f863" category="paragraph">「 network port vlan delete -node &lt;nodename&gt; -port &lt;ifgrp&gt; -vlan-id &lt;vlan_ID&gt; 」のように指定します</block>
  <block id="3f3edadf07afca334ee7f44554a2b78f" category="admonition">対処方法に従って、 vlan delete コマンドで表示されるエラーを解決します。</block>
  <block id="f4d11d72b637e9ed5ccd913b9007a29e" category="list-text">次のコマンドを入力し、その出力を調べて、ノードにインターフェイスグループが設定されているかどうかを確認します。</block>
  <block id="cc0c9adfd17d4df3e534cfcc4593c082" category="paragraph">「 network port ifgrp show -node &lt;nodename&gt; -ifgrp &lt;ifgrp_name&gt; -instance 」の形式で指定します</block>
  <block id="04e176453ee24840739bd91255d982c4" category="paragraph">次の例に示すように、ノードのインターフェイスグループ情報が表示されます。</block>
  <block id="e477f90becbcba9c7c9b92ec022ad754" category="list-text">ノードにインターフェイスグループが設定されている場合は、それらのグループの名前とグループに割り当てられているポートを記録し、ポートごとに次のコマンドを 1 回入力してポートを削除します。</block>
  <block id="a29b28a9bfbd05c839e9894c81c44cc0" category="paragraph">「 network port ifgrp remove-port -node &lt;nodename&gt; -ifgrp &lt;ifgrp_name&gt; -port &lt;netport&gt; 」のようになります</block>
  <block id="c1e5c7576460bdde0a488bc293007a13" category="summary">ルート以外のアグリゲートと NAS データ LIF をノード 1 からノード 2 に移動します</block>
  <block id="358f52f6680f0f2b534acb9ac77674d2" category="list-text">停止している LIF がある場合は、次のコマンドを LIF ごとに 1 回入力して、 LIF の管理ステータスを「 up 」に設定します。</block>
  <block id="44d2fdf7ea40f3d7321cb94a4051b609" category="paragraph">「 network interface modify -vserver _Vserver_name -lif LIF_name `-home-node_nodename __ -status-admin up</block>
  <block id="65dafd80488559eb25b9b16c7ae60e27" category="list-text">次のコマンドを入力して、インターフェイスグループから VLAN を削除します。</block>
  <block id="38c250e3cea10de8e69a05edc403fb4f" category="paragraph">「 network port vlan delete -node _nodename 」 -port_ifgrp --vlan-id_vlan_ID_`</block>
  <block id="11c404f7c79ae3005a460cd2d80c457a" category="paragraph">「 network port ifgrp show -node nodename 」 -ifgrp _ifgrp_name のように表示されます</block>
  <block id="d72c3f2754ea2c427cb4caa21b66f58a" category="paragraph">「 network port ifgrp remove-port -node_nodename 」 -ifgrp _ifgrp_name -port_netport_ 」のようになります</block>
  <block id="6694385292a5e940b67087561676a6aa" category="list-text">ONTAP 9.5 、 9.6 、または 9.7 を実行しているネットアップコントローラをアップグレードする場合。本ドキュメントは、 ONTAP 9.8 へのアップグレードには適用されません。</block>
  <block id="9ac1bc9aa08a3adb056bbe14e9db22f9" category="list-text">MetroCluster 構成をアップグレードする場合は、 4 ノード以上の FC 構成になり、すべてのノードで ONTAP 9.6 または 9.7 を実行します。</block>
  <block id="0d74b20ac8b9962af3f313acb5efcf95" category="paragraph">次の表に、コントローラのアップグレードでサポートされるモデルマトリックスを示します。</block>
  <block id="b20b578c387911a06f818e60f8b42fc9" category="cell">AFF A300 、 AFF A400 、 AFF A700 ^1 ^ 、 AFF A800^2^</block>
  <block id="08b8b3c8e271efd7690222a017e7f380" category="cell">FAS8700 、 FAS9000 、 FAS8300 ^4^ 、 ^5^</block>
  <block id="da8b8662f7c1d5fff02df5d395e1d253" category="cell">AFF A700 ^1 ^ 、 AFF A800 ^2 ^ ^ 、 ^3^ 、 AFF A400 ^ 4 ^ ^ 、 ^5^</block>
  <block id="e51c635d01c8dc3e816e9f14ad0767cf" category="paragraph">^1 ^ARL AFF A700 システムの自動アップグレードは、 ONTAP 9.7P2 からサポートされています。</block>
  <block id="1ab9ac762ff98f776b6d5cfddf56bf6f" category="inline-link-macro">ノード 3 の UTA / UTA2 ポートを確認して設定します。手順 14</block>
  <block id="d16c604a3cddc9316d5dfc1514c5da11" category="inline-link-macro">ノード 4 の UTA / UTA2 ポートの確認と設定、手順 14</block>
  <block id="854e3fd862be50a0cf7e5d697506a33c" category="paragraph">^2^ 内蔵ディスクと外付けディスクをサポートする AFF A800 システムに更新する場合は、内蔵 NVMe ディスクのルートアグリゲートに関する具体的な手順に従う必要があります。を参照してください <block ref="983c366997f9ae38fb70a96bf899b5fb" category="inline-link-macro-rx"></block> および <block ref="c637ff237000263c980a88d3850be72b" category="inline-link-macro-rx"></block>。</block>
  <block id="cc31b65361b7c697a4d3c0f75b928baf" category="paragraph">^3^ARL AFF A300 から AFF A800 システムへの自動アップグレードは、 ONTAP 9.7P5 からサポートされています。</block>
  <block id="2e2d0e127c8eb55e752ddae9109b7b26" category="paragraph">^4^ARL AFF A300 から AFF A400 への自動アップグレード、および FAS8200 から FAS8300 への自動アップグレードは、 ONTAP 9.7P8 からサポートされています。</block>
  <block id="0d17b2b0ee5853657bc79eefe010abec" category="paragraph">^5^ AFF A300 から AFF A400 または FAS8200 を 2 ノードスイッチレスクラスタ構成で FAS8300 システムにアップグレードする場合は、コントローラのアップグレード用の一時的なクラスタポートを選択する必要があります。AFF A400 および FAS8300 システムは、イーサネットバンドルとして、メザニンカードポートはイーサネットタイプ、 FC タイプの FC バンドルとして、 2 種類の構成で提供されます。</block>
  <block id="f955c2aa7355bfa46e658748f5cf357e" category="summary">ノード 1 を撤去するには、ノード 1 を適切にシャットダウンし、ラックまたはシャーシから取り外します。</block>
  <block id="677d00db9337ffe0ff96eb465e769343" category="summary">新しいコントローラモジュールで NVE を設定します。</block>
  <block id="173783cbe092db6a29468de90fe438e4" category="paragraph">交換したコントローラまたは新しいコントローラの HA パートナーで NetApp Volume Encryption を使用している場合は、新しいコントローラモジュールで NetApp Volume Encryption を設定する必要があります。</block>
  <block id="03b11da9f8060b934f9b3411198fea29" category="list-text">リストされている各キー管理サーバについて、同じ手順を繰り返します。</block>
  <block id="c61ecb9aacaa88894fa1697ec209966a" category="paragraph">最大 4 台のキー管理サーバをリンクできます。</block>
  <block id="db109f602a3b7cebd1a7f99683224535" category="list-text">リンクされたすべてのキー管理サーバから新しいノードに認証キーをリストアします。</block>
  <block id="d2b3e4b0ae30abdd31414891613ecac2" category="list-text">外部キー管理ツールの認証をリストアします。</block>
  <block id="74c90316d25b4cdc5c8e524af066a5a0" category="paragraph">「セキュリティキーマネージャの外部リストア」</block>
  <block id="eed577fe70cdcd6a422d81d49e0f94ca" category="paragraph">このコマンドには、オンボードキーマネージャ（ OKM ）のパスフレーズが必要です。</block>
  <block id="57bd5edad2e4a85125aa9528f6fa4cea" category="list-text">OKM の認証をリストアします：</block>
  <block id="0710333d98c8cf9c9613b4b9c4e15e64" category="cell">「 securitykey-manager setup -node &lt;node_name &gt;` 」のように指定します</block>
  <block id="0b1682f87011162faab1af2fa8ad8f59" category="summary">残りの手順を完了する前に、ポートとカードの設定を設定します。</block>
  <block id="e163b825512519a699383447144a9f8c" category="list-text">ノード 3 にオンボードの FC ポート、オンボードの UTA / UTA2 ポート、または UTA / UTA2 カードがなく、ストレージディスクを搭載したシステムをアップグレードする場合は、に進みます <block ref="3b6c063a8efbc88c969c7838f0611434" category="inline-link-macro-rx"></block> セクション。</block>
  <block id="7d0739079baed100420d18c056ca0deb" category="list-text">ただし、ストレージアレイを搭載した FlexArray 仮想化ソフトウェアを搭載した V シリーズシステムまたはシステムがあり、 node3 にはオンボードの FC ポート、 UTA / UTA ポート、または UTA / UTA2 カードがない場合は、で section_Install および boot node3_and resume に戻ります <block ref="279060155dcadaa13689560d46e381cb" category="inline-link-macro-rx"></block>。</block>
  <block id="81fed3b8a4c90b1e08e96db4e364a264" category="list-text">ノード 3 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがない場合は、このセクションを省略してください <block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block>。をクリックして、セクションに移動します <block ref="3b6c063a8efbc88c969c7838f0611434" category="inline-link-macro-rx"></block>。</block>
  <block id="192b140d95aa5779e6ddd34b883a91bb" category="list-text">ノード 3 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがない場合は、このセクションを省略してください <block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block> セクション「 _Install 」に戻り、再開時に node3 _ をブートします <block ref="279060155dcadaa13689560d46e381cb" category="inline-link-macro-rx"></block>。</block>
  <block id="a69c4b39f212e41199201fde407c6c9e" category="cell">に進みます <block ref="3b6c063a8efbc88c969c7838f0611434" category="inline-link-macro-rx"></block></block>
  <block id="5bb1d2d89905f521825083d671817bcb" category="cell">は、 V シリーズシステムまたは FlexArray 仮想化ソフトウェアを搭載し、ストレージアレイに接続されています</block>
  <block id="06ebdeec742f5f261b968dabee7ce4bc" category="cell">_Install に戻り、 node3 をブートして、のセクションを再開します <block ref="279060155dcadaa13689560d46e381cb" category="inline-link-macro-rx"></block>。</block>
  <block id="98df3e165a2b52781e38f636917b8597" category="list-text">[[step16]] システムが「 no disks found 」というメッセージで再起動ループに入る場合、これはポートがターゲットモードにリセットされたために、ディスクを認識できないためです。に進みます <block ref="cc511b4dbeed99af4a19f83ac3e97f04" category="inline-xref-macro-rx"></block> 終了： <block ref="8dac798a0974640f6cae187a1dbe2d57" category="inline-xref-macro-rx"></block> これを解決します。</block>
  <block id="0aa7eed219d80f1d3e8d2545e4b710c9" category="summary">新しいノードのネットワークポートセットが異なる場合は、ノードがクォーラムに正常に参加していることを確認する必要があります。</block>
  <block id="4a186232ad8f3f81c70414871d7267f9" category="paragraph">新しいコントローラが搭載されたノードがブートし、最初にクラスタへの追加を試みます。ただし、新しいノードのネットワークポートセットが異なる場合は、次の手順を実行して、ノードがクォーラムに正常に参加するようにする必要があります。</block>
  <block id="224e96d1485db2dffbe7521db5e3b8db" category="paragraph">関連するノードに対してこの手順を使用できます。node3 は、次のサンプル全体で使用されます。</block>
  <block id="fb2ae3407dbb65ffe5f8f2ab09ba07d0" category="list-text">次のコマンドを入力し、出力を確認して、新しいクラスタポートがクラスタブロードキャストドメインにあることを確認します。</block>
  <block id="3cb8659a043650dc7ac58ea24d685632" category="paragraph">「 network port show -node node -port port -fields broadcast-domain 」</block>
  <block id="31ee4113a91e33fbefc812b660a4b1ed" category="paragraph">次の例は、ポート「 e1a 」が node3 のクラスタドメインにあることを示しています。</block>
  <block id="5196f85280b4d8f2fde41a628b5ed883" category="list-text">次のコマンドを入力し、出力を確認して、クラスタブロードキャストドメインに正しいポートを追加します。</block>
  <block id="3c5acee2cec17679c5be3b6cbcdd5c0d" category="list-text">次のコマンドを使用して、 LIF ごとに 1 回、クラスタ LIF を新しいポートに移行します。</block>
  <block id="ddfb11e04a10f57aca782a9cbca9dc5f" category="paragraph">network interface migrate -vserver Cluster -lif &lt;lif_name&gt; -source-node node3 -destination -node node3 -destination-port &lt;port_name&gt; `</block>
  <block id="2bb80bd4ebcf6539543d74e66779c6af" category="list-text">クラスタポートが Cluster broadcast-domain にない場合は、次のコマンドを使用して追加します。</block>
  <block id="039efdbf627e2714bf4ae20682788b00" category="paragraph">「 network port broadcast-domain add-ports -ipspace Cluster -broadcastdomain Cluster -ports node: port 」のように設定されています</block>
  <block id="251908cb596e6149cba77f2cb7558b73" category="list-text">クラスタブロードキャストドメインから古いポートを削除します。関連する任意のノードに対してを使用できます。次のコマンドは、ノード 3 のポート「 e0d 」を削除します。</block>
  <block id="3a77dcc8c0ced4edb3012a4377887fef" category="paragraph">「 network port broadcast-domain remove-ports network port broadcast-domain remove-ports ipspace Cluster -broadcast-domain Cluster -ports node3 ： e0d</block>
  <block id="94633ca5c1dd75af12a1c5cf6f093384" category="list-text">ノードが再びクォーラムメンバーになったことを確認します。</block>
  <block id="af6cb4674b921de300bcb5bdea383996" category="list-text">クラスタ LIF とノード管理 / クラスタ管理 LIF をホストしているブロードキャストドメインを調整します。各ブロードキャストドメインに正しいポートが含まれていることを確認してください。ポートをホストしているブロードキャストドメイン間や LIF のホームになっているブロードキャストドメイン間で移動することはできないため、 LIF を移行して変更する必要がある場合があります。</block>
  <block id="cd44bb6e4bc3e07a88dbfa652b3b8611" category="list-text">ブロードキャストドメインに対してポートを追加または削除します。「 network port broadcast-domain add-ports network port broadcast-domain remove-port</block>
  <block id="1042ef89ad8bb9047b18d18768633b0c" category="list-text">LIF のホームポートを変更します。「 network interface modify -vserver vserver -lif &lt;LIF_name&gt; – home-port &lt;port_name&gt; 」必要に応じて、クラスタ間ブロードキャストドメインを調整して、クラスタ間 LIF を移行します。データ LIF は変更されません。</block>
  <block id="00c3120a80791aefa9122b20e592078e" category="summary">node2 の物理ポートが node4 の物理ポートに正しくマッピングされていることを確認する必要があります。</block>
  <block id="3d0dd85a75a5d4402e67907aad60c4bf" category="paragraph">node2 の物理ポートが node4 の物理ポートに正しくマッピングされていることを確認する必要があります。そうすれば、 node4 はクラスタ内の他のノードと通信し、アップグレード後にネットワークと通信できるようになります。</block>
  <block id="1f689cbf21b231665fddfb1e6d536c70" category="paragraph">ノード 4 のソフトウェア設定がノード 4 の物理的な接続と一致していること、およびアップグレードを続行する前に IP 接続がリストアされていることが必要です。</block>
  <block id="bf8b9055a5342a7293763811a06a8608" category="paragraph">ポート設定は、ノードのモデルによって異なる場合があります。元のノードのポートと LIF の構成を、新しいノードの構成と互換性を持つようにする必要があります。これは、新しいノードがブート時に同じ設定を再生するためです。つまり、ノード 4 のブート時に、 Data ONTAP が node2 で使用されていたポートで LIF をホストするように試行するためです。</block>
  <block id="fbec007548b328ac0c95f6da4a3baeae" category="paragraph">したがって、 node2 の物理ポートが node4 の物理ポートに直接マッピングされない場合は、ブート後にクラスタ、管理、およびネットワーク接続をリストアするためにソフトウェア設定の変更が必要となります。また、 node2 のクラスタポートが node4 のクラスタポートに直接マッピングされていない場合は、正しい物理ポートでクラスタ LIF をホストするソフトウェア設定が変更されるまで、リブート時に node4 がクォーラムに自動的に再参加しないことがあります。</block>
  <block id="bad707bf91a771b52edba306ada6de3a" category="list-text">node2 、ポート、ブロードキャストドメイン、 IPspace のすべてのケーブル接続情報を表に記録します。</block>
  <block id="7d59f6e2a8043f873c459c922f1be4ac" category="cell">Node2 ポート</block>
  <block id="45b46ba4750e074aa4e7304855388746" category="cell">ノード 2 の IPspace</block>
  <block id="7774466fbe6f6785b221d88e974172bf" category="cell">ノード 2 のブロードキャストドメイン</block>
  <block id="b820c2559c77f1207711b13680c2cd4b" category="cell">Node4 ポート</block>
  <block id="db2291ca53692966923fd04da1d08262" category="cell">ノード 4 の IPspace</block>
  <block id="29ed689e40f8d5b58cdea33f9a18e301" category="cell">ノード 4 のブロードキャストドメインが必要です</block>
  <block id="e0b5ca8e30da43caab0dc808ecb2fd97" category="list-text">ノード 4 、ポート、ブロードキャストドメイン、および IPspace のすべてのケーブル接続情報を表に記録します。</block>
  <block id="0906da04c2f71c2ff6e8d8aa1a0b62e6" category="paragraph">このコマンドの値は、システムの物理状態と一致している必要があります。</block>
  <block id="c3e082d7583cd2ead0dcc409f5542b21" category="list-text">ノード 4 をクォーラムに追加する手順は、次のとおりです。</block>
  <block id="db937998c9896c71a694ce3ace71be28" category="list-text">ノード 4 をブートします。を参照してください <block ref="f326c815b47f4f2909494bae5cd735d5" category="inline-link-macro-rx"></block> ノードをブートします（まだブートしていない場合）。</block>
  <block id="9721a97ccd9a5f90e5dbf3fc6d7d79e8" category="paragraph">次の例は、ポート「 e0a 」が node4 にあるクラスタドメイン内にあることを示しています。</block>
  <block id="97b7450d8bd85e6393b74d4dbf4450d0" category="paragraph">network port modify -node node4 -port e1b -ipspace Cluster -mtu 9000`</block>
  <block id="b65837675f757fb8cbeadd63c9cd73ba" category="paragraph">「 network interface migrate -vserver Cluster -lif &lt;lif_name&gt; -source-node node4 destination-node node4 destination-port &lt;port_name&gt; 」の形式で指定します</block>
  <block id="69b32f8a94b6832dc6d48eee17de9eb8" category="paragraph">次のコマンドは、ノード 4 のポート「 e0d 」を削除します。</block>
  <block id="b99a704778802fd3eec12de47c8eef3e" category="paragraph">「 network port broadcast-domain remove-ports -ipspace Cluster -broadcast-domain Cluster -ports node4 ： e0d</block>
  <block id="046f5601edc5838681a4341447d07a3c" category="list-text">ノード 4 が再びクォーラムメンバーになったことを確認します。</block>
  <block id="72b363c4e1bc7c833058a354c35ccc13" category="list-text">[[auto_map_4_Step5] クラスタ LIF およびノード管理 / クラスタ管理 LIF をホストしているブロードキャストドメインを調整します。各ブロードキャストドメインに正しいポートが含まれていることを確認してください。ホストしているブロードキャストドメイン間または LIF がホームにあるブロードキャストドメイン間でポートを移動することはできないため、次の手順に示すように、 LIF を移行して変更しなければならない場合があります。</block>
  <block id="6780452e8545385148d380db905f436b" category="paragraph">「 network port broadcast-domain add-ports 」「 network port broadcast-domain remove-ports 」</block>
  <block id="bcce02a72b0cedac49d7cddd94899e2b" category="paragraph">「 network interface modify -vserver &lt;vserver&gt; -lif &lt;lif_name&gt; – home-port &lt;port_name&gt; 」の形式になります</block>
  <block id="9cad7d7bd6306823f6764eed03150b40" category="list-text">必要に応じて、と同じコマンドを使用して、クラスタ間ブロードキャストドメインを調整してクラスタ間 LIF を移行します <block ref="c86367403222084077e79731124e45bf" category="inline-xref-macro-rx"></block>。</block>
  <block id="85668f79ccc0a9c2b457eb839ed11619" category="list-text">必要に応じて、のコマンドと同じコマンドを使用して、他のブロードキャストドメインを調整してデータ LIF を移行します <block ref="c86367403222084077e79731124e45bf" category="inline-xref-macro-rx"></block>。</block>
  <block id="df67040888f09ede9f57e8123e071106" category="list-text">node2 に存在しないポートが残っている場合は、次の手順に従って削除します。</block>
  <block id="5a2881d4439f8933c1dc179fb49a9495" category="paragraph">次のコマンドは ' フェイルオーバー・ポリシーを broadcast-domain-wide に設定し ' フェイルオーバー・グループ fg1 のポートを 'node4 の LIF のフェイルオーバー・ターゲットとして使用します</block>
  <block id="c85edd1a59a6da53fbfe967ef36e8db3" category="paragraph">'network interface modify -vserver node4 -lif data1 failover-policy broadcast-domainwide -failover-group fg1</block>
  <block id="197cf83159625e94e69b0fc1efa0e824" category="list-text">ノード 4 で変更を確認します。</block>
  <block id="37df1e4edda8a9bce8aa91096f265331" category="list-text">[[Step5] ] 次のコマンドを入力し、出力を調べて、 node2 にデータ LIF が残っていないことを確認します。</block>
  <block id="738cc83e33e6f068712b1528860c1691" category="paragraph">network interface show -curr-node &lt;node2&gt; -role data</block>
  <block id="c76c038ef9582123a69154e143b5e63f" category="list-text">次のコマンドを入力し、ノードに設定されているインターフェイスグループがないかどうかを確認します。</block>
  <block id="e0d9b9a8ceb38f16ee39f9732b0b1c59" category="paragraph">「 network port ifgrp show -node &lt;node2&gt; -ifgrp &lt;ifgrp_name&gt; -instance 」の形式で指定します</block>
  <block id="42610df90a5616a22b3f0c895971522b" category="summary">ノードがクォーラムに正常に参加していることを確認する必要があります。</block>
  <block id="83d7d02690134c88d040a5e6d81a981b" category="paragraph">関連するノードに対してこの手順を使用できます。node3 は、次のサンプル全体で使用されます。</block>
  <block id="aa38e04ca4c35fceef45210d8b6a003a" category="list-text">次のコマンドを入力し、出力を確認して、新しいクラスタポートがクラスタブロードキャストドメインにあることを確認します。</block>
  <block id="9c334e7e4defdbeb8571e0c5e2a8abf3" category="list-text">次のコマンドを入力し、出力を確認して、クラスタブロードキャストドメインに正しいポートを追加します。</block>
  <block id="d56cf77a0ff93267197cac68675e86ba" category="paragraph">network interface migrate -vserver Cluster -lif &lt;lif_name&gt; -source-node node3 destination-node node3 -destination-port &lt;port_name&gt;`</block>
  <block id="03631f9ee15255f006df50849cffb9de" category="list-text">クラスタ LIF のホームポートを次のように変更します。</block>
  <block id="929697b9e81ed66dcaa4410aa1b6eea4" category="paragraph">「 network port broadcast-domain add-ports -ipspace Cluster -broadcastdomain Cluster ports node: port 」のように設定されています</block>
  <block id="440a119559739fb047b33344e93fc5ac" category="list-text">ノードが次のようにクォーラムに再参加したことを確認します。</block>
  <block id="ca5fc614df4c9dce6d5728a3a2c40003" category="paragraph">「 network port broadcast-domain add-ports network port broadcast-domain remove-port 」というメッセージが表示されます</block>
  <block id="deb6dba98f2d5d5a1fde945303708e5d" category="list-text">LIF のホームポートを変更します。</block>
  <block id="59453ab85ab73f877db83a711238b646" category="paragraph">「 network interface modify -vserver &lt;vserver-name&gt; -lif &lt;lif_name&gt; – home-port &lt;port_name&gt; 」という形式になります</block>
  <block id="764f98dfaba7470447914335050a58df" category="paragraph">必要に応じて、クラスタ間ブロードキャストドメインを調整してクラスタ間 LIF を移行します。データ LIF は変更されません。</block>
  <block id="e408c072357fac994037ece79ff21e68" category="summary">いずれかのアグリゲートに再配置の失敗や再配置が拒否された場合は、アグリゲートを手動で再配置する必要があります。</block>
  <block id="b42a4717030452cc205d4d9947f80c7b" category="paragraph">いずれかのアグリゲートに再配置が失敗した場合、または拒否された場合は、アグリゲートを手動で再配置するか、必要に応じて拒否またはデスティネーションのチェックを無視する必要があります。</block>
  <block id="70ab34491b1c348e1a029bf39dad5d2c" category="list-text">EMS ログで、アグリゲートの再配置に失敗した理由や拒否された理由を確認します。</block>
  <block id="fda7b29c76219f4ea7f3c24b3ed9b721" category="paragraph">「 storage aggregate relocation start -node &lt;node1&gt; -destination &lt;node2&gt; aggregate-list * -ndocontroller -upgrade true</block>
  <block id="cc9d127dc39047b3e73421f03d8d0026" category="cell">次のコマンドを入力します。「 storage aggregate relocation start -override-vetoes * -ndocontroller -upgrade true</block>
  <block id="6067a4436975e19e7c76700ceeabd5c2" category="cell">次のコマンドを入力します。「 storage aggregate relocation start -overridedestination-checks * -nd-controllerupgrade true</block>
  <block id="5d31fed055d0ffaa300ac7d383fea64c" category="summary">アップグレードするシステムで NVE を使用してボリュームを暗号化する場合は、暗号化設定を新しいノードに同期する必要があります。</block>
  <block id="7fc7a7a8a49bc61025e4ea8aebd0839f" category="summary">ノードを物理的にラックに設置したら、ネットブートが必要になることがあります。</block>
  <block id="83e3abbe2d4f63155eff798e62e1a616" category="inline-link-macro">ステージ 3 ：ノード 3 の設置とブート</block>
  <block id="bb9252c2a7cbae6e0a2014a53400a55c" category="paragraph">ただし、元のコントローラと同じバージョンの ONTAP 9 がインストールされているコントローラには、ネットブートする必要はありません。その場合は、このセクションをスキップしてに進みます <block ref="a3940c661e200ff7ee0136ca0ef37651" category="inline-link-macro-rx"></block></block>
  <block id="47d2d2bfe5e2f318b6d816e5adc3929d" category="paragraph">このフェーズで node3 がクラッシュした場合は、 HA がすでに無効になっているため、テイクオーバーは実行されません。</block>
  <block id="f361f80547aae98b60e1c7ecc861a027" category="paragraph">ノード 3 のリブートまでルート以外のアグリゲートがすでに再配置されています。</block>
  <block id="07c1aaa58cd1a9ed9a8f92aecfc26662" category="paragraph">node3 のブート中に、すべてのアグリゲートでクライアントが停止します。</block>
  <block id="c0292f7525a7863a4df334fb2426ba92" category="summary">コントローラのアップグレード時に、コントローラは、より新しい、またはより強力なプラットフォームを実行する別のコントローラに交換されます。</block>
  <block id="3ffee04e4bb020103f1bece18c2ac58e" category="doc">コントローラのアップグレードプロセスを自動化する</block>
  <block id="de8c3311256a86cce047cb3a63efa71a" category="paragraph">コントローラのアップグレード時に、コントローラは、より新しい、またはより強力なプラットフォームを実行する別のコントローラに交換されます。</block>
  <block id="e49fc42bb044e22524046235b0ccbd4c" category="summary">ARL を使用してノードをアップグレードする前に、手順の仕組みを理解し、いくつかの段階に分けておく必要があります。</block>
  <block id="0a00cf76c766f3c9437fe3941fdf22c4" category="cell">ステージ 1 ：アップグレードを準備</block>
  <block id="a6366d7a1348b24e3fdee3eff8dea3c6" category="list-text">ルート以外のアグリゲートをノード 1 からノード 2 に移動します。</block>
  <block id="949747e4d3329e8b9a9e7ab4a5c5cb71" category="list-text">ノード 1 で所有されている SAN 以外のデータ LIF を node2 に移動します。</block>
  <block id="bc8f48f93dda6e3952b34dfbe1025b15" category="list-text">FC または CNA の設定を行います。</block>
  <block id="3f5c1bacca95dbafb20a5f179a1942a1" category="list-text">ポートを node1 から node3 にマッピングします</block>
  <block id="54a39699f4ada20f9a2f7d43ba99505c" category="list-text">node1 で所有されている SAN 以外のデータ LIF を node2 から node3 に移動します。</block>
  <block id="91e22d907fccb4bca308f7b5eda21afe" category="list-text">node2 で所有されている SAN 以外のデータ LIF をノード 3 に移動します。</block>
  <block id="3fdf70ee47a45b22517705d18baeebc9" category="list-text">node2 のポートを node4 にマッピングします</block>
  <block id="d27f63bee356811b88d04e4d588f22db" category="list-text">ノード 4 のインストールを確認します</block>
  <block id="0895162788980393fe5dfd2240f70f94" category="list-text">必要に応じて SnapMirror 処理を再開</block>
  <block id="1c35d7a8e952b00e97b01d6d33eedd5e" category="summary">node3 のインストールとブートが完了したら、正しくインストールされていることを確認する必要があります。</block>
  <block id="7d3380555ca7efd6a1fad31091de1dd7" category="paragraph">node3 のインストールとブートが完了したら、正しくインストールされていることを確認する必要があります。node3 がクォーラムに参加するのを待ってから、再配置処理を再開する必要があります。</block>
  <block id="2fa5c37305bc33a6ae27bb983656d1e3" category="list-text">処理のステータスを確認し、 node3 の設定情報が node1 と同じであることを確認します。</block>
  <block id="7ae288e57d9c04f2d5a1b7ff338ee758" category="paragraph">node3 の設定が異なる場合は、手順の後半でシステムが停止する可能性があります。</block>
  <block id="d845d17a5ef5b3ab80e9280a67c911e8" category="list-text">交換したコントローラが MetroCluster 構成に対して正しく設定されていることを確認します。 MetroCluster 構成は正常な状態であり、スイッチオーバーモードではないことが必要です。を参照してください <block ref="14c0e32a98a31f9fd4a16b635b2f7ebd" category="inline-link-macro-rx"></block>。</block>
  <block id="3c18bf7f079d36181ad6878ed8071663" category="summary">ルートボリュームからブートデバイスに構成情報をリストアする必要があります。</block>
  <block id="bc40b2f6345ce25ab7662ef954f79eac" category="doc">ルートボリューム構成をリストア</block>
  <block id="e1658469b860d365597876856e38950a" category="paragraph">これらの手順は、 node3 と node4 で実行する必要があります。まず一方のノードでそれぞれの手順を完了してから、次の手順に進みます。</block>
  <block id="8025560869bc5bb571a283b93eb36c25" category="list-text">LOADER プロンプトからブートメニューにアクセスします。</block>
  <block id="3b30581e1dcf21fb5bc10ab7b7b14ebc" category="list-text">ブート・メニューから '(6) Update flash from backup config' を選択し ' 続行するかどうかを確認するメッセージが表示されたら 'y' を入力します次のいずれかを選択してください。</block>
  <block id="e568219783dc2975662f32e6665b9312" category="paragraph">フラッシュの更新プロセスが数分間実行され、システムがリブートします。</block>
  <block id="64c7b7b950f686aaa9399673582360b1" category="list-text">システム ID の不一致を確認するプロンプトが表示されたら、「 y 」と入力します。</block>
  <block id="e4c1c828d40a575431492bab6401d8ae" category="paragraph">起動シーケンスは正常に実行されます。</block>
  <block id="f068cb7de6bc557a6102cbb510f726f0" category="summary">元のノードからボリュームを移動できるように、新しいノードを設置してクラスタに追加する必要があります。</block>
  <block id="0a89217206ded71020fde70b9be96510" category="doc">新しいノードを設置してクラスタに追加</block>
  <block id="b241ff4d47149b1cfcc3bff8ac743191" category="paragraph">ボリュームを移動することでコントローラハードウェアをアップグレードする場合は、元のノードと新しいノードの両方が同じクラスタに存在する必要があります。</block>
  <block id="48c7c41b72e1d678923ce3571aa65b2d" category="list-title">ステップ</block>
  <block id="c73b08eed72ad3afd194519ddb22ebc4" category="list-text">新しいノードを設置してクラスタに追加します。</block>
  <block id="5da3c5c759e159e1aab297e687e23060" category="cell">クラスタのバージョン</block>
  <block id="b7c4538baf1def6c115b8c9ce3581612" category="cell">参照するドキュメント</block>
  <block id="a0783764f121d0362f984f57649b230b" category="paragraph">ONTAP 9.0 以降</block>
  <block id="ed3f2da4177cc35b1433eccf1a2e9b37" category="paragraph">ONTAP 9.0 より前のリリース</block>
  <block id="8f2f5cebfa6b4e869a159dbf3cedb773" category="inline-link">使用しているバージョンの Data ONTAP 8 に対する『クラスタの拡張エクスプレスガイド』を検索してください</block>
  <block id="2f22c527d871517945ac34102d2f6931" category="summary">ストレージを移動することでアップグレードの手順を完了するには、新しいノードから未使用のポートと LIF を削除し、ストレージフェイルオーバーまたはハイアベイラビリティを再度有効にし、サービスプロセッサ \ （ sp\ ）を設定し、新しいライセンスをインストールし、 AutoSupport をセットアップする必要があります。また、ストレージまたはボリュームの暗号化を設定し、 FC ポートまたは CNA ポートを設定する必要がある場合もあります。</block>
  <block id="5112ce36807c8e031c9ab063bc28ce71" category="doc">ONTAP 9.7 以前で最終アップグレード手順を実行します</block>
  <block id="c4d0156d9500edcd23bba4f179a52fa7" category="paragraph">ストレージを移動してアップグレードの手順を完了するには、新しいノードから未使用のポートと LIF を削除し、ストレージフェイルオーバーまたはハイアベイラビリティを再度有効にし、サービスプロセッサ（ SP ）を設定し、新しいライセンスをインストールし、 AutoSupport をセットアップする必要があります。また、ストレージまたはボリュームの暗号化を設定し、 FC ポートまたは CNA ポートを設定する必要がある場合もあります。</block>
  <block id="6afad8777741cb158249cdcde37c14fe" category="inline-xref-macro">ONTAP 9.8 で最後のアップグレード手順を実行します</block>
  <block id="253783c6125a504d15d61a091415d8d8" category="paragraph">以下の手順は、 ONTAP 9.7 以前を実行するシステムに該当します。ONTAP 9.8 を実行している場合は、の手順を使用する必要があります <block ref="b47981dbddf657334d68e85ddce9d886" category="inline-xref-macro-rx"></block>。</block>
  <block id="38e9bf55ae23722d14604ba35ee5bcd1" category="inline-xref-macro">ONTAP 9.8 で最後のアップグレード手順を実行します</block>
  <block id="50aee2f4fc79ea5e0b4ababa4a4889b1" category="list-text">ONTAP 9.8 を実行しているシステムの場合は、 * STOP * をクリックします。の手順を使用する必要があります <block ref="362f5b69398efdd58c711f175ac3611b" category="inline-xref-macro-rx"></block>。</block>
  <block id="83e8f1a7c1a2c10d90059989f69becc7" category="list-text">ストレージシステムのプロンプトで、 LIF に関する情報を表示します。</block>
  <block id="de11c3d9da699c5b0528297ad39e25cb" category="list-text">新しいノードから未使用のポートを削除します（ advanced 権限レベル）。</block>
  <block id="1edc30c9cec2665a01f0a9cc7910d9fc" category="paragraph">「 network port delete 」のように表示されます</block>
  <block id="89bd08809cd5f941c4bb2cc6687fe212" category="list-text">SAN 環境の場合は、未使用の LIF をポートセットから削除して、 LIF を削除できるようにします。</block>
  <block id="76cde272010074b17076f956bb6d89f8" category="list-text">ポートセットリストを表示します。</block>
  <block id="18ecf1639f5534ac5a785a3b8e1d413f" category="paragraph">lun portset show</block>
  <block id="c9afae54fd0724e5cf3fea1615684aa8" category="list-text">未使用の LIF をポートセットから削除します。</block>
  <block id="2585d1a54081f67afe396a9a7f2d20fc" category="paragraph">「 lun portset remove 」</block>
  <block id="c0535f3650a99508f47cb0b1cc1a34ac" category="list-text">新しいノードから未使用の各 LIF を削除します。</block>
  <block id="ab316765db1b6096837da27d30f7afbd" category="paragraph">「 network interface delete 」</block>
  <block id="eb300e9e31367fa48035e27472f75b6f" category="list-text">必要に応じて、新しいノードペアでストレージフェイルオーバーまたはハイアベイラビリティを再度有効にします。</block>
  <block id="e8599f3c8ef213317efbf60b0379685c" category="cell">使用する方法</block>
  <block id="73b5646d22daa7a0c1b15cb75822045d" category="cell">2 ノードクラスタ</block>
  <block id="7315714b19f21e9ad91dfa8b10b194f9" category="cell">高可用性を再度有効にします : 「 cluster ha modify -configured true</block>
  <block id="1ec03101c59723f4e07d47729c2bb2c0" category="cell">3 つ以上のノードで構成されるクラスタ</block>
  <block id="35dece72c7fa8f55fa95338ea53d5bb8" category="cell">ストレージフェイルオーバーを再度有効にします。「 storage failover modify -node node_name -enabled true 」</block>
  <block id="8f581810d42d6aab9a995890e97f0a55" category="list-text">必要に応じて、新しいノードで SP を設定します。</block>
  <block id="ac1f1418c4fb176ba9565108305de59a" category="paragraph">「 system service-processor network modify 」を参照してください</block>
  <block id="7e8a470724bdedbac7acdf0c919a8f0d" category="list-text">必要に応じて、新しいノードに新しいライセンスをインストールします。</block>
  <block id="5da2b156280daaa1fc2fe1cb2772416f" category="paragraph">「システムライセンスが追加されました」</block>
  <block id="3d0e110b052ddfe7c5e1d2238e076ff2" category="list-text">新しいノードで AutoSupport をセットアップします。</block>
  <block id="844ad6e55c95a4328e37b5e065b5ff4a" category="paragraph">「システム・ノード AutoSupport modify 」</block>
  <block id="e31a23cd4ecc24fce8358862c8b9bae7" category="list-text">新しい各ノードから、アップグレード後の AutoSupport メッセージをテクニカルサポートに送信します。</block>
  <block id="39f6fe42807470e793eabaa7b4decf63" category="paragraph">「 system node AutoSupport invoke -node node_name -type all -message 」 MAINT= end node_name が platform_old から platform_new に正常にアップグレードされました</block>
  <block id="e68c8836280fba147b04a2b14b196600" category="paragraph">オンボードキー管理と外部キー管理のどちらを使用しているかに応じて、次のいずれかの手順を実行します。</block>
  <block id="0ba3cc03b09a456d5100379e45dfaaba" category="list-text">「オンボード・キー管理の暗号化キーをリストアする」</block>
  <block id="a96d0d7d353c649cc2f1612f3100f861" category="list-text">「外部キー管理の暗号化キーを復元する」</block>
  <block id="ef613ca6be844d20a9465aad12778acf" category="list-text">新しいノードに FC ポート（オンボードまたは FC アダプタ上）、オンボード CNA ポート、または CNA カードがある場合は、ストレージシステムプロンプトで次のコマンドを入力して、 FC ポートまたは CNA ポートを設定します。</block>
  <block id="7334dc04c7292582343d824254e622ce" category="paragraph">「 system node hardware unified-connect modify -node node-name -adapter adapter-name -mode ｛ fc | cna ｝ -type ｛ target | initiator ｝ 」です</block>
  <block id="b50a05f2d30350b2ea8e112696c796d0" category="paragraph">CNA の設定は、 CNA アダプタがオフラインの場合にのみ変更できます。</block>
  <block id="55c24359193cebab5cdb49b7cf7d04b5" category="list-text">必要に応じて、新しいノードにスイッチレスクラスタをセットアップします。</block>
  <block id="a4fda524e3ce1bcbcd36efab17cd9e24" category="inline-link">Cisco クラスタスイッチを使用した 2 ノードスイッチクラスタへの移行</block>
  <block id="0e15b03083512d986709666b0825a949" category="inline-link">NetApp CN1610 クラスタスイッチを使用した 2 ノードスイッチクラスタへの移行</block>
  <block id="caa541c368ed2e96d996d661d22bc171" category="list-text">必要に応じて、ネットアップサポートサイト経由で元のシステムを運用停止にし、システムの運用を停止したこととサポートデータベースから削除できることをネットアップに通知します。</block>
  <block id="09ea0908fbfc4cde85bf416e35dc55c8" category="inline-link">ネットアップサポート</block>
  <block id="5f76ca3d5838bbe4e3afe662f3e0e008" category="list-text">[ インストール済みシステム ] のリンクをクリックします。</block>
  <block id="b64b23511c1735fad8c07cd83da6444e" category="list-text">[ インストール済みシステム ] ページで、フォームに古いシステムのシリアル番号を入力し、 [* Go!] をクリックします</block>
  <block id="6bdb588e04554302f22e13e36fc8cfcd" category="list-text">Decommission Form ページでフォームに入力し、 *Submit をクリックします。</block>
  <block id="a6544f7c3c36002518f645319241e489" category="paragraph">手順のアップグレードが完了している。</block>
  <block id="589fe3c8d827ae39970fa59898cfc3ee" category="summary">一般に、コントローラハードウェアのアップグレード方法は、元のノードのプラットフォームモデルによって異なります。アップグレードするには、ストレージを移動するか（停止を伴う手順）、またはボリュームを移動します（無停止の手順）。</block>
  <block id="5b0415c2846efde1fb66c48433f25633" category="doc">コントローラハードウェアをアップグレードする方法を選択します</block>
  <block id="39b87627b0135db0ab3ea0a8e2f859bd" category="paragraph">一般に、コントローラハードウェアのアップグレード方法は、元のノードのプラットフォームモデルによって異なります。アップグレードするには、ストレージを移動するか（停止を伴う手順）、またはボリュームを移動します（無停止の手順）。</block>
  <block id="e8617aabffae0af74d02587319a2e105" category="image-alt">コントローラハードウェアをアップグレードする方法</block>
  <block id="dc49ed6b9d1ec56bf48eacc8c90c1a11" category="admonition">内蔵ドライブを搭載したモデル： FAS2220 、 FAS2240-2 、 FAS2240-4 、 FAS2520 、 FAS2552 、 FAS2554 、 FAS2620 、 FAS2650 、 FAS2720 、 FAS2750 、 AFF A200 、 AFF A220 、 AFF A700s 、 AFF A800 、 AFF A250 。</block>
  <block id="e5e09031843479ef9ef8cbbd4c2f404c" category="inline-link">NetApp Hardware Universe の略</block>
  <block id="d33f2a600ba4fe43084a26e95e4908c0" category="paragraph">* 関連情報 *</block>
  <block id="dafbb22fd53a8bbbcd7e0e587f256606" category="inline-link-macro">ストレージの移動によるアップグレードのワークフロー</block>
  <block id="268c885d4c1c9189f00bfa017a5b9d17" category="paragraph"><block ref="268c885d4c1c9189f00bfa017a5b9d17" category="inline-link-macro-rx"></block></block>
  <block id="7d466f4faaea4136b0f35ee3a444b2ee" category="inline-link-macro">ボリュームを移動することによるアップグレードのワークフロー</block>
  <block id="c8b09d07f5441b617dbdf76973a08943" category="paragraph"><block ref="c8b09d07f5441b617dbdf76973a08943" category="inline-link-macro-rx"></block></block>
  <block id="ae2a729cf8a689b034991414ae49b1fb" category="summary">ストレージを移動してアップグレードするときは、まず node3 と node4 を設置し、新しいノードへの電源、コンソール、およびネットワーク接続を接続します。</block>
  <block id="6659a60f476a4bc6bb0fb4f4102757a3" category="doc">新しいノードをインストール</block>
  <block id="7bee235304d66460f5514bec30b84491" category="list-text">プラットフォームの _Installation and Setup Instructions _ に従って、新しいノードを設置します。</block>
  <block id="d3bce5b47df40dd2fa2c5263447f1fef" category="paragraph">この時点では、元のノードのディスクシェルフを新しいノードに接続しないでください。</block>
  <block id="eee400f6654fba9ea347faff838af3e5" category="list-text">プラットフォームの _Installation and Setup Instructions _ に従って、電源とコンソール接続を node3 / node4 HA ペアに接続します。</block>
  <block id="24d72d714e0459bffa2dc49d7ff220e1" category="list-text">ネットワークケーブルを接続します。</block>
  <block id="9d50d3e8c7d08c93404d2be2587afc66" category="list-text">ストレージシェルフのケーブルを除く残りのすべてのケーブルを、ノード 1 とノード 2 の HA ペアからノード 3 とノード 4 の対応するポートにそれぞれ転送します。</block>
  <block id="5a8dfa3943e8e71201fd576d26e40b9d" category="paragraph">ストレージシェルフの接続に使用しないファイバチャネルケーブルとイーサネットケーブルも含まれます。</block>
  <block id="9cd94a0a224271a5cd21acb271cdd506" category="summary">元のノードから移動するボリュームを格納するために、新しい各ノードに少なくとも 1 つのアグリゲートを作成します。ボリュームごとにアグリゲートを指定し、各ボリュームを個別に移動する必要があります。</block>
  <block id="3085ebd8810ece8cd93e0024bdb65eb1" category="doc">アグリゲートを作成してボリュームを新しいノードに移動</block>
  <block id="b256175cc88e3f891053e44ca8855b5d" category="paragraph">ボリュームを移動するには、データ保護ミラー関係を初期化しておく必要があります。</block>
  <block id="4cbaf693faaaa40a1e90a2e2918ba582" category="list-text">新しいノードごとに少なくとも 1 つのアグリゲートを作成します。</block>
  <block id="8766dbee0d34b7a34ce6553a78a69b85" category="paragraph">「 storage aggregate create -aggregate aggr_name -node new_node_name -diskcount integer 」という形式で指定します</block>
  <block id="3cc74cedbe563be5c2d81867ccbfb198" category="list-text">新しいアグリゲートを、ボリュームを移動する元のノードのアグリゲートと同じ SVM に追加します。</block>
  <block id="fe82c8b7274d1544ce545c5b1bb60481" category="paragraph">「 vserver add-aggregates 」</block>
  <block id="39e7eb0e1fd08f1ba6fea6e4df4f0d50" category="paragraph">新しいアグリゲートとボリュームの移動元となる古いアグリゲートの両方が同じ SVM に存在する必要があります。</block>
  <block id="65c0e65d7f3d4f9b7e59695a5beed439" category="list-text">新しいアグリゲートが元のノードのアグリゲートと同じ SVM に割り当てられていることを確認します。</block>
  <block id="d144782c7f277a43532b9873909babed" category="paragraph">vserver show -vserversvm_name'</block>
  <block id="60ffd94dccfc67beb8507929d59460e3" category="list-text">元のノードから新しいノードに移動するボリュームの情報を表示します。</block>
  <block id="c9a520bfa2f4bc1f1f220656e029f2e0" category="paragraph">volume show -vserver svm_name -node original_node_name</block>
  <block id="045e4ac6df29d2cafc7b15a9d2d9e81e" category="paragraph">あとで参照できるように、コマンドの出力は残しておく必要があります。</block>
  <block id="291a171e8b949620eda68d899d2e3e06" category="paragraph">次の例は、「 vs1 」 SVM と「 node0 」ノードのボリュームを表示します。</block>
  <block id="383baa78f8d3606514a0526bf7b76432" category="list-text">指定したボリュームを移動可能なアグリゲートを特定します。</block>
  <block id="943dcca1dc057f958ae14268bc8da20e" category="paragraph">volume move target-aggr show -vserver SVM_name -volume vol_name `</block>
  <block id="2ed27953e3f00d2cb31db4ae51e73953" category="paragraph">次の例は、「 vs2 」 SVM の「 user_max 」ボリュームを、表示されているどのアグリゲートにも移動できることを示しています。</block>
  <block id="275730138630968709a9e2b4981691e3" category="list-text">移動する各ボリュームで検証チェックを実行し、指定したアグリゲートに移動できることを確認します。</block>
  <block id="dccace5c37975b5248e28fc505f29272" category="paragraph">volume move start -vserver svm_name -volume volume_name -destination -aggregate destination_aggregate-name -perform-validation-only true ’</block>
  <block id="de2d56bd81b546dcca46b829e3e1e6f1" category="list-text">ボリュームを一度に 1 つずつ移動します（ advanced 権限レベル）。</block>
  <block id="c938c86730d29da993231313b0f49c52" category="paragraph">volume move start -vserver svm_name -volume vol_name -destination-aggregate destination_aggr_name -cutover-window integer</block>
  <block id="5b41753377d891121fddc57b374ecd0c" category="paragraph">ノードのルートボリューム（ vol0 ）は移動できません。SVM ルートボリュームを含むその他のボリュームも移動できます。</block>
  <block id="b9a2da3111645d69717822ff4c8d43bc" category="list-text">「 volume move 」操作の結果を表示して、ボリュームが正常に移動されたことを確認します。</block>
  <block id="eeb9bfe54f212bc92f6dfd9bfd696f57" category="paragraph">volume move show -vserver svm_name -volume vol_name</block>
  <block id="ef14daf085f4427e7af6d6339e2a9dd6" category="list-text">複数回試行しても 'volume move' 操作が最終フェーズを完了しない場合は ' 強制的に移動を終了します</block>
  <block id="af35cc4c8d875f01b72ac1b9bb33aa01" category="paragraph">volume move trigger-cutover -vserver SVM_name -volume vol_name -force true ’</block>
  <block id="faadc653b9d5250917700d625763b5cc" category="paragraph">ボリュームの移動処理を強制的に終了させると、移動しているボリュームへのクライアントアクセスが中断される可能性があります。</block>
  <block id="c127e808b121ddcc589e1612e8629e3d" category="list-text">ボリュームが指定した SVM に正常に移動され、正しいアグリゲートに配置されていることを確認します。</block>
  <block id="9366aa36db246276006f86c846f493d4" category="paragraph">volume show -vserver svm_name です</block>
  <block id="308dc930942875f893b863a55b973e8a" category="summary">ONTAP 9.8 でアップグレードを完了するには、次の手順を実行します。</block>
  <block id="f2190862dcb9dfdb205bb24e6c66cace" category="doc">ONTAP 9.8 でアップグレードを完了します</block>
  <block id="f88d69698129a6371fe8a552c1380b8a" category="paragraph">ONTAP 9.8 でアップグレードを完了するには、次の手順を実行します。</block>
  <block id="88b8cfb0eb0372af5622adb072f8536f" category="inline-link-macro">ONTAP 9.8 を使用してネットワークポートをマッピングします</block>
  <block id="3ffb7b6a90c761ac843e42b770d3b80c" category="list-text"><block ref="3ffb7b6a90c761ac843e42b770d3b80c" category="inline-link-macro-rx"></block></block>
  <block id="9f17fc6c1046f4722f2d0dff8c12c850" category="list-text"><block ref="9f17fc6c1046f4722f2d0dff8c12c850" category="inline-link-macro-rx"></block></block>
  <block id="1c83ee60998c00cf537e241e2bd00614" category="summary">元のノードがサポート対象のモデルである場合、ストレージを移動してアップグレードする処理中に、ノードの内蔵 SATA ドライブまたは SSD を、新しいノードに接続されているドライブシェルフに移動できます。また、システムをドライブシェルフに変換して、新しいノードに接続することもできます。</block>
  <block id="0f25f34bbc6624def56436f34d66a8ca" category="doc">オプション：内蔵ストレージを移動するか、システムをドライブシェルフに変換します</block>
  <block id="dd49867a2bdd430ef0f1501edf2afc71" category="paragraph">ドライブまたはドライブシェルフを移動できるのは、同じクラスタ内のみです。</block>
  <block id="5445f44c8361f04d7db7417496478290" category="inline-link-macro">内蔵ドライブを元のノードから移動します</block>
  <block id="8aeeee2821310e6e14e76fc1d344c892" category="list-text"><block ref="8aeeee2821310e6e14e76fc1d344c892" category="inline-link-macro-rx"></block></block>
  <block id="f7ccfa056b989c8b002a462176655b42" category="paragraph">元のノードがサポート対象のモデルである場合、ストレージを移動してアップグレードする処理中に、ノードの内蔵 SATA ドライブまたは SSD を、同じクラスタ内の新しいノードに接続されているドライブシェルフに移動できます。新しいノードに接続されたドライブシェルフには SAS ドライブを転送できません。</block>
  <block id="32bdc1101e093c57bf74fbd9789794c2" category="inline-link-macro">元のノードをドライブシェルフに変換します</block>
  <block id="f27c828441c4bcde6d66323e36803847" category="list-text"><block ref="f27c828441c4bcde6d66323e36803847" category="inline-link-macro-rx"></block></block>
  <block id="3fae42f30ee83a6721eb3d8ce8dc8e9e" category="paragraph">元のノードがサポート対象のモデルである場合、ストレージを移動してアップグレードする処理中に、ノードをドライブシェルフに変換し、同じクラスタ内の新しいノードに接続できます。</block>
  <block id="f78094c2959388f67bc989ba1cae66f1" category="summary">元のノードがサポート対象のモデルである場合、ストレージを移動してアップグレードする処理中に、ノードの内蔵 SATA ドライブまたは SSD を、同じクラスタ内の新しいノードに接続されているドライブシェルフに移動できます。新しいノードに接続されたドライブシェルフには SAS ドライブを転送できません。</block>
  <block id="2bfab688f89dc9f9721b34f9cf812b87" category="paragraph">元のノードがサポート対象のモデルである場合、ストレージを移動してアップグレードする処理中に、ノードの内蔵 SATA ドライブまたは SSD を、同じクラスタ内の新しいノードに接続されているドライブシェルフに移動できます。新しいノードに接続されたドライブシェルフには SAS ドライブを転送できません。</block>
  <block id="afe97a2560f5930aa2a5c5663fce5add" category="inline-link-macro">コントローラハードウェアのアップグレードに関する考慮事項</block>
  <block id="9c1c26d841e3b1333623432d7f59b92c" category="paragraph">ご使用の構成に固有のガイダンスが必要な場合は、テクニカルサポートにお問い合わせください。</block>
  <block id="48b8c1b9a7f4340b2c4a53567867ba1c" category="list-text">元のノードの SATA または SSD ドライブキャリアが、新しいドライブシェルフと互換性がある必要があります。</block>
  <block id="84dc193ac12ec0c17e52a119451eb5ee" category="list-text">互換性のあるドライブシェルフが新しいノードにすでに接続されている必要があります。</block>
  <block id="5936d4e5bf9684df84f3298fd69c5ff7" category="list-text">ドライブシェルフには、元のノードの SATA または SSD ドライブキャリアを収容するための十分な空きベイが必要です。</block>
  <block id="14118424a52e5faf27de83ea1ae0b462" category="list-text">システムの前面からベゼルをそっと取り外します。</block>
  <block id="1009ece53b201ef044edbb499bcabdd6" category="list-text">[[move_int_drive_2]] ドライブキャリアの左側にあるリリースボタンを押します。</block>
  <block id="addb5ded0310559ea0a26d75615eeff4" category="paragraph">キャリアのカムハンドルが途中まで開き、キャリアがミッドプレーンから外れます。</block>
  <block id="b74ab52594e3216640ae873b11d66486" category="list-text">カムハンドルを完全に引き下げてミッドプレーンからキャリアを外し、キャリアをドライブシェルフからそっと引き出します。</block>
  <block id="7e66410308ed9486077135ccddda4a00" category="admonition">取り外し、取り付け、持ち運びなど、ドライブを扱うときは常に両手で作業してください。ただし、キャリアの下側のむき出しになっている基板に手を置かないでください。</block>
  <block id="14d43cc881a50f3a6183180fefe24888" category="list-text">カムハンドルを開いた状態で、キャリアを新しいドライブシェルフのスロットに挿入し、キャリアが停止するまでしっかりと押し込みます。</block>
  <block id="84292dc65a5d7c537ea712d040de613a" category="admonition">キャリアを挿入するときは両手を使います。</block>
  <block id="1c21d383507612a44944a4ef460798a2" category="list-text">[[move_int_drive_5] キャリアがミッドプレーンに完全に収まり、カチッという音がして固定されるまで、カムハンドルを閉じます。</block>
  <block id="a89fc3e880df1938acf478cdd327af0b" category="paragraph">ハンドルは、キャリアの前面に揃うようにゆっくりと閉じてください。</block>
  <block id="e31ad1284b7618a9c10777ed99b12e64" category="inline-xref">手順 2</block>
  <block id="4d388dae867b0a86458ede8119b8865e" category="list-text">繰り返します <block ref="267cbc67ee851d16fc5833a2bb2eacbb" category="inline-xref-macro-rx"></block> から <block ref="07cb79f26065ce7eb3e55fb46a8c9f8b" category="inline-xref-macro-rx"></block> 新しいシステムに移動するすべてのドライブについて確認します。</block>
  <block id="145abeddb6e0efab15a65e9dfc45e5f7" category="summary">ONTAP 9.7 以前でアップグレードを完了するには、次の手順を実行します。</block>
  <block id="0c297b93e672c9bc05e823d846073d38" category="doc">ONTAP 9.7 以前でアップグレードを完了します</block>
  <block id="4ace04205abb0a1ff190b1a1f3e3cf03" category="paragraph">ONTAP 9.7 以前でアップグレードを完了するには、次の手順を実行します。</block>
  <block id="e2235c37305cb98ad3fd9aa58c7fad4b" category="inline-link-macro">ONTAP 9.7 以前を使用してネットワークポートをマッピングします</block>
  <block id="df92ac10eb53320f3aee49e68f1573a2" category="list-text"><block ref="df92ac10eb53320f3aee49e68f1573a2" category="inline-link-macro-rx"></block></block>
  <block id="6b0020689d6a1c40c97b6df1736d8e38" category="inline-link-macro">ONTAP 9.7 以前で最終アップグレード手順を実行します</block>
  <block id="00ba9232a950e876c165749336dea823" category="list-text"><block ref="00ba9232a950e876c165749336dea823" category="inline-link-macro-rx"></block></block>
  <block id="9dd804cbb0c89e2e63928e7cedd0c88f" category="summary">アップグレードを計画するには、アップグレードに関する一般的な考慮事項を理解しておく必要があります。必要に応じて、テクニカルサポートに連絡して、クラスタの構成に固有の推奨事項とガイダンスを確認してください。</block>
  <block id="a3cb839890daad4f93490c8dec227de5" category="paragraph">要件および制限事項</block>
  <block id="c9c36eddecbac88c824f0418b523c991" category="list-text">ストレージを移動してアップグレードする手順は停止を伴います。ボリューム移動によるアップグレードの手順は無停止で実行できます。</block>
  <block id="b3dfab8a2046154178dd80b47499ce0c" category="list-text">新しいノードでは、元のノードと同じバージョンのソフトウェアがサポートされている必要があります。</block>
  <block id="93f3fcba35aec9c0367976a9197bb132" category="list-text">クラスタの最大サイズを確認する必要があります。</block>
  <block id="6db613ee4df75882b92832a41f2f3f2e" category="paragraph">ボリュームを移動することでアップグレードする場合、元のノードを削除する前に新しいノードをクラスタに追加します。手順でサポートされる最大クラスタサイズをクラスタ内のコントローラの数が超えないようにしてください。</block>
  <block id="ebba69766eb24e95a1284fdab64d1a66" category="list-text">クラスタ内に異なるコントローラプラットフォームモデルを混在させる場合は、ストレージプラットフォームの混在ルールに従う必要があります。</block>
  <block id="ec124c8a7a4170436f2890610e4aa1c9" category="list-text">新しいノードには、元のノードに関連付けられているストレージを格納するための十分なストレージが必要です。</block>
  <block id="f1f5f029bf97e95c9c37ecdaf7cf4e93" category="list-text">ルートアグリゲートのサイズと新しいシステムでサポートされるディスク数は、元のシステムでサポートされているサイズ以上である必要があります。</block>
  <block id="98f3e4c18f21b25897315931895d5cd5" category="list-text">HA ペアのコントローラは、 2 つの AFF モデルまたは 2 つの FAS モデルである必要があります。</block>
  <block id="fe2b4e59713b2c74efcd804489cd6316" category="list-text">ノードが同じクラスタ内にある場合は、ボリュームまたは物理ストレージを 1 つの FAS2xxx から新しい FAS2xxx に移動することでアップグレードできます。たとえば、ボリュームまたは物理ストレージを FAS2552 から FAS2750 に移動できます。</block>
  <block id="301e2a674920a7bb1b220a6ccd88ce36" category="inline-link">アップグレードまたは更新方法を選択します</block>
  <block id="f2c81e3dbd5898a4f589948eb2c23e36" category="paragraph">内蔵ストレージを搭載したシステム</block>
  <block id="da7e3567682b36e70ff65421081173d5" category="admonition">以下のシステムには内部ストレージがあります： FAS2220 、 FAS2240-2 、 FAS2240-4 、 FAS2520 、 FAS2552 、 FAS2554 、 FAS2620 、 FAS2650 、 FAS2720 、 FAS2750 、 AFF A200 、 AFF A220 、 AFF A700s 、 AFF A800 、 AFF A250 。</block>
  <block id="2c422b7143016a62faa144bc1c6e89e1" category="list-text">内蔵ストレージを搭載したシステムの場合は、ボリュームを移動してアップグレードすることを推奨します。</block>
  <block id="7ed352a3d30fd06459f6bd682d94f397" category="list-text">内蔵ストレージを搭載したシステムの場合は、システムをドライブシェルフに変換して、同じクラスタ内の新しいノードに接続できます。FAS2220 と FAS2520 のコントローラをドライブシェルフに変換することはできません。</block>
  <block id="f4f3c3690b3eac7a8c0dd6678b738164" category="paragraph">FAS2240 または最大 5 台のシステムをドライブシェルフに変換する作業は、ストレージを移動してアップグレードする場合のワークフローのオプションです。</block>
  <block id="b96d37f28c3d7d06841f391d5e809dbd" category="list-text">内蔵ストレージを搭載したシステム、または内蔵 SATA ドライブまたは SSD にボリュームまたはアグリゲートを格納したシステムを使用している場合は、同じクラスタ内の新しいノードに接続されているドライブシェルフに内蔵ストレージを移動することでアップグレードできます。</block>
  <block id="3c62ff9b7896a5eed67cfbeb8bc9bfdf" category="paragraph">内蔵ストレージの移動は、ストレージを移動してアップグレードするワークフローのオプションです。</block>
  <block id="ae966ba3c2ce03e0c6c49d4dfc8f5702" category="paragraph">追加の手順が必要になる場合があります</block>
  <block id="4bbc849fe45c68c7c28841fb794547a0" category="list-text">新しいシステムのスロット数が元のシステムのスロット数より少ない場合、またはポートのタイプが異なる場合は、新しいシステムにアダプタを追加しなければならないことがあります。</block>
  <block id="667fc202a8b204ff5a82b8390500a41b" category="list-text">元のノードまたは新しいノードで FlexArray 仮想化ソフトウェアを使用している場合。</block>
  <block id="4a93c6361efc1101e7ca8ee6327b63ec" category="inline-link">ネットアップの技術情報アーティクル：「 What are the specific steps involved in FlexArray for NetApp controller upgrades and replacements</block>
  <block id="7a3f3e085939e759393b43bef32cbc95" category="list-text">クラスタに SAN ホストがある場合は、 LUN シリアル番号の変更に関する問題を解決するための手順が必要になることがあります。</block>
  <block id="31e9ea6f4ed38186085bf9a52128a461" category="inline-link">ストレージコントローラマザーボードの交換時および iSCSI と FCP を使用したヘッドのアップグレード時の問題の解決方法</block>
  <block id="6125b5468b29015c919d2eaf565415e6" category="list-text">システムでアウトオブバンド ACP を使用している場合は、アウトオブバンド ACP からインバンド ACP への移行が必要になることがあります。</block>
  <block id="c0ae7629e7bfcf00be0d40631578d6f7" category="inline-link">ネットアップの技術情報アーティクル 1029778 ：「 In-Band ACP Setup and Support</block>
  <block id="41e8d90d580396f4d1d06d6dcc1e6ff7" category="paragraph"><block ref="41e8d90d580396f4d1d06d6dcc1e6ff7" category="inline-xref-macro-rx"></block></block>
  <block id="b578e0f4f47404bddfc292477bc08776" category="inline-xref-macro">ストレージを移動してコントローラハードウェアをアップグレードします</block>
  <block id="dbef6fd254e4765e61a6f3112a900a32" category="paragraph"><block ref="dbef6fd254e4765e61a6f3112a900a32" category="inline-xref-macro-rx"></block></block>
  <block id="9932dd20d13ac6c57fa0b56b3ed1e4a0" category="inline-xref-macro">ボリュームを移動してコントローラハードウェアをアップグレードする</block>
  <block id="cbcda6d2b36f65f36ae58e3c1d7065e5" category="paragraph"><block ref="cbcda6d2b36f65f36ae58e3c1d7065e5" category="inline-xref-macro-rx"></block></block>
  <block id="e062efd67a70d34c188657c2ffafc80e" category="summary">ノード 1 とノード 2 に属していたディスクを、それぞれノード 3 とノード 4 に再割り当てする必要があります。</block>
  <block id="43b6e140cee78de5a68c093867c65596" category="doc">ストレージシェルフを接続し、ディスク所有権を再割り当てします</block>
  <block id="507efb4e488acd48724d3f1c3d4b184d" category="paragraph">このセクションの手順は、 node3 と node4 で実行します。そのあと、 node3 の各手順を完了してから次の手順に進みます。</block>
  <block id="3a1ea4eb792e23021a7c1dcb702a9545" category="list-text">ストレージシェルフのケーブルを node1 / node2 から node3 / node4 に接続します。電源装置とシェルフの物理的な接続を確認します。</block>
  <block id="6617e295325d64b4136755492970fe4c" category="list-text">node3 の LOADER プロンプトから、メンテナンスモードでブートします。</block>
  <block id="533823574e82f810ad592fb31173b543" category="list-text">node3 のシステム ID を表示します。</block>
  <block id="9d0e35f7d62f6d238b5cb5794b6d495c" category="paragraph">「ディスクショー V 」</block>
  <block id="01c50956963e384ca8ffd4c7db35055b" category="paragraph">以下の手順 4 で使用する node3 のシステム ID を記録します。</block>
  <block id="8796eefce7338c136136dae2ceb1ae48" category="list-text">ノード 1 のスペアディスク、ルートアグリゲートに属するディスク、およびデータアグリゲートを再割り当てします。</block>
  <block id="35698942e3e79abf6ab8cd4cb3593dc3" category="paragraph">「ディスクの再割り当て -s _node1 _sysid _ -d _node3 _sysid _ -p _node2 _SysID_ 」</block>
  <block id="ae448c109542203d3a3cde5363cfccee" category="list-text">共有ディスクが存在する場合にのみ '--p partner_SysID_' パラメータを指定します</block>
  <block id="a6ac6e206a687fa5e638aeb5a2505e40" category="paragraph">node2 のスペアディスク、ルートアグリゲートに属するディスク、およびすべてのデータアグリゲートを再割り当てする場合、コマンドは次のようになります。</block>
  <block id="2e4156d3cca76c6a7c2a2eb02d8fcbd2" category="paragraph">「ディスクの再割り当て -s node2_sysid -d node4 sysid -p node3 _SysID 」</block>
  <block id="7f616e8c743e57f3b11fac3e3bd7ffb1" category="paragraph">次のようなメッセージが表示されます。</block>
  <block id="09d5d1bd789f2ac3b2b1c70591a93da1" category="list-text">options フィールドで node1 のルートアグリゲートが「 root 」に設定され、他のアグリゲートがオンラインであることを確認します。</block>
  <block id="d0848afd8553c34945705222a97a4553" category="paragraph">次のような出力が表示されます。</block>
  <block id="e931682ac0f69e4f23e778b87a1949e7" category="summary">ストレージを移動してアップグレードするプロセスでは、 node3 と node4 の電源をオンにし、ソフトウェアイメージをブートしてノードを設定します。</block>
  <block id="b1fa2ac0707a8d8f4408434b0191d0fe" category="doc">新しいノードをセットアップ</block>
  <block id="cc32105596984688d6ab5fee199bc645" category="list-text">node3 の電源をオンにし、すぐにコンソール端末で Ctrl+C キーを押して LOADER プロンプトにアクセスします。</block>
  <block id="25870cbb4fe9afef5797b531420b7012" category="paragraph">node3 と node4 が同じシャーシにある場合は、手順 2 に進みます。ない場合は、手順 3 に進みます。</block>
  <block id="6c43e0670806fec2f9b82e002c3d44d5" category="list-text">node3 と node4 が単一シャーシ構成（同じシャーシ内にコントローラがある場合）の場合は、次の手順を実行します。</block>
  <block id="d486515e741f0bde35c2fd426a867b3d" category="list-text">ノード 4 にシリアルコンソールを接続します。</block>
  <block id="bab144c0a8977d9f14b3ec5a34769bb7" category="list-text">ノード 4 の電源がオンになっていない場合はオンにし、コンソール端末で Ctrl+C キーを押してブートプロセスを中断して LOADER プロンプトにアクセスします。</block>
  <block id="7f3fbfaad92df530efc5e2c935feab6d" category="paragraph">両方のコントローラが同じシャーシ内にある場合は、電源はすでにオンになっているはずです。</block>
  <block id="02dcb64a1d27e1eeab5837de925863e2" category="paragraph">node4 には LOADER プロンプトが表示されたままにします。この手順に戻り、 node3 の設置後に以下の手順を繰り返します。</block>
  <block id="e0c72359a74d5f255e008145ee1a65aa" category="list-text">LOADER プロンプトで、次のコマンドを入力します。</block>
  <block id="70dbb49a6cbad96a6befa2a87cf2c5ce" category="paragraph">「デフォルト設定」</block>
  <block id="f1115a4ee76c827e3baf90e4fccb2989" category="list-text">LOADER プロンプトで、管理 LIF のネットブート接続を設定します。</block>
  <block id="d28de6877e1c71b43aa9dbe62d9bc5a1" category="cell">IP アドレス</block>
  <block id="54201c55d2bdc7a9e19d9e032d8c0ede" category="cell">DHCP</block>
  <block id="ae5171433beb404b3b19f1a8c6ab2aec" category="cell">自動接続を構成します :ifconfig e0M -auto</block>
  <block id="84a8921b25f505d0d2077aeb5db4bc16" category="cell">静的</block>
  <block id="6d762fbeecd3a906c826d40dcc3e0ec8" category="cell">手動接続を設定します。「 ifconfig e0M -addr= ip_addr-mask= netmask -gw= gateway 」</block>
  <block id="fc77134b1cf9bee36efeff8c4e7ff00d" category="list-text">LOADER プロンプトで、ノード 3 でネットブートを実行します。</block>
  <block id="792eb4d1b571ca19a55c8073d075e399" category="cell">FAS2200 、 FAS2500 、 FAS3200 、 FAS6200 、 FAS/AFF8000 シリーズシステム</block>
  <block id="b684c44ca7e473a2454503d632a74387" category="cell">netboot\http://web_server_ip/path_to_webaccessible_directory/netboot/kernel`</block>
  <block id="a0be7aade7801be3a4df66bacd6674d0" category="cell">netboot\http://web_server_ip/path_to_webaccessible_directory/ontap_version_image.tgz`</block>
  <block id="e9df9be17a53094a5ff251f40e848216" category="paragraph">「 path_to_the_web-accessible_directory 」は、ダウンロードした「 ONTAP_version_image.tgz 」ファイルの場所です。</block>
  <block id="a7cb2d731b29707bf9c40c8d88a0c732" category="admonition">新しいコントローラをネットブートできない場合は、テクニカルサポートにお問い合わせください。</block>
  <block id="9a8c20fab9267090fe0211c579b8d259" category="list-text">ブートメニューからオプション * （ 7 ） Install new software first * を選択し、新しいソフトウェアイメージをダウンロードしてブートデバイスにインストールします。</block>
  <block id="53986d70143c63a3205b1deed773b405" category="paragraph">"This 手順 is not supported for NonDisruptive Upgrade on an HA pair" というメッセージは無視しますIT 環境：ソフトウェアの無停止アップグレード。コントローラのアップグレードは対象外。</block>
  <block id="efb4ec8002f3f7ed99b1b4f92cbef052" category="list-text">手順を続行するかどうかを尋ねられたら、「 y 」と入力します。パッケージの入力を求められたら、イメージファイルの URL を入力します。</block>
  <block id="3bb3e0dc251b6c719d9693145812f91b" category="paragraph">http://web_server_ip/path_to_web-accessible_directory/ontap_version_image.tgz`</block>
  <block id="647f982b341b67a165ac63d735784a54" category="paragraph">必要に応じてユーザ名とパスワードを入力するか、 Enter キーを押して続行します。</block>
  <block id="a01beec0f6ce0a2dd45c8f1d5aa3e76c" category="list-text">次のようなプロンプトが表示されたら 'n' を入力してバックアップ・リカバリをスキップします</block>
  <block id="4c311f4de89068c42d4731e90025eefc" category="list-text">次のようなプロンプトが表示されたら 'y' と入力して再起動します</block>
  <block id="3772c3f3ea70d5c6527c33a07c35e34b" category="list-text">リブートプロセスを中断するよう求めるプロンプトが表示されたら、 Ctrl+C キーを押してブートメニューを表示します。</block>
  <block id="6854e023bbdb323be06c87482d9b3a73" category="list-text">ブートメニューから * （ 5 ） Maintenance mode boot * を選択して、メンテナンスモードにアクセスします。</block>
  <block id="2e17578ed57b4217f0fff6fb665fb7db" category="list-text">必要に応じて、ノードの FC ポートまたは CNA ポートへの変更を実施し、ノードをメンテナンスモードにリブートします。</block>
  <block id="1d21eb3516c8380b94efe3f9e6d9c423" category="list-text">コマンド出力に「 ha 」と表示されていることを確認する必要があります。</block>
  <block id="39b29886f880d41a4124d49c7d84425f" category="paragraph">システムは、 HA ペア構成かスタンドアロン構成かを PROM に記録します。状態は、スタンドアロンシステムまたは HA ペア内のすべてのコンポーネントで同じである必要があります。</block>
  <block id="1c02d552a23cb0d5ccd392be156357f4" category="paragraph">「 ha-config modify controller ha 」コマンドは、コントローラ設定の「 ha 」を設定します。「 ha-config modify chassis ha 」コマンドを実行すると、シャーシ設定に「 ha 」が設定されます。</block>
  <block id="168534119baada9aef15b0bbbe44b454" category="paragraph">システムが LOADER プロンプトで停止します。</block>
  <block id="928eff2006adc1184e5f768e70b85796" category="summary">元のノードがサポート対象のモデルである場合、ストレージを移動してアップグレードする処理中に、ノードをドライブシェルフに変換し、同じクラスタ内の新しいノードに接続できます。</block>
  <block id="93ee61ace756458b9aac549506050c57" category="list-text">変換するノードのコントローラモジュールを適切な IOM モジュールと交換します。</block>
  <block id="e420822bb33a20469fdc3f065d3d63ca" category="list-text">ドライブシェルフ ID を設定します。</block>
  <block id="e3a1e42d336af98f7116d009f256cff5" category="paragraph">シャーシを含む各ドライブシェルフには、一意の ID が必要です。</block>
  <block id="bf4f5599e53150e46e0e54293db42d76" category="list-text">必要に応じて、他のドライブシェルフ ID をリセットします。</block>
  <block id="2b1d453e5c526d2daec5dda41e6bf086" category="list-text">新しいノードに接続されているドライブシェルフの電源をオフにしてから、新しいノードの電源をオフにします。</block>
  <block id="3c3916219a878033fa2aaddd792ed605" category="list-text">変換したドライブシェルフを新しいシステムの SAS ポートに接続し、アウトオブバンド ACP ケーブルを使用している場合は新しいノードの ACP ポートに接続します。</block>
  <block id="28391dfe8511b351c91dba3094b1ba03" category="list-text">変換したドライブシェルフおよび新しいノードに接続されているその他のドライブシェルフの電源をオンにします。</block>
  <block id="c2f0cd821e5ee148eb1900a96d516f19" category="list-text">新しいノードの電源をオンにしてから、各ノードで Ctrl+C キーを押してブートプロセスを中断し、ブート環境プロンプトにアクセスします。</block>
  <block id="1a364d01ffd247339721f8976186fb42" category="summary">ストレージを移動してアップグレードする場合は、元のノードを準備し、新しいノードをセットアップします。一部のプラットフォームモデルでは、新しいノードへの内蔵ストレージの移動がサポートされています。新しいノードにディスクを再割り当てし、ルートボリュームの設定をリストアし、ネットワークポートを設定します。ストレージの移動によるアップグレードは、停止を伴う手順で実行されます。</block>
  <block id="46ade9d238c9383a9fd555f9909703f2" category="image-alt">ストレージの移動によるコントローラハードウェアのアップグレードワークフロー</block>
  <block id="4b52611cbeb99e3693b2989804997376" category="inline-xref-macro">ストレージ移動時にアップグレードを準備</block>
  <block id="9b9c1d93f638d2492d52c449af4a9f8e" category="list-text"><block ref="9b9c1d93f638d2492d52c449af4a9f8e" category="inline-xref-macro-rx"></block></block>
  <block id="c4612c419c5b77fdb1400d9db61d37d0" category="inline-xref-macro">元のノードをシャットダウンします</block>
  <block id="fa92526c370e0e83caaa8ef73071e577" category="list-text"><block ref="fa92526c370e0e83caaa8ef73071e577" category="inline-xref-macro-rx"></block></block>
  <block id="761cd859f3a1152e9ed0b1bbb19f801e" category="inline-xref-macro">新しいノードに接続されているディスクの所有権を削除します</block>
  <block id="9208c7088ce84da232091879b3770a18" category="list-text"><block ref="9208c7088ce84da232091879b3770a18" category="inline-xref-macro-rx"></block></block>
  <block id="65e0e6759e9c5622cb5684aa9ab3918c" category="inline-xref-macro">新しいノードのデフォルト設定をリセットします</block>
  <block id="f241fa08ba08580f443015464e8677f1" category="list-text"><block ref="f241fa08ba08580f443015464e8677f1" category="inline-xref-macro-rx"></block></block>
  <block id="f23e0348fed3fc9f91c4876ac685e8b2" category="list-text"><block ref="f23e0348fed3fc9f91c4876ac685e8b2" category="inline-xref-macro-rx"></block></block>
  <block id="74e73fdeb27abf5972d451e384c0b008" category="list-text"><block ref="74e73fdeb27abf5972d451e384c0b008" category="inline-xref-macro-rx"></block></block>
  <block id="95d2cfc09ea488ae65b24491b681ba10" category="list-text"><block ref="95d2cfc09ea488ae65b24491b681ba10" category="inline-xref-macro-rx"></block></block>
  <block id="406f6aaf2009833158ad659b727bd7bc" category="list-text"><block ref="406f6aaf2009833158ad659b727bd7bc" category="inline-xref-macro-rx"></block></block>
  <block id="a2e87312e255032446cf18ba0d44062f" category="list-text"><block ref="a2e87312e255032446cf18ba0d44062f" category="inline-xref-macro-rx"></block></block>
  <block id="2d425665af37b9989f89179649650990" category="inline-xref-macro">アップグレードを完了します</block>
  <block id="42b305e24e95a29c3fcfe6708c1ae7a8" category="list-text"><block ref="42b305e24e95a29c3fcfe6708c1ae7a8" category="inline-xref-macro-rx"></block></block>
  <block id="1059655c106e5ea0199f3774e670962f" category="summary">ボリュームを移動してコントローラハードウェアをアップグレードする前に、いくつかの準備手順を実行する必要があります。</block>
  <block id="65ef2ef8754850d3945f71f106c239bf" category="doc">ボリューム移動時にアップグレードを準備</block>
  <block id="e9adb27e90050d8289d9a9c063d397bc" category="list-text">元のノード上のボリュームを表示します。</block>
  <block id="448f48037793339f6909fa019ac572e8" category="paragraph">volume show</block>
  <block id="9a196f75795aecf7d88cba65270aa82d" category="paragraph">コマンド出力を使用して、新しいノードに移動するボリュームのリストを準備します。</block>
  <block id="ca1e7d2036709df38bf67d5763ea1196" category="list-text">元のノードのライセンス情報を表示して記録します。</block>
  <block id="415a99ccf5f33b1917dc69dd5ae1cc49" category="list-text">元のノードでストレージ暗号化を使用しており、新しいノードに暗号化対応ディスクがある場合は、元のノードのディスクにキーが正しく設定されていることを確認します。</block>
  <block id="8a27eb0213ced2501be4946695cfd6de" category="list-text">自己暗号化ディスク（ SED ）に関する情報を表示します。</block>
  <block id="af11fb45c89d3718886f151c8a08d22c" category="paragraph">「 storage encryption disk show 」のように表示されます</block>
  <block id="21673b2e55b47fc43d8ff1f5ae5ace2d" category="list-text">Manufacturer Secure ID （ MSID ；メーカーのセキュア ID ）以外のキーが関連付けられたディスクがある場合は、 MSID キーに変更します。</block>
  <block id="6532a36b400d423741e990e7bfb3a4f9" category="paragraph">「 storage encryption disk modify 」</block>
  <block id="e7a03543f0b46d4d160d9cb6f548c923" category="list-text">現在のクラスタが 2 ノードのスイッチレス構成である場合は、希望するタイプのスイッチを使用する 2 ノードのスイッチクラスタに移行します。</block>
  <block id="a20d9980e43b578ea10896a930345b17" category="list-text">元の各ノードから AutoSupport メッセージを送信して、テクニカルサポートにアップグレードについて通知します。</block>
  <block id="db67b68ad4cbb959401716c41ae8b8e0" category="paragraph">「 system node AutoSupport invoke -node node_name -type all 」「 Upgrading node_name from platform_original to platform_new 」」というメッセージが表示されます</block>
  <block id="4d3a4f006fa6b11c769a39a41cac5793" category="summary">ストレージを移動してアップグレードの手順を完了するには、新しいノードから未使用のポートと LIF を削除し、ストレージフェイルオーバーまたはハイアベイラビリティを再度有効にし、サービスプロセッサ \ （ sp\ ）を設定し、新しいライセンスをインストールし、 AutoSupport をセットアップする必要があります。また、ストレージまたはボリュームの暗号化を設定し、 FC ポートまたは CNA ポートを設定する必要がある場合もあります。</block>
  <block id="de87a7c00dcfcf1112ca50efd583f924" category="paragraph">ストレージを移動してアップグレードの手順を完了するには、新しいノードから未使用のポートと LIF を削除し、ストレージフェイルオーバーまたはハイアベイラビリティを再度有効にし、サービスプロセッサ（ SP ）を設定し、新しいライセンスをインストールし、 AutoSupport をセットアップする必要があります。また、ストレージまたはボリュームの暗号化を設定し、 FC ポートまたは CNA ポートを設定する必要がある場合もあります。</block>
  <block id="0bde8f7cae6f7006cf8059b9d923c0a4" category="inline-xref-macro">ONTAP 9.7 以前で最終アップグレード手順を実行します</block>
  <block id="3891cdc6868c6f151d43254aeaf389d9" category="paragraph">これらの手順は ONTAP 9.8 を実行しているシステムに適用されます。ONTAP 9.7 以前を実行している場合は、の手順を使用する必要があります <block ref="91f2c94dbfb488703dd443559499d8cb" category="inline-xref-macro-rx"></block>。</block>
  <block id="a1aef6bc19056065e0e5c87b39d71b96" category="list-text">ONTAP 9.7 以前を実行しているシステムの場合は、 * stop * と入力します。の手順を使用する必要があります <block ref="91f2c94dbfb488703dd443559499d8cb" category="inline-xref-macro-rx"></block>。</block>
  <block id="602dfb74c3c65622a6e81f6da6da5716" category="paragraph">高可用性を再度有効にします : 「 cluster ha modify -configured true</block>
  <block id="68e75079cb8b3e7a53d47ecb9c69a59e" category="paragraph">ストレージフェイルオーバーを再度有効にします。「 storage failover modify -node node_name -enabled true 」</block>
  <block id="07bcd7f493b550a7d6a23f2400273a8b" category="summary">ストレージを移動してアップグレードする前に、元のノードからライセンス情報を収集し、ネットワーク設定を計画し、システム ID を記録して、ネットブートに必要なファイルを準備する必要があります。</block>
  <block id="8f173fba352550b4b824b719504591e0" category="list-text">元のノード node1 と node2 のライセンス情報を表示して記録します。</block>
  <block id="d49b56a3426b3aa04db4098a00a258f3" category="list-text">ノード 1 / ノード 2 HA ペアでストレージ暗号化を使用していて、新しいノードに暗号化が有効なディスクがある場合は、元のノードのディスクにキーが正しく設定されていることを確認します。</block>
  <block id="f86586d6856ab5f19b8787f7761d1c45" category="list-text">自己暗号化ディスク（ SED ）に関する情報を表示します。</block>
  <block id="2ca3f33b8690b8bfadc126b4fa162fd8" category="list-text">Manufacturer Secure ID （ MSID ；メーカーのセキュア ID ）以外のキーが関連付けられたディスクがある場合は、 MSID キーに変更します</block>
  <block id="f4b5604db85f1d0c81857a7ac77548c5" category="list-text">[[prepare_move_store_3]] ノード 1 / ノード 2 の HA ペアにポートと LIF の設定情報を記録します。</block>
  <block id="4d4e0186fe4a6767fbe04fce3b401b3a" category="cell">表示する情報</block>
  <block id="79bd216cbc0f386a597365eaa04f09ac" category="cell">入力するコマンド</block>
  <block id="9e3848dac335cb237199f520c6525242" category="paragraph">シェルフ、各シェルフ内のディスク数、フラッシュストレージの詳細、メモリ、 NVRAM 、ネットワークカード</block>
  <block id="95fa957773275d4c19cc254de4f5e040" category="paragraph">「 system node run -node node_name sysconfig 」のように入力します</block>
  <block id="654e1d01ab7f77e6f39636c95aa8c372" category="paragraph">クラスタネットワーク LIF とノード管理 LIF</block>
  <block id="b789920aa34a06ff52a0a140eb8211ba" category="paragraph">'network interface show -role cluster, node-mgmt</block>
  <block id="1edb05285bdfcd8326cc54455703d7ec" category="paragraph">物理ポート</block>
  <block id="91fc6bc3bb3d5233e07a5711c347aacc" category="paragraph">network port show -node node_name -type physical</block>
  <block id="bcc0e5a3e08cd34e80692195d056b06d" category="paragraph">フェイルオーバーグループ</block>
  <block id="a0b03d7d484126d483bd43f4e0a24360" category="paragraph">network interface failover-groups show -vserver vserver_name</block>
  <block id="b8b0fe3149c819fa21f2a86823ef8abc" category="paragraph">clusterwide 以外のフェイルオーバーグループの名前とポートを記録します。</block>
  <block id="e7462d2e6e123bc7d973071af507af96" category="paragraph">VLAN の設定</block>
  <block id="cd2907c0af6cc6fce6a7f22620877696" category="paragraph">「 network port vlan show -node node_name 」</block>
  <block id="e8b11d1241a22730e9b7b2847fce1105" category="paragraph">各ネットワークポートと VLAN ID のペアを記録します。</block>
  <block id="7313f6357960954d1290c9360512a59f" category="paragraph">インターフェイスグループの設定</block>
  <block id="7005721f9e503dcf5e499db791fb72eb" category="paragraph">「 network port ifgrp show -node node_name -instance 」のように指定します</block>
  <block id="61d37f34e493a0639bf5de53ed879037" category="paragraph">インターフェイスグループの名前と割り当てられているポートを記録します。</block>
  <block id="e4fba9d169fb5edb171e52cb71d98ff6" category="paragraph">ブロードキャストドメイン</block>
  <block id="4c9d53b2ac777e0e1e7588f7fa1bc00c" category="paragraph">IPspace 情報</block>
  <block id="f4e3ea14a86c053c771cffad27e184f6" category="paragraph">network ipspace show</block>
  <block id="2bba24b2641704be8251f30dd5d16c63" category="paragraph">新しいノードを設置したら、ネットブートを実行して、新しいノードが元のノードと同じバージョンの ONTAP を実行するようにする必要があります。ネットブートという用語は、リモート・サーバに保存された ONTAP イメージからブートすることを意味します。ネットブートの準備を行うときは、システムがアクセスできる Web サーバに、 ONTAP 9 ブート・イメージのコピーを配置する必要があります。</block>
  <block id="a6d12afddb580faaf04d9a073325f914" category="paragraph">* FAS2200 、 FAS2500 、 FAS3200 、 FAS6200 、 FAS/AFF8000 シリーズシステム *</block>
  <block id="724182e8d5c3b1bb2c819f46951a63be" category="paragraph">「 ONTAP_version_image.tgz 」ファイルの内容をターゲットディレクトリ「 tar -zxvf ONTAP_version_image.tgz 」に展開します</block>
  <block id="6495df55b307404a4ea0b4f64a7ae26a" category="paragraph">* 注： Windows で内容を展開する場合は、 7-Zip または WinRAR を使用してネットブート・イメージを展開します。</block>
  <block id="da18433407867d03800be7785b789106" category="paragraph">ディレクトリの一覧には、カーネル・ファイル「 netboot/ kernel 」を含むネットブート・フォルダが含まれている必要があります</block>
  <block id="339dbbf2e3919abe2381758c4b54e24c" category="paragraph">* その他すべてのシステム *</block>
  <block id="21694d70fa63b61a0a68e7a39cc96e19" category="paragraph">ディレクトリの一覧に次のファイルが表示されます。</block>
  <block id="00296cd0500c321060de54661554739a" category="paragraph">「 ONTAP_version_image.tgz 」</block>
  <block id="0caecd7c9276edc19599cb97a20eac4d" category="admonition">「 ONTAP_version_image.tgz 」ファイルの内容を抽出する必要はありません。</block>
  <block id="c9b87fd8826330d02eb0f7e03c49023c" category="summary">ボリュームを移動することでアップグレードの手順を完了するには、サービスプロセッサ \ （ sp\ ）を設定し、新しいライセンスをインストールし、 AutoSupport をセットアップする必要があります。また、ストレージまたはボリュームの暗号化を設定し、 FC ポートまたは NCA ポートを設定する必要がある場合もあります。</block>
  <block id="dcb35290a699d5cd152b36befe0de1e2" category="paragraph">ボリュームを移動することでアップグレードの手順を完了するには、サービスプロセッサ（ SP ）を設定し、新しいライセンスをインストールし、 AutoSupport をセットアップする必要があります。また、ストレージまたはボリュームの暗号化を設定し、 FC ポートまたは NCA ポートを設定する必要がある場合もあります。</block>
  <block id="d01decedde31fd5fc9aee34a816e3a84" category="paragraph">「 system node AutoSupport invoke -node node_name -type all -message 」 node_name が platform_old から platform_new にアップグレードされました</block>
  <block id="12ab5d791aa13f19bff0271520c8fa20" category="list-text">新しいノードに FC ポート（オンボードまたは FC アダプタ上）、オンボード CNA ポート、または CNA カードがある場合は、 FC ポートまたは CNA ポートを設定し、ストレージシステムプロンプトから次のコマンドを入力します。</block>
  <block id="533d1f26c154725c9c91afdd1b89aaa4" category="list-text">[ インストール済みシステム ] ページで、フォームに古いシステムのシリアル番号を入力し、 [* Go!] をクリックします</block>
  <block id="44e9f0c666ea054f51421040e37dee98" category="summary">元のノードからボリュームを移動したら、 SAN 以外のデータ LIF とクラスタ管理 LIF を元のノードから新しいノードに移行する必要があります。</block>
  <block id="7d0330f92f5b6340af08f88bf712e687" category="doc">SAN 以外のデータ LIF とクラスタ管理 LIF を新しいノードに移動します</block>
  <block id="87375b5769d5bc8e37ee39d964c25804" category="paragraph">VMware vStorage APIs for Array Integration （ VAAI ）でコピーオフロード処理に使用されている LIF を移行することはできません。</block>
  <block id="d079690ef04f3c3ab2f4e91b5f28e90b" category="list-text">クラスタ LIF がホストされているノードから、 SAN 以外のデータ LIF のホームポートを元のノードから新しいノードに変更します。</block>
  <block id="935107dfae7ac4e8d9197920bf55aa6d" category="paragraph">network interface modify -vserver vserver_name -lif lif_name -home-node new_node_name -home-port ｛ netport | ifgrp ｝ ’</block>
  <block id="fc522dd9612f86c0ea7c802be05de893" category="cell">移行する項目</block>
  <block id="1d073f20d5a5045e1aa3afacf792bf7c" category="cell">入力するコマンド</block>
  <block id="0a4bc8aea04444e0f2b960facbd686f4" category="paragraph">特定の LIF</block>
  <block id="115f35dfeb3630ff6188ad99e42fbf65" category="paragraph">「 network interface migrate -vserver vserver_name -lif lif_name -source -node source_node_name -destination -node dest_node_name -destination -port dest_port_name デスティネーション -port dest_port_name</block>
  <block id="fb465127c12aa152a3a6787bc1358040" category="paragraph">SAN 以外のすべてのデータ LIF とクラスタ管理 LIF</block>
  <block id="876f08ee829457fe6846a465734bf3aa" category="paragraph">「 network interface migrate-all -node node_name 」という形式で指定します</block>
  <block id="8d4031ef52b7ff00f19077a56df4c26e" category="paragraph">次のコマンドは、 SVM 「 vs0 」の「 datalif1 」という名前の LIF を「 node0b 」のポート「 e0d 」に移行します。</block>
  <block id="44807f621f3e0960500d7db205f07c8e" category="paragraph">次に、現在の（ローカル）ノードからすべてのデータ LIF とクラスタ管理 LIF を移行するコマンドを示します。</block>
  <block id="08784f3476a94c005c9ffbca34e62ce0" category="list-text">クラスタ管理 LIF のホームノードが元のいずれかのノードにあるかどうかを確認します。「 network interface show -lif cluster_mgmt -fields home-node</block>
  <block id="68c8a99bc9172a87f6301c02d55008f8" category="list-text">クラスタ管理 LIF のホームノードが元のいずれかのノードにある場合は、次の手順を実行します。</block>
  <block id="a7d2bd92477c7708999d89fc281f2cfb" category="list-text">クラスタ管理 LIF のホームノードを新しいノードの 1 つに切り替えます。</block>
  <block id="0f5b106232b99d6e1bf60ad478b86d61" category="paragraph">network interface modify -vserver cluster_name -lif cluster_mgmt -home-node new_node_name -home-port ｛ netport | ifgrp ｝ ’</block>
  <block id="038faacffbd9c39ca68e42dccdbe915f" category="list-text">クラスタ管理 LIF を新しいノードの 1 つに移行します。</block>
  <block id="34a6e43af56bb7aa0811ccb6d4459705" category="paragraph">「 network interface migrate -vserver vserver_name -lif cluster-mgmt-destination -node new_node_name -destination -port ｛ netport | ifgrp ｝ 」という形式で指定します</block>
  <block id="f6feea768bbf907f8918a30130dc7d38" category="summary">診断の実行後、コントローラモジュールのストレージとネットワークを再度ケーブル接続する必要があります。</block>
  <block id="ea122bb8fa70f0ea4b180db441cf1abd" category="doc">システムにケーブルを再接続</block>
  <block id="3c0c8efee11cd7a51266228208ce0a13" category="paragraph">診断の実行後、コントローラモジュールのストレージとネットワークを再度ケーブル接続する必要があります。</block>
  <block id="d0b16eb1b162f9fb3ef65f59b13902e7" category="list-text">システムにケーブルを再接続します。</block>
  <block id="4ba20dd7668682720b8eed837f2ea1a8" category="list-text">Config Advisor を使用して、ケーブル接続が正しいことを確認します。</block>
  <block id="eea0c04ed0e3acb7893e5192e1e8223d" category="list-text">ネットアップサポートサイトから Config Advisor をダウンロードしてインストールします。</block>
  <block id="0373910e51252c7b97dcbea9f4942604" category="inline-link">mysupport.netapp.com</block>
  <block id="31509d9d2ecd7357c2d79b6100170edf" category="paragraph"><block ref="31509d9d2ecd7357c2d79b6100170edf" category="inline-link-rx"></block></block>
  <block id="d1bb82954c2ac129418d4ca65eb100d5" category="list-text">ターゲット・システムの情報を入力し '[* データ収集 ] をクリックします</block>
  <block id="6361d7cb04e4c3f294b622b2cc3e87a0" category="list-text">[*Cabling *] タブをクリックし ' 出力を確認します</block>
  <block id="e322e9be3fd030740b4239a7bfbeed70" category="paragraph">すべてのディスクシェルフが表示されていること、およびすべてのディスクが出力に表示されていることを確認し、ケーブル接続に関する問題が見つかった場合は修正します。</block>
  <block id="2d46bc00fe1306e504816e238db01e8e" category="list-text">該当するタブをクリックして他のケーブル接続を確認し、 Config Advisor からの出力を確認します。</block>
  <block id="28b82aeb57b341ad6d877342a1ec8842" category="summary">node3 と node4 がアップグレード後にクラスタ内およびネットワークと相互に通信できるようにするには、物理ポートがクラスタやデータなどの目的の用途に応じた設定で正しく設定されていることを確認する必要があります。</block>
  <block id="acf19a04295768ba1ad8e06c738b60d8" category="paragraph">これらの手順は ONTAP 9.8 を実行しているシステムに適用されます。ONTAP 9.7 以前を実行している場合は、の手順を使用する必要があります <block ref="02cafea91ec73e57361f0e2559069996" category="inline-xref-macro-rx"></block>。</block>
  <block id="1e9be7aa46166eca7db0fc1c4e7a887b" category="paragraph">これらの手順は、 node3 と node4 で実行する必要があります。</block>
  <block id="7f0307060728fe46960f5901c576848b" category="admonition">次のコマンド例では、「 node1 」と呼んでいます。この段階で手順の交換用ノード「 node3 」と「 node4 」の名前は実際には「 node1 」と「 node2 」です。</block>
  <block id="49b95b3a1c8fd0bd354de5fc2ec2b96e" category="list-text">ONTAP 9.7 以前を実行しているシステムの場合は、 * stop * と入力します。の手順を使用する必要があります <block ref="02cafea91ec73e57361f0e2559069996" category="inline-xref-macro-rx"></block>。</block>
  <block id="4fb89fe4ba344b621e7afe206f6a8a4e" category="list-text">次の変更を行います。</block>
  <block id="757ee83d9d913287174eb13a32791a9a" category="list-text">node3 と node4 にまだログインしていない場合は、ブートしてログインします。</block>
  <block id="488704cff7055e0adb667e6434ad04b5" category="list-text">クラスタブロードキャストドメインに追加するポートを変更します。</block>
  <block id="6c8d313b9f71a389b310905d743ac361" category="paragraph">network port modify -node node_name -port port_name -mtu 9000 -ipspace Cluster `</block>
  <block id="1d79ea5a41dff0854a82efdbcdb2f72d" category="paragraph">次の例では 'node1' に 'Cluster' port e1b を追加します</block>
  <block id="44cfd5499c1c5e138a09d952646d13a0" category="paragraph">network port modify -node node1 -port e1b -ipspace Cluster -mtu 9000`</block>
  <block id="f198623bbbfb26015c225cb6096c73c3" category="paragraph">「 network interface migrate -vserver vserver_name -lif lif_name -source-node node1 -destination-node node1 -destination-port port_name 」の略</block>
  <block id="112d21318dcb3758e7fe3f932ebc36f5" category="paragraph">すべてのクラスタ LIF が移行され、クラスタ通信が確立されたら、クラスタがクォーラムに参加する必要があります。</block>
  <block id="f8c4e1930d2ec49e8149c2e48e43d636" category="list-text">クラスタ LIF のホームポートを変更します。</block>
  <block id="1e746213020788bee82da3b663d9a8c9" category="list-text">'Cluster' ブロードキャスト・ドメインから古いポートを削除します</block>
  <block id="988d353a5890265e706d9480b10346b6" category="paragraph">「 network port broadcast-domain remove-ports -ipspace Cluster -broadcast-domain Cluster -port node1 ： port 」のようになります</block>
  <block id="c59ee067f1e2a7f5c083dccd15039be2" category="list-text">node3 と node4 の健全性状態を表示します。</block>
  <block id="0a8d783192936e1058966919330dd365" category="paragraph">cluster show -node node1 -fields health`</block>
  <block id="2e2786810124b219ec88817aab856aed" category="list-text">すべてのポートの到達可能性ステータスを表示します。</block>
  <block id="339d7d0493d7df43c35e2a1d483c9cba" category="list-text">物理ポートと VLAN ポートの到達可能性を修復するには、各ポートで次のコマンドを 1 つずつ実行します。</block>
  <block id="797d1f20eca89a6bb30538beeb3f1339" category="paragraph">「機能修復 - node node_name -port port_name 」</block>
  <block id="8c40a77b34a5d773edb70494e7f10d84" category="paragraph">次のような警告が表示されます。「 y 」または「 n 」を確認し、必要に応じて入力します。</block>
  <block id="55e9c04f0dbe507ee727eac56cf6f595" category="list-text">ONTAP が修復を完了できるようにするには、最後のポートで「 reachability repair 」コマンドを実行してから約 1 分待ちます。</block>
  <block id="1708f24291e02d5444d943fd9a4a384c" category="list-text">クラスタのすべてのブロードキャストドメインを一覧表示します。</block>
  <block id="7b4ead482f6c92170f4c6bef96fe284b" category="list-text">到達可能性の修復が実行されると、 ONTAP は正しいブロードキャストドメインにポートを配置しようとします。ただし、ポートの到達可能性を特定できず、既存のブロードキャストドメインに対応していない場合は、 ONTAP によってそれらのポート用の新しいブロードキャストドメインが作成されます。すべてのメンバーポートがインターフェイスグループのメンバーポートになる場合は、必要に応じて、新しく作成したブロードキャストドメインを削除できます。ブロードキャストドメインを削除する</block>
  <block id="3e691ff973e406b5150b59cc09fa52d2" category="paragraph">'broadcast-domain delete -broadcast-domain broadcast_domain'</block>
  <block id="991ac44bc0f4b09cc233a9a79f867f55" category="list-text">インターフェイスグループの設定を確認し、必要に応じてメンバーポートを追加または削除します。インターフェイスグループポートにメンバーポートを追加します。</block>
  <block id="32b3250c7b168c19e1bf43908f61263b" category="paragraph">ifgrp add-port node_name -ifgrp ifgrp_name -port port_name - ポート port_name</block>
  <block id="6d260ed9cb63935d4eff6ef0cbc812bc" category="paragraph">インターフェイスグループポートからメンバーポートを削除します。</block>
  <block id="48fa48ac8516af170899b1c93d4735a5" category="paragraph">ifgrp remove-port -node node_name -ifgrp ifgrp_name -port port_name - ポート port_name</block>
  <block id="c99cfb03dbd1f20e150b31f5f9c7e297" category="list-text">必要に応じて VLAN ポートを削除し、再作成します。VLAN ポートを削除します。</block>
  <block id="f9f6195601c8767deb1901ff17a1c56b" category="paragraph">'vlan delete -node node_name -vlan-name vlan_port'</block>
  <block id="77fd7c219c7b6d2330906a24cbb05d97" category="paragraph">VLAN ポートを作成します。</block>
  <block id="3b63e3692e903dab9ed8411538298a7f" category="paragraph">'vlan create -node node_name -vlan-name vlan_port'</block>
  <block id="244220515525d7bbce7364431256c704" category="admonition">アップグレードするシステムのネットワーク構成の複雑さによっては、手順 5 、手順（ a ）から（ g ）を繰り返して、必要に応じてすべてのポートを正しく配置する必要があります。</block>
  <block id="ea655de7a1937b3e3b33b8a800b7cb49" category="list-text">取り外された VLAN を表示します。</block>
  <block id="472aa5d8ae9d1d5726cc523100b48335" category="list-text">取り外した VLAN を目的の宛先ポートに復元します。</block>
  <block id="cd7cf9673585176e1ac4e4ad6be4ce76" category="paragraph">「 dispaced-vlans restore -node node_name -port port_name -destination port destination_port 」という形式で指定します</block>
  <block id="0bb998238231c13a494cdbd3689c6d25" category="list-text">すべての取り外された VLAN が復元されたことを確認します。</block>
  <block id="47520b16706f00daa0983c140c0ad715" category="list-text">VLAN は、作成後約 1 分後に適切なブロードキャストドメインに自動的に配置されます。リストアした VLAN が適切なブロードキャストドメインに配置されていることを確認します。</block>
  <block id="5f8dfcaae8cea23af1ab8bab1c7c23ad" category="list-text">ホームポートの LIF が別のノードに移動されたか、すでに存在していない可能性がある LIF を表示します。</block>
  <block id="5f6447c81c91c2a68fcce7c90bfd253a" category="list-text">各 LIF のホームポートをリストアします。</block>
  <block id="1570c3884951eaf71e4f61aedf14d4d7" category="paragraph">「 dispaced-interface restore -vserver vserver_name -lif -name lif_name 」のようになります</block>
  <block id="25d37c99a98fed25bef30e1dc9dfbbc2" category="list-text">すべての LIF ホームポートがリストアされたことを確認します。</block>
  <block id="db548c254460f5243399043fe56f9785" category="list-text">正しいブロードキャストドメインに属するポート上ですべての LIF が意図的に稼働していることを確認します。</block>
  <block id="60b2815df1dfab3c2fb93c656ce873c2" category="list-text">管理上の理由で停止している LIF がないか確認します。</block>
  <block id="8e99d7adf8359f30524f68140147352a" category="paragraph">network interface show -vserver vserver_name -status-admin down</block>
  <block id="cb85064e4ff7f8868d9276fd36dc5500" category="list-text">動作上ダウンしている LIF がないか確認します。 `network interface show -vserver vserver_name -status -oper down``</block>
  <block id="c4610b7b449885970b4973ca609dd9dd" category="list-text">変更する必要がある LIF のホームポートを変更します。</block>
  <block id="7944e2738dd38d26f79904c254a07a8a" category="paragraph">「 network interface modify -vserver vserver_name -lif lif -home-port home_port 」のようになります</block>
  <block id="0f5308f3f4f3c464e7f648069ec71c80" category="admonition">iSCSI LIF の場合、ホームポートを変更するには LIF が管理上停止している必要があります。</block>
  <block id="7960433234d5162e1055d53630a352f5" category="list-text">ホームでない LIF をそれぞれのホームポートにリバートします。</block>
  <block id="50314d4f124e0153ee89d1686a2bc452" category="paragraph">「 network interface revert * 」の略</block>
  <block id="e5d91a7fa665e8fe97e2979e274c9883" category="paragraph">これで物理ポートのマッピングが完了しました。アップグレードを完了するには、に進みます <block ref="362f5b69398efdd58c711f175ac3611b" category="inline-xref-macro-rx"></block>。</block>
  <block id="029d23f0db183aa13dd611784328ec8c" category="admonition">ONTAP 9.8 では、自動ポート配置機能が導入され、ハードウェアのアップグレード手順が簡略化されています。</block>
  <block id="797fc5bb1530b93a4d119b95138dc85d" category="list-text">元のノードと新しいノードに互換性があり、サポートされている。</block>
  <block id="e047dcc5ff8dd437e2b3a8e513bf32f3" category="list-text">ONTAP 9.0 以降を実行しているノードのペアを、同じリリースを実行している新しいノードのペアにアップグレードする。</block>
  <block id="afcdd6a539b6392327d97fd8eb2cd065" category="list-text">元のノードの IP アドレス、ネットワークマスク、およびゲートウェイを新しいノードで再利用する。</block>
  <block id="4fd09292f1a407286c9372555595d59c" category="list-text">ストレージまたはボリュームを移動することで、コントローラハードウェアをアップグレードすることを計画している。</block>
  <block id="4836c86a753695232f6579b2d1e052e6" category="list-text">ストレージを移動してアップグレードする場合は、停止を伴う手順を実行する準備ができている。</block>
  <block id="8cdba56188d6642a771d0c327a72af57" category="paragraph">ボリュームの移動によるアップグレードは無停止で実行できます。</block>
  <block id="56089842bd614396cfba7cdf9bb6601f" category="list-text">サポート対象モデルのノードをディスクシェルフに変換し、新しいノードに接続することを計画している。</block>
  <block id="aff7a731f5229621d23c4c3e8021e92e" category="paragraph">個々のコンポーネントを交換する場合は、そのコンポーネントのフィールド交換可能ユニット（ FRU ）のリーフレットを参照してください。</block>
  <block id="3d9010fa119828bc81f438c75af15b63" category="paragraph">ストレージを移動してコントローラハードウェアをアップグレードする手順では、元のノードは node1 と node2 に、新しいノードは node3 と node4 と呼ばれます。説明されている手順では、 node1 は node3 に置き換えられ、 node2 は node4 に置き換えられます。</block>
  <block id="e338e550ae3c8accad87f4fd0e1f2380" category="image-alt">元のノードから新しいノード</block>
  <block id="f6fd8a1858185111bbea4bb0f44e07f6" category="paragraph">node1 、 node2 、 node3 、および node4 という用語は、元のノードと新しいノードを区別するためだけに使用されます。手順を使用するときは、元のノードと新しいノードの実際の名前を置き換える必要があります。ただし実際には、ノードの名前は変更されません。 node3 には node1 という名前が付けられ、 node4 にはコントローラハードウェアのアップグレード後に node2 という名前が付けられます。</block>
  <block id="13157ca9b210750790526c100cf951d7" category="paragraph"><block ref="13157ca9b210750790526c100cf951d7" category="inline-xref-macro-rx"></block></block>
  <block id="5b3de670b2de55fec257c6f89ab421bc" category="summary">ボリュームを移動してアップグレードする場合は、元のノードを準備し、新しいノードをクラスタに追加します。ボリュームを新しいノードに移動し、 LIF を設定して、クラスタから元のノードを削除します。ボリュームの移動によるアップグレード手順は無停止で実行できます。</block>
  <block id="876fbfc42051162ba587b0a0690449f5" category="image-alt">ボリュームを移動してコントローラハードウェアをアップグレードするためのワークフロー</block>
  <block id="dee313fe9eeb0dec5f1340bd0e818631" category="list-text"><block ref="dee313fe9eeb0dec5f1340bd0e818631" category="inline-xref-macro-rx"></block></block>
  <block id="c90fa15ea4f7f1e277e469d1d20e9188" category="list-text"><block ref="c90fa15ea4f7f1e277e469d1d20e9188" category="inline-xref-macro-rx"></block></block>
  <block id="5000633fe0b5f0aa09b151f9fed8c9f2" category="list-text"><block ref="5000633fe0b5f0aa09b151f9fed8c9f2" category="inline-xref-macro-rx"></block></block>
  <block id="8829820fd8a035233c013956f191d0e7" category="list-text"><block ref="8829820fd8a035233c013956f191d0e7" category="inline-xref-macro-rx"></block></block>
  <block id="cf9dafa4aad7081e3241e5bc4acb350f" category="inline-xref-macro">クラスタから元のノードを分離</block>
  <block id="ce218642d156a102e02a50d62a3bf028" category="list-text"><block ref="ce218642d156a102e02a50d62a3bf028" category="inline-xref-macro-rx"></block></block>
  <block id="58c6b3bbc2bbb34b0e96a9731bc9133c" category="list-text"><block ref="58c6b3bbc2bbb34b0e96a9731bc9133c" category="inline-xref-macro-rx"></block></block>
  <block id="bb0c96213a94c4304b5c450772cc0659" category="summary">ONTAP 9.8 以前、または ONTAP 9.7 以前でアップグレードを完了します。</block>
  <block id="f5b49dd631a7fa0c45fc2aea8bcfa384" category="paragraph">使用している ONTAP のバージョンに対応した手順を使用する必要があります。</block>
  <block id="c662b1f622b3cea011146cb95161016c" category="image-alt">ワークフローでアップグレード 98 または 97x が完了しました</block>
  <block id="e2be5a85f52a3a5f613d4aadf4e57e2f" category="list-text">ONTAP 9.8 でアップグレードを完了するには、に進みます <block ref="92fec23dfa4ff2645c1b7d56969a9e86" category="inline-xref-macro-rx"></block>。</block>
  <block id="188912cb793d3e0c2cd2b15edb10057a" category="list-text">ONTAP 9.7 以前でのアップグレードを完了するには、に進みます <block ref="a6085d08f51c0f7b45dd12344b481637" category="inline-xref-macro-rx"></block>。</block>
  <block id="51bea01f527b8a0a7714408789058c6b" category="summary">元のノードをシャットダウンして削除するときは、アップグレードについての AutoSupport メッセージを送信し、メールボックスを削除し、ノードの電源をオフにして、シャーシを取り外す必要があります。</block>
  <block id="0b5874c3f69c1393f6461a11d78dfa9c" category="list-text">node1 と node2 から AutoSupport メッセージを送信し、テクニカルサポートにアップグレードについて通知します。</block>
  <block id="e24fe2559739c9d0df4d61d338bf6f3a" category="paragraph">「 system node AutoSupport invoke -node node_name -type all -message 」 MAINT=2h platform_original から platform_new への node_name のアップグレード</block>
  <block id="3173ac672a7cdfb43fd506ad10daef11" category="list-text">ノード 1 とノード 2 でハイアベイラビリティまたはストレージフェイルオーバーを無効にします。</block>
  <block id="d875f9fec183da794cd6d6245ef00d1d" category="list-text">cluster ha modify -configured false</block>
  <block id="a0973bd66886f30eb8852a9c09e0fde9" category="list-text">「 storage failover modify -node node_name -enabled false 」という名前になります</block>
  <block id="bbe624d4e7e26aa8777e96c55a0041f3" category="paragraph">3 ノード以上のクラスタ</block>
  <block id="d74abfb55f46e179952b0f9d29ab5c58" category="list-text">ノードを停止します。</block>
  <block id="40c6d113c18e6ee3b0a3f18e79d64c69" category="paragraph">「 system node halt -node node_name 」</block>
  <block id="aa20c612e4b09a19b572b1a0ae5851b5" category="paragraph">リブート・プロセス中に定足数チェックを抑制するには '-ignore-quorum -warnings オプションを使用します</block>
  <block id="226315aae314cba9cb4dbd9f5cb26ca0" category="list-text">シリアルコンソールに接続していない場合は、接続します。ノードに LOADER プロンプトが表示されている必要があります。「 boot_ontap maint 」コマンドを使用して、メンテナンスモードに切り替えてブートします。</block>
  <block id="0baf8ff8af6c860472922730efb58928" category="paragraph">パートナーノードが停止しているか、パートナーノードでテイクオーバーが手動で無効になっていることの確認を求めるメッセージが表示されることがあります。続行するには 'yes' を入力します</block>
  <block id="ef081f0763db1e61273c7141947a007f" category="list-text">[[shutdown_node_A_1 step5] - メンテナンスモードでディスク所有権情報を通じて取得された、各元のノードのシステム ID を記録します。</block>
  <block id="7692418b27cf02fad97f4990a434658d" category="paragraph">システム ID は、元のノードのディスクを新しいノードに割り当てるときに必要となります。</block>
  <block id="6ad89260dedeef1270be905e718e6682" category="list-text">FC または CNA ポートを設定している場合は、設定をメンテナンスモードで表示します。</block>
  <block id="84886c64e807dd28c16702155c350818" category="paragraph">あとで参照できるように、コマンドの出力を記録しておく必要があります。</block>
  <block id="03553d2c07377e5ca57428fcbaa05159" category="list-text">メンテナンスモードで、 enode1 と node2 のメールボックスを破棄します： +</block>
  <block id="7f7deb46e1585e846e2fd054b1b2af5a" category="paragraph">「マイボックス破壊ローカル」</block>
  <block id="280e883e4dc586328892b13e3a6a5f9d" category="paragraph">次のようなメッセージがコンソールに表示されます。</block>
  <block id="36e3bf7b64851aa82d534b6219858a39" category="list-text">次のようなプロンプトが表示されたら 'y' と入力してメールボックスを削除します</block>
  <block id="e3c00d0f293a58871853ed866dc020a2" category="list-text">ノード 1 とノード 2 の電源をオフにし、電源からケーブルを抜きます。</block>
  <block id="250a399ca40ceae22935ccb2c65facb5" category="list-text">ノード 1 とノード 2 からすべてのケーブルにラベルを付けて取り外します。</block>
  <block id="ee6adde8f8004d94fe449a931d889e98" category="list-text">ノード 1 とノード 2 を含むシャーシを取り外します。</block>
  <block id="112d12268c7f4b3d566746465f42201d" category="summary">アップグレード後に node3 と node4 がクラスタ内およびネットワークと相互に通信できるようにするには、物理ポートがクラスタやデータなどの目的の用途に応じた設定で正しく設定されていることを確認する必要があります。</block>
  <block id="7e00c0ffb3f4f8002976d8431b57d3f0" category="paragraph">以下の手順は、 ONTAP 9.7 以前を実行するシステムに該当します。ONTAP 9.8 を実行している場合は、の手順を使用する必要があります <block ref="7523ee9f03a6fb590a93b67219c26179" category="inline-xref-macro-rx"></block>。</block>
  <block id="336c3aa98e52c1939e4ad18b02d8dc0c" category="paragraph">これらの手順は、 node3 と node4 に基づいて実行する必要があります。</block>
  <block id="348d1bc957542f25e2e2871b40cfd26f" category="list-text">ONTAP 9.8 を実行しているシステムの場合は、 * STOP * をクリックします。の手順を使用する必要があります <block ref="7523ee9f03a6fb590a93b67219c26179" category="inline-xref-macro-rx"></block>。</block>
  <block id="1a8639e4c8ee9656522efd4a2b9f58d0" category="list-text">node3 と node4 をクラスタプロンプトでブートしていない場合は、それらをブートします。</block>
  <block id="4a95a6730ba2310bfeb433fbf30d8aab" category="list-text">「 Cluster 」ブロードキャストドメインに正しいポートを追加します。</block>
  <block id="48965dff18dc1b1a8625e27956a0c97b" category="paragraph">次の例では 'Cluster ポート e1b を node1 に追加します</block>
  <block id="0e515e9baf5c9c8904811cad4ca86f4a" category="list-text">LIF を 1 つずつ新しいポートに移行します。</block>
  <block id="81a582aafef39a5c34471a2df478041e" category="paragraph">SAN データ LIF は、オフラインの場合にのみ移行できます。</block>
  <block id="acb31929dc066067c0841bfad48a777b" category="list-text">新しいコントローラの物理ポート・レイアウトに合わせて、 VLAN および「 ifgrp config 」を変更します。</block>
  <block id="159c3e7b0c178674563a1589bc1f32e3" category="list-text">node3 と node4 に存在しなくなった node1 ポートと node2 ポートを削除します（ advanced 権限レベル）。</block>
  <block id="3a0ccaa3e1aaf9b336c9c6ed7408a7de" category="paragraph">'network port delete -node node1 -port port_name '</block>
  <block id="82e992dffa9a18c86087b3d3c3489290" category="list-text">ポートを含むブロードキャストドメインを表示します。</block>
  <block id="df8657642711d6967d7e6acd72cc9e97" category="list-text">必要に応じて、ブロードキャストドメインにポートを追加またはドメインから削除します。</block>
  <block id="4b84dfb5a597238ada9ab2341f5ec5c9" category="list-text">必要に応じて LIF のホームポートを変更します。</block>
  <block id="2a86af9883b70079b249be537c9e3a70" category="paragraph">network interface modify -vserver vserver_name -lif lif_name – home-port port_name</block>
  <block id="c625e6bca32182b354cc2e2ecdbbf7ec" category="paragraph">次のコマンドは、フェイルオーバーポリシーを broadcast-domain-wide に設定し、フェイルオーバーグループ「 fg1 」のポートを「 node1 」の LIF 「 data1 」のフェイルオーバーターゲットとして使用します。</block>
  <block id="f0307b0ba42c934e076f749d65448b21" category="paragraph">「 network interface modify -vserver node1 -lif data1 -failover-policy broadcast-domain-wide -failover-group fg1 」というメッセージが表示されます</block>
  <block id="baec9716e3c721b8360a740bf6d657ec" category="list-text">ノード 3 とノード 4 のネットワークポートの属性を表示します。</block>
  <block id="286fbbe010dacee8143fe129c976e8b1" category="paragraph">network port show -node node1</block>
  <block id="2055508ed7949fd5d7f5059c98af8f4f" category="paragraph">これで物理ポートのマッピングが完了しました。アップグレードを完了するには、に進みます <block ref="f1628fd5567e155c657c0c615c63b8cf" category="inline-xref-macro-rx"></block>。</block>
  <block id="144a4e175b7dfbdd7e17107831244a5a" category="summary">ブートメディアの設定情報がコントローラのアップグレードの妨げにならないように、 node3 と node4 の設定をデフォルトの設定にリセットする必要があります。</block>
  <block id="9b5792ba6ab03ff6d98279b0ab5ed392" category="paragraph">node3 と node4 で次の手順を実行する必要があります。この手順は各ノードで並行して実行できます。</block>
  <block id="161c64322f806c6fa66fcfcc4f963ca2" category="list-text">ノードをブートメニューでブートします。</block>
  <block id="17137d920db60e7b0b7bfb0be3579b56" category="list-text">ブートメニューのプロンプトで「 wipeconfig 」と入力し、 Enter キーを押します。</block>
  <block id="b14047e1956c68f095842760b1beaea2" category="paragraph">次の画面はブートメニューのプロンプトを示しています。</block>
  <block id="d4041bfba261eda3180ae9fbf6285d95" category="list-text">次のようなプロンプトが表示されたら 'yes' と入力します</block>
  <block id="8b8e41e588d3f28837be58712aeec25a" category="paragraph">システムは wipeconfig 手順を起動し、再起動します。手順が完了すると、システムはブートメニューに戻ります。</block>
  <block id="450526ff97e4fb534c60e357bc3b52a0" category="list-text">ブートメニューから 8 を入力してノードをリブートし、 AUTOBOOT 中に * Ctrl+C * を押して、 LOADER プロンプトでノードを停止します。</block>
  <block id="be560856af220999f45b0e64a842465a" category="summary">ボリュームを新しいノードに移動したら、クラスタから元のノードを削除します。ノードを削除すると、ノードの設定が消去され、すべてのディスクが初期化されます。</block>
  <block id="f61d9690213fcb44fc551adab505eb85" category="paragraph">ボリュームを新しいノードに移動したら、クラスタから元のノードを削除します。ノードを削除すると、ノードの設定が消去され、すべてのディスクが初期化されます。</block>
  <block id="b942ce9023accae17c7f936a0227b40e" category="list-text">元のノードでハイアベイラビリティ構成を無効にします。「 storage failover modify -node original_node_name -enabled false</block>
  <block id="72992cc1c16f1dbbbcb7cc77a55977d9" category="list-text">advanced 権限レベルに切り替えます。</block>
  <block id="dc4a67b269dfaba9479198e3f11a2a68" category="list-text">イプシロンが設定されたノードを特定します。</block>
  <block id="9f964a34bab4b3112781e0b28258f5bb" category="paragraph">次の例では、「 node0 」に現在イプシロンが設定されています。</block>
  <block id="c66d0d8c1fe1605513edaaeec7a73d16" category="list-text">元のノードのいずれかにイプシロンが設定されている場合は、別のノードにイプシロンを移動します。</block>
  <block id="cca74cfa14d67666375d63c5d109d39c" category="list-text">元のノードからイプシロンを削除します。 +`cluster modify -node original_node_name -epsilon false</block>
  <block id="76b412290ecb092e2d154f8ccbb88a86" category="list-text">別のノードにイプシロンを割り当てます。 +`cluster modify -node new_node_name -epsilon true</block>
  <block id="91ab806eca55f1234d360a9bf96615a0" category="list-text">クラスタに残すノードから、元の各ノードをクラスタから削除します（ advanced 権限レベル）。</block>
  <block id="51a51858dd44ce1a914d46a2bd250c26" category="paragraph">cluster unjoin -node original_node_name</block>
  <block id="a38cfcfcdebdf9c05a1cd632c11918b8" category="paragraph">参加していないノードは自動的にリブートされ、ブートメニューで停止します。</block>
  <block id="7ab0d0bb58501cb25dab62cdcffddfb5" category="list-text">未参加ノードのブートメニューからオプション * （ 4 ） Clean configuration and initialize all disks * を選択して、ノードの設定を消去し、すべてのディスクを初期化します。</block>
  <block id="35c0226d4e8a9cad1a873c648504d626" category="list-text">両方のプロンプトで「 y 」と入力します。</block>
  <block id="7f1e916ec0aa6a4296149be58ba61a1b" category="list-text">クラスタにノードが 2 つしか残っていない場合は、 2 ノードクラスタのハイアベイラビリティを設定します。</block>
  <block id="c1f192f6d626bc5f27fc74b0848a1250" category="paragraph">cluster ha modify -configured true</block>
  <block id="3f1179e7186b307a8709f115c39b6447" category="summary">交換用ノードを稼働状態に戻す前に、 LIF がホームポートにあることを確認し、 AutoSupport が有効な場合は交換用ノードのシリアル番号を登録して、自動ギブバックをリセットする必要があります。</block>
  <block id="628b47858489e93aecb44f24bebc9752" category="doc">LIF を確認してシリアル番号を登録</block>
  <block id="462ec873925d8409f9ead354ff424e1b" category="list-text">論理インターフェイスがホームサーバとポートに報告されていることを確認します。「 network interface show -is-home false 」</block>
  <block id="d1197fe9a52f419575a145acccb941a2" category="paragraph">いずれかの LIF が false と表示されている場合は、ホームポートにリバートします。「 network interface revert *</block>
  <block id="bfe787834fd9e46156b1d62f2f5029f8" category="list-text">システムのシリアル番号をネットアップサポートに登録します。</block>
  <block id="bfa9de45095a3a90ebc55708a5ee6dd2" category="cell">状況</block>
  <block id="f5090af0ae9521298aea8ea3cd0e570f" category="paragraph">AutoSupport が有効になっている</block>
  <block id="494f202ae3a9c9ea2b452b55743f4c56" category="paragraph">AutoSupport メッセージを送信してシリアル番号を登録します。</block>
  <block id="f08f2281e0941651d12c9d63e01b3a7e" category="paragraph">AutoSupport が有効になっていません</block>
  <block id="8ba4d456a3db9d62662e21be8c9d6a65" category="paragraph">ネットアップサポートに連絡してシリアル番号を登録します。</block>
  <block id="073b364a34edc88074c1df13d44748dc" category="list-text">自動ギブバックを無効にした場合は、再度有効にします。「 storage failover modify -node local-auto-giveback true 」</block>
  <block id="cfc31108ced0d656186982f19a21b817" category="summary">新しいノードに内蔵ディスクまたはアドオンシェルフがシステムに接続されている場合は、コントローラのアップグレードが妨げられる可能性があります。node3 / node4 に付属した新しいディスクの所有権を削除するには、次の手順を実行します。</block>
  <block id="0384bfe1408e63aec8306b1fb36df994" category="paragraph">これらの手順は、 node3 と node4 に相互に実行します。ノードの順序は重要ではありません。</block>
  <block id="12750846be9d21d5385ed58a60cddf27" category="list-text">ノード 1 とノード 2 のシェルフは、この段階ではノード 3 とノード 4 に物理的に接続されていません。</block>
  <block id="db39a0ef5bc94a0b575d978a8f76229a" category="list-text">ディスク所有権を削除する必要があるのは、新しいコントローラが付属しているディスクとシェルフのみです。</block>
  <block id="9ec9f63f098d105f79f28fc374c9efa9" category="list-text">古いコントローラを内蔵ドライブプラットフォーム上の新しいコントローラと交換し、古いコントローラのシャーシとディスクを保持しながらハードウェアをアップグレードする場合、ディスクの所有権を削除する必要はありません。</block>
  <block id="eece111dbeb75d75a9174395ce77bfe2" category="paragraph">たとえば、古い A200 コントローラモジュールと新しい A220 コントローラモジュールを交換するだけで、古い A200 のシャーシとディスクをそのまま残して、システムを A200 から A220 にアップグレードする場合、次の手順を実行します。 新しい A220 コントローラモジュールのディスクの所有権は削除しません。このセクションの「新しいノードに接続されているディスクの所有権の削除」を参照してください。</block>
  <block id="70cb24dc68388db99857a34f097c9997" category="paragraph">コントローラのアップグレード中にディスク所有権を削除する方法について不明な点がある場合は、ネットアップテクニカルサポートにお問い合わせください。</block>
  <block id="2b9741a797759c9ecbbb675ca7437fbd" category="paragraph">内蔵ストレージを使用するシステムの一覧を次に示します。 FAS2220 、 FAS2240-2 、 FAS2240-4 、 FAS2520 、 FAS2552 、 FAS2554 、 FAS2620 、 FAS2650 、 FAS2720 、 FAS2750 、 AFF A200 、 AFF A220 、 AFF A700s 、 AFF A800 、 AFF A250 。</block>
  <block id="bd6c6f37524ad70ce38bbd0fcea22fe4" category="list-text">ノードの LOADER プロンプトで、コマンドを入力します。</block>
  <block id="1d16d3ddc3b796c6db7da6cbb645757e" category="list-text">ブートメニュープロンプトで '9a' と入力して 'Enter キーを押します</block>
  <block id="8b33e54d0bef1c80ef3462386d101928" category="paragraph">次の画面はブートメニューのプロンプトを示しています。</block>
  <block id="543ee8d410a9846b897a6a8491f4e3b9" category="list-text">次のようなプロンプトが表示されたら、「 y 」と入力してディスク所有権を削除します。</block>
  <block id="d9eb47ff217ad0469ac1858d577a0cfb" category="paragraph">ディスク所有権が削除されてブートメニューに戻ります。</block>
  <block id="cfd1f1b088da29d35da848a99036f2c2" category="list-text">ブート・メニューで '5' を入力してメンテナンス・モードに切り替えます</block>
  <block id="c256ea1e274adba11cfac708ac1ca615" category="list-text">保守モードで、「 Disk show 」コマンドを実行します。</block>
  <block id="07073a18c7281a79e3145d79b79ade85" category="paragraph">表示されるディスクはないはずです。</block>
  <block id="549400d83d5a33165c1b78f09eaa13cd" category="list-text">コマンド： ' を実行します</block>
  <block id="b42167fc8c56e26bc5bde99cbcb98104" category="paragraph">「ディスクショー - A` 」</block>
  <block id="5057bd67c1c2576016193c2f0d132b9e" category="paragraph">未割り当てのディスクがすべて表示されます。</block>
  <block id="dd6fe690111683fcc32f39f51ca30885" category="summary">クラスタが SAN 環境にある場合は、元のノードから SAN LIF を削除してから、元のノードをクラスタから削除する必要があります。</block>
  <block id="94a76ebba8e86706797afe6001140741" category="list-text">iSCSI イニシエータを使用している場合は、次の手順を実行します。</block>
  <block id="a5395c57c84d5445d3bc183d43971c84" category="list-text">元のノードの SVM に現在接続されているアクティブなイニシエータの一覧を古い LIF ごとに 1 回表示します。 +`iscsi connection show -vserver Vserver_name -lif old_lif`</block>
  <block id="9882b7407728c4a51f28a203651b752e" category="paragraph">次の例は、 SVM vs1 に接続されたアクティブなイニシエータを使用したコマンドの出力を示しています。</block>
  <block id="2a81dce4a4ecbdb4f7260dfa1838dac6" category="list-text">元のノードにログインしているイニシエータがある場合は、ホストコンピュータからセッションをログアウトします。</block>
  <block id="493c466bbc1a048411e1332636aef467" category="list-text">ポートセットリストを表示して、元のノードの iSCSI LIF または FC LIF がポートセットに属しているかどうかを確認します。</block>
  <block id="5972ec667e5c2e5cbe773b47e490a953" category="paragraph">次に、「 lun portset show 」コマンドの出力例を示します。</block>
  <block id="d69982078792402e28116b8f58d9d635" category="list-text">元のノードのいずれかの iSCSI または FC LIF がポートセットのメンバーである場合は、ポートセットから削除します。</block>
  <block id="7f4d8047dc2bcd79aa48d9d7fa9e6135" category="paragraph">`lun portset remove -vserver vserver_name -portset portset_name -port-name lif_name`</block>
  <block id="49804bf53ebb394c1046383af76de316" category="list-text">元のノードの LIF を削除します。</block>
  <block id="d468339ef0e97aa25dd22b526e2b4655" category="paragraph">network interface delete -vserver vserver_name -lif lif_name</block>
  <block id="b1a0d07fe29de61a8daf2f40dc030fa0" category="summary">2 ノードクラスタの場合はノード 1 で所有されている NAS データ LIF をノード 2 に、クラスタのノードが 3 つ以上の場合は 3 つ目のノードに移動します。</block>
  <block id="58822be5f616d4235e991fbe0296fada" category="doc">node1 で所有されている NAS データ LIF を node2 に移動します</block>
  <block id="d677e75ccf45beeb5b21f833de6355ae" category="paragraph">ノード 1 をノード 3 に交換する前に、 2 ノードクラスタの場合はノード 1 で所有されている NAS データ LIF をノード 2 に、クラスタに 3 つ以上のノードがある場合はノード 3 に移動する必要があります。使用する方法は、クラスタが NAS 用に設定されているか SAN 用に設定されているかによって異なります。</block>
  <block id="79fcafddf2ef06a07412a35db15035c1" category="list-text">次のコマンドを入力し、出力をキャプチャして、 node1 でホストされているすべての NAS データ LIF を表示します。</block>
  <block id="7c35bd185f1677a1529aeccf6330a868" category="paragraph">'network interface show -data-protocol nfs|cifs -curr-node node1</block>
  <block id="612e04a0c9957c7f74e9d436ac270501" category="paragraph">次の例のように、 node1 に NAS データ LIF が表示されます。</block>
  <block id="423e99aaa66fb1d5698571ceb7787197" category="cell">ノード 1 の状況</block>
  <block id="9f5a5f99675a7cf2f4c0f632bd521264" category="cell">VLAN のインターフェイスグループが設定されている</block>
  <block id="3fbab376baacaf9d09315af900da3f6a" category="cell">に進みます <block ref="73988682af36d698a9ae8b48b9a2737d" category="inline-xref-macro-rx"></block>。</block>
  <block id="e47ea6851b10e922828b9e5bacc36c92" category="cell">インターフェイスグループまたは VLAN が設定されていない</block>
  <block id="8a083d04d78f8fe76f58b24395ba2022" category="cell">手順 3 を省略して、に進みます <block ref="beab2fdc7da05fb5989bf509ea2daea5" category="inline-xref-macro-rx"></block>。</block>
  <block id="4712f9e61b86338570c118282bc641ed" category="paragraph">「 network port vlan show 」コマンドを使用して、 VLAN に接続されたネットワークポートに関する情報を表示し、「 network port ifgrp show 」コマンドを使用してポートインターフェイスグループに関する情報を表示します。</block>
  <block id="6528b79560f5ae1516e9968be210a07d" category="list-text">[man_move_lif_1_2_step3] 次の手順を実行して、 node1 のインターフェイスグループおよび VLAN でホストされている NAS データ LIF を移行します。</block>
  <block id="8bd077e3dce2f8f220ab19459980af51" category="list-text">[man_move_lif_1_2_substpa ] インターフェイスグループおよび node1 の VLAN でホストされている LIF を、インターフェイスグループと同じネットワーク上の LIF をホストできる node2 のポートに移行します。そのためには、各 LIF に対して次のコマンドを 1 回入力します。</block>
  <block id="532386a943dfd95190455b990ba6c18e" category="paragraph">network interface migrate -vserver Vserver_name -lif LIF_name -destination-node node2 – destination-port netport | ifgrp`</block>
  <block id="d280fa5d8e575828d8f638790f296c00" category="inline-xref">手順 a</block>
  <block id="1628d2e876b9a7ece7457b58b454f0f8" category="list-text">で、 LIF および VLAN のホームポートとホームノードを変更します <block ref="b068a71282806dafa110a592d499562a" category="inline-xref-macro-rx"></block> LIF をホストしているポートとノードに対して次のコマンドを 1 回入力します。</block>
  <block id="6ce648ecb031d76708d572641357072b" category="paragraph">network interface modify -vserver Vserver_name -lif LIF_name -home-node node2 -home-port netport | ifgrp`</block>
  <block id="086b32c6a9769e491af04f596b7bfca4" category="list-text">[man_move_lif_1_2_step4] 次のいずれかの操作を実行します</block>
  <block id="9b9179b830c575fb1e672a3bed56f248" category="cell">クラスタの設定対象</block>
  <block id="c07ee5debf5f3a3fef16c1ee5e8e4942" category="cell">NAS</block>
  <block id="9db3a11cc23080bb3486b4959df93f89" category="cell">- 完了しました <block ref="6be540ebb4740a88748088c797e28dfb" category="inline-xref-macro-rx"></block> から <block ref="8c4818d75222cc6bc9243f323ca4103f" category="inline-xref-macro-rx"></block>。</block>
  <block id="8fe56b720dacf5911cddd3cd028caa0d" category="cell">ノード上のすべての SAN LIF を無効にしてアップグレード用にダウンにします。「 network interface modify -vserver Vserver -name -lif lif_name -home-node node_name -home-port netport | ifgrp-status-admin down</block>
  <block id="edb9ff92dd35aa076c32a5b0487cf528" category="list-text">[[man_move_lif_1_2_step5] 各データ LIF に対して次のコマンドを 1 回入力して、 NAS データ LIF を node1 から node2 に移行します。</block>
  <block id="60ab3764be803e289fc1c9e1f4becf78" category="paragraph">network interface migrate -vserver Vserver -name -lif lif_name -destination -node node2 -destination-port data_port</block>
  <block id="011613a251d2244827057c36e226c438" category="list-text">[[step6] ] 次のコマンドを入力し、その出力を調べて、 LIF が正しいポートに移動されていること、およびいずれかのノードで次のコマンドを入力して LIF のステータスが up になっていることを確認します。</block>
  <block id="82ff09e405e4a0601bb2e3bf3447aa66" category="paragraph">network interface show -curr-node node2 -data-protocol nfs|cifs</block>
  <block id="0ca2ea33efb8a577e5384d4a18adcffd" category="list-text">[[step7] 次のコマンドを入力して、移行された LIF のホームノードを変更します。</block>
  <block id="af72da249f9d9dcc1ab3aa8e8e1bf3d5" category="paragraph">network interface modify -vserver Vserver -name -lif lif_name -home-node node2 -home-port port_name</block>
  <block id="54c8107ec5763757535759e84fcccba4" category="inline-xref">手順 9</block>
  <block id="24a01d225f607904f05ab3a7a5eff1be" category="list-text">[man_move_lif_1_2_step8] LIF がホームまたは現在のポートとして使用しているかどうかを確認しますポートがホームでない場合や現在のポートでない場合は、に進みます <block ref="ba7153f88da2aa27ea58156672491fe1" category="inline-xref-macro-rx"></block>：</block>
  <block id="20650cdc9d03cca94955f9aa1aebaa3e" category="paragraph">「 network interface show -home-node node2 -home-port port_name 」の略</block>
  <block id="68c591205ff442d6a2dfcdff815a70e8" category="paragraph">network interface show -curr-node node_name -curr-node node_name -curr-node port_name ポート port_name</block>
  <block id="2a1a5d0b34f7d2f4f340e16e5ed9d90a" category="list-text">[man_move_lif_1_2_step9] LIF がホームポートまたは現在のポートとしてポートを使用している場合は、別のポートを使用するように LIF を変更します。</block>
  <block id="1e12aee2135a80ed21e36af7e0f7a929" category="paragraph">「 network interface migrate -vserver Vserver -name -lif lif_name -destination – node node_name -destination -port port_name</block>
  <block id="5c1f3d117b4e7944d0f28ba574029f1b" category="paragraph">network interface modify -vserver Vserver_name -lif LIF_name -home-node node_name -home-port port_name</block>
  <block id="cdae0f8302333cbd9fe195bb2499a162" category="list-text">[[step10] ] 現在ホストしているデータ LIF をホストしているポートが新しいハードウェアに存在しないようにする場合は、すぐにブロードキャストドメインから削除します。</block>
  <block id="194bb2205f1a9c8bff448caa87b83499" category="paragraph">「 network port broadcast-domain remove-ports -ipspace default-broadcast-domain default-ports node: port 」というメッセージが表示されます</block>
  <block id="6632ea124419e4975a848a28ab279bcc" category="list-text">[[step11]] いずれかの LIF が停止している場合は、各 LIF に対して次のコマンドを 1 回入力して、 LIF の管理ステータスを「 up 」に設定します。</block>
  <block id="b430ff8ef5da076ed58bd889aff4151e" category="paragraph">network interface modify -vserver Vserver_name -lif LIF_name -home-node nodename -status-admin up です</block>
  <block id="ce270ee93c1ab9bf63347bb904931cc7" category="admonition">MetroCluster 構成では、ポートのブロードキャストドメインを変更できない場合があります。これは、ポートがデスティネーション Storage Virtual Machine （ SVM ）の LIF をホストしているポートに関連付けられているためです。デスティネーション LIF を適切なポートに再割り当てするには、リモートサイトの対応するソース SVM で次のコマンドを入力します。「 MetroCluster vserver resync -vserver Vserver_name</block>
  <block id="1f6fa329d299f0b4d14f73ea128a6b26" category="list-text">[[step12]] 次のコマンドを入力し、その出力を調べて、 node1 にデータ LIF が残っていないことを確認します。</block>
  <block id="05a146ab756c5e6ffc41a488060cdde2" category="paragraph">network interface show -curr-node node1 -role data</block>
  <block id="317d3198e2e906761f5856d7e9ba7889" category="list-text">[[step13]] インターフェイスグループまたは VLAN が設定されている場合は、次の手順を実行します。</block>
  <block id="1c16a793ae4cde12aba8cd19ca0ab9cf" category="paragraph">「 network port vlan delete -node nodename -port ifgrp_name -vlan-id vlan_ID` 」の形式で指定します</block>
  <block id="ee6b2de39fcb27b4025f1b287639db82" category="summary">ノード 4 をラックに設置し、ノード 2 の接続をノード 4 に転送し、ノード 4 をブートする必要があります。</block>
  <block id="a55f4c112389aef5c1095610759695f4" category="paragraph">ノード 4 をラックに設置し、ノード 2 の接続をノード 4 に転送し、ノード 4 をブートする必要があります。ノード 2 のスペア、ルートに属するディスク、および node3 でそれよりも前に再配置されなかったルート以外のアグリゲートも再割り当てする必要があります。</block>
  <block id="46bf31662c49b18f28ea137563eae20a" category="paragraph">node2 に同じバージョンの ONTAP 9 がインストールされていない場合は、 node4 をネットブートする必要があります。node4 のインストールが完了したら、 Web サーバに格納されている ONTAP 9 イメージからブートします。その後、の手順に従って、後続のシステムのブートに使用する正しいファイルをブートメディアデバイスにダウンロードできます <block ref="4815c2d091d790c1d3bab94177b38eaf" category="inline-link-macro-rx"></block></block>
  <block id="7450170c152f247fc2c9a5ece1d25571" category="paragraph">ただし、 node2 に同じバージョンまたはそれ以降のバージョンの Data ONTAP 9 がインストールされている場合は、ネットブートノード 4 を実行する必要はありません。</block>
  <block id="02a3537f6e96697842c87c410e1169a9" category="paragraph">* 重要 * ：</block>
  <block id="44a1dd334ad3ac6220ea0adf17519961" category="list-text">V シリーズシステム、またはストレージアレイに接続された FlexArray 仮想化ソフトウェアを使用するシステムをアップグレードする場合は、を完了する必要があります <block ref="a48f24f7fd083b3ec1c1fb7f5bee1e25" category="inline-xref-macro-rx"></block> から <block ref="23a128901edc6abd74721071977e73e9" category="inline-xref-macro-rx"></block>をクリックします <block ref="4b3dcb4f5ad67f2f001c91135169a837" category="inline-xref-macro-rx"></block> およびの手順に従ってください <block ref="488c6e462745f03d8c1dfb3ba61f7258" category="inline-link-macro-rx"></block> 必要に応じて、メンテナンスモードでコマンドを入力します。その後、このセクションに戻って手順を再開する必要があります <block ref="9b924d5c1ba14dd46bf7c40da5a15e7c" category="inline-xref-macro-rx"></block>。</block>
  <block id="78b1d5bad885b3107f106e5d1a9b18ec" category="list-text">ただし、ストレージディスクが搭載されたシステムをアップグレードする場合は、このセクション全体を完了してから、セクションに進んでください <block ref="488c6e462745f03d8c1dfb3ba61f7258" category="inline-link-macro-rx"></block>クラスタ・プロンプトでコマンドを入力します。</block>
  <block id="bdb96da2d8e74dfce89eef174e77991a" category="list-text">[[man_install4_Step1] 次のいずれかの操作を行います。</block>
  <block id="668ee630125cb736935532180dec5496" category="cell">ノード 4 の配置先</block>
  <block id="162e71035e50cc882a8bc6f9ff5b49f2" category="cell">ノード 3 とは別のシャーシ</block>
  <block id="fd915b6d9d7d8df5863bf1a398fcf38a" category="cell">に進みます <block ref="5da993404245519b124ccd5cfdc8f96e" category="inline-xref-macro-rx"></block>。</block>
  <block id="517089a54c66f01f0ee8cb8683dad1ec" category="cell">同じシャーシを node3 と一緒に配置する</block>
  <block id="9a56a499535dc46c81b504689b6f1584" category="cell">手順 2 と 3 を省略して、に進みます <block ref="d70dd93eaf2d4e4f4bee874c28b01d22" category="inline-xref-macro-rx"></block>。</block>
  <block id="409539264ec665ff1676a423db4f5983" category="list-text">[[man_install4_Step2]] ノード 4 に十分なラックスペースがあることを確認します。</block>
  <block id="b8b0bf4a502958083dc62a5c96442944" category="paragraph">node4 と node3 が別々のシャーシにある場合は、 node4 を node2 と同じ場所に配置できます。node3 と node4 が同じシャーシにある場合は、 node4 が適切なラックの場所にすでに存在しているとします。</block>
  <block id="b2a26edcdea9e0bc9d1a1f149aaa56af" category="list-text">[[man_install4_Step4]] ケーブルノード 4 を接続し、ノード 2 からノード 4 に接続を移動します。</block>
  <block id="9f13bb9f267a0b057f115598b95b4a04" category="paragraph">次の参考資料は、適切なケーブル接続を行う場合に役立ちます。に進みます <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックしてリンクします。</block>
  <block id="19c5c8c6d8397114c1994a6c3eb88f1f" category="paragraph">次の配線を行います。</block>
  <block id="6b3c36f97ba6ae6e5b790f8c06f76595" category="admonition">ほとんどのプラットフォームモデルには一意のインターコネクトカードモデルがあるため、インターコネクトカード / FC-VI カードまたはインターコネクト / FC-VI ケーブルの接続を node2 から node4 に移動する必要はありません。</block>
  <block id="7c6dcbfbd814e3914af912fc227236db" category="cell">ノード 4 の構成</block>
  <block id="0eac7849b27808b92dfd85fd93d5adf9" category="cell">ノード 3 と同じシャーシ</block>
  <block id="ebfef1d5b820c6361e45e99afc605aff" category="cell">に進みます <block ref="4b3dcb4f5ad67f2f001c91135169a837" category="inline-xref-macro-rx"></block>。</block>
  <block id="23651fb868295760fbf6e0040b0debb0" category="cell">に進みます <block ref="38932d9b2776291a7bec718b723ae495" category="inline-xref-macro-rx"></block>。</block>
  <block id="84857d961b292bb9faee31d20a2e4320" category="list-text">[man_install4_Step6]] ノード 4 の電源をオンにし 'Ctrl+C キーを押してブートを中断してブート環境プロンプトにアクセスします</block>
  <block id="2533698a45ba6cab05df3bd9337b544f" category="admonition">node4 をブートすると、次のメッセージが表示される場合があります。</block>
  <block id="6904f97422da010c9982167637cc6d56" category="list-text">[[man_install4_Step7] ステップ 6 で警告メッセージが表示された場合は、次の操作を実行します。</block>
  <block id="abb5e8621f032d746c9aa9b35f472595" category="list-text">NVRAM バッテリ低下以外の問題を示すコンソールメッセージがないか確認し、必要に応じて対処します。</block>
  <block id="8ece0169cd074b513037985b1656b1cd" category="list-text">バッテリの充電と起動プロセスが完了するまで待ちます。</block>
  <block id="30567eb6dc573926907b3bb63db7137a" category="admonition">* 警告 : 遅延を上書きしないでください。バッテリーの充電に失敗すると、データが失われる可能性があります。 *</block>
  <block id="945c73c9ea193c92dd8b512126669f13" category="list-text">[[man_install4_Step8] 次のいずれかの操作を行います。</block>
  <block id="fb89a7ef586904dc37e09f10f3f0ec64" category="inline-xref">手順 15</block>
  <block id="a2a7998a5450e891bb5464c1204815d8" category="cell">手順 9 から 14 を省略して、に進みます <block ref="5c1f19cc6cb716956fba505fb903a21f" category="inline-xref-macro-rx"></block>。</block>
  <block id="0366496afb0bd008f8fb19b74f53ec71" category="inline-link-macro">ノード 4 の FC ポートを設定します</block>
  <block id="7973536954a566dd7a59dc4fa1580481" category="list-text">node4 の FC または UTA / UTA2 設定のセクションに移動し、セクションの作業を行います <block ref="5dc4a26bdcd4279b0919835bab13d0db" category="inline-link-macro-rx"></block> および <block ref="b0f6547feb9924da912bf4fa3357e2fc" category="inline-link-macro-rx"></block>必要に応じて、システムに適用されます。</block>
  <block id="f01b0d07fd3bcdce42fd5cf6a8f46551" category="list-text">このセクションに戻って、から始めて残りの手順を実行します <block ref="9b924d5c1ba14dd46bf7c40da5a15e7c" category="inline-xref-macro-rx"></block>。</block>
  <block id="0ecbf7c74e381542280cb5ae382623c0" category="paragraph">* 重要 * ： V シリーズシステムで Data ONTAP をブートする前に、オンボード FC ポート、 UTA / UTA2 オンボードポート、 UTA / UTA2 カードを再設定する必要があります。</block>
  <block id="562a6369849944020611b8a9540b9c5c" category="list-text">[[man_install4_Step9] 新しいノードの FC イニシエータポートをスイッチゾーンに追加します。</block>
  <block id="a68de9b3c6fcb14f9c96b6e558ca71f8" category="list-text">ストレージアレイ上のアレイ LUN に関連付けられたホストまたはボリュームグループの World Wide Port Name （ WWPN ；ワールドワイドポート名）値を変更する。</block>
  <block id="1ad5461b16a79391d48cbca2383e0c9e" category="list-text">次のコマンドを入力し、出力を調べて、アレイ LUN が node4 に認識されていることを確認します。</block>
  <block id="6b3585cc5d8743bbae5204f3097641c4" category="paragraph">「 sysconfig -v 」を使用します</block>
  <block id="134f75a624b82855271656ebc0cf2d5f" category="paragraph">各 FC イニシエータポートで認識されるすべてのアレイ LUN が表示されます。アレイ LUN が表示されない場合は、このセクションの後半で node2 から node4 にディスクを再割り当てすることはできません。</block>
  <block id="05ecdb384acc604bb6388efe9a979597" category="list-text">Ctrl キーを押しながら C キーを押して ' ブート・メニューを表示し ' メンテナンス・モードを選択します</block>
  <block id="a2835e58397213dc9bedb9afe05d29d2" category="list-text">[[man_install4_Step15]] メンテナンスモードのプロンプトで、次のコマンドを入力します。</block>
  <block id="2f31b93de57cc6e92ee38aaed9b49765" category="paragraph">ブート環境プロンプトが表示されます。</block>
  <block id="9b30a77b62fcc76d557f789dd6ce3167" category="list-text">ONTAP のノード 4 を設定します。</block>
  <block id="70fa8a94fae594e32ef99991313ee137" category="list-text">この構成で FDE を使用する場合 '`setenv.storageencryption.support` 変数は 'true' に設定する必要がありますまた 'node2 構成のロード後にブートループが発生しないように 'kmip.init.maxwait` 変数は 'off' に設定する必要があります</block>
  <block id="c769624c49a19cf249ae2dabe50fafd5" category="list-text">ノード 4 にインストールされている ONTAP のバージョンが node2 にインストールされている ONTAP 9 と同じかそれ以降の場合は、次のコマンドを入力します。</block>
  <block id="648ad8a1b1818127b7b933420429d236" category="cell">アップグレードするシステム</block>
  <block id="bd525e59dc1c481092f22bdaeff4a9cb" category="cell">ノード 4 に正しい ONTAP バージョンまたは現在の バージョンがない</block>
  <block id="d4d1f4ca7806007366aa98184f062124" category="inline-xref">手順 20</block>
  <block id="642ae729bd75051692412fd6ebaf2526" category="cell">に進みます <block ref="1fde564298826640b3bacb4260e3eaea" category="inline-xref-macro-rx"></block>。</block>
  <block id="9b66895c756fece1df6c42e12763649b" category="cell">ノード 4 の ONTAP のバージョンが正しいか、最新のバージョンであることが必要です</block>
  <block id="7769822edfc550f3ba37429715882554" category="inline-xref">手順 25</block>
  <block id="107c908e64ebe1cdac15562994203122" category="cell">に進みます <block ref="aadd3e12a76cc16c765ef6c4ab9ed890" category="inline-xref-macro-rx"></block>。</block>
  <block id="76b2a354a862c0069407c912fb51ee50" category="list-text">[[man_install4_Step20]] 次のいずれかの操作を選択して、ネットブート接続を設定します。</block>
  <block id="819576ac2beda71a5f64c74e58833045" category="admonition">ネットブート接続として管理ポートおよび IP アドレスを使用する必要があります。アップグレードの実行中にデータ LIF の IP アドレスを使用しないでください。データ LIF が停止する可能性があります。</block>
  <block id="6b3f72590e2ba575765b270b75ec3265" category="cell">ブート環境プロンプトで次のコマンドを入力して、接続を手動で設定します。 ifconfig e0M -addr= filer_addr mask= netmask -gw= gateway dns_addr domain= dns_domain`filer_addr' は、ストレージシステムの IP アドレスです。「 netmask 」は、ストレージ・システムのネットワーク・マスクです。「 gateway 」はストレージ・システムのゲートウェイです。「 dns_addr 」は、ネットワーク上のネームサーバの IP アドレスです。「 dns_domain 」はドメインネームサービス（ DNS ）ドメイン名です。このオプションパラメータを使用する場合は、ネットブートサーバの URL に完全修飾ドメイン名を指定する必要はなく、サーバのホスト名だけを指定します。* 注 * ：インターフェイスによっては、他のパラメータが必要になる場合があります。ファームウェア・プロンプトで「 help ifconfig 」と入力すると、詳細が表示されます。</block>
  <block id="a1e9c2458084c8aed432506005e0789e" category="cell">netboot\http://web_server_ip/path_to_webaccessible_directory/netboot/kernel`</block>
  <block id="7e0c898eb7a2157f9a4fe767ff353ea1" category="cell">netboot\http://web_server_ip/path_to_webaccessible_directory/ontap_version_image.tgz`</block>
  <block id="feed6e71880a4cdb6f484b72b59ad1c7" category="paragraph">「 path_to_the_web-accessible_directory 」は、「 ONTAP_version_image.tgz 」をダウンロードした場所を指します <block ref="d7ca8bd1bdacba48998a89c59527e756" category="inline-link-macro-rx"></block> の項で、 netboot_ の準備を参照してください。</block>
  <block id="309791cba48d347af2b367032b3dd97b" category="list-text">起動メニューから 'option(7) Install new software first ’を選択します</block>
  <block id="0b2229e3a518ca5320ae9e1f22775ad9" category="paragraph">このメニューオプションを選択すると、新しい Data ONTAP イメージがブートデバイスにダウンロードおよびインストールされます。</block>
  <block id="c0c1ca8a9ddeae72e1e2be38243a2522" category="paragraph">次のメッセージは無視してください。</block>
  <block id="af7a0d97078a38e1bd7d89c61066724a" category="paragraph">` この手順は HA ペアの無停止アップグレードではサポートされていません</block>
  <block id="52e732ba64db04aee6e7ad74ff701940" category="paragraph">コントローラのアップグレードではなく、 Data ONTAP による環境の無停止アップグレードも記録されています。</block>
  <block id="3649c3b28305249c1b3207c6087eaedc" category="list-text">[man_install4_step23]] 手順を続行するかどうかを確認するメッセージが表示されたら、 y を入力します。パッケージの入力を求められたら、次の URL を入力します。</block>
  <block id="ad4f522a516d9a5742a3b1abdd5d7e77" category="paragraph">http://web_server_ip/path_to_web-accessible_directory/ontap_version_image.tgz` にアクセスします</block>
  <block id="3678fe02acf5ec3ff8f4fbebc3fd7a4d" category="list-text">次の手順を実行します。</block>
  <block id="037fcad07615e2da823be3a48a35cfb8" category="paragraph">コントローラモジュールはリブートしますが、ブートメニューで停止します。これは、ブートデバイスが再フォーマットされたことにより、構成データのリストアが必要なためです。</block>
  <block id="212239c0a7a5196ffbd8cc3895cfce05" category="list-text">[man_install4_Step25]] ブートメニューからメンテナンスモード「 5 」を選択し ' ブートを続行するように求められたら 'y' を入力します</block>
  <block id="88dd4b794782fce5edb7683e13199311" category="list-text">[[man_install4_Step26]] 続行する前に、に進みます <block ref="488c6e462745f03d8c1dfb3ba61f7258" category="inline-link-macro-rx"></block> ノードの FC ポートまたは UTA / UTA2 ポートに必要な変更を加えるため。これらのセクションで推奨される変更を行ってからノードをリブートし、メンテナンスモードに切り替えます。</block>
  <block id="7e3544f15733cd05bc2830419b4be7f9" category="list-text">次のコマンドを入力し、出力を調べて node4 のシステム ID を特定します。</block>
  <block id="4e974a66c77c6d900d32abc8f0338440" category="paragraph">次の例に示すように、ノードのシステム ID 、およびそのディスクに関する情報が表示されます。</block>
  <block id="fae986fa29654ebe6966932d05eb132d" category="inline-link-macro">ルート以外のアグリゲートを node2 から node3 に再配置します。</block>
  <block id="6ebd270373edc34882879e2c2ed9e67b" category="list-text">ノード 2 のスペア、ルートに属するディスク、および前のセクションでノード 3 に再配置されなかったルート以外のアグリゲートを再割り当てします <block ref="2eb3ddacc3cdbca929068de80db9b0b7" category="inline-link-macro-rx"></block>：</block>
  <block id="f6083059f6516202ed7ac1092bed861b" category="cell">ディスクタイプ</block>
  <block id="65f83791dfc3308f8c98325d44977d10" category="cell">実行するコマンド</block>
  <block id="8e209d660098d73b07642a1950888f1d" category="cell">共有ディスクの場合</block>
  <block id="a3432db44a757895f3eb3a1c9f4d3cea" category="cell">「ディスク再割り当て -s `node2 _sysid -d node4 sysid -p node3 sysid 」</block>
  <block id="567c7db5eb132ed0419b894d763f1872" category="cell">共有なし</block>
  <block id="cb3bccddce7862ce1908af49d7e9df63" category="cell">「ディスクの再割り当て」 -s 「 node2 」 sysid -d node4 sysid 」と入力します</block>
  <block id="b95982609bcaa66a9948629f87fe8589" category="inline-link-macro">手順 10</block>
  <block id="7f9877f92749af42ef730feeda0dba70" category="paragraph">'node2 _sysid' 値には ' で取得した情報を使用します <block ref="09a261426dbc4b06f375c3dc720b5b79" category="inline-link-macro-rx"></block> をクリックします。'node4 sysid' の場合は ' で取得した情報を使用します <block ref="9c7125eb7b33f2cb03297a560d0660b0" category="inline-xref-macro-rx"></block>。</block>
  <block id="2e55dc5dee1972467c8f86adee9b26a8" category="admonition">-p オプションは ' 共有ディスクが存在する場合にのみ保守モードで必要です</block>
  <block id="423897eae7d5975e08caad3349a2ff49" category="paragraph">「 disk reassign 」コマンドを使用すると、「 node2 」が現在の所有者であるディスクだけが再割り当てされます。</block>
  <block id="6a76a1a5611a7cd78d175bb62eecc5c0" category="paragraph">次のメッセージが表示されます。</block>
  <block id="685b8dfe5883c0cc4f183236c52e6cdd" category="paragraph">ディスクの再割り当てを中止するかどうかを尋ねられたら 'n' を入力します</block>
  <block id="c8baecc7560f46020b0d73d658566eab" category="paragraph">ディスクの再割り当てを中止するように求められた場合は、次の手順に従って一連のプロンプトを回答に出力する必要があります。</block>
  <block id="906012ab50dee220a65fb1458eb58128" category="list-text">ディスク所有権の更新を許可するには 'y' を入力します</block>
  <block id="0bcba60a38db3b0f12b08821c6ae56fc" category="list-text">外付けディスクが搭載されたシステムから、内蔵ディスクと外付けディスクをサポートするシステム（ A800 システムなど）にアップグレードする場合は、 node4 を root として設定し、 node2 のルートアグリゲートからブートするようにします。</block>
  <block id="81d274af1a54983c64b259dfc78b1c9f" category="admonition">* 警告：次の手順を記載された順序で実行する必要があります。正しく実行しないと、原因が停止したり、データが失われたりする可能性があります。 *</block>
  <block id="1ca7ffcdba47b0e1e7fe67ed3e918c17" category="list-text">node2 アグリゲートの全体的なステータスを確認します。</block>
  <block id="9cf332fc3e49cdbc8c4e5181c30ae161" category="list-text">次のコマンドを入力し、出力を確認して、コントローラとシャーシが「 ha 」として設定されていることを確認します。</block>
  <block id="af2a502808ef81f73370e9e64784659d" category="paragraph">システムは、 HA ペア構成かスタンドアロン構成かを PROM に記録します。状態は、スタンドアロンシステムまたは HA ペア内のすべてのコンポーネントで同じである必要があります。</block>
  <block id="92435116502eec5121875eb86e01c666" category="paragraph">コントローラとシャーシが「 ha 」として設定されていない場合は、次のコマンドを使用して設定を修正します。</block>
  <block id="2e89fd69efdc517bb6463b3444e009df" category="paragraph">「 ha-config modify chassis ha 」を参照してください。</block>
  <block id="efa973aed3146abf01226e85a9e5f816" category="paragraph">MetroCluster 構成を使用している場合は、次のコマンドを使用して設定を修正します。</block>
  <block id="27dae2ee8e632216c89579f651774f45" category="paragraph">「 ha-config modify chassis mcc 」</block>
  <block id="79d038b849b0e37c67ee77c0b56d066f" category="list-text">node4 にあるメールボックスを破棄します。</block>
  <block id="953d8f613cc775b0d7904f99aec7a052" category="list-text">ノード 3 で、システムの日付、時刻、およびタイムゾーンを確認します。</block>
  <block id="e3f03a007dc36d2b8067017bfe222275" category="list-text">ノード 4 で、ブート環境プロンプトの日付を確認します。</block>
  <block id="02bb70865b20c57eb319b73c84b5fd7f" category="list-text">ノード 4 で、ブート環境プロンプトの時刻を確認します。</block>
  <block id="6f690bd73c9853fafd7c1e4456ccea21" category="inline-xref">手順 26</block>
  <block id="c73ed66a3414025099d74b00d7536036" category="list-text">パートナーシステム ID が、に示すように正しく設定されていることを確認します <block ref="6f4b83e10b4758eab71105c01c130b34" category="inline-xref-macro-rx"></block> オプション（ Option ）の下。</block>
  <block id="eb91daa92a7cd6e3d0f28a92df381e46" category="paragraph">'setenv partner-sysid node3 _sysid</block>
  <block id="0f463f9540d67b2794aa78893f83b8aa" category="list-text">ブート環境プロンプトでブートメニューを入力します。</block>
  <block id="ca0b24352c36c0cc73393a18e38ead22" category="list-text">ブート・メニューで ' プロンプトに「 6 」と入力して 'Option *(6) Update flash from backup config * を選択します</block>
  <block id="23fc33b520f7242c5f2fb610689e9e8c" category="list-text">プロンプトで「 y 」と入力します。</block>
  <block id="d9f991b0b3aa3c03080efb5d84a35c57" category="paragraph">ブートが正常に続行され、システム ID の不一致を確認するように求められます。</block>
  <block id="88d91937c0736919ae3483a3cb1e1f7e" category="admonition">不一致の警告が表示される前にシステムが 2 回リブートする可能性があります。</block>
  <block id="c3a51f505b0a44650db3707558ddeefc" category="list-text">不一致を確認します。正常にブートする前に、ノードの 1 回のリブートが完了することがあります。</block>
  <block id="cc7dd78f409b3f942015e8a65f2c11e8" category="list-text">ノード 4 にログインします。</block>
  <block id="530a7a6682d1262288d095a4aa2ae42b" category="summary">ARL のアップグレードワークフロー</block>
  <block id="1952abc535fabeeeed9743b9b39b5e18" category="paragraph">次の図は、手順の各ステージを示しています。濃い薄いグレーの矢印はアグリゲートの再配置と LIF の移動を表し、薄い黒い矢印は元のノードの削除を表します。元のノードは小規模なコントローライメージで表しており、大規模なコントローライメージが新しいノードを表しています。</block>
  <block id="5191d5caf73991c5e6249017d138d1c4" category="inline-image-macro">ARL 手順の各ステージを示す図</block>
  <block id="259768fa3d43366eeb4e13b056365613" category="paragraph"><block ref="259768fa3d43366eeb4e13b056365613" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7b943baeaf962c0831949aad447620ea" category="paragraph">次の表に、各フェーズで実行するタスクの概要と、そのフェーズの最後で実行したアグリゲートの所有権の状態を示します。詳細な手順については、手順の後半で説明します。</block>
  <block id="b72f5020c23dbd9ffc6d4450f84ec5f3" category="cell">ステージ 1 ：アップグレードの準備</block>
  <block id="7b1dd5a3f8b0bae20a552b311225dba7" category="list-text">コントローラの内蔵ディスクドライブにアグリゲートがあるかどうかを確認します。</block>
  <block id="7900c602172467ea3a308b146a26fd96" category="paragraph">この手順は、内蔵ディスクドライブを搭載したコントローラからアップグレードする場合にのみ必要です。</block>
  <block id="cb803e52742ed5e4978708eccc6cb93b" category="list-text">ノードをアップグレードする準備をします</block>
  <block id="4332ef4b7343cbc2aa782fcc72f7400b" category="list-text">ストレージ暗号化のためにディスクのキーを変更して</block>
  <block id="fe99905f8dac011506ff45806fa2b7f6" category="paragraph">このタスクを実行する必要があるのは、自己暗号化ドライブが搭載されたシステムからアップグレードする場合のみです。</block>
  <block id="9b89f1152071bd0dce572ec16a5f194a" category="list-text">クラスタの SnapMirror 関係の状態を確認し、クラスタ間のすべての関係を休止します。</block>
  <block id="83195eca433f1852d7fdec8d69917eef" category="list-text">ネットブートを準備</block>
  <block id="c315bb47606529cfc4eee6fee9473961" category="cell">ステージ 2 ： node1 を廃棄する</block>
  <block id="f1e761bb0f9664397f31df3ed161b2f4" category="list-text">node1 で所有されている SAN 以外のデータ LIFS を node2 に移動します。</block>
  <block id="b40e8e8044c2bbad167e86406f314b1f" category="list-text">ノード 1 の情報を記録します</block>
  <block id="131c1215f55f2db7a9cee6671cd5a15c" category="list-text">node1 は、 node1 アグリゲートのホーム所有者です。</block>
  <block id="34c13ce480fd28c643a03477e436ea69" category="cell">ステージ 3 ：ノード 3 をインストールしてブートします</block>
  <block id="9831ac08d1511b2493ac2b60bb2c8719" category="list-text">ノード 3 で UTA / UTA2 設定を設定します。</block>
  <block id="0ecfaa523b3b44d06f14bc6b97a490f1" category="list-text">ノード 3 のインストールを確認します</block>
  <block id="d6836a12958b1cab97098bd6a3acd9e1" category="list-text">ノード 1 が所有する SAN 以外のデータ LIF を node2 から node3 に移動し、 node3 の SNA LIF を確認します。</block>
  <block id="eb20f04ed8fd91952c34e1e4620e246e" category="list-text">node2 によって所有されている SAN 以外のデータ LIF を node3 に移動します。</block>
  <block id="6bcc99fe1628db9ec14216040c21696b" category="list-text">node2 は node2 アグリゲートのホーム所有者ですが、現在の所有者ではありません。</block>
  <block id="96823812e251fed8294451535c6f95b0" category="list-text">node3 は、 node1 にもともと属していたアグリゲートのホーム所有者および現在の所有者です。</block>
  <block id="118095c680df28bffff023170d56342d" category="list-text">node2 には、ホームの所有者とホームの所有者ではなく、 node2 に属するアグリゲートの現在の所有者が指定されます。</block>
  <block id="b38e1811a17ec144866f464ed239210b" category="cell">ステージ 4 ： node2 を廃棄する</block>
  <block id="0c678e7eb165a44e0fa670534f43a3ba" category="list-text">ノード 2 の情報を記録します。</block>
  <block id="fade32ca4e9efe2a0861758d027705e9" category="paragraph">アグリゲートの所有権は変更されません。</block>
  <block id="6c02f76a0894d55a982cb5450ab57f22" category="cell">ステージ 5 ：ノード 4 をインストールしてブートします</block>
  <block id="f1319a732e9819f3889538b72ca2ff56" category="list-text">ノード 4 で UTA / UTA2 設定を設定します。</block>
  <block id="449b1acde3df0e5a046e1afce6b44aae" category="list-text">node2 によって所有されている SAN 以外のデータ LIF を node3 から node4 に移動し、 node4 にある SNA LIF を確認します。</block>
  <block id="0a4083f32412bbedecaf3bd562092328" category="list-text">ノード 2 のルート以外のアグリゲートをノード 3 からノード 4 に再配置します。</block>
  <block id="f76e06dd184bc4ee38bfcca355bec6fd" category="cell">ステージ 6 ：アップグレードを完了する</block>
  <block id="02b8f1a43f7d2b0d1db8d82eef35a726" category="list-text">新しいコントローラが正しくセットアップされていることを確認します。</block>
  <block id="1f217a2fe2189d3272829abcb2364054" category="list-text">新しいノードで Storage Encryption をセットアップします。</block>
  <block id="c255a487d24bfde2537fdfb9e8b930d9" category="paragraph">このタスクを実行する必要があるのは、自己暗号化ドライブを搭載したシステムにアップグレードする場合のみです。</block>
  <block id="f43f15dbbdb3cd5d6676ac4622a50449" category="list-text">NetApp SnapMirror 関係を再開</block>
  <block id="b0cf9590917d959debfd8231d8efa2c7" category="paragraph">* 注： * Storage Virtual Machine （ SVM ）ディザスタリカバリの更新は、割り当てられたスケジュールどおりに中断されません。</block>
  <block id="22cbc441beb824687fff4489b675b3e7" category="paragraph">ノード 2 を撤去するには、ノード 2 を適切にシャットダウンし、ラックまたはシャーシから取り外す必要があります。クラスタが SAN 環境にある場合は、 SAN LIF も削除する必要があります。</block>
  <block id="ac9d5901ac51a7a9e98d7f8c6c0740f1" category="cell">クラスタの種類</block>
  <block id="318bbb9db21483c1e16d2e2dbe7f1651" category="cell">2 ノードクラスタ</block>
  <block id="34d4031d3d37d8d9b80a5f9b450de553" category="cell">に進みます <block ref="1cb6f5a9f7eef3599c4443318664abfe" category="inline-xref-macro-rx"></block>。</block>
  <block id="5e674106f615dae34230d16b22371cb8" category="cell">に進みます <block ref="0bbd9dc76625f42ec6de8739e60cb44f" category="inline-xref-macro-rx"></block>。</block>
  <block id="b2af6e76142ed067163cd5edf51978b0" category="list-text">[[man_リタイヤ _2_Step2] 両方のノードで次のコマンドを入力して、 advanced 権限レベルにアクセスします。</block>
  <block id="1626aa8f9ba900c076affceeaaad8930" category="list-text">次のコマンドを入力し、出力を確認して、クラスタ HA が無効になっていることを確認します。</block>
  <block id="485e8bd9380904feaa09d87fa46616ff" category="paragraph">cluster ha show</block>
  <block id="35df860936da8d9b2d5477ee7413fdee" category="list-text">node2 にイプシロンが設定されているかどうかを確認するには、次のコマンドを入力して出力を調べます。</block>
  <block id="7d25068d39532ede875f6fae939c62aa" category="paragraph">次の例では、 node2 にイプシロンが設定されています。</block>
  <block id="7b8424ae8ebc04e308b8d348d8d07edf" category="list-text">node2 にイプシロンが設定されている場合は、ノードにイプシロンを「 false 」として設定して、ノードを node3 に転送できるようにします。</block>
  <block id="932227bf3dc2956702a635e8f4cd18a1" category="paragraph">cluster modify -node &lt;node2 &gt; -epsilon false</block>
  <block id="9b3ca02a7473e1db3c0c57693a01aabe" category="list-text">node3 の epsilon true とマークを付けて、イプシロンを node3 に移動します。</block>
  <block id="4c3c404ced021bba5536c6b573cad272" category="paragraph">cluster modify -node &lt;node3 &gt; -epsilon true</block>
  <block id="0bd1c8991d4969dac07a0c2f2dde50b5" category="paragraph">network options switchless-cluster show</block>
  <block id="b7a9c811aab8e6da8894f06c47eec709" category="list-text">[[man_detup_2_Step9] 管理者レベルに戻ります。</block>
  <block id="bac8149e88ecf5bf2c4de5cf6b1ac1b2" category="list-text">いずれかのコントローラで次のコマンドを入力して、 node2 を停止します。「 system node halt -node node2 」</block>
  <block id="befba560e8eaef2f66cac914b95edc61" category="list-text">ノード 2 が完全にシャットダウンしたら、シャーシまたはラックからノードを取り外します。アップグレードの完了後に、 node2 の運用を停止できます。を参照してください <block ref="6e48b929ca0767f00c15eeb6d7e78755" category="inline-link-macro-rx"></block>。</block>
  <block id="604a0586a0e63a1c0e20f96866cde2d7" category="summary">ステージ 1 ：アップグレードの準備</block>
  <block id="ca191ad711e6258abea1dad8416a1dd5" category="doc">ステージ 1 ：アップグレードの準備</block>
  <block id="1a378d96df8037e2d0440e83a971d50b" category="inline-link-macro">コントローラの内蔵ディスクドライブにアグリゲートがあるかどうかを確認します</block>
  <block id="cfcebfe478d3e9036c8e1fcabaf35bc2" category="list-text"><block ref="cfcebfe478d3e9036c8e1fcabaf35bc2" category="inline-link-macro-rx"></block></block>
  <block id="49eb2b56a9faaf3a2fdf34442f534221" category="list-text"><block ref="49eb2b56a9faaf3a2fdf34442f534221" category="inline-link-macro-rx"></block></block>
  <block id="6c578312e5e7bc9eb1a3d443b1c52f2a" category="list-text"><block ref="6c578312e5e7bc9eb1a3d443b1c52f2a" category="inline-link-macro-rx"></block></block>
  <block id="b907c9020348bd4847d9c48ddd2d737f" category="inline-link-macro">オンボードキーマネージャを使用して認証を管理</block>
  <block id="c950fa333894cbc66c157fc73dec920c" category="list-text"><block ref="c950fa333894cbc66c157fc73dec920c" category="inline-link-macro-rx"></block></block>
  <block id="5bfe738b0f48a11f74df0b195987ecb0" category="inline-link-macro">SnapMirror 関係を休止します</block>
  <block id="511de0365473e7cc1fc52adf09368d53" category="list-text"><block ref="511de0365473e7cc1fc52adf09368d53" category="inline-link-macro-rx"></block></block>
  <block id="c25935ce11d9d76fca75e6795d090984" category="list-text">MetroCluster 9.5 以前を実行している Fabric ONTAP 4 ノードおよび 8 ノード構成を使用するシステムがある。</block>
  <block id="d3706af871b05283f2f32296d2d599f7" category="summary">元のノードをアップグレードするには、特定の情報を収集する必要があります。</block>
  <block id="0b3c02891d31cade1d32eec570356892" category="doc">ワークシート：コントローラのアップグレード前後に収集する情報</block>
  <block id="c71d4a6ce9505934716badc679c9844b" category="paragraph">元のノードをアップグレードするには、特定の情報を収集する必要があります。ノード ID 、ポートと LIF の詳細、ライセンスキー、 IP アドレスが含まれます。</block>
  <block id="af9089739f1912cd99f3158a51191bfa" category="paragraph">次のワークシートを使用して、あとで手順で使用するための情報を記録できます。</block>
  <block id="9d5a474aaa552210ff0298949aeb6c0a" category="cell">必要な情報</block>
  <block id="7fe24adf461d2bb8561714f2d23dc1a8" category="cell">収集されるタイミング</block>
  <block id="6eb41a5158360001c1c3220e5b835719" category="cell">使用時</block>
  <block id="46f0a08ed8c916f4c012866457f2c3c5" category="cell">収集された情報</block>
  <block id="58e005b13052724c67a7a029375b81e6" category="cell">元のノードのモデル、システム ID 、シリアル番号</block>
  <block id="98de75a555a47984f815060d1cb202f6" category="cell">ステージ 1 ： _ アップグレードのためのノードを準備します</block>
  <block id="96a7b0dc109f4a220518540bd844100f" category="cell">ステージ 3 ： _ インストールとブート node3 _ ステージ 5 ： _ インストールとブート node4 _ ステージ 6 ： _ 古いシステムの運用を停止します</block>
  <block id="53e14d7212592e557eb0045b4f222c00" category="cell">シェルフとディスクの情報、フラッシュストレージの詳細、メモリ、 NVRAM 、アダプタカードが元のノードにあります</block>
  <block id="6b13a963976d4b8d2fbc2b61b03cb419" category="cell">ステージ 1 ： _ アップグレードのためのノードの準備</block>
  <block id="9c17c7bcbc4a33e8adf5afdd66b5ddfc" category="cell">手順全体</block>
  <block id="81c61f27d311b6c30ec668cf353ea1de" category="cell">元のノード上のアグリゲートとボリュームをオンラインにします</block>
  <block id="94359ed6e12b4ed191d93ab756e3edc7" category="cell">手順では、短時間の再配置を除き、アグリゲートとボリュームがオンラインのままであることを確認できます</block>
  <block id="7fe437ad7bf96c159fda41c06deb8257" category="cell">コマンド「 network port vlan show 」および「 network port ifgrp show 」の出力</block>
  <block id="6df8f51a4f207a8aec19520cbafdafd9" category="cell">ステージ 3 ： _ ノード 1 のポートを node3 ステージ 5 ： _node2 のポートを node4 に再割り当てする</block>
  <block id="0cefe51dc41d2718e2eb5823909bbc12" category="cell">（ SAN 環境のみ） FC ポートのデフォルト設定</block>
  <block id="f7a78d2e3df99d48acd611b5ebd92bff" category="cell">新しいノードで FC ポートを設定する</block>
  <block id="98577d60c614df3fef5fca33b637ac23" category="cell">（ V シリーズシステムまたは FlexArray 仮想化ソフトウェアのみを使用するシステム） V シリーズシステムまたは FlexArray 仮想化ソフトウェアを使用するシステムのトポロジ</block>
  <block id="7cfd4d042bb6ab02bc385b9c06501763" category="cell">ステージ 3 ： _ インストールとブート node3 _ ステージ 5 ： _ インストールとブート node4 _</block>
  <block id="72a91a015e8c747a5a63794308310840" category="cell">SP の IP アドレス</block>
  <block id="f16cc8c7d7c195a507efbfa7ccc55727" category="cell">ステージ 6 ： _ 新しいコントローラが正しくセットアップされていることを確認します</block>
  <block id="e3d8433cfe5569460492707086339074" category="cell">ライセンスキー</block>
  <block id="bb2a59fbd20fec79ac114c7a9f22ead2" category="cell">外部キー管理サーバの IP アドレス</block>
  <block id="234cfc2e3636ba2a3e5d47da84d5bd32" category="cell">ステージ 1 ： _ ストレージ暗号化のディスクのキーを変更 _</block>
  <block id="a6bab46fa807f06174c4873c5331a9b2" category="cell">ステージ 6 ：新しいノードでのストレージ暗号化のセットアップ _</block>
  <block id="09c90f884edd2efc00874f9fc863daeb" category="cell">Web にアクセスできるディレクトリの名前とパス。ノードをネットブートするためにファイルをダウンロードします</block>
  <block id="8d880de8591f29262b623575d315d6f9" category="cell">ステージ 1 ： _ netboot_ への準備</block>
  <block id="8308cf8c26a7dcc26ef279edbb2465b2" category="cell">ステージ 3 ： _ インストールとブート node3 _ ステージ 5 ： _ インストールとブート node4 _</block>
  <block id="55b2136ebb20d11fca61578e034c0825" category="cell">SAN 以外のデータ LIF は node1 で所有されています</block>
  <block id="36f18a42c47c1ba2b97c49f28fb8814c" category="cell">ステージ 2 ： _ ノード 1 が所有する Nonsan データ LIF を node2 に移動します</block>
  <block id="ffab931268e5c5e23eb65969fdc5d778" category="cell">の後半で説明します</block>
  <block id="baac9a78080d05f11c33a3240628d4f8" category="cell">クラスタポート、クラスタ間ポート、ノード管理ポート、クラスタ管理ポート、物理ポート</block>
  <block id="bd1e8b7ddd738e8d113d4887d3f4bba6" category="cell">ステージ 2 ： _ ノード 1 の情報を記録 _</block>
  <block id="5f7558f445c484b7024a112b18c200a6" category="cell">ステージ 3 ： _ インストールとブート node3 _ ステージ 3 ： _ ポートを node1 から node3 _ にマッピングします</block>
  <block id="7712e1e9d181323ad2123bf3c1218513" category="cell">新しいノードのポートを指定します</block>
  <block id="dcfac71d6abccba3c94c782790822f55" category="cell">ステージ 3 ： _ ポートを node1 から node3 にマッピングします</block>
  <block id="1f2d038d966e575c88681d78a0b7e550" category="cell">の後半のセクションと section_Map ポート（ node2 から node4 への）</block>
  <block id="968d71039e6cb3f4f7f4aa7223382c8f" category="cell">ノード 3 の使用可能なポートとブロードキャストドメイン</block>
  <block id="621f6a9e04692c2889f288c336e29c97" category="cell">SAN 以外のデータ LIF は node2 で所有されていません</block>
  <block id="8600c3328f8a228f306c6d5830a2576c" category="cell">_ ノード 1 に属する SAN 以外のデータ LIF をノード 2 からノード 3 に移動し、 node3 の SAN LIF を確認します</block>
  <block id="5da569cf0c9cfab6143aa1456b0d2b27" category="cell">ノード 2 が所有する SAN 以外のデータ LIF です</block>
  <block id="792578ec3edacbf85c56d7d346753a2f" category="cell">ステージ 3 ： _node2 によって所有されている Nonsan データ LIF を node3 に移動します</block>
  <block id="53c29bbede61f5ab1245941503af76c4" category="cell">ステージ 4 ： _ ノード 2 の情報を記録 _</block>
  <block id="979b8628aef26052c5b8843be52e1fa9" category="cell">ステージ 5 ： _ node4 ステージ 5 ： _ ノード 2 から node4 にポートをマッピングしてブートする</block>
  <block id="a992103a413243514b1fe86c6db582f6" category="cell">ノード 4 のクラスタネットワークポート</block>
  <block id="f2805ed5889ac7ba2f7220a38fc00350" category="cell">ステージ 5 ： _node2 のポートを node4 にマップする</block>
  <block id="ba9d984599b9d029b2fc827939de2324" category="cell">ノード 4 の使用可能なポートとブロードキャストドメイン</block>
  <block id="9b978a712974278ab5f3f7e894871a48" category="cell">ストレージシステムのプライベート SSL 証明書とパブリック SSL 証明書、および各キー管理サーバのプライベート SSL 証明書</block>
  <block id="a2be0d0cd45844d2f39d08838f9c179b" category="paragraph">ノード 1 の物理ポートがノード 3 の物理ポートに正しくマッピングされていることを確認する必要があります。ポート 3 を使用すると、クラスタ内の他のノードおよびアップグレード後にネットワークと通信できます。</block>
  <block id="d22f146c49d95d305653bf62234fdbc9" category="paragraph">新しいノードのポートに関する情報を Hardware Universe から取得しておく必要があります。に進みます <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、 Hardware Universe にリンクします。この情報は、このセクションおよびの後半で使用します <block ref="fface1ac702bde6d72ceb6e55eb8b2b6" category="inline-link-macro-rx"></block>。</block>
  <block id="770687a6c0857c42712724895dde4f94" category="paragraph">ノード 3 のソフトウェア設定は、ノード 3 の物理的な接続と同じである必要があります。また、アップグレードを続行する前に、 IP 接続をリストアする必要があります。</block>
  <block id="342fe6b9a6a951b4d371cda9aec84c5f" category="paragraph">ポート設定は、ノードのモデルによって異なる場合があります。元のノードのポートと LIF の構成を、新しいノードの構成と互換性を持つようにする必要があります。これは、新しいノードがブート時に同じ設定を再生するためです。つまり、ノード 3 をブートすると、 ONTAP は、ノード 1 で使用されていたポートで LIF をホストしようとします。</block>
  <block id="a7e55a2eda4d6d9856ad9438d37fbed0" category="paragraph">そのため、 node1 の物理ポートが node3 の物理ポートに直接マッピングされていない場合は、ブート後にクラスタ、管理、およびネットワーク接続をリストアするためにソフトウェア設定の変更が必要になります。また、ノード 1 のクラスタポートがノード 3 のクラスタポートに直接マッピングされていないと、ノード 3 は、正しい物理ポートでクラスタ LIF をホストするソフトウェア設定が変更されるまで、リブート時にクォーラムに自動的に再参加しないことがあります。</block>
  <block id="cbf79efe25579eb8669620f8a705d90c" category="list-text">[[step1] ノード 1 、ポート、ブロードキャストドメイン、 IPspace のすべてのケーブル接続情報を次の表に記録します。</block>
  <block id="2a04e456c6cc4811fe58e125c72d102f" category="cell">ノード 1 のブロードキャストドメインです</block>
  <block id="a73f157295775ec357e4cbb83394837d" category="cell">クラスタ 5</block>
  <block id="f8b0e66f09382485306db5e1ba20e4fc" category="cell">クラスタ 6</block>
  <block id="8ebc8c8801836bd409313dd264bebb92" category="inline-link-macro">ノード 1 の情報を記録します</block>
  <block id="032db7a5ba2209ef2a98f177b97ef9c0" category="paragraph">を参照してください <block ref="111c70a978efb37ba3bd0ea564da1d79" category="inline-link-macro-rx"></block> を実行して、この情報を取得します。</block>
  <block id="d6fd23476a280d6343ba76f013c499fd" category="list-text">[step2] node3 のすべてのケーブル接続情報、ポート、ブロードキャストドメイン、および IPspace を、の同じ手順を使用して前のテーブルに記録します <block ref="111c70a978efb37ba3bd0ea564da1d79" category="inline-link-macro-rx"></block>。</block>
  <block id="db8e77631790a3f2f7e9e65f99e95d55" category="list-text">[[step3]] 以下の手順に従って、セットアップが 2 ノードのスイッチレスクラスタであるかどうかを確認します。</block>
  <block id="64544217a0060d8a47ba296eaa9eda15" category="list-text">[[step4]] 次の手順を実行して、ノード 3 をクォーラムに参加させる。</block>
  <block id="915e652f4479fd46dc91c70db0e241ac" category="paragraph">「 network port show -node node-name -port port -name -fields broadcast-domain 」</block>
  <block id="e20f03b7201e18349c5baa3209b997a6" category="paragraph">次の例は、ポート「 e0a 」が node3 の「 Cluster 」ドメインにあることを示しています。</block>
  <block id="23c08f03059c2e662513cbaa4ca31c04" category="paragraph">network port modify -node node-name -port port -name -ipspace Cluster -mtu 9000`</block>
  <block id="8d39e79fe126ab08c8533329b616fed4" category="admonition">MetroCluster 構成の場合、ポートのブロードキャストドメインを変更できないことがあります。これは、同期先 SVM の LIF をホストしているポートに関連付けられており、のようなエラーが表示されますが、次のメッセージに制限されないためです。</block>
  <block id="8b3323601551341609485df18e91de19" category="paragraph">リモートサイトの対応する同期元 SVM から次のコマンドを入力して、同期先の LIF を適切なポートに再割り当てします。</block>
  <block id="a7e5ede23e9abe28c2e83408db9129c7" category="paragraph">「 MetroCluster vserver resync -vserver Vserver -name 」のようになります</block>
  <block id="cb8885c065cc8b4444ec326cbc63995a" category="paragraph">network interface migrate -vserver Cluster -lif lif_name -source-node node3 -destination-node node3 -destination-port port-name</block>
  <block id="a0ab65e69e2ad009bcc7428e18446ac3" category="paragraph">network interface modify -vserver Cluster -lif lif_name – home-port port-name</block>
  <block id="3db1cb9c339f5db3439420bdee3c086f" category="list-text">クラスタポートが Cluster broadcast-domain にない場合は、追加します。</block>
  <block id="c78bf93e2079a992cf4c19d12618dbe8" category="paragraph">「 network port broadcast-domain add-ports -ipspace Cluster -broadcast-domain Cluster -port node ： port 」のようになります</block>
  <block id="7da7933fdddd6ba0e6adfac1eb9d1672" category="paragraph">次の例は、ノード 3 のポート「 e0d 」を削除します。</block>
  <block id="faa18fff9afe976096fc81be55fab832" category="paragraph">cluster show -node node3 -fields health`</block>
  <block id="204da7ccb61d29bd71f42848dbdfbc2a" category="list-text">[[man_map_1_step5] クラスタ LIF とノード管理 LIF またはクラスタ管理 LIF をホストするブロードキャストドメインを調整します。各ブロードキャストドメインに正しいポートが含まれていることを確認してください。ポートをホストしているブロードキャストドメイン間や LIF のホームになっているブロードキャストドメイン間で移動することはできないため、 LIF を移行して変更する必要がある場合があります。</block>
  <block id="5dd2c837e11a289fa3af34aca2a1ab86" category="paragraph">network interface show -fields home-node 、 home-port</block>
  <block id="a935ed36345935d035e5cbe86cb3a35d" category="paragraph">network interface modify -vserver vserver-name -lif lif_name – home-port port-name</block>
  <block id="a84cdc90d98c6148502139e8da567ade" category="list-text">[man_map_1_step6] 必要に応じて、に示す同じコマンドを使用して、クラスタ間ブロードキャストドメインを調整し、クラスタ間 LIF を移行します <block ref="4c0abef6869b6cad04a71c175246f8ab" category="inline-xref-macro-rx"></block>。</block>
  <block id="15d8a3fb33ef05850a50f8685a3b3c02" category="list-text">[[step7] 必要に応じて、に示す同じコマンドを使用して、他のブロードキャストドメインを調整してデータ LIF を移行します <block ref="4c0abef6869b6cad04a71c175246f8ab" category="inline-xref-macro-rx"></block>。</block>
  <block id="3eed5b0c094ac012f4929ba5382bf4dd" category="list-text">[[step8] 、ノード 3 に存在しないポートが node1 にある場合は、次の手順に従って削除します。</block>
  <block id="5eb3a6c1204974756e1a1ba11f2ec598" category="list-text">ポートを削除します。</block>
  <block id="44c3f6f89bd851c5548e7c2c13839a55" category="paragraph">'network port delete -node node-name -port port -name</block>
  <block id="f063d629ff68f957f5da6e6d4a1024c5" category="list-text">[[step9] すべての LIF フェイルオーバーグループを調整します。</block>
  <block id="ed3037abec4b50b866ad4bfdc6817933" category="paragraph">network interface modify -failover-group failover-group-failover-policy failover-policy フェイルオーバーポリシー</block>
  <block id="b9ce0c55aad8eead03f3c1634c34732f" category="paragraph">次の例は、フェイルオーバーポリシーを「 broadcast-domain-wide 」に設定し、フェイルオーバーグループ「 fg1 」のポートを「 node3 」の LIF 「 data1 」のフェイルオーバーターゲットとして使用します。</block>
  <block id="a0d0e1bbddc9c85ea92c47a58b414ea1" category="summary">node2 をシャットダウンして撤去する前に、 node2 に関する情報を記録しておく必要があります。</block>
  <block id="cb01034aedc70b6d88070cceb3ec5fd6" category="doc">ノード 2 の情報を記録します</block>
  <block id="4de30509db28d6f26dbb6eb1fa0448e9" category="paragraph">ノード 2 をシャットダウンして撤去する前に、クラスタネットワーク、管理、および FC ポートとその NVRAM システム ID に関する情報を記録しておく必要があります。この情報は、 node2 を node4 にマッピングしてディスクを再割り当てするときに、手順で必要となります。</block>
  <block id="06482362cad7119c97decfadddef47d1" category="list-text">ノード 2 のクラスタネットワークポート、ノード管理ポート、クラスタ間ポート、およびクラスタ管理ポートを特定します。</block>
  <block id="1fcb48e8a1ae19116b9bf2f39685db30" category="paragraph">network interface show -curr-node &lt;node_name &gt; -role cluster 、 intercluster 、 nodemmgmt 、 cluster-mgmt</block>
  <block id="9581ef2fce7ca5bef124feac72dd7c62" category="paragraph">次の例に示すように、クラスタ内のそのノードと他のノードの LIF が表示されます。</block>
  <block id="66df24136907c6cba70f63950b15a0d8" category="admonition">システムにクラスタ間 LIF がない可能性があります。クラスタ管理 LIF は、ノードペアの一方のノードにしか配置しません。の出力例にクラスタ管理 LIF が表示されています <block ref="4d0816bae74d8d665981da69c5c8d7a9" category="inline-link-macro-rx"></block> インレコード node1 のポート情報 _ 。</block>
  <block id="db388cc11af248e636d23a7634f79da1" category="list-text">セクションで使用する情報を出力に記録します <block ref="fface1ac702bde6d72ceb6e55eb8b2b6" category="inline-link-macro-rx"></block>。</block>
  <block id="d852fb2583585e10c3885982eaf29670" category="paragraph">出力情報は、新しいコントローラポートを古いコントローラポートにマッピングするために必要です。</block>
  <block id="b226d44baee1fdcf5f175befc4240f79" category="list-text">node2 の物理ポートを特定します。</block>
  <block id="0ce26da6eb15f1794580d79135daecea" category="paragraph">network port show -node &lt;node_name &gt; -type physical ` +</block>
  <block id="3aba4579adf045f7017d47291de9ae6e" category="paragraph">`node_name は ' 移行するノードです</block>
  <block id="a36b8ceea3403515d94e1d9ad1d33833" category="paragraph">次の例に示すように、 node2 の物理ポートが表示されます。</block>
  <block id="e39f84c1a169d8d90af9c95f44865bc0" category="list-text">ポートとそのブロードキャストドメインを記録します。</block>
  <block id="1a494d33f95411ce2d7f871e87234bb6" category="paragraph">ブロードキャストドメインは、あとで手順の新しいコントローラのポートにマッピングする必要があります。</block>
  <block id="36d2ce7941b2c78c3d67d83e5bab95ab" category="list-text">node2 の FC ポートを確認します。</block>
  <block id="922cfc273cc764471719b8a70b2bd795" category="paragraph">「 network fcp adapter show 」のように表示されます</block>
  <block id="e2ce1c0ee0599997916e05613833e82e" category="paragraph">次の例に示すように、 node2 の FC ポートが表示されます。</block>
  <block id="f33b448fa0bb738f614e66795ee372d4" category="list-text">ポートを記録します。</block>
  <block id="183e98aa2a84c4dee16223d4c260f2ce" category="paragraph">出力情報は、手順の後半で新しいコントローラの新しい FC ポートをマッピングするために必要です。</block>
  <block id="f30296e85c9b7a573f431b89a15b6b93" category="list-text">まだ設定していない場合は、 node2 にインターフェイスグループまたは VLAN が設定されているかどうかを確認します。</block>
  <block id="9e650495d6414abbc47ea05fdc36dd7e" category="paragraph">ifgrp show`</block>
  <block id="35803428da21a4a214ff09f1442e2f58" category="paragraph">「 vlan show 」</block>
  <block id="15fb68f8a892a3ed6a57c8b5eca53ec5" category="paragraph">このセクションの情報を使用します <block ref="fface1ac702bde6d72ceb6e55eb8b2b6" category="inline-link-macro-rx"></block>。</block>
  <block id="61a6d655671eebbd633c1d84fae09e17" category="cell">状況</block>
  <block id="1f7052fd85a8ced9cd9c65f079fcb154" category="cell">に記録された NVRAM システム ID 番号 <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block></block>
  <block id="65e4801fe9cb3563a071b657463a3c1c" category="cell">に進みます <block ref="610cb2d6e87c5e838ceef8f48f57b082" category="inline-link-macro-rx"></block>。</block>
  <block id="30183fbd349bcd94fdabd371e0fdc8d9" category="cell">NVRAM システムの ID 番号をに記録しませんでした <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block></block>
  <block id="b31b744fd8c5cbe34c282a8e3311866b" category="cell">- 完了しました <block ref="3ef612fafd35c4ea98dad97a133c5f3f" category="inline-xref-macro-rx"></block> および <block ref="a3461a8cfeac3856b6bf21e7388f2534" category="inline-xref-macro-rx"></block> 次に、次のセクションに進みます。 <block ref="610cb2d6e87c5e838ceef8f48f57b082" category="inline-link-macro-rx"></block>。</block>
  <block id="435d35070ba8894d910a50e35db1d4e2" category="list-text">[man_record_2_step9] ノード 2 の属性を表示します。</block>
  <block id="5d34eef64c7b53994a7dde374d44b94b" category="paragraph">「 system node show -instance -node node2 」</block>
  <block id="bc110b3ccc057d2275d5e8ae87f525b0" category="list-text">[man_record_2_step10] セクションで使用する NVRAM システム ID を記録します <block ref="f326c815b47f4f2909494bae5cd735d5" category="inline-link-macro-rx"></block>。</block>
  <block id="32cc04caeccfd27a6da569dca64fe8b9" category="paragraph">MetroCluster 構成の健全性をチェックして、正常に動作することを確認する必要があります。</block>
  <block id="7314fe3b616597bb78463e3503d3cdea" category="paragraph">アグリゲートの再配置（ ARL ）を使用して ONTAP 9.0 を実行するコントローラのペアをアップグレードできるかどうかは、プラットフォームおよび元のコントローラと交換用コントローラの両方の構成によって異なります。</block>
  <block id="03a076130908bcb8ba3ef3e4a9879406" category="paragraph">ARL を使用してノードのペアをアップグレードできる状況は次のとおりです。</block>
  <block id="fef08cb6b104300c9963da8490224b47" category="list-text">アップグレード前に、元のコントローラと交換用コントローラの両方で同じバージョンの ONTAP 9.x が実行されている必要があります。</block>
  <block id="85bf786cb7564154a7193e9a32b9470f" category="list-text">交換用コントローラの容量は元のコントローラと同じかそれ以上である必要があります。容量が等しいかそれよりも大きい場合は、 NVRAM サイズ、ボリューム、 LUN 、アグリゲート数の上限などの属性を表し、新しいノードのボリュームまたはアグリゲートの最大サイズも表します。</block>
  <block id="f8990401799da4daa91e6353e208a0ca" category="list-text">次の種類のシステムをアップグレードできます。</block>
  <block id="9fc712c36470ee134b5baf35a0628f67" category="list-text">FAS システムから FAS システムへの移動。</block>
  <block id="c94314f263e01937a72e0a89c5a31d17" category="list-text">V シリーズシステムまたは FlexArray 仮想化ソフトウェアを搭載したシステムへの FAS システムの追加。</block>
  <block id="4f53eee63da949e06542638d2195a151" category="list-text">V シリーズシステム、または FlexArray 仮想化ソフトウェアを搭載したシステム</block>
  <block id="3cd85b184f5edd515a62b5c0162cca6d" category="list-text">V シリーズシステムまたは FlexArray 仮想化ソフトウェアを搭載したシステムの FAS システム。ただし、 V シリーズシステムまたは FlexArray 仮想化ソフトウェアを搭載したシステムにアレイ LUN がない場合に限ります。</block>
  <block id="5759b3c09faaa5e5121a707b989bc410" category="list-text">AFF システムへの AFF システム。</block>
  <block id="b840d5771a2ef91436a0bedbee3a165d" category="admonition">AFF システムのアップグレードを実行する前に、 ONTAP をリリースバージョン 9.3P12 、 9.4P6 、または 9.5P1 以降にアップグレードする必要があります。これらのリリースレベルは、アップグレードを成功させるために必要です。</block>
  <block id="3900a5ea5c04533e4cf6dbe9c1b64f7e" category="list-text">一部の ARL コントローラアップグレードでは、交換用コントローラの一時的なクラスタポートをアップグレードに使用できます。たとえば、 AFF A300 から AFF A400 システムにアップグレードする場合、 AFF A400 構成に応じて、 2 つのメザニンポートのいずれかを使用するか、 4 ポートの 10GbE ネットワークインターフェイスカードを追加して一時的なクラスタポートを提供できます。一時的なクラスタポートを使用してコントローラをアップグレードしたら、交換用コントローラの 100GbE ポートにクラスタを無停止で移行できます。</block>
  <block id="22b0f2676995b3d79ecefe6d9a50322a" category="paragraph">ARL を元のコントローラおよび交換用コントローラで実行できるかどうかを確認する必要があります。元のシステムでサポートされるすべての定義済みアグリゲートのサイズとディスク数を確認する必要があります。新しいシステムでサポートされるアグリゲートのサイズとディスク数を比較します。この情報にアクセスするには、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> Hardware Universe にリンクするには、次の手順を実行します。新しいシステムでサポートされるアグリゲートサイズとディスク数は、元のシステムでサポートされるアグリゲートサイズとディスク数以上であることが必要です。</block>
  <block id="17d299f0ea21ebf5e64a916dc31f3150" category="admonition">どちらのシステムもハイアベイラビリティ（ HA ）と非 HA のどちらかです。両方のノードがこの機能を有効または無効にする必要があります。オールフラッシュで最適化されたノードと同じ HA ペアで最適化が有効になっていないノードを組み合わせることはできません。パーソナリティが異なる場合は、テクニカルサポートに連絡してください。</block>
  <block id="eb54474fb812ae2f0b8cbe44a679c0e9" category="admonition">新しいシステムのスロット数が元のシステムのスロット数より少ない場合、またはポートの数が少ないか異なる場合は、新しいシステムにアダプタを追加しなければならないことがあります。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> 特定のプラットフォームの詳細については、ネットアップサポートサイトの Hardware Universe にリンクしてください。</block>
  <block id="64958cd32ea9482fb68bd827389c4b5d" category="list-text">ONTAP 9.0 から ONTAP 9.7 への ONTAP のバージョンを実行できないコントローラとの間。</block>
  <block id="fd753b120c7506bdd866bd69666299a0" category="paragraph">Data ONTAP 7-Mode を実行するシステムでのコントローラのアップグレードについては、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> からネットアップサポートサイトにリンクできます。</block>
  <block id="8d99b40dd6349fd6acdd377f1170526a" category="list-text">元のコントローラに接続されたディスクシェルフをサポートしない交換用コントローラへの接続</block>
  <block id="c2bba071fde6bd6aaadda02df6be1824" category="paragraph">ディスクサポート情報については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> Hardware Universe にリンクするには、次の手順を実行します。</block>
  <block id="0ed554de4f15b56b25624509bfd8b8e2" category="list-text">ルートアグリゲートまたは内蔵ドライブ上のデータアグリゲートを含むコントローラからのアクセス。</block>
  <block id="aa4444dc8b6bab3b2f6234aeca290090" category="section-title">前提条件と用語</block>
  <block id="c77e53bb71e6f82e9c063dc5e5174b70" category="paragraph">このマニュアルの記述は次の前提に基づいています。</block>
  <block id="3eb93a8b34b97361565e1e43b5172c6c" category="list-text">交換用コントローラハードウェアは新しく購入され、使用されていません。</block>
  <block id="2c1539b425b852831dfd3949e3fa3f6e" category="admonition">* 注意 * ：この手順は、交換用コントローラハードウェアが新しく、使用されていないと想定しているため、使用済みコントローラを「 wipeconfig 」コマンドで準備するために必要な手順は、この手順には含まれていません。交換用コントローラハードウェアを以前に使用していた場合は、テクニカルサポートに問い合わせる必要があります。特に、コントローラが Data ONTAP 7-Mode を実行していた場合は、テクニカルサポートにお問い合わせください。</block>
  <block id="813522154d0016da078c804c8b48926e" category="list-text">ノードのペアをアップグレードする際のガイドラインを確認し、理解しておきます。</block>
  <block id="31536b7b125b53b91a4202e748df16c7" category="admonition">* 注意 * NVRAM の内容は消去しないでください。NVRAM の内容をクリアする必要がある場合は、ネットアップテクニカルサポートにお問い合わせください。</block>
  <block id="4e2f57efeba52fa3484b04fa5b7501f6" category="list-text">「 mody 」コマンドの前後に適切なコマンドを実行し、両方の「 show 」コマンドの出力を比較して、「 mody 」コマンドが成功したことを確認しています。</block>
  <block id="418bba28a84b33a46f081045deea4425" category="list-text">SAN 構成の場合、 HA ペア上の各 Storage Virtual Machine （ SVM ）にローカル LIF とパートナー LIF があります。各 SVM にローカル LIF とパートナー LIF がない場合は、アップグレードを開始する前に、その SVM のリモートノードとローカルノードに SAN データ LIF を追加します。</block>
  <block id="4deee541ccbe8bdf4518c19cd687519b" category="list-text">SAN 構成でポートセットを使用する場合は、バインドされた各ポートセットに HA ペアの各ノードの LIF が少なくとも 1 つ含まれていることを確認しておく必要があります。</block>
  <block id="1cb03b52ed6596c669089e6356a17e4c" category="paragraph">この手順では、ノードのリブートや環境変数の出力や設定など、特定のタスクを実行できるノード上のプロンプトを「 _boot environment prompt_ 」で参照します。このプロンプトは、 _boot loader prompt_ と非公式に呼ばれることがあります。</block>
  <block id="f12c4790f612bd1e2efaede10265d567" category="paragraph">ブート環境のプロンプトの例を次に示します。</block>
  <block id="3f17352bf969c985d68f77c2833285c4" category="section-title">ONTAP 9.7 以前のライセンス</block>
  <block id="9ee4145a4e9ccdd934db7e344edf43ab" category="paragraph">新しいライセンスキーがない場合は、クラスタで現在ライセンスされている機能を新しいコントローラで使用でき、引き続き使用できます。ただし、ライセンスされていない機能をコントローラで使用するとライセンス契約に違反する可能性があるため、アップグレードの完了後に新しいコントローラのライセンスキーをインストールする必要があります。</block>
  <block id="fa6e3787c7c887f4c69ddbc0dec0424e" category="paragraph">すべてのライセンスキーは、 28 文字の大文字のアルファベットです。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ONTAP 9.7 の新しい 28 文字のライセンスキーを取得する方法については、 _NetApp サポートサイト _ にリンクしてください。またはそれ以前のバージョン。キーは、 _ ソフトウェアライセンス _ の _ マイサポート _ セクションにあります。必要なライセンスキーがサイトにない場合は、ネットアップの営業担当者にお問い合わせください。</block>
  <block id="4d832de97d9ead053e5d9f0ec85efced" category="paragraph">ライセンスの詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、 _System Administration Reference_( システム管理リファレンス ) にリンクします。</block>
  <block id="444b1cfaed2cd1215abe5706af9673cd" category="section-title">ストレージ暗号化</block>
  <block id="9437e45ea84f2356122cf953a0645e49" category="paragraph">元のノードまたは新しいノードでストレージ暗号化が有効になっている場合があります。その場合は、この手順でストレージ暗号化が適切に設定されていることを確認するための追加の手順を実行する必要があります。</block>
  <block id="9519937cbd956cff6c45361bbdf5972a" category="paragraph">ストレージ暗号化を使用する場合は、ノードに関連付けられているすべてのディスクドライブに自己暗号化ディスクドライブが必要です。</block>
  <block id="197b89f0e243e9def8dc0d01e39c6fe0" category="paragraph">この手順にはトラブルシューティングの提案が含まれてい</block>
  <block id="91d88902ba3b6c6fcce59073d39627b4" category="summary">アップグレード前に、ノードの準備を完了しておく必要があります。</block>
  <block id="826be71263f21097957d09d3f8ed668e" category="paragraph">元のノードを交換する前に、ノードが HA ペア構成になっていて、不足しているディスクや障害ディスクがないこと、相互のストレージにアクセスできること、およびクラスタ内の他のノードに割り当てられているデータ LIF を所有していないことを確認する必要があります。また、元のノードに関する情報を収集する必要があります。クラスタが SAN 環境にある場合は、クラスタ内のすべてのノードがクォーラムにあることを確認する必要があります。</block>
  <block id="e537424f11b8c436c4623dda13ea1af3" category="list-text">テイクオーバーモード時に両方のノードの負荷に対応できるだけの十分なリソースが元の各ノードにあることを確認します。</block>
  <block id="f57ddae179006dfe93c570a9886b51b0" category="list-text">元のノードのパフォーマンスベースラインを作成するには、次の手順を実行します。</block>
  <block id="e2ce8b648cf2a8577d2ac0054c830df5" category="list-text">診断ユーザアカウントのロックが解除されていることを確認します。</block>
  <block id="04b97d849898994879d3546a0da9f87a" category="paragraph">* 重要 * ：診断ユーザアカウントは、低レベルの診断のみを目的としており、テクニカルサポートからの指示があった場合にのみ使用してください。</block>
  <block id="cb0649853a09056775436f53b7e99dc5" category="paragraph">* 重要 * ：ユーザーアカウントのロック解除については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、 _System Administration Reference_( システム管理リファレンス ) にリンクします。</block>
  <block id="8fafe7b0e88d09400ee18fcc9299185e" category="list-text">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ネットアップサポートサイトへのリンクには、 Performance and Statistics Collector （ Perfstat Converged ）をダウンロードしてください。</block>
  <block id="061b69246434dcda481ca9452cf30635" category="paragraph">Perfstat Converged ツールを使用すると、アップグレード後に比較するためのパフォーマンスのベースラインを設定できます。</block>
  <block id="3e5ae45cd6aac12d01461471b0995845" category="list-text">ネットアップサポートサイトの手順に従ってパフォーマンスのベースラインを作成します。</block>
  <block id="7fcb92cfc1dea17cbdc84eda52cfac2b" category="list-text">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> からネットアップサポートサイトにリンクして、ネットアップサポートサイトでサポートケースをオープンしてください。</block>
  <block id="38fd59ef0181a70014c49f0cfdd6ed5d" category="paragraph">アップグレード中に発生する可能性がある問題をケースで報告できます。</block>
  <block id="e7b328a01b5a6b8fffc172cfd9f564c0" category="list-text">node3 と node4 の NVMEM または NVRAM バッテリが充電されていることを確認し、充電されていない場合は充電します。</block>
  <block id="2e283ebf1bea253f33a9e884fa598e1e" category="paragraph">node3 と node4 を物理的にチェックして、 NVMEM または NVRAM バッテリが充電されているかどうかを確認する必要があります。node3 と node4 のモデルの LED の詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> Hardware Universe にリンクするには、次の手順を実行します。</block>
  <block id="6ab3181b33a0075c13f2de4c0920deff" category="admonition">* 注意 * NVRAM の内容は消去しないでください。NVRAM の内容をクリアする必要がある場合は、ネットアップテクニカルサポートにお問い合わせください。</block>
  <block id="051d9c31ffa2621a5e49ba9e6d76c916" category="list-text">node3 と node4 にある ONTAP のバージョンを確認します。</block>
  <block id="53e359796554176ecef5639c8ed3ed05" category="paragraph">node3 と node4 にある ONTAP のバージョンに関する情報は、梱包箱に含める必要があります。ONTAP のバージョンは、ノードがブートするとき、またはノードを保守モードでブートしてコマンドを実行するときに表示されます。</block>
  <block id="7877022c956918624cc0373ff564cad4" category="paragraph">「バージョン」</block>
  <block id="232ac82576b399b9dcdc3a264bb0c6ec" category="list-text">ノード 1 とノード 2 にクラスタ LIF が 2 つまたは 4 つあるかどうかを確認します。</block>
  <block id="a2d27af8ce0592e36b8a208c0cb93d3e" category="paragraph">「 network interface show -role cluster 」のように表示されます</block>
  <block id="97946b80ce2a390dfbe694abb89b8da6" category="paragraph">次の例に示すように、すべてのクラスタ LIF が表示されます。</block>
  <block id="b6f048f47d754b1245e072cf13364151" category="list-text">ノード 1 またはノード 2 にクラスタ LIF が 2 つまたは 4 つある場合は、次の手順を実行して、使用可能なすべてのパスで両方のクラスタ LIF に ping を送信できることを確認します。</block>
  <block id="4ae0280fe3dd6476913cdfef9bf98f8f" category="list-text">advanced 権限レベルに切り替えます。</block>
  <block id="88bdbe46ad1d0b5212db8d769f0d6c7c" category="list-text">「 y 」と入力します。</block>
  <block id="1be278766df14cf22410e71cf6d2cf07" category="list-text">ノードに ping を実行して接続をテストします。</block>
  <block id="30533ddc427fb292c7d2a7a069e893e2" category="paragraph">cluster ping-cluster -node node_name</block>
  <block id="e2ef0e388993deb8d5ac2d2c4c589106" category="paragraph">次の例のようなメッセージが表示されます。</block>
  <block id="87d93b522596e870c62c871bdbe44c11" category="paragraph">ノードで 2 つのクラスタポートが使用されている場合、次の例に示すように、 4 つのパスで通信可能であることを確認できます。</block>
  <block id="063014cb1baf1ab4cfba01ed9c5cdcb1" category="list-text">管理者レベルの権限に戻ります。</block>
  <block id="3e6f17c57130b6f779ec8a030abc6ae0" category="list-text">ノード 1 とノード 2 が HA ペアになっていることを確認し、ノードが相互に接続されていること、およびテイクオーバーが可能であることを確認します。</block>
  <block id="7a309bb6c6af5ef06efe5f48e0c54074" category="paragraph">次の例は、ノードが相互に接続されていて、テイクオーバーが可能な場合の出力例を示しています。</block>
  <block id="8ad3217d99ee19b408199ad575ffe3af" category="paragraph">どちらのノードも部分的なギブバック状態にはなりません。次の例では、 node1 の部分的なギブバックが完了しています。</block>
  <block id="e1b6253c9fd3e54d029ac4ea06c7ca29" category="list-text">[man_prepare-to-downgrade 9] ： node1 と node2 のどちらも現在の所有者（ホーム所有者ではない）のアグリゲートを所有していないことを確認します。</block>
  <block id="af83575c95d637895459a44e86fa9e26" category="paragraph">「 storage aggregate show -node &lt;node_name &gt; -is-home false -fields owner-name 、 homename 、 state 」という文字列が含まれています</block>
  <block id="e86a1d7ab77ef690a506c50aeb0e4407" category="paragraph">node1 と node2 のどちらも現在の所有者（ホーム所有者ではない）アグリゲートを所有していない場合、次の例のようなメッセージが返されます。</block>
  <block id="b985e562bbb6750dd51f653600fe0a16" category="paragraph">次の例は、 4 つのアグリゲートのホーム所有者ではなくホーム所有者である node2 というノードに対するコマンドの出力を示しています。</block>
  <block id="d2d09b67c3b189d4996ce96fdb6e7f46" category="cell">のコマンドの場合は <block ref="f234334393599d38df4eb27863e3dcfa" category="inline-xref-macro-rx"></block>...</block>
  <block id="187bf5770ab4eb046ac279545d76a28d" category="cell">空の出力がありました</block>
  <block id="618ca5b25d5cf4c26b7057f25a52023b" category="inline-xref">手順 12</block>
  <block id="6cf9162d078961b85385ab5ffe206def" category="cell">手順 11 を省略して、に進みます <block ref="9e04aeb1482ff26e4ec2b4e66367360a" category="inline-xref-macro-rx"></block>。</block>
  <block id="4862cab8c196cf3e955c3421a6f0ab8b" category="cell">出力あり</block>
  <block id="5f97f3ee15cc9d2abee53d7af46e1799" category="inline-xref">手順 11</block>
  <block id="009df4941179f7e77d7594ecfc0c10f7" category="cell">に進みます <block ref="1fe89f878ebb086a789e2e41fed56343" category="inline-xref-macro-rx"></block>。</block>
  <block id="edc71aed1f3d88be9cfa9b3b3f030a94" category="list-text">[man_prepare-to-downgrade 11]] ノード 1 またはノード 2 が現在の所有者であり、ホーム所有者ではないアグリゲートを所有している場合は、次の手順を実行します。</block>
  <block id="93b9f692990cbe40ba44ff8b66800ba1" category="paragraph">「 storage failover giveback -ofnode home_node_name</block>
  <block id="239ac3b08eb08347dc0ce94de0522c08" category="paragraph">「 storage aggregate show -nodes &lt;node_name &gt; -is-home false -fields owner-name 、 home-name 、 state</block>
  <block id="cdb18b743b776d3188bce1696bcee067" category="list-text">[man_prepare_nodes_step12]] ノード 1 とノード 2 がお互いのストレージにアクセスできることを確認し、ディスクが見つからないことを確認します。</block>
  <block id="d4a6afd0a40d578ef1c16c580930990a" category="paragraph">「 storage failover show -fields local-missing-disks 、 partner-missing-disks 」というメッセージが表示されます</block>
  <block id="9351d7b864e0fec6d8e9ce484c7e1792" category="paragraph">次の例は、不足しているディスクがない場合の出力例を示しています。</block>
  <block id="89b6ed3de0a424283818fdf7fccd43c6" category="list-text">ノード 1 とノード 2 が正常に機能しており、クラスタへの参加条件を満たしていることを確認します。</block>
  <block id="f1178fa107fef2eea6cd954e57dbda27" category="paragraph">次の例は、両方のノードが正常である場合の出力を示しています。</block>
  <block id="a28608e752cbbce9cbd1454dfca4e122" category="list-text">[man_prepare-to-downgrade 15]] ノード 1 とノード 2 で同じ ONTAP リリースが実行されていることを確認します。</block>
  <block id="e5efd9c28238577691b2e984771aea4a" category="paragraph">「 system node image show -node &lt;node1 、 node2 &gt; -iscurrent true 」</block>
  <block id="ee93f64f74bbb51a61f0871bf27e8d58" category="paragraph">次の例は、コマンドの出力例を示しています。</block>
  <block id="39011a93d54cda514415ade9083fc4bd" category="list-text">ノード 1 とノード 2 のどちらもクラスタ内の他のノードに属するデータ LIF を所有していないことを確認し、出力の「 Current Node 」列と「 Is Home 」列をチェックします。</block>
  <block id="7bba44cc0aa97ec42a95cacd643fa5f4" category="paragraph">network interface show -role data -is-home false -curr-node node_name</block>
  <block id="5ac0c9fe3d719e05a93a39b429e96f47" category="paragraph">次の例は、 node1 に、ホーム所有の LIF がクラスタ内の他のノードにない場合の出力を示しています。</block>
  <block id="c94a099e774b563198a3d0a4747eeeb1" category="paragraph">次の例は、 node1 がもう一方のノードによってホーム所有されているデータ LIF を所有している場合の出力を示しています。</block>
  <block id="624ebabf7bed06677af18b73e9b75ed4" category="list-text">の出力の場合は <block ref="f85aebae90992a111c19def12492ab18" category="inline-xref-macro-rx"></block> ノード 1 とノード 2 のどちらかがクラスタ内の他のノードでホーム所有されているデータ LIF を所有しており、データ LIF をノード 1 とノード 2 のどちらからも移行することを示します。</block>
  <block id="b4ebcf376ab05c920671af65b7daaf8c" category="paragraph">network interface revert -vserver * -lif *</block>
  <block id="90cb08ba1d76f3a3dfeee17c19be4d3e" category="paragraph">network interface revert コマンドの詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ONTAP 9 コマンド：マニュアルページリファレンスにリンクするには、次の手順を実行します。</block>
  <block id="9aad19d5c9012d934daf081b9a8a5f8d" category="list-text">ノード 1 とノード 2 で障害ディスクが所有されているかどうかを確認します。</block>
  <block id="befc7c82e5a0017b377265524e554a72" category="paragraph">'storage disk show -nodelist &lt;node1 、 node2 &gt; -boled</block>
  <block id="897a592bf71f640f9c341f736bc9ee4e" category="list-text">次の手順を実行して node1 と node2 に関する情報を収集し、各コマンドの出力を記録します。</block>
  <block id="76a16743e07ac3cea2f75990f2aad527" category="admonition">この情報は、手順の後半で使用します。</block>
  <block id="86bd7b7efad49e1892e19e0073d55fb5" category="list-text">両方のノードのモデル、システム ID 、シリアル番号を記録します。</block>
  <block id="6954b4a189214669ac4df406940dd33e" category="paragraph">「 system node show -node &lt;node1 、 node2 &gt; -instance 」のように表示されます</block>
  <block id="dfb5c700fcc3e30efac3db32160fbcf2" category="admonition">この情報を使用して、ディスクの再割り当てと元のノードの運用を停止します。</block>
  <block id="e09e773592434045763d0f91877696a1" category="list-text">ノード 1 とノード 2 の両方で次のコマンドを入力し、シェルフ、各シェルフ内のディスク数、フラッシュストレージの詳細、メモリ、 NVRAM 、ネットワークカードに関する情報を出力に記録します。</block>
  <block id="15b1cd8e0a84466d3709aaf6e05cddf0" category="paragraph">'run-node &lt;node_name &gt;sysconfig `</block>
  <block id="4f52adca7234907fc88d3196c013afca" category="admonition">この情報を使用して、 node3 または node4 に転送するパーツやアクセサリを特定できます。ノードが V シリーズシステムであるか、 FlexArray 仮想化ソフトウェアがインストールされているかがわからない場合は、の出力からも確認できます。</block>
  <block id="183d8f9cbafac0e6a6d6ea1ecdc927af" category="list-text">ノード 1 とノード 2 の両方で次のコマンドを入力し、両方のノードでオンラインになっているアグリゲートを記録します。</block>
  <block id="c6cb2ac6573aa936dedbb241c7666136" category="paragraph">「 storage aggregate show -node &lt;node_name &gt; -state online 」のように指定します</block>
  <block id="8e812627c78a44fd6a82255d855942ae" category="admonition">この情報と次の手順の情報を使用して、再配置時にオフラインになった短時間のアグリゲートとボリュームが手順全体でオンラインのままになっていることを確認できます。</block>
  <block id="75cf5ffcfa777a87d0faf388944df0a1" category="list-text">[[man_prepare_nodes_step19]] ノード 1 とノード 2 の両方で次のコマンドを入力し、両方のノードでオフラインになっているボリュームを記録します。</block>
  <block id="9725ef50c82a6779c393b0d1203f8040" category="paragraph">volume show -node &lt;node_name &gt; -state offline`</block>
  <block id="649d1a5dd8b62184f1d84c77b9e0782d" category="admonition">アップグレード後にもう一度コマンドを実行し、この手順の出力と比較して、他のボリュームがオフラインになったかどうかを確認します。</block>
  <block id="f1914c021e0eba7910a7110848bb7b02" category="list-text">次のコマンドを入力して、 node1 または node2 にインターフェイスグループまたは VLAN が設定されているかどうかを確認します。</block>
  <block id="668c0014fabb7b9c53aeeddba81cd3f5" category="paragraph">「 network port ifgrp show 」のように表示されます</block>
  <block id="793d1d4f275c1119fa9ef4c6bdeb245e" category="paragraph">「 network port vlan show 」と表示されます</block>
  <block id="f44fab1c935aab23f65aad42a018c6c3" category="paragraph">インターフェイスグループまたは VLAN がノード 1 とノード 2 のどちらで設定されているかを確認します。手順の次の手順以降で、その情報を確認する必要があります。</block>
  <block id="6b6d8dc68906d8c318a7c2d09898cb94" category="list-text">ノード 1 とノード 2 の両方で次の手順を実行して、手順の後半で物理ポートを正しくマッピングできることを確認します。</block>
  <block id="b84ea1287ec7320899965ee9778b33f8" category="list-text">次のコマンドを入力して 'clusterwide 以外のノードにフェイルオーバー・グループがあるかどうかを確認します</block>
  <block id="b60d742c0bb409f0ebcb8588e87621e0" category="paragraph">「 network interface failover-groups show 」と表示されます</block>
  <block id="091f947ae047399826a034c153b6f964" category="paragraph">フェイルオーバーグループは、システムに存在するネットワークポートのセットです。コントローラハードウェアをアップグレードすると物理ポートの場所が変わる可能性があるため、アップグレード中にフェイルオーバーグループを誤って変更する可能性があります。</block>
  <block id="8d9c45aa37c89a2c1648b1756ab487ea" category="paragraph">次の例に示すように、ノード上のフェイルオーバーグループが表示されます。</block>
  <block id="da98a346ceebae46d5f809b0a76fa466" category="list-text">clusterwide 以外のフェイルオーバー・グループがある場合は ' フェイルオーバー・グループ名と ' そのフェイルオーバー・グループに属するポートを記録します</block>
  <block id="4284018d8ed5fd4750bbe54e42d5131e" category="list-text">次のコマンドを入力して、ノードに VLAN が設定されているかどうかを確認します。</block>
  <block id="c4bc09685f2b51c989913c717d719690" category="paragraph">VLAN は物理ポートを介して設定されます。物理ポートが変わった場合は、あとで手順で VLAN を再作成する必要があります。</block>
  <block id="d12a9049e51fd6e424aa4359a72b4295" category="paragraph">次の例に示すように、ノードに設定されている VLAN が表示されます。</block>
  <block id="c14e11ebbdc4deecee898760f94845d8" category="list-text">ノードに VLAN が設定されている場合は、各ネットワークポートと VLAN ID のペアをメモします。</block>
  <block id="52be7caa23f8083514a04ae35866982c" category="cell">インターフェイスグループまたは VLAN の状態</block>
  <block id="298af6f79d48efea731daf2a5fb8b16a" category="cell">ノード 1 またはノード 2</block>
  <block id="4d65d20e483d642b29f52e830db50552" category="inline-xref">手順 24</block>
  <block id="aa969b6a363de5881c89bb2473ec8437" category="cell">- 完了しました <block ref="9b49efbf480dedd669e8261bbf55488f" category="inline-xref-macro-rx"></block> および <block ref="75c40b124b57824cd48270709549c07b" category="inline-xref-macro-rx"></block>。</block>
  <block id="6c2e7ce55ecae714a2208a38f28950b9" category="cell">ノード 1 とノード 2 ではありません</block>
  <block id="68eb39c6bade33093ea7116e69724b9d" category="cell">に進みます <block ref="75c40b124b57824cd48270709549c07b" category="inline-xref-macro-rx"></block>。</block>
  <block id="371f291ab5b98703097ed6da7c8ed52f" category="list-text">[[man_prepare_nodes_step23]] SAN 環境または SAN 以外の環境で node1 と node2 が存在するかどうかが不明な場合は、次のコマンドを入力して出力を確認します。</block>
  <block id="088bfd1403b81327173d6033bdca4fa2" category="paragraph">network interface show -vserver &lt;vserver_name&gt; -data-protocol iscsi|fcp`</block>
  <block id="acbfcb7305e244387e0051fa5f508401" category="paragraph">SVM に iSCSI も FC も設定されていない場合、次の例のようなメッセージが表示されます。</block>
  <block id="f5ec26fd612e05501dc188ab23c1e529" category="paragraph">ノードが NAS 環境にあることを確認するには '-data-protocol nfs|cifs パラメータを指定した network interface show コマンドを使用します</block>
  <block id="94b030f9c4d0cf01d4214519980e06e7" category="paragraph">SVM に iSCSI または FC が設定されている場合、次の例のようなメッセージが表示されます。</block>
  <block id="6d0f0ab3ba176428ba45b4d0b08cb29a" category="list-text">[man_prepare-to-downgrade 24]] 次の手順を実行して、クラスタ内のすべてのノードがクォーラムにあることを確認します。</block>
  <block id="41755192777732f571a4c320827bfc6d" category="list-text">カーネル内のクラスタサービスの状態をノードごとに 1 回確認します。</block>
  <block id="998af7db71400f287ae13a492f9d193a" category="paragraph">「 cluster kernel-service show 」のように表示されます</block>
  <block id="a911ca42751cdd210f50c82f44049c10" category="paragraph">過半数のノードが正常で相互に通信可能な場合に、クラスタ内のノードがクォーラムを構成している。詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、 _System Administration Reference_( システム管理リファレンス ) にリンクします。</block>
  <block id="6c4e983088f8ed9f67246e1b17b638ca" category="list-text">admin 権限レベルに戻ります。</block>
  <block id="bd63b39861eaf09922b2f696e573be58" category="cell">クラスタの状況</block>
  <block id="cf72c95a9046542261893f709403a8d2" category="cell">SAN が設定されている</block>
  <block id="a2ca851f93b3aab00f2a1a9d215797c0" category="cell">に進みます <block ref="25d05608683c9030994c9dfb7a4f0a9b" category="inline-xref-macro-rx"></block>。</block>
  <block id="6f3802a8c39ecd17753209796818c9f5" category="cell">SAN が設定されていません</block>
  <block id="bb321334fcb278e04a88480d13054b7e" category="inline-xref">手順 29</block>
  <block id="4bf8f638d47f6a7f9ed2b167e6c58b28" category="cell">に進みます <block ref="423690fd8b3d3c5955a0b43d62ab9b67" category="inline-xref-macro-rx"></block>。</block>
  <block id="dca3bf352f9922771b35f1e03c591788" category="list-text">[man_prepare-to-downgrade 26]] 次のコマンドを入力して、 SAN iSCSI または FC サービスが有効になっている各 SVM で、ノード 1 とノード 2 に SAN LIF があることを確認します。</block>
  <block id="d9a90656b27774b99262e8722363244c" category="paragraph">network interface show -data-protocol iscsi|fcp-home-node node_name</block>
  <block id="963e82614f757a8eee0259303f34527b" category="paragraph">コマンドは、ノード 1 とノード 2 の SAN LIF 情報を表示します。次の例は、 Status Admin/Oper 列に up/up と表示されているステータスを示しています。これは、 SAN iSCSI サービスと FC サービスが有効になっていることを示しています。</block>
  <block id="8a70e662724b21080c560e6be7f2c5c4" category="paragraph">また、次のコマンドを入力して、 LIF の詳細情報を確認することもできます。</block>
  <block id="d026c064778006f9c03fdbc86d65f2bb" category="paragraph">'network interface show -instance -data-protocol iscsi|fcp</block>
  <block id="ff03f81e3805469dd3ca43d2811a614d" category="list-text">次のコマンドを入力してシステムの出力を記録し、元のノードの FC ポートのデフォルト設定を取得します。</block>
  <block id="3e2b2bdb70af85f67ec523ee76a4f03b" category="paragraph">コマンドは、次の例に示すように、クラスタ内のすべての FC ポートに関する情報を表示します。</block>
  <block id="b0465c9d2f8edb4e2978de4f3bb93497" category="paragraph">アップグレード後の情報を使用して、新しいノードに FC ポートを設定できます。</block>
  <block id="1c805b4cc00ee084b0e3a5a9c212e9a2" category="list-text">V シリーズシステムまたは FlexArray 仮想化ソフトウェアがインストールされたシステムをアップグレードする場合は、次のコマンドを入力して出力を記録し、元のノードのトポロジに関する情報を取得します。</block>
  <block id="1f21d3af1ebfd92fe19ca32d07d90016" category="paragraph">「 storage array config show -switch 」です</block>
  <block id="c83875af1cfc44dcf937e003fd6ad9bf" category="paragraph">次の例に示すようにトポロジ情報が表示されます。</block>
  <block id="1bd4ed27f87546af3edbba37df0590cf" category="list-text">[man_prepare-to-downgrade 29]] 次の手順を実行します。</block>
  <block id="fd24198d12e02d20f511f9c35f66ebb1" category="list-text">元のいずれかのノードで次のコマンドを入力し、出力を記録します。</block>
  <block id="7321ac6691d90f67ea8ea42f26847df8" category="paragraph">「 service-processor show -node * -instance 」のように表示されます</block>
  <block id="72dfb8d3e52e5d9045db9ad00960535b" category="paragraph">両方のノードの SP に関する詳細情報が表示されます。</block>
  <block id="f1d0d797b1496a22b2143e972a97045a" category="list-text">SP のステータスが「オンライン」であることを確認します。</block>
  <block id="9d69314bda1bdc408f81a03d72f99767" category="list-text">SP ネットワークが設定されていることを確認します。</block>
  <block id="7f4649d278edc769a0ec529585086778" category="list-text">SP の IP アドレスやその他の情報を記録します。</block>
  <block id="2874b759bc0f9d6f832a84f482485f96" category="paragraph">リモート管理デバイスのネットワーク・パラメータ（この場合は SP ）を ' 新しいノードの SP の元のシステムから再利用することができますSP の詳細については ' を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> 『 _System Administration Reference_and the ONTAP 9 Commands ： Manual Page Reference_』 にリンクするには、次の手順を実行します。</block>
  <block id="73e2f3b9e6d19fe1e2189067c752d909" category="list-text">[man_prepare-to-downgrade 30]] 新しいノードに元のノードと同じライセンス機能を設定する場合は、次のコマンドを入力して元のシステムのクラスタライセンスを表示します。</block>
  <block id="57fb8c1782e77bfa17ea95c66f54a6dd" category="paragraph">「 system license show -owner * 」と表示されます</block>
  <block id="4f8f7baa705fb90b9c5bec95668e59f5" category="paragraph">次の例では、 cluster1 のサイトライセンスを表示しています。</block>
  <block id="b83718d5186db84761322d32f4ea05ac" category="list-text">新しいノードの新しいライセンスキーを the _NetApp Support Site_. に取得します。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> からネットアップサポートサイトにリンクしてください。</block>
  <block id="5bb4c97c29100d63e333b5886f7e88b0" category="paragraph">必要なライセンスキーがサイトにない場合は、ネットアップの営業担当者にお問い合わせください。</block>
  <block id="6e97d82c25e14f4edc2307703de3f74f" category="list-text">元のシステムで AutoSupport が有効になっているかどうかを確認するには、各ノードで次のコマンドを入力し、出力を調べます。</block>
  <block id="6be10f97ff0bf527322d5fe2064f26ca" category="paragraph">「 system node AutoSupport show -node node1 、 node2 」</block>
  <block id="28705e432bcaee564beb0750f6d4f55d" category="paragraph">次の例に示すように、コマンド出力には AutoSupport が有効になっているかどうかが表示されます。</block>
  <block id="9d35920fb64314f04ebb4c503b9d4637" category="cell">元のシステム</block>
  <block id="82afadce5c137568366e29a810db005a" category="cell">AutoSupport が有効になっています ...</block>
  <block id="c732f1d7a89abd68a48f92313a9b4364" category="inline-xref">手順 34</block>
  <block id="1ab718a04314b36269d3b2b096aac75a" category="list-text">に進みます <block ref="395265ffe56efe9e97ae9cc3752b2f60" category="inline-xref-macro-rx"></block>。</block>
  <block id="e5358fe562a4d74ac4231d8e23d0b088" category="inline-link-macro">ストレージ暗号化用の外部キー管理サーバの IP アドレスを取得します</block>
  <block id="e080d72a1a31976179b4632b6b55abc6" category="list-text">セクションに移動します <block ref="0427c7f36b4a2a717a929ec10534f5c0" category="inline-link-macro-rx"></block>。</block>
  <block id="9c13f9e2316ce6eb31c97c43c9f42070" category="cell">AutoSupport が有効になっていません ...</block>
  <block id="6fcae9afe7013bc84597d8c4231312ba" category="list-text">AutoSupport を有効にするには、 _System Administration Reference_. の手順に従ってください。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、 _System Administration Reference_. にリンクします。）</block>
  <block id="04f24e11b658105f38ef40a82c24839e" category="paragraph">* 注： AutoSupport は、ストレージ・システムを初めて設定したときに、デフォルトで有効になっています。AutoSupport はいつでも無効にできますが、常に有効にしておく必要があります。AutoSupport を有効にすると、ストレージシステムに問題が発生したときに、その問題や解決策を特定するのに非常に役立ちます。</block>
  <block id="38380a05879fb0225ede644e75b655eb" category="list-text">にアクセスします <block ref="0427c7f36b4a2a717a929ec10534f5c0" category="inline-link-macro-rx"></block> セクション。</block>
  <block id="4179c1d88c83e870ed525f69e82e0369" category="list-text">[man_prepare_nodes _step34]] 元のノードの両方で次のコマンドを入力し、 AutoSupport が正しいメールホストの詳細および受信者の E メール ID で設定されていることを確認します。</block>
  <block id="a8c3aac51d9227fa38d968e2651f9145" category="paragraph">「 system node AutoSupport show -node node_name -instance 」の略</block>
  <block id="f9145af7d3453430abd5b300de96a961" category="paragraph">AutoSupport の詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> 『 _System Administration Reference_and the ONTAP 9 Commands ： Manual Page Reference_』 にリンクするには、次の手順を実行します。</block>
  <block id="1139339a9b05d9d73e22e4329260fdc9" category="list-text">[[man_prepare-to-downgrade 35 、 Step 35]] 次のコマンドを入力して、 node1 のネットアップに AutoSupport メッセージを送信します。</block>
  <block id="2dc3e53d8dbc94d5425e399af7be362e" category="paragraph">「 system node AutoSupport invoke -node node1 -type all -message 」「 Upgrading node1 from platform_old to platform_new 」というメッセージが表示されます</block>
  <block id="4086f5138ec309c4999cbff0dc76073d" category="admonition">この時点では node2 の AutoSupport メッセージはネットアップに送信しないでください。これはあとで手順で送信します。</block>
  <block id="37fdb57fc31ec512b7d4dde37a7ab8d7" category="list-text">[man_prepare-to-downgrade 36 、 Step 36]] 次のコマンドを入力して、 AutoSupport メッセージが送信されたことを確認します。</block>
  <block id="cccac064a74482bb09e58f71e14d1eb8" category="paragraph">「 system node AutoSupport show -node &lt;node1&gt; -instance 」のように表示されます</block>
  <block id="28dd44ad0b0bcceee8ca8498734facba" category="paragraph">「 Last Subject Sent ：」フィールドと「 Last Time Sent ：」フィールドには、最後に送信されたメッセージのメッセージタイトルと、メッセージが送信された時刻が含まれています。</block>
  <block id="ffb1c71dba6391f1528ffd2e0843841a" category="summary">アップグレードを完了する前に、設定を行う必要があります。</block>
  <block id="fdeff716288a3bd8ca18c4ffee31f259" category="paragraph">完了する必要がある場合があります <block ref="750d6dbe3bf1312d0d97a8f03a0d2304" category="inline-xref-macro-rx"></block>または <block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block>、または両方のセクション。</block>
  <block id="5e8f88089134f38f7cf630a3a4ce36ff" category="admonition">ネットアップのマーケティング資料では、 UTA2 という用語を CNA アダプタとポートという意味で使用している場合があります。ただし、 CLI では「 cna 」という用語を使用しています。</block>
  <block id="0f7670789359a9e1e91e25e19d469dad" category="list-text">ノード 3 にオンボードの FC ポート、オンボードの UTA / UTA2 ポート、または UTA / UTA2 カードがなく、ストレージディスクを搭載したシステムをアップグレードする場合は、に進みます <block ref="3b6c063a8efbc88c969c7838f0611434" category="inline-link-macro-rx"></block>。</block>
  <block id="04bc530160a0c8cfe78397922bf1025e" category="list-text">ただし、ストレージアレイを搭載した FlexArray 仮想化ソフトウェアを搭載した V シリーズシステムまたはシステムがあり、 node3 にはオンボードの FC ポート、 UTA / UTA ポート、または UTA / UTA2 カードがない場合は、 _Install に戻り、 node3 を再度起動して再開します <block ref="8334b800bcf351711ec77ec1fb7390b3" category="inline-link-macro-rx"></block>。</block>
  <block id="218c1c22487e3cea0e94aedcabb843e2" category="paragraph">に保存した FC ポート設定の値を node1 で確認しておく必要があります <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block>。</block>
  <block id="53d8e9a89e7df0f2e9d3d1647aa47fa3" category="admonition">* 重要 * ：ご使用のシステムにストレージ・ディスクがある場合は、クラスタ・プロンプトでこのセクションにコマンドを入力してください。V シリーズシステムまたは FlexArray 仮想化ソフトウェアがインストールされていて、ストレージアレイに接続されている場合は、このセクションに示すコマンドを保守モードで入力します。</block>
  <block id="9dc09e5212ac728648450db66b8f3668" category="list-text">[[step1]] 次のいずれかの操作を実行します。</block>
  <block id="fb0e67401f3473ee656312bb98935878" category="cell">に進みます <block ref="4e8d6367d01e7a88b5b6b591ecf5d6db" category="inline-xref-macro-rx"></block></block>
  <block id="32781b45218385923d91bc21b08c6b68" category="cell">に進みます <block ref="79ba4e2202506d0f17b14ab90d196879" category="inline-xref-macro-rx"></block></block>
  <block id="838b228ad3b40461ad1dc100f5671807" category="list-text">[[man_config_3_step2] ノード 3 をブートし、メンテナンスモードにアクセスします。</block>
  <block id="534ca774217e84be533a1aad9cf31936" category="cell">次のコマンドを入力します。 'system node hardware unified-connect show'</block>
  <block id="fe780061729afd0c0f2800209c7c7bf6" category="cell">は、 V シリーズシステムまたは FlexArray 仮想化ソフトウェアを搭載し、ストレージアレイに接続されています</block>
  <block id="b7911a4b9aaa4584cf3072f4df9d0033" category="cell">次のコマンドを「 ucadmin show 」と入力します</block>
  <block id="d0f2b99979906267ea4c720be3fdf8c1" category="list-text">[[step4]] ノード 3 の FC 設定を、ノード 1 から前に取得した設定と比較します。</block>
  <block id="befe3449c034cb6f4631649c7a4ed066" category="list-text">[man_config_3_step5] 次のいずれかの操作を実行します</block>
  <block id="7f3a5152afa49c8421359b8761a9a8ad" category="cell">新しいノードのデフォルトの FC 設定</block>
  <block id="cb4a7a262c1057120daeee2df7839247" category="cell">ノード 1 で取得したものと同じです</block>
  <block id="2b56e7490fdbb3cfe1904501429274b7" category="cell">に進みます <block ref="c6c9a381b48f60f002c0199635146c23" category="inline-xref-macro-rx"></block>。</block>
  <block id="2cc211fd01662dba325fa6afb2cb24dc" category="cell">ノード 1 で取得したものとは異なります</block>
  <block id="3a3387d05eb4dc59724516e63ce89fe1" category="cell">に進みます <block ref="cb1e6c315615cb7630d3b8a437827bc2" category="inline-xref-macro-rx"></block>。</block>
  <block id="8858cbf1016a885e6783f73cde18ddf4" category="list-text">[[man_config_3_step6] 次のいずれかの操作を実行します。</block>
  <block id="eef9069309a77ac006f5011dca4b9f9a" category="paragraph">次のいずれかのコマンドを入力して、必要に応じて node3 の FC ポートを変更します。</block>
  <block id="2ce4edae9e9c97b20fed47972e1d4caf" category="list-text">ターゲットポートをプログラムする場合：「 system node hardware unified-connect modify -type | -t target-adapter port_name</block>
  <block id="51587a6d058865620a3fb14c6d8c9d9a" category="list-text">イニシエータポートをプログラミングする場合：「 system node hardware unified-connect modify -type | -t initiator -adapter port_name</block>
  <block id="f785fd1b7c2d6c5d48b8a31065275b2a" category="cell">必要に応じて、次のコマンドを入力して、 node3 の FC ポートを変更します。 ucadmin modify -m fc -t initiator -f adapter_port_name`-t` is the FC4 type 、 target 、 or initiator* 注： FC ポートはイニシエータとしてプログラムする必要があります。</block>
  <block id="0f46f9b9f7235f322cd04b338ecda49c" category="list-text">[[step7]] 次のいずれかの操作を実行します。</block>
  <block id="85a79ca9227090c23bb3d6d14dbbe0af" category="cell">次のコマンドを入力し、出力を調べて、新しい設定を確認します。「 system node hardware unified-connect show 」</block>
  <block id="ae1a6eb25c428a13de7c805301540516" category="cell">次のコマンドを入力し、出力を確認して、新しい設定を確認します。 ucadmin show</block>
  <block id="2c6e937b15ebe6468c586dd1b4eb466a" category="list-text">[[step8] 次のコマンドを入力して、メンテナンスモードを終了します。</block>
  <block id="b3a919f35f16fa3a39c85eac5d885d2f" category="list-text">[[step9] コマンドを入力したら、ブート環境のプロンプトでシステムが停止するまで待ちます。</block>
  <block id="c62d6d151dbb06716a8276f4f8bb89e0" category="list-text">[[step10]] 次のいずれかの操作を実行します。</block>
  <block id="8e49fbf8016e97e15077debef6c06b54" category="cell">は、 V シリーズシステム、または clustered Data ONTAP 8.3 を実行する FlexArray 仮想化ソフトウェアを備えています</block>
  <block id="51ae224ccdb747cc08ff98ed97fed51f" category="cell">ブート環境プロンプトの「 boot_ontap maint 」で、ノード 3 をブートし、メンテナンスにアクセスします</block>
  <block id="8cf0032370f0f9233266234c2a7feab7" category="cell">は、 V シリーズシステムではないか、 FlexArray 仮想化ソフトウェアがインストールされていません</block>
  <block id="7e422d66a2b07e1e654868dee6aae687" category="cell">ブート環境プロンプトで node3 を起動します</block>
  <block id="1509937ac092a7690a93d056a0c33d58" category="list-text">[man_config_3_step11]] 次のいずれかの操作を実行します</block>
  <block id="3e5bf76136102b434c2a000604dc77c1" category="list-text">ノード 3 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがある場合は、に進みます <block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block>。</block>
  <block id="306e854e226a650b7acec40ba5a0e249" category="list-text">ノード 3 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがない場合は、この手順を省略してください <block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block> にアクセスします <block ref="3b6c063a8efbc88c969c7838f0611434" category="inline-link-macro-rx"></block>。</block>
  <block id="6c804c4adac8740743dd6f41da471795" category="list-text">node3 にカードポートまたはオンボードポートがある場合は、に進みます <block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block>。</block>
  <block id="49844625e7eb80b095f9d3c525f8cba6" category="list-text">node3 にカードポートまたはオンボードポートがない場合は、を省略します <block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block>をクリックし、 _Install に戻り、 node3 をブートして、で再開します <block ref="a4103675c41ea57f7287e0804dd0c9dd" category="inline-link-macro-rx"></block>。</block>
  <block id="f11bd0266651c774d488523db903a725" category="admonition">* 注意 * ：ストレージディスクがある場合は、メンテナンスモードに指示されていないかぎり、クラスタプロンプトでこのセクションのコマンドを入力します。V シリーズシステムを使用している場合や FlexArray 仮想化ソフトウェアを使用していて、ストレージアレイに接続している場合は、このセクションのメンテナンスモードプロンプトでコマンドを入力します。UTA / UTA2 ポートを設定する場合は、メンテナンスモードにする必要があります。</block>
  <block id="d430acf9b1fab77a9b9905bbf1423c57" category="list-text">[[step1] ポートが現在どのように設定されているかを確認します。ノード 3 で次のコマンドを入力します。</block>
  <block id="1f81aa18292065e5242ce30775d96e2c" category="paragraph">次の例のような出力が表示されます。</block>
  <block id="581e0d52eede5c7a9002197a5955188f" category="list-text">[[step3]] 「 system node hardware unified-connect show 」コマンドまたは「 ucadmin show 」コマンドの出力を調べて、 UTA / UTA2 ポートに希望するパーソナリティがあるかどうかを確認します。</block>
  <block id="39e1a687c8a1a3bb49c730ad7b98a3d5" category="cell">に進みます <block ref="2fc3b3e515184c116c95342a9ca8cb9f" category="inline-xref-macro-rx"></block>。</block>
  <block id="aeeda50cd3cc8fa0b7819c50d25802cc" category="cell">手順 5 から 12 を省略して、に進みます <block ref="e8dc02ba0ba84dfdb12d2955f04811ca" category="inline-xref-macro-rx"></block>。</block>
  <block id="8c1235ea1bd5309fe2724d440119a7bf" category="list-text">[man_check_3_step5] 次のいずれかの操作を実行します</block>
  <block id="702b58a3a2c0f7ca9c1ff79304cc3846" category="cell">ストレージディスクがあり、 clustered Data ONTAP 8.3 を実行している</block>
  <block id="177fe53a2ca3ad4477bf20631953c74e" category="cell">node3 を起動し、「 boot_ontap maint 」というメンテナンスモードに切り替えます</block>
  <block id="9bc874604b7939971f9993fe8c042cc5" category="cell">に進みます <block ref="f6d13a5ff9438ee0d4458e3f2ffb2fd3" category="inline-xref-macro-rx"></block>。すでにメンテナンスモードになっている必要があります。</block>
  <block id="3b9a8502a8d7047daccb7dc1e076d1db" category="list-text">[[man_check_3_step6] 次のいずれかの操作を実行します。</block>
  <block id="1f14f34deb68e1ccfd51fd969391f85b" category="cell">に進みます <block ref="e0afe2f8b687f2b937ad04447e0f4504" category="inline-xref-macro-rx"></block>。</block>
  <block id="fe13e7c4af341791013b658ec3446e14" category="cell">手順 7 を省略して、に進みます <block ref="21867c7d0c2b8bc3921bf40e9edec561" category="inline-xref-macro-rx"></block>。</block>
  <block id="5d8cdb858d03ccbaab4933257301ad1f" category="list-text">[[man_check_3_step7] アダプタがイニシエータモードの場合、 UTA / UTA2 ポートがオンラインの場合は、 UTA / UTA2 ポートをオフラインにします。</block>
  <block id="de2f29988a1562cff5aece8243895ec3" category="paragraph">ターゲットモードのアダプタは、メンテナンスモードで自動的にオフラインになります。</block>
  <block id="f5127a07c0da9806f59a276c6a53e07b" category="list-text">[man_check_3_step8] 現在の設定が目的の用途に一致しない場合は、必要に応じて設定を変更します。</block>
  <block id="20a6fed477bc68dded7a110a5998c20e" category="admonition">テープドライブ、 FlexArray 仮想化システム、および MetroCluster 構成には、 FC イニシエータを使用する必要があります。SAN クライアントには FC ターゲットを使用する必要があります。</block>
  <block id="87f04db4bf78b3f620b7363444f3162e" category="list-text">システムを停止します。</block>
  <block id="42a282655a6bcf78e540d618abe8f39f" category="cell">保守モードで再起動します（「 boot_NetApp maint 」）</block>
  <block id="4ccd0b13a5d5d3be43ff2600a91655cc" category="list-text">[[step11]] 設定を確認します。</block>
  <block id="f2cc2cb82b7d41d7e5604b8610c271a3" category="cell">は V シリーズまたは FlexArray 仮想化ソフトウェアを備えており、ストレージアレイに接続されています</block>
  <block id="52b727613ccb81e1e924ffec991b2e74" category="paragraph">次の例の出力は ' アダプタ「 1b 」の FC4 タイプがイニシエータに変更されており ' アダプタ「 2a 」および「 2b 」のモードが「 cna' 」に変更されていることを示しています</block>
  <block id="fa05264b5c812e55c8ce27a16e3cb341" category="list-text">[[step12a] 次のいずれかのコマンドをポートごとに 1 回入力して、任意のターゲットポートをオンラインにします。</block>
  <block id="7bf32aee58782ae16c1d768b4bf38822" category="list-text">[[man_check_3_step13]] ポートをケーブル接続します。</block>
  <block id="ed79a6f393f23524ed190af7b250c69b" category="list-text">[[step14]] 次のいずれかの操作を実行します。</block>
  <block id="eb62d15c59e51a7bf19844fae4092453" category="cell">に進みます <block ref="3b6c063a8efbc88c969c7838f0611434" category="inline-link-macro-rx"></block>。</block>
  <block id="8ec15d413a08247a2b2856ae1be9d192" category="cell">_Install に戻り、 node3 をブートし、で再開します <block ref="a4103675c41ea57f7287e0804dd0c9dd" category="inline-link-macro-rx"></block>。</block>
  <block id="5b6cee1274271b21e1022c2cf2b85b5c" category="summary">ステージ 5 で、 node4 をインストールしてブートし、 node2 のクラスタポートとノード管理ポートを node4 にマッピングし、 node4 のインストールを確認します。</block>
  <block id="fe24254c1d8ef507a0bd18d59832f5a2" category="paragraph">ステージ 5 で、 node4 をインストールしてブートし、 node2 のクラスタポートとノード管理ポートを node4 にマッピングし、 node4 のインストールを確認します。さらに、 node2 によって所有されているデータ LIF と SAN LIF を node3 から node4 に移動し、 node2 のアグリゲートを node3 から node4 に再配置します。</block>
  <block id="488c6e462745f03d8c1dfb3ba61f7258" category="list-text"><block ref="488c6e462745f03d8c1dfb3ba61f7258" category="inline-link-macro-rx"></block></block>
  <block id="a96ea627b3d5d65e112aacf5d7b2c1e1" category="inline-link-macro">node2 によって所有されている NAS データ LIF を node3 から node4 に移動し、 node4 にある SAN LIF を確認します</block>
  <block id="433d8081a28a0d8c06bf54d23d4e1297" category="list-text"><block ref="433d8081a28a0d8c06bf54d23d4e1297" category="inline-link-macro-rx"></block></block>
  <block id="1d92796a70af1d22c31d2b64c9064278" category="inline-link-macro">ノード 2 のルート以外のアグリゲートをノード 3 からノード 4 に再配置します</block>
  <block id="982c7512bced6482868d87520e4bfa82" category="list-text"><block ref="982c7512bced6482868d87520e4bfa82" category="inline-link-macro-rx"></block></block>
  <block id="1de54c7e3bdf046761fff5d36a52656c" category="summary">元のノードと新しいノードでタスクを実行して、アップグレード用に元のノードを準備します。</block>
  <block id="2f0c5661dcce8bdab7165128442db993" category="list-text"><block ref="2f0c5661dcce8bdab7165128442db993" category="inline-link-macro-rx"></block></block>
  <block id="2751979c348fa4496d4f5e77b42bd6f7" category="inline-link-macro">ステージ 2 ：ノード 1 の再配置と撤去</block>
  <block id="1c4bcac5938cde9a8029f70ed983f129" category="list-text"><block ref="1c4bcac5938cde9a8029f70ed983f129" category="inline-link-macro-rx"></block></block>
  <block id="2bff11e37a7944fe4126fc6d0031317c" category="list-text"><block ref="2bff11e37a7944fe4126fc6d0031317c" category="inline-link-macro-rx"></block></block>
  <block id="5031d6e060f03ca2e474f28550af0fd8" category="inline-link-macro">ステージ 4 ：情報を記録し、 node2 を撤去</block>
  <block id="40e3db2ec211fe309d66e01bc6d6863f" category="list-text"><block ref="40e3db2ec211fe309d66e01bc6d6863f" category="inline-link-macro-rx"></block></block>
  <block id="a9e86788143677bb2fee738ac1306c36" category="list-text"><block ref="a9e86788143677bb2fee738ac1306c36" category="inline-link-macro-rx"></block></block>
  <block id="a8f4b0dd7dd43592ec02ea010ada1285" category="list-text"><block ref="a8f4b0dd7dd43592ec02ea010ada1285" category="inline-link-macro-rx"></block></block>
  <block id="874af5eaa64266f1977e5b0930fef688" category="summary">ストレージ暗号化を設定し、クライアント認証キーを確立します。</block>
  <block id="860301dd0e6cb22e496abc5899c88116" category="summary">node2 によって所有されている NAS データ LIF を node3 に移動する必要があります。</block>
  <block id="8a934a6945c2524f52729212e6e676c1" category="doc">node2 によって所有されている NAS データ LIF を node3 に移動する</block>
  <block id="0798efe32af9ed8a849deddb03ef31cf" category="paragraph">アグリゲートを node2 から node3 に再配置したら、 node2 によって所有されている NAS データ LIF を node3 に移動する必要があります。</block>
  <block id="71f0ff9a99872664cb504bc17756a9a7" category="paragraph">アップグレード手順の実行中、リモート LIF は SAN LUN へのトラフィックを処理します。アップグレード時にクラスタやサービスの健全性を維持するために、 SAN LIF を移動する必要はありません。SAN LIF は、新しいポートにマッピングする必要がないかぎり移動されません。ノード 3 からノード 4 に LIF を移動し、ノード 4 がオンラインになったあとで、 LIF が正常に機能しており、適切なポートに配置されていることを確認する必要があります。</block>
  <block id="e2400a5784b6e69a68f8240fc8be98e0" category="list-text">[[step1] ノードごとに次のコマンドを入力し、出力をキャプチャして、 node2 が所有するすべての NAS データ LIF を一覧表示します。</block>
  <block id="83dae04d05ca0d2bbd524535d62e877e" category="paragraph">network interface show -data-protocol nfs|cifs -home-node node2`</block>
  <block id="1dfd4aeb9eb2d67718bb179a87daccb5" category="paragraph">次の例は、 node2 のコマンドの出力を示しています。</block>
  <block id="aa0c21cc929471b59f51bf7561edb3b2" category="cell">ノード 2 の条件</block>
  <block id="141b9f4f51c5a1d44c0555e2cab43f56" category="cell">インターフェイスグループまたは VLAN が設定されている</block>
  <block id="0cce85d021e13ea0d84461759b2a3b08" category="cell">に進みます <block ref="d5cd2572a667e81ae2cb0b0539de3785" category="inline-xref-macro-rx"></block>。</block>
  <block id="d7f8ef927cf7428c7625c268a1c951ef" category="cell">手順 3 を省略して、に進みます <block ref="2dd22df3b6260ee6ac1883b31af6d999" category="inline-xref-macro-rx"></block>。</block>
  <block id="6d3379271564572a595ab2fbc869131a" category="list-text">[man_move_lif_2_3_step3] 次の手順を実行して、 node2 のインターフェイスグループおよび VLAN でホストされている NAS データ LIF を移行します。</block>
  <block id="daaee2c9342de97c2c423f905e0ea71f" category="list-text">[[man_move_lif_2_3_substpa]] ノード 2 のインターフェイスグループでホストされているすべてのデータ LIF を、同じネットワーク上の LIF をホストできるノード 3 のポートに移行するには、各 LIF に対して 1 回、次のコマンドを入力します。</block>
  <block id="048f81150ce15262b658b7de15b84690" category="paragraph">network interface migrate -vserver Vserver_name -lif LIF_name -destination-node node3 – destination-port netport | ifgrp`</block>
  <block id="4fd830a8ef7653e7cc91a40076c34365" category="list-text">LIF のホームポートとホームノードを変更します <block ref="6c89c517e670ac026543379bd9a9844e" category="inline-xref-macro-rx"></block> 各ノードについて次のコマンドを 1 回入力して、 LIF を現在ホストしているポートとノードに接続します。</block>
  <block id="657b6a55549088546a48050df59aeff1" category="paragraph">network interface modify -vserver Vserver_name -lif LIF_name -home-node node3-homeport netport | ifgrp`</block>
  <block id="274dd4ace55dc7cc39f1a5eb3afbcbf1" category="list-text">[man_move_lif_2_3_substpc ]] node2 上の VLAN でホストされている LIF を、 node2 上のポートにノード 3 上のポートに移行します。その際、各 LIF に対して 1 回、次のコマンドを入力して、 VLAN と同じネットワーク上の LIF をホストできます。</block>
  <block id="9ad3609f9c94e5d3764345c4a95d6e85" category="inline-xref">サブステップ c</block>
  <block id="107232f6e653a89ac23c99590a7ea101" category="list-text">LIF のホームポートとホームノードを変更します <block ref="e5ef0b90c6e2aafbe1f927b2cb6685c9" category="inline-xref-macro-rx"></block> LIF をホストしているポートとノードに対して次のコマンドを 1 回入力します。</block>
  <block id="d113d66e692935f5a59a62900427b861" category="list-text">[man_move_lif_2_3_step4] 次のいずれかの操作を実行します</block>
  <block id="20cdfa79ed0499babc80c9a3f7d7297c" category="cell">- 完了しました <block ref="2da0d67c04c83434137e9b301dfd86dd" category="inline-xref-macro-rx"></block> から <block ref="12556117786215462f4f983b89f009f9" category="inline-xref-macro-rx"></block>。</block>
  <block id="44f77dbcf99acc01b3bf655a89bfcc5e" category="cell">手順 5 から 8 をスキップし、完了します <block ref="b80e3f5f2f06a1383cb71c69b52c021e" category="inline-xref-macro-rx"></block>。</block>
  <block id="7f84238811a0744aed44244f31a3bd53" category="cell">NAS と SAN の両方</block>
  <block id="da070fa74bde99b92534bf987c65a7e1" category="cell">- 完了しました <block ref="2da0d67c04c83434137e9b301dfd86dd" category="inline-xref-macro-rx"></block> から <block ref="ccd0910cd159fbfd70d254145a6c4d20" category="inline-xref-macro-rx"></block>。</block>
  <block id="1b8095077175bc0e7f7bb5fbb73e6504" category="list-text">[[man_move_lif_2_3_step5] プラットフォームで同じでないデータポートがある場合は、ブロードキャストドメインにポートを追加します。</block>
  <block id="e8db799447d1b0c26463d2838519203a" category="paragraph">「 network port broadcast-domain add-ports -ipspace IPspace_name -broadcast-domain mgmt -ports node ： port 」のように指定します</block>
  <block id="2f563bb65059883cdd406846273f0ca4" category="paragraph">次の例は、ノード「 6280 」のポート「 e0a 」とノード「 8060-1 」のポート「 e0i 」を IPspace 「 Default 」のブロードキャストドメイン「 mgmt 」に追加します。</block>
  <block id="1062bb6c92253a8c9b640ee692419b26" category="list-text">[[step6] それぞれの LIF に対して次のコマンドを 1 回入力して、各 NAS データ LIF を node3 に移行します。</block>
  <block id="cf94c0385b5c2ed33b1d57956c4697d4" category="paragraph">network interface migrate -vserver Vserver_name -lif LIF_name -destination-node node3 -destination-port netport | ifgrp`</block>
  <block id="0049a5f9500f1de5ca8ef0f389c62f72" category="list-text">[[step7] 両方のノードで次のコマンドを入力し、 NAS LIF が正しいポートに移動されていること、および LIF のステータスが up になっていることを確認します。</block>
  <block id="74736b1b1199beaea5593b316d8e4625" category="paragraph">network interface show -curr-node &lt;node3 &gt; -data-protocol cifs | nfs ’</block>
  <block id="6f72830bc34189a08fe7627d74d89f3b" category="list-text">[[man_move_lif_2_3_step8] いずれかの LIF が停止している場合は、各 LIF に対して 1 回次のコマンドを入力して、 LIF の管理ステータスを「 up 」に設定します。</block>
  <block id="5ebc0a94cbbcb381cb1a98cffc3adac0" category="paragraph">「 network interface modify -vserver &lt;Vserver_name&gt; -lif &lt;LIF_NAME&gt; -status-admin up 」という形式になります</block>
  <block id="ba45f9f836b05d2d37a836a9ed696d6f" category="list-text">[man_move_lif_2_3_step9] インターフェイスグループまたは VLAN が設定されている場合は、次の手順を実行します。</block>
  <block id="74189835f85e9e3f27da7d0ea64f8c56" category="paragraph">「 network port vlan delete -node node_name -port ifgrp -vlan-id vlan_ID` 」の形式で指定します</block>
  <block id="ef57ddf1d14f7687cdf12a4b023fe0ba" category="list-text">次のコマンドを入力し、その出力を調べて、ノードにインターフェイスグループが設定されているかどうかを確認します。</block>
  <block id="d2cddb90501569c80df4ec0677bd9046" category="paragraph">「 network port ifgrp show -node &lt;node_name &gt; -ifgrp &lt;ifgrp_name&gt; -instance 」の形式で指定します</block>
  <block id="32c2f2dc33f1ff3a5d165af69042d610" category="paragraph">次の例に示すように、ノードのインターフェイスグループ情報が表示されます。</block>
  <block id="c02532d4249a0cf1658188c0c95a7129" category="list-text">ノードにインターフェイスグループが設定されている場合は、インターフェイスグループの名前とグループに割り当てられているポートを記録し、各ポートについて次のコマンドを 1 回入力してポートを削除します。</block>
  <block id="a1858c4eb2fed033fc49b2a7a2049d7b" category="paragraph">「 network port ifgrp remove-port -node node_name -ifgrp ifgrp_name -port port_name - port port_name 」のように設定します</block>
  <block id="01db8001b2c207e7c8c82eff0b5717fe" category="summary">現在 node2 にある node1 に属する NAS データ LIF を node2 から node3 に移動する必要があります。ノード 3 の SAN LIF も確認する必要があります。</block>
  <block id="921eaa458ace17addc7c79b9466bf144" category="doc">node1 で所有されている NAS データ LIF を node2 から node3 に移動し、ノード 3 の SAN LIF を確認します</block>
  <block id="57ee8bcad5023aa93029c15b1a6ae0a6" category="paragraph">ノード 3 のインストールを確認し、 node2 から node3 にアグリゲートを再配置する前に、 node2 に現在あるノード 2 に属する NAS データ LIF を node2 から node3 に移動する必要があります。ノード 3 の SAN LIF も確認する必要があります。</block>
  <block id="44bbe343e421273c157c5d1c833a433b" category="list-text">[[step1] ノードごとに次のコマンドを入力し、出力をキャプチャして、 node2 が所有していないすべての NAS データ LIF を一覧表示します。</block>
  <block id="690cd6839e2f529e9d1be34efa6f9791" category="paragraph">network interface show -role data -curr-node node2 -is-home false -home-node node3`</block>
  <block id="4273a0997ee0d6df35945422d9f57ec6" category="cell">インターフェイスグループまたは VLAN が設定されている</block>
  <block id="05aa25da736018fa33e8cc8667b1e0f1" category="cell">に進みます <block ref="fa7afcf3541ce640333b443234c694da" category="inline-xref-macro-rx"></block>。</block>
  <block id="31a8cab14d1d7febef6f8053dcd9552d" category="cell">インターフェイスグループまたは VLAN が設定されていません</block>
  <block id="09b00a0d82c468f9038424665ba3a692" category="cell">手順 3 を省略して、に進みます <block ref="a5ee73999909412ce73c7e745a3cb5c2" category="inline-xref-macro-rx"></block>。</block>
  <block id="8c5ada6be3ca66f32616fd020694ec45" category="list-text">[[man_lif_verify_3_step3]] 次の手順を実行して、インターフェイスグループおよび VLAN でホストされていた NAS データ LIF を、ノード 2 からノード 3 に移行します。</block>
  <block id="fd8bd88e1dcef54d04236465f2b87693" category="list-text">[[man_lif_verify_3_substpa]] インターフェイスグループ上の node1 に属していた node2 でホストされているデータ LIF を、同じネットワーク上の LIF をホストできる node3 のポートに移行するには、各 LIF に対して 1 回、次のコマンドを入力します。</block>
  <block id="494973c7f1f28c90b456a3998b09b84a" category="paragraph">network interface migrate -vserver vserver_name -lif lif_name -destination -node node3 – destination-port netport | ifgrp`</block>
  <block id="630798093592f408d28e43d1a5875c4f" category="list-text">LIF のホームポートとホームノードを変更します <block ref="ffe3d697e3afcad8e9e0e14f978885cb" category="inline-xref-macro-rx"></block> LIF をホストしているポートとノードに対して次のコマンドを 1 回入力します。</block>
  <block id="7c38b19f61b4cf300416bf64071c3a06" category="paragraph">network interface modify -vserver vserver_name -lif lif_name -home-node node3-home-port netport | ifgrp`</block>
  <block id="569a27e0dcf14d4091837fcac510315b" category="list-text">[man_lif_verify_3_substpc ]] VLAN ポートでノード 1 に属していた node2 でホストされているすべてのデータ LIF を、同じネットワーク上の LIF をホストできるポート node3 に移行するには、各 LIF に対して 1 回、次のコマンドを入力します。</block>
  <block id="acdda21dc8c7ea3a875f05cfa2d42fb8" category="list-text">LIF のホームポートとホームノードを変更します <block ref="0ba0c3832c194a002bde244af82cc6e8" category="inline-xref-macro-rx"></block> LIF をホストしているポートとノードに対して次のコマンドを 1 回入力します。</block>
  <block id="f0de8680ab31eb7304741a5d6c335bce" category="list-text">[man_lif_verify_3_step4] 次のいずれかの操作を実行します</block>
  <block id="a8737f289941aae34c7bdcaf30a6f49c" category="cell">- 完了しました <block ref="5bf3f4cb83f848c38272cdda13b03424" category="inline-xref-macro-rx"></block> および <block ref="5afb3629d2897001a44bd62c86195932" category="inline-xref-macro-rx"></block>をクリックして、手順 7 をスキップして完了します <block ref="6f2b0e2c7df1e7ce442716f4a9ac5045" category="inline-xref-macro-rx"></block> から <block ref="d664f7f06c19c1d6c4e1d7d9cba27620" category="inline-xref-macro-rx"></block>。</block>
  <block id="e7bc8e4a360dbc42e9759f708ed40f33" category="cell">ノード上のすべての SAN LIF を無効にしてアップグレード用にダウンにします。 network interface modify -vserver vserver_name -lif lif_name -home-node node_name -home-port netport | ifgrp-status-admin down</block>
  <block id="99025819fe651e3a15c4cafd9ba07587" category="list-text">[man_lif_verify_3_step5] プラットフォームで同じでないデータポートがある場合は、ブロードキャストドメインにポートを追加します。</block>
  <block id="76b84f6ac9c180bd922bf1f7f126e4f3" category="list-text">[man_lif_verify_3_step6] それぞれの LIF に対して次のコマンドを 1 回入力して、各 NAS データ LIF を node3 に移行します。</block>
  <block id="6c255263113a7719b1ecd239473107b4" category="paragraph">network interface migrate -vserver vserver_name -lif lif_name -destination -node node3 -destination-port netport | ifgrp`</block>
  <block id="2a315513f7616cc1af14936ea2d874e2" category="list-text">[man_lif_verify_3_step7] データ移行が永続的であることを確認します。</block>
  <block id="41decee97eaf6a02382e1043cd497047" category="paragraph">network interface modify -vserver vserver_name -lif lif_name -home-node netport | ifgrp-home-node node3`</block>
  <block id="a1bec963768ced37ff6941c78a44a2b2" category="list-text">[man_lif_verify_3_step8] SAN LIF がノード 3 の正しいポートに配置されていることを確認します。</block>
  <block id="585706a23104766700d11344f2e0ba1f" category="paragraph">network interface show -data-protocol iscsi|fcp-home-node node3</block>
  <block id="2a5c2b7daa59600bf737f8138fa7c5d8" category="list-text">LIF のステータスを「 down 」に設定します。</block>
  <block id="c45d65e293bff08cd4322d40820fe3f2" category="paragraph">「 network interface modify -vserver &lt;vserver_name&gt; -lif &lt;LIF_NAME&gt; -status-admin down 」という形式で指定します</block>
  <block id="e6002eba5d1a039b35fcb8536729f448" category="paragraph">「 network interface modify -vserver vserver_name -lif lif_name -home-node new_home_port 」です</block>
  <block id="18cd286e7e66b1d7cc6dd09759e173e8" category="paragraph">「 network interface modify -home-node &lt;port_name&gt; -home-port &lt;port_name&gt; -home-port data -status-admin up 」を参照してください</block>
  <block id="95ecba7b6bea27535042e5096f91549c" category="list-text">いずれかのノードで次のコマンドを入力し、その出力を調べて、 LIF が正しいポートに移動されていること、およびいずれかのノードで次のコマンドを入力して LIF のステータスが「 up 」になっていることを確認します。</block>
  <block id="2e0b337c1378c2a234102f1198e8adba" category="list-text">[[man_lif_verify_3_step11]] いずれかの LIF が停止している場合は、次のコマンドを 1 回入力して、各 LIF について LIF の管理ステータスを「 up 」に設定します。</block>
  <block id="d69a84eb389c545291c152fff3de9999" category="paragraph">「 network interface modify -vserver &lt;vserver_name&gt; -lif &lt;lif_name&gt; -status-admin up 」の形式で指定します</block>
  <block id="78036b97ca6165fc32dd17167726e77f" category="list-text">アップグレード後に行う AutoSupport メッセージを node1 のネットアップに送信します。</block>
  <block id="b430ac926445a5f58cb4f6464a0ee269" category="paragraph">「 system node AutoSupport invoke -node node3 -type all -message 」 node1 successfully upgraded from platform_old to platform_new" 」というメッセージが表示されます</block>
  <block id="30c652bad12788fabddea0712def2e8e" category="doc">ONTAP 9.1 以降の FC スイッチレイアウトを再設定します</block>
  <block id="d30f280fa32f9327e8485ff0aa1b5b70" category="paragraph">既存の FC スイッチレイアウトが ONTAP 9.1 より前に構成されていた場合は、ポートレイアウトを再構成して、最新のリファレンス構成ファイル（ RCF ）を適用する必要があります。この手順は、 MetroCluster FC 構成にのみ適用されます。</block>
  <block id="37ce42e81f71d3eac5866566739a5a56" category="paragraph">ファブリックドメイン内の FC スイッチを特定する必要があります。</block>
  <block id="f2bd3f00211cc48acb66c611b574098b" category="paragraph">管理パスワードと FTP サーバまたは SCP サーバへのアクセスが必要です。</block>
  <block id="19c0b52227bc66456bf8c55fcff3eb89" category="paragraph">既存の FC スイッチレイアウトが ONTAP 9.1 より前に構成されたもので、 ONTAP 9.1 以降でサポートされるプラットフォームモデルにアップグレードする場合は、このタスクを実行する必要があります。ONTAP 9.1 以降用に設定された既存のスイッチレイアウトからアップグレードする場合は、 _not_required です。</block>
  <block id="27370eebc219409a38405d3941b09a1a" category="paragraph">この手順はシステムを停止せずに実行でき、ディスクが初期化されている場合は約 4 時間で完了します（ラックとスタックは除く）。</block>
  <block id="51c3ff1ea95b633c723b087fbf10b31f" category="inline-link-macro">カスタム AutoSupport メッセージは、スイッチの再設定前に送信します</block>
  <block id="cd7f6b17ef2ed204c4c6382062e38468" category="list-text"><block ref="cd7f6b17ef2ed204c4c6382062e38468" category="inline-link-macro-rx"></block></block>
  <block id="ef6f40d3ce7e7a9983b40931e61073f2" category="list-text"><block ref="ef6f40d3ce7e7a9983b40931e61073f2" category="inline-link-macro-rx"></block></block>
  <block id="3ff5cf5ad1c2c9c9e30693bbeb4d8306" category="list-text"><block ref="3ff5cf5ad1c2c9c9e30693bbeb4d8306" category="inline-link-macro-rx"></block></block>
  <block id="21a86fa1fb645db8452b527892434bd3" category="inline-link-macro">スイッチを永続的に無効にします</block>
  <block id="a7cd0f7276da428232eaddd32f025cec" category="list-text"><block ref="a7cd0f7276da428232eaddd32f025cec" category="inline-link-macro-rx"></block></block>
  <block id="7fc77faa536c8e7ba6f065e5930679ee" category="inline-link-macro">新しいケーブルレイアウトを決定します</block>
  <block id="1e3a603a58f58380bbf882725903f11b" category="list-text"><block ref="1e3a603a58f58380bbf882725903f11b" category="inline-link-macro-rx"></block></block>
  <block id="d627b57cf15134483e5785196cf7030f" category="inline-link-macro">RCF ファイルを適用し、スイッチを再接続します</block>
  <block id="d59f7f355b5fe1cff54983019e740407" category="list-text"><block ref="d59f7f355b5fe1cff54983019e740407" category="inline-link-macro-rx"></block></block>
  <block id="f3c7f494d0dbc1a358d6608915190a02" category="inline-link-macro">スイッチを永続的に有効にします</block>
  <block id="7fbb5636a5ddbbcf8eb4ac03b417349e" category="list-text"><block ref="7fbb5636a5ddbbcf8eb4ac03b417349e" category="inline-link-macro-rx"></block></block>
  <block id="0e8d966af50d635bc6072c43a2909953" category="list-text"><block ref="0e8d966af50d635bc6072c43a2909953" category="inline-link-macro-rx"></block></block>
  <block id="56b7bc3034bef19019ebfa88f6cac964" category="paragraph">「 storage aggregate relocation start 」、「 override-vetoes 」、および「 override-vetoes destination-checks 」オプションの詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ONTAP 9 コマンド：マニュアルページリファレンスにリンクするには、次の手順を実行します。</block>
  <block id="de10ab1a09136633c0a0d61641d1973a" category="list-text">[man_aggr_ffail _step1] 次のコマンドを入力して、アグリゲートのリストを表示します。</block>
  <block id="d741a7f5a9101301995b152ddb32e5b0" category="list-text">[[step2] の出力を比較します <block ref="fd60626f79429d907548fd26d9ef209a" category="inline-xref-macro-rx"></block> セクションで node1 用に取得した出力を確認します <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block> 再配置されていないアグリゲートがあることを確認します。</block>
  <block id="51cad6c5dffb7d53bbb0121b4ba9d369" category="list-text">[man_aggr_fil_Step3] ノード 4 の背後にあるアグリゲートの再配置を行います。</block>
  <block id="f51f0d388b73026dbf95e6d91f6386c1" category="list-text">次のコマンドを入力して、 node3 がアグリゲートのホームの所有者になっていることを確認します。</block>
  <block id="5bf0f8993606c9f18dbf04cc257eab62" category="paragraph">ノード 3 をホーム所有者としないアグリゲートは、の同じ再配置コマンドを使用してノード 3 に再配置できます <block ref="d5a5e127c26ff67c138bce9a8ae2c1fa" category="inline-xref-macro-rx"></block>。</block>
  <block id="c2705b28ad093613f8695a94561aeb3e" category="summary">ノード 3 をラックに設置し、ノード 1 の接続をノード 3 に転送し、ノード 3 をブートして、 ONTAP をインストールする必要があります。</block>
  <block id="fbe97acb6a92a57289db38df1cbd3acc" category="paragraph">ノード 3 をラックに設置し、ノード 1 の接続をノード 3 に転送し、ノード 3 をブートして、 ONTAP をインストールする必要があります。そのあとで、ノード 1 のスペアディスク、ルートボリュームに属するディスク、およびルート以外のアグリゲートを node2 に再割り当てする必要があります。</block>
  <block id="57ed4780c0ea12318bd8f9bbfaddce0f" category="paragraph">ノード 1 にインストールされている ONTAP 9 のバージョンが異なる場合は、ノード 3 をネットブートする必要があります。node3 のインストールが完了したら、 Web サーバに保存されている ONTAP 9 イメージからブートします。その後、以降のシステムブートで使用するブートメディアデバイスに正しいファイルをダウンロードできます。を参照してください <block ref="4815c2d091d790c1d3bab94177b38eaf" category="inline-link-macro-rx"></block>。</block>
  <block id="0570d4a42e9be3c955a39beb93846d1e" category="paragraph">ただし、ノード 1 にインストールされている ONTAP 9 のバージョンが同じかそれ以降である場合は、ノード 3 をネットブートする必要はありません。</block>
  <block id="9811d17595c532c211fe17a338c29af7" category="admonition">* 重要：ストレージアレイに接続された V シリーズシステム、またはストレージアレイに接続された FlexArray 仮想化ソフトウェアを使用するシステムをアップグレードする場合は、この作業を完了する必要があります <block ref="533e5b5383ee7eeec7355f568e8aaf6b" category="inline-xref-macro-rx"></block> から <block ref="593996bb06ec10671cada9089fb35dd4" category="inline-xref-macro-rx"></block>をクリックします <block ref="72140e6a9de023ebc205559b767779ea" category="inline-xref-macro-rx"></block> およびの手順に従ってください <block ref="b874d68563e926f19d0f15015f15f190" category="inline-link-macro-rx"></block> および <block ref="a9e7644d0d01665bbdf613cdb831fa7f" category="inline-link-macro-rx"></block> 必要に応じて、保守モードでコマンドを入力します。その後、このセクションに戻ってからを使用して再開する必要があります <block ref="239474d202713b3a406727408fd68f72" category="inline-xref-macro-rx"></block>。ただし、ストレージディスクが搭載されたシステムをアップグレードする場合は、このセクション全体を実行し、に進みます <block ref="b874d68563e926f19d0f15015f15f190" category="inline-link-macro-rx"></block> および <block ref="a9e7644d0d01665bbdf613cdb831fa7f" category="inline-link-macro-rx"></block>クラスタ・プロンプトでコマンドを入力します。</block>
  <block id="1b5474698e4bc6bfa928589ed23b1571" category="list-text">[[man_install3_step1] ノード 3 のラックスペースがあることを確認します。</block>
  <block id="773d119bfcf7806a94138f5cf32996fe" category="list-text">[[step2] ノードモデルの _ インストールおよびセットアップ手順 _ に従って、ラックにノード 3 をインストールします。</block>
  <block id="5528857f98fded77afccd9d97a9a0711" category="list-text">[[step3]] ケーブルノード 3 を接続し、ノード 1 からノード 3 に接続を移動します。</block>
  <block id="e233e040e6ab1ade1870396947dd6b5a" category="admonition">ほとんどのプラットフォームモデルには一意のインターコネクトカードモデルがあるため、インターコネクトカードまたはクラスタインターコネクトケーブルの接続を node1 から node3 に移動する必要はない場合があります。MetroCluster 構成の場合、 FC-VI ケーブルの接続を node1 から node3 に移動する必要があります。新しいホストに FC-VI カードがない場合は、 FC-VI カードの移動が必要になることがあります。</block>
  <block id="63cc66bd900313017fb0834b1cbbbc81" category="list-text">[[man_install3_step4]] ノード 3 の電源をオンにしてから、コンソール端末で Ctrl+C キーを押してブートプロセスを中断し、ブート環境プロンプトにアクセスします。</block>
  <block id="6c2cb2a49908831d5791f25bb5371a3d" category="list-text">[[man_install3_step5]] で警告メッセージが表示される場合 <block ref="189d751c0d059b7e2fcaef080c81111f" category="inline-xref-macro-rx"></block>を使用して、次の操作を実行します。</block>
  <block id="7efd430adfeaf9ea4f3e48e21d2c4f96" category="admonition">* 注意 * ：遅延は無視しないでください。バッテリーの充電に失敗すると、データが失われるおそれがあります。</block>
  <block id="5b8c681411bac96a813b6b62eba17d9c" category="list-text">[[man_install3_step6] 次のいずれかの操作を実行します。</block>
  <block id="ad9768b53d0a33cd1368bd0b1d373a3b" category="cell">手順 7 から 12 を省略して、に進みます <block ref="85131af613f0169831e213f11ca11041" category="inline-xref-macro-rx"></block>。</block>
  <block id="6dd9e2c232d9aa889adc2bdc1d259396" category="list-text">に進みます <block ref="fae618cfa140cbca52d057afef5df1da" category="inline-link-macro-rx"></block> をクリックし、サブセクションを完了します <block ref="b874d68563e926f19d0f15015f15f190" category="inline-link-macro-rx"></block> および <block ref="a9e7644d0d01665bbdf613cdb831fa7f" category="inline-link-macro-rx"></block>必要に応じて、システムに適用されます。</block>
  <block id="66b6cfbf89b613b9a80d84ec1d7b5fa0" category="list-text">このセクションに戻って、から始めて残りの手順を実行します <block ref="239474d202713b3a406727408fd68f72" category="inline-xref-macro-rx"></block>。</block>
  <block id="120d825f771126cb963c76c2ff005e6d" category="list-text">[man_install3_step7] 新しいノードの FC イニシエータポートをスイッチゾーンに追加します。</block>
  <block id="12aae7624013a12c0ade8f6f2e309d62" category="paragraph">システムにテープ SAN がある場合は、イニシエータをゾーニングする必要があります。手順については、ストレージアレイおよびゾーニングに関するドキュメントを参照してください。</block>
  <block id="0dd10d8b45274d5c198af78bfab2e446" category="list-text">[man_install3_step8] FC イニシエータポートをストレージアレイに新しいホストとして追加し、アレイ LUN を新しいホストにマッピングします。</block>
  <block id="5cca5c853f000ca16ba17533a6116cd7" category="list-text">[[man_install3_step9] ストレージアレイのアレイ LUN に関連付けられたホストまたはボリュームグループでの World Wide Port Name （ WWPN ；ワールドワイドポート名）の値を変更します。</block>
  <block id="6a81c1ece5ddd721a1ff7521454f87c9" category="list-text">[man_install3_step10] ：構成でスイッチベースのゾーニングを使用している場合は、ゾーニングを調整して新しい WWPN 値を反映させます。</block>
  <block id="fa1040cb978ca2065cad32e28e6d9d58" category="list-text">[[man_install3_step11]] アレイ LUN が node3 に表示されることを確認します。</block>
  <block id="d8096974edc78f9fe2db726869876695" category="paragraph">各 FC イニシエータポートで認識されるすべてのアレイ LUN が表示されます。アレイ LUN が表示されない場合は、このセクションで後述する node1 から node3 にディスクを再割り当てすることはできません。</block>
  <block id="b69192040391e08f61402b09c27822b8" category="list-text">[[man_install3_step12]] Ctrl+C キーを押してブートメニューを表示し、メンテナンスモードを選択します。</block>
  <block id="fe85761838c7d215174afe4ace6c66f0" category="list-text">[[man_install3_step13]] メンテナンスモードのプロンプトで、次のコマンドを入力します。</block>
  <block id="907c22891918b5b80e66731ae6eed77e" category="list-text">[[man_install3_step14]] 次のいずれかの操作を実行します</block>
  <block id="8b2f23f3c3f7445164b524932e61d65b" category="cell">アップグレード後のシステムの構成</block>
  <block id="1f00007c6687ede4ed2d2b6e91ce451d" category="cell">デュアルシャーシ構成（コントローラが別々のシャーシに搭載されている場合）</block>
  <block id="1ec921c80439dda2ee883653fa1acb7b" category="cell">に進みます <block ref="4332c8cc4c85f33bda2a347fe16e2dc6" category="inline-xref-macro-rx"></block>。</block>
  <block id="0471a95f16e566048e66f2d81f432967" category="cell">シングルシャーシ構成（コントローラが同じシャーシに搭載されている場合）</block>
  <block id="0aaa18e158b2b22ed630223549710480" category="list-text">コンソールケーブルを node3 から node4 に切り替えます。</block>
  <block id="ffb09ffc35bea252e4e21d97d6400ddf" category="list-text">ノード 4 の電源をオンにしてから、コンソール端末で Ctrl+C キーを押してブートプロセスを中断し、ブート環境プロンプトにアクセスします。</block>
  <block id="85418bdb866bf209cc89fc9250fd0f04" category="paragraph">両方のコントローラが同じシャーシ内にある場合は、電源はすでにオンになっているはずです。</block>
  <block id="0f26d4df0f59d99659fc6ffdd8539aff" category="paragraph">* 注： node4 はブート環境のプロンプトのままにします。その場合はの node4 に戻ります <block ref="f326c815b47f4f2909494bae5cd735d5" category="inline-link-macro-rx"></block>。</block>
  <block id="620bed07fd84663ccd35004111b0a13c" category="list-text">に警告メッセージが表示される場合は <block ref="189d751c0d059b7e2fcaef080c81111f" category="inline-xref-macro-rx"></block>の手順に従ってください <block ref="593996bb06ec10671cada9089fb35dd4" category="inline-xref-macro-rx"></block></block>
  <block id="a70d58ca96ede2bc6122de5eaba9afaf" category="list-text">コンソールケーブルを node4 から node3 に戻します。</block>
  <block id="7c0d2cf152b2cde561a140a996176952" category="list-text">[[man_install3_step15]] ONTAP の node3 の設定：</block>
  <block id="7238df7481760a2449dc9206c452edfe" category="list-text">[man_install3_step16]] NetApp Storage Encryption （ NSE ）がこの構成で使用されている場合、「 setenv bootarg.storageencryption.support 」コマンドは「 true 」に設定する必要があります。また、 node1 構成のロード後にブートループが発生しないように、「 kmip.init.maxwait` variable needs to be 'off' 」に設定する必要があります。</block>
  <block id="0546806bd19b344e7d0ca13460d96992" category="list-text">[[man_install3_step17]] node3 にインストールされている ONTAP のバージョンが、 node1 にインストールされている ONTAP 9 のバージョンと同じかそれ以降である場合は、ディスクをリストして新しい node3 に再割り当てします。</block>
  <block id="7ce11de7229520360ee33defaf28ec82" category="admonition">* 警告 * ：この新しいノードが他のクラスタまたは HA ペアで使用されたことがある場合は、次に進む前に「 wipeconfig 」を実行する必要があります。これを行わないと、サービスの停止やデータの損失が発生する可能性があります。交換用コントローラを以前に使用したことがある場合、特にコントローラが ONTAP 7-Mode を実行していた場合は、テクニカルサポートにお問い合わせください。</block>
  <block id="b04b66d312941ba2b1d5910ec5f5fb36" category="list-text">[[man_install3_step18]] CTRL-C を押してブートメニューを表示します。</block>
  <block id="7be8c6136747afe24ab6f25f931c2451" category="list-text">[[man_install3_step19]] 次のいずれかの操作を実行します</block>
  <block id="b65dee077de24058e64aa96e60e2a56a" category="cell">Does _ not_ have the correct or current ONTAP version on node3 （ノード 3 に正しい バージョンまたは現在の バージョンがありません</block>
  <block id="a17dd4e0d7995e108ec012fad7f027d2" category="cell">に進みます <block ref="f66707bf1ec53e37a427dd9510962619" category="inline-xref-macro-rx"></block>。</block>
  <block id="de22fad1fba6c28f624ef4e272674d1c" category="cell">ノード 3 に正しいバージョンまたは最新バージョンの ONTAP があること</block>
  <block id="46f709b9c191a3a487187b13c2365dfb" category="cell">に進みます <block ref="c27981c94d7a26c42c925c89e96e7aa2" category="inline-xref-macro-rx"></block>。</block>
  <block id="fd96d8e5cccd1d83cf17d6327a03d1c6" category="list-text">[[man_install3_step20]] 次のいずれかの操作を実行して、ネットブート接続を設定します。</block>
  <block id="4c1c25953b4f042240caac106d2566d7" category="admonition">ネットブート接続として管理ポートおよび IP を使用する必要があります。データ LIF IP を使用しないでください。使用していると、アップグレードの実行中にデータが停止する可能性があります。</block>
  <block id="5de475f75526f08af360b918b25d9c72" category="cell">ブート環境プロンプトで「 ifconfig e0M -auto 」コマンドを入力すると、接続が自動的に設定されます</block>
  <block id="8348f733ee288862d85696832806d154" category="cell">ブート環境プロンプトで次のコマンドを入力して、接続を手動で設定します。 ifconfig e0M -addr= filer_addr -mask= netmask -gw= gateway -dns= dns_addr domain= dns_domain`filer_addr' は、ストレージシステムの IP アドレスです。「 netmask 」は、ストレージ・システムのネットワーク・マスクです。「 gateway 」はストレージ・システムのゲートウェイです。「 dns_addr 」は、ネットワーク上のネームサーバの IP アドレスです。「 dns_domain 」はドメインネームサービス（ DNS ）ドメイン名です。このオプションパラメータを使用する場合は、ネットブートサーバの URL に完全修飾ドメイン名を指定する必要はなく、サーバのホスト名だけを指定します。* 注 * ：インターフェイスによっては、他のパラメータが必要になる場合があります。ファームウェア・プロンプトで「 help ifconfig 」と入力すると、詳細が表示されます。</block>
  <block id="c6515be7805d880dbdafbd44b289b127" category="list-text">[[man_install3_step21] ノード 3 でネットブートを実行します。</block>
  <block id="060bac7551430a178937e2648b5887ad" category="cell">netboot\http://web_server_ip/path_to_webaccessible_directory/netboot/kernel`</block>
  <block id="00b4984c2d25fdcefc8d29921eef1f1e" category="cell">netboot\http://web_server_ip/path_to_webaccessible_directory/ontap_version_image.tgz`</block>
  <block id="59dc84b79b5b387630517d0425882b8b" category="paragraph">「 path_to_the_web-accessible_directory 」は、「 ONTAP_version_image.tgz 」をダウンロードした場所を指します <block ref="d7ca8bd1bdacba48998a89c59527e756" category="inline-link-macro-rx"></block> の項で、 netboot_ の準備を参照してください。</block>
  <block id="2fb52103bc9daf7b4aede017a96951c9" category="list-text">[man_install3_step22]] ブートメニューから、オプション * （ 7 ） Install new software * first を選択します。</block>
  <block id="69a0e067620a40fba4263752d3fe4568" category="paragraph">コントローラのアップグレードではなく、 ONTAP による環境の無停止アップグレードも記録されています。</block>
  <block id="f830f5c2c7020add65334fcbe428e442" category="admonition">新しいノードを希望するイメージに更新する場合は、必ずネットブートを使用してください。別の方法で新しいコントローラにイメージをインストールすると、正しいイメージがインストールされない場合があります。この問題環境はすべての ONTAP リリースに対応しています。</block>
  <block id="04099f33ed449c6b9e9de3b50608f5b9" category="list-text">[man_install3_step23]] 手順を続行するかどうかを確認するメッセージが表示されたら 'y`' と入力し ' パッケージのプロンプトが表示されたら ' 次の URL を入力します</block>
  <block id="3c0f763f2bc1dd7e6fadcfba8981f852" category="paragraph">http://web_server_ip/path_to_web-accessible_directory/ontap_version_image.tgz` にアクセスします</block>
  <block id="2c7541d49584476284eeeb476f886996" category="list-text">[[man_install3_step24]] 次の手順を実行します</block>
  <block id="f5344ffb10f5a3797c46c51d263a2247" category="list-text">[man_install3_step25]] '*(5) Maintenance mode boot を選択しますこれには '5` を入力し ' ブートを続行するように求められたら 'y' を入力します</block>
  <block id="785f077ce03eca259bde1ebc98236191" category="list-text">[[man_install3_step26]] 続行する前に、に進みます <block ref="fae618cfa140cbca52d057afef5df1da" category="inline-link-macro-rx"></block> ノードの FC ポートまたは UTA / UTA2 ポートに必要な変更を加えるため。</block>
  <block id="28d8bed0b221acc406520dd121da3607" category="paragraph">これらのセクションで推奨される変更を行ってからノードをリブートし、メンテナンスモードに切り替えます。</block>
  <block id="3c2b28e2fbf2a2223e837ab88d03f849" category="list-text">[[man_install3_step27]] node3 のシステム ID を確認します。</block>
  <block id="5f2c6daaf0c238ad93e5125dbf2761ac" category="admonition">コマンドを入力すると、「ディスクはありません」というメッセージが表示される場合があります。これはエラーメッセージではないため、手順を続行できます。</block>
  <block id="11856588314d0c959b2b916a938edde8" category="inline-link-macro">ルート以外のアグリゲートを node1 から node2 に再配置します。</block>
  <block id="5193fe09e1ceefb41d5d867b112b9d76" category="list-text">[man_install3_step28] 再割り当てするノードのスペア、ルートに属するディスク、およびでノード 2 に再配置されなかったルート以外のアグリゲート <block ref="b90d8347ded957c31748eee44116abad" category="inline-link-macro-rx"></block>。</block>
  <block id="e58f70cf5e99e435b7646dac5761bf14" category="paragraph">システムに共有ディスクがあるかどうかに応じて、適切な形式の「 disk reassign 」コマンドを入力します。</block>
  <block id="b7e4748ce69e686648ca756a108c4b9a" category="cell">ディスクタイプ</block>
  <block id="7dcd3c42056665a1fe2861837141a4ef" category="cell">実行するコマンド</block>
  <block id="0750281966aad85c85445c89d7c91b52" category="cell">「ディスクの再割り当て -s node1_sysid -d node3_sysid -p node2 _sysid 」</block>
  <block id="4f477aa8d74177d31f1821bc7c80ca24" category="cell">ディスクを共有しない</block>
  <block id="8afa8f9cacfed8bdd6f0488284dc4065" category="cell">「ディスクの再割り当て -s node1_sysid -d node3_sysid 」</block>
  <block id="848124e1b504add6b8579f483956bfa5" category="paragraph">'node1 _sysid' の値には ' で取得した情報を使用します <block ref="111c70a978efb37ba3bd0ea564da1d79" category="inline-link-macro-rx"></block>。'node3_sysid' の値を取得するには 'ysconfig' コマンドを使用します</block>
  <block id="fa1b01822fe176dec2ddb8bb6b318a7d" category="paragraph">「 disk reassign 」コマンドは、「 node1 _ sysid 」が現在の所有者であるディスクだけを再割り当てします。</block>
  <block id="41ba4da5f40ea13d5dbc91aee57574fa" category="list-text">[man_install3_step29]] 「 n` 」と入力します。</block>
  <block id="fa85c8699d7f56dacbb4e8faea6f7ca9" category="list-text">[man_install3_step30]] 「 y 」と入力します</block>
  <block id="3048e99df5c1d939bc99597cf7c39563" category="list-text">[man_install3_step31]] 「 y 」と入力します。</block>
  <block id="fae6f0fa0e0d1485407928519885a027" category="list-text">[[man_install3_step32]] 外付けディスクがあるシステムから、内蔵ディスクと外付けディスクをサポートするシステム（ AFF A800 システムなど）にアップグレードする場合は、 node1 アグリゲートを root として設定して、 node1 のルートアグリゲートからブートするようにします。</block>
  <block id="d3d32ef75ce9ff503846dd7cba71bf68" category="admonition">* 警告 * ：次の手順を記載された順序で実行する必要があります。正しく実行しないと、原因が停止したり、データが失われたりする可能性があります。</block>
  <block id="78eac47117b1548ba46bbe2c967c2d0e" category="list-text">必要に応じて、 node1 アグリゲートをオンラインにします。</block>
  <block id="166de6b414dfe6910615ee231f5b5ac9" category="paragraph">'aggr_online root_aggr_from_node1'</block>
  <block id="ac66c3891b6bd6651ca36713f2cbc96d" category="list-text">ノード 3 が元のルートアグリゲートからブートしないようにします。「 aggr offline root_aggr_on_node3 」</block>
  <block id="4b869d3d95b4e6c45358c7bc8e4b934b" category="paragraph">「 aggr options &lt;aggr_from_node1&gt; root 」のように指定します</block>
  <block id="b954307d2b22ae21f23dbb0d3021f158" category="list-text">[man_install3_step33]] コントローラとシャーシが 'ha' として構成されていることを確認します</block>
  <block id="87e6946315bfe910b90ed3288541cb11" category="paragraph">次に、 ha-config show コマンドの出力例を示します。</block>
  <block id="9ed2f003b53007950b273f820637f2f3" category="paragraph">システムは、 HA ペア構成かスタンドアロン構成かを PROM に記録します。状態は、スタンドアロンシステムまたは HA ペア内のすべてのコンポーネントで同じである必要があります。</block>
  <block id="915fe2ff566601b3b69119813a6a715c" category="paragraph">コントローラとシャーシが「 HA 」として構成されていない場合は、次のコマンドを使用して構成を修正します。</block>
  <block id="43a7c5c250e7fdd6688e153749ea1e66" category="list-text">[man_install3_step34]] ノード 3 のメールボックスを破棄します</block>
  <block id="8d299662551d8d2c41258f4f6d6c9a12" category="paragraph">コンソールに次のメッセージが表示されます。</block>
  <block id="675438e125383dfd4814c428aefc13d8" category="list-text">[man_install3_step35]] ローカルメールボックスを破棄することを確認するプロンプトで 'y' を入力します</block>
  <block id="0f364398a13cd3160c5a3eba4374e4ce" category="list-text">[[man_install3_step36]] メンテナンスモードを終了します。</block>
  <block id="6c2cda43f17004428fa50b03b8e373c3" category="list-text">[man_install3_step37]] node2 で、システムの日付、時刻、およびタイムゾーンを確認します。</block>
  <block id="dd26f958a5b55f32337b614d1f3ab0b4" category="list-text">[man_install3_step38]] ノード 3 で、ブート環境プロンプトで日付を確認します。</block>
  <block id="0c06e4208a8e928e9b4bef1d6977045b" category="list-text">[[man_install3_step39]] 必要に応じて、 node3 の日付を設定します。</block>
  <block id="837e654f683f43c3c5fa5a8cbc3e1758" category="list-text">[man_install3_step40]] ノード 3 で、ブート環境のプロンプトで時刻を確認します。</block>
  <block id="eddc7836dd13de8cd3248be302e5a1a2" category="list-text">[[man_install3_step41] 必要に応じて、 node3 に時間を設定します。</block>
  <block id="39556538db3e5f05fbb53219f4983f96" category="inline-xref">手順 28</block>
  <block id="7485a5597807044bfa9f5d885f51e65e" category="list-text">[[man_install3_step42]] パートナーシステム ID がで説明したとおりに正しく設定されていることを確認します <block ref="a332b57e87c8a775e38e07b999240874" category="inline-xref-macro-rx"></block> アン下の -p スイッチ：</block>
  <block id="ec135f98d38764e511e3c524db87080e" category="list-text">[[man_install3_step43] 必要に応じて、 node3 にパートナーシステム ID を設定します。</block>
  <block id="7cab439150d9019f1bfd1705f608418d" category="list-text">[man_install3_step44]] ブート環境プロンプトでブートメニューにアクセスします</block>
  <block id="09022876876a6198264f6a07698a4d4c" category="list-text">[man_install3_step45]] ブートメニューで ' プロンプトで '6` を入力して 'option *(6) Update flash from backup config* を選択します</block>
  <block id="e5dbae26747d85c8b1145f23fe152ba6" category="list-text">[[man_install3_step46]] プロンプトで「 y 」と入力します。</block>
  <block id="8a149c3025530503ca7711ed784cd091" category="paragraph">ブートが正常に続行され、システム ID の不一致を確認するよう求められます。</block>
  <block id="c818f07a4851d5ab8b1a806cff312e25" category="list-text">[[man_install3_step47]] 次の例に示すように、不一致を確認します。</block>
  <block id="fb74f9c51a3457e88ae16fbed6c6b978" category="paragraph">正常にブートする前に、ノードが 1 回限りのリブートを実行する可能性があります。</block>
  <block id="f52332ab232b64dcde0ca0ea781c1755" category="list-text">[[man_install3_step48]] node3 にログインします。</block>
  <block id="0d5eded42a5e8cbfa58553f5dd4cd263" category="summary">node2 のルート以外のアグリゲートを node3 に再配置したら、そのアグリゲートを node3 から node4 に再配置する必要があります。</block>
  <block id="e0aebc9247605127583b639cffd5f31e" category="doc">node2 #8217 を、ノード 3 からノード 4 にルート以外のアグリゲートを再配置します</block>
  <block id="a6bef5c01b3429b867cf90c4a3de3fac" category="list-text">[[man_relocate_3_4_Step1] いずれかのコントローラで次のコマンドを入力し、出力を調べて再配置するルート以外のアグリゲートを特定します。</block>
  <block id="086b43d0e04175cf8790abef24a23665" category="paragraph">「 storage aggregate show-owner-name node3 -home-id node2 _system_id`</block>
  <block id="d7a08960a9315fad49e6564d33d4cb9c" category="list-text">次の手順を実行して、アグリゲートを再配置します。</block>
  <block id="8e8511da8932baf12f2a23e74d02e1c7" category="list-text">いずれかのノードで次のコマンドを入力して、 advanced 権限レベルにアクセスします。</block>
  <block id="f30ab70d9dfcf364c12d5f98b0968ba7" category="paragraph">「 storage aggregate relocation start -node node3 -destination node4 -aggregate-list aggr_name1 、 aggr_name2 ……」 -nd-controller-upgrade true</block>
  <block id="1aa99f376709f3c0651ec2c29125ea92" category="paragraph">アグリゲートリストは、で取得したノード 4 が所有するアグリゲートのリストです <block ref="ba9af23ac982f5cc7837b1ecc9c3cb47" category="inline-xref-macro-rx"></block>。</block>
  <block id="35b5d5d5526d39377fa3fde3fe0919cd" category="paragraph">再配置はバックグラウンドで実行されます。アグリゲートの再配置には数秒から数分かかる場合があります。この時間には、クライアントの停止部分と停止部分の両方が含まれます。このコマンドでは、オフラインまたは制限されたアグリゲートが再配置されません。</block>
  <block id="edcc2ad4cfcd55c9715e9c9b93b871f5" category="list-text">[[step3]] 再配置のステータスを確認します。</block>
  <block id="1f9c1a513cadbe90207536ee44ba50c9" category="paragraph">「 storage aggregate relocation show -node node3 」を参照してください</block>
  <block id="435f14e8c9936aa21efde9eac795b40f" category="paragraph">アグリゲートが再配置されると、そのアグリゲートに対しては「 1 」と表示されます。</block>
  <block id="48cbb5f03f0f49e19a1fa9ce8f82961f" category="admonition">node2 のすべてのアグリゲートが再配置されてノード 4 に再配置されてから、次の手順に進みます。</block>
  <block id="b81c90895c008292ba5de518bf5f82a3" category="cell">再配置する対象</block>
  <block id="ffd498a9668905f8533b8e27b647969c" category="cell">すべてのアグリゲートが完了しました</block>
  <block id="80e9ee80960399cedd826a005aef0a59" category="cell">に進みます <block ref="77e0750fdfbf6d57fd18f2bfe5d7ed8c" category="inline-xref-macro-rx"></block>。</block>
  <block id="773fa54d2a554dd5ed9a1437e409ed98" category="cell">アグリゲートに障害が発生したか、拒否された</block>
  <block id="2716a9803b0e07013e6cd314ef080ce2" category="list-text">EMS ログで対処方法を確認します。</block>
  <block id="434233acf6409db55ccbef4618a05f4c" category="list-text">対処方法を実行します。</block>
  <block id="8efb346b295cc43a0b01aa0890f6da31" category="paragraph">「 storage aggregate relocation start -node node3 destination node4 aggregate-list aggr_name1 、 aggr_name2 …… nd-controller-upgrade true</block>
  <block id="32a147207e605041251ef80abd4e6acf" category="paragraph">アグリゲートリストには、障害が発生したアグリゲートまたは拒否されたアグリゲートが表示されます</block>
  <block id="7b6a4090ff6553e6b643348d522b6560" category="list-text">次のコマンドを入力して、 admin レベルに戻ります。</block>
  <block id="91fabe0a54e8933e0d8a78d90297363f" category="paragraph">必要に応じて、次のいずれかの方法で強制的に再配置を実行できます。</block>
  <block id="fac06d8e56699ef41a841be6b176ebd7" category="list-text">拒否チェックの無視</block>
  <block id="2af820da1a1b18a7aaeb296667169248" category="paragraph">「 storage aggregate relocation start -override-vetoes -nd-controller-upgrade 」を実行します</block>
  <block id="d43b683fda30183131790fb642203a1d" category="list-text">デスティネーションチェックの無効化</block>
  <block id="01c6e1a269dc83c83d6e3aa64688f33f" category="paragraph">「 storage aggregate relocation start -override-destination-checks -ndocontroller -upgrade 」を参照します</block>
  <block id="74e5caecf2b87f363c4a9dae7dca9c15" category="list-text">[man_relocate_3_4_Step5] - ノード 2 のすべての非ルートアグリゲートがオンラインであり、ノード 4 の状態であることを確認します。</block>
  <block id="28b5866cf6b60125947b501f1d057f36" category="paragraph">「 storage aggregate show -node &lt;node4 &gt; -state offline-root false 」のように表示されます</block>
  <block id="ba83d23180997e074fb16dcfc2cd6da8" category="paragraph">node2 アグリゲートがのコマンドの出力に表示されています <block ref="ba9af23ac982f5cc7837b1ecc9c3cb47" category="inline-xref-macro-rx"></block>。</block>
  <block id="176e1e5a47c3db6bc56e4ccb10905065" category="list-text">オフラインになったアグリゲートや外部になったアグリゲートがある場合は、各アグリゲートに対して次のコマンドを使用してオンラインにします。</block>
  <block id="00751ef0752943fad6f5c251990dbefb" category="list-text">ノード 2 のアグリゲート内のすべてのボリュームがノード 4 でオンラインになっていることを確認します。</block>
  <block id="9fe3979261ad706bcee5b4c047e18834" category="list-text">ノード 4 でオフラインになっているボリュームがある場合は、オンラインにします。</block>
  <block id="54ab7b4b354c31db3c1958974da7349a" category="list-text">ノード 4 のアップグレード後の AutoSupport メッセージをネットアップに送信します。</block>
  <block id="61be86123ac7716617c75c3d56ea68a9" category="paragraph">「 system node AutoSupport invoke -node node4 -type all -message 」 node2 が platform_old から platform_new にアップグレードされました</block>
  <block id="9b06ee736f73d9cf0dfedcd1bbba712a" category="summary">手順の複数の段階で問題が発生する可能性があります。</block>
  <block id="01f65b0ce58a361a4bddaba0ba5ccd2c" category="summary">Config Advisor を使用して一般的な構成エラーがないかどうかを確認します。</block>
  <block id="9fe5e1c0bb75be0e3f5f145103e72caa" category="cell">ONTAP 9.5 以前</block>
  <block id="6bdf9080f49ca89e65220e312d51e688" category="list-text">次のコマンドを使用して、キー管理サーバを追加します。</block>
  <block id="0dd9d4ff0944e970430f96022e169191" category="list-text">次のコマンドを使用して、キー管理サーバが正常に追加されたことを確認します。</block>
  <block id="3bf7f9a82df0c130b46780052ca49e4c" category="list-text">次のコマンドを使用して、新しいノードでキー管理サーバセットアップウィザードを起動します。</block>
  <block id="ce647643e8b085a9425f156173190659" category="list-text">外部キーマネージャ（ EKD ）の認証を復元します。</block>
  <block id="a5e463e5138622ba8c2355b41f67a0ff" category="paragraph">このコマンドには、オンボードキーマネージャ（ OKM ）のパスフレーズが必要です</block>
  <block id="ce4c94d5e669859aacda58a7f2429ddf" category="cell">その他すべての ONTAP バージョン</block>
  <block id="841196916665de2571df2fa230353881" category="paragraph">認証キーを使用できなかったか、外部キー管理サーバにアクセスできなかったためにボリュームがオフラインになっていないかを確認します。次のコマンドを使用して、ボリュームをオンラインに戻します。</block>
  <block id="6d507e4601f1378ea8dbc7446cb265dd" category="paragraph">「 volume online 」と入力します</block>
  <block id="445e5f2d7a321b9e55c018341b3460e3" category="summary">ノード 1 のリソースをノード 3 に移動する前に、ルート以外のアグリゲートをノード 1 からノード 2 に移動します。</block>
  <block id="c8e5788139bcf856c78024561a09d301" category="paragraph">ノード 1 をノード 3 に交換する前に、 storage aggregate relocation コマンドを使用してルート以外のアグリゲートをノード 1 からノード 2 に移動し、再配置を確認する必要があります。</block>
  <block id="fedb2a32e0130d4ae814cd5cc418f72f" category="list-text">[[step1] 次の手順を実行して、ルート以外のアグリゲートを再配置します。</block>
  <block id="825e41d7fbc98709f251a794a6b6711e" category="paragraph">「 storage aggregate relocation start -node &lt;node1&gt; -destination &lt;node2&gt; -aggregate-list * -nd-controller-upgrade true</block>
  <block id="9cac941a6d5ae11593b2f268722b37cf" category="paragraph">再配置はバックグラウンドで実行されます。アグリゲートの再配置には数秒から数分かかる場合があります。この時間には、クライアントの停止部分と停止部分の両方が含まれます。このコマンドでは、オフラインまたは制限されたアグリゲートが再配置されません。</block>
  <block id="db3c32b2915aa7ffd2fcacb5e017dbc9" category="list-text">ノード 1 で次のコマンドを入力して、再配置ステータスを確認します。</block>
  <block id="716079406663f621295f101d9a247a06" category="paragraph">「 storage aggregate relocation show -node node1 」を参照してください</block>
  <block id="d550e31a6ccbb056c2d7ab1e68692363" category="admonition">ノード 1 に所有されているルート以外のアグリゲートがすべて node2 に再配置されてから、次の手順に進みます。</block>
  <block id="b77ef5d765d72155b0da6da7cb47f0ed" category="cell">再配置の場合</block>
  <block id="b15b9b498c001e92853f9fea21ef7ef8" category="cell">作業</block>
  <block id="a0fba600b5c045fae79ae007d77c6f09" category="cell">すべてのアグリゲートのすべてが完了しました</block>
  <block id="2ac86beb93582e4754639412014b59eb" category="cell">に進みます <block ref="449ef68af8e0094cdf2287c1416d1ff3" category="inline-xref-macro-rx"></block>。</block>
  <block id="1141d7067c13df20d6186fc00309e10b" category="cell">いずれかのアグリゲートに障害が発生するか、または拒否されます</block>
  <block id="642f5c5e7ce4f58241664b57c66dae22" category="list-text">障害が発生したアグリゲートまたは拒否したアグリゲートを再配置します。「 storage aggregate relocation start -node &lt;node1&gt; -destination &lt;node2&gt; -aggregate-list * -nd-controller-upgrade true 」</block>
  <block id="9eb367512ec712e8def159a017644487" category="list-text">admin レベルに戻ります。必要に応じて、次のいずれかの方法で強制的に再配置を実行できます。</block>
  <block id="a927bee35dc67490b39aa8c4291ca745" category="list-text">拒否のチェックを無視：「 storage aggregate relocation start -override-vetoes true -nd-controller-upgrade</block>
  <block id="592a7b363e77ec54f4a9454a15b2fa70" category="list-text">デスティネーションのチェックを無効にします。「 storage aggregate relocation start -override-destination-checks true -nd-controller-upgrade</block>
  <block id="dc1c151c89f0b15dbd97af39108f3403" category="list-text">[man_relocate_1_2_step4] ルート以外のすべてのアグリゲートがオンラインであり、 node2 にあるそれらの状態を確認します。</block>
  <block id="5614977b273243c18da92e09a399f4ff" category="list-text">node2 で次のコマンドを入力し、出力を調べて、すべてのボリュームがオンラインであることを確認します。</block>
  <block id="c5fde6e8a15ba7f224d13ea83e3c2c34" category="paragraph">このコマンドで使用する「 vserver -name 」は、前の「 volume show 」コマンドの出力にあります。</block>
  <block id="9b65be5be5396e39e6973853034324bc" category="list-text">node2 で次のコマンドを入力します。</block>
  <block id="8976f4697be8e317a4fb1b4403b3fb59" category="paragraph">「 storage failover show -node node2 」</block>
  <block id="7fb67b5bff7cd5b5583c80436154eeca" category="paragraph">出力に次のメッセージが表示されます。</block>
  <block id="bc50ecc4b8edbc1374bfa0e110d2cdf4" category="list-text">node1 のルート以外のアグリゲートがオンラインになっていないことを確認します。</block>
  <block id="388b62ec918acf6b46e5c8dc7c42fc85" category="paragraph">「 storage aggregate show-owner-name &lt;node1&gt; -ha-policy sfo-state online 」のように表示されます</block>
  <block id="e68954fba0117f19310a10c0e5f075ec" category="paragraph">出力には、すでに node2 に再配置されているオンラインのルート以外のアグリゲートは表示されません。</block>
  <block id="ba458deec9dfb2a7a6b805fd931809ec" category="summary">ファブリック内のスイッチの構成を変更できるように、スイッチを永続的に無効にします。</block>
  <block id="81a9550623341df13e0aba0c1ee5a8fb" category="doc">スイッチを永続的に無効にします</block>
  <block id="54df0e073e21c236c69bb55be46a0eef" category="paragraph">ファブリックの構成を変更できるように、ファブリック内のスイッチを永続的に無効にする必要があります。</block>
  <block id="ede6141978802cdf393c52a40bfc7002" category="paragraph">スイッチを無効にするには、スイッチのコマンドラインでコマンドを実行します。使用するのは ONTAP コマンドではありません。</block>
  <block id="f93acf16d7cf836bd48acbaead6bc9d8" category="paragraph">スイッチを永続的に無効にします。</block>
  <block id="616a5e8ee58c5b9f34f27c22233e48ac" category="list-text">Brocade スイッチの場合は、「 witchCfgPersistentDisable 」コマンドを使用します。</block>
  <block id="cc28c008eb62a2601a150836c9ef2378" category="list-text">Cisco スイッチの場合は 'uspend' コマンドを使用します</block>
  <block id="1e4597321089186160edaf9ec94c2070" category="paragraph">次のコマンドは Brocade スイッチを永続的に無効にします。</block>
  <block id="b537a2a134134343c8340992032bb870" category="paragraph">次のコマンドは、 Cisco スイッチを無効にします。</block>
  <block id="3ff86f1d489dba494d0e4fab1e944c41" category="summary">アップグレード後も、 MetroCluster 構成を使用している場合は、 FC 論理インターフェイス（ LIF ）が誤ったポートに残ってしまう可能性があります。</block>
  <block id="5558cf6a71b5cb1c7c5c61639dd48b9f" category="doc">アップグレード後に LIF が無効なポートに接続されています</block>
  <block id="5f1f479c27b40118bdce39d08fd87e39" category="paragraph">アップグレードの完了後、 MetroCluster 構成を使用している場合は、誤ったポートに FC 論理インターフェイス（ LIF ）が残っている可能性があります。再同期処理を実行して、 LIF を正しいポートに再割り当てすることができます。</block>
  <block id="c5f17233f63f2587b0691c2790a00316" category="list-text">MetroCluster を正しいポートに再割り当てするには、「 cifs vserver resync 」コマンドを入力します。</block>
  <block id="23db613fe78f6fba7d382ce732422d2c" category="paragraph">「 MetroCluster vserver resync -vserver vserver_name fcp-mc.headupgrade.test.vs` 」です</block>
  <block id="eacdded8804b215d1278d1f1517a38f0" category="paragraph">ステージ 6 では、新しいノードが正しくセットアップされていることを確認します。新しいノードの 1 つにユニファイドターゲットアダプタがある場合は、ポート設定をすべてリストアする必要があります。また、アダプタのパーソナリティの変更が必要になる場合もあります。また、新しいノードで暗号化が有効になっている場合はストレージ暗号化をセットアップする必要があります。また、古いノードの運用を停止する必要があります。</block>
  <block id="032dca1d1948f05a9689c44bc451998e" category="list-text"><block ref="032dca1d1948f05a9689c44bc451998e" category="inline-link-macro-rx"></block></block>
  <block id="94c0a6a874300fcf012d00a23a1b673f" category="list-text"><block ref="94c0a6a874300fcf012d00a23a1b673f" category="inline-link-macro-rx"></block></block>
  <block id="99e7affbbaa2d2ad68e17e63cdb49fd8" category="list-text"><block ref="99e7affbbaa2d2ad68e17e63cdb49fd8" category="inline-link-macro-rx"></block></block>
  <block id="db8240142a1ffdbfbb676c4fa3739110" category="list-text"><block ref="db8240142a1ffdbfbb676c4fa3739110" category="inline-link-macro-rx"></block></block>
  <block id="2aa8840f67cce6d93538336610f05560" category="summary">ノード 4 のインストールとブートが完了したら、ノード 4 が正しくインストールされていることを確認する必要があります</block>
  <block id="c1b0decfff03539572f29fa76c9fa6a8" category="list-text">システムプロンプトで、 node4 にログインします。</block>
  <block id="3be6725513a330b5d11f9b5f7999fb8b" category="list-text">ノード 4 がノード 3 と同じクラスタに含まれていること、および正常であることを確認します。</block>
  <block id="85d0ae2423c3b64edbdd304078db296d" category="list-text">ノード 4 がノード 3 と通信できること、およびすべての LIF が動作していることを確認します。</block>
  <block id="c4a2e3badecabb56a51a541bd0b31167" category="paragraph">network interface show -curr-node node4 ’</block>
  <block id="a977a3a71a2db8bc73e5bd38f68aa82d" category="cell">ノード 4 の状態</block>
  <block id="4acd31ec7c5bc2e4aa0a25c4c79958d6" category="cell">ノード 3 とは別のシャーシに設置します</block>
  <block id="b5c12383845491dd07b053068802e47c" category="paragraph">次の手順を実行して、ノード間の HA インターコネクトを接続します。</block>
  <block id="64764fe30a19213c6eca8ee4dc0abe64" category="list-text">node3 の上部インターコネクトポートを node4 の上部インターコネクトポートに接続します。</block>
  <block id="d32a43feea6183c721d8fb1e167ffba4" category="list-text">node3 の下部インターコネクトポートを node4 の下部インターコネクトポートに接続します。</block>
  <block id="2b7d6e150b1ad9a7324920d58add53e8" category="list-text">に進みます <block ref="41c022824608ca37267e3212853fde36" category="inline-xref-macro-rx"></block>。</block>
  <block id="02bbb5b96351de7fa7429d251ff6aa5a" category="cell">ノード 3 と同じシャーシに搭載します</block>
  <block id="88365b6e3e2809b970dbfedc2b94e36f" category="cell">に進みます <block ref="41c022824608ca37267e3212853fde36" category="inline-xref-macro-rx"></block>。ノード間の HA インターコネクトを手動で接続する必要はありません。同じシャーシ構成では、 HA インターコネクトがバックプレーンを使用して自動的に接続されます。</block>
  <block id="30a868238f55d1d59e57331a33e79d19" category="list-text">[[Step5] 次のいずれかの操作を行います。</block>
  <block id="aa9eec4e05c527e3e3152695def83f22" category="cell">SAN 環境の場合</block>
  <block id="8c059d90c29a474c1e6a9e3012ec3908" category="cell">- 完了しました <block ref="fd65cf600cef4b4bb6b03d85bec2cb92" category="inline-xref-macro-rx"></block> をクリックして、セクションに移動します <block ref="433d8081a28a0d8c06bf54d23d4e1297" category="inline-link-macro-rx"></block>。</block>
  <block id="f85d6db9ec5b69c436957b687c13324c" category="cell">SAN 環境では使用できません</block>
  <block id="3e86840ff7c230f787d687166a945ac9" category="cell">手順 6 をスキップしてセクションに進みます <block ref="433d8081a28a0d8c06bf54d23d4e1297" category="inline-link-macro-rx"></block>。</block>
  <block id="2e5d45b5b4c7ee72c9442a1c00ef4881" category="list-text">[[Step6] ノードの 1 つで次のコマンドを入力して、ノード 3 とノード 4 の両方がクォーラムにあることを確認します。</block>
  <block id="07794a041dac9632db557c4f4b050f28" category="paragraph">event log show -messagename scsiblade. *</block>
  <block id="340477541e5fdc93ffc7488a1377706f" category="paragraph">次の例は、クラスタ内のノードがクォーラムにある場合の出力を示しています。</block>
  <block id="4885a30c7d2ead3e5bbc5a7722e06fbc" category="admonition">このドキュメントでは、元のノードの名前は _node1_AND _node2 _ で、新しいノードの名前は _node3 _ と _node4 _ です。説明されている手順では、 node1 は node3 に置き換えられ、 node2 は node4 に置き換えられます。_node1_、 _node2 、 _node3 _ 、および _node4 _ という用語は、元のノードと新しいノードを区別するためだけに使用されます。手順を使用するときは、元のノードと新しいノードの実際の名前を置き換える必要があります。ただし実際には、ノードの名前は変更されません。 node3 には node1 という名前が付けられ、 node4 にはコントローラハードウェアのアップグレード後に node2 という名前が付けられます。本ドキュメントでは、 FlexArray 仮想化ソフトウェアを搭載した「 _systems 」という用語は、これらの新しいプラットフォームに属するシステムを意味します。用語 V シリーズシステム _ とは、ストレージアレイに接続可能な独立したハードウェアシステムを指します</block>
  <block id="0bfa254225598fbe392b21d1c9315577" category="list-text">この手順は複雑で、 ONTAP の高度な管理スキルがあることを前提としています。また、を読んで理解する必要があります <block ref="945806db9f0d500dce4d83fd47d362f0" category="inline-link-macro-rx"></block> および <block ref="25c64b56e1634b7195570b2ce4c1228b" category="inline-link-macro-rx"></block> アップグレード開始前のセクション。</block>
  <block id="58d2951f9fe54692264bb8d42558291f" category="list-text">この FlexArray システム、 V シリーズシステム、 AFF システム、および手順環境 FAS 仮想化ソフトウェアを搭載したシステムです。必要なライセンスがインストールされていれば、 ONTAP 9 以降にリリースされた FAS システムをストレージアレイに接続できます。既存の V シリーズシステムは ONTAP 9 でサポートされます。ストレージアレイと V シリーズのモデルについては、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> Hardware Universe へのリンクおよび V シリーズサポートマトリックスを参照してください。</block>
  <block id="e6063d0ab61b368bdfbca64be36dbd64" category="list-text">この手順環境 MetroCluster の 4 ノード構成と 8 ノード構成では、 ONTAP 9.5 以前が実行されています。ONTAP 9.6 以降を実行する MetroCluster 構成の場合は、に進みます <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> 「 system controller replace 」コマンドを使用して、 ONTAP 9.5 を実行しているコントローラハードウェアを ONTAP 9.7_ にアップグレードするには、次のコマンドを使用します。</block>
  <block id="e39113763907d8d4fcba824237e156d6" category="summary">システムをネットブートする前に、すべての SnapMirror 関係を休止します。</block>
  <block id="efbf836cce2e15df96125c4c46c3e444" category="paragraph">システムをネットブートする前に、すべての SnapMirror 関係を休止する必要があります。休止された SnapMirror 関係は、リブート後およびフェイルオーバー後も休止状態のままです。</block>
  <block id="297127a593f8f8ac2d848dfe59115f96" category="admonition">ステータスが「 Transferring 」の場合は、転送を中止する必要があります。「 snapmirror abort -destination-path vserver name</block>
  <block id="d5560010a4b579866a98e0b680b5c248" category="paragraph">SnapMirror 関係が Transferring 状態でない場合は、中止は失敗します。</block>
  <block id="314f1c01ca9edeb8d02ea1fa05ef2d12" category="paragraph">「 snapmirror quiesce -destination-path vserver vserver-name</block>
  <block id="f412483899b7e1853a07057a10434cd1" category="summary">適切な RCF ファイルを適用して、新しいノードに対応するようにスイッチを再設定します。</block>
  <block id="240180de393c4a94b035628cb25892f2" category="paragraph">新しいノードに合わせてスイッチを再設定するためには、適切なリファレンス構成ファイル（ RCF ）を適用する必要があります。RCF ファイルを適用したら、スイッチを再接続できます。</block>
  <block id="6a82c384f85f037d7996beaa2d1d7d15" category="list-text">使用している構成用の RCF ファイルを探します。</block>
  <block id="220db66641d211d0d3595a586d08eda4" category="paragraph">使用しているスイッチモデルに対応した RCF ファイルを使用する必要があります。</block>
  <block id="5e99b4c17b283780f31b2094bd3e09d9" category="inline-link-macro">ネットアップのダウンロード： Brocade スイッチ向け MetroCluster 構成ファイル</block>
  <block id="6b253b0e381bce06acae4fc0aba43a28" category="paragraph"><block ref="6b253b0e381bce06acae4fc0aba43a28" category="inline-link-macro-rx"></block></block>
  <block id="dfee04d58b6ccde432611ade9976f650" category="inline-link-macro">ネットアップのダウンロード： Cisco スイッチ用の MetroCluster 構成ファイル</block>
  <block id="b48e3bcf35f27a7eb3b971e14c962a74" category="paragraph"><block ref="b48e3bcf35f27a7eb3b971e14c962a74" category="inline-link-macro-rx"></block></block>
  <block id="664250ffe3e2d310ccf75bacda9a568c" category="list-text">Download * ページの指示に従って RCF ファイルを適用し、必要に応じて ISL 設定を調整します。</block>
  <block id="4799633d9eb6a31235d0102c0d2b1812" category="list-text">スイッチの設定が保存されたことを確認します。</block>
  <block id="1dd8fdc75f0d1d8e00ce9ec094e07e48" category="list-text">で作成したケーブルレイアウトを使用して、両方の FC-to-SAS ブリッジを FC スイッチにケーブル接続します <block ref="1e3a603a58f58380bbf882725903f11b" category="inline-link-macro-rx"></block>。</block>
  <block id="31ff80cac58b75352ccd7cb184fd3f2f" category="list-text">ポートがオンラインであることを確認します。</block>
  <block id="9537b49cfa32d77c52482152d98a6cb7" category="list-text">Brocade スイッチの場合は 'witchshow' コマンドを使用します</block>
  <block id="3f55318e22b0811a1f8462eb6d4db6a3" category="list-text">Cisco スイッチの場合は、 show ’ interface brief ’コマンドを使用します。</block>
  <block id="8a2a15ae261b57a2a7df03e71f7e6475" category="list-text">コントローラの FC-VI ポートとスイッチをケーブル接続します。</block>
  <block id="ca6b3b9d3521dc913cc6a3273b729760" category="list-text">既存のノードから、 FC-VI ポートがオンラインであることを確認します。</block>
  <block id="823eab722f92d2115c2effb645f5bc93" category="paragraph">MetroCluster インターコネクト・アダプタ・ショー</block>
  <block id="39b8d1f1fde39b620b3646f81db31ad4" category="paragraph">MetroCluster interconnect mirror show</block>
  <block id="2b44c4a6e31759cd729ff715d14edea4" category="summary">ノード 1 をシャットダウンして撤去するには、そのクラスタネットワークポート、管理ポート、および FC ポートとその NVRAM システム ID に関する情報を事前に記録しておく必要があります。</block>
  <block id="efc5de9a5891b52ce2b37c9ed2854d5f" category="paragraph">ノード 1 をシャットダウンして撤去するには、そのクラスタネットワークポート、管理ポート、および FC ポートとその NVRAM システム ID に関する情報を事前に記録しておく必要があります。この情報は、ノード 1 をノード 3 にマッピングし、ディスクを再割り当てするときに、手順で必要になります。</block>
  <block id="b01288321618ebc4fb03d07a48ec080c" category="list-text">[[step1] 次のコマンドを入力し、その出力を取得します。</block>
  <block id="a9f729911b0af57b8d1d08f2584625b6" category="paragraph">「 network route show 」と表示されます</block>
  <block id="db55c697ce008329c5b7d6628a252009" category="list-text">次のコマンドを入力し、出力をキャプチャします。</block>
  <block id="743c43b069d893a88b2732926f57f5db" category="paragraph">vserver services name-service dns show</block>
  <block id="e06877d8614b07524debe1149bac1e78" category="list-text">[man_record_node1_step3] どちらかのコントローラで次のコマンドを入力して、ノード管理ポートとクラスタネットワークを特定します。</block>
  <block id="ac1f4efe2cbbc63bd8c0842b84e1d3c8" category="paragraph">network interface show -curr-node &lt;node1&gt; -role cluster 、 intercluster 、 node-mgmt 、 cluster-mgmt</block>
  <block id="2f163f9a8fcb45472b7c0a84f088f4de" category="paragraph">次の例に示すように、クラスタ内のノードについて、クラスタ LIF 、クラスタ間 LIF 、ノード管理 LIF 、およびクラスタ管理 LIF が表示されます。</block>
  <block id="5feb72299c708ed8b5e527e5963476fe" category="admonition">システムにクラスタ間 LIF がない可能性があります。</block>
  <block id="8fac25219c50f2cc9f32de6a06dd0afa" category="list-text">のコマンドの出力に情報を記録します <block ref="63c89ae17921f4702dc8719a6b0480a8" category="inline-xref-macro-rx"></block> をクリックしてください <block ref="3b6c063a8efbc88c969c7838f0611434" category="inline-link-macro-rx"></block>。</block>
  <block id="4dea80d6ab207bc372820b8a74a583df" category="list-text">node1 で次のコマンドを入力します。</block>
  <block id="6516511e2cda8e73f01c2c8b9a2373b2" category="paragraph">network port show -node &lt;node1&gt; -type physical`</block>
  <block id="c98e23a6f059dd6276dbffb11af4d53d" category="paragraph">次の例に示すように、ノードの物理ポートが表示されます。</block>
  <block id="00e8b0b0df56090152aa5c1cb1bd4a45" category="paragraph">ブロードキャストドメインは、あとで手順の新しいコントローラの新しいポートにマッピングする必要があります。</block>
  <block id="5a88073443b3ca14db2fbd6903a55330" category="paragraph">「 network fcp adapter show -node node1 」のように表示されます</block>
  <block id="554c196eb9c5953b024f2cc2c07ba455" category="paragraph">次の例に示すように、ノードの FC ポートが表示されます。</block>
  <block id="5d3cbeccba5dac0370b9c40f95d5d063" category="list-text">まだ設定していない場合は、次のコマンドを入力して、ノード 1 でインターフェイスグループまたは VLAN が設定されているかどうかを確認します。</block>
  <block id="f6f8a9635aff4aef3e52d34ba925926b" category="paragraph">このセクションの情報を使用します <block ref="3b6c063a8efbc88c969c7838f0611434" category="inline-link-macro-rx"></block>。</block>
  <block id="8c197b9ca5649983d88c28532ed4d151" category="inline-link-macro">アップグレードのためのノードを準備</block>
  <block id="43ac883a14249b98283d8e22e6127ba8" category="cell">セクションに NVRAM システム ID 番号を記録しました <block ref="7eb7fb0c5f668aa416ee9ca8030df058" category="inline-link-macro-rx"></block>。</block>
  <block id="722b28462ad8b131d5cfd84a2c2f881a" category="cell">次のセクションに進みます。 <block ref="830cfeba72054433fc0dcccc19f6d055" category="inline-link-macro-rx"></block>。</block>
  <block id="105886469ee101bc5425140d42df484b" category="cell">セクションに NVRAM システム ID 番号が記録されていませんでした <block ref="7eb7fb0c5f668aa416ee9ca8030df058" category="inline-link-macro-rx"></block></block>
  <block id="1c5349057e46140156bc0d263443383c" category="cell">- 完了しました <block ref="91d37fb83183cdc5da036c812dec4eb7" category="inline-xref-macro-rx"></block> および <block ref="2a3037c203afea4262e2cc05eb0708b3" category="inline-xref-macro-rx"></block> に進みます <block ref="830cfeba72054433fc0dcccc19f6d055" category="inline-link-macro-rx"></block>。</block>
  <block id="866ca6e46d7456a7c276afd3eb54db5d" category="list-text">[[man_record_node1_step11]] どちらかのコントローラで次のコマンドを入力します。</block>
  <block id="a68d4121a0f2927e059683a1133fbbe1" category="paragraph">「 system node show -instance -node node1 」のように表示されます</block>
  <block id="9bcd562ef44a8e11e5fd0e0492ebe6c4" category="paragraph">次の例に示すように、 node1 に関する情報が表示されます。</block>
  <block id="5b9519c4c2b57166c18827dfa9f50f7c" category="list-text">[[man_record_node1_step12]] セクションで使用する NVRAM システム ID 番号を記録します <block ref="b27daeccf5fbd8a2e88a3636ee615b74" category="inline-link-macro-rx"></block>。</block>
  <block id="c82b6ec247fa6d7962d57a07b874b6fb" category="summary">ノード 4 にオンボードの FC ポート、オンボードのユニファイドターゲットアダプタ（ UTA / UTA2 ）ポート、または UTA / UTA2 カードがある場合</block>
  <block id="a5eaebf8eb363498d59b7e808ae14a67" category="paragraph">完了する必要がある場合があります <block ref="b22a2e603d310a795a7b59d2bdda39ee" category="inline-xref-macro-rx"></block>、 <block ref="5752cac0a470e06ffceef40fba1931c1" category="inline-xref-macro-rx"></block>、または両方のセクション。</block>
  <block id="d3724945a8761461ffee756c3d88b5f7" category="paragraph">ノード 4 にオンボードの FC ポート、オンボード UTA / UTA2 ポート、または UTA / UTA2 カードがなく、ストレージディスクが搭載されたシステムをアップグレードする場合は、に進みます <block ref="fface1ac702bde6d72ceb6e55eb8b2b6" category="inline-link-macro-rx"></block>。</block>
  <block id="2f23b838fc1ce32542c8c66d9e287935" category="paragraph">ただし、 V シリーズシステムまたは FlexArray 仮想化ソフトウェアがインストールされていて、ストレージアレイに接続されている場合に、ノード 4 にオンボードの FC ポート、オンボード UTA / UTA2 ポート、 UTA / UTA2 カードがないときは、 _Install and boot node4 セクションに戻って再開する必要があります <block ref="04be07c8b8cd85d6b2140c2bfb8113b6" category="inline-link-macro-rx"></block>。ノード 4 に十分なラックスペースがあることを確認してください。node4 が node2 とは別のシャーシにある場合は、 node3 と同じ場所に node4 を配置できます。node2 と node4 が同じシャーシにある場合は、 node4 が適切なラックの場所にすでに存在しているとします。</block>
  <block id="3b2aededaf9eb7fa977a61a8bd235fc8" category="cell">に進みます <block ref="6df4b9385815488582550ff3bec853dc" category="inline-xref-macro-rx"></block>。</block>
  <block id="d0eda6a9db5e17455c4a85cb11800962" category="cell">に進みます <block ref="9afe493afbfd571f8e15cdbbaa7d8361" category="inline-xref-macro-rx"></block>。</block>
  <block id="52b26cd7e65738a95d72c027a1b843c2" category="list-text">[[man_config_4_Step2]] メンテナンスモードにアクセスします。</block>
  <block id="bdb2780eb5f1795b94cdb7892cd5237b" category="list-text">新しいノードの FC 設定を、元のノードで取り込んだ設定と比較します。</block>
  <block id="605ac6e16f1de07910babd12f8cb0f9e" category="list-text">[[man_config_4_Step5]] 次のいずれかの操作を行います。</block>
  <block id="2f699cf77defdb8691038c3365c1e4cb" category="paragraph">「 system node hardware unified-connect modify -type | -t target-adapter port_name 」</block>
  <block id="cf4bec74c9d6f95cb8085d8a4bfd855b" category="paragraph">「 system node unified-connect modify type | -t initiator-adapter port_name 」</block>
  <block id="348795cf2ff362808ef4789bfce998c1" category="paragraph">`-type ` は FC4 のタイプ、ターゲットまたはイニシエータである。</block>
  <block id="2b06110f9a6a9bf3ece9e1df55274e79" category="cell">必要に応じて、 node4 の FC ポートを変更します。「 ucadmin modify -m fc -t initiator -f adapter_port _name`-t` は、 FC4 タイプ、ターゲット、またはイニシエータです。* 注： FC ポートはイニシエータとしてプログラムする必要があります。</block>
  <block id="aa056114701909ed085099828ff012a9" category="cell">次のコマンドを入力し、出力を調べて、新しい設定を確認します。 'system node unified-connect show'</block>
  <block id="e7df8bff382bf85b07ece9703c2f6808" category="cell">元のノードでキャプチャしたのと同じです</block>
  <block id="222214d2643fdfb746a901984df3eaaa" category="cell">に進みます <block ref="313690309739126de0c32c721924102b" category="inline-xref-macro-rx"></block>。</block>
  <block id="7327bd79e6072c9ccdc2b478d3afacfb" category="cell">元のノードでキャプチャしたものとは異なります</block>
  <block id="2fe2c4e80b1376975584751f41c867c9" category="inline-xref">手順 8.</block>
  <block id="ebe743318b7324b4ebeb99a0a3c72423" category="cell">に進みます <block ref="60c689da671dfc85fbc244a8ddc19d6a" category="inline-xref-macro-rx"></block>。</block>
  <block id="98570637b82059e5ffc8aa3289c7a48b" category="list-text">[[man_config_4_Step8] メンテナンスモードを終了します：</block>
  <block id="f93d9d44ef64b7bd548bb1548837f7c9" category="cell">は、 V シリーズシステムであるか、 Data ONTAP 8.3.0 以降を実行する FlexArray 仮想化ソフトウェアがインストールされています</block>
  <block id="ae67b2e6adc83ff617429f7470e3fcf2" category="cell">ブート環境プロンプトで「 boot_ontap maint 」というコマンドを入力し、保守モードにアクセスします</block>
  <block id="a2aebe9559cbe6e73c0a0bf0d1bb9ef4" category="cell">は、 V シリーズシステムではなく、 FlexArray 仮想化ソフトウェアもありません</block>
  <block id="1747e775d1492fb4a122964eb0ce6abd" category="cell">ブート環境プロンプトで「 boot_ontap 」と入力し、 node4 をブートします</block>
  <block id="be71806e78200788394953879d8e5b6a" category="list-text">[[man_config_4_Step11]] 次のいずれかの操作を行います。</block>
  <block id="5f05ecbc9bc4d038e9ed396780511251" category="list-text">に進みます <block ref="5752cac0a470e06ffceef40fba1931c1" category="inline-xref-macro-rx"></block> ノード 4 に UTA / UTA2A カードまたは UTA / UTA2 オンボードポートがある場合</block>
  <block id="1e7bd254c963a338c489202373c4ab17" category="list-text">セクションをスキップして、に進みます <block ref="fface1ac702bde6d72ceb6e55eb8b2b6" category="inline-link-macro-rx"></block> ノード 4 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがない場合</block>
  <block id="08b25b9ad88e79131839ab732517a679" category="list-text">に進みます <block ref="5752cac0a470e06ffceef40fba1931c1" category="inline-xref-macro-rx"></block> ノード 4 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがある場合</block>
  <block id="11b3cd1a1063bf814b7d2eeabae1825d" category="list-text">node4 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがない場合は、 section_Check をスキップして UTA / UTA2 ポートを設定し、 node4 に戻ってブートノードを再開します <block ref="04be07c8b8cd85d6b2140c2bfb8113b6" category="inline-link-macro-rx"></block>。</block>
  <block id="fe3a7dc1b68f02ec33d1b3d2d4f9bc56" category="list-text">「 system node hardware unified-connect show 」コマンドと「 ucadmin show 」コマンドの出力を調べ、 UTA / UTA2 ポートに希望するパーソナリティが設定されているかどうかを確認します。</block>
  <block id="e48bdf2afbb963c9c495bf4f571895e3" category="cell">に進みます <block ref="ffd96dfebf67595a1e4a6d625bee7496" category="inline-xref-macro-rx"></block>。</block>
  <block id="fa74cc012fef0feff6e924f8039749e1" category="cell">手順 5 から 12 を省略して、に進みます <block ref="ff1d63240cee2bdc1933860b7f07a8df" category="inline-xref-macro-rx"></block>。</block>
  <block id="e6d6e537e4b0f2bf8e825c2e64f00645" category="list-text">[[man_check_4_Step5]] 次のいずれかの操作を行います。</block>
  <block id="37633c05750191dfa133d84e3b55c00e" category="cell">ストレージディスクがあり、 Data ONTAP 8.3 を実行している</block>
  <block id="8445b1a045f75f905d430fc7d5f5e71c" category="cell">node4 をブートし、メンテナンスモードに入ります。「 boot_ontap maint 」と入力します</block>
  <block id="6769a0fd294ca78345db234c229b8959" category="cell">に進みます <block ref="2c3bbf8d53e9379a42c94980adfa90a7" category="inline-xref-macro-rx"></block>。すでにメンテナンスモードになっている必要があります。</block>
  <block id="c61e8c3c627841f886b0a3031439d4ce" category="list-text">[[man_check_4_Step6]] 次のいずれかの操作を行います。</block>
  <block id="6515c49355bf1419526d1fd9c737ec8c" category="cell">UTA / UTA2A カードのポート</block>
  <block id="eaff3678ecd6d545f7ac3a0842914aa5" category="cell">に進みます <block ref="f4d4591f64bb8abe68f0b67355d1fe59" category="inline-xref-macro-rx"></block>。</block>
  <block id="4cb16c5207497dcfcaffd56afa4f1814" category="cell">手順 7 を省略して、に進みます <block ref="d63e67436ac7351debc07c052c32757d" category="inline-xref-macro-rx"></block>。</block>
  <block id="117986e3a34af461f5f6e6bb88045f84" category="list-text">[[man_check_4_Step7] アダプタがイニシエータモードの場合、 UTA / UTA2 ポートがオンラインの場合は、 UTA / UTA2 ポートをオフラインにします。</block>
  <block id="286e43e6e6a24f0c4b7567121cef9f66" category="list-text">[[man_check_4_Step8] 現在の設定が目的の使用方法と一致しない場合は、次のコマンドを入力して必要に応じて設定を変更します。</block>
  <block id="36408e09de8feb146f54fe1e158d953d" category="list-text">「 -m' 」はパーソナリティ・モードである FC または 10 GbE UTA です。</block>
  <block id="2b96adc86d11d2a69afb2ec82da4f190" category="admonition">テープドライブおよび FlexArray 仮想化システムには、 FC イニシエータを使用する必要があります。SAN クライアントには FC ターゲットを使用する必要があります。</block>
  <block id="0e0addb82f30f2aa03c68b146f054849" category="list-text">次のコマンドを入力し、出力を確認して、設定を確認します。</block>
  <block id="315359e3c6323d4eda359054319c0815" category="list-text">次のいずれかを実行します。</block>
  <block id="893a166b79c7215fddb938b9ba769f94" category="cell">は、 V シリーズシステムまたは FlexArray 仮想化ソフトウェアを搭載したストレージアレイに接続され、 Data ONTAP 8.3 を実行しているシステムです</block>
  <block id="5ac574a53621b9436797f566cbab7941" category="cell">保守モードで再起動します（「 boot_ontap maint 」）</block>
  <block id="5dd9d9d622ac506af56607785cc61574" category="cell">次のコマンドを入力します。 ucadmin show</block>
  <block id="9b035cae403b89af2a989a976daad295" category="paragraph">次の例の出力では ' アダプタ「 1b 」の FC4 タイプがイニシエータに変更されており ' アダプタ「 2a 」と「 2b 」のモードが CNA に変更されています</block>
  <block id="f8cd2564c015235fc797e229583e1023" category="list-text">[[man_check_4_Step13]] ポートをケーブル接続します。</block>
  <block id="439c508e4033b6c215e1a9262db35444" category="cell">に進みます <block ref="fface1ac702bde6d72ceb6e55eb8b2b6" category="inline-link-macro-rx"></block>。</block>
  <block id="dbe83a6e258bdc99b8051f4d3cf01d67" category="cell">section_Install および boot node4 _ に戻り、のセクションを再開します <block ref="04be07c8b8cd85d6b2140c2bfb8113b6" category="inline-link-macro-rx"></block>。</block>
  <block id="ac9ca8960cea46ab4a0691aee572a185" category="summary">アップグレード中に必要となるツールとドキュメント</block>
  <block id="c3b94594408530dae098d84cd0931315" category="paragraph">新しいハードウェアを設置するための特別なツールが必要です。また、アップグレードプロセス中に他のドキュメントを参照する必要があります。また、コントローラのアップグレードを完了するために必要な情報を記録しておく必要があります。情報を記録するためのワークシートが用意されています。</block>
  <block id="7fe6746d1ee4abaa26e54d04e8c73682" category="summary">認証キーを管理するには、 KMIP サーバを使用します。</block>
  <block id="4cd072d48be3e3705aa89a6c546ddb3c" category="paragraph">ONTAP 9.5 以降では、 Key Management Interoperability Protocol （ KMIP ）サーバを使用して認証キーを管理できます。</block>
  <block id="ccf2760849fed4b6ab9ab9769103b271" category="summary">新しいコントローラモジュールと新しいディスクシェルフと既存の FC スイッチとのケーブル接続を決定します。</block>
  <block id="0d687993b6b67e20ff0472f32d9693b0" category="paragraph">新しいコントローラモジュールおよび新しいディスクシェルフと既存の FC スイッチとのケーブル接続を決定する必要があります。</block>
  <block id="6485f9afbf9c5f34e988054e67e3b142" category="paragraph">このタスクは MetroCluster サイトごとに実行する必要があります。</block>
  <block id="9abd645e397061a8e3dab1bb33124897" category="admonition">RCF を使用できるようにケーブル接続できない場合は、テクニカルサポートにお問い合わせください。RCF を使用できないケーブル接続の場合は、この手順を使用しないでください。</block>
  <block id="35dc65c9d9d84e5e9a27d3c90d3f88d5" category="summary">node2 のアグリゲートを node3 から node4 に再配置する前に、 node3 の node2 に現在含まれている node2 に所有されている NAS データ LIF を node4 に移動し、 node4 にある SAN LIF を確認します。</block>
  <block id="7fc2609042e15b4a3b401c8f6b7e24c1" category="paragraph">ノード 4 のインストールの確認が完了し、ノード 2 のアグリゲートをノード 3 からノード 4 に再配置する前に、現在ノード 3 にある node2 に所有されている NAS データ LIF をノード 4 に移動する必要があります。ノード 4 の SAN LIF も確認する必要があります。</block>
  <block id="8d20a51d0c0718e7e116461f15d49fb3" category="paragraph">アップグレード手順の実行中、リモート LIF は SAN LUN へのトラフィックを処理します。アップグレード時にクラスタやサービスの健全性を維持するために、 SAN LIF を移動する必要はありません。SAN LIF は、新しいポートにマッピングする必要がないかぎり移動されません。ノード 4 をオンラインにしたあと、 LIF が正常に機能しており、適切なポートに配置されていることを確認します。</block>
  <block id="12720c14368020238cd7150824f980eb" category="list-text">node3 が所有していないすべての NAS データ LIF を表示するには、いずれかのノードで次のコマンドを入力し、出力をキャプチャします。</block>
  <block id="9482a7fa27802a7ab7e05f7ded4a42bd" category="paragraph">network interface show -role data -curr-node node3 -is-home false</block>
  <block id="f4f6617b632a0c1c2dc3fa9db1c234c1" category="cell">に進みます <block ref="81b5453f8cd7e29a23486e4650786cf5" category="inline-xref-macro-rx"></block>。</block>
  <block id="2a0ce78ac6ca1adeedbcfa1fd0a257cc" category="cell">手順 3 を省略して、に進みます <block ref="945e0dec7328bd39afca611c47b45c97" category="inline-xref-macro-rx"></block>。</block>
  <block id="dac6519e0e0abeb2d86af52963ff687b" category="list-text">[man_lif_verify_4_Step3] インターフェイスグループおよび VLAN でホストされている NAS データ LIF をノード 3 からノード 4 にすべて移行するには、次の手順を実行します。</block>
  <block id="bea582814d8029e4e79ed1f1f67178fa" category="list-text">[[man_lif_verify_4_substpa]] インターフェイスグループ上の node2 に属していた node3 でホストされている LIF を、同じネットワーク上の LIF をホストできる node4 のポートに移行するには、それぞれの LIF に対して 1 回、次のコマンドを入力します。</block>
  <block id="d78b67076b08536aa74614da580aa8e7" category="paragraph">network interface migrate -vserver vserver_name -lif lif_name -destination -node node4 – destination-port netport | ifgrp`</block>
  <block id="bb2b7d2b593abe391065563c1a991c60" category="list-text">LIF のホームポートとホームノードを変更します <block ref="f2edbd3671dda6c8c6a0d5b9f5139a77" category="inline-xref-macro-rx"></block> LIF をホストしているポートとノードに対して次のコマンドを 1 回入力します。</block>
  <block id="f3ab69d92a4ce66d6b40a6fc5ed64045" category="paragraph">network interface modify -vserver vserver_name -lif datalif_name -home-node node4 home-port netport | ifgrp`</block>
  <block id="ca8c32ea8d9ad20129f9bd82dd476c20" category="list-text">[man_lif_verify_4_substpc ]] VLAN ポート上の node2 に属していた node3 でホストされている LIF を、同じネットワーク上の LIF をホストできる node4 のポートに移行するには、それぞれの LIF に対して 1 回、次のコマンドを入力します。</block>
  <block id="ad068be6c9c7081a732def4a358736ad" category="paragraph">network interface migrate -vserver vserver_name -lif datalif_name -destination-node node4 – destination-port netport | ifgrp`</block>
  <block id="b9698583aeb95570efa407aaaba06094" category="list-text">LIF のホームポートとホームノードを変更します <block ref="239198568c8cd082441ca4901dc23f34" category="inline-xref-macro-rx"></block> LIF をホストしているポートとノードに対して次のコマンドを 1 回入力します。</block>
  <block id="9b464868d559a5e4c0a4b39f6f928522" category="paragraph">network interface modify -vserver vserver_name -lif datalif_name -home-node node4 home-port netport | ifgrp`</block>
  <block id="1ba9f89e7307ad05e44ad05bb958ca27" category="list-text">[[man_lif_verify_4_Step4]] 次のいずれかの操作を行います。</block>
  <block id="583ceb80a05614853a17d060bdc9978d" category="cell">- 完了しました <block ref="24ba20dfe80c75ddf74b686c1f78edbe" category="inline-xref-macro-rx"></block> から <block ref="464cefb825ec041ae0f8085658a0717b" category="inline-xref-macro-rx"></block>をクリックして、手順 9 をスキップして完了します <block ref="487182da65d4a8fd64dac32686f96826" category="inline-xref-macro-rx"></block> から <block ref="6d60445fd0a028ec8dafc7e8858e9dac" category="inline-xref-macro-rx"></block>。</block>
  <block id="407fbf8918b07e23f7ad6bd07a5d9cd9" category="cell">手順 5 から 8 までをスキップして完了します <block ref="95473255aa630f367ac347162090735e" category="inline-xref-macro-rx"></block> から <block ref="6d60445fd0a028ec8dafc7e8858e9dac" category="inline-xref-macro-rx"></block>。</block>
  <block id="b7cf099ecc920b7356c7938e36ead518" category="cell">- 完了しました <block ref="24ba20dfe80c75ddf74b686c1f78edbe" category="inline-xref-macro-rx"></block> から <block ref="6d60445fd0a028ec8dafc7e8858e9dac" category="inline-xref-macro-rx"></block>。</block>
  <block id="486afcecd3768de955874ac9b04d982d" category="list-text">[man_lif_verify_4_Step5] プラットフォームで同じでないデータポートがある場合は、次のコマンドを入力してブロードキャストドメインにポートを追加します。</block>
  <block id="0d0d30231651c6bea6f3a8ab9bef8b41" category="paragraph">「 network port broadcast-domain add-ports -ipspace IPspace_name -broadcast-domain mgmt ports node ： port 」のように指定します</block>
  <block id="59770005b7a829dfa2de1246fe18d7ed" category="paragraph">次の例は、 IPspace デフォルトで、ノード「 6280 」のポート「 e0a 」とノード「 8060-1 」のポート「 e0i 」をブロードキャストドメイン管理に追加します。</block>
  <block id="271e5c91e502440a4641a9bc05a02df6" category="list-text">各 NAS データ LIF について次のコマンドを 1 回入力して、各 NAS データ LIF を node4 に移行します。</block>
  <block id="159244917402d1438cdf46fe3aac9f6b" category="paragraph">network interface migrate -vserver vserver-name -lif datalif -name-destination-node node4 -destination-port netport | ifgrp-home-node node4 ’</block>
  <block id="45c770ea39ce7a89e3fa87a10d51bc25" category="list-text">データ移行が永続的であることを確認します。</block>
  <block id="d6454642fa6de121b504b22f0485cca0" category="paragraph">network interface modify -vserver vserver_name -lif datalif_name -home-port netport | ifgrp`</block>
  <block id="8ad5a71314693935e3bce24596d44ef1" category="list-text">[man_lif_verify_4_Step8] 次のコマンドを入力して ' すべてのリンクのステータスを up で確認し ' すべてのネットワーク・ポートの一覧を表示し ' その出力を調べます</block>
  <block id="2a2c5a2b5a3d8988556727450e1a29e2" category="paragraph">次に、一部の LIF が稼働し、その他が停止している「 network port show 」コマンドの出力例を示します。</block>
  <block id="ed11f195f4f8f4017e6e51d88466a5a2" category="list-text">[man_lif_verify_4_Step9] 'network port show コマンドの出力に新しいノードでは使用できず ' 古いノードに存在するネットワーク・ポートが表示される場合は ' 次の手順を実行して古いネットワーク・ポートを削除します</block>
  <block id="7d4a5f4bd766fdaca38d0e0f6141ee90" category="list-text">次のコマンドを入力して、 advanced 権限レベルに切り替えます。</block>
  <block id="c72099f9d20f92c2086837037b97fc90" category="list-text">古いネットワークポートごとに次のコマンドを 1 回入力します。</block>
  <block id="f624be69667373d41ab52d00b2f142d4" category="list-text">[man_lif_verify_4_Step10] ] 次の手順を実行して、ノード 4 の正しいポートに SAN LIF があることを確認します。</block>
  <block id="175804e163fef92888323305db0643d2" category="paragraph">'network interface show -data-protocol iscsi|fcp-home-node node4</block>
  <block id="35ca9ca12f5a137b27b3f6675a68cbd9" category="list-text">ノード 4 に、ノード 2 に存在しないポート上に SAN LIF または SAN LIF のグループがある場合は、次のいずれかのコマンドを入力して、ノード 4 の適切なポートにそれらの LIF またはグループを移動します。</block>
  <block id="d760c0961d6b0dca026082038bc5020a" category="paragraph">「 network interface modify -lif lif_name -home-node new_home_port 」です</block>
  <block id="8c0fbdd8434a31926cdab8193028a740" category="paragraph">「 network interface modify ｛ -home-node port_on_node2 -home-node node2 -home-node node2 -role data ｝ -home-port new_home_port_on_node4 」というコマンドを使用します</block>
  <block id="8bc5cf3f80ad8a49c6ada1790801222e" category="paragraph">network interface modify -vserver vserver_name -home-port port_name -home-node node4 lif lif_name -status-admin up です</block>
  <block id="f1eab2abaeb4ee31499ddda2b6919c69" category="list-text">いずれかのノードで次のコマンドを入力し、出力を調べて、すべての SAN LIF が正しいポートに移動されていること、および LIF のステータスが「 up 」になっていることを確認します。</block>
  <block id="b0da7502535a227e64440d7a547ea6dd" category="list-text">[[man_lif_verify_4_Step13]] LIF が 1 つでも停止している場合は、各 LIF に対して次のコマンドを 1 回入力して、 LIF の管理ステータスを「 up 」に設定します。</block>
  <block id="f9758b6af31acb5b16f9295ac0f7c556" category="summary">ノード 1 を撤去するには、ノード 2 で HA ペアを無効にし、ノード 1 を適切にシャットダウンしてラックまたはシャーシから取り外します。</block>
  <block id="aa7894ff1a9d6e45a378e3bbe939cb80" category="list-text">クラスタ内のノード数を確認します。</block>
  <block id="0520dd500d342650e01dc4a099a267bb" category="paragraph">次の例に示すように、クラスタ内のノードが表示されます。</block>
  <block id="44fe06f5f571cfd547aa44853b8a4f9d" category="list-text">[[man_stリタイヤ 1_step2] ストレージフェイルオーバーを無効にします。</block>
  <block id="f4c0a7ed135e62d38e56c9a16bf13990" category="list-text">いずれかのノードで次のコマンドを入力して、クラスタハイアベイラビリティを無効にします。</block>
  <block id="27a8730bbe580dd65301349dcdc539f8" category="list-text">ストレージフェイルオーバーを無効にします。</block>
  <block id="1990cae950960555eed1d17b76599009" category="paragraph">「 storage failover modify -node &lt;node1&gt; -enabled false 」という名前になります</block>
  <block id="0cf8f0e4fb23d1270d640c0a8e820f4b" category="cell">ストレージフェイルオーバーを無効にします。「 storage failover modify -node &lt;node1&gt; -enabled false 」</block>
  <block id="8048736d756a32521201f074d2730091" category="list-text">ストレージフェイルオーバーが無効になっていることを確認します。</block>
  <block id="2adf18e995507a97d0d1e8af8c85e4f0" category="paragraph">次の例は、ノードでストレージフェイルオーバーが無効になっている場合の「 storage failover show 」コマンドの出力を示しています。</block>
  <block id="c4b530495164ce1eeaab4b08e9534859" category="list-text">データ LIF のステータスを確認します。</block>
  <block id="d95955bc6aa8350efd75d95d4bbee99b" category="paragraph">network interface show -role data -curr-node node2 -home-node node1 -home-node node1'</block>
  <block id="5fbed693cb6b31f11a703890fc87d45f" category="inline-link-macro">不具合のすす</block>
  <block id="1337205e844f111a9850e68ab7fe85fb" category="paragraph">「 * Status Admin/Oper * 」列を参照して、停止している LIF がないかどうかを確認します。停止している LIF がある場合は、を参照してください <block ref="f37de8559f00b8ef58b12c6857d24513" category="inline-link-macro-rx"></block> セクション。</block>
  <block id="8405f8a611485472bfa1ab420a9a9a02" category="cell">に進みます <block ref="caeb7d58e7293f2d87a762ba5d4df397" category="inline-xref-macro-rx"></block>。</block>
  <block id="a4749d514e1548558e90fda0a15746ff" category="cell">に進みます <block ref="242f372e62d4ec9b0208b2bd3cc69817" category="inline-xref-macro-rx"></block>。</block>
  <block id="9cd28d632d37554bc6b8bc94ae2073e5" category="list-text">[[man_denter_1_step6] どちらかのノードの advanced 権限レベルにアクセスします。</block>
  <block id="fa3bee6ea4c5e23d15d4c301c3141248" category="list-text">[[step7] クラスタ HA が無効になっていることを確認します。</block>
  <block id="f113138c0fa8fa7f0032e6a3fdc72c0a" category="paragraph">クラスタ HA が無効になっていない場合は、この手順を繰り返します <block ref="af42b54b31642eb564c9e40bb4e550a9" category="inline-xref-macro-rx"></block>。</block>
  <block id="a646d4448d74f354bb17f8dd1f3b7055" category="list-text">[[man_リタイヤ _1_step8] 現在 node1 にイプシロンが設定されているかどうかを確認します。</block>
  <block id="c3eb5e5ac705b7d7ad0bcb8afd287152" category="paragraph">ノード数が偶数のクラスタの場合は同票となる可能性があるため、 1 つのノードにイプシロンと呼ばれる追加の投票荷重が設定されます。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> 詳細については ' を参照してください</block>
  <block id="1eca50be6c9670acdf0a0635f4b23d14" category="admonition">4 ノードクラスタの場合は、クラスタ内の別の HA ペアのノードにイプシロンが設定されていることがあります。</block>
  <block id="d582f21b8a69a6d942b9b1950f660f93" category="paragraph">次の例では、 node1 にイプシロンが設定されています。</block>
  <block id="56083d4ecb6381ba220374fe9dad2f3b" category="list-text">node1 にイプシロンが設定されている場合は、 node2 に転送できるように、イプシロンを false に設定します。</block>
  <block id="ce94642d2db6471658f082810ff26760" category="paragraph">cluster modify -node &lt;node1&gt; -epsilon false</block>
  <block id="c50c8db58d7cb6ecb263a833f1594cf2" category="list-text">node2 のイプシロンを true に設定して ' イプシロンを node2 に転送します</block>
  <block id="132623365cd4f5bf09a28e344e0106d0" category="paragraph">cluster modify -node &lt;node2 &gt; -epsilon true</block>
  <block id="6f223a55c3e4c37c6154b48d9ad6d103" category="list-text">node2 に対する変更が発生したことを確認します。</block>
  <block id="0e3cd42cd6320745185eaab80053ad4a" category="paragraph">node2 のイプシロンを true に設定し、 node1 のイプシロンを false に設定します。</block>
  <block id="f11c9613319f6e81aa0fa42fd830a1cb" category="list-text">セットアップが 2 ノードスイッチレスクラスタかどうかを確認します。</block>
  <block id="f72b72c0926d6dd4d51ae53a658c3ab1" category="list-text">node1 プロンプトから node1 を停止します。</block>
  <block id="f6c12efc36044a403873657724eb5a4a" category="paragraph">「システムノード停止 - ノード node1 」</block>
  <block id="7d63f771d73dc7f75f06e358cd9a7510" category="admonition">* 注意 * ： node1 が node2 と同じシャーシにある場合は、電源スイッチを使用するか、電源ケーブルを引き抜いて、シャーシの電源を切断しないでください。その場合は、データを提供している node2 が停止します。</block>
  <block id="ecd3525fa194c253a8cabf432a4a5041" category="list-text">システムを停止するかどうかを確認するメッセージが表示されたら、「 y 」と入力します。</block>
  <block id="4554f5f9818af46c131a159c2ec43887" category="paragraph">ノードはブート環境のプロンプトで停止します。</block>
  <block id="839c9527e6867357b4949b3cb19bd5a6" category="list-text">node1 にブート環境プロンプトが表示されたら、シャーシまたはラックからブート環境プロンプトを削除します。</block>
  <block id="1ae386d38d4b2e016ff919c2da5eb601" category="list-text">ポートの物理的な状態が「停止」である場合は、ネットワークケーブルの物理的な接続を確認します。</block>
  <block id="f72304143acea17b5bb5c4f384fb8c44" category="paragraph">内蔵ディスクドライブを搭載したコントローラをアップグレードする場合は、いくつかのコマンドを実行し、その出力を調べて、ルートアグリゲートやデータアグリゲートが含まれている内蔵ディスクドライブがないことを確認する必要があります。</block>
  <block id="58e9601fd22e1eb1174624568b62ceaf" category="paragraph">内蔵ディスクドライブにアグリゲートがあるコントローラをアップグレードしない場合は、このセクションをスキップし、セクションに進みます <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block>。</block>
  <block id="3553fa4aee6c92a690d8b3d2baf9f853" category="list-text">元のノードごとに 1 回、ノードシェルを入力します。</block>
  <block id="cd526e6ac745b3bc2d71e7b70ccbe24c" category="paragraph">「 system node run -node node_name 」のように指定します</block>
  <block id="4321f2c566f6fd9e0f937fb671257921" category="list-text">内蔵ドライブを表示します。</block>
  <block id="71d2d9e08815f28311d42e1fe65de729" category="paragraph">「 sysconfig -av 」</block>
  <block id="1a1cbaa9026d328ea0e1db1e1d719d1e" category="paragraph">次の例に示すように、ストレージを含む、ノードの構成に関する詳細情報が出力に表示されます。</block>
  <block id="1cec74df52c25d24213897a006ddbc7e" category="list-text">「 sysconfig -av 」コマンドのストレージ出力を調べて内蔵ディスク・ドライブを特定し、その情報を記録します。</block>
  <block id="63590836c75e5189303be6a7e2f1c0d6" category="paragraph">内蔵ドライブの ID は先頭に「 00 」と表示されます。「 00 」は内蔵ディスクシェルフを示し、小数点以下の数字は個々のディスクドライブを示します。</block>
  <block id="2581141629fb014ce68faf5b319c8a1e" category="list-text">[[man_aggr_step4]] 両方のコントローラで次のコマンドを入力します。</block>
  <block id="5047ace67eeca6eaa0de7c2c565db85b" category="paragraph">次の例の出力の一部に示すように、ノードのアグリゲートステータスが表示されます。</block>
  <block id="67e1c5578ec472925218b8535f73fd69" category="admonition">アグリゲートの作成に使用されるデバイスは物理ディスクではなく、パーティションの場合もあります。</block>
  <block id="ffdb41868fb358842d696b4ff8240d4e" category="list-text">aggr status -r コマンドの出力を調べて、内蔵ディスク・ドライブを使用しているアグリゲートを特定し、その情報を記録します。</block>
  <block id="4da1edbdb956754e59f0224136b9f957" category="paragraph">前の手順の例では、シェルフ ID が「 0 」の場合、「 aggr2 」は内蔵ドライブを使用します。</block>
  <block id="a0baee3eabdee6658afa877291a41600" category="list-text">両方のコントローラで次のコマンドを入力します。</block>
  <block id="259baa89207f2b2aded364ccd7acb88e" category="paragraph">「 aggr status -y 」を入力します</block>
  <block id="8248266e12181ad17765b9cf8ce40a99" category="paragraph">次の例の出力の一部に示すように、アグリゲート上のボリュームに関する情報が表示されます。</block>
  <block id="f8fee0808da945cb32ac4bfb7b116901" category="paragraph">の出力に基づきます <block ref="fafa89bc8a6136079f9e2f0a2a127d07" category="inline-xref-macro-rx"></block> 手順 6 では、 aggr2 は 3 つの内蔵ドライブ「 0a.00.1 」、「 0a.00.3 」、「 0a.00.9 」を使用します。「 aggr2 」のボリュームは「 vol6 」、「 vol5 」、「 vol14 」です。また、手順 6 の出力では、「 aggr0 」の読み出しには、アグリゲートの情報の先頭に「 root 」という単語が含まれています。ルートボリュームが含まれていることを示します。</block>
  <block id="85eba1a1c40e954eefa7c966f21fa202" category="list-text">「 aggr status -v 」コマンドの出力を調べ、内部ドライブ上のアグリゲートに属するボリュームと、それらのボリュームにルート・ボリュームが含まれているかどうかを確認します。</block>
  <block id="a0879940337c9b44fb9cad5bc9f2d541" category="list-text">各コントローラで次のコマンドを入力して、ノードシェルを終了します。</block>
  <block id="d9f6eac526670fe9182f1a63d251a180" category="paragraph">「 exit</block>
  <block id="f5a25cddbc643e856eabde4c6ba4d2a8" category="cell">コントローラの状況</block>
  <block id="087b658bc1f71a1f2cb5ec53fee94d23" category="cell">内蔵ディスクドライブにアグリゲートを含めないでください</block>
  <block id="6a58d5f6ed9134ff245eb1172f368af9" category="cell">この手順に進みます。</block>
  <block id="979cce52ff595ac16546680501986d88" category="cell">内蔵ディスクドライブにはアグリゲートは含まれますが、ボリュームは含まれません</block>
  <block id="0b63c25d5be0c7543233464f799ff9f8" category="cell">内蔵ドライブにルート以外のボリュームを格納します</block>
  <block id="1547c14e8c3676ab43b1f9bc7b69d98d" category="cell">内部ドライブ上のルートボリュームが含まれます</block>
  <block id="cf992e4682189e679999df1f59ac6447" category="cell">この手順を続行しないでください。コントローラをアップグレードする方法について、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> 手順を実行しているノードペアで、ボリュームを移動して Data ONTAP を実行しているコントローラハードウェアのアップグレードを実行し、 _NetApp Support Site_and へのリンク。</block>
  <block id="dec8ae2cc1cff82c9a15f47488d0827b" category="cell">内蔵ドライブにルート以外のボリュームを格納し、外付けストレージにボリュームを移動することはできません</block>
  <block id="823ba7326edea0fb085b50c3aab24f80" category="cell">この手順を続行しないでください。clustered Data ONTAP を実行しているノードのペアで手順 _ ボリュームを移動してコントローラハードウェアをアップグレードする方法を説明します。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> からネットアップサポートサイトにリンクして、この手順にアクセスできます。</block>
  <block id="c6b975088fd57ec819cfb2bc75820bfe" category="summary">スイッチオーバー、修復、スイッチバックの処理を検証します。</block>
  <block id="b6f0d4a86d2f3bdfeeb3c7670ef7d969" category="summary">node2 の物理ポートが node4 の物理ポートに正しくマッピングされていることを確認します。</block>
  <block id="632008a98e715bee32a4df8fc72ff280" category="paragraph">node2 の物理ポートが node4 の物理ポートに正しくマッピングされている必要があります。これにより、 node4 はクラスタ内の他のノードおよびアップグレード後のネットワークと通信できるようになります。</block>
  <block id="5fca7ca4e218be9851d30cba0f329262" category="paragraph">新しいノードのポートに関する情報を確認しておく必要があります。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> Hardware Universe にリンクするには、次の手順を実行します。このセクションの後半の情報を使用します。</block>
  <block id="8897c39b9e3259e6b8f69dc05949b6b0" category="paragraph">ノード 4 のソフトウェア設定がノード 4 の物理的な接続と一致している必要があります。また、アップグレードを続行する前に、 IP 接続をリストアする必要があります。</block>
  <block id="1b10a983f98ed23432fa58568f54f671" category="paragraph">したがって、 node2 の物理ポートが node4 の物理ポートに直接マッピングされない場合は、ブート後にクラスタ、管理、およびネットワーク接続をリストアするためにソフトウェア設定の変更が必要となります。また、 node2 のクラスタポートが node4 のクラスタポートに直接マッピングされていない場合は、正しい物理ポートでクラスタ LIF をホストするソフトウェア設定が変更されるまで、 node4 がリブートされたときに自動的にクォーラムに再参加しないことがあります。</block>
  <block id="529041da4d36160525aac5502b5d8ff7" category="list-text">ノード 2 、ポート、ブロードキャストドメイン、 IPspace に関するすべての node2 ケーブル接続情報を次の表に記録します。</block>
  <block id="24738875225e89a3fe6b531d598a45f9" category="paragraph">この情報を取得する手順については、「ノード 2 情報の記録」を参照してください。</block>
  <block id="7974b2ee243c61270cbc49955821fd33" category="list-text">の同じ手順を使用して、ノード 4 、ポート、ブロードキャストドメイン、および IPspace のすべてのケーブル接続情報を前の表に記録します <block ref="bf281b48b35a7cc176890f2be65ca906" category="inline-link-macro-rx"></block> この情報の入手方法については、を参照してください。</block>
  <block id="4a4552a72df2a500f815fd3a0166db9c" category="list-text">ノード 4 をクォーラムに追加するには、次の手順を実行します。</block>
  <block id="3117fde9d13ce2738e8565c02388235e" category="inline-link-macro">ノード 4 をインストールしてブートします</block>
  <block id="6a3f0aa15ae6d8d1023d18e294158b6d" category="list-text">ノード 4 をブートします。を参照してください <block ref="2f432fc28ce55bdf3f9384f7801ca745" category="inline-link-macro-rx"></block> ノードをブートします（まだブートしていない場合）。</block>
  <block id="8a624db640009bfcd8e57f0c71e33d5a" category="paragraph">「 network port show -node node -port port -fields broadcast-domain 」次の例は、ポート「 e0a 」が node4 のクラスタドメインにあることを示しています。</block>
  <block id="8ce18e9d769ff67698580bd546d1e73d" category="admonition">MetroCluster 構成の場合、ポートのブロードキャストドメインを変更できないことがあります。これは、同期先 SVM の LIF をホストしているポートに関連付けられており、次のようなエラーが表示されますが、制限はありません。</block>
  <block id="1e73d25bc38bc6b9d12b63ae78620236" category="paragraph">「 MetroCluster vserver resync -vserver vserver_name 」です</block>
  <block id="f7a4ad3a6f0336f093379bc2fd91976c" category="paragraph">network interface migrate -vserver Cluster -lif lif_name -source-node node4 -destination-node node4 -destination-port port_name</block>
  <block id="9d5b8b168e2bd5a1bd98e2db65454236" category="paragraph">このコマンドは、 node4 にあるポート「 e0d 」を削除します。「 network port broadcast-domain remove-ports -ipspace Cluster-broadcast-domain Cluster -ports node4 ： e0d 」</block>
  <block id="fe5e57fb0ea47a7c91c6af703c5ac090" category="list-text">[man_map_2_step5] クラスタ LIF とノード管理 / クラスタ管理 LIF をホストするブロードキャストドメインを調整します。各ブロードキャストドメインに正しいポートが含まれていることを確認してください。ホストしているブロードキャストドメイン間または LIF がホームにあるブロードキャストドメイン間でポートを移動することはできないため、次の手順に示すように、 LIF を移行して変更しなければならない場合があります。</block>
  <block id="979cd06d4d4cd640769d9da9d1735ead" category="list-text">必要に応じて、と同じコマンドを使用して、クラスタ間ブロードキャストドメインを調整してクラスタ間 LIF を移行します <block ref="8ca8005a6030839efa079ea5fc0aa218" category="inline-xref-macro-rx"></block>。</block>
  <block id="7d978d05ebca2bca32b82488daa9e7db" category="list-text">必要に応じて、のコマンドと同じコマンドを使用して、他のブロードキャストドメインを調整してデータ LIF を移行します <block ref="8ca8005a6030839efa079ea5fc0aa218" category="inline-xref-macro-rx"></block>。</block>
  <block id="02101c48ebc568e098e7b8c3f32aa89b" category="list-text">すべての LIF フェイルオーバーグループを調整します。「 network interface modify -failover-group failover_group -failover-policy failover_policy</block>
  <block id="fc5f8a7ca5bfb1a8040e796e49ecaa6c" category="paragraph">次のコマンドは ' フェイルオーバー・ポリシーを broadcast-domain-wide に設定し ' フェイルオーバー・グループ fg1 のポートを 'node4 の LIF のフェイルオーバー・ターゲットとして使用します</block>
  <block id="87724d5ff91f88d675b5dc5cf4703ebb" category="paragraph">「 network interface modify -vserver node4 -lif data1 failover-policy broadcast-domain-wide -failover-group fg1 」というメッセージが表示されます</block>
  <block id="4729603c33a154fd4e1f1d49888dbeaa" category="summary">ステージ 2 で、ノード 1 のアグリゲートと LIF をノード 2 に再配置し、ノード 1 の情報を記録してから、ノード 1 を廃棄します。</block>
  <block id="12398d7db543756eb9aaf57be6ee47a1" category="paragraph">ステージ 3 で、ノード 3 をインストールしてブートし、クラスタポートとノード管理ポートをノード 1 からノード 3 にマッピングし、ノード 3 のインストールを確認して、ノード 1 に属するデータ LIF と SAN LIF をノード 2 からノード 3 に移動します。また、すべてのアグリゲートを node2 から node3 に再配置し、 node2 によって所有されているデータ LIF と SAN LIF を node3 に移動します。</block>
  <block id="fae618cfa140cbca52d057afef5df1da" category="list-text"><block ref="fae618cfa140cbca52d057afef5df1da" category="inline-link-macro-rx"></block></block>
  <block id="a8d507fcc05a3431c75860216853c15e" category="list-text"><block ref="a8d507fcc05a3431c75860216853c15e" category="inline-link-macro-rx"></block></block>
  <block id="2eb3ddacc3cdbca929068de80db9b0b7" category="list-text"><block ref="2eb3ddacc3cdbca929068de80db9b0b7" category="inline-link-macro-rx"></block></block>
  <block id="c67377fc77151c30a07d038922241b21" category="list-text"><block ref="c67377fc77151c30a07d038922241b21" category="inline-link-macro-rx"></block></block>
  <block id="f7afd5134081c6d88b6809aff0cfe38b" category="summary">アップグレードの各段階で、システムがクラッシュする（リブート、パニック状態、または電源の再投入）場合があります。これらの問題の解決策は、状況によって異なります。</block>
  <block id="8d2ddd9f1b9624e868ebb43ee6cda365" category="section-title">ステージ 2 でリブート、パニック、または電源の再投入が発生した場合</block>
  <block id="e614ebb551c0186535d784a7b48379a2" category="paragraph">クラッシュは、ステージ 2 の前後、またはステージ 2 のアグリゲートをノード 1 からノード 2 に再配置し、ノード 1 が所有するデータ LIF と SAN LIF をノード 2 に移動し、ノード 1 の情報を記録し、ノード 1 を廃棄する前、実行中、またはただちに発生します。</block>
  <block id="f9fc0ccdf6eca6c6dbb00170548006b8" category="section-title">HA を有効にして第 2 段階の前にノード 1 またはノード 2 がクラッシュする</block>
  <block id="04818410504d7e5aff0400546dfc87fe" category="paragraph">ステージ 2 の前にノード 1 またはノード 2 がクラッシュした場合は、再配置されたアグリゲートがなく、 HA 構成が有効なままになります。</block>
  <block id="141bacc3e7a6f502bd3657db72437350" category="list-text">コンソールで、システムで発行された EMS メッセージを確認し、推奨される対処方法を実行します。</block>
  <block id="7495ab667ca2ae1018dd9d3dd2908757" category="section-title">HA を有効にして第 2 段階の実行中または直後にノード 1 がクラッシュする</block>
  <block id="6647bb8df429d773e26f287ab8630e64" category="paragraph">一部またはすべてのアグリゲートがノード 1 からノード 2 に再配置されており、 HA が有効なままです。node2 は、 node1 のルートボリュームと再配置されていないルート以外のアグリゲートをテイクオーバーします。</block>
  <block id="f4b8ae37ca9898c85f5a495e29540325" category="paragraph">再配置されたアグリゲートの所有権は、ホーム所有者が変更されていないためにテイクオーバーされたルート以外のアグリゲートの所有権と同じように見えます。node1 の「 waiting for giveback state 」が表示されたら、 node2 にはノード 1 のルート以外のアグリゲートがすべてギブバックされます。</block>
  <block id="91cf7a0902c4d8935fa01c715ec744dc" category="list-text">- 完了しました <block ref="293daa0ef1b8dc10a56298f74ae852e0" category="inline-link-macro-rx"></block> セクションの _root 以外のアグリゲートをノード 1 から node2 _ に再配置する</block>
  <block id="74d5b8b871208d748fdac979190074e1" category="section-title">HA を無効にすると、ステージ 2 のあとにノード 1 がクラッシュします</block>
  <block id="9ad3dc0563b6521da592666e0c96170d" category="paragraph">node2 はテイクオーバーしませんが、ルート以外のすべてのアグリゲートから引き続きデータを提供しています。</block>
  <block id="cf843a9114c64e407d26e842eb2aa5c2" category="inline-link-macro">予期しない「 storage failover show 」コマンドの出力が表示されます</block>
  <block id="94a4747b7f624695a71106c7bd97a9c7" category="paragraph">「 storage failover show 」コマンドの出力には変更が表示されることがありますが、これは通常の動作であり、手順には影響しません。トラブルシューティングのセクションを参照してください <block ref="b83b9fc12613c040fac52ff371fe932a" category="inline-link-macro-rx"></block>。</block>
  <block id="15c9d515df1ae9990db781b0882abe66" category="section-title">ステージ 2 の実行中または実行後に、 HA を有効にして node2 に障害が発生する</block>
  <block id="716abd00d1127a1995735a99a806c57a" category="paragraph">ノード 1 の一部またはすべてのアグリゲートが node2 に再配置されています。HA が有効になっている。</block>
  <block id="f0cdf8c3a0614c42ddbb847f4d954ecc" category="paragraph">ノード 1 は、ノード 2 のすべてのアグリゲートと、ノード 2 に再配置された独自のアグリゲートをテイクオーバーします。node2 が Waiting for giveback' 状態になると、 node1 は node2 のすべてのアグリゲートをギブバックします。</block>
  <block id="d9cfe3ea2fdbf3c16ed9c5e72d3e656c" category="section-title">ステージ 2 で HA を無効にすると、ノード 2 がクラッシュする</block>
  <block id="60d779c99277ce73af20b8df4f5f56d7" category="paragraph">ノード 1 ではテイクオーバーされません。</block>
  <block id="6cd506af8fb7a9917363ff2842c8cc31" category="paragraph">node2 のブート中にすべてのアグリゲートでクライアントが停止します。</block>
  <block id="4fcbd6d017dc3bed8096ddf23845774a" category="list-text">残りのノードペアのアップグレード手順に進みます。</block>
  <block id="a5d750c0f90be33b555932b544614491" category="section-title">ステージ 3 でリブート、パニック、電源の再投入が発生した場合</block>
  <block id="c4ff6b7da7d4d6d1387161732065f7e3" category="paragraph">ステージ 3 の実行中または実行直後に障害が発生し、ステージ 3 ではノード 1 からノード 3 へのポートのマッピング、ノード 1 とノード 2 に属するデータ LIF と SAN LIF のノード 3 への移動、ノード 2 からノード 3 へのすべてのアグリゲートの再配置が行われます。</block>
  <block id="6c6e673ed49e2d3170e896afadb82987" category="section-title">HA を無効にした状態でステージ 3 が実行され、アグリゲートを再配置する前にノード 2 がクラッシュする</block>
  <block id="d0dbe31475820a3a3bf65dc0bcdc3d22" category="paragraph">HA がすでに無効になっているため、ノード 2 のクラッシュ後はノード 3 はテイクオーバーしません。</block>
  <block id="123d371d6f3654b02ea395d3cdce7a43" category="section-title">一部またはすべてのアグリゲートの再配置後、ステージ 3 でノード 2 がクラッシュする</block>
  <block id="3312049a8df38d6a9cc500f8d982615c" category="paragraph">node2 の一部またはすべてのアグリゲートが node3 に再配置され、再配置されたアグリゲートからデータが提供されます。HA が無効になっています。</block>
  <block id="4293c82d89ec7602e20335979cb19469" category="paragraph">再配置されなかったアグリゲートのクライアントが停止します。</block>
  <block id="325bf4ef0d3493b41794238266e0490a" category="list-text">残りのアグリゲートの再配置は完了して実行します <block ref="789a9a29365551abd6a71d3f355e39cb" category="inline-link-macro-rx"></block> から <block ref="a9ed1005965421826d33fd16a9c02ffe" category="inline-link-macro-rx"></block> セクションの _root 以外のアグリゲートを node2 から node3 _ に移動する</block>
  <block id="7777ccf7f0f06dad3ffad451bb0e83b8" category="section-title">ステージ 3 でノード 2 からアグリゲートが再配置される前に、ノード 3 がクラッシュした場合</block>
  <block id="ec2cd6235f2c50a1e7fed067fe8301f8" category="section-title">アグリゲートの再配置中に、ステージ 3 でノード 3 がクラッシュした場合</block>
  <block id="bdf12c9e6bf2221b5ef584b80346aaaf" category="paragraph">node2 によるアグリゲートのノード 3 への再配置中にノード 3 がクラッシュした場合、 node2 を使用すると残りのアグリゲートの再配置が中止されます。</block>
  <block id="5f54439349a0049ded037d046c54cb66" category="paragraph">node2 では残りのアグリゲートの処理が続行されますが、 node3 のブート中にすでに node3 に再配置されたアグリゲートでクライアントが停止する可能性があります。</block>
  <block id="e9f32c360440ff87eefc6b2ac000051b" category="list-text">- 完了しました <block ref="a9ed1005965421826d33fd16a9c02ffe" category="inline-link-macro-rx"></block> セクションの「ルート以外のアグリゲートを node2 から node3 _ に再配置する」を再度実行します。</block>
  <block id="78d6fd9200a4f713a83c4db59f80581d" category="section-title">ステージ 3 でクラッシュすると、ノード 3 がブートしない</block>
  <block id="1f3a2d115338d5055575085be720a753" category="paragraph">重大な障害が原因で、ステージ 3 のクラッシュ後に node3 をブートすることはできません。</block>
  <block id="50c2d2087402d2dc8c5767a6ac83e96d" category="paragraph">テクニカルサポートにお問い合わせください。</block>
  <block id="cf3f87997342db92eccc23b02a73f26b" category="section-title">ステージ 3 のあと、ステージ 5 の前に node2 がクラッシュします</block>
  <block id="f9266620f38392278a4002882f41b801" category="paragraph">ノード 3 では、すべてのアグリゲートのデータの提供が続行されます。HA ペアが無効になります。</block>
  <block id="45e4e2e875b4e69af2a57be92e35bd6d" category="section-title">ステージ 3 の完了後、ステージ 5 の前にノード 3 がクラッシュした場合</block>
  <block id="3558827f5793acfed9bd716ccf9185d2" category="paragraph">ステージ 3 の完了後、ステージ 5 の前にノード 3 がクラッシュした場合。HA ペアが無効になります。</block>
  <block id="a7b36ae4a63894ec22ce7b4ffc1a7601" category="paragraph">すべてのアグリゲートがクライアントで停止します。</block>
  <block id="dba18149d1d705af7c19dced9bbd93eb" category="section-title">ステージ 5 でリブート、パニック、または電源の再投入が発生した場合</block>
  <block id="6faaefd8133cb9348e7c089d482c5e7d" category="paragraph">クラッシュは、ステージ 5 、ノード 4 のインストールとブートのステージ、ノード 2 からノード 4 へのポートのマッピング、ノード 2 に属するデータ LIF と SAN LIF のノード 2 からノード 4 への移動、ノード 2 のすべてのアグリゲートのノード 3 からノード 4 への再配置の実行中に発生する可能性があります。</block>
  <block id="188229afd48ed8799252ee3f4371adf0" category="section-title">ステージ 5 でノード 3 がクラッシュする</block>
  <block id="12c209a765d259bdad104c55c61bccd8" category="paragraph">ノード 3 の一部またはすべてのアグリゲートが node4 に再配置されている。node4 にはテイクオーバーは行われず、 node3 がすでに再配置されたルート以外のアグリゲートは引き続き提供されます。HA ペアが無効になります。</block>
  <block id="b316707438480481b688396bee35435b" category="paragraph">node3 が再度ブートするまでは、残りのアグリゲートが停止している必要があります。</block>
  <block id="059fe117edfac83eeb29495f9fd915b7" category="list-text">node2 に属していた残りのアグリゲートを再配置します <block ref="21d698177270cdcc53abb50c511e3bde" category="inline-link-macro-rx"></block> から <block ref="c5be787c4fcfd0f49f014e8618d28c15" category="inline-link-macro-rx"></block> セクションの _Relocate node2 のルート以外のアグリゲートを node3 から node4 に再配置する例を次に示します。</block>
  <block id="a018f0afc69622b99ebe84263c79ed31" category="list-text">ノードペアのアップグレード用手順に進みます。</block>
  <block id="17772501b6724fd9858e76539d802bae" category="section-title">ステージ 5 でノード 4 がクラッシュした場合</block>
  <block id="ed77b7aeb374975ae2dc4f8a9a5d5551" category="paragraph">ノード 3 の一部またはすべてのアグリゲートが node4 に再配置されている。node3 は、自身が所有しているルート以外のアグリゲートおよび再配置されていないアグリゲートを引き続き提供します。HA が無効になっています。</block>
  <block id="599f33809165d54cb3217e306c6f0f1f" category="paragraph">ノード 4 が再びブートするまで再配置されたルート以外のアグリゲートは停止します。</block>
  <block id="4756394ada9b0ffaa73813469d36b72d" category="list-text">再度完了して、 node2 に属していた残りのアグリゲートを再配置します <block ref="21d698177270cdcc53abb50c511e3bde" category="inline-link-macro-rx"></block> から <block ref="c5be787c4fcfd0f49f014e8618d28c15" category="inline-link-macro-rx"></block> In _Relocate node2 のルート以外のアグリゲートを node3 から node4 に再配置します。</block>
  <block id="9aaef9dffcf840cad7fb0cb145740a34" category="summary">node2 に AutoSupport メッセージを送信し、 node2 によって所有されているルート以外のアグリゲートを node3 に再配置します。</block>
  <block id="b8a386efa3c6aa2c0554c650dfc15d81" category="paragraph">node2 を node4 に置き換える前に、 node2 の AutoSupport メッセージを送信し、 node2 に所有されているルート以外のアグリゲートを node3 に再配置する必要があります。</block>
  <block id="e4fe7514f720448bae21164b8b7a8a98" category="list-text">[[step1] node2 に関する AutoSupport メッセージをネットアップに送信します。</block>
  <block id="088fc05a96b10d26c3f25411385117f2" category="paragraph">「 system node AutoSupport invoke -node node2 -type all -message 」「 Upgrading node2 from platform_old to platform_new 」というメッセージが表示されます</block>
  <block id="fb876532a1278ecbe2a9e2aa30ef59c2" category="list-text">AutoSupport メッセージが送信されたことを確認します。</block>
  <block id="2e7bb8e758be89869c95ab23b96089a8" category="paragraph">「 system node AutoSupport show -node &lt;node2&gt; -instance 」のように表示されます</block>
  <block id="632ce4fa5102cfac495b3c1490de0513" category="paragraph">「 Last Subject Sent ：」および「 Last Time Sent ：」のフィールドには、最後に送信されたメッセージのメッセージタイトルと、メッセージが送信された時刻が含まれています。</block>
  <block id="872a7a7f067f5ac8e7a4df8b55cb3129" category="list-text">[[step3]] ルート以外のアグリゲートの再配置：</block>
  <block id="33cfec7231d81810ac482a09c5b69c00" category="list-text">node2 が所有するアグリゲートを表示します。</block>
  <block id="ceb3b4f875043e902ad0c2c7df540ac4" category="paragraph">「 storage aggregate show-owner-name node2 」</block>
  <block id="e5d22039d8dff591d18701d62fb4083d" category="list-text">アグリゲートの再配置を開始する：</block>
  <block id="2a2be3ec611dd374f220ea53bd3e0758" category="paragraph">「 storage aggregate relocation start -node &lt;node2&gt; -destination &lt;node3&gt; -aggregate-list * -nd-controller-upgrade true</block>
  <block id="cba3015195e189328dd15ef19c0cdcff" category="admonition">コマンドは、ルート以外のアグリゲートのみを特定します。</block>
  <block id="c3aa957126a7abd53abe73b1af74dfb8" category="paragraph">再配置はバックグラウンドで実行されます。アグリゲートの再配置には数秒から数分かかる場合があります。この時間には、クライアントの停止部分と停止部分の両方が含まれます。このコマンドでは、オフラインまたは制限されたアグリゲートが再配置されません。</block>
  <block id="00bfced11707df12b7beabc9cb1854c6" category="list-text">admin 権限レベルに戻ります。</block>
  <block id="6b5ba31b334c119525a36a4c654c79fc" category="list-text">node2 の再配置のステータスを確認します。</block>
  <block id="a6f10385b3e5082eca317137f25e29be" category="paragraph">「 storage aggregate relocation show -node node2 」を参照してください</block>
  <block id="e0b277bd202f6924948f2209a81b8cb0" category="paragraph">アグリゲートを再配置すると、そのアグリゲートの出力に「 Done 」と表示されます。</block>
  <block id="5f99044f7fd5dd98c2e83408099900a7" category="admonition">node2 に所有されているすべてのアグリゲートが node3 に再配置されてから次の手順に進む必要があります。</block>
  <block id="c8ee48ad015fbbcc6f1c096e31a9b081" category="cell">に進みます <block ref="0d8c3ea689b325a11fe26527348a6eff" category="inline-xref-macro-rx"></block>。</block>
  <block id="12d1b6919c7c68de63bfe55847d735a3" category="cell">アグリゲートに障害が発生したか、拒否された</block>
  <block id="d6e415f41ef651a14c6408b58b5f34fa" category="list-text">詳細なステータスメッセージを表示します。</block>
  <block id="4382ef08403cdc87d0db14f4b0dbe621" category="paragraph">「 storage aggregate show -instance 」のように表示されます</block>
  <block id="52aa1d8f7452c944bbc112edc69d159d" category="paragraph">EMS ログで必要な対処方法を確認することもできます。</block>
  <block id="64a1f8cc2ee975b38446e3b8f940164e" category="paragraph">* 注意 *:event log show コマンドは、発生したエラーを一覧表示します。</block>
  <block id="3f8dbc42a73ae9a6487e0757b393d2fb" category="paragraph">「 storage aggregate relocation start -node &lt;node2&gt; -destination &lt;node3&gt; -aggregate-list * -nd-controllerupgrade true 」という形式で指定します</block>
  <block id="856f354dcadb2aef2f73a7a610300d05" category="paragraph">必要に応じて、次のいずれかの方法で強制的に再配置を実行できます。</block>
  <block id="6abaecd9da93fcc5260d726fe8a8fa56" category="list-text">拒否のチェックを無視する：</block>
  <block id="b62638cdb7e1a6240698379b6c81d35b" category="paragraph">「 storage aggregate relocation start -override-vetoes true -nd-controller-upgrade</block>
  <block id="230cd704f9f55647ecfe8129ed941e8e" category="list-text">送信先チェックを無効にする：</block>
  <block id="35df77bf8b92d76c3b871148e8c46c51" category="paragraph">「 storage aggregate relocation start -override-destination-checks true -ndocontroller -upgrade 」を実行します</block>
  <block id="329fdaa2cd3cf795781d3ee938047475" category="list-text">[man_relocate_2_3_step6] ルート以外のアグリゲートがすべてノード 3 でオンラインになっていることを確認します。</block>
  <block id="ef54d8b76027ced4d5a36092399b0849" category="paragraph">「 storage aggregate show -node &lt;node3 &gt; -state offline-root false 」という 2 つのコマンドを実行します</block>
  <block id="ecc3f3e0b2ef3c70a30fe8be1af81d75" category="paragraph">オフラインになったアグリゲートや外部になったアグリゲートがある場合は、各アグリゲートを 1 つずつオンラインにする必要があります。</block>
  <block id="1dc7145853b865022c2423c0562bf7ed" category="list-text">ノード 3 ですべてのボリュームがオンラインになっていることを確認します。</block>
  <block id="8526a5587200c78144bc2d1fabd13d3a" category="paragraph">ノード 3 でオフラインになっているボリュームがある場合は、各ボリュームについて 1 回、オンラインにする必要があります。</block>
  <block id="7adac7d8af549857f31077a908e21bf4" category="paragraph">volume online -vserver Vserver -name -volume volume-name</block>
  <block id="5d28ff5ed2a011a10e2c1fd4e4e77822" category="list-text">node2 にオンラインのルート以外のアグリゲートがないことを確認します。</block>
  <block id="dcc422920951416bc8ad4e66178b7556" category="paragraph">「 storage aggregate show-owner-name &lt;node2&gt; -ha-policy sfo-state online 」のように表示されます</block>
  <block id="232cf0d45bdcae298c19689d1bf05bea" category="paragraph">ルート以外のオンラインアグリゲートがすべて node3 にすでに再配置されているため、コマンドの出力にルート以外のオンラインアグリゲートが表示されないようにする必要があります。</block>
  <block id="b6742607d26992d00c1c286b5aa83838" category="summary">オンボードキーマネージャを使用して、認証キーを管理できます。</block>
  <block id="570b3bce33225ec8be6a14d8b8bfecc7" category="paragraph">オンボードキーマネージャを使用して認証キーを管理できます。オンボードキーマネージャ（ OKM ）を使用する場合は、アップグレードを開始する前にパスフレーズとバックアップ資料を記録しておく必要があります。</block>
  <block id="775c20f6787aab41a2e8a95674e08cc7" category="list-text">クラスタ内のすべてのノードがキー管理サーバを使用できることを確認します。</block>
  <block id="803c74f5b21c1a4dac35d85f254e7d20" category="paragraph">'storage encryption disk modify -disk * [-data-key-id nonMSID AK</block>
  <block id="71c5d3d7f0857c67830fb002783fd24e" category="paragraph">手順の各フェーズについては、セクションの表を参照してください <block ref="25c64b56e1634b7195570b2ce4c1228b" category="inline-link-macro-rx"></block>。発生する可能性がある障害の情報は、手順のフェーズ別に表示されます。</block>
  <block id="96518cf6fc4836f38d5963152c3b52fc" category="list-text"><block ref="96518cf6fc4836f38d5963152c3b52fc" category="inline-link-macro-rx"></block></block>
  <block id="b41eca4a9e61478c5412544da1b31c9f" category="list-text"><block ref="b41eca4a9e61478c5412544da1b31c9f" category="inline-link-macro-rx"></block></block>
  <block id="03f183bce69c6c170ce7d98b73a0da9b" category="list-text"><block ref="03f183bce69c6c170ce7d98b73a0da9b" category="inline-link-macro-rx"></block></block>
  <block id="bffc8177304b2cba0a93e9425c22a1b7" category="list-text"><block ref="bffc8177304b2cba0a93e9425c22a1b7" category="inline-link-macro-rx"></block></block>
  <block id="e74451404fb8d41f6db27c4f815f8cf3" category="list-text"><block ref="e74451404fb8d41f6db27c4f815f8cf3" category="inline-link-macro-rx"></block></block>
  <block id="3a6500123c2f0d42b9a5461a35feb1eb" category="summary">ファブリック内のスイッチを永続的に有効にし、 Brocade 、 Cisco を有効にします</block>
  <block id="2df3dd26d8dceded8e8da8277098895a" category="paragraph">ファブリック内のスイッチを永続的に有効にする必要があります。</block>
  <block id="5c399963772634ba1fc18f52ce25b7d5" category="paragraph">スイッチを永続的に有効にします。</block>
  <block id="1b9078b6f6fd34ef368d1162644a9f35" category="list-text">Brocade スイッチの場合は、「 witchCfgPersistentenable 」コマンドを使用します。</block>
  <block id="7f53ae5380891cb24e6bd16877533f63" category="list-text">Cisco スイッチの場合は 'no suspend' コマンドを使用します</block>
  <block id="b7b905c0afbdf5992546ec3f33f8507f" category="summary">ノードを物理的にラックに設置したあとで、 node3 と node4 をネットブートする必要がある場合があります。</block>
  <block id="017a287daf9403479607113762fdf28d" category="paragraph">ノード 3 とノード 4 を手順の後半で物理的にラックに設置したあと、ネットブートが必要になることがあります。「 _netboot_ 」は、リモートサーバに保存されている ONTAP イメージからブートすることを意味します。ネットブートの準備を行うときは、システムがアクセスできる Web サーバに、 ONTAP 9 ブート・イメージのコピーを配置する必要があります。</block>
  <block id="3dd228d301de455327861edf46a3a6c7" category="paragraph">ただし、元のコントローラと同じバージョンの ONTAP 9 がインストールされているコントローラには、ネットブートする必要はありません。その場合は、このセクションをスキップしてに進みます <block ref="2bff11e37a7944fe4126fc6d0031317c" category="inline-link-macro-rx"></block>。</block>
  <block id="021eb7b60dabf41949ccbeca660311c4" category="list-text">[man_netboot_Step1] ネットアップサポートサイトにアクセスして、システムのネットブートの実行に使用するファイルをダウンロードします。</block>
  <block id="7aaf61c00ba3ad0e715187e2a6df58df" category="cell">「 ONTAP_version_image.tgz 」ファイルの内容をターゲットディレクトリに展開します。 tar -zxvf ONTAP_version_image.tgz * 注： Windows で内容を展開する場合は、 7-Zip または WinRAR を使用してネットブートイメージを抽出します。ディレクトリの一覧には、カーネル・ファイル「 netboot/ kernel 」を含むネットブート・フォルダが含まれている必要があります</block>
  <block id="12ae351e56c133971ddc0802d3e5f372" category="cell">ディレクトリの一覧に次のファイルが含まれている必要があります。 "ONTAP_version_image.tgz *Note: 「 ONTAP_version_image.tgz 」ファイルの内容を抽出する必要はありません。</block>
  <block id="7704ef8efcd46a7ed3c60b0b5522a4f5" category="paragraph">では、ディレクトリの情報を使用します <block ref="f7260a7bcbdd09edcf840aac6c5a4af7" category="inline-link-macro-rx"></block>。</block>
  <block id="630cec3291759dd967d8afd9c4e8545f" category="inline-link-macro">ノード 1 で所有されているルート以外のアグリゲートと NAS データ LIF を node2 に再配置します</block>
  <block id="7115fb4a39be3cfe6cee8101025f1504" category="list-text"><block ref="7115fb4a39be3cfe6cee8101025f1504" category="inline-link-macro-rx"></block></block>
  <block id="381638a6e0f7aca4ddd9fcf0b9a1b531" category="inline-link-macro">node1 で所有されている NAS データ LIF を node2 に移動します</block>
  <block id="dcf0f8ecb6c997def559b3960cde05ca" category="list-text"><block ref="dcf0f8ecb6c997def559b3960cde05ca" category="inline-link-macro-rx"></block></block>
  <block id="983e8d5011cadd8bafa613b4879ba72d" category="inline-link-macro">node1 の情報を記録しています</block>
  <block id="a47c5ad7a0d8f464831a41a2bbd2f0e4" category="list-text"><block ref="a47c5ad7a0d8f464831a41a2bbd2f0e4" category="inline-link-macro-rx"></block></block>
  <block id="ec8e968619d70fa650eb72c40fe2c6fb" category="summary">HA ペアを有効にして、新しいコントローラが正しくセットアップされていることを確認します。</block>
  <block id="9049f1bbc92896381d7b5ffdc386e3b2" category="list-text">いずれかのノードで次のコマンドを入力して、ストレージフェイルオーバーを有効にします。</block>
  <block id="4d090b6b4178c6d326829a98b05a4cd7" category="paragraph">「 storage failover modify -enabled true -node node3 」です</block>
  <block id="44b65ecdfbcd9fda48c21d17aae6347e" category="cell">クラスタの種類</block>
  <block id="f58285c881fa273f24181ed6fc4f5253" category="cell">どちらかのノードで cluster ha modify -configured true コマンドを入力して ' クラスタの高可用性を有効にします</block>
  <block id="97b53f9857ac13c0da869099d031be38" category="cell">に進みます <block ref="822b8237ef75a77ff6f775dfc30b209c" category="inline-xref-macro-rx"></block>。</block>
  <block id="c923a045fa01384244a7d722820ecb7f" category="list-text">[[man_ver_setup_Step4]] 次のコマンドを入力して、 node3 と node4 が同じクラスタに属していることを確認します。</block>
  <block id="993ec2fcd18633816cf0d4d290fcf5a3" category="list-text">次のコマンドを入力し、出力を調べて、 node3 と node4 が相互のストレージにアクセスできることを確認します。</block>
  <block id="00c012d0f7127c31c470ac3c1c76aa44" category="list-text">次のコマンドを入力し、出力を調べて、 node3 と node4 がクラスタ内の他のノードによってホーム所有されているデータ LIF を所有していないことを確認します。</block>
  <block id="2a6d96821a4ce6866da866e48a1ece2a" category="paragraph">node3 または node4 に、クラスタ内の他のノードがホーム所有するデータ LIF がある場合は、「 network interface revert 」コマンドを使用して、データ LIF をホーム所有者にリバートします。</block>
  <block id="b7836a7a1972d5f8803e2f44bd3cb658" category="paragraph">「 storage aggregate show-owner-name node3 」「 storage aggregate show-owner-name node4 」</block>
  <block id="4655a1857691d25ac0c12a710dad5454" category="paragraph">volume show -node &lt;node3 &gt; -state offline `volume show -node &lt;node4 &gt; -state offline`</block>
  <block id="183048ad5f29710efbac355627777865" category="inline-link-macro">手順 19 （ d ）</block>
  <block id="be3ae65f9ab44c1be767b14ddc884bfc" category="list-text">オフラインのボリュームがある場合は、で取得したオフラインボリュームのリストと比較します <block ref="f226f1513a3b2dc8065e1f4d6987a247" category="inline-link-macro-rx"></block> で、各ボリュームに対して次のコマンドを 1 回入力して、アップグレードの準備をし、必要に応じてオフラインのボリュームをオンラインにします。</block>
  <block id="5d41e09cfbf05ac79dc026cd1e32857c" category="list-text">ノードごとに次のコマンドを入力して、新しいノード用の新しいライセンスをインストールします。</block>
  <block id="8502756d136a7fbd63f0576ce096751b" category="paragraph">'system license add - license-code &lt;license_code, license_code, license_code...&gt;`</block>
  <block id="65d93c0f2eae68c69877f67ce3781996" category="paragraph">license-code パラメータには、アルファベットの文字キーをアルファベットの大文字 28 個まで入力できます。ライセンスは一度に 1 つずつ追加することも、ライセンスキーごとにカンマで区切って複数ずつ追加することもできます。</block>
  <block id="1f6c8829a415beddc4ce10181f20094a" category="inline-link-macro">手順 16</block>
  <block id="379a68b9bd0f0131eae2f5bd87fa4bcc" category="list-text">構成に NetApp Storage Encryption （ NSE ）を使用していた場合は、「 kmip.init.maxwait` 」変数を「 off 」にして「 etenv bootarg storageencryption.support 」コマンドを「 true 」に設定します（を参照） <block ref="c34adc28d35ee24325c874eba95a8786" category="inline-link-macro-rx"></block> of _ Install and boot node3 _ ）では、変数をリセットする必要があります。 `set diag ； systemshell -node &lt;node-name&gt; command sudo kenv -u -p kmip.init.maxwait`</block>
  <block id="c13dda3e4975b286bfb62f3d9aa8cfa5" category="list-text">元のノードから古いライセンスをすべて削除するには、次のいずれかのコマンドを入力します。</block>
  <block id="a0cc12382dcdc36e42046d83b6c7e109" category="paragraph">'system license clean-up -unused -expired 'system license delete -serial-number node_name -package licensed_package'</block>
  <block id="f1645d1878d86f7024812da747846642" category="list-text">期限切れのライセンスをすべて削除するには、次のように入力します</block>
  <block id="fd6db757e3a6fb12f04139c8f48aab93" category="list-text">未使用のライセンスをすべて削除するには、次のように入力し</block>
  <block id="0fae8f5a8ab68238375deb31e474111d" category="list-text">クラスタから特定のライセンスを削除するには、ノードで次のコマンドを入力します。</block>
  <block id="a2f728dde7d316431fdf17126688b93c" category="paragraph">「 system license delete -serial-number node1 -serial-number-package * 「 system license delete -serial-number node2 -serial-number-package *</block>
  <block id="d1ee77d0c558bd478284637572157e43" category="list-text">次のコマンドを入力し、出力を調べて、ライセンスが正しくインストールされていることを確認します。</block>
  <block id="7092e15f19aa79a4b642157f15a4bcf6" category="inline-link-macro">手順 30</block>
  <block id="332e0dd58dd105f49bb8b855cc6e08e6" category="paragraph">でキャプチャした出力と比較することを推奨します <block ref="aa31de159a7a7903f22336e05c00b63e" category="inline-link-macro-rx"></block> で、ノードをアップグレードする準備をしています。</block>
  <block id="65816664fef74fe3f15406730c518f76" category="list-text">両方のノードで次のコマンドを実行して、 SP を設定します。</block>
  <block id="948b0596f650b1efb4aebbdb1ff268fe" category="paragraph">「 system service-processor network modify -node node -name 」を参照してください</block>
  <block id="3d39e72120bdfa8b32eb4183896ece25" category="paragraph">に進みます <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> SP の詳細については ' システム管理リファレンスにリンクし '_System ONTAP 9 コマンド：マニュアルページリファレンスにリンクし 'system service-processor network modify コマンドの詳細については ' を参照してください</block>
  <block id="8bd516232448307a629aa2ad8fe64430" category="list-text">次のコマンドを入力して、 advanced 権限レベルに切り替えます。</block>
  <block id="b67e0c8ad4d089069e3751204ab49a05" category="paragraph">「 storage failover modify -node &lt;node-name&gt; -CIFS-NDO -duration default | medium | low 」</block>
  <block id="ee16bb116206ed27e74abc4888edf806" category="list-text">処理の 50 ～ 75 パーセントが 4 KB 以下のワークロードがある場合は、「 m edium 」と入力します。</block>
  <block id="93b838bedea5b323f56d1fb4aec030fe" category="list-text">システムのワークロードが 75% ～ 100% の場合は 'low' と入力します</block>
  <block id="52eb8cb5708af7396828abc72517413d" category="list-text">新しいノードにスイッチレスクラスタをセットアップする場合は、に進みます <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ネットワークサポートサイトへのリンクをクリックし、 2 ノードスイッチレスクラスタへの移行の手順に従ってください。</block>
  <block id="a98b8d21a1cabe96a7d765976c724ace" category="paragraph">ノード 3 とノード 4 でストレージ暗号化が有効になっている場合は、の手順を実行します <block ref="94c0a6a874300fcf012d00a23a1b673f" category="inline-link-macro-rx"></block>。それ以外の場合は、の手順を実行します <block ref="6e48b929ca0767f00c15eeb6d7e78755" category="inline-link-macro-rx"></block>。</block>
  <block id="7a7a97b0a4426efc4fdcea55664d34bf" category="summary">ステージ 4 で、 node2 の情報を記録し、 node2 を撤去します。</block>
  <block id="fd3872e47efb012f5a3b1205255c2e0d" category="doc">ステージ 4 ：ノード 2 の情報を記録し、ノード 2 を撤去</block>
  <block id="bf281b48b35a7cc176890f2be65ca906" category="list-text"><block ref="bf281b48b35a7cc176890f2be65ca906" category="inline-link-macro-rx"></block></block>
  <block id="3b878279a04dc47d60932cb294d96259" category="doc">概要</block>
  <block id="3a836223b6604b6ae4f5479bf7fe0514" category="paragraph">スイッチを再設定する前に、 AutoSupport an 問題 message to notify NetApp technical support that maintenance is maintenance.システム停止が発生したとみなしてテクニカルサポートがケースをオープンしないように、メンテナンスが進行中であることを通知する必要があります。</block>
  <block id="68e6b44b3a749a5a92b3130b283a8d5c" category="paragraph">このタスクは MetroCluster サイトごとに実行する必要があります。</block>
  <block id="2582e010e97c2f1b4ef7a684672e4598" category="list-text">クラスタにログインします。</block>
  <block id="ee4b431a595989bb32df666099e34bf8" category="list-text">メンテナンスの開始を通知する AutoSupport メッセージを起動します。</block>
  <block id="000be743e2bbedc544736fd887cacf7b" category="paragraph">「 system node AutoSupport invoke -node * -type all -message MAINT= maintenance-window-in-hours 」というメッセージが表示されます</block>
  <block id="8b8313711f50dddf1be23555c3e398af" category="paragraph">「 maintenance-window-in-hours 」の値は、メンテナンス時間の長さを指定します。最大値は 72 時間です。この時間が経過する前にメンテナンスが完了した場合は、メンテナンス期間が終了したことを通知する AutoSupport メッセージを起動できます。</block>
  <block id="538f577c4284d097aef57681a2acf728" category="paragraph">「 system node AutoSupport invoke -node * -type all -message MAINT= end 」というメッセージが表示されます</block>
  <block id="047c004f2f53364ce170133f533be47f" category="list-text">同じ手順をパートナーサイトでも実行します。</block>
  <block id="1914f112a35f8b1c26c1d0c90552a644" category="summary">node3 のインストールとブートが完了したら、正しくインストールされていること、クラスタの一部であること、および node2 と通信できることを確認する必要があります。</block>
  <block id="a8b14471d941953a592683e741c0ca1c" category="list-text">[[step1] システムプロンプトで、ノード 3 にログインします。そのあと、 node3 が node2 と同じクラスタの両方に属しており、正常であることを確認します。</block>
  <block id="c526c49b8044ea431a2ad56bde07cd17" category="list-text">[step2] node3 が node2 と通信できること、およびすべての LIF が動作していることを確認します。</block>
  <block id="aeebaeba203eabdcc6fdd7dea27f4674" category="paragraph">network interface show -curr-node node3</block>
  <block id="0ccfa81b1f21bfb5655a443ca59f1146" category="inline-link-macro">ノード 1 で所有されている NAS データ LIF をノード 2 からノード 3 に移動し、ノード 3 の SAN LIF を確認します</block>
  <block id="989cf8095677a48a8de27491cf383506" category="cell">- 完了しました <block ref="a4882b71f5935aea43154f35b1a6d350" category="inline-xref-macro-rx"></block> セクションに移動します <block ref="0b6213e55bde04c709e3d2e61f334c64" category="inline-link-macro-rx"></block>。</block>
  <block id="2f6dd58443228d50c834db1546177da7" category="cell">手順 4 を省略して、に進みます <block ref="0b6213e55bde04c709e3d2e61f334c64" category="inline-link-macro-rx"></block>。</block>
  <block id="d1e338a03ea3eb1b2592ad7856e6b249" category="list-text">[[step4]] ノードの 1 つで次のコマンドを入力し、その出力を調べて、 node2 および node3 がクォーラムにあることを確認します。</block>
  <block id="6af6b76d592516d40ca101051c678be3" category="doc">AFF および FAS システムのアップグレードに関するドキュメント</block>
  <block id="c659f2c431be96152886f89fc8d66545" category="list-text">[step2] ノード 1 およびノード 2 のすべての LIF の自動リバート設定を変更します。</block>
  <block id="7aa10cd63437ec1d1013caeee0bbba13" category="paragraph">「 network interface modify -vserver Vserver_name -lif LIF_name -auto-giveback false 」を参照してください</block>
  <block id="cbda167ce953729cf8b9be29b0e35ede" category="list-text">[[step3] インターフェイスグループおよび VLAN でホストされる NAS データ LIF を node1 で移行するには、次の手順を実行します。</block>
  <block id="9ebd90a8ee1baaa50f7229ecbad7e8b4" category="list-text">[[substepa]] すべてのインターフェイスグループでホストされている LIF と node1 上の VLAN を、インターフェイスグループと同じネットワーク上の LIF をホストできる node2 のポートに移行します。そのためには、各 LIF に対して次のコマンドを 1 回入力します。</block>
  <block id="38dc91fe258c6eeb7ff70deac7ba3ee0" category="list-text">で、 LIF および VLAN のホームポートとホームノードを変更します <block ref="cf21dd79faca0741f745aead7a1f3856" category="inline-xref-macro-rx"></block> LIF をホストしているポートとノードに対して次のコマンドを 1 回入力します。</block>
  <block id="f665edf5cc407acfccaabfb5603ae07e" category="cell">- 完了しました <block ref="a7f3a08749b96b9fef80c08c6457135d" category="inline-xref-macro-rx"></block> から <block ref="ebde17035ccd0e1d011f2e188b8e17d6" category="inline-xref-macro-rx"></block>。</block>
  <block id="9afdff3547467f61598636f379b01049" category="list-text">[man_lif_1_2_step5] 各データ LIF に対して次のコマンドを 1 回入力して、 NAS データ LIF を node1 から node2 に移行します。</block>
  <block id="46d8840624eee12f277b28b36bc04ac9" category="list-text">[step7] 移行された LIF のホームノードを変更します。</block>
  <block id="399d0e6b3a5d6f6a955d15b76e16dac3" category="list-text">[man_lif_1_2_step8] LIF がホームまたは現在のポートとして使用しているかどうかを確認しますポートがホームでない場合や現在のポートでない場合は、に進みます <block ref="9afb853eb1a825acf900d55aa2bce20e" category="inline-xref-macro-rx"></block>：</block>
  <block id="f48b3299d16d6b2107cabf71fe17fc7a" category="list-text">[man_lif_1_2_step9] LIF がホームポートまたは現在のポートとしてポートを使用している場合は、別のポートを使用するように LIF を変更します。</block>
  <block id="eb107bf9c16173703c7eb7800e543b49" category="list-text">[[step10]] いずれかの LIF が停止している場合は、各 LIF に対して次のコマンドを 1 回入力して、 LIF の管理ステータスを「 up 」に設定します。</block>
  <block id="5410f279e38e9c157f57b06f35930496" category="list-text">[[step11]] 次のコマンドを入力し、その出力を調べて、 node1 にデータ LIF が残っていないことを確認します。</block>
  <block id="90506ded7e085b5dfb368983176adad1" category="list-text">MetroCluster 9.8 以降を実行する 4 ノードおよび 8 ノードの Fabric ONTAP 構成を使用するシステムがある場合。</block>
  <block id="7ae38f6d8449bab135d62e112d801780" category="paragraph">ポート設定は、ノードのモデルによって異なる場合があります。</block>
  <block id="18d6cf18e081291f183ebc71cad11449" category="list-text">[[step1] 次の手順を実行して、セットアップが 2 ノードのスイッチレスクラスタであるかどうかを確認します。</block>
  <block id="506c2c0c7f5b70af3df68c45c46f45a7" category="paragraph">例：</block>
  <block id="813d293c72e7757d7214e56a35a3d239" category="list-text">[[step2] 次の変更を行います。</block>
  <block id="3528faaf395daaaf0d052ce18e3bb68f" category="paragraph">次の例では、「 node1 」にクラスタポート e1b を追加します。</block>
  <block id="622072baf7f2434ea38f8e00080cf8a9" category="paragraph">「 network interface migrate -vserver Vserver_name -lif LIF_name -source-node node1 -destination-node node1 -destination-port port_name 」の略</block>
  <block id="a2667267edacd035171d6f2c7a379271" category="list-text">node1 と node3 のヘルス状態を表示します。</block>
  <block id="0dd0951b0ff75b50f90162a4e89cea83" category="list-text">[man_map_1_step3] データ LIF をホストする物理ポートのブロードキャストドメインメンバーシップを変更します。</block>
  <block id="8d324785c287a538f58e372f40bed342" category="list-text">到達可能性の修復が実行されると、 ONTAP は正しいブロードキャストドメインにポートを配置しようとします。ただし、ポートの到達可能性を判別できず、既存のブロードキャストドメインのいずれにも対応していない場合、 ONTAP はこれらのポート用に新しいブロードキャストドメインを作成します。すべてのメンバーポートがインターフェイスグループのメンバーポートになる場合は、必要に応じて、新しく作成したブロードキャストドメインを削除できます。ブロードキャストドメインを削除する</block>
  <block id="ad26ddf2e9b94d63fc11537e49b3ecb8" category="list-text">インターフェイスグループの設定を確認し、必要に応じてメンバーポートを追加または削除します。</block>
  <block id="4f8ff7a721c81a3185d356f1a33fae2d" category="paragraph">インターフェイスグループポートにメンバーポートを追加します。</block>
  <block id="656b196d0feecfb88110b2e33cdf3479" category="paragraph">ifgrp remove-port -node-node_name -ifgrp ifgrp_port -port port_name の形式で指定します</block>
  <block id="040a6f3de7a3341ed3e93db753165247" category="paragraph">'vlan delete -node node_name -vlan-name vlan_port_' のように指定します</block>
  <block id="123012504d494b3b1e04b337be57f7ab" category="paragraph">'vlan create -node node_name -vlan-namevlan_port</block>
  <block id="615e12bd105ff14dbfe4918eedb06e9c" category="admonition">アップグレードするシステムのネットワーク構成の複雑さによっては、すべてのポートが必要な場所に正しく配置されるまで手順（ a ）から（ g ）を繰り返してください。</block>
  <block id="f885f903824205e3ac8b26efa5254e8d" category="list-text">[[step4]] システムに VLAN が設定されていない場合は、に進みます <block ref="4c0abef6869b6cad04a71c175246f8ab" category="inline-xref-macro-rx"></block>。VLAN が設定されている場合は、すでに存在しないポートまたは別のブロードキャストドメインに移動されたポートで設定されていたポート上で、取り外された VLAN を復元します。</block>
  <block id="5b16c41785a8844c7ae2d2b5c45588ec" category="list-text">[man_map_1_step5] ONTAP 9.8 以降 ONTAP 、手順では、ネットワークポートの到達可能性の修復時にブロードキャストドメイン間でポートが移動された場合に、 LIF のホームポートが自動的に変更されます。LIF のホームポートが別のノードに移動された場合や割り当てが解除された場合、その LIF は移動された LIF として表示されます。ホームポートがなくなった、または別のノードに再配置された、取り外した LIF のホームポートをリストアします。</block>
  <block id="46d6a65cf0d9843fc970f27931ee26dd" category="paragraph">「配置されたインターフェイスのリストア -vserver Vserver_name -lif LIF_name 」のようになります</block>
  <block id="aaa2b516ee5f7ea24e6108032acc280f" category="paragraph">すべてのポートが正しく設定され、正しいブロードキャストドメインに追加されている場合、「 network port reachability show 」コマンドは、接続されているすべてのポートの到達可能性ステータスを「 ok 」、物理的な接続がないポートのステータスを「 no-reachability 」と報告する必要があります。これら 2 つ以外のステータスを報告しているポートがある場合は、に記載されているように、到達可能性を修復します <block ref="908f101af36ad2335dd086df5698bdbf" category="inline-xref-macro-rx"></block>。</block>
  <block id="c2e8f597299baf99355b3fa78126f551" category="list-text">[[man_map_1_step6] すべての LIF が、正しいブロードキャストドメインに属するポートで管理上の理由で稼働していることを確認します。</block>
  <block id="2c39c176c9d4024fd61e5bb2e1345301" category="paragraph">「 network interface show -vserver Vserver_name -status-admin down 」という形式で表示されます</block>
  <block id="294217f067c6d528ded0650ae8192e3f" category="list-text">動作状態が down になっている LIF がないか確認します。</block>
  <block id="a8afd300d47b2bfbf648bcf7bfe2870a" category="paragraph">「 network interface show -vserver Vserver_name -status -oper down 」を参照してください</block>
  <block id="e7f316df0ac3e0ff920f7a6b78738937" category="paragraph">「 network interface modify -vserver Vserver_name -lif LIF_name -home-node home_port 」のようになります</block>
  <block id="fe26bf863d5eda5137c72987873268a6" category="summary">ARL を使用したコントローラのアップグレードに関するガイドライン</block>
  <block id="a58275251c4ceab5ef8fb93df1152efe" category="paragraph">アグリゲートの再配置（ ARL ）を使用して ONTAP 9.8 を実行しているコントローラのペアをアップグレードできるかどうかは、プラットフォームおよび元のコントローラと交換用コントローラの両方の構成によって異なります。</block>
  <block id="b2ea28d5ed885ef7926100979ab12c7a" category="list-text">アップグレード前に、元のコントローラと交換用コントローラの両方で同じバージョンの ONTAP 9.8 を実行している必要があります。</block>
  <block id="e52edde4a2daa372f1d2553f7b9406eb" category="list-text">ONTAP 9.8 以降を実行できないコントローラとの間。</block>
  <block id="0b7e952693f4986837beff2196d112d7" category="section-title">ONTAP 9.8 以降のライセンス</block>
  <block id="12ee56bc4ae8d39a35db35e248722ec3" category="paragraph">すべてのライセンスキーは、 28 文字の大文字のアルファベットです。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ONTAP 9.8 用の 28 文字の新しいライセンスキーを入手する方法は、 _NetApp サポートサイト _ にリンクしてください。以降が必要です。キーは、 _ ソフトウェアライセンス _ の _ マイサポート _ セクションにあります。必要なライセンスキーがサイトにない場合は、ネットアップの営業担当者にお問い合わせください。</block>
  <block id="94c614d182457fbc97ae1deaaabd5813" category="paragraph">2 ノードスイッチレスクラスタのノードをアップグレードする場合は、アップグレードの実行中もスイッチレスクラスタのノードをそのまま使用できます。スイッチクラスタに変換する必要はありません。</block>
  <block id="250305c654cbae75b845e0ca3cd6db4a" category="doc">ステージ 5 ：ノード 4 をインストールしてブートします</block>
  <block id="15e92ecabc1153e5c4706af4900297f3" category="paragraph">ステージ 5 では、 node4 をインストールしてブートし、クラスタポートとノード管理ポートを node2 から node4 にマッピングします。さらに、 node2 によって所有されているデータ LIF と SAN LIF を node3 から node4 に移動し、 node2 のアグリゲートを node3 から node4 に再配置します。</block>
  <block id="97acf14b99594c73dbf7bace1a3d2df0" category="paragraph">node2 から node3 にアグリゲートを再配置する前に、 node2 に現在配置されている node1 に属する NAS データ LIF を node2 から node3 に移動する必要があります。ノード 3 の SAN LIF も確認する必要があります。</block>
  <block id="fdc03a42e0e3399344b3116546b77b4d" category="list-text">[man_lif_verify_3_step5] プラットフォームで同じでないデータポートがある場合は、ブロードキャストドメインにポートを追加します。</block>
  <block id="3e874a6c7a8a7acafa16272d6c2b74ee" category="paragraph">次の例は、ノード「 8200-1 」のポート「 e0a 」とノード「 8060-1 」のポート「 e0i 」を、 IPspace 「 Default 」内のブロードキャストドメイン「 mgmt 」に追加します。</block>
  <block id="08ac1a2fb254b60e9c511fe04b6536d0" category="cell">外部キーマネージャ（ EKM ）</block>
  <block id="f8b56783de7821dd646ebb4440b61d16" category="summary">ノード 1 をノード 3 に置き換える前に、「 storage aggregate relocation 」コマンドを使用してルート以外のアグリゲートをノード 1 からノード 2 に移動し、再配置を確認する必要があります。</block>
  <block id="a15c700e7f4988ded7f4fadcd587a7ad" category="summary">ノード 4 のインストールとブートが完了したら、ノード 4 が正しくインストールされていることを確認する必要があります。</block>
  <block id="e5255775e89f083d8e69c73098e5fff2" category="list-text">次のコマンドを入力して、 node4 が node3 と同じクラスタの一部であること、および healthy であることを確認します。</block>
  <block id="a8b841bb612aacb195cf6acc0585fc92" category="list-text">次のコマンドを入力して、ノード 4 がノード 3 と通信できること、およびすべての LIF が動作していることを確認します。</block>
  <block id="07d4c533878766923bd46c0ad1c07580" category="list-text">に進みます <block ref="861668d9cff26e583cb336053a01f9e4" category="inline-xref-macro-rx"></block>。</block>
  <block id="9bce91076db18294fb11d6102c6ff059" category="cell">に進みます <block ref="861668d9cff26e583cb336053a01f9e4" category="inline-xref-macro-rx"></block>。ノード間の HA インターコネクトを手動で接続する必要はありません。同じシャーシ構成では、 HA インターコネクトがバックプレーンを使用して自動的に接続されます。</block>
  <block id="ff7a118b46f3869beb6bcd084db3f81c" category="cell">手順 6 を実行し、セクションに進みます <block ref="433d8081a28a0d8c06bf54d23d4e1297" category="inline-link-macro-rx"></block>。</block>
  <block id="55663f6258861b526745aa5208196d3a" category="cell">手順 6 をスキップしてセクションに進みます<block ref="433d8081a28a0d8c06bf54d23d4e1297" category="inline-link-macro-rx"></block>。</block>
  <block id="66807f2defef8b7eaf2bfaddf801fc4a" category="list-text">いずれかのノードで次のコマンドを入力して、 node3 と node4 の両方がクォーラムにあることを確認します。</block>
  <block id="b36eedb3dc2096d3226039d46eaf45f8" category="list-text">この MetroCluster ファブリック手順環境は、 MetroCluster 以外の構成に加えて、 ONTAP 9.8 以降を実行する 4 ノードおよび 8 ノード構成の Fabric Manager です。</block>
  <block id="ca49ea726cf177756380ffbec6a54a54" category="list-text">ONTAP 9.7 以前を実行する MetroCluster 構成の場合は、に進みます <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ONTAP 9.7 以前を実行しているコントローラハードウェアを手動でアップグレードするには、アグリゲートの再配置を使用するには、をリンクしてください。</block>
  <block id="0be4d29eba4c1cb717ebc96e468c34b9" category="paragraph">ポートを node2 から node4 にマッピングしたあと、 node2 のアグリゲートを node3 から node4 に再配置する前に、 node3 の現在の node2 に所有されている NAS データ LIF を node4 に移動する必要があります。ノード 4 の SAN LIF も確認する必要があります。</block>
  <block id="4839549656731e0245736bfa32bc3606" category="list-text">セットアップが 2 ノードスイッチレスクラスタかどうかを確認するには、次の手順を実行します。</block>
  <block id="0237dfb60fb0152194b2ef8069110809" category="list-text">次のコマンドを使用して、管理者権限レベルに戻ります。</block>
  <block id="cfcca4ee19f6b4091072ade66937870b" category="list-text">「 Cluster 」ブロードキャストドメインの一部となるポートを変更します。</block>
  <block id="e7556064c17516d1637d45f8010ff06c" category="paragraph">次の例では、「 node2 」にクラスタポート「 e1b 」を追加します。</block>
  <block id="1a356c921266e2599c929346ed1cf8f2" category="paragraph">network port modify -node node2 -port e1b -ipspace Cluster -mtu 9000`</block>
  <block id="81ac85f2e0f02b00912d8270470a7ee0" category="paragraph">「 network interface migrate -vserver vserver_name -lif lif_name source-node node2 -destination-node node2 -destination-port port_name</block>
  <block id="cfb6c66ba1b4961d38f6a81889501471" category="paragraph">「 network port broadcast-domain remove-ports -ipspace Cluster -broadcast-domain Cluster -ports node2 ： port 」のようになります</block>
  <block id="9df9250bef265936667a669a94c73c45" category="list-text">node2 / node4 の「 health 」状態を表示します。</block>
  <block id="90a80dbcfe2d9dc6015a2d205a26af80" category="paragraph">cluster show -node node2 -fields health`</block>
  <block id="6897b79e7e86c3bf656b3cf8bb05bc85" category="list-text">[man_map_2_Step3] データ LIF をホストする物理ポートのブロードキャストドメインメンバーシップを変更します。</block>
  <block id="322b25940728d29a26180978d33a75a7" category="paragraph">次のような警告が表示されます。y または n を確認し、必要に応じて入力します。</block>
  <block id="7df210e2cef27d20b20df2381abdb2d8" category="paragraph">ifgrp add-port node_name -ifgrp ifgrp_name -port port_name - ポート port_name</block>
  <block id="5faf906f15b68f5c20ff72271d5bf969" category="paragraph">ifgrp remove-port -node node_name -ifgrp ifgrp_name -port port_name - ポート port_name</block>
  <block id="28ffee9aa7a190ca41675de91fb9710b" category="list-text">システムに VLAN が設定されていない場合は、に進みます <block ref="f0f83db123b2b495e546349e9d3200d8" category="inline-xref-macro-rx"></block>。VLAN が設定されている場合は、すでに存在しないポートまたは別のブロードキャストドメインに移動されたポートで設定されていたポート上で、取り外された VLAN を復元します。</block>
  <block id="88979d326c7ea690819e5ebc2c65edb9" category="list-text">[man_map_2_Step5] ONTAP 9.8 以降手順では、ネットワークポートの到達可能性が修復されたときにブロードキャストドメイン間でポートが移動された場合、 ONTAP によって LIF のホームポートが自動的に変更されます。LIF のホームポートが別のノードに移動された場合や割り当てが解除された場合、その LIF は移動された LIF として表示されます。ホームポートがなくなった、または別のノードに再配置された、取り外した LIF のホームポートをリストアします。</block>
  <block id="c5c3d54cdf6631e2e290953a91dcd842" category="paragraph">すべてのポートが正しく設定され、正しいブロードキャストドメインに追加されている場合、「 network port reachability show 」コマンドは、接続されているすべてのポートの到達可能性ステータスを「 ok 」、物理的に接続されていないポートのステータスを「 no-reachability 」と報告する必要があります。これら 2 つ以外のステータスを報告しているポートがある場合は、に記載されているように、到達可能性を修復します <block ref="42e2bf4f4ef15f603bcc30bc206d35c3" category="inline-xref-macro-rx"></block>。</block>
  <block id="a1a54b5bb2c9a480b1b25789e5a2ba99" category="paragraph">network interface show -vserver vserver_name -status-oper down を実行します</block>
  <block id="e60389070edd39af4fe7aea580d3af71" category="paragraph">「 network interface modify -vserver vserver_name -lif lif_name -home-port home_port 」を参照してください</block>
  <block id="ff5630028e7797f87cc34d787d516ef1" category="summary">トラブルシューティング、トラブルシューティング、問題、エラー、障害</block>
  <block id="f9b91d759f1fb65bfed05428a9dff8cf" category="paragraph">ステージ 2 で、ノード 1 のアグリゲートと LIF をノード 2 に再配置し、ノード 1 の情報を記録してから、ノード 1 を廃棄します。このプロセスはほとんど自動化されており、処理は一時停止してステータスを確認できます。この処理は手動で再開する必要があります。</block>
  <block id="5d96a99d017f9cd61ae8c751958889e8" category="list-text">[[step17]] autoboot 中に Ctrl キーを押しながら C キーを押して 'loader' プロンプトでノードを停止します</block>
  <block id="80280d33f7cf0fb1cc0e9b2021042759" category="list-text">[step22]] LOADER プロンプトのブートアップで、次の手順を実行します。</block>
  <block id="59f8a349686c355926c1450dbee56dc9" category="list-text">[[step12]] 次のコマンドを使用して、コントローラとシャーシが HA として設定されていることを確認します。</block>
  <block id="c0f29523a34af8b47fa6b64c89f3671d" category="admonition">システムは、 HA ペア構成かスタンドアロン構成かを PROM に記録します。状態は、スタンドアロンシステムまたは HA ペア内のすべてのコンポーネントで同じである必要があります。</block>
  <block id="238e98c6d306621e076a23ef48ce116f" category="list-text">[[step13]] コントローラとシャーシが「 HA 」として設定されていない場合は、次のコマンドを使用して設定を修正します。</block>
  <block id="6c3f17b59ca4781564b9e4a1526324f4" category="paragraph">「 ha-config modify controller 」を参照してください</block>
  <block id="dd89cc637fcb9494346abfa250ac6820" category="paragraph">HA 構成変更シャーシ HA</block>
  <block id="d8ce52d8689351552822c847ac021d62" category="list-text">[step2]] 新しいノードのブートローダーで 'partner-sysid' パラメータを設定する必要がありますnode3 の場合、「 partner-sysid 」は node2 のものである必要があります。node3 の「 partner-sysid 」を確認します。</block>
  <block id="5d78c62f2109acc7f008351342f8ea8a" category="list-text">[Step3] 次のコマンドを入力して、ノード 4 の背後にあるアグリゲートの再配置を行います。</block>
  <block id="eda2a2799c7178a4d9bab969600552ca" category="paragraph">「 storage aggregate show -aggregate &lt;aggr1 、 aggr2 、 aggr3...&gt; -fields home-name 」のように指定します</block>
  <block id="496734874ac77becf11aa943a82a7db7" category="paragraph">「 aggr1 、 aggr2 、 aggr3 ……」は、元のホーム所有者が node1 であるアグリゲートのリストです。</block>
  <block id="21390634063a8ccb32172b07e3931c5c" category="paragraph">ノード 3 をホーム所有者としないアグリゲートは、の同じ再配置コマンドを使用してノード 3 に再配置できます <block ref="bb8702f390d3396042203c74bdae3439" category="inline-xref-macro-rx"></block>。</block>
  <block id="e569d2bfbad94662d32e1dc9a0dd3688" category="inline-link-macro">その他の参照</block>
  <block id="1375421c8a633f1eda1fe7c5c025cbfc" category="list-text">を参照してください <block ref="dc8dd5c98e6e008a6c64370978ae83cf" category="inline-link-macro-rx"></block> からネットアップサポートサイトにリンクしてログインします。</block>
  <block id="d88b3ffa1ad4af16e4f56f5653cfa84a" category="paragraph">コントローラハードウェアを別の方法でアップグレードして、ボリュームの移動を希望する場合は、を使用してください <block ref="9cc0d5221a9e998f923428a347033ebc" category="inline-link-macro-rx"></block> 代わりに、を参照してください <block ref="292163533a147210a514360785f12599" category="inline-link-macro-rx"></block> ONTAP 9 製品ドキュメントにアクセスするには、以下の手順を実行</block>
  <block id="143871839967c0ce4b560d72275287ae" category="cell">ネットアップシステムをセットアップおよび設定する方法について説明します</block>
  <block id="14c80bdc64113a62decfea4eb6a57bbb" category="cell">ONTAP システムの管理方法、 CLI インターフェイスの使用方法、クラスタへのアクセス方法、ノードの管理方法などについて説明します</block>
  <block id="1b2e223d7b0a739342036d545c07be1e" category="cell">ONTAP のダウンロードとアップグレードの手順については、を参照してください</block>
  <block id="a9c61f520e8d4a33f7c7b87e132bfa13" category="cell">ONTAP 物理ストレージの管理方法、アグリゲートを作成、拡張、および管理する方法、 Flash Pool アグリゲートを使用する方法、ディスクを管理する方法、および RAID ポリシーを管理する方法について説明します</block>
  <block id="61adb7de4bb785562416ba83d166f89a" category="cell">ボリューム、 FlexClone ボリューム、ファイルと LUN 、 FlexCache ボリュームを使用して論理ストレージリソースを効率的に管理する方法について説明します。 重複排除、圧縮、 qtree 、およびクォータ</block>
  <block id="63495c9c7dc0832fca9ef908516e005a" category="cell">新しいノードのモデルの『 Installation and Setup Instructions 』</block>
  <block id="5cde7c50f5816b4da70e9eb41a64819b" category="cell">新しいシステムの設置とケーブル接続の手順について説明します</block>
  <block id="d4665f62b50f9e25c35dea93f10c5a47" category="cell">FlexArray 仮想化インストール要件およびリファレンスガイド</block>
  <block id="59f35d9f3417e72e504a84b5becddcb7" category="cell">FlexArray 仮想化システムのケーブル接続手順とその他の情報について説明します</block>
  <block id="e9a08380ac48c4cddc2ba1523ab880f9" category="cell"><block ref="e9a08380ac48c4cddc2ba1523ab880f9" category="inline-link-macro-rx"></block></block>
  <block id="98ab25573042ac7a8765a9c4007041eb" category="cell">トラブルシューティングに役立つシステム LED およびシステムメッセージについて説明します</block>
  <block id="9dbb52531fd950a6ee1e03d590e98929" category="cell">該当するディスクシェルフガイドを参照してください</block>
  <block id="cb232dd594ad24e9077e9aaa120c03ac" category="cell">ディスクシェルフの設置と監視、およびディスクシェルフデバイスの交換の手順について説明します</block>
  <block id="4b2900e27b905268746bc80b2df554b3" category="cell">SAN 環境向けに iSCSI プロトコルや FC プロトコルを設定および管理する方法について説明しています</block>
  <block id="af4b5a97e667c3c209e365c7dfa3e34c" category="cell">FC と iSCSI のトポロジと配線方式について説明します</block>
  <block id="434d0878e4f3a503cf18decd97a3f528" category="paragraph">ネットアップサポートサイトには、ネットワークインターフェイスカード（ NIC ）やシステムで使用するその他のハードウェアに関するドキュメントも含まれています。また、にも含まれています <block ref="e9a08380ac48c4cddc2ba1523ab880f9" category="inline-link-macro-rx"></block>をクリックします。このコマンドは、新しいシステムでサポートされるハードウェアに関する情報を提供します。を参照してください <block ref="292163533a147210a514360785f12599" category="inline-link-macro-rx"></block> ONTAP 9 製品ドキュメントにアクセスするには、以下の手順を実行</block>
  <block id="4495b140bcfc546919085534e34f7c63" category="inline-link-macro">ノード 4 の FC ポートを設定します</block>
  <block id="c410ccf57858f1caf8897b043ad5b318" category="list-text"><block ref="c410ccf57858f1caf8897b043ad5b318" category="inline-link-macro-rx"></block></block>
  <block id="15e1611f6cc2b64b7163cc152446c8c0" category="list-text"><block ref="15e1611f6cc2b64b7163cc152446c8c0" category="inline-link-macro-rx"></block></block>
  <block id="c4cd2838020f3d163cb45dd2d33de6b2" category="paragraph">アップグレードを実行するには、次の工具が必要です。</block>
  <block id="238aec95a63d1a9491fe7f04cb92d176" category="list-text">次のコマンドを使用して、新しいコントローラを追加します。</block>
  <block id="e6f04682f232152502b55694d0528032" category="list-text">次のコマンドを使用して、キー管理ツールを追加します。</block>
  <block id="1565a7df8a43704649d43cf763c37d9a" category="list-text">次のコマンドを使用して、キー管理サーバが設定され、クラスタ内のすべてのノードから使用できることを確認します。</block>
  <block id="ddd3648b4ff881bff470e16ed91f43ec" category="list-text">次のコマンドを使用して、リンクされたすべてのキー管理サーバから新しいノードに認証キーをリストアします。</block>
  <block id="1cdcb35bc0549da482556496121fbed8" category="list-text">次のコマンドを使用して、すべての自己暗号化ディスクのキーを新しい認証キーに変更します。</block>
  <block id="5129605118eb7621624d0ff0a17cf3b3" category="list-text">連邦情報処理標準（ FIPS ）を使用する場合は、次のコマンドを使用して、すべての自己暗号化ディスクのキーを新しい認証キーに変更します。</block>
  <block id="c24c89c849360fa759686bcc55215bde" category="cell">手順 5 から 12 を省略して、に進みます <block ref="4dee99626dba3377b9d9c4e83b147efa" category="inline-xref-macro-rx"></block>。</block>
  <block id="dd9a20380743fd0be8124656b4d4ab63" category="cell">に進みます <block ref="26f10975298f1040a7b43f7164af041b" category="inline-xref-macro-rx"></block></block>
  <block id="1f257594a46951a07f131d320bb056e2" category="cell">手順 7 を省略して、に進みます <block ref="5357bfa200406d47beacc05410ee4af2" category="inline-xref-macro-rx"></block>。</block>
  <block id="5efa2bbd2fa10ef5de5f441ece8f79d6" category="list-text">[[Step7] 現在の設定が目的の用途と一致しない場合は、必要に応じて設定を変更します。</block>
  <block id="394c7233efa616890282614aa939b970" category="list-text">[[Step8] 次のコマンドを使用して設定を確認し、その出力を調べます。</block>
  <block id="0b9c6eef4e3d3a222eb04e910d252339" category="doc">ライセンス</block>
  <block id="05a46531537373667ec97f48a0268bca" category="paragraph">クラスタをセットアップする際、セットアップウィザードでクラスタベースのライセンスキーを入力するように求められます。ただし、一部の機能には追加のライセンスが必要です。ライセンスは、 1 つ以上の機能を含むパッケージとして発行されます。クラスタで使用する各機能のキーは、クラスタ内の各ノードに独自に設定する必要があります。</block>
  <block id="4ab0e874b36ce9969938fd3842dd8e66" category="paragraph">ONTAP 9.x の新しい 2 文字のライセンスキーは、で入手できます <block ref="e60beeaa103c7cce7039865bf593f639" category="inline-link-macro-rx"></block>。キーは、 _ ソフトウェアライセンス _ の _ マイサポート _ セクションにあります。必要なライセンスキーがサイトにない場合は、ネットアップの営業担当者にお問い合わせください。</block>
  <block id="96e2bc47c553dcc4e4a154f6b129069a" category="inline-link-macro">システムアドミニストレーションリファレンス</block>
  <block id="d202da01ce49771212ff5a916d7301b9" category="paragraph">ライセンスの詳細については、を参照してください <block ref="839332b52391f9eb13d4a6fc107f1e56" category="inline-link-macro-rx"></block> を参照してください <block ref="292163533a147210a514360785f12599" category="inline-link-macro-rx"></block>。</block>
  <block id="fd6616fb43f706cbccb578942fa320ab" category="paragraph">ONTAP 9 を実行しているノードペアで、ルート以外のアグリゲートを元のノードから同じクラスタ内の新しいノードに移行することにより、コントローラハードウェアを無停止でアップグレードできます。アップグレード中は、アップグレード対象のノードでホストされているデータにアクセスできます。</block>
  <block id="60b36970c08352c3c476769f29561cf4" category="paragraph">この手順では、 Aggregate Relocation （ ARL ；アグリゲートの再配置）と呼ばれる方法を使用します。 ARL を使用すると、 HA 構成を活用して、ルート以外のアグリゲートの所有権をノード間で移動できます（ルートが同じクラスタ内のストレージを共有している場合）。</block>
  <block id="c8ad6059ef689a9cdbc7a1076619df45" category="admonition">このドキュメントでは、元のノードの名前は _node1_AND _node2 _ で、新しいノードの名前は _node3 _ と _node4 _ です。説明されている手順では、 node1 は node3 に置き換えられ、 node2 は node4 に置き換えられます。_node1_、 _node2 、 _node3 _ 、および _node4 _ という用語は、元のノードと新しいノードを区別するためだけに使用されます。手順を使用するときは、元のノードと新しいノードの実際の名前を置き換える必要があります。ただし実際には、ノードの名前は変更されません。 node3 には node1 という名前が付けられ、 node4 にはコントローラハードウェアのアップグレード後に node2 という名前が付けられます。本ドキュメントでは、 FlexArray 仮想化ソフトウェアを搭載した「 _systems 」という用語は、これらの新しいプラットフォームに属するシステムを意味します。V シリーズシステムという用語は、ストレージアレイに接続可能な独立したハードウェアシステムを指します</block>
  <block id="fe7e90598f62277a0b85475b75c57d4b" category="list-text">この FlexArray システム、 V シリーズシステム、 AFF システム、および手順環境 FAS 仮想化ソフトウェアを搭載したシステムです。必要なライセンスがインストールされていれば、 ONTAP 9.5 以降にリリースされた FAS システムをストレージアレイに接続できます。既存の V シリーズシステムは、 ONTAP 9.5 でサポートされます。V シリーズのサポートマトリックスを参照してください <block ref="e9a08380ac48c4cddc2ba1523ab880f9" category="inline-link-macro-rx"></block> ストレージアレイモデルと V シリーズモデルに関する情報が表示されます。</block>
  <block id="3f4ec080b2021bda3aa571a5e22a721e" category="list-text">次のコマンドを使用して、キー管理サーバとの通信に必要なクライアントとサーバのセキュアソケットレイヤ（ SSL ）証明書をインストールします。</block>
  <block id="65de00a8e302559ffc774756d2f45b6f" category="list-text">次のコマンドを使用して、各キー管理サーバの IP アドレスを追加します。</block>
  <block id="a0e16315c615f1ffb7ea7917002c5ebe" category="list-text">次のコマンドを使用して、クラスタ内のすべてのノードで同じキー管理サーバが設定され使用可能になっていることを確認します。</block>
  <block id="e5b3e8638e7440dde3a413f172675dd9" category="list-text">次のコマンドを使用して、クラスタ全体の新しい認証キーを作成します。</block>
  <block id="ab893dc08471dccfa540322bea4bf69f" category="list-text">次のコマンドを使用して、すべての自己暗号化ドライブのキーを新しい認証キーに変更します。</block>
  <block id="e7c267219e312e103ff9e2c946e70665" category="list-text">次のコマンドを使用して、デスティネーションクラスタの SnapMirror 関係のステータスを確認します。</block>
  <block id="d61bacc5fb74b7c02dc15d185df875b9" category="admonition">このステータスが「 Transferring 」の場合は、次のコマンドを使用して転送を中止する必要があります。「 snapmirror abort -destination -vserver vserver name 」</block>
  <block id="ed662f4696868f5d80fe9998763cd98a" category="list-text">次のコマンドを使用して、クラスタ間のすべての関係を休止します。</block>
  <block id="839e7ff3d7f7c6c8b5b42b0480b183b6" category="paragraph">「 snapmirror quiesce -destination -vserver vserver name 」のようになります</block>
  <block id="9dca693c614d647375657a6286220693" category="paragraph">の実行が必要な場合があります <block ref="c410ccf57858f1caf8897b043ad5b318" category="inline-link-macro-rx"></block> セクション、 <block ref="15e1611f6cc2b64b7163cc152446c8c0" category="inline-link-macro-rx"></block>、または両方のセクション。</block>
  <block id="0254a2717286f49eac846482fe37bc8a" category="list-text">ONTAP 9.8 を実行している。</block>
  <block id="13438714af5f265a69cdb9fb6fc028f5" category="list-text">次のコマンドを使用して、パートナーノードが現在所有しているアグリゲートをホーム所有者ノードに戻します。</block>
  <block id="a11f98389b5ef65f9666f05434e8bca8" category="list-text">次のコマンドを使用して、 node1 と node2 のどちらも現在の所有者（ホーム所有者ではない）であるアグリゲートを所有していないことを確認します。</block>
  <block id="ed33c4e76a67735c4a0e87361685f44c" category="paragraph">「 storage aggregate show -nodes &lt;node_name &gt; -is-home false -fields owner-name 、 home-name 、 state</block>
  <block id="716ae6d3100d9fe9a05d4602099875b6" category="paragraph">次のコマンドを使用して、コントローラの交換プロセスを再起動する必要があります。</block>
  <block id="a908b4effccc807f524f5774b19d7125" category="paragraph">に記載されているネゴシエートスイッチオーバー、修復、スイッチバックの手順を使用します <block ref="26c4438b8d1b96b75d0e5192c822b491" category="inline-link-macro-rx"></block>。</block>
  <block id="78da491495094c46d3b88b817558b72f" category="paragraph">Key Management Interoperability Protocol （ KMIP ）サーバを使用して、認証キーを管理できます。</block>
  <block id="158580b0032f63c5230751175dea0f61" category="paragraph">メンテナンスモード（ブートメニューのオプション 5 ）で、必要に応じて次のいずれかのコマンドを使用して、 node3 の FC ポートを変更します。</block>
  <block id="2a89c3d97b61149625edcb17b1a04ab7" category="list-text">ターゲットポートをプログラムする場合： ucadmin modify -m fc -t target adapter</block>
  <block id="aa6b5e0f3f85521221493b726a4ef498" category="list-text">イニシエータ・ポートをプログラムするには 'ucadmin modify -m fc -t initiator adapter `-t' を指定しますこれは ' ターゲットまたはイニシエータの FC4 タイプです</block>
  <block id="255973bd444380150c99ab5f810b123d" category="cell">保守モード（ブートメニューのオプション 5 ）で、必要に応じて次のコマンドを使用して、 node3 の FC ポートを変更します。 ucadmin modify -m fc -t initiator -f adapter_port_name`-t` is the FC4 type 、 target 、 or initiator* 注： FC ポートはイニシエータとしてプログラムする必要があります。</block>
  <block id="dc19afaee728d475a48b658a9c09b990" category="cell">次のコマンドを使用して、新しい設定を確認します。 ucadmin show</block>
  <block id="7bec330ed5931b38ed9cff9a0a48026c" category="list-text">[[step4]] 次のコマンドを使用してメンテナンスモードを終了します。</block>
  <block id="d857db4a4d7d2fde190b4fbe43cb70e6" category="list-text">[[step5] 次のコマンドを使用して、 LOADER プロンプトからシステムをブートします。</block>
  <block id="f8b311df0246f1bcfd7cb508814a9149" category="list-text">[[step7] ブートメニューからメンテナンスモードのオプション「 5 」を選択します。</block>
  <block id="a59e92dcb9a6c2f1afec0a6d2a5c6f8a" category="admonition">このステータスが「 Transferring 」の場合は、次のコマンドを使用して転送を中止する必要があります。「 snapmirror abort -destination -vserver vserver name 」</block>
  <block id="e694ffdf4927373e2452f8ed83ed44a4" category="list-text">[[step1] ノード 3 のラックスペースがあることを確認します。</block>
  <block id="29c2b1d89a2c1fb12556096fc5b5d9f9" category="list-text">[[step2] ノードモデルの * 設置およびセットアップ手順 * に従って、ラックにノード 3 をインストールします。</block>
  <block id="4c4ac907348b91d2c9ac0330e07430a2" category="paragraph">『セットアップガイド』またはを使用して、次の配線を行います <block ref="86f7609c999f49f3dc914db25956e703" category="inline-link-macro-rx"></block> node3 プラットフォームについて、該当するディスクシェルフガイド、およびを参照してください <block ref="fce145d95584367b9c4d78d9aa5ffce3" category="inline-link-macro-rx"></block>：</block>
  <block id="398c19d15dc5160b9d5d197fabfe0bca" category="list-text">[[step4]] ノード 3 の電源をオンにしてから、コンソール端末で Ctrl+C キーを押してブートプロセスを中断し、ブート環境プロンプトにアクセスします。</block>
  <block id="327f074dcd0116fe45e96ad17501349a" category="list-text">[[step5] 」という警告メッセージがに表示される場合 <block ref="a4882b71f5935aea43154f35b1a6d350" category="inline-xref-macro-rx"></block>を使用して、次の操作を実行します。</block>
  <block id="15ea5ecb42f5a766ef591c29b45aac5f" category="list-text">ノード 1 がブートすると、ノード 1 のルート以外のすべてのアグリゲートがノード 1 に戻されます。次のコマンドを使用して、 node1 から node2 へのアグリゲートの手動での再配置を実行する必要があります。「 storage aggregate relocation start -node node1 -destination node2 -aggregate-list * -ndocontroller -upgrade true</block>
  <block id="bfea545103f612ace8d794a7ff64c8b0" category="paragraph">システムに FC 構成がない場合は、このセクションをスキップしてかまいません。システムにオンボード UTA / UTA2 ポートまたは UTA / UTA2 アダプタが搭載されている場合は、で設定します <block ref="15e1611f6cc2b64b7163cc152446c8c0" category="inline-link-macro-rx"></block>。</block>
  <block id="45b074dad328c980b5542326d8a35285" category="list-text">次のコマンドを使用して、 MetroCluster コンポーネントが正常であることを確認します。</block>
  <block id="2a5fbc402ff4a1c026c937ca08441422" category="list-text">MetroCluster チェックの実行オペレーションが完了したら ' 次のコマンドを使用して結果を表示します</block>
  <block id="f64554c8f67e219a4c294d4f9e13de5c" category="list-text">次のコマンドを使用して、実行中の MetroCluster チェック処理のステータスを確認します。</block>
  <block id="2f5dc5231215e1becf893a212ca2f4ef" category="list-text">次のコマンドを使用して、ヘルスアラートがないことを確認します。</block>
  <block id="645b41b640376c487d825f5296fcae9d" category="paragraph">ONTAP を実行しているノードペアで、元のノードから同じクラスタ内の新しいノードにルート以外のアグリゲートを移行することで、コントローラハードウェアを無停止でアップグレードできます。アップグレード中は、アップグレード対象のノードでホストされているデータにアクセスできます。</block>
  <block id="6e6a93e1bc39df87c56313cbfd41fa2c" category="cell">この ONTAP バージョンを実行している場合</block>
  <block id="c8148f766ec78479f303b8e902e9099b" category="cell">システムコマンドでアップグレードするには、次のコマンドを使用します。</block>
  <block id="041dd7a51404fc5dc5a87c2a0bc90b15" category="cell">9.8 以降</block>
  <block id="1fbd6af5fc9d3299929ce0644169d884" category="inline-link-macro">ONTAP 9.8 以降を実行しているコントローラハードウェアをアップグレードするには、「 system controller replace 」コマンドを使用します</block>
  <block id="b9872d104f5b4706bfb3c12a12c6f3d6" category="cell">9.5 から 9.7</block>
  <block id="a7c6ad52ed3d2aeb45a615219b19eb9e" category="inline-link-macro">ONTAP 9.5 を実行しているコントローラハードウェアを ONTAP 9.7 にアップグレードするには、「 system controller replace 」コマンドを使用します</block>
  <block id="6af074e0669e408e576b460f5c34b89b" category="cell">手動でアップグレードするには、次を使用します</block>
  <block id="345d5e5ac849d0ff413facdf20f6117d" category="inline-link-macro">アグリゲートの再配置を使用して、 ONTAP 9.8 以降を実行しているコントローラハードウェアを手動でアップグレードします</block>
  <block id="4c41f3a2ec168af1924a7c5a884bdc37" category="cell">9.0 から 9.7</block>
  <block id="c4f6e679df3510ade01e1eb289f28470" category="inline-link-macro">アグリゲートの再配置を使用して、 ONTAP 9.7 以前を実行しているコントローラハードウェアを手動でアップグレードします</block>
  <block id="be11c74c1dd7f307bb80183a90dc2067" category="sidebar">はじめに</block>
  <block id="ec01d482cf394f212f073921cfd9d5bd" category="sidebar">ONTAP リリースノート</block>
  <block id="10a85281b4bbd72e21850d0eaab35a67" category="sidebar">ストレージまたはボリュームの移動によるアップグレード（ほとんどのシステム）</block>
  <block id="6c54fdf57ce13c518f1cc0d9d5f32820" category="sidebar">コントローラハードウェアをアップグレードします</block>
  <block id="ddb75baab241feb0f5773b6f169099d5" category="sidebar">ONTAP 9.8 以降を実行しているシステムでアグリゲートを移動してアップグレードします</block>
  <block id="194cc1951d00be469039af6dbda275d0" category="sidebar">「 system controller replace 」コマンドを使用（ほとんどのシステム）</block>
  <block id="b4d25e7f066e6393a7e3a6a7115b4f94" category="sidebar">手動コマンドを使用する</block>
  <block id="24f090bf6acc424f4c22ffff65009745" category="sidebar">ONTAP 9.7 以前を実行しているシステムでアグリゲートを移動してアップグレードします</block>
  <block id="5f9c427150012de98abaaa70885c293c" category="sidebar">「 system controller replace 」コマンドを使用します（ほとんどのシステム）。</block>
  <block id="7d94daad2b6e9d77a6320a64c21fbc4a" category="sidebar">MetroCluster 構成のシステムをアップグレードする</block>
  <block id="c6bb96cc8b84319277f00b15adc71d75" category="sidebar">MetroCluster 構成のアップグレード用手順を選択します</block>
  <block id="dfcc398099d6a64026e51ab282e16253" category="sidebar">リソースの追加</block>
  <block id="aaf23d643347b5921ba9716fa4c13f83" category="sidebar">ONTAP システムのドキュメント</block>
  <block id="743b2bde29eae11996923323c6b89672" category="sidebar">ONTAP スイッチのドキュメント</block>
  <block id="dd032435fa83549d8bf3928550409a3e" category="sidebar">ONTAP ソフトウェアのドキュメント</block>
  <block id="519131237f79eadb2dc6a1e003a087bc" category="sidebar">NetApp Active IQ Config Advisor の略</block>
  <block id="bc8be72fdc9d6054f356bb2b7f80fd12" category="sidebar">NetApp Interoperability Matrix を参照してください</block>
  <block id="dd490b81914dd945601e442a41cb4222" category="sidebar">ネットアップコミュニティ</block>
  <block id="eee953986530407bd81dc7dec37f7151" category="sidebar">ステージ 1 アップグレードの準備</block>
  <block id="d410001785d5e6cf46422378e7dc305f" category="sidebar">ステージ 2 ：ノード 1 の再配置および廃止</block>
  <block id="db0f435716365df4f28208e723c02179" category="sidebar">ステージ 3 ：ノード 3 のインストールとブート</block>
  <block id="cd93c6e9e61b2d31c781ea8786cb4e81" category="sidebar">ステージ 4 再配置と撤去 node2</block>
  <block id="62e340083f3c5febba2fa693ce759a1a" category="sidebar">ステージ 5 Install and boot node4</block>
  <block id="ded1f8eb21bf382d51471642d150b8d5" category="sidebar">ステージ 6 アップグレードを完了する</block>
  <block id="d087c3faf4708dbb3c8dfcfefd9745e9" category="sidebar">「 system controller replace 」コマンドを使用して、 ONTAP 9.5 を実行するコントローラハードウェアを 9.7 にアップグレードします</block>
  <block id="bc4df2ad1c2e378c9c9f4efde7642058" category="sidebar">ステージ 2 ：ノード 1 の再配置と撤去</block>
  <block id="97653901472fb2346498b53c6daba5f8" category="sidebar">ノード 3 に、 VLAN 、 ifgrp 、およびブロードキャストドメインを再作成します</block>
  <block id="ad2474a92493e90f8b7eead0c3a3c8a3" category="sidebar">ステージ 4 ： node2 の再配置と撤去</block>
  <block id="b922e52416e1892344723e69ea90fd80" category="sidebar">ノード 4 に VLAN 、 ifgrp 、およびブロードキャストドメインを再作成します</block>
  <block id="c4d333d48f2e07ddeaa6a230635663cf" category="sidebar">ボリュームまたはストレージを移動してアップグレードします</block>
  <block id="ea61e2c2ff507048203824add1eb7c21" category="sidebar">考慮事項</block>
  <block id="2bfb87bbde1d2f1a85359c4188897f44" category="sidebar">方法を選択します</block>
  <block id="78ab525858e669cbe2bbf5be70ac71b8" category="sidebar">ストレージを移動してアップグレード</block>
  <block id="24f47cdbe9ddba774a7cc53e51d9032e" category="sidebar">ワークフロー</block>
  <block id="f8199556cf6a62ca9268aa50c99b34a1" category="sidebar">準備</block>
  <block id="1b775107e10aa9acb2f611db5db714f7" category="sidebar">元のノードをシャットダウンします</block>
  <block id="f4d03224dd15fbdbe8ce7ceae5d94e1b" category="sidebar">ディスク所有権を削除します</block>
  <block id="8c2a9dc1e3eabd2cf2048386719438d7" category="sidebar">デフォルト設定をリセットします</block>
  <block id="b89f2ce6accc5047e235ddc8dae13aa5" category="sidebar">新しいノードをインストール</block>
  <block id="bca5cff73543fb5c182ae115c9e682dc" category="sidebar">新しいノードをセットアップ</block>
  <block id="6a26b76071c114327f8c2765939aa5a7" category="sidebar">オプション - 内蔵ストレージを移動するか、ドライブシェルフに変換します</block>
  <block id="2f8a43bf9cc884df869e4198adef3e58" category="sidebar">内蔵ドライブを移動します</block>
  <block id="fb96a6f2421e21a53ee4078e03bf0b62" category="sidebar">ノードをドライブシェルフに変換します</block>
  <block id="68274bddbfd931594dff2906c4d537d8" category="sidebar">ルートボリューム構成をリストア</block>
  <block id="e2328b54876f0cd6379d9fcbc5572e87" category="sidebar">アップグレードを完了する</block>
  <block id="d4533ef157c2c7f83b5bc5d9b0283026" category="sidebar">ONTAP 9.8 で完了します</block>
  <block id="7686c34f0400921210a5e039c6743309" category="sidebar">ONTAP 9.8 で最後の手順を実行します</block>
  <block id="26000c062eace835ce5a8e9b4f5d553a" category="sidebar">ONTAP 9.7 以前で完了します</block>
  <block id="181a3a0697aaadf877eed027e84ebe7f" category="sidebar">ONTAP 9.7 以前で最終手順を実行します</block>
  <block id="51e0a0afc4d011a307d3419bfe742eba" category="sidebar">ボリュームを移動してアップグレード</block>
  <block id="ff56b4f5944c3419d2cbe4a5a19eb150" category="sidebar">新しいノードを設置して追加</block>
  <block id="04e27e7cb9c80acf93c96099047dadab" category="sidebar">アグリゲートを作成してボリュームを移動</block>
  <block id="f86f16f11e093ddd1a9acafc8ee58e6f" category="sidebar">SAN 以外のデータ LIF とクラスタ管理 LIF を移動する</block>
  <block id="cf3329822cb6acbd3f59abba0514d804" category="sidebar">SAN LIF を削除</block>
  <block id="d2e2f3320c4d610d0815b1405859a98b" category="sidebar">元のノードを分離</block>
  <block id="ede813b2f7c6a203c236d7726f79da2c" category="sidebar">ワークシート：コントローラのアップグレード前後に収集する情報</block>
  <block id="9d67015231cea84d3691aafa1f34b30e" category="sidebar">ステージ 4 ：情報を記録し、 node2 を撤去</block>
  <block id="79f3abfd76c996d707b348dbfb91c42b" category="sidebar">ノード 4 で FC または UTA / UTA2 設定を設定します</block>
  <block id="2e546c2ae4e7d18e3a62352f7899f8ad" category="paragraph">各ノード 4 のプラットフォームについて、『 Installation and Setup Instructions 』または『 FlexArray Virtualization Installation Requirements and Reference_for the node4 』、該当するディスクシェルフのドキュメント、および _High Availability management _ の手順に従って、次の接続をケーブル接続します。</block>
  <block id="96fc3790ed0f779b648493fc7e4b2e7c" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> FlexArray 仮想化インストール要件およびリファレンスとハイアベイラビリティ管理へのリンク。</block>
  <block id="c83b4e572cf3ae5eb7bac42baed0ac9e" category="summary">このトピックでは、他の参照コンテンツや Web サイトにリンクすることができます。</block>
  <block id="82a3300ad94a5e1dcf0a6abbfe1060e2" category="paragraph">このコンテンツの手順を実行するときは、参照コンテンツを参照するか、参照 Web サイトにアクセスする必要があります。</block>
  <block id="14f94d0b133a9aa34a775e955c95b8bc" category="list-text"><block ref="13e4a2cf4e0a4edbef519c9af2452c86" category="inline-xref-macro-rx"></block></block>
  <block id="ec5873b9b6861954a7c07d183dd486b0" category="section-title">参照コンテンツ</block>
  <block id="bc6bec578fabd4f81f97a21373822230" category="paragraph">このアップグレードに固有のコンテンツを次の表に示します。</block>
  <block id="f15c1cae7882448b3fb0404682e17e61" category="cell">内容</block>
  <block id="e2ea913994dd610f57aa9df505badbaa" category="cell"><block ref="e2ea913994dd610f57aa9df505badbaa" category="inline-link-macro-rx"></block></block>
  <block id="5837907b0451e478a454e8fc87e92342" category="inline-link-macro">ファブリック接続 MetroCluster のインストールと設定</block>
  <block id="a3b8dcbb945865e5ef0e1c83b68c8824" category="cell"><block ref="a3b8dcbb945865e5ef0e1c83b68c8824" category="inline-link-macro-rx"></block></block>
  <block id="2894d35f6fa87d4eee09a10919737e2f" category="cell"><block ref="2894d35f6fa87d4eee09a10919737e2f" category="inline-link-macro-rx"></block></block>
  <block id="07ae19817dfc58c8d1b72b612a233da3" category="inline-link-macro">MetroCluster の管理とディザスタリカバリ</block>
  <block id="2e78b745dc7527d7e142f60838ac795c" category="cell"><block ref="2e78b745dc7527d7e142f60838ac795c" category="inline-link-macro-rx"></block></block>
  <block id="c750cfcf9c6045b6e0b4b0d6de2212f3" category="inline-link-macro">MetroCluster のアップグレードと拡張</block>
  <block id="61999f6fa7ffc8c1f676441d457e3d86" category="cell"><block ref="61999f6fa7ffc8c1f676441d457e3d86" category="inline-link-macro-rx"></block></block>
  <block id="d1b75581244e03161b57c29a9ac4bb22" category="inline-link-macro">CLI によるディスクおよびアグリゲートの管理</block>
  <block id="c3aed88c9ee3a48f5d62930613f5710f" category="cell"><block ref="c3aed88c9ee3a48f5d62930613f5710f" category="inline-link-macro-rx"></block></block>
  <block id="083222857448e1fa46a20ea7d228c4a3" category="cell">CLI を使用して ONTAP 物理ストレージを管理する方法について説明します。アグリゲートを作成、拡張、管理する方法、 Flash Pool アグリゲートを使用する方法、ディスクを管理する方法、および RAID ポリシーを管理する方法を示します。</block>
  <block id="9fc34575910b3b930388b5434f515842" category="inline-link-macro">高可用性管理</block>
  <block id="8b8cdc632b8dd03afd9af9cf3f0bbb00" category="cell"><block ref="8b8cdc632b8dd03afd9af9cf3f0bbb00" category="inline-link-macro-rx"></block></block>
  <block id="c1a14ef4c1320caf80e81dff4161eb9b" category="inline-link-macro">CLI を使用した論理ストレージ管理</block>
  <block id="23806251831778e9042b7dc8e04e42d9" category="cell"><block ref="23806251831778e9042b7dc8e04e42d9" category="inline-link-macro-rx"></block></block>
  <block id="9dc1904e0c3ace141704b477cd9b345d" category="inline-link-macro">Network Management の略</block>
  <block id="378e9004462b7ecfad8256f25b57fbf6" category="cell"><block ref="378e9004462b7ecfad8256f25b57fbf6" category="inline-link-macro-rx"></block></block>
  <block id="65fd0eeec8bd27e4c5c654edfee09feb" category="inline-link-macro">CLI での SAN 管理</block>
  <block id="664cc44494bab5cf2c42eaaf2e325791" category="cell"><block ref="664cc44494bab5cf2c42eaaf2e325791" category="inline-link-macro-rx"></block></block>
  <block id="47773d8cdfca4f560a96f33d81b47858" category="cell">iSCSI および FC プロトコルを使用して LUN 、 igroup 、ターゲットを設定および管理する方法、 NVMe/FC プロトコルを使用してネームスペースとサブシステムを設定および管理する方法について説明します。</block>
  <block id="121d9e4993fb92968420c9621abc9dd8" category="inline-link-macro">SAN 構成リファレンス</block>
  <block id="b6cd49332e8e4e167bacc80f785766b6" category="cell"><block ref="b6cd49332e8e4e167bacc80f785766b6" category="inline-link-macro-rx"></block></block>
  <block id="52e0bf29e7e2fb64c989717df1d63c01" category="inline-link-macro">クラスタセットアップで System Manager と ONTAP CLI のどちらを使用するかを決定します</block>
  <block id="c8043f5acc6a28fdf197d7834583500e" category="cell"><block ref="c8043f5acc6a28fdf197d7834583500e" category="inline-link-macro-rx"></block></block>
  <block id="a2960939186ae78b824d694e2cbba800" category="inline-link-macro">CLI での管理の概要</block>
  <block id="1baf9f7ecc4554f61d6168e4897ea002" category="cell"><block ref="1baf9f7ecc4554f61d6168e4897ea002" category="inline-link-macro-rx"></block></block>
  <block id="d04e5f519989e5f2ca95f9541ffe17a0" category="inline-link-macro">ONTAP をアップグレードします</block>
  <block id="52fe96f88349d1bc6c73acbb2110bf86" category="cell"><block ref="52fe96f88349d1bc6c73acbb2110bf86" category="inline-link-macro-rx"></block></block>
  <block id="10c0930f56be634af04f178b42398018" category="paragraph">。 <block ref="a578dfd24b9ac76011d432b13fc1b9d1" category="inline-link-macro-rx"></block> また、システムで使用する可能性のあるネットワークインターフェイスカード（ NIC ）やその他のハードウェアに関するドキュメントも含まれています。また、にも含まれています <block ref="9c839fcdfb8699a63c787254d7b1ae03" category="inline-link-macro-rx"></block>をクリックします。このコマンドは、新しいシステムでサポートされるハードウェアに関する情報を提供します。</block>
  <block id="c09b5be4c2da04f4040eef1878f258aa" category="inline-link">ONTAP 9 のドキュメント</block>
  <block id="4c77344094e11bcee3a61c5cd6d9d092" category="paragraph">にアクセスします<block ref="10428d07d2ebc7af9af6725963887c6d" category="inline-link-rx"></block>。</block>
  <block id="4c6af378b95f57bc3cd0d3c8aeab771d" category="paragraph">にアクセスします <block ref="5fbf315c6f5ea598be883d972c599456" category="inline-link-macro-rx"></block> ツール。</block>
  <block id="4ba8d4701b7c72b570a63797aff938e0" category="list-text">ONTAP 9.10.1 以降では、 4 ノードの MetroCluster FC 構成のデフォルトの自動ネゴシエートスイッチオーバー（ NSO ）ベースのアップグレード手順が使用されます。4 ノード MetroCluster FC 構成をアップグレードする場合、「 system controller replace start 」コマンドを問題するときに、「 -nso 」パラメータを「 false 」に設定して、 NSO ベースの手順の起動を禁止する必要があります。</block>
  <block id="b3afc5631bd5d3ad4780733ad83b3ed3" category="paragraph">「 system controller replace start-nodes &lt;Node_name&gt; -nso false" 」という名前のコマンドを入力します</block>
  <block id="b5217a01cec2b264eab0761f085ee2eb" category="list-text">「 system controller replace start 」コマンドは、 advanced 権限レベルでのみ実行できます。</block>
  <block id="45e3f26bb2c9a72d8467afe9a6c33e38" category="cell">交換するノードで同じバージョンの ONTAP が実行されていることを確認します。ONTAP イメージのバージョンが異なると、タスクは失敗します。新しいノードには、元のノードと同じバージョンの ONTAP 9.x がインストールされている必要があります。新しいノードに別のバージョンの ONTAP がインストールされている場合は、設置後に新しいコントローラをネットブートする必要があります。ONTAP のアップグレード方法については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> リンク先： ONTAP のアップグレード _ 。</block>
  <block id="954ad5efed3e43bfb3badad9c505735b" category="cell">交換するノードに不足しているディスクまたは障害が発生しているディスクがある場合、タスクは失敗します。足りないディスクがある場合は、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> CLI でディスクおよびアグリゲートの管理にリンクするには、 CLI_ 、 _ で論理ストレージの管理に使用します。 HA ペアのストレージを構成するには、 _ 、 _ ハイアベイラビリティ管理 _ を使用します。</block>
  <block id="3f906c041fb469b2794aa7ce7964b2a7" category="list-text">システムコンソールで、コントローラの交換用手順の指示に従って、次のコマンドセットを実行します。</block>
  <block id="c209ee9c3a703005ec3303b04dddff2f" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> MetroCluster の管理とディザスタリカバリのコンテンツにリンクし、ネゴシエートスイッチオーバー、修復、スイッチバックについて記載された手順を使用するには、次の手順を実行します。</block>
  <block id="b029dd94e134cfaf963a04051ff43f6d" category="admonition">内蔵ドライブをサポートするシステム（ FAS2700 または AFF A250 など）をアップグレードする場合でも内蔵ドライブがないときは、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> および、 _ アグリゲートの再配置に含まれる手順を使用して、使用している ONTAP のバージョンに適したコントローラ Hardware_content を手動でアップグレードします。</block>
  <block id="14fc1fec490b9f5ad23d58c3c55d4441" category="paragraph">内蔵ドライブを搭載したエントリレベルのコントローラをアップグレードする場合は、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ボリュームまたは storage を移動して _Upgrade にリンクし、 Data ONTAP に移動して、 clustered 手順を実行するノードのペアをアップグレードする _ に進みます。</block>
  <block id="5ab1ba3aba863ed7175637aaa48e2f73" category="paragraph">設置とセットアップの手順 _ または FlexArray 仮想化インストールの要件とリファレンス _ を使用して、ノード 3 プラットフォーム、該当するディスクシェルフのドキュメント、および _High Availability Management _ を使用して、次の接続をケーブル接続します。</block>
  <block id="3220ae1a7e96353e5be6c31af0b5207a" category="paragraph">このアップグレード手順では、交換するコントローラモデルで ONTAP の新しいバージョンがサポートされておらず、新しいコントローラで以前のバージョンの ONTAP がサポートされていない主な環境アップグレードシナリオを使用します。* この手順を使用すると、ノードが 3 つ以上あるクラスタでコントローラハードウェアをアップグレードできますが、クラスタ内のハイアベイラビリティ（ HA ）ペアごとに手順を個別に実行する必要があります。* この手順環境 FAS システム、 V シリーズシステム、 AFF システム、および FlexArray 仮想化ソフトウェアを搭載したシステムです。必要なライセンスがインストールされていれば、 ONTAP 9.5 以降にリリースされた FAS システムをストレージアレイに接続できます。ストレージアレイと V シリーズのモデルの詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> Hardware Universe にリンクして、 V シリーズサポートマトリックスにアクセスしてください。* この手順環境システムは、 4 ノードの NetApp MetroCluster 構成以上を実行しています。MetroCluster 構成サイトは物理的に異なる場所に設置できるため、 HA ペアの場合は各 MetroCluster サイトでコントローラの自動アップグレードを個別に実行する必要があります。* AFF A320 システムからアップグレードする場合は、ボリューム移動を使用してコントローラハードウェアをアップグレードするか、テクニカルサポートにお問い合わせください。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、ボリュームまたは storage _ を移動して _ Upgrade にリンクします。</block>
  <block id="c78fd54aa1461d651da28406676f336f" category="admonition">この手順では、 VLAN 、 ifgrp 、およびブロードキャストドメインの作成に関するセクションの名前が「 _node4 にあるネットワーク設定のリストア」に変更されています。</block>
  <block id="de1d1723e281ecfbe16611cb895dd237" category="paragraph">VLAN 、インターフェイスグループ、およびブロードキャストドメインの作成と再作成の詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして _ ネットワーク管理 _ にリンクします。</block>
  <block id="84b1703925b211a597f4b166b1d80848" category="list-text">HA クラスタなどの MetroCluster 以外手順のシステムでは、 ARL アップグレードのみがサポートされます。</block>
  <block id="598121171fa3c84a4730985ce38a5809" category="list-text">AFF A320 システムからアップグレードする場合は、ボリューム移動を使用してコントローラハードウェアをアップグレードするか、テクニカルサポートにお問い合わせください。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、ボリュームまたは storage _ を移動して _ Upgrade にリンクします。</block>
  <block id="ca130918e8c1cca37cee5e91d913b35b" category="summary">このコンテンツでは、 HA ペアのストレージコントローラを新しいコントローラにアップグレードする方法について説明します。</block>
  <block id="7502f8f780af629ea69a176b286f5472" category="doc">アグリゲートの再配置の内容を使用するかどうかを決定します</block>
  <block id="3f798c20b7ed33a5dda01b83754704c2" category="paragraph">このコンテンツでは、 HA ペアのストレージコントローラを新しいコントローラにアップグレードし、既存のデータとディスクをすべて残す方法について説明します。これは複雑な手順であり、経験豊富な管理者のみが使用する必要があります。</block>
  <block id="5db2a90135780e31de828df5452d32e1" category="paragraph">このコンテンツは、次のような状況で使用する必要があります。</block>
  <block id="6068cafb9274839f4dfb371ae190757e" category="list-text">MetroCluster 構成をアップグレードする場合は、 4 ノード以上の FC 構成になり、すべてのノードで ONTAP 9.8 以降が実行されている必要があります。</block>
  <block id="4c9c9eda5f5430e91b4aed6f35a5e99d" category="paragraph">MetroCluster IP 構成のアップグレードについては、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> MetroCluster アップグレードおよび Expansion コンテンツにリンクするには、次の手順を実行します。</block>
  <block id="10d20d0fff1a2bb0b064f8b1a068b234" category="paragraph">コントローラハードウェアを別の方法でアップグレードして、ボリュームの移動を希望する場合は、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、ボリュームまたは storage _ を移動して _ Upgrade にリンクします。</block>
  <block id="5faf3e9d007712b89cd716c2cbabed9f" category="paragraph">コントローラのアップグレード時に、コントローラは、より新しい、またはより強力なプラットフォームを実行する別のコントローラに交換されます。このコンテンツの以前のバージョンには、完全に手動で実行するだけで構成されるコントローラの無停止更新プロセスの手順が含まれていました。このコンテンツでは、新しい自動手順の手順を紹介します。自動化された新しい では、ネットワークポートの到達可能性チェックが自動化され、コントローラのアップグレードがさらに簡単になります。</block>
  <block id="794c7b1870555759c37165eedd11e861" category="admonition">この手順では、 VLAN 、 ifgrp 、およびブロードキャストドメインの作成に関するセクションの名前が、 node3 のネットワーク設定の名前が _Restore に変更されています。</block>
  <block id="2618ba1924760141eb8ebfb30bb1d8a9" category="paragraph">VLAN 、インターフェイスグループ、およびブロードキャストドメインの作成と再作成の詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> およびリンク先： _ ネットワーク管理 _ 。</block>
  <block id="b838d4fde6c980fa55cf1649eccebfb3" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、 _Network Management_ または _ONTAP 9 コマンド：マニュアルページリファレンスにリンクしてください。</block>
  <block id="9b4a7067960efcb28456ef46d4ac8143" category="cell">交換するノードに不足しているディスクまたは障害が発生しているディスクがある場合、タスクは失敗します。足りないディスクがある場合は、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> CLI でディスクおよびアグリゲートの管理にリンクするには、 CLI_ 、 _ で論理ストレージの管理に使用します。 HA ペアのストレージを構成するには、 _ 、 _ ハイアベイラビリティ管理 _ を使用します。</block>
  <block id="eff04d06fc1c15ba7f721c6eb771ca87" category="list-text">AFF A320 システムからアップグレードする場合は、ボリューム移動を使用してコントローラハードウェアをアップグレードするか、テクニカルサポートにお問い合わせください。ボリュームの移動を希望する場合は、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、ボリュームまたは storage _ を移動して _ Upgrade にリンクします。</block>
  <block id="07a8ab3686b15a3d9a083f4d17e1ff66" category="summary">このコンテンツでは、 HA ペアのストレージコントローラを新しいコントローラにアップグレードし、既存のデータとディスクをすべて残す方法について説明します。</block>
  <block id="9897d9d5a6dc54cd05e35a06df6d54b5" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ネットワーク管理 _ または _ ONTAP 9 コマンド：マニュアルページリファレンス _ および _ LIF でのフェイルオーバー設定の詳細については、 _ を参照してください。</block>
  <block id="a9d3faafd0ef9c5ec130e05dd480e7d3" category="summary">新しいハードウェアを設置するには、特定のツールが必要です。また、その他のドキュメントやその他の情報を参照することもできます。</block>
  <block id="c27e64cafb401d038cff1543dd15a9f5" category="paragraph">このコンテンツの以前のバージョンには、完全に手動で実行するだけで構成されるコントローラの無停止更新プロセスの手順が含まれていました。このコンテンツでは、新しい自動手順の手順を説明します。</block>
  <block id="0fe674cba26a6125717793de11bb3096" category="inline-link">クラスタ拡張管理</block>
  <block id="ba4c26e136f2c434b8b6af81213365cf" category="paragraph"><block ref="ba4c26e136f2c434b8b6af81213365cf" category="inline-link-rx"></block></block>
  <block id="9d9192129e1b9a1e59bd50fc144f8867" category="paragraph"><block ref="9d9192129e1b9a1e59bd50fc144f8867" category="inline-link-rx"></block></block>
  <block id="579f7a458ea3f243e9743154fab94bfb" category="inline-link">CLI を使用して暗号化を管理します</block>
  <block id="6aee45ea83745bd29b2b86870d2afe83" category="list-text">の該当する手順を使用して、ストレージまたはボリュームの暗号化機能をリストアします<block ref="713156fa56254a04d458a101e174aa50" category="inline-link-rx"></block> 内容</block>
  <block id="086420e81e05bfb84cdecaa4b231e80e" category="paragraph"><block ref="086420e81e05bfb84cdecaa4b231e80e" category="inline-link-rx"></block></block>
  <block id="fbe34624578a760349ae68127c704b12" category="paragraph"><block ref="fbe34624578a760349ae68127c704b12" category="inline-link-rx"></block></block>
  <block id="22e61f778fcc138303ee1a3352b40770" category="list-text">にログインします<block ref="9a6f401ca1e7e89d8a0c29fb0cbe81b7" category="inline-link-rx"></block> サイト</block>
  <block id="32f214bce43cce7090d2126fda118b4f" category="paragraph">お使いのシステムが上記のリストにない場合は、を参照してください<block ref="f73c85a53b5d65cc9c35da0b9e0d2f09" category="inline-link-rx"></block> 内蔵ドライブがあるかどうかを確認します。</block>
  <block id="60dc130e71debefeec3618ac3017c8cc" category="list-text">必要に応じて、 node3 と node4 にアダプタを取り付けます。その際には、該当するアダプタのインストール手順の手順に従います。</block>
  <block id="05a828bdf3e9eb5eb73dbd8f32fc87ba" category="inline-link">必要なデータ保護手順を探します</block>
  <block id="830476e871eedc92e5ffda6c2c33b533" category="paragraph"><block ref="331cb63b7c37688cf0c07ea29b8a4923" category="inline-link-rx"></block>。</block>
  <block id="605eb2ff368b7d55e14901ea718fa36c" category="list-text">を確認しておく必要があります <block ref="3548781d8fe3c65e8421c7698ed973f9" category="inline-link-macro-rx"></block> 内蔵ドライブの移動について</block>
  <block id="7c5ee56a01b06b00d2d910cc295d8c56" category="paragraph"><block ref="7c5ee56a01b06b00d2d910cc295d8c56" category="inline-link-rx"></block></block>
  <block id="5fbaf3818e4461fbf39776037d449b56" category="paragraph"><block ref="5fbaf3818e4461fbf39776037d449b56" category="inline-link-rx"></block></block>
  <block id="b834460d0f5479ce8ff8376257efb419" category="paragraph">ルートアグリゲートのサイズの要件については、を参照してください<block ref="f73c85a53b5d65cc9c35da0b9e0d2f09" category="inline-link-rx"></block></block>
  <block id="58e1fb49e8eda8dc590e37ebdffc8e85" category="list-text">2 ノード MetroCluster 構成をアップグレードする場合は、次の項を参照してください。<block ref="a3f8fb08d450ed0f7b5dc460c9a9149e" category="inline-link-rx"></block></block>
  <block id="b71567cb9c157f9c9b7aa387b9fe6ae0" category="paragraph"><block ref="b71567cb9c157f9c9b7aa387b9fe6ae0" category="inline-link-rx"></block></block>
  <block id="b1ddd6d6d90c80426e14d10c6ded3cc0" category="paragraph"><block ref="b1ddd6d6d90c80426e14d10c6ded3cc0" category="inline-link-rx"></block></block>
  <block id="8481ff5a6197df6d5f77cc03a2cc6d88" category="paragraph"><block ref="8481ff5a6197df6d5f77cc03a2cc6d88" category="inline-link-rx"></block></block>
  <block id="793b486187db5ad7f686089607c08fea" category="list-text">パラメータ '_node1_sysid_' は ' 元のノードのシャットダウン _ で記録した値です <block ref="1e1f8cc7c148a6ce0e555a2eab402733" category="inline-link-macro-rx"></block>。</block>
  <block id="cfd2431baff6fc4122f2c8fed540c128" category="paragraph">ストレージを移動してアップグレードするプロセスでは、 node3 と node4 の電源をオンにし、ソフトウェアイメージをブートしてノードを設定します。元のノードと新しいノードで、物理ポートのレイアウトが異なる場合があります。ポートと接続の適切なレイアウトを特定するには、元のノードと交換用ノードの間のポートのマッピングを行う必要があります。</block>
  <block id="a57aac48a821a53a307169a496e18118" category="inline-link-macro">手順 5.</block>
  <block id="2b74e29dce2257a68211617c402f9061" category="paragraph">新しいノードで実行されている ONTAP のバージョンが元のノードのバージョンと異なる場合は、ネットアップサポートサイトから Web にアクセスできるディレクトリに正しい「 &lt;ONTAP_version&gt;_image.tgz 」ファイルをダウンロードしておく必要があります（ storage_, を移動するときのアップグレードの準備を参照してください）。 <block ref="a49c2511b21eba354c03ca701f675aae" category="inline-link-macro-rx"></block>）。システムのネットブートを実行するには、「 &lt;ONTAP_version&gt;_image.tgz 」ファイルが必要です。</block>
  <block id="e1ce4559a42a4367692a8dd680a8a25c" category="paragraph">を確認しておく必要があります <block ref="3548781d8fe3c65e8421c7698ed973f9" category="inline-link-macro-rx"></block> ノードのドライブシェルフへの変換について説明しています。ご使用の構成に固有のガイダンスが必要な場合は、テクニカルサポートにお問い合わせください。</block>
  <block id="fb466db54f62bed3a97d8ba7d3ed2c8e" category="list-text">の該当する手順を使用して、ストレージまたはボリュームの暗号化機能をリストアします<block ref="9dcdd70dc160b50ece72ebdfa01ae45b" category="inline-link-rx"></block> 内容</block>
  <block id="ac8600b2addf6ed639b9f65bda812bde" category="list-text">アップグレードする新しい各ノードについて、デフォルトのクラスタポート、データポート、およびノード管理ポートに関する情報を取得します。<block ref="f73c85a53b5d65cc9c35da0b9e0d2f09" category="inline-link-rx"></block></block>
  <block id="2c6817284baf4051a1411668b9c30fcb" category="list-text">[[prepare_move_store_5] ネットブートの実行に使用するファイルをダウンロードして準備します。</block>
  <block id="f18720a1eb7d7bace925c2a97a20075f" category="list-text">にアクセスします<block ref="3725c06f412bedb14ffd610de312875d" category="inline-link-rx"></block> システムのネットブートの実行に使用するファイルをダウンロードするには、次の手順を実行します。</block>
  <block id="7d29fb6edb20ce6f3fcde443c39ef137" category="inline-xref-macro">新しいノードをセットアップ</block>
  <block id="ca8b0b541358f7e84a5255015051bf42" category="paragraph">ディレクトリ内の情報をに使用します <block ref="8bfb8dcff60c45f1bd8ce7151db542d5" category="inline-xref-macro-rx"></block>。</block>
  <block id="3098dc1e81196ed0a5c7526536b21dc6" category="list-text">storage_, の移動時のアップグレードの準備でメモしておいたノード 1 とノード 2 のポートと LIF の設定情報を確認します。 <block ref="54c74de3517b342dfae1a3129a67e9ec" category="inline-link-macro-rx"></block>。</block>
  <block id="785fd52ca2c4957e9caba4406db084c0" category="list-text">storage_ 、 <block ref="54c74de3517b342dfae1a3129a67e9ec" category="inline-link-macro-rx"></block>。</block>
  <block id="d6c1fabab1e38229f8993970016f410e" category="list-text">[[map_98_5] データ LIF をホストする物理ポートのブロードキャストドメインメンバーシップを変更します。これは、 ONTAP 9.7 以前を使用してネットワークポートを _Map に示すように、手動で実行できます。 <block ref="db0e021b647d866bb2f507379ea311cb" category="inline-link-macro-rx"></block>。推奨される方法は、 ONTAP 9.8 で導入された拡張ネットワーク到達可能性スキャンおよび修復手順を使用することです。次の手順 5 の手順（ a ）から（ g ）までを参照してください。</block>
  <block id="b27e1f5014645cf6a835fb2e11524da4" category="list-text">システムに VLAN が設定されていない場合は、に進みます <block ref="44c817ee9110592f40577b67e8940aff" category="inline-xref-macro-rx"></block>。VLAN が設定されている場合は、すでに存在しないポートまたは別のブロードキャストドメインに移動されたポートで設定されていたポート上で、取り外された VLAN を復元します。</block>
  <block id="ebabbc1ebee66becea669b0e9c3afadc" category="list-text">[[map_98_7] ONTAP 9.8 以降では、ネットワークポートの到達可能性が修復手順の際にブロードキャストドメイン間でポートが移動されると、 ONTAP によって LIF のホームポートが自動的に変更されます。LIF のホームポートが別のノードに移動された場合や割り当てが解除された場合、その LIF は移動された LIF として表示されます。ホームポートがなくなった、または別のノードに再配置された、取り外した LIF のホームポートをリストアします。</block>
  <block id="72a19323d192a6a70bcf03b98d5355ae" category="paragraph">すべてのポートが正しく設定され、正しいブロードキャストドメインに追加されている場合、 network port reachability show コマンドで、接続されているすべてのポートのプレゼンスステータスが OK と報告され、物理的な接続がないポートのステータスは no-reachability と報告される必要があります。これら 2 つ以外のステータスを報告しているポートがある場合は、に記載されているように、到達可能性を修復します <block ref="84a764803e273063ea87749716b7c654" category="inline-xref-macro-rx"></block>。</block>
  <block id="2c6770803baeb326c3573c2c99ff387a" category="summary">このコンテンツでは、ストレージまたはボリュームを移動することで、クラスタ内の AFF システムまたは FAS システムのコントローラハードウェアをアップグレードする方法について説明します。</block>
  <block id="10ce071fec41e8ee934d0d2c7ef28c46" category="doc">ボリュームまたはストレージを移動してアップグレードするかどうかを決定します</block>
  <block id="4f6f8ce25595fc7944ee0e4e1667d92a" category="paragraph">この手順は、次の状況でコントローラハードウェアをアップグレードする場合に使用します。</block>
  <block id="ec9ed7bffd77d0096865ed2f7cdcc6cb" category="inline-link">MetroCluster ® のアップグレードと拡張</block>
  <block id="b57acc6aae5b9384209bb66a6c83f8e9" category="paragraph">2 ノード MetroCluster 構成をアップグレードする場合は、の手順を使用する必要があります<block ref="8f8223d27ded43641f85508576e6eb9a" category="inline-link-rx"></block> 内容</block>
  <block id="ee50784c4307d33a05ee2e7ea5146e6b" category="inline-link-macro">ARL コントローラハードウェアのアップグレード</block>
  <block id="a96bbb56bf9f254d0e2034d1d7d6da26" category="paragraph">このコンテンツでは、 Aggregate Relocation （ ARL ；アグリゲートの再配置）を使用してコントローラハードウェアをアップグレードする方法については説明していません。詳細については、を参照してください <block ref="f1bb1f12e9cbaac696243166fca7cc1f" category="inline-link-macro-rx"></block> 内容</block>
  <block id="4888a1163bab7e13f5a9de829f599dba" category="inline-link">MetroCluster のメンテナンスタスクの手順の参照先</block>
  <block id="effb241d20cc6c1913b072368a57f470" category="paragraph"><block ref="effb241d20cc6c1913b072368a57f470" category="inline-link-rx"></block></block>
  <block id="8b6679d6197b72adb78dae0febbb41a1" category="list-text">storage_ 、 <block ref="54c74de3517b342dfae1a3129a67e9ec" category="inline-link-macro-rx"></block>。</block>
  <block id="f7099f8383ed0316e1e0935c4d6ccef1" category="list-text">[[map_97_7] ノード管理ブロードキャストドメインを調整し、必要に応じてノード管理 LIF とクラスタ管理 LIF を移行します。</block>
  <block id="273df14d79796f9686588da9d3449080" category="list-text">必要に応じて、のコマンドを使用して、クラスタ間ブロードキャストドメインを調整し、クラスタ間 LIF を移行します <block ref="ff47d2d93900744c317edfe39ed00899" category="inline-xref-macro-rx"></block>。</block>
  <block id="34c3e41105245eedc58a41b84d06a8da" category="list-text">必要に応じて、のコマンドを使用して、他のブロードキャストドメインを調整してデータ LIF を移行します <block ref="ff47d2d93900744c317edfe39ed00899" category="inline-xref-macro-rx"></block>。</block>
  <block id="da988c28044d8fc8463a4db2336f20f0" category="list-text">_ インストールおよびセットアップ手順 _ または _ FlexArray 仮想化インストール要件およびリファレンス _ （ノード 4 プラットフォーム用）</block>
  <block id="72860e73833a237fd9811df9152c9a7a" category="list-text">該当するディスクシェルフの手順を選択します</block>
  <block id="b9b51f95b333e31e76a0f718bee344fa" category="list-text">高可用性管理に関するドキュメント（ _High Availability MANAGEMENT</block>
  <block id="a4f00211b8c08beb36ddb01f259c12c9" category="summary">このコンテンツを使用するかどうか。</block>
  <block id="6afaaeefe5c37f69581ad1614c57cff4" category="paragraph">に進みます <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、 _Network Management_ または _ONTAP 9 コマンド：マニュアルページリファレンスにリンクしてください。</block>
  <block id="9f60baa5d0a7e514432de3c5beb88857" category="paragraph">ルートアグリゲートまたはデータアグリゲートが含まれるコントローラを内蔵ディスクドライブにアップグレードする場合は、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ボリュームまたは storage を移動して _Upgrade にリンクし、 Data ONTAP に移動して、 clustered 手順を実行するノードのペアをアップグレードする _ に進みます。</block>
  <block id="ae307041467b0820fea754d90cc7abda" category="admonition">クラスタ内のノードの ONTAP をアップグレードする場合は、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> リンク先： ONTAP のアップグレード _ 。</block>
  <block id="986991a93176ee231138e71796e3557e" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> 高可用性管理にリンクし、 HA ペアのベストプラクティスセクションの _ に従ってください。元のノードのどちらも 50% 以上の利用率で実行しないでください。あるノードの利用率が 50% 未満の場合は、コントローラのアップグレード中に両方のノードの負荷を処理できます。</block>
  <block id="870f3919ccdf915afce9d1fca690c412" category="paragraph">新しいノードには、元のノードと同じバージョンの ONTAP 9.x がインストールされている必要があります。新しいノードに別のバージョンの ONTAP がインストールされている場合は、設置後に新しいコントローラをネットブートする必要があります。ONTAP のアップグレード方法については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> リンク先： ONTAP のアップグレード _ 。</block>
  <block id="e1cbc9b64c5a195f57ded4409cfe8fbc" category="paragraph">いずれかのノードが部分的なギブバック状態にある場合は、「 storage failover giveback 」コマンドを使用してギブバックを実行し、「 storage failover show-giveback 」コマンドを使用して、ギブバックする必要がないことを確認します。コマンドの詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、 _High Availability MANAGEMENT にリンクします。</block>
  <block id="f6ad618b685a2a7a446cddb4787d965d" category="paragraph">足りないディスクがある場合は、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> CLI でディスクおよびアグリゲートの管理にリンクするには、 CLI_ 、 _ で論理ストレージの管理に使用します。 HA ペアのストレージを構成するには、 _ 、 _ ハイアベイラビリティ管理 _ を使用します。</block>
  <block id="26284a568c7e38bb6355694c41ff5f8d" category="paragraph">いずれかのディスクで障害が発生した場合は、 CLI での _Disk およびアグリゲートの管理の手順に従ってディスクを取り外します。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> CLI を使用してディスクおよびアグリゲートの管理にリンクするには、を参照してください）。</block>
  <block id="2722bd9e96d97f6dd8c071e92fb500ce" category="list-text">_ インストールおよびセットアップ手順 _ または _ FlexArray 仮想化インストール要件およびリファレンス _ （ node3 プラットフォーム用）</block>
  <block id="025b7f36f1c9c8c4d48374557ce1ad36" category="paragraph">storage aggregate relocation コマンドの詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> CLI_ および ONTAP 9 コマンド：マニュアルページリファレンス _ を使用してディスクおよびアグリゲートの管理にリンクするには、次の手順を実行します。</block>
  <block id="30e26e7bc72201dff893ca95a6a239d8" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> CLI の _content および ONTAP 9 コマンド：マニュアル・ページ・リファレンスで、ストレージ・アグリゲートの再配置コマンドの詳細を確認するには、 _ ディスクおよびアグリゲートの管理にリンクしてください。</block>
  <block id="b146e8621e721a92c4b9d852f016cd74" category="paragraph">RCF を使用するためには、 FC スイッチポートの用途がファブリック接続 MetroCluster インストールおよび設定コンテンツに記載されている用途と同じである必要があります。に進みます <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ファブリック接続 MetroCluster インストールおよびコンフィギュレーションコンテンツにリンクするには、次の手順を実行します。</block>
  <block id="c7ed61befb59e9d4925fe6dba2f74da6" category="paragraph">8 ノード MetroCluster 構成のポート用途に従って、スイッチタイプに対応したケーブルレイアウトを決定するには、 _ Fabric-attached MetroCluster Installation and Configuration_content を使用します。リファレンス構成ファイル（ RCF ）を使用できるようにするために、 FC スイッチポートの用途がコンテンツに記載されている用途と同じである必要があります。</block>
  <block id="873e03798738ee8f4ea5e24bbff9d693" category="paragraph">に進みます <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ファブリック接続 MetroCluster インストールおよびコンフィギュレーションコンテンツにリンクするには、次の手順を実行します。</block>
  <block id="d603be65c0654d63c4817725f161fe00" category="cell">この手順に進みます。* 注：続行する前に、アグリゲートをオフラインにしてから、内蔵ディスクドライブのアグリゲートを削除する必要があります。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> アグリゲートの管理に関する情報を取得するには、 CLI の _content を使用して _Disk およびアグリゲートの管理にリンクします。</block>
  <block id="0c9aa3612df5d94ae5897306ed0ce042" category="cell">この手順に進みます。* 注：処理を続行する前に、ボリュームを外部ディスクシェルフに移動し、アグリゲートをオフラインにしてから、内蔵ディスクドライブ上のアグリゲートを削除する必要があります。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ボリュームの移動に関する情報を取得するには、 CLI の _CONTENT を使用して、 _Disk およびアグリゲートの管理にリンクしてください。</block>
  <block id="bba101d4874014cacb5b1fc7fbe7165c" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> MetroCluster の管理とディザスタリカバリのコンテンツにリンクし、ネゴシエートスイッチオーバー、修復、スイッチバックの手順に従ってください。</block>
  <block id="d39db7fce48b58f92b4d2b9b0c3351df" category="paragraph">詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ネットワーク管理 _ または _ ONTAP 9 コマンド：マニュアルページリファレンス _ にリンクするには、 _ LIF でのフェイルオーバーの設定 _ に進みます。</block>
  <block id="2c075b61ab1e5a7bc43a337e5b594a77" category="paragraph">storage aggregate relocation コマンドの詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> CLI_ および ONTAP 9 コマンド：マニュアルページリファレンス _ を使用してディスクおよびアグリゲートの管理にリンクするには、次の手順を実行します。</block>
  <block id="5f57a66b3e1d6733761d27be10e87b12" category="list-text">MetroCluster IP 構成および Fabric MetroCluster 構成のその他のアップグレードオプションについては、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> MetroCluster アップグレードおよび Expansion コンテンツにリンクするには、次の手順を実行します。</block>
  <block id="8ccdb707cd31c1e478505a54dfa90f7a" category="paragraph">このコンテンツでは、アグリゲートの再配置を使用して、システムを停止することなくコントローラハードウェアをアップグレードする方法について説明します。</block>
  <block id="6e58652b4dc76659a9eeef1a0ccc6daf" category="paragraph">このコンテンツでは、アグリゲートの再配置（ ARL ）を使用して、システムを停止することなくコントローラハードウェアをアップグレードする方法について説明します。</block>
  <block id="35deab861c4c6574ac8f1f1318cc7d5e" category="paragraph">コントローラハードウェアをアップグレードするその他の方法については、を参照してください <block ref="503464dd540ecb373e0d8f614f4262f2" category="inline-xref-macro-rx"></block> をクリックして、ボリュームまたは storage _ を移動して _ Upgrade にリンクします。</block>
  <block id="f7a0874d2fe18058d08d01fb0120a9d9" category="paragraph">ARL では HA 構成を利用して、ルート以外のアグリゲートの所有権をノード間で移動できます（ルート以外のアグリゲートが同じクラスタ内のストレージを共有している場合）。</block>
  <block id="baf4103e3ee1058b17cd4da23c15704b" category="paragraph">ARL には、システムコマンドまたは手動アップグレードを使用したコントローラハードウェアのアップグレード用の方法が 2 つあります。を開始する前に、コントローラハードウェアのアップグレードに適したコンテンツを選択していることを確認する必要があります。</block>
  <block id="757f3d0794e578256e35f77de45e53d1" category="paragraph">システムコマンドを使用してアップグレードを実行する場合は、次の表を参照してください。</block>
  <block id="b4cae9cb00479e723838f81dbf0e454c" category="cell"><block ref="b4cae9cb00479e723838f81dbf0e454c" category="inline-link-macro-rx"></block></block>
  <block id="a639e57eab0117848ae7c7a2e1bb4b98" category="cell"><block ref="a639e57eab0117848ae7c7a2e1bb4b98" category="inline-link-macro-rx"></block></block>
  <block id="f205bf1a1b77ff86829c2c9003e57d32" category="paragraph">手動アップグレードを実行する場合は、次の表を参照してください。</block>
  <block id="6bc189e4bdf09236271772165ff4ca93" category="cell"><block ref="6bc189e4bdf09236271772165ff4ca93" category="inline-link-macro-rx"></block></block>
  <block id="ac9646c163734765195d079eb6d15091" category="cell"><block ref="ac9646c163734765195d079eb6d15091" category="inline-link-macro-rx"></block></block>
  <block id="55b615d5a5d5462e3f46ce9376778ab0" category="list-text">node3 の起動後に node3 に VLAN とインターフェイスグループの情報を再作成できるように、 VLAN とインターフェイスグループの情報を記録します。</block>
  <block id="a2e30cff23423051f81bd802a4867e92" category="list-text">ポートおよびインターフェイスグループの情報をまだ保存していない場合は、ノード 3 のブート後にそれらの VLAN とインターフェイスグループをノード 3 で再作成できるように、それらの情報を記録します。</block>
  <block id="d5736566f3b38c38d89537f2b1d352ca" category="list-text">まだ保存していない場合は、 VLAN および ifgrp の情報を記録して、ノード 3 のブート後に VLAN および ifgrp を作成し直すことができます。</block>
  <block id="1b4080c52526ea8390adef3facc6646f" category="doc">SAN LIF が元のノードから不要になりました</block>
  <block id="94e9d0bee98aefbd97c04b1401f6c790" category="paragraph">クラスタが SAN 環境にある場合は、元のノードから不要になった SAN LIF を削除してから、元のノードをクラスタから削除する必要があります。</block>
  <block id="e756ac7d9a5fd3abb4a55029a22c0817" category="summary">クラスタの内容とクラスタ環境に応じて、 SAN LIF を移動、削除、または再作成する必要があります。</block>
  <block id="2b3144340f2db340218f76914a6af256" category="doc">新しい SAN LIF を作成するか、削除した SAN LIF を再作成します</block>
  <block id="051662f99e538a90d87104fddd664c40" category="inline-link">ネットワークインターフェイスが作成されます</block>
  <block id="0b3461f9ff1cc0e9748c51914f12d1ac" category="paragraph">クラスタ環境の要件に応じて、この手順で削除した新しい SAN LIF を作成するか、または SAN LIF を再作成することができます。を使用して、 SAN LIF を作成または再作成できます<block ref="307c1988750a87c4014551385f0a3aa7" category="inline-link-rx"></block> OnCommand ® System Manager_documentation を使用したクラスタ管理の手順</block>
  <block id="9755bcbb5a429349c5615c0f3ada05c7" category="summary">SAN LIF の移動が必要になるのは、クラスタの内容を変更する場合だけです。</block>
  <block id="25f08d7b61860ee1109108f6e40dfa08" category="doc">SAN LIF の移動に関する考慮事項</block>
  <block id="78e610b85ab6101167c6fa157b66555f" category="paragraph">クラスタにノードを追加したりクラスタからノードを削除するなど、クラスタの構成を変更する場合は、 SAN LIF を移動するだけで済みます。LIF を移動した場合、 FC ファブリックを再ゾーニングしたり、クラスタに接続されたホストとその新しいターゲットインターフェイスとの間に新しい iSCSI セッションを作成したりする必要はありません。</block>
  <block id="cea2f29230da8c2fef3774a56b365b07" category="paragraph">SAN LIF を移動するには、「 network interface modify 」コマンドを使用します。SAN LIF を移動するには、 LIF をオフラインにし、別のホームノードやポートに移動してから、移動先の新しい場所で LIF をオンラインに戻す必要があります。Asymmetric Logical Unit Access （ ALUA ；非対称論理ユニットアクセス）は、任意の ONTAP 解決策の一部として冗長パスと自動選択を提供します。このため、移動時に LIF がオフラインになっても、 I/O の中断は生じません。ホストは再試行してから、 I/O を別の LIF に移動するだけです。</block>
  <block id="5a7069a59566aed43a1807b999c67b98" category="paragraph">LIF の移動中は、システムを停止することなく次のタスクを実行できます。</block>
  <block id="e30c2c276ce1db1c06a2b1d0b484ce01" category="list-text">クラスタの 1 つの HA ペアを、 LUN データにアクセスするホストにはまったく支障のない形で、アップグレードした HA ペアに置き換えます</block>
  <block id="6122825da89f3a77f8980f730d12d268" category="list-text">ターゲットインターフェイスカードをアップグレードします</block>
  <block id="995489fe191f249d97b2746413c8ce51" category="list-text">Storage Virtual Machine （ SVM ）のリソースをクラスタ内のノードセットから同じクラスタ内の別のノードセットに移行する</block>
  <block id="56156496b19659e54135677ece56f2f7" category="list-text">ホストサーバがオンラインのときに、ホストサーバによる LUN データへのアクセスを中断することなく、 SAN LUN を新しい HA ペアに移動できます</block>
  <block id="2dd82882bae57f157f720bee2e0f1c24" category="inline-link">SAN LIF の移動</block>
  <block id="f6e1595cdf693f15c733ea3348445b77" category="paragraph">詳細については、を参照してください<block ref="52d99da56caea8d9bc5c4380abc20d71" category="inline-link-rx"></block> SAN ストレージ管理に関するドキュメントの手順</block>
  <block id="b5d4cb67b7812ac1a600c8741c4e6c3e" category="summary">クラスタの内容とクラスタ環境に応じて、 SAN LIF を移動、削除、または作成するか、削除した SAN LIF を再作成する必要があります。</block>
  <block id="8093d580d9cc0468991044c64c97b174" category="doc">SAN LIF を移動、削除、または作成する</block>
  <block id="a0b6fb238d938d8b3632372a4084f575" category="inline-link-macro">SAN LIF の移動に関する考慮事項</block>
  <block id="6c4c7e577e407c3d612b2254ba5aeaad" category="list-text"><block ref="6c4c7e577e407c3d612b2254ba5aeaad" category="inline-link-macro-rx"></block></block>
  <block id="4a0fbf919570309e7272750b2374a969" category="list-text"><block ref="4a0fbf919570309e7272750b2374a969" category="inline-link-macro-rx"></block></block>
  <block id="7411801636d93c5890addb910d57f9f3" category="list-text"><block ref="7411801636d93c5890addb910d57f9f3" category="inline-link-macro-rx"></block></block>
  <block id="a0b4daa7e353d3d7dd1a62bec6a63421" category="list-text"><block ref="a0b4daa7e353d3d7dd1a62bec6a63421" category="inline-xref-macro-rx"></block></block>
</blocks>